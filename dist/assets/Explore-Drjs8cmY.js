import{a as H}from"./rolldown-runtime-BaZ8gS7u.js";import{c as W,s as I}from"./animations-Kp4r2r5F.js";import{c as O}from"./framework-BjssErrK.js";import"./database-CdmW3A7f.js";import{An as Q,Jn as V,jt as X,tn as Y}from"./ui-libs-EpJdbQFE.js";import"./media-libs-DyQ6Lt1T.js";import{B as Z,G as ee,K as J,R as se,Ut as A,V as B,et as te,rt as G,u as ae}from"./index-xp3ajAXe.js";import"./VideoPlayer-Dg4Ry3y9.js";import{n as ie}from"./post-DFLt3P9T.js";import"./text-processing-C3-PA5LD.js";import"./actionsheet-z62p0GvR.js";var re=O(),Ne=H(W(),1),s=H(I(),1),le=()=>{const e=(0,re.c)(55),{currentUser:l,searchQuery:i,setSearchQuery:n,activeTab:a,setActiveTab:P,communitiesData:K,isCommunitiesLoading:R,isFetchingMoreCommunities:N,hasMoreCommunities:L,postsData:v,isPostsLoading:z,isFetchingMorePosts:k,hasMorePosts:M,filteredCommunities:j,usersData:g,isUsersLoading:_,isFetchingMoreUsers:C,hasMoreUsers:$,handleCommunityClick:T,loadCommunities:F,loadPosts:E,loadUsers:q,navigate:r}=ae();if((R||z||_)&&!K.length&&!v.length&&!g.length){let t;return e[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,s.jsx)("div",{className:"min-h-screen bg-white dark:bg-black md:rounded-xl",children:[1,2,3].map(ne)}),e[0]=t):t=e[0],t}let c;e[1]!==n?(c=()=>n(""),e[1]=n,e[2]=c):c=e[2];let d;e[3]!==i||e[4]!==n||e[5]!==c?(d=(0,s.jsx)(te,{value:i,onChange:n,onClear:c,placeholder:"Search communities or posts...",className:"flex-1"}),e[3]=i,e[4]=n,e[5]=c,e[6]=d):d=e[6];let o;e[7]!==l||e[8]!==r?(o=l&&(0,s.jsx)("button",{onClick:()=>r("/create-community"),className:"flex size-11 shrink-0 items-center justify-center rounded-xl bg-zinc-950 text-white shadow-sm transition-all hover:scale-105 active:scale-95 dark:bg-white dark:text-zinc-950",title:"Create Community",children:(0,s.jsx)(Y,{size:22,strokeWidth:3})}),e[7]=l,e[8]=r,e[9]=o):o=e[9];let m;e[10]!==d||e[11]!==o?(m=(0,s.jsxs)("div",{className:"flex gap-2 p-4",children:[d,o]}),e[10]=d,e[11]=o,e[12]=m):m=e[12];let y;e[13]===Symbol.for("react.memo_cache_sentinel")?(y=(0,s.jsxs)(B,{value:"communities",className:"flex h-full gap-2 rounded-none border-b-2 border-transparent px-2 font-bold text-zinc-500 transition-all data-[state=active]:border-violet-600 data-[state=active]:bg-transparent data-[state=active]:text-zinc-950 dark:data-[state=active]:text-white",children:[(0,s.jsx)(X,{size:18}),"Communities"]}),e[13]=y):y=e[13];let w;e[14]===Symbol.for("react.memo_cache_sentinel")?(w=(0,s.jsxs)(B,{value:"posts",className:"flex h-full gap-2 rounded-none border-b-2 border-transparent px-2 font-bold text-zinc-500 transition-all data-[state=active]:border-violet-600 data-[state=active]:bg-transparent data-[state=active]:text-zinc-950 dark:data-[state=active]:text-white",children:[(0,s.jsx)(Q,{size:18}),"Posts"]}),e[14]=w):w=e[14];let U;e[15]===Symbol.for("react.memo_cache_sentinel")?(U=(0,s.jsxs)(Z,{className:"gap-8 rounded-none border-none bg-transparent p-0 px-4 w-full h-12",children:[y,w,(0,s.jsxs)(B,{value:"users",className:"flex h-full gap-2 rounded-none border-b-2 border-transparent px-2 font-bold text-zinc-500 transition-all data-[state=active]:border-violet-600 data-[state=active]:bg-transparent data-[state=active]:text-zinc-950 dark:data-[state=active]:text-white",children:[(0,s.jsx)(V,{size:18}),"Users"]})]}),e[15]=U):U=e[15];let x;e[16]!==a||e[17]!==P?(x=(0,s.jsx)("div",{className:"border-t border-zinc-50 px-1 dark:border-zinc-900/50",children:(0,s.jsx)(se,{value:a,onValueChange:P,className:"w-full",children:U})}),e[16]=a,e[17]=P,e[18]=x):x=e[18];let u;e[19]!==m||e[20]!==x?(u=(0,s.jsxs)("div",{className:"sticky top-0 z-10 border-b border-zinc-50 bg-white/90 backdrop-blur-md dark:bg-black/90 dark:border-zinc-900/50",children:[m,x]}),e[19]=m,e[20]=x,e[21]=u):u=e[21];let h;e[22]!==a||e[23]!==j||e[24]!==T||e[25]!==L||e[26]!==N||e[27]!==F?(h=a==="communities"&&(0,s.jsxs)("div",{className:"divide-y divide-zinc-50 dark:divide-zinc-900/50",children:[j.length>0?j.map(t=>(0,s.jsx)(G,{profile:t,onUserClick:T,isCommunity:!0},t.handle)):(0,s.jsx)("div",{className:"p-20 text-center text-zinc-500",children:(0,s.jsx)("p",{className:"font-bold",children:"No communities found"})}),L&&j.length>0&&(0,s.jsx)("div",{className:"flex justify-center border-t border-zinc-50 p-6 dark:border-zinc-900/50",children:(0,s.jsxs)(A,{variant:"secondary",className:"w-full",onClick:()=>F(),disabled:N,children:[N&&(0,s.jsx)("span",{className:"mr-2 animate-pulse",children:"..."}),"Load more"]})})]}),e[22]=a,e[23]=j,e[24]=T,e[25]=L,e[26]=N,e[27]=F,e[28]=h):h=e[28];let f;e[29]!==a||e[30]!==l||e[31]!==M||e[32]!==k||e[33]!==z||e[34]!==E||e[35]!==r||e[36]!==v||e[37]!==i?(f=a==="posts"&&(0,s.jsx)("div",{className:"divide-y divide-zinc-50 dark:divide-zinc-900/50",children:v.length>0?(0,s.jsxs)(s.Fragment,{children:[v.map(t=>(0,s.jsx)(ie,{currentUser:l,...t,onClick:()=>r(`/p/${t.id}`),onUserClick:D=>r(`/u/${D}`)},t.feed_id||t.id)),M&&(0,s.jsx)("div",{className:"flex justify-center border-t border-zinc-50 p-6 dark:border-zinc-900/50",children:(0,s.jsxs)(A,{variant:"secondary",className:"w-full max-w-xs",onClick:()=>E(),disabled:k,children:[" ",k&&(0,s.jsx)("span",{className:"mr-2 animate-pulse",children:"..."}),"Load more"]})})]}):z?(0,s.jsx)("div",{className:"flex flex-col",children:[1,2,3].map(ce)}):(0,s.jsxs)("div",{className:"flex flex-col items-center gap-3 p-20 text-center text-zinc-500",children:[(0,s.jsx)("div",{className:"rounded-full bg-zinc-50 p-4 dark:bg-zinc-900",children:(0,s.jsx)(Q,{size:32,className:"text-zinc-300"})}),(0,s.jsx)("p",{className:"font-bold",children:i?`No posts found matching "${i}"`:"No posts found"})]})}),e[29]=a,e[30]=l,e[31]=M,e[32]=k,e[33]=z,e[34]=E,e[35]=r,e[36]=v,e[37]=i,e[38]=f):f=e[38];let p;e[39]!==a||e[40]!==$||e[41]!==C||e[42]!==_||e[43]!==q||e[44]!==r||e[45]!==i||e[46]!==g?(p=a==="users"&&(0,s.jsx)("div",{className:"divide-y divide-zinc-50 dark:divide-zinc-900/50",children:g.length>0?(0,s.jsxs)(s.Fragment,{children:[g.map(t=>(0,s.jsx)(G,{profile:t,onUserClick:D=>r(`/u/${D}`)},t.id)),$&&(0,s.jsx)("div",{className:"flex justify-center border-t border-zinc-50 p-6 dark:border-zinc-900/50",children:(0,s.jsxs)(A,{variant:"secondary",className:"w-full max-w-xs",onClick:()=>q(),disabled:C,children:[C&&(0,s.jsx)("span",{className:"mr-2 animate-pulse",children:"..."}),"Load more"]})})]}):_?(0,s.jsx)("div",{className:"flex flex-col",children:[1,2,3,4,5].map(de)}):(0,s.jsxs)("div",{className:"flex flex-col items-center gap-3 p-20 text-center text-zinc-500",children:[(0,s.jsx)("div",{className:"rounded-full bg-zinc-50 p-4 dark:bg-zinc-900",children:(0,s.jsx)(V,{size:32,className:"text-zinc-300"})}),(0,s.jsx)("p",{className:"font-bold",children:i?`No users found matching "${i}"`:"No users found"})]})}),e[39]=a,e[40]=$,e[41]=C,e[42]=_,e[43]=q,e[44]=r,e[45]=i,e[46]=g,e[47]=p):p=e[47];let b;e[48]!==f||e[49]!==p||e[50]!==h?(b=(0,s.jsxs)("div",{className:"min-h-screen",children:[h,f,p]}),e[48]=f,e[49]=p,e[50]=h,e[51]=b):b=e[51];let S;return e[52]!==b||e[53]!==u?(S=(0,s.jsxs)("div",{className:"min-h-screen bg-white pb-20 dark:bg-black md:rounded-xl",children:[u,b]}),e[52]=b,e[53]=u,e[54]=S):S=e[54],S},ze=le;function ne(e){return(0,s.jsx)(J,{},e)}function ce(e){return(0,s.jsx)(J,{},e)}function de(e){return(0,s.jsx)(ee,{},e)}export{ze as default};

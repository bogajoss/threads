import{n as b}from"./rolldown-runtime-2JzG8er9.js";import{E as k,S as w,f as y,x as _}from"./framework-BpvJHMsq.js";import"./database-Bte7TL-V.js";import{Gt as u,Qt as g,Sn as P}from"./ui-libs-ydju28Yg.js";import{H as S,Ot as p,it as F,st as H}from"./index-B0P19RxL.js";import{r as M,t as T}from"./SEOHead-C-zRWQJc.js";import"./linkify-CvGdyZEF.js";import"./hooks-DfWcb2bF.js";var r=b(k(),1),e=b(y(),1),$=()=>{const{tag:s}=w(),l=_(),{currentUser:j}=H(),{addToast:n}=F(),[i,c]=(0,r.useState)([]),[v,d]=(0,r.useState)(!0),[o,x]=(0,r.useState)(!1),[m,h]=(0,r.useState)(!0);(0,r.useEffect)(()=>{s&&(async()=>{d(!0);try{const a=await p(`#${s}`,null,10);c(a),h(a.length>=10)}catch(a){console.error("Failed to load hashtag posts:",a),n("Failed to load posts","error")}finally{d(!1)}})()},[s,n]);const N=async()=>{if(!(o||!m)){x(!0);try{const t=i[i.length-1],a=t?t.sortTimestamp:null,f=await p(`#${s}`,a,10);f.length<10&&h(!1),c(z=>[...z,...f])}catch(t){console.error("Failed to load more posts:",t)}finally{x(!1)}}};return(0,e.jsxs)("div",{className:"border-zinc-100 dark:border-zinc-800 bg-white dark:bg-black rounded-none md:rounded-xl overflow-hidden min-h-screen pb-20",children:[(0,e.jsx)(T,{title:`#${s}`,description:`Trending posts and discussions tagged with #${s} on Sysm.`}),(0,e.jsxs)("div",{className:"relative",children:[(0,e.jsx)("div",{className:"sticky top-0 bg-white/90 dark:bg-black/90 backdrop-blur-md z-20 border-b border-zinc-100 dark:border-zinc-800 px-4 py-3",children:(0,e.jsxs)("div",{className:"flex items-center gap-x-4",children:[(0,e.jsx)("button",{onClick:()=>l(-1),className:"p-1 rounded-full hover:bg-zinc-100 dark:hover:bg-zinc-800 dark:text-white transition-colors",children:(0,e.jsx)(P,{size:22})}),(0,e.jsxs)("div",{className:"flex flex-col",children:[(0,e.jsxs)("h5",{className:"text-lg font-bold dark:text-white leading-none",children:["#",s]}),(0,e.jsx)("span",{className:"text-xs text-zinc-500 mt-0.5",children:"Hashtag"})]})]})}),(0,e.jsxs)("div",{className:"relative",children:[(0,e.jsx)("div",{className:"h-32 sm:h-40 bg-gradient-to-r from-violet-500/10 to-fuchsia-500/10 overflow-hidden relative",children:(0,e.jsx)("div",{className:"absolute inset-0 bg-grid-white/[0.02] bg-[size:20px_20px]"})}),(0,e.jsxs)("div",{className:"px-4 pb-6",children:[(0,e.jsx)("div",{className:"flex justify-between items-end -mt-10 mb-4 relative z-10",children:(0,e.jsx)("div",{className:"size-20 sm:size-24 rounded-2xl border-4 border-white dark:border-black bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center shadow-xl",children:(0,e.jsx)(g,{size:40,className:"text-zinc-400"})})}),(0,e.jsxs)("div",{className:"space-y-1",children:[(0,e.jsxs)("h1",{className:"text-2xl sm:text-3xl font-black dark:text-white tracking-tight leading-tight",children:["#",s]}),(0,e.jsxs)("p",{className:"text-zinc-500 text-sm sm:text-base",children:["Posts tagged with #",s]})]})]})]}),(0,e.jsx)("div",{className:"border-t border-zinc-100 dark:border-zinc-800",children:v?(0,e.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,e.jsx)(u,{className:"animate-spin text-violet-500",size:32})}):i.length>0?(0,e.jsxs)(e.Fragment,{children:[i.map(t=>(0,e.jsx)(M,{currentUser:j,showToast:n,...t,onClick:()=>l(`/post/${t.id}`),onUserClick:a=>l(`/u/${a}`)},t.feed_id||t.id)),m&&(0,e.jsx)("div",{className:"p-6 flex justify-center",children:(0,e.jsxs)(S,{variant:"secondary",className:"w-full max-w-xs",onClick:N,disabled:o,children:[o&&(0,e.jsx)(u,{size:18,className:"animate-spin mr-2"}),"Load more"]})})]}):(0,e.jsxs)("div",{className:"p-20 text-center text-zinc-500 flex flex-col items-center gap-4",children:[(0,e.jsx)("div",{className:"bg-zinc-50 dark:bg-zinc-900 p-6 rounded-full mb-2",children:(0,e.jsx)(g,{size:40,className:"text-zinc-300"})}),(0,e.jsx)("h3",{className:"text-xl font-bold dark:text-white",children:"No posts found"}),(0,e.jsxs)("p",{className:"text-sm max-w-[250px]",children:["Be the first to post with #",s,"!"]})]})})]})]})},G=$;export{G as default};

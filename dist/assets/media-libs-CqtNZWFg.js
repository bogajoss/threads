import{a as wi}from"./rolldown-runtime-BaZ8gS7u.js";import{c as dn,s as fn}from"./animations-DZuN0xpW.js";import{r as pn}from"./framework-YRQI4BOE.js";function mn(e,t){return t.forEach((function(i){i&&typeof i!="string"&&!Array.isArray(i)&&Object.keys(i).forEach((function(s){if(s!=="default"&&!(s in e)){var n=Object.getOwnPropertyDescriptor(i,s);Object.defineProperty(e,s,n.get?n:{enumerable:!0,get:function(){return i[s]}})}}))})),Object.freeze(e)}function ki(e,t){return new Promise((function(i,s){let n;return gn(e).then((function(r){try{return n=r,i(new Blob([t.slice(0,2),n,t.slice(2)],{type:"image/jpeg"}))}catch(a){return s(a)}}),s)}))}var gn=e=>new Promise(((t,i)=>{const s=new FileReader;s.addEventListener("load",(({target:{result:n}})=>{const r=new DataView(n);let a=0;if(r.getUint16(a)!==65496)return i("not a valid JPEG");for(a+=2;;){const o=r.getUint16(a);if(o===65498)break;const h=r.getUint16(a+2);if(o===65505&&r.getUint32(a+4)===1165519206){const f=a+10;let l;switch(r.getUint16(f)){case 18761:l=!0;break;case 19789:l=!1;break;default:return i("TIFF header contains invalid endian")}if(r.getUint16(f+2,l)!==42)return i("TIFF header contains invalid version");const u=r.getUint32(f+4,l),c=f+u+2+12*r.getUint16(f+u,l);for(let d=f+u+2;d<c;d+=12)if(r.getUint16(d,l)==274){if(r.getUint16(d+2,l)!==3)return i("Orientation data type is invalid");if(r.getUint32(d+4,l)!==1)return i("Orientation data count is invalid");r.setUint16(d+8,1,l);break}return t(n.slice(a,a+2+h))}a+=2+h}return t(new Blob)})),s.readAsArrayBuffer(e)})),kt={},bn={get exports(){return kt},set exports(e){kt=e}};(function(e){var t,i,s={};bn.exports=s,s.parse=function(n,r){for(var a=s.bin.readUshort,o=s.bin.readUint,h=0,f={},l=new Uint8Array(n),u=l.length-4;o(l,u)!=101010256;)u--;h=u,h+=4;var c=a(l,h+=4);a(l,h+=2);var d=o(l,h+=2),m=o(l,h+=4);h+=4,h=m;for(var T=0;T<c;T++){o(l,h),h+=4,h+=4,h+=4,o(l,h+=4),d=o(l,h+=4);var x=o(l,h+=4),k=a(l,h+=4),M=a(l,h+2),L=a(l,h+4);h+=6;var E=o(l,h+=8);h+=4,h+=k+M+L,s._readLocal(l,E,f,d,x,r)}return f},s._readLocal=function(n,r,a,o,h,f){var l=s.bin.readUshort,u=s.bin.readUint;u(n,r),l(n,r+=4),l(n,r+=2);var c=l(n,r+=2);u(n,r+=2),u(n,r+=4),r+=4;var d=l(n,r+=8),m=l(n,r+=2);r+=2;var T=s.bin.readUTF8(n,r,d);if(r+=d,r+=m,f)a[T]={size:h,csize:o};else{var x=new Uint8Array(n.buffer,r);if(c==0)a[T]=new Uint8Array(x.buffer.slice(r,r+o));else{if(c!=8)throw"unknown compression method: "+c;var k=new Uint8Array(h);s.inflateRaw(x,k),a[T]=k}}},s.inflateRaw=function(n,r){return s.F.inflate(n,r)},s.inflate=function(n,r){return n[0],n[1],s.inflateRaw(new Uint8Array(n.buffer,n.byteOffset+2,n.length-6),r)},s.deflate=function(n,r){r??={level:6};var a=0,o=new Uint8Array(50+Math.floor(1.1*n.length));o[a]=120,o[a+1]=156,a+=2,a=s.F.deflateRaw(n,o,a,r.level);var h=s.adler(n,0,n.length);return o[a+0]=h>>>24&255,o[a+1]=h>>>16&255,o[a+2]=h>>>8&255,o[a+3]=h>>>0&255,new Uint8Array(o.buffer,0,a+4)},s.deflateRaw=function(n,r){r??={level:6};var a=new Uint8Array(50+Math.floor(1.1*n.length)),o=s.F.deflateRaw(n,a,o,r.level);return new Uint8Array(a.buffer,0,o)},s.encode=function(n,r){r??=!1;var a=0,o=s.bin.writeUint,h=s.bin.writeUshort,f={};for(var l in n){var u=!s._noNeed(l)&&!r,c=n[l],d=s.crc.crc(c,0,c.length);f[l]={cpr:u,usize:c.length,crc:d,file:u?s.deflateRaw(c):c}}for(var l in f)a+=f[l].file.length+30+46+2*s.bin.sizeUTF8(l);a+=22;var m=new Uint8Array(a),T=0,x=[];for(var l in f){var k=f[l];x.push(T),T=s._writeHeader(m,T,l,k,0)}var M=0,L=T;for(var l in f)k=f[l],x.push(T),T=s._writeHeader(m,T,l,k,1,x[M++]);var E=T-L;return o(m,T,101010256),T+=4,h(m,T+=4,M),h(m,T+=2,M),o(m,T+=2,E),o(m,T+=4,L),T+=4,T+=2,m.buffer},s._noNeed=function(n){var r=n.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(r)!=-1},s._writeHeader=function(n,r,a,o,h,f){var l=s.bin.writeUint,u=s.bin.writeUshort,c=o.file;return l(n,r,h==0?67324752:33639248),r+=4,h==1&&(r+=2),u(n,r,20),u(n,r+=2,0),u(n,r+=2,o.cpr?8:0),l(n,r+=2,0),l(n,r+=4,o.crc),l(n,r+=4,c.length),l(n,r+=4,o.usize),u(n,r+=4,s.bin.sizeUTF8(a)),u(n,r+=2,0),r+=2,h==1&&(r+=2,r+=2,l(n,r+=6,f),r+=4),r+=s.bin.writeUTF8(n,r,a),h==0&&(n.set(c,r),r+=c.length),r},s.crc={table:(function(){for(var n=new Uint32Array(256),r=0;r<256;r++){for(var a=r,o=0;o<8;o++)1&a?a=3988292384^a>>>1:a>>>=1;n[r]=a}return n})(),update:function(n,r,a,o){for(var h=0;h<o;h++)n=s.crc.table[255&(n^r[a+h])]^n>>>8;return n},crc:function(n,r,a){return 4294967295^s.crc.update(4294967295,n,r,a)}},s.adler=function(n,r,a){for(var o=1,h=0,f=r,l=r+a;f<l;){for(var u=Math.min(f+5552,l);f<u;)h+=o+=n[f++];o%=65521,h%=65521}return h<<16|o},s.bin={readUshort:function(n,r){return n[r]|n[r+1]<<8},writeUshort:function(n,r,a){n[r]=255&a,n[r+1]=a>>8&255},readUint:function(n,r){return 16777216*n[r+3]+(n[r+2]<<16|n[r+1]<<8|n[r])},writeUint:function(n,r,a){n[r]=255&a,n[r+1]=a>>8&255,n[r+2]=a>>16&255,n[r+3]=a>>24&255},readASCII:function(n,r,a){for(var o="",h=0;h<a;h++)o+=String.fromCharCode(n[r+h]);return o},writeASCII:function(n,r,a){for(var o=0;o<a.length;o++)n[r+o]=a.charCodeAt(o)},pad:function(n){return n.length<2?"0"+n:n},readUTF8:function(n,r,a){for(var o,h="",f=0;f<a;f++)h+="%"+s.bin.pad(n[r+f].toString(16));try{o=decodeURIComponent(h)}catch{return s.bin.readASCII(n,r,a)}return o},writeUTF8:function(n,r,a){for(var o=a.length,h=0,f=0;f<o;f++){var l=a.charCodeAt(f);if((4294967168&l)==0)n[r+h]=l,h++;else if((4294965248&l)==0)n[r+h]=192|l>>6,n[r+h+1]=128|l>>0&63,h+=2;else if((4294901760&l)==0)n[r+h]=224|l>>12,n[r+h+1]=128|l>>6&63,n[r+h+2]=128|l>>0&63,h+=3;else{if((4292870144&l)!=0)throw"e";n[r+h]=240|l>>18,n[r+h+1]=128|l>>12&63,n[r+h+2]=128|l>>6&63,n[r+h+3]=128|l>>0&63,h+=4}}return h},sizeUTF8:function(n){for(var r=n.length,a=0,o=0;o<r;o++){var h=n.charCodeAt(o);if((4294967168&h)==0)a++;else if((4294965248&h)==0)a+=2;else if((4294901760&h)==0)a+=3;else{if((4292870144&h)!=0)throw"e";a+=4}}return a}},s.F={},s.F.deflateRaw=function(n,r,a,o){var h=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][o],f=s.F.U,l=s.F._goodIndex;s.F._hash;var u=s.F._putsE,c=0,d=a<<3,m=0,T=n.length;if(o==0){for(;c<T;)u(r,d,c+(C=Math.min(65535,T-c))==T?1:0),d=s.F._copyExact(n,c,C,r,d+8),c+=C;return d>>>3}var x=f.lits,k=f.strt,M=f.prev,L=0,E=0,D=0,w=0,R=0,p=0;for(T>2&&(k[p=s.F._hash(n,0)]=0),c=0;c<T;c++){if(R=p,c+1<T-2){p=s.F._hash(n,c+1);var b=c+1&32767;M[b]=k[p],k[p]=b}if(m<=c){(L>14e3||E>26697)&&T-c>100&&(m<c&&(x[L]=c-m,L+=2,m=c),d=s.F._writeBlock(c==T-1||m==T?1:0,x,L,w,n,D,c-D,r,d),L=E=w=0,D=c);var A=0;c<T-2&&(A=s.F._bestMatch(n,c,M,R,Math.min(h[2],T-c),h[3]));var C=A>>>16,P=65535&A;if(A!=0){P=65535&A;var _=l(C=A>>>16,f.of0);f.lhst[257+_]++;var S=l(P,f.df0);f.dhst[S]++,w+=f.exb[_]+f.dxb[S],x[L]=C<<23|c-m,x[L+1]=P<<16|_<<8|S,L+=2,m=c+C}else f.lhst[n[c]]++;E++}}for(D==c&&n.length!=0||(m<c&&(x[L]=c-m,L+=2,m=c),d=s.F._writeBlock(1,x,L,w,n,D,c-D,r,d),L=0,E=0,L=E=w=0,D=c);(7&d)!=0;)d++;return d>>>3},s.F._bestMatch=function(n,r,a,o,h,f){var l=32767&r,u=a[l],c=l-u+32768&32767;if(u==l||o!=s.F._hash(n,r-c))return 0;for(var d=0,m=0,T=Math.min(32767,r);c<=T&&--f!=0&&u!=l;){if(d==0||n[r+d]==n[r+d-c]){var x=s.F._howLong(n,r,c);if(x>d){if(m=c,(d=x)>=h)break;c+2<x&&(x=c+2);for(var k=0,M=0;M<x-2;M++){var L=r-c+M+32768&32767,E=L-a[L]+32768&32767;E>k&&(k=E,u=L)}}}c+=(l=u)-(u=a[l])+32768&32767}return d<<16|m},s.F._howLong=function(n,r,a){if(n[r]!=n[r-a]||n[r+1]!=n[r+1-a]||n[r+2]!=n[r+2-a])return 0;var o=r,h=Math.min(n.length,r+258);for(r+=3;r<h&&n[r]==n[r-a];)r++;return r-o},s.F._hash=function(n,r){return(n[r]<<8|n[r+1])+(n[r+2]<<4)&65535},s.saved=0,s.F._writeBlock=function(n,r,a,o,h,f,l,u,c){var d,m,T,x,k,M,L,E,D,w=s.F.U,R=s.F._putsF,p=s.F._putsE;w.lhst[256]++,m=(d=s.F.getTrees())[0],T=d[1],x=d[2],k=d[3],M=d[4],L=d[5],E=d[6],D=d[7];var b=32+((c+3&7)==0?0:8-(c+3&7))+(l<<3),A=o+s.F.contSize(w.fltree,w.lhst)+s.F.contSize(w.fdtree,w.dhst),C=o+s.F.contSize(w.ltree,w.lhst)+s.F.contSize(w.dtree,w.dhst);C+=14+3*L+s.F.contSize(w.itree,w.ihst)+(2*w.ihst[16]+3*w.ihst[17]+7*w.ihst[18]);for(var P=0;P<286;P++)w.lhst[P]=0;for(P=0;P<30;P++)w.dhst[P]=0;for(P=0;P<19;P++)w.ihst[P]=0;var _=b<A&&b<C?0:A<C?1:2;if(R(u,c,n),R(u,c+1,_),c+=3,_==0){for(;(7&c)!=0;)c++;c=s.F._copyExact(h,f,l,u,c)}else{var S,N;if(_==1&&(S=w.fltree,N=w.fdtree),_==2){s.F.makeCodes(w.ltree,m),s.F.revCodes(w.ltree,m),s.F.makeCodes(w.dtree,T),s.F.revCodes(w.dtree,T),s.F.makeCodes(w.itree,x),s.F.revCodes(w.itree,x),S=w.ltree,N=w.dtree,p(u,c,k-257),p(u,c+=5,M-1),p(u,c+=5,L-4),c+=4;for(var v=0;v<L;v++)p(u,c+3*v,w.itree[1+(w.ordr[v]<<1)]);c+=3*L,c=s.F._codeTiny(E,w.itree,u,c),c=s.F._codeTiny(D,w.itree,u,c)}for(var g=f,U=0;U<a;U+=2){for(var I=r[U],F=I>>>23,z=g+(8388607&I);g<z;)c=s.F._writeLit(h[g++],S,u,c);if(F!=0){var j=r[U+1],q=j>>16,H=j>>8&255,O=255&j;p(u,c=s.F._writeLit(257+H,S,u,c),F-w.of0[H]),c+=w.exb[H],R(u,c=s.F._writeLit(O,N,u,c),q-w.df0[O]),c+=w.dxb[O],g+=F}}c=s.F._writeLit(256,S,u,c)}return c},s.F._copyExact=function(n,r,a,o,h){var f=h>>>3;return o[f]=a,o[f+1]=a>>>8,o[f+2]=255-o[f],o[f+3]=255-o[f+1],f+=4,o.set(new Uint8Array(n.buffer,r,a),f),h+(a+4<<3)},s.F.getTrees=function(){for(var n=s.F.U,r=s.F._hufTree(n.lhst,n.ltree,15),a=s.F._hufTree(n.dhst,n.dtree,15),o=[],h=s.F._lenCodes(n.ltree,o),f=[],l=s.F._lenCodes(n.dtree,f),u=0;u<o.length;u+=2)n.ihst[o[u]]++;for(u=0;u<f.length;u+=2)n.ihst[f[u]]++;for(var c=s.F._hufTree(n.ihst,n.itree,7),d=19;d>4&&n.itree[1+(n.ordr[d-1]<<1)]==0;)d--;return[r,a,c,h,l,d,o,f]},s.F.getSecond=function(n){for(var r=[],a=0;a<n.length;a+=2)r.push(n[a+1]);return r},s.F.nonZero=function(n){for(var r="",a=0;a<n.length;a+=2)n[a+1]!=0&&(r+=(a>>1)+",");return r},s.F.contSize=function(n,r){for(var a=0,o=0;o<r.length;o++)a+=r[o]*n[1+(o<<1)];return a},s.F._codeTiny=function(n,r,a,o){for(var h=0;h<n.length;h+=2){var f=n[h],l=n[h+1];o=s.F._writeLit(f,r,a,o);var u=f==16?2:f==17?3:7;f>15&&(s.F._putsE(a,o,l,u),o+=u)}return o},s.F._lenCodes=function(n,r){for(var a=n.length;a!=2&&n[a-1]==0;)a-=2;for(var o=0;o<a;o+=2){var h=n[o+1],f=o+3<a?n[o+3]:-1,l=o+5<a?n[o+5]:-1,u=o==0?-1:n[o-1];if(h==0&&f==h&&l==h){for(var c=o+5;c+2<a&&n[c+2]==h;)c+=2;(d=Math.min(c+1-o>>>1,138))<11?r.push(17,d-3):r.push(18,d-11),o+=2*d-2}else if(h==u&&f==h&&l==h){for(c=o+5;c+2<a&&n[c+2]==h;)c+=2;var d=Math.min(c+1-o>>>1,6);r.push(16,d-3),o+=2*d-2}else r.push(h,0)}return a>>>1},s.F._hufTree=function(n,r,a){var o=[],h=n.length,f=r.length,l=0;for(l=0;l<f;l+=2)r[l]=0,r[l+1]=0;for(l=0;l<h;l++)n[l]!=0&&o.push({lit:l,f:n[l]});var u=o.length,c=o.slice(0);if(u==0)return 0;if(u==1){var d=o[0].lit;return c=d==0?1:0,r[1+(d<<1)]=1,r[1+(c<<1)]=1,1}o.sort((function(E,D){return E.f-D.f}));var m=o[0],T=o[1],x=0,k=1,M=2;for(o[0]={lit:-1,f:m.f+T.f,l:m,r:T,d:0};k!=u-1;)m=x!=k&&(M==u||o[x].f<o[M].f)?o[x++]:o[M++],T=x!=k&&(M==u||o[x].f<o[M].f)?o[x++]:o[M++],o[k++]={lit:-1,f:m.f+T.f,l:m,r:T};var L=s.F.setDepth(o[k-1],0);for(L>a&&(s.F.restrictDepth(c,a,L),L=a),l=0;l<u;l++)r[1+(c[l].lit<<1)]=c[l].d;return L},s.F.setDepth=function(n,r){return n.lit!=-1?(n.d=r,r):Math.max(s.F.setDepth(n.l,r+1),s.F.setDepth(n.r,r+1))},s.F.restrictDepth=function(n,r,a){var o=0,h=1<<a-r,f=0;for(n.sort((function(u,c){return c.d==u.d?u.f-c.f:c.d-u.d})),o=0;o<n.length&&n[o].d>r;o++){var l=n[o].d;n[o].d=r,f+=h-(1<<a-l)}for(f>>>=a-r;f>0;)(l=n[o].d)<r?(n[o].d++,f-=1<<r-l-1):o++;for(;o>=0;o--)n[o].d==r&&f<0&&(n[o].d--,f++);f!=0&&console.log("debt left")},s.F._goodIndex=function(n,r){var a=0;return r[16|a]<=n&&(a|=16),r[8|a]<=n&&(a|=8),r[4|a]<=n&&(a|=4),r[2|a]<=n&&(a|=2),r[1|a]<=n&&(a|=1),a},s.F._writeLit=function(n,r,a,o){return s.F._putsF(a,o,r[n<<1]),o+r[1+(n<<1)]},s.F.inflate=function(n,r){var a=Uint8Array;if(n[0]==3&&n[1]==0)return r||new a(0);var o=s.F,h=o._bitsF,f=o._bitsE,l=o._decodeTiny,u=o.makeCodes,c=o.codes2map,d=o._get17,m=o.U,T=r==null;T&&(r=new a(n.length>>>2<<3));for(var x,k,M=0,L=0,E=0,D=0,w=0,R=0,p=0,b=0,A=0;M==0;)if(M=h(n,A,1),L=h(n,A+1,2),A+=3,L!=0){if(T&&(r=s.F._check(r,b+(1<<17))),L==1&&(x=m.flmap,k=m.fdmap,R=511,p=31),L==2){E=f(n,A,5)+257,D=f(n,A+5,5)+1,w=f(n,A+10,4)+4,A+=14;for(var C=0;C<38;C+=2)m.itree[C]=0,m.itree[C+1]=0;var P=1;for(C=0;C<w;C++){var _=f(n,A+3*C,3);m.itree[1+(m.ordr[C]<<1)]=_,_>P&&(P=_)}A+=3*w,u(m.itree,P),c(m.itree,P,m.imap),x=m.lmap,k=m.dmap,A=l(m.imap,(1<<P)-1,E+D,n,A,m.ttree);var S=o._copyOut(m.ttree,0,E,m.ltree);R=(1<<S)-1;var N=o._copyOut(m.ttree,E,D,m.dtree);p=(1<<N)-1,u(m.ltree,S),c(m.ltree,S,x),u(m.dtree,N),c(m.dtree,N,k)}for(;;){var v=x[d(n,A)&R];A+=15&v;var g=v>>>4;if(!(g>>>8))r[b++]=g;else{if(g==256)break;var U=b+g-254;if(g>264){var I=m.ldef[g-257];U=b+(I>>>3)+f(n,A,7&I),A+=7&I}var F=k[d(n,A)&p];A+=15&F;var z=F>>>4,j=m.ddef[z],q=(j>>>4)+h(n,A,15&j);for(A+=15&j,T&&(r=s.F._check(r,b+(1<<17)));b<U;)r[b]=r[b++-q],r[b]=r[b++-q],r[b]=r[b++-q],r[b]=r[b++-q];b=U}}}else{(7&A)!=0&&(A+=8-(7&A));var H=4+(A>>>3),O=n[H-4]|n[H-3]<<8;T&&(r=s.F._check(r,b+O)),r.set(new a(n.buffer,n.byteOffset+H,O),b),A=H+O<<3,b+=O}return r.length==b?r:r.slice(0,b)},s.F._check=function(n,r){var a=n.length;if(r<=a)return n;var o=new Uint8Array(Math.max(a<<1,r));return o.set(n,0),o},s.F._decodeTiny=function(n,r,a,o,h,f){for(var l=s.F._bitsE,u=s.F._get17,c=0;c<a;){var d=n[u(o,h)&r];h+=15&d;var m=d>>>4;if(m<=15)f[c]=m,c++;else{var T=0,x=0;m==16?(x=3+l(o,h,2),h+=2,T=f[c-1]):m==17?(x=3+l(o,h,3),h+=3):m==18&&(x=11+l(o,h,7),h+=7);for(var k=c+x;c<k;)f[c]=T,c++}}return h},s.F._copyOut=function(n,r,a,o){for(var h=0,f=0,l=o.length>>>1;f<a;){var u=n[f+r];o[f<<1]=0,o[1+(f<<1)]=u,u>h&&(h=u),f++}for(;f<l;)o[f<<1]=0,o[1+(f<<1)]=0,f++;return h},s.F.makeCodes=function(n,r){for(var a,o,h,f,l=s.F.U,u=n.length,c=l.bl_count,d=0;d<=r;d++)c[d]=0;for(d=1;d<u;d+=2)c[n[d]]++;var m=l.next_code;for(a=0,c[0]=0,o=1;o<=r;o++)a=a+c[o-1]<<1,m[o]=a;for(h=0;h<u;h+=2)(f=n[h+1])!=0&&(n[h]=m[f],m[f]++)},s.F.codes2map=function(n,r,a){for(var o=n.length,h=s.F.U.rev15,f=0;f<o;f+=2)if(n[f+1]!=0)for(var l=f>>1,u=n[f+1],c=l<<4|u,d=r-u,m=n[f]<<d,T=m+(1<<d);m!=T;)a[h[m]>>>15-r]=c,m++},s.F.revCodes=function(n,r){for(var a=s.F.U.rev15,o=15-r,h=0;h<n.length;h+=2)n[h]=a[n[h]<<r-n[h+1]]>>>o},s.F._putsE=function(n,r,a){a<<=7&r;var o=r>>>3;n[o]|=a,n[o+1]|=a>>>8},s.F._putsF=function(n,r,a){a<<=7&r;var o=r>>>3;n[o]|=a,n[o+1]|=a>>>8,n[o+2]|=a>>>16},s.F._bitsE=function(n,r,a){return(n[r>>>3]|n[1+(r>>>3)]<<8)>>>(7&r)&(1<<a)-1},s.F._bitsF=function(n,r,a){return(n[r>>>3]|n[1+(r>>>3)]<<8|n[2+(r>>>3)]<<16)>>>(7&r)&(1<<a)-1},s.F._get17=function(n,r){return(n[r>>>3]|n[1+(r>>>3)]<<8|n[2+(r>>>3)]<<16)>>>(7&r)},s.F._get25=function(n,r){return(n[r>>>3]|n[1+(r>>>3)]<<8|n[2+(r>>>3)]<<16|n[3+(r>>>3)]<<24)>>>(7&r)},s.F.U=(t=Uint16Array,i=Uint32Array,{next_code:new t(16),bl_count:new t(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new t(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new i(32),flmap:new t(512),fltree:[],fdmap:new t(32),fdtree:[],lmap:new t(32768),ltree:[],ttree:[],dmap:new t(32768),dtree:[],imap:new t(512),itree:[],rev15:new t(32768),lhst:new i(286),dhst:new i(30),ihst:new i(19),lits:new i(15e3),strt:new t(65536),prev:new t(32768)}),(function(){for(var n=s.F.U,r=0;r<32768;r++){var a=r;a=(4278255360&(a=(4042322160&(a=(3435973836&(a=(2863311530&a)>>>1|(1431655765&a)<<1))>>>2|(858993459&a)<<2))>>>4|(252645135&a)<<4))>>>8|(16711935&a)<<8,n.rev15[r]=(a>>>16|a<<16)>>>17}function o(h,f,l){for(;f--!=0;)h.push(0,l)}for(r=0;r<32;r++)n.ldef[r]=n.of0[r]<<3|n.exb[r],n.ddef[r]=n.df0[r]<<4|n.dxb[r];o(n.fltree,144,8),o(n.fltree,112,9),o(n.fltree,24,7),o(n.fltree,8,8),s.F.makeCodes(n.fltree,9),s.F.codes2map(n.fltree,9,n.flmap),s.F.revCodes(n.fltree,9),o(n.fdtree,32,5),s.F.makeCodes(n.fdtree,5),s.F.codes2map(n.fdtree,5,n.fdmap),s.F.revCodes(n.fdtree,5),o(n.itree,19,0),o(n.ltree,286,0),o(n.dtree,30,0),o(n.ttree,320,0)})()})();var yn=mn({__proto__:null,default:kt},[kt]),Me=(function(){var e={nextZero(l,u){for(;l[u]!=0;)u++;return u},readUshort:(l,u)=>l[u]<<8|l[u+1],writeUshort(l,u,c){l[u]=c>>8&255,l[u+1]=255&c},readUint:(l,u)=>16777216*l[u]+(l[u+1]<<16|l[u+2]<<8|l[u+3]),writeUint(l,u,c){l[u]=c>>24&255,l[u+1]=c>>16&255,l[u+2]=c>>8&255,l[u+3]=255&c},readASCII(l,u,c){let d="";for(let m=0;m<c;m++)d+=String.fromCharCode(l[u+m]);return d},writeASCII(l,u,c){for(let d=0;d<c.length;d++)l[u+d]=c.charCodeAt(d)},readBytes(l,u,c){const d=[];for(let m=0;m<c;m++)d.push(l[u+m]);return d},pad:l=>l.length<2?`0${l}`:l,readUTF8(l,u,c){let d,m="";for(let T=0;T<c;T++)m+=`%${e.pad(l[u+T].toString(16))}`;try{d=decodeURIComponent(m)}catch{return e.readASCII(l,u,c)}return d}};function t(l,u,c,d){const m=u*c,T=r(d),x=Math.ceil(u*T/8),k=new Uint8Array(4*m),M=new Uint32Array(k.buffer),{ctype:L}=d,{depth:E}=d,D=e.readUshort;if(L==6){const I=m<<2;if(E==8)for(var w=0;w<I;w+=4)k[w]=l[w],k[w+1]=l[w+1],k[w+2]=l[w+2],k[w+3]=l[w+3];if(E==16)for(w=0;w<I;w++)k[w]=l[w<<1]}else if(L==2){const I=d.tabs.tRNS;if(I==null){if(E==8)for(w=0;w<m;w++){var R=3*w;M[w]=255<<24|l[R+2]<<16|l[R+1]<<8|l[R]}if(E==16)for(w=0;w<m;w++)R=6*w,M[w]=255<<24|l[R+4]<<16|l[R+2]<<8|l[R]}else{var p=I[0];const F=I[1],z=I[2];if(E==8)for(w=0;w<m;w++){var b=w<<2;R=3*w,M[w]=255<<24|l[R+2]<<16|l[R+1]<<8|l[R],l[R]==p&&l[R+1]==F&&l[R+2]==z&&(k[b+3]=0)}if(E==16)for(w=0;w<m;w++)b=w<<2,R=6*w,M[w]=255<<24|l[R+4]<<16|l[R+2]<<8|l[R],D(l,R)==p&&D(l,R+2)==F&&D(l,R+4)==z&&(k[b+3]=0)}}else if(L==3){const I=d.tabs.PLTE,F=d.tabs.tRNS,z=F?F.length:0;if(E==1)for(var A=0;A<c;A++){var C=A*x,P=A*u;for(w=0;w<u;w++){b=P+w<<2;var _=3*(S=l[C+(w>>3)]>>7-((7&w)<<0)&1);k[b]=I[_],k[b+1]=I[_+1],k[b+2]=I[_+2],k[b+3]=S<z?F[S]:255}}if(E==2)for(A=0;A<c;A++)for(C=A*x,P=A*u,w=0;w<u;w++)b=P+w<<2,_=3*(S=l[C+(w>>2)]>>6-((3&w)<<1)&3),k[b]=I[_],k[b+1]=I[_+1],k[b+2]=I[_+2],k[b+3]=S<z?F[S]:255;if(E==4)for(A=0;A<c;A++)for(C=A*x,P=A*u,w=0;w<u;w++)b=P+w<<2,_=3*(S=l[C+(w>>1)]>>4-((1&w)<<2)&15),k[b]=I[_],k[b+1]=I[_+1],k[b+2]=I[_+2],k[b+3]=S<z?F[S]:255;if(E==8)for(w=0;w<m;w++){var S;b=w<<2,_=3*(S=l[w]),k[b]=I[_],k[b+1]=I[_+1],k[b+2]=I[_+2],k[b+3]=S<z?F[S]:255}}else if(L==4){if(E==8)for(w=0;w<m;w++){b=w<<2;var N=l[v=w<<1];k[b]=N,k[b+1]=N,k[b+2]=N,k[b+3]=l[v+1]}if(E==16)for(w=0;w<m;w++){var v;b=w<<2,N=l[v=w<<2],k[b]=N,k[b+1]=N,k[b+2]=N,k[b+3]=l[v+2]}}else if(L==0)for(p=d.tabs.tRNS?d.tabs.tRNS:-1,A=0;A<c;A++){const I=A*x,F=A*u;if(E==1)for(var g=0;g<u;g++){var U=(N=255*(l[I+(g>>>3)]>>>7-(7&g)&1))==255*p?0:255;M[F+g]=U<<24|N<<16|N<<8|N}else if(E==2)for(g=0;g<u;g++)U=(N=85*(l[I+(g>>>2)]>>>6-((3&g)<<1)&3))==85*p?0:255,M[F+g]=U<<24|N<<16|N<<8|N;else if(E==4)for(g=0;g<u;g++)U=(N=17*(l[I+(g>>>1)]>>>4-((1&g)<<2)&15))==17*p?0:255,M[F+g]=U<<24|N<<16|N<<8|N;else if(E==8)for(g=0;g<u;g++)U=(N=l[I+g])==p?0:255,M[F+g]=U<<24|N<<16|N<<8|N;else if(E==16)for(g=0;g<u;g++)N=l[I+(g<<1)],U=D(l,I+(g<<1))==p?0:255,M[F+g]=U<<24|N<<16|N<<8|N}return k}function i(l,u,c,d){const m=r(l),T=Math.ceil(c*m/8),x=new Uint8Array((T+1+l.interlace)*d);return u=l.tabs.CgBI?n(u,x):s(u,x),l.interlace==0?u=a(u,l,0,c,d):l.interlace==1&&(u=(function(M,L){const E=L.width,D=L.height,w=r(L),R=w>>3,p=Math.ceil(E*w/8),b=new Uint8Array(D*p);let A=0;const C=[0,0,4,0,2,0,1],P=[0,4,0,2,0,1,0],_=[8,8,8,4,4,2,2],S=[8,8,4,4,2,2,1];let N=0;for(;N<7;){const g=_[N],U=S[N];let I=0,F=0,z=C[N];for(;z<D;)z+=g,F++;let j=P[N];for(;j<E;)j+=U,I++;const q=Math.ceil(I*w/8);a(M,L,A,I,F);let H=0,O=C[N];for(;O<D;){let K=P[N],ne=A+H*q<<3;for(;K<E;){var v;if(w==1&&(v=(v=M[ne>>3])>>7-(7&ne)&1,b[O*p+(K>>3)]|=v<<7-((7&K)<<0)),w==2&&(v=(v=M[ne>>3])>>6-(7&ne)&3,b[O*p+(K>>2)]|=v<<6-((3&K)<<1)),w==4&&(v=(v=M[ne>>3])>>4-(7&ne)&15,b[O*p+(K>>1)]|=v<<4-((1&K)<<2)),w>=8){const $=O*p+K*R;for(let G=0;G<R;G++)b[$+G]=M[(ne>>3)+G]}ne+=w,K+=U}H++,O+=g}I*F!=0&&(A+=F*(1+q)),N+=1}return b})(u,l)),u}function s(l,u){return n(new Uint8Array(l.buffer,2,l.length-6),u)}var n=(function(){const l={H:{}};return l.H.N=function(u,c){const d=Uint8Array;let m,T,x=0,k=0,M=0,L=0,E=0,D=0,w=0,R=0,p=0;if(u[0]==3&&u[1]==0)return c||new d(0);const b=l.H,A=b.b,C=b.e,P=b.R,_=b.n,S=b.A,N=b.Z,v=b.m,g=c==null;for(g&&(c=new d(u.length>>>2<<5));x==0;)if(x=A(u,p,1),k=A(u,p+1,2),p+=3,k!=0){if(g&&(c=l.H.W(c,R+(1<<17))),k==1&&(m=v.J,T=v.h,D=511,w=31),k==2){M=C(u,p,5)+257,L=C(u,p+5,5)+1,E=C(u,p+10,4)+4,p+=14;let I=1;for(var U=0;U<38;U+=2)v.Q[U]=0,v.Q[U+1]=0;for(U=0;U<E;U++){const j=C(u,p+3*U,3);v.Q[1+(v.X[U]<<1)]=j,j>I&&(I=j)}p+=3*E,_(v.Q,I),S(v.Q,I,v.u),m=v.w,T=v.d,p=P(v.u,(1<<I)-1,M+L,u,p,v.v);const F=b.V(v.v,0,M,v.C);D=(1<<F)-1;const z=b.V(v.v,M,L,v.D);w=(1<<z)-1,_(v.C,F),S(v.C,F,m),_(v.D,z),S(v.D,z,T)}for(;;){const I=m[N(u,p)&D];p+=15&I;const F=I>>>4;if(!(F>>>8))c[R++]=F;else{if(F==256)break;{let z=R+F-254;if(F>264){const K=v.q[F-257];z=R+(K>>>3)+C(u,p,7&K),p+=7&K}const j=T[N(u,p)&w];p+=15&j;const q=j>>>4,H=v.c[q],O=(H>>>4)+A(u,p,15&H);for(p+=15&H;R<z;)c[R]=c[R++-O],c[R]=c[R++-O],c[R]=c[R++-O],c[R]=c[R++-O];R=z}}}}else{(7&p)!=0&&(p+=8-(7&p));const I=4+(p>>>3),F=u[I-4]|u[I-3]<<8;g&&(c=l.H.W(c,R+F)),c.set(new d(u.buffer,u.byteOffset+I,F),R),p=I+F<<3,R+=F}return c.length==R?c:c.slice(0,R)},l.H.W=function(u,c){const d=u.length;if(c<=d)return u;const m=new Uint8Array(d<<1);return m.set(u,0),m},l.H.R=function(u,c,d,m,T,x){const k=l.H.e,M=l.H.Z;let L=0;for(;L<d;){const E=u[M(m,T)&c];T+=15&E;const D=E>>>4;if(D<=15)x[L]=D,L++;else{let w=0,R=0;D==16?(R=3+k(m,T,2),T+=2,w=x[L-1]):D==17?(R=3+k(m,T,3),T+=3):D==18&&(R=11+k(m,T,7),T+=7);const p=L+R;for(;L<p;)x[L]=w,L++}}return T},l.H.V=function(u,c,d,m){let T=0,x=0;const k=m.length>>>1;for(;x<d;){const M=u[x+c];m[x<<1]=0,m[1+(x<<1)]=M,M>T&&(T=M),x++}for(;x<k;)m[x<<1]=0,m[1+(x<<1)]=0,x++;return T},l.H.n=function(u,c){const d=l.H.m,m=u.length;let T,x,k,M;const L=d.j;for(var E=0;E<=c;E++)L[E]=0;for(E=1;E<m;E+=2)L[u[E]]++;const D=d.K;for(T=0,L[0]=0,x=1;x<=c;x++)T=T+L[x-1]<<1,D[x]=T;for(k=0;k<m;k+=2)M=u[k+1],M!=0&&(u[k]=D[M],D[M]++)},l.H.A=function(u,c,d){const m=u.length,T=l.H.m.r;for(let x=0;x<m;x+=2)if(u[x+1]!=0){const k=x>>1,M=u[x+1],L=k<<4|M,E=c-M;let D=u[x]<<E;const w=D+(1<<E);for(;D!=w;)d[T[D]>>>15-c]=L,D++}},l.H.l=function(u,c){const d=l.H.m.r,m=15-c;for(let T=0;T<u.length;T+=2)u[T]=d[u[T]<<c-u[T+1]]>>>m},l.H.M=function(u,c,d){d<<=7&c;const m=c>>>3;u[m]|=d,u[m+1]|=d>>>8},l.H.I=function(u,c,d){d<<=7&c;const m=c>>>3;u[m]|=d,u[m+1]|=d>>>8,u[m+2]|=d>>>16},l.H.e=function(u,c,d){return(u[c>>>3]|u[1+(c>>>3)]<<8)>>>(7&c)&(1<<d)-1},l.H.b=function(u,c,d){return(u[c>>>3]|u[1+(c>>>3)]<<8|u[2+(c>>>3)]<<16)>>>(7&c)&(1<<d)-1},l.H.Z=function(u,c){return(u[c>>>3]|u[1+(c>>>3)]<<8|u[2+(c>>>3)]<<16)>>>(7&c)},l.H.i=function(u,c){return(u[c>>>3]|u[1+(c>>>3)]<<8|u[2+(c>>>3)]<<16|u[3+(c>>>3)]<<24)>>>(7&c)},l.H.m=(function(){const u=Uint16Array,c=Uint32Array;return{K:new u(16),j:new u(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new u(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new c(32),J:new u(512),_:[],h:new u(32),$:[],w:new u(32768),C:[],v:[],d:new u(32768),D:[],u:new u(512),Q:[],r:new u(32768),s:new c(286),Y:new c(30),a:new c(19),t:new c(15e3),k:new u(65536),g:new u(32768)}})(),(function(){const u=l.H.m;for(var c=0;c<32768;c++){let m=c;m=(2863311530&m)>>>1|(1431655765&m)<<1,m=(3435973836&m)>>>2|(858993459&m)<<2,m=(4042322160&m)>>>4|(252645135&m)<<4,m=(4278255360&m)>>>8|(16711935&m)<<8,u.r[c]=(m>>>16|m<<16)>>>17}function d(m,T,x){for(;T--!=0;)m.push(0,x)}for(c=0;c<32;c++)u.q[c]=u.S[c]<<3|u.T[c],u.c[c]=u.p[c]<<4|u.z[c];d(u._,144,8),d(u._,112,9),d(u._,24,7),d(u._,8,8),l.H.n(u._,9),l.H.A(u._,9,u.J),l.H.l(u._,9),d(u.$,32,5),l.H.n(u.$,5),l.H.A(u.$,5,u.h),l.H.l(u.$,5),d(u.Q,19,0),d(u.C,286,0),d(u.D,30,0),d(u.v,320,0)})(),l.H.N})();function r(l){return[1,null,3,1,2,null,4][l.ctype]*l.depth}function a(l,u,c,d,m){let T=r(u);const x=Math.ceil(d*T/8);let k,M;T=Math.ceil(T/8);let L=l[c],E=0;if(L>1&&(l[c]=[0,0,1][L-2]),L==3)for(E=T;E<x;E++)l[E+1]=l[E+1]+(l[E+1-T]>>>1)&255;for(let D=0;D<m;D++)if(k=c+D*x,M=k+D+1,L=l[M-1],E=0,L==0)for(;E<x;E++)l[k+E]=l[M+E];else if(L==1){for(;E<T;E++)l[k+E]=l[M+E];for(;E<x;E++)l[k+E]=l[M+E]+l[k+E-T]}else if(L==2)for(;E<x;E++)l[k+E]=l[M+E]+l[k+E-x];else if(L==3){for(;E<T;E++)l[k+E]=l[M+E]+(l[k+E-x]>>>1);for(;E<x;E++)l[k+E]=l[M+E]+(l[k+E-x]+l[k+E-T]>>>1)}else{for(;E<T;E++)l[k+E]=l[M+E]+o(0,l[k+E-x],0);for(;E<x;E++)l[k+E]=l[M+E]+o(l[k+E-T],l[k+E-x],l[k+E-T-x])}return l}function o(l,u,c){const d=l+u-c,m=d-l,T=d-u,x=d-c;return m*m<=T*T&&m*m<=x*x?l:T*T<=x*x?u:c}function h(l,u,c){c.width=e.readUint(l,u),u+=4,c.height=e.readUint(l,u),u+=4,c.depth=l[u],u++,c.ctype=l[u],u++,c.compress=l[u],u++,c.filter=l[u],u++,c.interlace=l[u],u++}function f(l,u,c,d,m,T,x,k,M){const L=Math.min(u,m),E=Math.min(c,T);let D=0,w=0;for(let N=0;N<E;N++)for(let v=0;v<L;v++)if(x>=0&&k>=0?(D=N*u+v<<2,w=(k+N)*m+x+v<<2):(D=(-k+N)*u-x+v<<2,w=N*m+v<<2),M==0)d[w]=l[D],d[w+1]=l[D+1],d[w+2]=l[D+2],d[w+3]=l[D+3];else if(M==1){var R=l[D+3]*.00392156862745098,p=l[D]*R,b=l[D+1]*R,A=l[D+2]*R,C=d[w+3]*(1/255),P=d[w]*C,_=d[w+1]*C,S=d[w+2]*C;const g=1-R,U=R+C*g,I=U==0?0:1/U;d[w+3]=255*U,d[w+0]=(p+P*g)*I,d[w+1]=(b+_*g)*I,d[w+2]=(A+S*g)*I}else if(M==2)R=l[D+3],p=l[D],b=l[D+1],A=l[D+2],C=d[w+3],P=d[w],_=d[w+1],S=d[w+2],R==C&&p==P&&b==_&&A==S?(d[w]=0,d[w+1]=0,d[w+2]=0,d[w+3]=0):(d[w]=p,d[w+1]=b,d[w+2]=A,d[w+3]=R);else if(M==3){if(R=l[D+3],p=l[D],b=l[D+1],A=l[D+2],C=d[w+3],P=d[w],_=d[w+1],S=d[w+2],R==C&&p==P&&b==_&&A==S)continue;if(R<220&&C>20)return!1}return!0}return{decode:function(u){const c=new Uint8Array(u);let d=8;const m=e,T=m.readUshort,x=m.readUint,k={tabs:{},frames:[]},M=new Uint8Array(c.length);let L,E=0,D=0;const w=[137,80,78,71,13,10,26,10];for(var R=0;R<8;R++)if(c[R]!=w[R])throw"The input is not a PNG file!";for(;d<c.length;){const N=m.readUint(c,d);d+=4;const v=m.readASCII(c,d,4);if(d+=4,v=="IHDR")h(c,d,k);else if(v=="iCCP"){for(var p=d;c[p]!=0;)p++;m.readASCII(c,d,p-d),c[p+1];const g=c.slice(p+2,d+N);let U=null;try{U=s(g)}catch{U=n(g)}k.tabs[v]=U}else if(v=="CgBI")k.tabs[v]=c.slice(d,d+4);else if(v=="IDAT"){for(R=0;R<N;R++)M[E+R]=c[d+R];E+=N}else if(v=="acTL")k.tabs[v]={num_frames:x(c,d),num_plays:x(c,d+4)},L=new Uint8Array(c.length);else if(v=="fcTL"){D!=0&&((S=k.frames[k.frames.length-1]).data=i(k,L.slice(0,D),S.rect.width,S.rect.height),D=0);const g={x:x(c,d+12),y:x(c,d+16),width:x(c,d+4),height:x(c,d+8)};let U=T(c,d+22);U=T(c,d+20)/(U==0?100:U);const I={rect:g,delay:Math.round(1e3*U),dispose:c[d+24],blend:c[d+25]};k.frames.push(I)}else if(v=="fdAT"){for(R=0;R<N-4;R++)L[D+R]=c[d+R+4];D+=N-4}else if(v=="pHYs")k.tabs[v]=[m.readUint(c,d),m.readUint(c,d+4),c[d+8]];else if(v=="cHRM")for(k.tabs[v]=[],R=0;R<8;R++)k.tabs[v].push(m.readUint(c,d+4*R));else if(v=="tEXt"||v=="zTXt"){k.tabs[v]??(k.tabs[v]={});var b=m.nextZero(c,d),A=m.readASCII(c,d,b-d),C=d+N-b-1;if(v=="tEXt")_=m.readASCII(c,b+1,C);else{var P=s(c.slice(b+2,b+2+C));_=m.readUTF8(P,0,P.length)}k.tabs[v][A]=_}else if(v=="iTXt"){k.tabs[v]??(k.tabs[v]={}),b=0,p=d,b=m.nextZero(c,p),A=m.readASCII(c,p,b-p);const g=c[p=b+1];var _;c[p+1],p+=2,b=m.nextZero(c,p),m.readASCII(c,p,b-p),p=b+1,b=m.nextZero(c,p),m.readUTF8(c,p,b-p),C=N-((p=b+1)-d),g==0?_=m.readUTF8(c,p,C):(P=s(c.slice(p,p+C)),_=m.readUTF8(P,0,P.length)),k.tabs[v][A]=_}else if(v=="PLTE")k.tabs[v]=m.readBytes(c,d,N);else if(v=="hIST"){const g=k.tabs.PLTE.length/3;for(k.tabs[v]=[],R=0;R<g;R++)k.tabs[v].push(T(c,d+2*R))}else if(v=="tRNS")k.ctype==3?k.tabs[v]=m.readBytes(c,d,N):k.ctype==0?k.tabs[v]=T(c,d):k.ctype==2&&(k.tabs[v]=[T(c,d),T(c,d+2),T(c,d+4)]);else if(v=="gAMA")k.tabs[v]=m.readUint(c,d)/1e5;else if(v=="sRGB")k.tabs[v]=c[d];else if(v=="bKGD")k.ctype==0||k.ctype==4?k.tabs[v]=[T(c,d)]:k.ctype==2||k.ctype==6?k.tabs[v]=[T(c,d),T(c,d+2),T(c,d+4)]:k.ctype==3&&(k.tabs[v]=c[d]);else if(v=="IEND")break;d+=N,m.readUint(c,d),d+=4}var S;return D!=0&&((S=k.frames[k.frames.length-1]).data=i(k,L.slice(0,D),S.rect.width,S.rect.height)),k.data=i(k,M,k.width,k.height),delete k.compress,delete k.interlace,delete k.filter,k},toRGBA8:function(u){const c=u.width,d=u.height;if(u.tabs.acTL==null)return[t(u.data,c,d,u).buffer];const m=[];u.frames[0].data??(u.frames[0].data=u.data);const T=c*d*4,x=new Uint8Array(T),k=new Uint8Array(T),M=new Uint8Array(T);for(let E=0;E<u.frames.length;E++){const D=u.frames[E],w=D.rect.x,R=D.rect.y,p=D.rect.width,b=D.rect.height,A=t(D.data,p,b,u);if(E!=0)for(var L=0;L<T;L++)M[L]=x[L];if(D.blend==0?f(A,p,b,x,c,d,w,R,0):D.blend==1&&f(A,p,b,x,c,d,w,R,1),m.push(x.buffer.slice(0)),D.dispose!=0){if(D.dispose==1)f(k,p,b,x,c,d,w,R,0);else if(D.dispose==2)for(L=0;L<T;L++)x[L]=M[L]}}return m},_paeth:o,_copyTile:f,_bin:e}})();(function(){const{_copyTile:e}=Me,{_bin:t}=Me,i=Me._paeth;var s={table:(function(){const p=new Uint32Array(256);for(let b=0;b<256;b++){let A=b;for(let C=0;C<8;C++)1&A?A=3988292384^A>>>1:A>>>=1;p[b]=A}return p})(),update(p,b,A,C){for(let P=0;P<C;P++)p=s.table[255&(p^b[A+P])]^p>>>8;return p},crc:(p,b,A)=>4294967295^s.update(4294967295,p,b,A)};function n(p,b,A,C){b[A]+=p[0]*C>>4,b[A+1]+=p[1]*C>>4,b[A+2]+=p[2]*C>>4,b[A+3]+=p[3]*C>>4}function r(p){return Math.max(0,Math.min(255,p))}function a(p,b){const A=p[0]-b[0],C=p[1]-b[1],P=p[2]-b[2],_=p[3]-b[3];return A*A+C*C+P*P+_*_}function o(p,b,A,C,P,_,S){S??=1;const N=C.length,v=[];for(var g=0;g<N;g++){const O=C[g];v.push([O>>>0&255,O>>>8&255,O>>>16&255,O>>>24&255])}for(g=0;g<N;g++){let O=4294967295;for(var U=0,I=0;I<N;I++){var F=a(v[g],v[I]);I!=g&&F<O&&(O=F,U=I)}}const z=new Uint32Array(P.buffer),j=new Int16Array(b*A*4),q=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(g=0;g<q.length;g++)q[g]=255*((q[g]+.5)/16-.5);for(let O=0;O<A;O++)for(let K=0;K<b;K++){var H;g=4*(O*b+K),S!=2?H=[r(p[g]+j[g]),r(p[g+1]+j[g+1]),r(p[g+2]+j[g+2]),r(p[g+3]+j[g+3])]:(F=q[4*(3&O)+(3&K)],H=[r(p[g]+F),r(p[g+1]+F),r(p[g+2]+F),r(p[g+3]+F)]),U=0;let ne=16777215;for(I=0;I<N;I++){const te=a(H,v[I]);te<ne&&(ne=te,U=I)}const $=v[U],G=[H[0]-$[0],H[1]-$[1],H[2]-$[2],H[3]-$[3]];S==1&&(K!=b-1&&n(G,j,g+4,7),O!=A-1&&(K!=0&&n(G,j,g+4*b-4,3),n(G,j,g+4*b,5),K!=b-1&&n(G,j,g+4*b+4,1))),_[g>>2]=U,z[g>>2]=C[U]}}function h(p,b,A,C,P){P??={};const{crc:_}=s,S=t.writeUint,N=t.writeUshort,v=t.writeASCII;let g=8;const U=p.frames.length>1;let I,F=!1,z=33+(U?20:0);if(P.sRGB!=null&&(z+=13),P.pHYs!=null&&(z+=21),P.iCCP!=null&&(I=pako.deflate(P.iCCP),z+=21+I.length+4),p.ctype==3){for(var j=p.plte.length,q=0;q<j;q++)p.plte[q]>>>24!=255&&(F=!0);z+=8+3*j+4+(F?8+1*j+4:0)}for(var H=0;H<p.frames.length;H++)U&&(z+=38),z+=($=p.frames[H]).cimg.length+12,H!=0&&(z+=4);z+=12;const O=new Uint8Array(z),K=[137,80,78,71,13,10,26,10];for(q=0;q<8;q++)O[q]=K[q];if(S(O,g,13),g+=4,v(O,g,"IHDR"),g+=4,S(O,g,b),g+=4,S(O,g,A),g+=4,O[g]=p.depth,g++,O[g]=p.ctype,g++,O[g]=0,g++,O[g]=0,g++,O[g]=0,g++,S(O,g,_(O,g-17,17)),g+=4,P.sRGB!=null&&(S(O,g,1),g+=4,v(O,g,"sRGB"),g+=4,O[g]=P.sRGB,g++,S(O,g,_(O,g-5,5)),g+=4),P.iCCP!=null){const G=13+I.length;S(O,g,G),g+=4,v(O,g,"iCCP"),g+=4,v(O,g,"ICC profile"),g+=11,g+=2,O.set(I,g),g+=I.length,S(O,g,_(O,g-(G+4),G+4)),g+=4}if(P.pHYs!=null&&(S(O,g,9),g+=4,v(O,g,"pHYs"),g+=4,S(O,g,P.pHYs[0]),g+=4,S(O,g,P.pHYs[1]),g+=4,O[g]=P.pHYs[2],g++,S(O,g,_(O,g-13,13)),g+=4),U&&(S(O,g,8),g+=4,v(O,g,"acTL"),g+=4,S(O,g,p.frames.length),g+=4,S(O,g,P.loop!=null?P.loop:0),g+=4,S(O,g,_(O,g-12,12)),g+=4),p.ctype==3){for(S(O,g,3*(j=p.plte.length)),g+=4,v(O,g,"PLTE"),g+=4,q=0;q<j;q++){const G=3*q,te=p.plte[q],ae=255&te,ue=te>>>8&255,Ve=te>>>16&255;O[g+G+0]=ae,O[g+G+1]=ue,O[g+G+2]=Ve}if(g+=3*j,S(O,g,_(O,g-3*j-4,3*j+4)),g+=4,F){for(S(O,g,j),g+=4,v(O,g,"tRNS"),g+=4,q=0;q<j;q++)O[g+q]=p.plte[q]>>>24&255;g+=j,S(O,g,_(O,g-j-4,j+4)),g+=4}}let ne=0;for(H=0;H<p.frames.length;H++){var $=p.frames[H];U&&(S(O,g,26),g+=4,v(O,g,"fcTL"),g+=4,S(O,g,ne++),g+=4,S(O,g,$.rect.width),g+=4,S(O,g,$.rect.height),g+=4,S(O,g,$.rect.x),g+=4,S(O,g,$.rect.y),g+=4,N(O,g,C[H]),g+=2,N(O,g,1e3),g+=2,O[g]=$.dispose,g++,O[g]=$.blend,g++,S(O,g,_(O,g-30,30)),g+=4);const G=$.cimg;S(O,g,(j=G.length)+(H==0?0:4)),g+=4;const te=g;v(O,g,H==0?"IDAT":"fdAT"),g+=4,H!=0&&(S(O,g,ne++),g+=4),O.set(G,g),g+=j,S(O,g,_(O,te,g-te)),g+=4}return S(O,g,0),g+=4,v(O,g,"IEND"),g+=4,S(O,g,_(O,g-4,4)),g+=4,O.buffer}function f(p,b,A){for(let C=0;C<p.frames.length;C++){const P=p.frames[C];P.rect.width;const _=P.rect.height,S=new Uint8Array(_*P.bpl+_);P.cimg=d(P.img,_,P.bpp,P.bpl,S,b,A)}}function l(p,b,A,C,P){const _=P[0],S=P[1],N=P[2],v=P[3],g=P[4],U=P[5];let I=6,F=8,z=255;for(var j=0;j<p.length;j++){const ye=new Uint8Array(p[j]);for(var q=ye.length,H=0;H<q;H+=4)z&=ye[H+3]}const O=z!=255,K=(function(ee,se,de,fe,we,pe){const me=[];for(var ie=0;ie<ee.length;ie++){const ke=new Uint8Array(ee[ie]),Pe=new Uint32Array(ke.buffer);var Ee;let De=0,Oe=0,Le=se,Ke=de,Rt=fe?1:0;if(ie!=0){const un=pe||fe||ie==1||me[ie-2].dispose!=0?1:2;let It=0,ii=1e9;for(let st=0;st<un;st++){var nt=new Uint8Array(ee[ie-1-st]);const hn=new Uint32Array(ee[ie-1-st]);let je=se,We=de,et=-1,rt=-1;for(let Xe=0;Xe<de;Xe++)for(let Ye=0;Ye<se;Ye++)Pe[He=Xe*se+Ye]!=hn[He]&&(Ye<je&&(je=Ye),Ye>et&&(et=Ye),Xe<We&&(We=Xe),Xe>rt&&(rt=Xe));et==-1&&(je=We=et=rt=0),we&&((1&je)==1&&je--,(1&We)==1&&We--);const ni=(et-je+1)*(rt-We+1);ni<ii&&(ii=ni,It=st,De=je,Oe=We,Le=et-je+1,Ke=rt-We+1)}nt=new Uint8Array(ee[ie-1-It]),It==1&&(me[ie-1].dispose=2),Ee=new Uint8Array(Le*Ke*4),e(nt,se,de,Ee,Le,Ke,-De,-Oe,0),Rt=e(ke,se,de,Ee,Le,Ke,-De,-Oe,3)?1:0,Rt==1?c(ke,se,de,Ee,{x:De,y:Oe,width:Le,height:Ke}):e(ke,se,de,Ee,Le,Ke,-De,-Oe,0)}else Ee=ke.slice(0);me.push({rect:{x:De,y:Oe,width:Le,height:Ke},img:Ee,blend:Rt,dispose:0})}if(fe)for(ie=0;ie<me.length;ie++){if((Qe=me[ie]).blend==1)continue;const ke=Qe.rect,Pe=me[ie-1].rect,De=Math.min(ke.x,Pe.x),Oe=Math.min(ke.y,Pe.y),Le={x:De,y:Oe,width:Math.max(ke.x+ke.width,Pe.x+Pe.width)-De,height:Math.max(ke.y+ke.height,Pe.y+Pe.height)-Oe};me[ie-1].dispose=1,ie-1!=0&&u(ee,se,de,me,ie-1,Le,we),u(ee,se,de,me,ie,Le,we)}let Se=0;if(ee.length!=1)for(var He=0;He<me.length;He++){var Qe;Se+=(Qe=me[He]).rect.width*Qe.rect.height}return me})(p,b,A,_,S,N),ne={},$=[],G=[];if(C!=0){const ye=[];for(H=0;H<K.length;H++)ye.push(K[H].img.buffer);const ee=T((function(fe){let we=0;for(var pe=0;pe<fe.length;pe++)we+=fe[pe].byteLength;const me=new Uint8Array(we);let ie=0;for(pe=0;pe<fe.length;pe++){const Ee=new Uint8Array(fe[pe]),nt=Ee.length;for(let Se=0;Se<nt;Se+=4){let He=Ee[Se],Qe=Ee[Se+1],ke=Ee[Se+2];const Pe=Ee[Se+3];Pe==0&&(He=Qe=ke=0),me[ie+Se]=He,me[ie+Se+1]=Qe,me[ie+Se+2]=ke,me[ie+Se+3]=Pe}ie+=nt}return me.buffer})(ye),C);for(H=0;H<ee.plte.length;H++)$.push(ee.plte[H].est.rgba);let se=0;for(H=0;H<K.length;H++){const de=(ae=K[H]).img.length;var te=new Uint8Array(ee.inds.buffer,se>>2,de>>2);G.push(te);const fe=new Uint8Array(ee.abuf,se,de);U&&o(ae.img,ae.rect.width,ae.rect.height,$,fe,te),ae.img.set(fe),se+=de}}else for(j=0;j<K.length;j++){var ae=K[j];const ye=new Uint32Array(ae.img.buffer);var ue=ae.rect.width;for(q=ye.length,te=new Uint8Array(q),G.push(te),H=0;H<q;H++){const ee=ye[H];if(H!=0&&ee==ye[H-1])te[H]=te[H-1];else if(H>ue&&ee==ye[H-ue])te[H]=te[H-ue];else{let se=ne[ee];if(se==null&&(ne[ee]=se=$.length,$.push(ee),$.length>=300))break;te[H]=se}}}const Ve=$.length;for(Ve<=256&&g==0&&(F=Ve<=2?1:Ve<=4?2:Ve<=16?4:8,F=Math.max(F,v)),j=0;j<K.length;j++){(ae=K[j]).rect.x,ae.rect.y,ue=ae.rect.width;const ye=ae.rect.height;let ee=ae.img;new Uint32Array(ee.buffer);let se=4*ue,de=4;if(Ve<=256&&g==0){se=Math.ceil(F*ue/8);var xe=new Uint8Array(se*ye);const fe=G[j];for(let we=0;we<ye;we++){H=we*se;const pe=we*ue;if(F==8)for(var re=0;re<ue;re++)xe[H+re]=fe[pe+re];else if(F==4)for(re=0;re<ue;re++)xe[H+(re>>1)]|=fe[pe+re]<<4-4*(1&re);else if(F==2)for(re=0;re<ue;re++)xe[H+(re>>2)]|=fe[pe+re]<<6-2*(3&re);else if(F==1)for(re=0;re<ue;re++)xe[H+(re>>3)]|=fe[pe+re]<<7-1*(7&re)}ee=xe,I=3,de=1}else if(O==0&&K.length==1){xe=new Uint8Array(ue*ye*3);const fe=ue*ye;for(H=0;H<fe;H++){const we=3*H,pe=4*H;xe[we]=ee[pe],xe[we+1]=ee[pe+1],xe[we+2]=ee[pe+2]}ee=xe,I=2,de=3,se=3*ue}ae.img=ee,ae.bpl=se,ae.bpp=de}return{ctype:I,depth:F,plte:$,frames:K}}function u(p,b,A,C,P,_,S){const N=Uint8Array,v=Uint32Array,g=new N(p[P-1]),U=new v(p[P-1]),I=P+1<p.length?new N(p[P+1]):null,F=new N(p[P]),z=new v(F.buffer);let j=b,q=A,H=-1,O=-1;for(let ne=0;ne<_.height;ne++)for(let $=0;$<_.width;$++){const G=_.x+$,te=_.y+ne,ae=te*b+G,ue=z[ae];ue==0||C[P-1].dispose==0&&U[ae]==ue&&(I==null||I[4*ae+3]!=0)||(G<j&&(j=G),G>H&&(H=G),te<q&&(q=te),te>O&&(O=te))}H==-1&&(j=q=H=O=0),S&&((1&j)==1&&j--,(1&q)==1&&q--),_={x:j,y:q,width:H-j+1,height:O-q+1};const K=C[P];K.rect=_,K.blend=1,K.img=new Uint8Array(_.width*_.height*4),C[P-1].dispose==0?(e(g,b,A,K.img,_.width,_.height,-_.x,-_.y,0),c(F,b,A,K.img,_)):e(F,b,A,K.img,_.width,_.height,-_.x,-_.y,0)}function c(p,b,A,C,P){e(p,b,A,C,P.width,P.height,-P.x,-P.y,2)}function d(p,b,A,C,P,_,S){const N=[];let v,g=[0,1,2,3,4];_!=-1?g=[_]:(b*C>5e5||A==1)&&(g=[0]),S&&(v={level:0});const U=yn;for(var I=0;I<g.length;I++){for(let j=0;j<b;j++)m(P,p,j,C,A,g[I]);N.push(U.deflate(P,v))}let F,z=1e9;for(I=0;I<N.length;I++)N[I].length<z&&(F=I,z=N[I].length);return N[F]}function m(p,b,A,C,P,_){const S=A*C;let N=S+A;if(p[N]=_,N++,_==0)if(C<500)for(var v=0;v<C;v++)p[N+v]=b[S+v];else p.set(new Uint8Array(b.buffer,S,C),N);else if(_==1){for(v=0;v<P;v++)p[N+v]=b[S+v];for(v=P;v<C;v++)p[N+v]=b[S+v]-b[S+v-P]+256&255}else if(A==0){for(v=0;v<P;v++)p[N+v]=b[S+v];if(_==2)for(v=P;v<C;v++)p[N+v]=b[S+v];if(_==3)for(v=P;v<C;v++)p[N+v]=b[S+v]-(b[S+v-P]>>1)+256&255;if(_==4)for(v=P;v<C;v++)p[N+v]=b[S+v]-i(b[S+v-P],0,0)+256&255}else{if(_==2)for(v=0;v<C;v++)p[N+v]=b[S+v]+256-b[S+v-C]&255;if(_==3){for(v=0;v<P;v++)p[N+v]=b[S+v]+256-(b[S+v-C]>>1)&255;for(v=P;v<C;v++)p[N+v]=b[S+v]+256-(b[S+v-C]+b[S+v-P]>>1)&255}if(_==4){for(v=0;v<P;v++)p[N+v]=b[S+v]+256-i(0,b[S+v-C],0)&255;for(v=P;v<C;v++)p[N+v]=b[S+v]+256-i(b[S+v-P],b[S+v-C],b[S+v-P-C])&255}}}function T(p,b){const A=new Uint8Array(p),C=A.slice(0),P=new Uint32Array(C.buffer),_=x(C,b),S=_[0],N=_[1],v=A.length,g=new Uint8Array(v>>2);let U;if(A.length<2e7)for(var I=0;I<v;I+=4)U=k(S,F=A[I]*(1/255),z=A[I+1]*(1/255),j=A[I+2]*(1/255),q=A[I+3]*(1/255)),g[I>>2]=U.ind,P[I>>2]=U.est.rgba;else for(I=0;I<v;I+=4){var F=A[I]*.00392156862745098,z=A[I+1]*(1/255),j=A[I+2]*(1/255),q=A[I+3]*(1/255);for(U=S;U.left;)U=M(U.est,F,z,j,q)<=0?U.left:U.right;g[I>>2]=U.ind,P[I>>2]=U.est.rgba}return{abuf:C.buffer,inds:g,plte:N}}function x(p,b,A){A??=1e-4;const C=new Uint32Array(p.buffer),P={i0:0,i1:p.length,bst:null,est:null,tdst:0,left:null,right:null};P.bst=D(p,P.i0,P.i1),P.est=w(P.bst);const _=[P];for(;_.length<b;){let N=0,v=0;for(var S=0;S<_.length;S++)_[S].est.L>N&&(N=_[S].est.L,v=S);if(N<A)break;const g=_[v],U=L(p,C,g.i0,g.i1,g.est.e,g.est.eMq255);if(g.i0>=U||g.i1<=U){g.est.L=0;continue}const I={i0:g.i0,i1:U,bst:null,est:null,tdst:0,left:null,right:null};I.bst=D(p,I.i0,I.i1),I.est=w(I.bst);const F={i0:U,i1:g.i1,bst:null,est:null,tdst:0,left:null,right:null};for(F.bst={R:[],m:[],N:g.bst.N-I.bst.N},S=0;S<16;S++)F.bst.R[S]=g.bst.R[S]-I.bst.R[S];for(S=0;S<4;S++)F.bst.m[S]=g.bst.m[S]-I.bst.m[S];F.est=w(F.bst),g.left=I,g.right=F,_[v]=I,_.push(F)}for(_.sort(((N,v)=>v.bst.N-N.bst.N)),S=0;S<_.length;S++)_[S].ind=S;return[P,_]}function k(p,b,A,C,P){if(p.left==null)return p.tdst=(function(I,F,z,j,q){const H=F-I[0],O=z-I[1],K=j-I[2],ne=q-I[3];return H*H+O*O+K*K+ne*ne})(p.est.q,b,A,C,P),p;const _=M(p.est,b,A,C,P);let S=p.left,N=p.right;_>0&&(S=p.right,N=p.left);const v=k(S,b,A,C,P);if(v.tdst<=_*_)return v;const g=k(N,b,A,C,P);return g.tdst<v.tdst?g:v}function M(p,b,A,C,P){const{e:_}=p;return _[0]*b+_[1]*A+_[2]*C+_[3]*P-p.eMq}function L(p,b,A,C,P,_){for(C-=4;A<C;){for(;E(p,A,P)<=_;)A+=4;for(;E(p,C,P)>_;)C-=4;if(A>=C)break;const S=b[A>>2];b[A>>2]=b[C>>2],b[C>>2]=S,A+=4,C-=4}for(;E(p,A,P)>_;)A-=4;return A+4}function E(p,b,A){return p[b]*A[0]+p[b+1]*A[1]+p[b+2]*A[2]+p[b+3]*A[3]}function D(p,b,A){const C=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],P=[0,0,0,0],_=A-b>>2;for(let S=b;S<A;S+=4){const N=p[S]*.00392156862745098,v=p[S+1]*(1/255),g=p[S+2]*(1/255),U=p[S+3]*(1/255);P[0]+=N,P[1]+=v,P[2]+=g,P[3]+=U,C[0]+=N*N,C[1]+=N*v,C[2]+=N*g,C[3]+=N*U,C[5]+=v*v,C[6]+=v*g,C[7]+=v*U,C[10]+=g*g,C[11]+=g*U,C[15]+=U*U}return C[4]=C[1],C[8]=C[2],C[9]=C[6],C[12]=C[3],C[13]=C[7],C[14]=C[11],{R:C,m:P,N:_}}function w(p){const{R:b}=p,{m:A}=p,{N:C}=p,P=A[0],_=A[1],S=A[2],N=A[3],v=C==0?0:1/C,g=[b[0]-P*P*v,b[1]-P*_*v,b[2]-P*S*v,b[3]-P*N*v,b[4]-_*P*v,b[5]-_*_*v,b[6]-_*S*v,b[7]-_*N*v,b[8]-S*P*v,b[9]-S*_*v,b[10]-S*S*v,b[11]-S*N*v,b[12]-N*P*v,b[13]-N*_*v,b[14]-N*S*v,b[15]-N*N*v],U=g,I=R;let F=[Math.random(),Math.random(),Math.random(),Math.random()],z=0,j=0;if(C!=0)for(let H=0;H<16&&(F=I.multVec(U,F),j=Math.sqrt(I.dot(F,F)),F=I.sml(1/j,F),!(H!=0&&Math.abs(j-z)<1e-9));H++)z=j;const q=[P*v,_*v,S*v,N*v];return{Cov:g,q,e:F,L:z,eMq255:I.dot(I.sml(255,q),F),eMq:I.dot(F,q),rgba:(Math.round(255*q[3])<<24|Math.round(255*q[2])<<16|Math.round(255*q[1])<<8|Math.round(255*q[0])<<0)>>>0}}var R={multVec:(p,b)=>[p[0]*b[0]+p[1]*b[1]+p[2]*b[2]+p[3]*b[3],p[4]*b[0]+p[5]*b[1]+p[6]*b[2]+p[7]*b[3],p[8]*b[0]+p[9]*b[1]+p[10]*b[2]+p[11]*b[3],p[12]*b[0]+p[13]*b[1]+p[14]*b[2]+p[15]*b[3]],dot:(p,b)=>p[0]*b[0]+p[1]*b[1]+p[2]*b[2]+p[3]*b[3],sml:(p,b)=>[p*b[0],p*b[1],p*b[2],p*b[3]]};Me.encode=function(b,A,C,P,_,S,N){P??=0,N??=!1;const v=l(b,A,C,P,[!1,!1,!1,0,N,!1]);return f(v,-1),h(v,A,C,_,S)},Me.encodeLL=function(b,A,C,P,_,S,N,v){const g={ctype:0+(P==1?0:2)+(_==0?0:4),depth:S,frames:[]},U=(P+_)*S,I=U*A;for(let F=0;F<b.length;F++)g.frames.push({rect:{x:0,y:0,width:A,height:C},img:new Uint8Array(b[F]),blend:0,dispose:1,bpp:Math.ceil(U/8),bpl:Math.ceil(I/8)});return f(g,0,!0),h(g,A,C,N,v)},Me.encode.compress=l,Me.encode.dither=o,Me.quantize=T,Me.quantize.getKDtree=x,Me.quantize.getNearest=k})();var Ti={toArrayBuffer(e,t){const i=e.width,s=e.height,n=i<<2,r=e.getContext("2d").getImageData(0,0,i,s),a=new Uint32Array(r.data.buffer),o=(32*i+31)/32<<2,h=o*s,f=122+h,l=new ArrayBuffer(f),u=new DataView(l),c=1<<20;let d,m,T,x,k=c,M=0,L=0,E=0;function D(p){u.setUint16(L,p,!0),L+=2}function w(p){u.setUint32(L,p,!0),L+=4}function R(p){L+=p}D(19778),w(f),R(4),w(122),w(108),w(i),w(-s>>>0),D(1),D(32),w(3),w(h),w(2835),w(2835),R(8),w(16711680),w(65280),w(255),w(4278190080),w(1466527264),(function p(){for(;M<s&&k>0;){for(x=122+M*o,d=0;d<n;)k--,m=a[E++],T=m>>>24,u.setUint32(x+d,m<<8|T),d+=4;M++}E<a.length?(k=c,setTimeout(p,Ti._dly)):t(l)})()},toBlob(e,t){this.toArrayBuffer(e,(i=>{t(new Blob([i],{type:"image/bmp"}))}))},_dly:9},Ae={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},vn={[Ae.CHROME]:16384,[Ae.FIREFOX]:11180,[Ae.DESKTOP_SAFARI]:16384,[Ae.IE]:8192,[Ae.IOS]:4096,[Ae.ETC]:8192},Yt=typeof window<"u",Ci=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,Tt=Yt&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),wn=(Yt||Ci)&&(Tt&&Tt.getOriginalSymbol(window,"File")||typeof File<"u"&&File),Ai=(Yt||Ci)&&(Tt&&Tt.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function Gt(e,t,i=Date.now()){return new Promise((s=>{const n=e.split(","),r=n[0].match(/:(.*?);/)[1],a=globalThis.atob(n[1]);let o=a.length;const h=new Uint8Array(o);for(;o--;)h[o]=a.charCodeAt(o);const f=new Blob([h],{type:r});f.name=t,f.lastModified=i,s(f)}))}function Ei(e){return new Promise(((t,i)=>{const s=new Ai;s.onload=()=>t(s.result),s.onerror=n=>i(n),s.readAsDataURL(e)}))}function Si(e){return new Promise(((t,i)=>{const s=new Image;s.onload=()=>t(s),s.onerror=n=>i(n),s.src=e}))}function Je(){if(Je.cachedResult!==void 0)return Je.cachedResult;let e=Ae.ETC;const{userAgent:t}=navigator;return/Chrom(e|ium)/i.test(t)?e=Ae.CHROME:/iP(ad|od|hone)/i.test(t)&&/WebKit/i.test(t)?e=Ae.IOS:/Safari/i.test(t)?e=Ae.DESKTOP_SAFARI:/Firefox/i.test(t)?e=Ae.FIREFOX:(/MSIE/i.test(t)||document.documentMode)&&(e=Ae.IE),Je.cachedResult=e,Je.cachedResult}function Pi(e,t){const i=vn[Je()];let s=e,n=t,r=s*n;const a=s>n?n/s:s/n;for(;r>i*i;){const o=(i+s)/2,h=(i+n)/2;o<h?(n=h,s=h*a):(n=o*a,s=o),r=s*n}return{width:s,height:n}}function Mt(e,t){let i,s;try{if(i=new OffscreenCanvas(e,t),s=i.getContext("2d"),s===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{i=document.createElement("canvas"),s=i.getContext("2d")}return i.width=e,i.height=t,[i,s]}function Mi(e,t){const{width:i,height:s}=Pi(e.width,e.height),[n,r]=Mt(i,s);return t&&/jpe?g/.test(t)&&(r.fillStyle="white",r.fillRect(0,0,n.width,n.height)),r.drawImage(e,0,0,n.width,n.height),n}function gt(){return gt.cachedResult!==void 0||(gt.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),gt.cachedResult}function Ct(e,t={}){return new Promise((function(i,s){let n,r;var a=function(){try{return r=Mi(n,t.fileType||e.type),i([n,r])}catch(h){return s(h)}},o=function(h){try{var f=function(l){try{throw l}catch(u){return s(u)}};try{let l;return Ei(e).then((function(u){try{return l=u,Si(l).then((function(c){try{return n=c,(function(){try{return a()}catch(d){return s(d)}})()}catch(d){return f(d)}}),f)}catch(c){return f(c)}}),f)}catch(l){f(l)}}catch(l){return s(l)}};try{if(gt()||[Ae.DESKTOP_SAFARI,Ae.MOBILE_SAFARI].includes(Je()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(e).then((function(h){try{return n=h,a()}catch{return o()}}),o)}catch{o()}}))}function At(e,t,i,s,n=1){return new Promise((function(r,a){let o;if(t==="image/png"){let f,l,u;return f=e.getContext("2d"),{data:l}=f.getImageData(0,0,e.width,e.height),u=Me.encode([l.buffer],e.width,e.height,4096*n),o=new Blob([u],{type:t}),o.name=i,o.lastModified=s,h.call(this)}{let f=function(){return h.call(this)};if(t==="image/bmp")return new Promise((l=>Ti.toBlob(e,l))).then(function(l){try{return o=l,o.name=i,o.lastModified=s,f.call(this)}catch(u){return a(u)}}.bind(this),a);{let l=function(){return f.call(this)};if(typeof OffscreenCanvas=="function"&&e instanceof OffscreenCanvas)return e.convertToBlob({type:t,quality:n}).then(function(u){try{return o=u,o.name=i,o.lastModified=s,l.call(this)}catch(c){return a(c)}}.bind(this),a);{let u;return u=e.toDataURL(t,n),Gt(u,i,s).then(function(c){try{return o=c,l.call(this)}catch(d){return a(d)}}.bind(this),a)}}}function h(){return r(o)}}))}function Ie(e){e.width=0,e.height=0}function tt(){return new Promise((function(e,t){let i,s,n,r;return tt.cachedResult!==void 0?e(tt.cachedResult):Gt("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then((function(a){try{return i=a,Ct(i).then((function(o){try{return s=o[1],At(s,i.type,i.name,i.lastModified).then((function(h){try{return n=h,Ie(s),Ct(n).then((function(f){try{return r=f[0],tt.cachedResult=r.width===1&&r.height===2,e(tt.cachedResult)}catch(l){return t(l)}}),t)}catch(f){return t(f)}}),t)}catch(h){return t(h)}}),t)}catch(o){return t(o)}}),t)}))}function xi(e){return new Promise(((t,i)=>{const s=new Ai;s.onload=n=>{const r=new DataView(n.target.result);if(r.getUint16(0,!1)!=65496)return t(-2);const a=r.byteLength;let o=2;for(;o<a;){if(r.getUint16(o+2,!1)<=8)return t(-1);const h=r.getUint16(o,!1);if(o+=2,h==65505){if(r.getUint32(o+=2,!1)!=1165519206)return t(-1);const f=r.getUint16(o+=6,!1)==18761;o+=r.getUint32(o+4,f);const l=r.getUint16(o,f);o+=2;for(let u=0;u<l;u++)if(r.getUint16(o+12*u,f)==274)return t(r.getUint16(o+12*u+8,f))}else{if((65280&h)!=65280)break;o+=r.getUint16(o,!1)}}return t(-1)},s.onerror=n=>i(n),s.readAsArrayBuffer(e)}))}function Li(e,t){const{width:i}=e,{height:s}=e,{maxWidthOrHeight:n}=t;let r,a=e;return isFinite(n)&&(i>n||s>n)&&([a,r]=Mt(i,s),i>s?(a.width=n,a.height=s/i*n):(a.width=i/s*n,a.height=n),r.drawImage(e,0,0,a.width,a.height),Ie(e)),a}function _i(e,t){const{width:i}=e,{height:s}=e,[n,r]=Mt(i,s);switch(t>4&&t<9?(n.width=s,n.height=i):(n.width=i,n.height=s),t){case 2:r.transform(-1,0,0,1,i,0);break;case 3:r.transform(-1,0,0,-1,i,s);break;case 4:r.transform(1,0,0,-1,0,s);break;case 5:r.transform(0,1,1,0,0,0);break;case 6:r.transform(0,1,-1,0,s,0);break;case 7:r.transform(0,-1,-1,0,s,i);break;case 8:r.transform(0,-1,1,0,0,i)}return r.drawImage(e,0,0,i,s),Ie(e),n}function si(e,t,i=0){return new Promise((function(s,n){let r,a,o,h,f,l,u,c,d,m,T,x,k,M,L,E,D,w,R,p;function b(C=5){if(t.signal&&t.signal.aborted)throw t.signal.reason;r+=C,t.onProgress(Math.min(r,100))}function A(C){if(t.signal&&t.signal.aborted)throw t.signal.reason;r=Math.min(Math.max(C,r),100),t.onProgress(r)}return r=i,a=t.maxIteration||10,o=1024*t.maxSizeMB*1024,b(),Ct(e,t).then(function(C){try{return[,h]=C,b(),f=Li(h,t),b(),new Promise((function(P,_){var S;if(!(S=t.exifOrientation))return xi(e).then(function(v){try{return S=v,N.call(this)}catch(g){return _(g)}}.bind(this),_);function N(){return P(S)}return N.call(this)})).then(function(P){try{return l=P,b(),tt().then(function(_){try{return u=_?f:_i(f,l),b(),c=t.initialQuality||1,d=t.fileType||e.type,At(u,d,e.name,e.lastModified,c).then(function(S){try{{let v=function(){if(a--&&(L>o||L>k)){let U,I;return U=p?.95*R.width:R.width,I=p?.95*R.height:R.height,[D,w]=Mt(U,I),w.drawImage(R,0,0,U,I),c*=d==="image/png"?.85:.95,At(D,d,e.name,e.lastModified,c).then((function(F){try{return E=F,Ie(R),R=D,L=E.size,A(Math.min(99,Math.floor((M-L)/(M-o)*100))),v}catch(z){return n(z)}}),n)}return[1]},g=function(){return Ie(R),Ie(D),Ie(f),Ie(u),Ie(h),A(100),s(E)};if(m=S,b(),T=m.size>o,x=m.size>e.size,!T&&!x)return A(100),s(m);var N;return k=e.size,M=m.size,L=M,R=u,p=!t.alwaysKeepResolution&&T,(N=function(U){for(;U;){if(U.then)return void U.then(N,n);try{if(U.pop){if(U.length)return U.pop()?g.call(this):U;U=v}else U=U.call(this)}catch(I){return n(I)}}}.bind(this))(v)}}catch(v){return n(v)}}.bind(this),n)}catch(S){return n(S)}}.bind(this),n)}catch(_){return n(_)}}.bind(this),n)}catch(P){return n(P)}}.bind(this),n)}))}var kn=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`,Nt;function Tn(e,t){return new Promise(((i,s)=>{Nt||(Nt=(function(a){const o=[];return typeof a=="function"?o.push(`(${a})()`):o.push(a),URL.createObjectURL(new Blob(o))})(kn));const n=new Worker(Nt);n.addEventListener("message",(function(a){if(t.signal&&t.signal.aborted)n.terminate();else if(a.data.progress===void 0){if(a.data.error)return s(new Error(a.data.error)),void n.terminate();i(a.data.file),n.terminate()}else t.onProgress(a.data.progress)})),n.addEventListener("error",s),t.signal&&t.signal.addEventListener("abort",(()=>{s(t.signal.reason),n.terminate()})),n.postMessage({file:e,imageCompressionLibUrl:t.libURL,options:{...t,onProgress:void 0,signal:void 0}})}))}function Te(e,t){return new Promise((function(i,s){let n,r,a,o,h,f;if(n={...t},a=0,{onProgress:o}=n,n.maxSizeMB=n.maxSizeMB||Number.POSITIVE_INFINITY,h=typeof n.useWebWorker!="boolean"||n.useWebWorker,delete n.useWebWorker,n.onProgress=d=>{a=d,typeof o=="function"&&o(a)},!(e instanceof Blob||e instanceof wn))return s(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(e.type))return s(new Error("The file given is not an image"));if(f=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!h||typeof Worker!="function"||f)return si(e,n).then(function(d){try{return r=d,c.call(this)}catch(m){return s(m)}}.bind(this),s);var l=function(){try{return c.call(this)}catch(d){return s(d)}}.bind(this),u=function(d){try{return si(e,n).then((function(m){try{return r=m,l()}catch(T){return s(T)}}),s)}catch(m){return s(m)}};try{return n.libURL=n.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",Tn(e,n).then((function(d){try{return r=d,l()}catch{return u()}}),u)}catch{u()}function c(){try{r.name=e.name,r.lastModified=e.lastModified}catch{}try{n.preserveExif&&e.type==="image/jpeg"&&(!n.fileType||n.fileType&&n.fileType===e.type)&&(r=ki(e,r))}catch{}return i(r)}}))}Te.getDataUrlFromFile=Ei,Te.getFilefromDataUrl=Gt,Te.loadImage=Si,Te.drawImageInCanvas=Mi,Te.drawFileInCanvas=Ct,Te.canvasToFile=At,Te.getExifOrientation=xi,Te.handleMaxWidthOrHeight=Li,Te.followExifOrientation=_i,Te.cleanupCanvasMemory=Ie,Te.isAutoOrientationInBrowser=tt,Te.approximateBelowMaximumCanvasSizeOfBrowser=Pi,Te.copyExifWithoutOrientation=ki,Te.getBrowserName=Je,Te.version="2.0.2";function B(e,t,i){return(t=An(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Cn(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var s=i.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function An(e){var t=Cn(e,"string");return typeof t=="symbol"?t:t+""}function En(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ri(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function Sn(e,t,i){return t&&ri(e.prototype,t),i&&ri(e,i),e}function Pn(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function ai(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),i.push.apply(i,s)}return i}function oi(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?ai(Object(i),!0).forEach(function(s){Pn(e,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ai(Object(i)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(i,s))})}return e}var li={addCSS:!0,thumbWidth:15,watch:!0};function Mn(e,t){return function(){return Array.from(document.querySelectorAll(t)).includes(this)}.call(e,t)}function xn(e,t){if(e&&t){var i=new Event(t,{bubbles:!0});e.dispatchEvent(i)}}var ht=function(e){return e!=null?e.constructor:null},Zt=function(e,t){return!!(e&&t&&e instanceof t)},Ri=function(e){return e==null},Ii=function(e){return ht(e)===Object},Ln=function(e){return ht(e)===Number&&!Number.isNaN(e)},Ni=function(e){return ht(e)===String},_n=function(e){return ht(e)===Boolean},Rn=function(e){return ht(e)===Function},Di=function(e){return Array.isArray(e)},Oi=function(e){return Zt(e,NodeList)},In=function(e){return Zt(e,Element)},Nn=function(e){return Zt(e,Event)},Dn=function(e){return Ri(e)||(Ni(e)||Di(e)||Oi(e))&&!e.length||Ii(e)&&!Object.keys(e).length},ve={nullOrUndefined:Ri,object:Ii,number:Ln,string:Ni,boolean:_n,function:Rn,array:Di,nodeList:Oi,element:In,event:Nn,empty:Dn};function On(e){var t="".concat(e).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return t?Math.max(0,(t[1]?t[1].length:0)-(t[2]?+t[2]:0)):0}function Un(e,t){if(1>t){var i=On(t);return parseFloat(e.toFixed(i))}return Math.round(e/t)*t}var Fn=(function(){function e(t,i){En(this,e),ve.element(t)?this.element=t:ve.string(t)&&(this.element=document.querySelector(t)),ve.element(this.element)&&ve.empty(this.element.rangeTouch)&&(this.config=oi({},li,{},i),this.init())}return Sn(e,[{key:"init",value:function(){e.enabled&&(this.config.addCSS&&(this.element.style.userSelect="none",this.element.style.webKitUserSelect="none",this.element.style.touchAction="manipulation"),this.listeners(!0),this.element.rangeTouch=this)}},{key:"destroy",value:function(){e.enabled&&(this.config.addCSS&&(this.element.style.userSelect="",this.element.style.webKitUserSelect="",this.element.style.touchAction=""),this.listeners(!1),this.element.rangeTouch=null)}},{key:"listeners",value:function(t){var i=this,s=t?"addEventListener":"removeEventListener";["touchstart","touchmove","touchend"].forEach(function(n){i.element[s](n,function(r){return i.set(r)},!1)})}},{key:"get",value:function(t){if(!e.enabled||!ve.event(t))return null;var i,s=t.target,n=t.changedTouches[0],r=parseFloat(s.getAttribute("min"))||0,a=parseFloat(s.getAttribute("max"))||100,o=parseFloat(s.getAttribute("step"))||1,h=s.getBoundingClientRect(),f=100/h.width*(this.config.thumbWidth/2)/100;return 0>(i=100/h.width*(n.clientX-h.left))?i=0:100<i&&(i=100),50>i?i-=(100-2*i)*f:50<i&&(i+=2*(i-50)*f),r+Un(i/100*(a-r),o)}},{key:"set",value:function(t){e.enabled&&ve.event(t)&&!t.target.disabled&&(t.preventDefault(),t.target.value=this.get(t),xn(t.target,t.type==="touchend"?"change":"input"))}}],[{key:"setup",value:function(t){var i=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},s=null;if(ve.empty(t)||ve.string(t)?s=Array.from(document.querySelectorAll(ve.string(t)?t:'input[type="range"]')):ve.element(t)?s=[t]:ve.nodeList(t)?s=Array.from(t):ve.array(t)&&(s=t.filter(ve.element)),ve.empty(s))return null;var n=oi({},li,{},i);return ve.string(t)&&n.watch&&new MutationObserver(function(r){Array.from(r).forEach(function(a){Array.from(a.addedNodes).forEach(function(o){ve.element(o)&&Mn(o,t)&&new e(o,n)})})}).observe(document.body,{childList:!0,subtree:!0}),s.map(function(r){return new e(r,i)})}},{key:"enabled",get:function(){return"ontouchstart"in document.documentElement}}]),e})(),dt=e=>e!==null&&typeof e<"u"?e.constructor:null,Fe=(e,t)=>!!(e&&t&&e instanceof t),Jt=e=>e===null||typeof e>"u",Ui=e=>dt(e)===Object,Hn=e=>dt(e)===Number&&!Number.isNaN(e),xt=e=>dt(e)===String,jn=e=>dt(e)===Boolean,Fi=e=>typeof e=="function",Hi=e=>Array.isArray(e),Wn=e=>Fe(e,WeakMap),ji=e=>Fe(e,NodeList),Bn=e=>dt(e)===Text,qn=e=>Fe(e,Event),zn=e=>Fe(e,KeyboardEvent),Vn=e=>Fe(e,window.TextTrackCue)||Fe(e,window.VTTCue),Qn=e=>Fe(e,TextTrack)||!Jt(e)&&xt(e.kind),Kn=e=>Fe(e,Promise)&&Fi(e.then);function Xn(e){return e!==null&&typeof e=="object"&&e.nodeType===1&&typeof e.style=="object"&&typeof e.ownerDocument=="object"}function Wi(e){return Jt(e)||(xt(e)||Hi(e)||ji(e))&&!e.length||Ui(e)&&!Object.keys(e).length}function Yn(e){if(Fe(e,window.URL))return!0;if(!xt(e))return!1;let t=e;(!e.startsWith("http://")||!e.startsWith("https://"))&&(t=`http://${e}`);try{return!Wi(new URL(t).hostname)}catch{return!1}}var y={nullOrUndefined:Jt,object:Ui,number:Hn,string:xt,boolean:jn,function:Fi,array:Hi,weakMap:Wn,nodeList:ji,element:Xn,textNode:Bn,event:qn,keyboardEvent:zn,cue:Vn,track:Qn,promise:Kn,url:Yn,empty:Wi},jt=(()=>{const e=document.createElement("span"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},i=Object.keys(t).find(s=>e.style[s]!==void 0);return y.string(i)?t[i]:!1})();function Bi(e,t){setTimeout(()=>{try{e.hidden=!0,e.offsetHeight,e.hidden=!1}catch{}},t)}function Gn(e){return JSON.parse(JSON.stringify(e))}function qi(e,t){return t.split(".").reduce((i,s)=>i&&i[s],e)}function oe(e={},...t){if(!t.length)return e;const i=t.shift();return y.object(i)?(Object.keys(i).forEach(s=>{y.object(i[s])?(Object.keys(e).includes(s)||Object.assign(e,{[s]:{}}),oe(e[s],i[s])):Object.assign(e,{[s]:i[s]})}),oe(e,...t)):e}function zi(e,t){const i=e.length?e:[e];Array.from(i).reverse().forEach((s,n)=>{const r=n>0?t.cloneNode(!0):t,a=s.parentNode,o=s.nextSibling;r.appendChild(s),o?a.insertBefore(r,o):a.appendChild(r)})}function Wt(e,t){!y.element(e)||y.empty(t)||Object.entries(t).filter(([,i])=>!y.nullOrUndefined(i)).forEach(([i,s])=>e.setAttribute(i,s))}function V(e,t,i){const s=document.createElement(e);return y.object(t)&&Wt(s,t),y.string(i)&&(s.textContent=i),s}function Zn(e,t){!y.element(e)||!y.element(t)||t.parentNode.insertBefore(e,t.nextSibling)}function ci(e,t,i,s){y.element(t)&&t.appendChild(V(e,i,s))}function Ue(e){if(y.nodeList(e)||y.array(e)){Array.from(e).forEach(Ue);return}!y.element(e)||!y.element(e.parentNode)||e.parentNode.removeChild(e)}function bt(e){if(!y.element(e))return;let{length:t}=e.childNodes;for(;t>0;)e.removeChild(e.lastChild),t-=1}function Et(e,t){return!y.element(t)||!y.element(t.parentNode)||!y.element(e)?null:(t.parentNode.replaceChild(e,t),e)}function Re(e,t){if(!y.string(e)||y.empty(e))return{};const i={},s=oe({},t);return e.split(",").forEach(n=>{const r=n.trim(),a=r.replace(".",""),o=r.replace(/[[\]]/g,"").split("="),[h]=o,f=o.length>1?o[1].replace(/["']/g,""):"";switch(r.charAt(0)){case".":y.string(s.class)?i.class=`${s.class} ${a}`:i.class=a;break;case"#":i.id=r.replace("#","");break;case"[":i[h]=f;break}}),oe(s,i)}function Ge(e,t){if(!y.element(e))return;let i=t;y.boolean(i)||(i=!e.hidden),e.hidden=i}function Z(e,t,i){if(y.nodeList(e))return Array.from(e).map(s=>Z(s,t,i));if(y.element(e)){let s="toggle";return typeof i<"u"&&(s=i?"add":"remove"),e.classList[s](t),e.classList.contains(t)}return!1}function St(e,t){return y.element(e)&&e.classList.contains(t)}function $e(e,t){const{prototype:i}=Element;function s(){return Array.from(document.querySelectorAll(t)).includes(this)}return(i.matches||i.webkitMatchesSelector||i.mozMatchesSelector||i.msMatchesSelector||s).call(e,t)}function Jn(e,t){const{prototype:i}=Element;function s(){let n=this;do{if($e.matches(n,t))return n;n=n.parentElement||n.parentNode}while(n!==null&&n.nodeType===1);return null}return(i.closest||s).call(e,t)}function ct(e){return this.elements.container.querySelectorAll(e)}function he(e){return this.elements.container.querySelector(e)}function Dt(e=null,t=!1){y.element(e)&&e.focus({preventScroll:!0,focusVisible:t})}var ui={"audio/ogg":"vorbis","audio/wav":"1","video/webm":"vp8, vorbis","video/mp4":"avc1.42E01E, mp4a.40.2","video/ogg":"theora"},ce={audio:"canPlayType"in document.createElement("audio"),video:"canPlayType"in document.createElement("video"),check(e,t){const i=ce[e]||t!=="html5";return{api:i,ui:i&&ce.rangeInput}},pip:document.pictureInPictureEnabled&&!V("video").disablePictureInPicture,airplay:y.function(window.WebKitPlaybackTargetAvailabilityEvent),playsinline:"playsInline"in document.createElement("video"),mime(e){if(y.empty(e))return!1;const[t]=e.split("/");let i=e;if(!this.isHTML5||t!==this.type)return!1;Object.keys(ui).includes(i)&&(i+=`; codecs="${ui[e]}"`);try{return!!(i&&this.media.canPlayType(i).replace(/no/,""))}catch{return!1}},textTracks:"textTracks"in document.createElement("video"),rangeInput:(()=>{const e=document.createElement("input");return e.type="range",e.type==="range"})(),touch:"ontouchstart"in document.documentElement,transitions:jt!==!1,reducedMotion:"matchMedia"in window&&window.matchMedia("(prefers-reduced-motion)").matches},$n=(()=>{let e=!1;try{const t=Object.defineProperty({},"passive",{get(){return e=!0,null}});window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch{}return e})();function ut(e,t,i,s=!1,n=!0,r=!1){if(!e||!("addEventListener"in e)||y.empty(t)||!y.function(i))return;const a=t.split(" ");let o=r;$n&&(o={passive:n,capture:r}),a.forEach(h=>{this&&this.eventListeners&&s&&this.eventListeners.push({element:e,type:h,callback:i,options:o}),e[s?"addEventListener":"removeEventListener"](h,i,o)})}function X(e,t="",i,s=!0,n=!1){ut.call(this,e,t,i,!0,s,n)}function Lt(e,t="",i,s=!0,n=!1){ut.call(this,e,t,i,!1,s,n)}function $t(e,t="",i,s=!0,n=!1){const r=(...a)=>{Lt(e,t,r,s,n),i.apply(this,a)};ut.call(this,e,t,r,!0,s,n)}function Q(e,t="",i=!1,s={}){if(!y.element(e)||y.empty(t))return;const n=new CustomEvent(t,{bubbles:i,detail:{...s,plyr:this}});e.dispatchEvent(n)}function es(){this&&this.eventListeners&&(this.eventListeners.forEach(e=>{const{element:t,type:i,callback:s,options:n}=e;t.removeEventListener(i,s,n)}),this.eventListeners=[])}function ts(){return new Promise(e=>this.ready?setTimeout(e,0):X.call(this,this.elements.container,"ready",e)).then(()=>{})}function Ne(e){y.promise(e)&&e.then(null,()=>{})}function Bt(e){return y.array(e)?e.filter((t,i)=>e.indexOf(t)===i):e}function Vi(e,t){return!y.array(e)||!e.length?null:e.reduce((i,s)=>Math.abs(s-t)<Math.abs(i-t)?s:i)}function Qi(e){return!window||!window.CSS?!1:window.CSS.supports(e)}var hi=[[1,1],[4,3],[3,4],[5,4],[4,5],[3,2],[2,3],[16,10],[10,16],[16,9],[9,16],[21,9],[9,21],[32,9],[9,32]].reduce((e,[t,i])=>({...e,[t/i]:[t,i]}),{});function Ki(e){return!y.array(e)&&(!y.string(e)||!e.includes(":"))?!1:(y.array(e)?e:e.split(":")).map(Number).every(y.number)}function Pt(e){if(!y.array(e)||!e.every(y.number))return null;const[t,i]=e,s=(r,a)=>a===0?r:s(a,r%a),n=s(t,i);return[t/n,i/n]}function ei(e){const t=s=>Ki(s)?s.split(":").map(Number):null;let i=t(e);if(i===null&&(i=t(this.config.ratio)),i===null&&!y.empty(this.embed)&&y.array(this.embed.ratio)&&({ratio:i}=this.embed),i===null&&this.isHTML5){const{videoWidth:s,videoHeight:n}=this.media;i=[s,n]}return Pt(i)}function it(e){if(!this.isVideo)return{};const{wrapper:t}=this.elements,i=ei.call(this,e);if(!y.array(i))return{};const[s,n]=Pt(i),r=Qi(`aspect-ratio: ${s}/${n}`),a=100/s*n;if(r?t.style.aspectRatio=`${s}/${n}`:t.style.paddingBottom=`${a}%`,this.isVimeo&&!this.config.vimeo.premium&&this.supported.ui){const o=100/this.media.offsetWidth*Number.parseInt(window.getComputedStyle(this.media).paddingBottom,10),h=(o-a)/(o/50);this.fullscreen.active?t.style.paddingBottom=null:this.media.style.transform=`translateY(-${h}%)`}else this.isHTML5&&t.classList.add(this.config.classNames.videoFixedRatio);return{padding:a,ratio:i}}function Xi(e,t,i=.05){const s=e/t,n=Vi(Object.keys(hi),s);return Math.abs(n-s)<=i?hi[n]:[e,t]}function is(){return[Math.max(document.documentElement.clientWidth||0,window.innerWidth||0),Math.max(document.documentElement.clientHeight||0,window.innerHeight||0)]}var ze={getSources(){return this.isHTML5?Array.from(this.media.querySelectorAll("source")).filter(e=>{const t=e.getAttribute("type");return y.empty(t)?!0:ce.mime.call(this,t)}):[]},getQualityOptions(){return this.config.quality.forced?this.config.quality.options:ze.getSources.call(this).map(e=>Number(e.getAttribute("size"))).filter(Boolean)},setup(){if(!this.isHTML5)return;const e=this;e.options.speed=e.config.speed.options,y.empty(this.config.ratio)||it.call(e),Object.defineProperty(e.media,"quality",{get(){const t=ze.getSources.call(e).find(i=>i.getAttribute("src")===e.source);return t&&Number(t.getAttribute("size"))},set(t){if(e.quality!==t){if(e.config.quality.forced&&y.function(e.config.quality.onChange))e.config.quality.onChange(t);else{const i=ze.getSources.call(e).find(h=>Number(h.getAttribute("size"))===t);if(!i)return;const{currentTime:s,paused:n,preload:r,readyState:a,playbackRate:o}=e.media;e.media.src=i.getAttribute("src"),(r!=="none"||a)&&(e.once("loadedmetadata",()=>{e.speed=o,e.currentTime=s,n||Ne(e.play())}),e.media.load())}Q.call(e,e.media,"qualitychange",!1,{quality:t})}}})},cancelRequests(){this.isHTML5&&(Ue(ze.getSources.call(this)),this.media.setAttribute("src",this.config.blankVideo),this.media.load(),this.debug.log("Cancelled network requests"))}},be={isIE:!!window.document.documentMode,isEdge:/Edge/.test(navigator.userAgent),isWebKit:"WebkitAppearance"in document.documentElement.style&&!/Edge/.test(navigator.userAgent),isIPadOS:navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1,isIos:/iPad|iPhone|iPod/i.test(navigator.userAgent)&&navigator.maxTouchPoints>1};function ns(e){return`${e}-${Math.floor(Math.random()*1e4)}`}function qt(e,...t){return y.empty(e)?e:e.toString().replace(/\{(\d+)\}/g,(i,s)=>t[s].toString())}function ss(e,t){return e===0||t===0||Number.isNaN(e)||Number.isNaN(t)?0:(e/t*100).toFixed(2)}function lt(e="",t="",i=""){return e.replace(new RegExp(t.toString().replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1"),"g"),i.toString())}function Yi(e=""){return e.toString().replace(/\w\S*/g,t=>t.charAt(0).toUpperCase()+t.slice(1).toLowerCase())}function rs(e=""){let t=e.toString();return t=lt(t,"-"," "),t=lt(t,"_"," "),t=Yi(t),lt(t," ","")}function as(e=""){let t=e.toString();return t=rs(t),t.charAt(0).toLowerCase()+t.slice(1)}function os(e){const t=document.createDocumentFragment(),i=document.createElement("div");return t.appendChild(i),i.innerHTML=e,t.firstChild.textContent}function ls(e){const t=document.createElement("div");return t.appendChild(e),t.innerHTML}var di={pip:"PIP",airplay:"AirPlay",html5:"HTML5",vimeo:"Vimeo",youtube:"YouTube"},ge={get(e="",t={}){if(y.empty(e)||y.empty(t))return"";let i=qi(t.i18n,e);if(y.empty(i))return Object.keys(di).includes(e)?di[e]:"";const s={"{seektime}":t.seekTime,"{title}":t.title};return Object.entries(s).forEach(([n,r])=>{i=lt(i,n,r)}),i}},Gi=class zt{constructor(t){B(this,"get",i=>{if(!zt.supported||!this.enabled)return null;const s=window.localStorage.getItem(this.key);if(y.empty(s))return null;const n=JSON.parse(s);return y.string(i)&&i.length?n[i]:n}),B(this,"set",i=>{if(!zt.supported||!this.enabled||!y.object(i))return;let s=this.get();y.empty(s)&&(s={}),oe(s,i);try{window.localStorage.setItem(this.key,JSON.stringify(s))}catch{}}),this.enabled=t.config.storage.enabled,this.key=t.config.storage.key}static get supported(){try{if(!("localStorage"in window))return!1;const t="___test";return window.localStorage.setItem(t,t),window.localStorage.removeItem(t),!0}catch{return!1}}};function ft(e,t="text",i=!1){return new Promise((s,n)=>{try{const r=new XMLHttpRequest;if(!("withCredentials"in r))return;i&&(r.withCredentials=!0),r.addEventListener("load",()=>{if(t==="text")try{s(JSON.parse(r.responseText))}catch{s(r.responseText)}else s(r.response)}),r.addEventListener("error",()=>{throw new Error(r.status)}),r.open("GET",e,!0),r.responseType=t,r.send()}catch(r){n(r)}})}function Zi(e,t){if(!y.string(e))return;const i="cache",s=y.string(t);let n=!1;const r=()=>document.getElementById(t)!==null,a=(o,h)=>{o.innerHTML=h,!(s&&r())&&document.body.insertAdjacentElement("afterbegin",o)};if(!s||!r()){const o=Gi.supported,h=document.createElement("div");if(h.setAttribute("hidden",""),s&&h.setAttribute("id",t),o){const f=window.localStorage.getItem(`${i}-${t}`);n=f!==null,n&&a(h,JSON.parse(f).content)}ft(e).then(f=>{if(!y.empty(f)){if(o)try{window.localStorage.setItem(`${i}-${t}`,JSON.stringify({content:f}))}catch{}a(h,f)}}).catch(()=>{})}}var Ji=e=>Math.trunc(e/60/60%60,10),cs=e=>Math.trunc(e/60%60,10),us=e=>Math.trunc(e%60,10);function _t(e=0,t=!1,i=!1){if(!y.number(e))return _t(void 0,t,i);const s=o=>`0${o}`.slice(-2);let n=Ji(e);const r=cs(e),a=us(e);return t||n>0?n=`${n}:`:n="",`${i&&e>0?"-":""}${n}${s(r)}:${s(a)}`}var W={getIconUrl(){const e=new URL(this.config.iconUrl,window.location),t=window.location.host?window.location.host:window.top.location.host,i=e.host!==t||be.isIE&&!window.svg4everybody;return{url:this.config.iconUrl,cors:i}},findElements(){try{return this.elements.controls=he.call(this,this.config.selectors.controls.wrapper),this.elements.buttons={play:ct.call(this,this.config.selectors.buttons.play),pause:he.call(this,this.config.selectors.buttons.pause),restart:he.call(this,this.config.selectors.buttons.restart),rewind:he.call(this,this.config.selectors.buttons.rewind),fastForward:he.call(this,this.config.selectors.buttons.fastForward),mute:he.call(this,this.config.selectors.buttons.mute),pip:he.call(this,this.config.selectors.buttons.pip),airplay:he.call(this,this.config.selectors.buttons.airplay),settings:he.call(this,this.config.selectors.buttons.settings),captions:he.call(this,this.config.selectors.buttons.captions),fullscreen:he.call(this,this.config.selectors.buttons.fullscreen)},this.elements.progress=he.call(this,this.config.selectors.progress),this.elements.inputs={seek:he.call(this,this.config.selectors.inputs.seek),volume:he.call(this,this.config.selectors.inputs.volume)},this.elements.display={buffer:he.call(this,this.config.selectors.display.buffer),currentTime:he.call(this,this.config.selectors.display.currentTime),duration:he.call(this,this.config.selectors.display.duration)},y.element(this.elements.progress)&&(this.elements.display.seekTooltip=this.elements.progress.querySelector(`.${this.config.classNames.tooltip}`)),!0}catch(e){return this.debug.warn("It looks like there is a problem with your custom controls HTML",e),this.toggleNativeControls(!0),!1}},createIcon(e,t){const i="http://www.w3.org/2000/svg",s=W.getIconUrl.call(this),n=`${s.cors?"":s.url}#${this.config.iconPrefix}`,r=document.createElementNS(i,"svg");Wt(r,oe(t,{"aria-hidden":"true",focusable:"false"}));const a=document.createElementNS(i,"use"),o=`${n}-${e}`;return"href"in a&&a.setAttributeNS("http://www.w3.org/1999/xlink","href",o),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o),r.appendChild(a),r},createLabel(e,t={}){const i=ge.get(e,this.config);return V("span",{...t,class:[t.class,this.config.classNames.hidden].filter(Boolean).join(" ")},i)},createBadge(e){if(y.empty(e))return null;const t=V("span",{class:this.config.classNames.menu.value});return t.appendChild(V("span",{class:this.config.classNames.menu.badge},e)),t},createButton(e,t){const i=oe({},t);let s=as(e);const n={element:"button",toggle:!1,label:null,icon:null,labelPressed:null,iconPressed:null};switch(["element","icon","label"].forEach(a=>{Object.keys(i).includes(a)&&(n[a]=i[a],delete i[a])}),n.element==="button"&&!Object.keys(i).includes("type")&&(i.type="button"),Object.keys(i).includes("class")?i.class.split(" ").includes(this.config.classNames.control)||oe(i,{class:`${i.class} ${this.config.classNames.control}`}):i.class=this.config.classNames.control,e){case"play":n.toggle=!0,n.label="play",n.labelPressed="pause",n.icon="play",n.iconPressed="pause";break;case"mute":n.toggle=!0,n.label="mute",n.labelPressed="unmute",n.icon="volume",n.iconPressed="muted";break;case"captions":n.toggle=!0,n.label="enableCaptions",n.labelPressed="disableCaptions",n.icon="captions-off",n.iconPressed="captions-on";break;case"fullscreen":n.toggle=!0,n.label="enterFullscreen",n.labelPressed="exitFullscreen",n.icon="enter-fullscreen",n.iconPressed="exit-fullscreen";break;case"play-large":i.class+=` ${this.config.classNames.control}--overlaid`,s="play",n.label="play",n.icon="play";break;default:y.empty(n.label)&&(n.label=s),y.empty(n.icon)&&(n.icon=e)}const r=V(n.element);return n.toggle?(r.appendChild(W.createIcon.call(this,n.iconPressed,{class:"icon--pressed"})),r.appendChild(W.createIcon.call(this,n.icon,{class:"icon--not-pressed"})),r.appendChild(W.createLabel.call(this,n.labelPressed,{class:"label--pressed"})),r.appendChild(W.createLabel.call(this,n.label,{class:"label--not-pressed"}))):(r.appendChild(W.createIcon.call(this,n.icon)),r.appendChild(W.createLabel.call(this,n.label))),oe(i,Re(this.config.selectors.buttons[s],i)),Wt(r,i),s==="play"?(y.array(this.elements.buttons[s])||(this.elements.buttons[s]=[]),this.elements.buttons[s].push(r)):this.elements.buttons[s]=r,r},createRange(e,t){const i=V("input",oe(Re(this.config.selectors.inputs[e]),{type:"range",min:0,max:100,step:.01,value:0,autocomplete:"off",role:"slider","aria-label":ge.get(e,this.config),"aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":0},t));return this.elements.inputs[e]=i,W.updateRangeFill.call(this,i),Fn.setup(i),i},createProgress(e,t){const i=V("progress",oe(Re(this.config.selectors.display[e]),{min:0,max:100,value:0,role:"progressbar","aria-hidden":!0},t));if(e!=="volume"){i.appendChild(V("span",null,"0"));const s={played:"played",buffer:"buffered"}[e];i.textContent=`% ${(s?ge.get(s,this.config):"").toLowerCase()}`}return this.elements.display[e]=i,i},createTime(e,t){const i=Re(this.config.selectors.display[e],t),s=V("div",oe(i,{class:`${i.class?i.class:""} ${this.config.classNames.display.time} `.trim(),"aria-label":ge.get(e,this.config),role:"timer"}),"00:00");return this.elements.display[e]=s,s},bindMenuItemShortcuts(e,t){X.call(this,e,"keydown keyup",i=>{if(![" ","ArrowUp","ArrowDown","ArrowRight"].includes(i.key)||(i.preventDefault(),i.stopPropagation(),i.type==="keydown"))return;const s=$e(e,'[role="menuitemradio"]');if(!s&&[" ","ArrowRight"].includes(i.key))W.showMenuPanel.call(this,t,!0);else{let n;i.key!==" "&&(i.key==="ArrowDown"||s&&i.key==="ArrowRight"?(n=e.nextElementSibling,y.element(n)||(n=e.parentNode.firstElementChild)):(n=e.previousElementSibling,y.element(n)||(n=e.parentNode.lastElementChild)),Dt.call(this,n,!0))}},!1),X.call(this,e,"keyup",i=>{i.key==="Return"&&W.focusFirstMenuItem.call(this,null,!0)})},createMenuItem({value:e,list:t,type:i,title:s,badge:n=null,checked:r=!1}){const a=Re(this.config.selectors.inputs[i]),o=V("button",oe(a,{type:"button",role:"menuitemradio",class:`${this.config.classNames.control} ${a.class?a.class:""}`.trim(),"aria-checked":r,value:e})),h=V("span");h.innerHTML=s,y.element(n)&&h.appendChild(n),o.appendChild(h),Object.defineProperty(o,"checked",{enumerable:!0,get(){return o.getAttribute("aria-checked")==="true"},set(f){f&&Array.from(o.parentNode.children).filter(l=>$e(l,'[role="menuitemradio"]')).forEach(l=>l.setAttribute("aria-checked","false")),o.setAttribute("aria-checked",f?"true":"false")}}),this.listeners.bind(o,"click keyup",f=>{if(!(y.keyboardEvent(f)&&f.key!==" ")){switch(f.preventDefault(),f.stopPropagation(),o.checked=!0,i){case"language":this.currentTrack=Number(e);break;case"quality":this.quality=e;break;case"speed":this.speed=Number.parseFloat(e);break}W.showMenuPanel.call(this,"home",y.keyboardEvent(f))}},i,!1),W.bindMenuItemShortcuts.call(this,o,i),t.appendChild(o)},formatTime(e=0,t=!1){return y.number(e)?_t(e,Ji(this.duration)>0,t):e},updateTimeDisplay(e=null,t=0,i=!1){!y.element(e)||!y.number(t)||(e.textContent=W.formatTime(t,i))},updateVolume(){this.supported.ui&&(y.element(this.elements.inputs.volume)&&W.setRange.call(this,this.elements.inputs.volume,this.muted?0:this.volume),y.element(this.elements.buttons.mute)&&(this.elements.buttons.mute.pressed=this.muted||this.volume===0))},setRange(e,t=0){y.element(e)&&(e.value=t,W.updateRangeFill.call(this,e))},updateProgress(e){if(!this.supported.ui||!y.event(e))return;let t=0;const i=(s,n)=>{const r=y.number(n)?n:0,a=y.element(s)?s:this.elements.display.buffer;if(y.element(a)){a.value=r;const o=a.getElementsByTagName("span")[0];y.element(o)&&(o.childNodes[0].nodeValue=r)}};if(e)switch(e.type){case"timeupdate":case"seeking":case"seeked":t=ss(this.currentTime,this.duration),e.type==="timeupdate"&&W.setRange.call(this,this.elements.inputs.seek,t);break;case"playing":case"progress":i(this.elements.display.buffer,this.buffered*100);break}},updateRangeFill(e){const t=y.event(e)?e.target:e;if(!(!y.element(t)||t.getAttribute("type")!=="range")){if($e(t,this.config.selectors.inputs.seek)){t.setAttribute("aria-valuenow",this.currentTime);const i=W.formatTime(this.currentTime),s=W.formatTime(this.duration),n=ge.get("seekLabel",this.config);t.setAttribute("aria-valuetext",n.replace("{currentTime}",i).replace("{duration}",s))}else if($e(t,this.config.selectors.inputs.volume)){const i=t.value*100;t.setAttribute("aria-valuenow",i),t.setAttribute("aria-valuetext",`${i.toFixed(1)}%`)}else t.setAttribute("aria-valuenow",t.value);!be.isWebKit&&!be.isIPadOS||t.style.setProperty("--value",`${t.value/t.max*100}%`)}},updateSeekTooltip(e){var t,i;if(!this.config.tooltips.seek||!y.element(this.elements.inputs.seek)||!y.element(this.elements.display.seekTooltip)||this.duration===0)return;const s=this.elements.display.seekTooltip,n=`${this.config.classNames.tooltip}--visible`,r=l=>Z(s,n,l);if(this.touch){r(!1);return}let a=0;const o=this.elements.progress.getBoundingClientRect();if(y.event(e)){const l=e.pageX-e.clientX;a=100/o.width*(e.pageX-o.left-l)}else if(St(s,n))a=Number.parseFloat(s.style.left,10);else return;a<0?a=0:a>100&&(a=100);const h=this.duration/100*a;s.textContent=W.formatTime(h);const f=(t=this.config.markers)===null||t===void 0||(i=t.points)===null||i===void 0?void 0:i.find(({time:l})=>l===Math.round(h));f&&s.insertAdjacentHTML("afterbegin",`${f.label}<br>`),s.style.left=`${a}%`,y.event(e)&&["mouseenter","mouseleave"].includes(e.type)&&r(e.type==="mouseenter")},timeUpdate(e){const t=!y.element(this.elements.display.duration)&&this.config.invertTime;W.updateTimeDisplay.call(this,this.elements.display.currentTime,t?this.duration-this.currentTime:this.currentTime,t),!(e&&e.type==="timeupdate"&&this.media.seeking)&&W.updateProgress.call(this,e)},durationUpdate(){if(!this.supported.ui||!this.config.invertTime&&this.currentTime)return;if(this.duration>=2**32){Ge(this.elements.display.currentTime,!0),Ge(this.elements.progress,!0);return}y.element(this.elements.inputs.seek)&&this.elements.inputs.seek.setAttribute("aria-valuemax",this.duration);const e=y.element(this.elements.display.duration);!e&&this.config.displayDuration&&this.paused&&W.updateTimeDisplay.call(this,this.elements.display.currentTime,this.duration),e&&W.updateTimeDisplay.call(this,this.elements.display.duration,this.duration),this.config.markers.enabled&&W.setMarkers.call(this),W.updateSeekTooltip.call(this)},toggleMenuButton(e,t){Ge(this.elements.settings.buttons[e],!t)},updateSetting(e,t,i){const s=this.elements.settings.panels[e];let n=null,r=t;if(e==="captions")n=this.currentTrack;else{if(n=y.empty(i)?this[e]:i,y.empty(n)&&(n=this.config[e].default),!y.empty(this.options[e])&&!this.options[e].includes(n)){this.debug.warn(`Unsupported value of '${n}' for ${e}`);return}if(!this.config[e].options.includes(n)){this.debug.warn(`Disabled value of '${n}' for ${e}`);return}}if(y.element(r)||(r=s&&s.querySelector('[role="menu"]')),!y.element(r))return;const a=this.elements.settings.buttons[e].querySelector(`.${this.config.classNames.menu.value}`);a.innerHTML=W.getLabel.call(this,e,n);const o=r&&r.querySelector(`[value="${n}"]`);y.element(o)&&(o.checked=!0)},getLabel(e,t){switch(e){case"speed":return t===1?ge.get("normal",this.config):`${t}&times;`;case"quality":if(y.number(t)){const i=ge.get(`qualityLabel.${t}`,this.config);return i.length?i:`${t}p`}return Yi(t);case"captions":return Y.getLabel.call(this);default:return null}},setQualityMenu(e){if(!y.element(this.elements.settings.panels.quality))return;const t="quality",i=this.elements.settings.panels.quality.querySelector('[role="menu"]');y.array(e)&&(this.options.quality=Bt(e).filter(r=>this.config.quality.options.includes(r)));const s=!y.empty(this.options.quality)&&this.options.quality.length>1;if(W.toggleMenuButton.call(this,t,s),bt(i),W.checkMenu.call(this),!s)return;const n=r=>{const a=ge.get(`qualityBadge.${r}`,this.config);return a.length?W.createBadge.call(this,a):null};this.options.quality.sort((r,a)=>{const o=this.config.quality.options;return o.indexOf(r)>o.indexOf(a)?1:-1}).forEach(r=>{W.createMenuItem.call(this,{value:r,list:i,type:t,title:W.getLabel.call(this,"quality",r),badge:n(r)})}),W.updateSetting.call(this,t,i)},setCaptionsMenu(){if(!y.element(this.elements.settings.panels.captions))return;const e="captions",t=this.elements.settings.panels.captions.querySelector('[role="menu"]'),i=Y.getTracks.call(this),s=!!i.length;if(W.toggleMenuButton.call(this,e,s),bt(t),W.checkMenu.call(this),!s)return;const n=i.map((r,a)=>({value:a,checked:this.captions.toggled&&this.currentTrack===a,title:Y.getLabel.call(this,r),badge:r.language&&W.createBadge.call(this,r.language.toUpperCase()),list:t,type:"language"}));n.unshift({value:-1,checked:!this.captions.toggled,title:ge.get("disabled",this.config),list:t,type:"language"}),n.forEach(W.createMenuItem.bind(this)),W.updateSetting.call(this,e,t)},setSpeedMenu(){if(!y.element(this.elements.settings.panels.speed))return;const e="speed",t=this.elements.settings.panels.speed.querySelector('[role="menu"]');this.options.speed=this.options.speed.filter(s=>s>=this.minimumSpeed&&s<=this.maximumSpeed);const i=!y.empty(this.options.speed)&&this.options.speed.length>1;W.toggleMenuButton.call(this,e,i),bt(t),W.checkMenu.call(this),i&&(this.options.speed.forEach(s=>{W.createMenuItem.call(this,{value:s,list:t,type:e,title:W.getLabel.call(this,"speed",s)})}),W.updateSetting.call(this,e,t))},checkMenu(){const{buttons:e}=this.elements.settings,t=!y.empty(e)&&Object.values(e).some(i=>!i.hidden);Ge(this.elements.settings.menu,!t)},focusFirstMenuItem(e,t=!1){if(this.elements.settings.popup.hidden)return;let i=e;y.element(i)||(i=Object.values(this.elements.settings.panels).find(n=>!n.hidden));const s=i.querySelector('[role^="menuitem"]');Dt.call(this,s,t)},toggleMenu(e){const{popup:t}=this.elements.settings,i=this.elements.buttons.settings;if(!y.element(t)||!y.element(i))return;const{hidden:s}=t;let n=s;if(y.boolean(e))n=e;else if(y.keyboardEvent(e)&&e.key==="Escape")n=!1;else if(y.event(e)){const r=y.function(e.composedPath)?e.composedPath()[0]:e.target,a=t.contains(r);if(a||!a&&e.target!==i&&n)return}i.setAttribute("aria-expanded",n),Ge(t,!n),Z(this.elements.container,this.config.classNames.menu.open,n),n&&y.keyboardEvent(e)?W.focusFirstMenuItem.call(this,null,!0):!n&&!s&&Dt.call(this,i,y.keyboardEvent(e))},getMenuSize(e){const t=e.cloneNode(!0);t.style.position="absolute",t.style.opacity=0,t.removeAttribute("hidden"),e.parentNode.appendChild(t);const i=t.scrollWidth,s=t.scrollHeight;return Ue(t),{width:i,height:s}},showMenuPanel(e="",t=!1){const i=this.elements.container.querySelector(`#plyr-settings-${this.id}-${e}`);if(!y.element(i))return;const s=i.parentNode,n=Array.from(s.children).find(r=>!r.hidden);if(ce.transitions&&!ce.reducedMotion){s.style.width=`${n.scrollWidth}px`,s.style.height=`${n.scrollHeight}px`;const r=W.getMenuSize.call(this,i),a=o=>{o.target!==s||!["width","height"].includes(o.propertyName)||(s.style.width="",s.style.height="",Lt.call(this,s,jt,a))};X.call(this,s,jt,a),s.style.width=`${r.width}px`,s.style.height=`${r.height}px`}Ge(n,!0),Ge(i,!1),W.focusFirstMenuItem.call(this,i,t)},setDownloadUrl(){const e=this.elements.buttons.download;y.element(e)&&e.setAttribute("href",this.download)},create(e){const{bindMenuItemShortcuts:t,createButton:i,createProgress:s,createRange:n,createTime:r,setQualityMenu:a,setSpeedMenu:o,showMenuPanel:h}=W;this.elements.controls=null,y.array(this.config.controls)&&this.config.controls.includes("play-large")&&this.elements.container.appendChild(i.call(this,"play-large"));const f=V("div",Re(this.config.selectors.controls.wrapper));this.elements.controls=f;const l={class:"plyr__controls__item"};return Bt(y.array(this.config.controls)?this.config.controls:[]).forEach(u=>{if(u==="restart"&&f.appendChild(i.call(this,"restart",l)),u==="rewind"&&f.appendChild(i.call(this,"rewind",l)),u==="play"&&f.appendChild(i.call(this,"play",l)),u==="fast-forward"&&f.appendChild(i.call(this,"fast-forward",l)),u==="progress"){const c=V("div",{class:`${l.class} plyr__progress__container`}),d=V("div",Re(this.config.selectors.progress));if(d.appendChild(n.call(this,"seek",{id:`plyr-seek-${e.id}`})),d.appendChild(s.call(this,"buffer")),this.config.tooltips.seek){const m=V("span",{class:this.config.classNames.tooltip},"00:00");d.appendChild(m),this.elements.display.seekTooltip=m}this.elements.progress=d,c.appendChild(this.elements.progress),f.appendChild(c)}if(u==="current-time"&&f.appendChild(r.call(this,"currentTime",l)),u==="duration"&&f.appendChild(r.call(this,"duration",l)),u==="mute"||u==="volume"){let{volume:c}=this.elements;if((!y.element(c)||!f.contains(c))&&(c=V("div",oe({},l,{class:`${l.class} plyr__volume`.trim()})),this.elements.volume=c,f.appendChild(c)),u==="mute"&&c.appendChild(i.call(this,"mute")),u==="volume"&&!be.isIos&&!be.isIPadOS){const d={max:1,step:.05,value:this.config.volume};c.appendChild(n.call(this,"volume",oe(d,{id:`plyr-volume-${e.id}`})))}}if(u==="captions"&&f.appendChild(i.call(this,"captions",l)),u==="settings"&&!y.empty(this.config.settings)){const c=V("div",oe({},l,{class:`${l.class} plyr__menu`.trim(),hidden:""}));c.appendChild(i.call(this,"settings",{"aria-haspopup":!0,"aria-controls":`plyr-settings-${e.id}`,"aria-expanded":!1}));const d=V("div",{class:"plyr__menu__container",id:`plyr-settings-${e.id}`,hidden:""}),m=V("div"),T=V("div",{id:`plyr-settings-${e.id}-home`}),x=V("div",{role:"menu"});T.appendChild(x),m.appendChild(T),this.elements.settings.panels.home=T,this.config.settings.forEach(k=>{const M=V("button",oe(Re(this.config.selectors.buttons.settings),{type:"button",class:`${this.config.classNames.control} ${this.config.classNames.control}--forward`,role:"menuitem","aria-haspopup":!0,hidden:""}));t.call(this,M,k),X.call(this,M,"click",()=>{h.call(this,k,!1)});const L=V("span",null,ge.get(k,this.config)),E=V("span",{class:this.config.classNames.menu.value});E.innerHTML=e[k],L.appendChild(E),M.appendChild(L),x.appendChild(M);const D=V("div",{id:`plyr-settings-${e.id}-${k}`,hidden:""}),w=V("button",{type:"button",class:`${this.config.classNames.control} ${this.config.classNames.control}--back`});w.appendChild(V("span",{"aria-hidden":!0},ge.get(k,this.config))),w.appendChild(V("span",{class:this.config.classNames.hidden},ge.get("menuBack",this.config))),X.call(this,D,"keydown",R=>{R.key==="ArrowLeft"&&(R.preventDefault(),R.stopPropagation(),h.call(this,"home",!0))},!1),X.call(this,w,"click",()=>{h.call(this,"home",!1)}),D.appendChild(w),D.appendChild(V("div",{role:"menu"})),m.appendChild(D),this.elements.settings.buttons[k]=M,this.elements.settings.panels[k]=D}),d.appendChild(m),c.appendChild(d),f.appendChild(c),this.elements.settings.popup=d,this.elements.settings.menu=c}if(u==="pip"&&ce.pip&&f.appendChild(i.call(this,"pip",l)),u==="airplay"&&ce.airplay&&f.appendChild(i.call(this,"airplay",l)),u==="download"){const c=oe({},l,{element:"a",href:this.download,target:"_blank"});this.isHTML5&&(c.download="");const{download:d}=this.config.urls;!y.url(d)&&this.isEmbed&&oe(c,{icon:`logo-${this.provider}`,label:this.provider}),f.appendChild(i.call(this,"download",c))}u==="fullscreen"&&f.appendChild(i.call(this,"fullscreen",l))}),this.isHTML5&&a.call(this,ze.getQualityOptions.call(this)),o.call(this),f},inject(){if(this.config.loadSprite){const a=W.getIconUrl.call(this);a.cors&&Zi(a.url,"sprite-plyr")}this.id=Math.floor(Math.random()*1e4);let e=null;this.elements.controls=null;const t={id:this.id,seektime:this.config.seekTime,title:this.config.title};let i=!0;y.function(this.config.controls)&&(this.config.controls=this.config.controls.call(this,t)),this.config.controls||(this.config.controls=[]),y.element(this.config.controls)||y.string(this.config.controls)?e=this.config.controls:(e=W.create.call(this,{id:this.id,seektime:this.config.seekTime,speed:this.speed,quality:this.quality,captions:Y.getLabel.call(this)}),i=!1);const s=a=>{let o=a;return Object.entries(t).forEach(([h,f])=>{o=lt(o,`{${h}}`,f)}),o};i&&y.string(this.config.controls)&&(e=s(e));let n;y.string(this.config.selectors.controls.container)&&(n=document.querySelector(this.config.selectors.controls.container)),y.element(n)||(n=this.elements.container);const r=y.element(e)?"insertAdjacentElement":"insertAdjacentHTML";if(n[r]("afterbegin",e),y.element(this.elements.controls)||W.findElements.call(this),!y.empty(this.elements.buttons)){const a=o=>{const h=this.config.classNames.controlPressed;o.setAttribute("aria-pressed","false"),Object.defineProperty(o,"pressed",{configurable:!0,enumerable:!0,get(){return St(o,h)},set(f=!1){Z(o,h,f),o.setAttribute("aria-pressed",f?"true":"false")}})};Object.values(this.elements.buttons).filter(Boolean).forEach(o=>{y.array(o)||y.nodeList(o)?Array.from(o).filter(Boolean).forEach(a):a(o)})}if(be.isEdge&&Bi(n),this.config.tooltips.controls){const{classNames:a,selectors:o}=this.config,h=`${o.controls.wrapper} ${o.labels} .${a.hidden}`,f=ct.call(this,h);Array.from(f).forEach(l=>{Z(l,this.config.classNames.hidden,!1),Z(l,this.config.classNames.tooltip,!0)})}},setMediaMetadata(){try{"mediaSession"in navigator&&(navigator.mediaSession.metadata=new window.MediaMetadata({title:this.config.mediaMetadata.title,artist:this.config.mediaMetadata.artist,album:this.config.mediaMetadata.album,artwork:this.config.mediaMetadata.artwork}))}catch{}},setMarkers(){var e,t;if(!this.duration||this.elements.markers)return;const i=(e=this.config.markers)===null||e===void 0||(t=e.points)===null||t===void 0?void 0:t.filter(({time:h})=>h>0&&h<this.duration);if(!(i!=null&&i.length))return;const s=document.createDocumentFragment(),n=document.createDocumentFragment();let r=null;const a=`${this.config.classNames.tooltip}--visible`,o=h=>Z(r,a,h);i.forEach(h=>{const f=V("span",{class:this.config.classNames.marker},""),l=`${h.time/this.duration*100}%`;r&&(f.addEventListener("mouseenter",()=>{h.label||(r.style.left=l,r.innerHTML=h.label,o(!0))}),f.addEventListener("mouseleave",()=>{o(!1)})),f.addEventListener("click",()=>{this.currentTime=h.time}),f.style.left=l,n.appendChild(f)}),s.appendChild(n),this.config.tooltips.seek||(r=V("span",{class:this.config.classNames.tooltip},""),s.appendChild(r)),this.elements.markers={points:n,tip:r},this.elements.progress.appendChild(s)}};function $i(e,t=!0){let i=e;if(t){const s=document.createElement("a");s.href=i,i=s.href}try{return new URL(i)}catch{return null}}function en(e){const t=new URLSearchParams;return y.object(e)&&Object.entries(e).forEach(([i,s])=>{t.set(i,s)}),t}var Y={setup(){if(!this.supported.ui)return;if(!this.isVideo||this.isYouTube||this.isHTML5&&!ce.textTracks){y.array(this.config.controls)&&this.config.controls.includes("settings")&&this.config.settings.includes("captions")&&W.setCaptionsMenu.call(this);return}if(y.element(this.elements.captions)||(this.elements.captions=V("div",Re(this.config.selectors.captions)),this.elements.captions.setAttribute("dir","auto"),Zn(this.elements.captions,this.elements.wrapper)),be.isIE&&window.URL){const s=this.media.querySelectorAll("track");Array.from(s).forEach(n=>{const r=n.getAttribute("src"),a=$i(r);a!==null&&a.hostname!==window.location.href.hostname&&["http:","https:"].includes(a.protocol)&&ft(r,"blob").then(o=>{n.setAttribute("src",window.URL.createObjectURL(o))}).catch(()=>{Ue(n)})})}const e=Bt((navigator.languages||[navigator.language||navigator.userLanguage||"en"]).map(s=>s.split("-")[0]));let t=(this.storage.get("language")||this.captions.language||this.config.captions.language||"auto").toLowerCase();t==="auto"&&([t]=e);let i=this.storage.get("captions")||this.captions.active;if(y.boolean(i)||({active:i}=this.config.captions),Object.assign(this.captions,{toggled:!1,active:i,language:t,languages:e}),this.isHTML5){const s=this.config.captions.update?"addtrack removetrack":"removetrack";X.call(this,this.media.textTracks,s,Y.update.bind(this))}setTimeout(Y.update.bind(this),0)},update(){const e=Y.getTracks.call(this,!0),{active:t,language:i,meta:s,currentTrackNode:n}=this.captions,r=!!e.find(a=>a.language===i);this.isHTML5&&this.isVideo&&e.filter(a=>!s.get(a)).forEach(a=>{this.debug.log("Track added",a),s.set(a,{default:a.mode==="showing"}),a.mode==="showing"&&(a.mode="hidden"),X.call(this,a,"cuechange",()=>Y.updateCues.call(this))}),(r&&this.language!==i||!e.includes(n))&&(Y.setLanguage.call(this,i),Y.toggle.call(this,t&&r)),this.elements&&Z(this.elements.container,this.config.classNames.captions.enabled,!y.empty(e)),y.array(this.config.controls)&&this.config.controls.includes("settings")&&this.config.settings.includes("captions")&&W.setCaptionsMenu.call(this)},toggle(e,t=!0){if(!this.supported.ui)return;const{toggled:i}=this.captions,s=this.config.classNames.captions.active,n=y.nullOrUndefined(e)?!i:e;if(n!==i){if(t||(this.captions.active=n,this.storage.set({captions:n})),!this.language&&n&&!t){const r=Y.getTracks.call(this),a=Y.findTrack.call(this,[this.captions.language,...this.captions.languages],!0);this.captions.language=a.language,Y.set.call(this,r.indexOf(a));return}this.elements.buttons.captions&&(this.elements.buttons.captions.pressed=n),Z(this.elements.container,s,n),this.captions.toggled=n,W.updateSetting.call(this,"captions"),Q.call(this,this.media,n?"captionsenabled":"captionsdisabled")}setTimeout(()=>{n&&this.captions.toggled&&(this.captions.currentTrackNode.mode="hidden")})},set(e,t=!0){const i=Y.getTracks.call(this);if(e===-1){Y.toggle.call(this,!1,t);return}if(!y.number(e)){this.debug.warn("Invalid caption argument",e);return}if(!(e in i)){this.debug.warn("Track not found",e);return}if(this.captions.currentTrack!==e){this.captions.currentTrack=e;const s=i[e],{language:n}=s||{};this.captions.currentTrackNode=s,W.updateSetting.call(this,"captions"),t||(this.captions.language=n,this.storage.set({language:n})),this.isVimeo&&this.embed.enableTextTrack(n,null,!1),Q.call(this,this.media,"languagechange")}Y.toggle.call(this,!0,t),this.isHTML5&&this.isVideo&&Y.updateCues.call(this)},setLanguage(e,t=!0){if(!y.string(e)){this.debug.warn("Invalid language argument",e);return}const i=e.toLowerCase();this.captions.language=i;const s=Y.getTracks.call(this),n=Y.findTrack.call(this,[i]);Y.set.call(this,s.indexOf(n),t)},getTracks(e=!1){return Array.from((this.media||{}).textTracks||[]).filter(t=>!this.isHTML5||e||this.captions.meta.has(t)).filter(t=>["captions","subtitles"].includes(t.kind))},findTrack(e,t=!1){const i=Y.getTracks.call(this),s=a=>Number((this.captions.meta.get(a)||{}).default),n=Array.from(i).sort((a,o)=>s(o)-s(a));let r;return e.every(a=>(r=n.find(o=>o.language===a),!r)),r||(t?n[0]:void 0)},getCurrentTrack(){return Y.getTracks.call(this)[this.currentTrack]},getLabel(e){let t=e;return!y.track(t)&&ce.textTracks&&this.captions.toggled&&(t=Y.getCurrentTrack.call(this)),y.track(t)?y.empty(t.label)?y.empty(t.language)?ge.get("enabled",this.config):e.language.toUpperCase():t.label:ge.get("disabled",this.config)},updateCues(e){if(!this.supported.ui)return;if(!y.element(this.elements.captions)){this.debug.warn("No captions element to render to");return}if(!y.nullOrUndefined(e)&&!Array.isArray(e)){this.debug.warn("updateCues: Invalid input",e);return}let t=e;if(!t){const s=Y.getCurrentTrack.call(this);t=Array.from((s||{}).activeCues||[]).map(n=>n.getCueAsHTML()).map(ls)}const i=t.map(s=>s.trim()).join(`
`);if(i!==this.elements.captions.innerHTML){bt(this.elements.captions);const s=V("span",Re(this.config.selectors.caption));s.innerHTML=i,this.elements.captions.appendChild(s),Q.call(this,this.media,"cuechange")}}},tn={enabled:!0,title:"",debug:!1,autoplay:!1,autopause:!0,playsinline:!0,seekTime:10,volume:1,muted:!1,duration:null,displayDuration:!0,invertTime:!0,toggleInvert:!0,ratio:null,clickToPlay:!0,hideControls:!0,resetOnEnd:!1,disableContextMenu:!0,loadSprite:!0,iconPrefix:"plyr",iconUrl:"https://cdn.plyr.io/3.8.4/plyr.svg",blankVideo:"https://cdn.plyr.io/static/blank.mp4",quality:{default:576,options:[4320,2880,2160,1440,1080,720,576,480,360,240],forced:!1,onChange:null},loop:{active:!1},speed:{selected:1,options:[.5,.75,1,1.25,1.5,1.75,2,4]},keyboard:{focused:!0,global:!1},tooltips:{controls:!1,seek:!0},captions:{active:!1,language:"auto",update:!1},fullscreen:{enabled:!0,fallback:!0,iosNative:!1},storage:{enabled:!0,key:"plyr"},controls:["play-large","play","progress","current-time","mute","volume","captions","settings","pip","airplay","fullscreen"],settings:["captions","quality","speed"],i18n:{restart:"Restart",rewind:"Rewind {seektime}s",play:"Play",pause:"Pause",fastForward:"Forward {seektime}s",seek:"Seek",seekLabel:"{currentTime} of {duration}",played:"Played",buffered:"Buffered",currentTime:"Current time",duration:"Duration",volume:"Volume",mute:"Mute",unmute:"Unmute",enableCaptions:"Enable captions",disableCaptions:"Disable captions",download:"Download",enterFullscreen:"Enter fullscreen",exitFullscreen:"Exit fullscreen",frameTitle:"Player for {title}",captions:"Captions",settings:"Settings",pip:"PIP",menuBack:"Go back to previous menu",speed:"Speed",normal:"Normal",quality:"Quality",loop:"Loop",start:"Start",end:"End",all:"All",reset:"Reset",disabled:"Disabled",enabled:"Enabled",advertisement:"Ad",qualityBadge:{2160:"4K",1440:"HD",1080:"HD",720:"HD",576:"SD",480:"SD"}},urls:{download:null,vimeo:{sdk:"https://player.vimeo.com/api/player.js",iframe:"https://player.vimeo.com/video/{0}?{1}",api:"https://vimeo.com/api/oembed.json?url={0}"},youtube:{sdk:"https://www.youtube.com/iframe_api",api:"https://noembed.com/embed?url=https://www.youtube.com/watch?v={0}"},googleIMA:{sdk:"https://imasdk.googleapis.com/js/sdkloader/ima3.js"}},listeners:{seek:null,play:null,pause:null,restart:null,rewind:null,fastForward:null,mute:null,volume:null,captions:null,download:null,fullscreen:null,pip:null,airplay:null,speed:null,quality:null,loop:null,language:null},events:["ended","progress","stalled","playing","waiting","canplay","canplaythrough","loadstart","loadeddata","loadedmetadata","timeupdate","volumechange","play","pause","error","seeking","seeked","emptied","ratechange","cuechange","download","enterfullscreen","exitfullscreen","captionsenabled","captionsdisabled","languagechange","controlshidden","controlsshown","ready","statechange","qualitychange","adsloaded","adscontentpause","adscontentresume","adstarted","adsmidpoint","adscomplete","adsallcomplete","adsimpression","adsclick"],selectors:{editable:"input, textarea, select, [contenteditable]",container:".plyr",controls:{container:null,wrapper:".plyr__controls"},labels:"[data-plyr]",buttons:{play:'[data-plyr="play"]',pause:'[data-plyr="pause"]',restart:'[data-plyr="restart"]',rewind:'[data-plyr="rewind"]',fastForward:'[data-plyr="fast-forward"]',mute:'[data-plyr="mute"]',captions:'[data-plyr="captions"]',download:'[data-plyr="download"]',fullscreen:'[data-plyr="fullscreen"]',pip:'[data-plyr="pip"]',airplay:'[data-plyr="airplay"]',settings:'[data-plyr="settings"]',loop:'[data-plyr="loop"]'},inputs:{seek:'[data-plyr="seek"]',volume:'[data-plyr="volume"]',speed:'[data-plyr="speed"]',language:'[data-plyr="language"]',quality:'[data-plyr="quality"]'},display:{currentTime:".plyr__time--current",duration:".plyr__time--duration",buffer:".plyr__progress__buffer",loop:".plyr__progress__loop",volume:".plyr__volume--display"},progress:".plyr__progress",captions:".plyr__captions",caption:".plyr__caption"},classNames:{type:"plyr--{0}",provider:"plyr--{0}",video:"plyr__video-wrapper",embed:"plyr__video-embed",videoFixedRatio:"plyr__video-wrapper--fixed-ratio",embedContainer:"plyr__video-embed__container",poster:"plyr__poster",posterEnabled:"plyr__poster-enabled",ads:"plyr__ads",control:"plyr__control",controlPressed:"plyr__control--pressed",playing:"plyr--playing",paused:"plyr--paused",stopped:"plyr--stopped",loading:"plyr--loading",hover:"plyr--hover",tooltip:"plyr__tooltip",cues:"plyr__cues",marker:"plyr__progress__marker",hidden:"plyr__sr-only",hideControls:"plyr--hide-controls",isTouch:"plyr--is-touch",uiSupported:"plyr--full-ui",noTransition:"plyr--no-transition",display:{time:"plyr__time"},menu:{value:"plyr__menu__value",badge:"plyr__badge",open:"plyr--menu-open"},captions:{enabled:"plyr--captions-enabled",active:"plyr--captions-active"},fullscreen:{enabled:"plyr--fullscreen-enabled",fallback:"plyr--fullscreen-fallback"},pip:{supported:"plyr--pip-supported",active:"plyr--pip-active"},airplay:{supported:"plyr--airplay-supported",active:"plyr--airplay-active"},previewThumbnails:{thumbContainer:"plyr__preview-thumb",thumbContainerShown:"plyr__preview-thumb--is-shown",imageContainer:"plyr__preview-thumb__image-container",timeContainer:"plyr__preview-thumb__time-container",scrubbingContainer:"plyr__preview-scrubbing",scrubbingContainerShown:"plyr__preview-scrubbing--is-shown"}},attributes:{embed:{provider:"data-plyr-provider",id:"data-plyr-embed-id",hash:"data-plyr-embed-hash"}},ads:{enabled:!1,publisherId:"",tagUrl:""},previewThumbnails:{enabled:!1,src:"",withCredentials:!1},vimeo:{byline:!1,portrait:!1,title:!1,speed:!0,transparent:!1,customControls:!0,referrerPolicy:null,premium:!1},youtube:{rel:0,showinfo:0,iv_load_policy:3,modestbranding:1,customControls:!0,noCookie:!1},mediaMetadata:{title:"",artist:"",album:"",artwork:[]},markers:{enabled:!1,points:[]}},Ot={active:"picture-in-picture",inactive:"inline"},qe={html5:"html5",youtube:"youtube",vimeo:"vimeo"},Ut={audio:"audio",video:"video"};function hs(e){return/^(?:https?:\/\/)?(?:www\.)?(?:youtube\.com|youtube-nocookie\.com|youtu\.?be)\/.+$/.test(e)?qe.youtube:/^https?:\/\/player.vimeo.com\/video\/\d{0,9}(?=\b|\/)/.test(e)?qe.vimeo:null}function Ft(){}var ds=class{constructor(e=!1){this.enabled=window.console&&e,this.enabled&&this.log("Debugging enabled")}get log(){return this.enabled?Function.prototype.bind.call(console.log,console):Ft}get warn(){return this.enabled?Function.prototype.bind.call(console.warn,console):Ft}get error(){return this.enabled?Function.prototype.bind.call(console.error,console):Ft}},fs=class _e{constructor(t){B(this,"onChange",()=>{if(!this.supported)return;const i=this.player.elements.buttons.fullscreen;y.element(i)&&(i.pressed=this.active);const s=this.target===this.player.media?this.target:this.player.elements.container;Q.call(this.player,s,this.active?"enterfullscreen":"exitfullscreen",!0)}),B(this,"toggleFallback",(i=!1)=>{if(i){var s,n;this.scrollPosition={x:(s=window.scrollX)!==null&&s!==void 0?s:0,y:(n=window.scrollY)!==null&&n!==void 0?n:0}}else window.scrollTo(this.scrollPosition.x,this.scrollPosition.y);if(document.body.style.overflow=i?"hidden":"",Z(this.target,this.player.config.classNames.fullscreen.fallback,i),be.isIos){let r=document.head.querySelector('meta[name="viewport"]');const a="viewport-fit=cover";r||(r=document.createElement("meta"),r.setAttribute("name","viewport"));const o=y.string(r.content)&&r.content.includes(a);i?(this.cleanupViewport=!o,o||(r.content+=`,${a}`)):this.cleanupViewport&&(r.content=r.content.split(",").filter(h=>h.trim()!==a).join(","))}this.onChange()}),B(this,"trapFocus",i=>{if(be.isIos||be.isIPadOS||!this.active||i.key!=="Tab")return;const s=document.activeElement,n=ct.call(this.player,"a[href], button:not(:disabled), input:not(:disabled), [tabindex]"),[r]=n,a=n[n.length-1];s===a&&!i.shiftKey?(r.focus(),i.preventDefault()):s===r&&i.shiftKey&&(a.focus(),i.preventDefault())}),B(this,"update",()=>{if(this.supported){let i;this.forceFallback?i="Fallback (forced)":_e.nativeSupported?i="Native":i="Fallback",this.player.debug.log(`${i} fullscreen enabled`)}else this.player.debug.log("Fullscreen not supported and fallback disabled");Z(this.player.elements.container,this.player.config.classNames.fullscreen.enabled,this.supported)}),B(this,"enter",()=>{this.supported&&(be.isIos&&this.player.config.fullscreen.iosNative?this.player.isVimeo?this.player.embed.requestFullscreen():this.target.webkitEnterFullscreen():!_e.nativeSupported||this.forceFallback?this.toggleFallback(!0):this.prefix?y.empty(this.prefix)||this.target[`${this.prefix}Request${this.property}`]():this.target.requestFullscreen({navigationUI:"hide"}))}),B(this,"exit",()=>{if(this.supported){if(be.isIos&&this.player.config.fullscreen.iosNative)this.player.isVimeo?this.player.embed.exitFullscreen():this.target.webkitEnterFullscreen(),Ne(this.player.play());else if(!_e.nativeSupported||this.forceFallback)this.toggleFallback(!1);else if(!this.prefix)(document.cancelFullScreen||document.exitFullscreen).call(document);else if(!y.empty(this.prefix)){const i=this.prefix==="moz"?"Cancel":"Exit";document[`${this.prefix}${i}${this.property}`]()}}}),B(this,"toggle",()=>{this.active?this.exit():this.enter()}),this.player=t,this.prefix=_e.prefix,this.property=_e.property,this.scrollPosition={x:0,y:0},this.forceFallback=t.config.fullscreen.fallback==="force",this.player.elements.fullscreen=t.config.fullscreen.container&&Jn(this.player.elements.container,t.config.fullscreen.container),X.call(this.player,document,this.prefix==="ms"?"MSFullscreenChange":`${this.prefix}fullscreenchange`,()=>{this.onChange()}),X.call(this.player,this.player.elements.container,"dblclick",i=>{y.element(this.player.elements.controls)&&this.player.elements.controls.contains(i.target)||this.player.listeners.proxy(i,this.toggle,"fullscreen")}),X.call(this,this.player.elements.container,"keydown",i=>this.trapFocus(i)),this.update()}static get nativeSupported(){return!!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)}get useNative(){return _e.nativeSupported&&!this.forceFallback}static get prefix(){if(y.function(document.exitFullscreen))return"";let t="";return["webkit","moz","ms"].some(i=>y.function(document[`${i}ExitFullscreen`])||y.function(document[`${i}CancelFullScreen`])?(t=i,!0):!1),t}static get property(){return this.prefix==="moz"?"FullScreen":"Fullscreen"}get supported(){return[this.player.config.fullscreen.enabled,this.player.isVideo,_e.nativeSupported||this.player.config.fullscreen.fallback,!this.player.isYouTube||_e.nativeSupported||!be.isIos||this.player.config.playsinline&&!this.player.config.fullscreen.iosNative].every(Boolean)}get active(){if(!this.supported)return!1;if(!_e.nativeSupported||this.forceFallback)return St(this.target,this.player.config.classNames.fullscreen.fallback);const t=this.prefix?this.target.getRootNode()[`${this.prefix}${this.property}Element`]:this.target.getRootNode().fullscreenElement;return t&&t.shadowRoot?t===this.target.getRootNode().host:t===this.target}get target(){var t;return be.isIos&&this.player.config.fullscreen.iosNative?this.player.media:(t=this.player.elements.fullscreen)!==null&&t!==void 0?t:this.player.elements.container}};function yt(e,t=1){return new Promise((i,s)=>{const n=new Image,r=()=>{delete n.onload,delete n.onerror,(n.naturalWidth>=t?i:s)(n)};Object.assign(n,{onload:r,onerror:r,src:e})})}var J={addStyleHook(){Z(this.elements.container,this.config.selectors.container.replace(".",""),!0),Z(this.elements.container,this.config.classNames.uiSupported,this.supported.ui)},toggleNativeControls(e=!1){e&&this.isHTML5?this.media.setAttribute("controls",""):this.media.removeAttribute("controls")},build(){if(this.listeners.media(),!this.supported.ui){this.debug.warn(`Basic support only for ${this.provider} ${this.type}`),J.toggleNativeControls.call(this,!0);return}y.element(this.elements.controls)||(W.inject.call(this),this.listeners.controls()),J.toggleNativeControls.call(this),this.isHTML5&&Y.setup.call(this),this.volume=null,this.muted=null,this.loop=null,this.quality=null,this.speed=null,W.updateVolume.call(this),W.timeUpdate.call(this),W.durationUpdate.call(this),J.checkPlaying.call(this),Z(this.elements.container,this.config.classNames.pip.supported,ce.pip&&this.isHTML5&&this.isVideo),Z(this.elements.container,this.config.classNames.airplay.supported,ce.airplay&&this.isHTML5),Z(this.elements.container,this.config.classNames.isTouch,this.touch),this.ready=!0,setTimeout(()=>{Q.call(this,this.media,"ready")},0),J.setTitle.call(this),this.poster&&J.setPoster.call(this,this.poster,!1).catch(()=>{}),this.config.duration&&W.durationUpdate.call(this),this.config.mediaMetadata&&W.setMediaMetadata.call(this)},setTitle(){let e=ge.get("play",this.config);if(y.string(this.config.title)&&!y.empty(this.config.title)&&(e+=`, ${this.config.title}`),Array.from(this.elements.buttons.play||[]).forEach(t=>{t.setAttribute("aria-label",e)}),this.isEmbed){const t=he.call(this,"iframe");if(!y.element(t))return;const i=y.empty(this.config.title)?"video":this.config.title,s=ge.get("frameTitle",this.config);t.setAttribute("title",s.replace("{title}",i))}},togglePoster(e){Z(this.elements.container,this.config.classNames.posterEnabled,e)},setPoster(e,t=!0){return t&&this.poster?Promise.reject(new Error("Poster already set")):(this.media.setAttribute("data-poster",e),this.elements.poster.removeAttribute("hidden"),ts.call(this).then(()=>yt(e)).catch(i=>{throw e===this.poster&&J.togglePoster.call(this,!1),i}).then(()=>{if(e!==this.poster)throw new Error("setPoster cancelled by later call to setPoster")}).then(()=>(Object.assign(this.elements.poster.style,{backgroundImage:`url('${e}')`,backgroundSize:""}),J.togglePoster.call(this,!0),e)))},checkPlaying(e){Z(this.elements.container,this.config.classNames.playing,this.playing),Z(this.elements.container,this.config.classNames.paused,this.paused),Z(this.elements.container,this.config.classNames.stopped,this.stopped),Array.from(this.elements.buttons.play||[]).forEach(t=>{Object.assign(t,{pressed:this.playing}),t.setAttribute("aria-label",ge.get(this.playing?"pause":"play",this.config))}),!(y.event(e)&&e.type==="timeupdate")&&J.toggleControls.call(this)},checkLoading(e){this.loading=["stalled","waiting"].includes(e.type),clearTimeout(this.timers.loading),this.timers.loading=setTimeout(()=>{Z(this.elements.container,this.config.classNames.loading,this.loading),J.toggleControls.call(this)},this.loading?250:0)},toggleControls(e){const{controls:t}=this.elements;if(t&&this.config.hideControls){const i=this.touch&&this.lastSeekTime+2e3>Date.now();this.toggleControls(!!(e||this.loading||this.paused||t.pressed||t.hover||i))}},migrateStyles(){Object.values({...this.media.style}).filter(e=>!y.empty(e)&&y.string(e)&&e.startsWith("--plyr")).forEach(e=>{this.elements.container.style.setProperty(e,this.media.style.getPropertyValue(e)),this.media.style.removeProperty(e)}),y.empty(this.media.style)&&this.media.removeAttribute("style")}},ps=class{constructor(e){B(this,"firstTouch",()=>{const{player:t}=this,{elements:i}=t;t.touch=!0,Z(i.container,t.config.classNames.isTouch,!0)}),B(this,"global",(t=!0)=>{const{player:i}=this;i.config.keyboard.global&&ut.call(i,window,"keydown keyup",this.handleKey,t,!1),ut.call(i,document.body,"click",this.toggleMenu,t),$t.call(i,document.body,"touchstart",this.firstTouch)}),B(this,"container",()=>{const{player:t}=this,{config:i,elements:s,timers:n}=t;!i.keyboard.global&&i.keyboard.focused&&X.call(t,s.container,"keydown keyup",this.handleKey,!1),X.call(t,s.container,"mousemove mouseleave touchstart touchmove enterfullscreen exitfullscreen",o=>{const{controls:h}=s;h&&o.type==="enterfullscreen"&&(h.pressed=!1,h.hover=!1);const f=["touchstart","touchmove","mousemove"].includes(o.type);let l=0;f&&(J.toggleControls.call(t,!0),l=t.touch?3e3:2e3),clearTimeout(n.controls),n.controls=setTimeout(()=>J.toggleControls.call(t,!1),l)});const r=()=>{if(!t.isVimeo||t.config.vimeo.premium)return;const o=s.wrapper,{active:h}=t.fullscreen,[f,l]=ei.call(t),u=Qi(`aspect-ratio: ${f} / ${l}`);if(!h){u?(o.style.width=null,o.style.height=null):(o.style.maxWidth=null,o.style.margin=null);return}const[c,d]=is(),m=c/d>f/l;u?(o.style.width=m?"auto":"100%",o.style.height=m?"100%":"auto"):(o.style.maxWidth=m?`${d/l*f}px`:null,o.style.margin=m?"0 auto":null)},a=()=>{clearTimeout(n.resized),n.resized=setTimeout(r,50)};X.call(t,s.container,"enterfullscreen exitfullscreen",o=>{const{target:h}=t.fullscreen;h===s.container&&(!t.isEmbed&&y.empty(t.config.ratio)||(r(),(o.type==="enterfullscreen"?X:Lt).call(t,window,"resize",a)))})}),B(this,"media",()=>{const{player:t}=this,{elements:i}=t;if(X.call(t,t.media,"timeupdate seeking seeked",n=>W.timeUpdate.call(t,n)),X.call(t,t.media,"durationchange loadeddata loadedmetadata",n=>W.durationUpdate.call(t,n)),X.call(t,t.media,"ended",()=>{t.isHTML5&&t.isVideo&&t.config.resetOnEnd&&(t.restart(),t.pause())}),X.call(t,t.media,"progress playing seeking seeked",n=>W.updateProgress.call(t,n)),X.call(t,t.media,"volumechange",n=>W.updateVolume.call(t,n)),X.call(t,t.media,"playing play pause ended emptied timeupdate",n=>J.checkPlaying.call(t,n)),X.call(t,t.media,"waiting canplay seeked playing",n=>J.checkLoading.call(t,n)),t.supported.ui&&t.config.clickToPlay&&!t.isAudio){const n=he.call(t,`.${t.config.classNames.video}`);if(!y.element(n))return;X.call(t,i.container,"click",r=>{![i.container,n].includes(r.target)&&!n.contains(r.target)||t.touch&&t.config.hideControls||(t.ended?(this.proxy(r,t.restart,"restart"),this.proxy(r,()=>{Ne(t.play())},"play")):this.proxy(r,()=>{Ne(t.togglePlay())},"play"))})}t.supported.ui&&t.config.disableContextMenu&&X.call(t,i.wrapper,"contextmenu",n=>{n.preventDefault()},!1),X.call(t,t.media,"volumechange",()=>{t.storage.set({volume:t.volume,muted:t.muted})}),X.call(t,t.media,"ratechange",()=>{W.updateSetting.call(t,"speed"),t.storage.set({speed:t.speed})}),X.call(t,t.media,"qualitychange",n=>{W.updateSetting.call(t,"quality",null,n.detail.quality)}),X.call(t,t.media,"ready qualitychange",()=>{W.setDownloadUrl.call(t)});const s=t.config.events.concat(["keyup","keydown"]).join(" ");X.call(t,t.media,s,n=>{let{detail:r={}}=n;n.type==="error"&&(r=t.media.error),Q.call(t,i.container,n.type,!0,r)})}),B(this,"proxy",(t,i,s)=>{const{player:n}=this,r=n.config.listeners[s],a=y.function(r);let o=!0;a&&(o=r.call(n,t)),o!==!1&&y.function(i)&&i.call(n,t)}),B(this,"bind",(t,i,s,n,r=!0)=>{const{player:a}=this,o=a.config.listeners[n],h=y.function(o);X.call(a,t,i,f=>this.proxy(f,s,n),r&&!h)}),B(this,"controls",()=>{const{player:t}=this,{elements:i}=t,s=be.isIE?"change":"input";if(i.buttons.play&&Array.from(i.buttons.play).forEach(n=>{this.bind(n,"click",()=>{Ne(t.togglePlay())},"play")}),this.bind(i.buttons.restart,"click",t.restart,"restart"),this.bind(i.buttons.rewind,"click",()=>{t.lastSeekTime=Date.now(),t.rewind()},"rewind"),this.bind(i.buttons.fastForward,"click",()=>{t.lastSeekTime=Date.now(),t.forward()},"fastForward"),this.bind(i.buttons.mute,"click",()=>{t.muted=!t.muted},"mute"),this.bind(i.buttons.captions,"click",()=>t.toggleCaptions()),this.bind(i.buttons.download,"click",()=>{Q.call(t,t.media,"download")},"download"),this.bind(i.buttons.fullscreen,"click",()=>{t.fullscreen.toggle()},"fullscreen"),this.bind(i.buttons.pip,"click",()=>{t.pip="toggle"},"pip"),this.bind(i.buttons.airplay,"click",t.airplay,"airplay"),this.bind(i.buttons.settings,"click",n=>{n.stopPropagation(),n.preventDefault(),W.toggleMenu.call(t,n)},null,!1),this.bind(i.buttons.settings,"keyup",n=>{if([" ","Enter"].includes(n.key)){if(n.key==="Enter"){W.focusFirstMenuItem.call(t,null,!0);return}n.preventDefault(),n.stopPropagation(),W.toggleMenu.call(t,n)}},null,!1),this.bind(i.settings.menu,"keydown",n=>{n.key==="Escape"&&W.toggleMenu.call(t,n)}),this.bind(i.inputs.seek,"mousedown mousemove",n=>{const r=i.progress.getBoundingClientRect(),a=n.pageX-n.clientX,o=100/r.width*(n.pageX-r.left-a);n.currentTarget.setAttribute("seek-value",o)}),this.bind(i.inputs.seek,"mousedown mouseup keydown keyup touchstart touchend",n=>{const r=n.currentTarget,a="play-on-seeked";if(y.keyboardEvent(n)&&!["ArrowLeft","ArrowRight"].includes(n.key))return;t.lastSeekTime=Date.now();const o=r.hasAttribute(a),h=["mouseup","touchend","keyup"].includes(n.type);o&&h?(r.removeAttribute(a),Ne(t.play())):!h&&t.playing&&(r.setAttribute(a,""),t.pause())}),be.isIos){const n=ct.call(t,'input[type="range"]');Array.from(n).forEach(r=>this.bind(r,s,a=>Bi(a.target)))}this.bind(i.inputs.seek,s,n=>{const r=n.currentTarget;let a=r.getAttribute("seek-value");y.empty(a)&&(a=r.value),r.removeAttribute("seek-value"),t.currentTime=a/r.max*t.duration},"seek"),this.bind(i.progress,"mouseenter mouseleave mousemove",n=>W.updateSeekTooltip.call(t,n)),this.bind(i.progress,"mousemove touchmove",n=>{const{previewThumbnails:r}=t;r&&r.loaded&&r.startMove(n)}),this.bind(i.progress,"mouseleave touchend click",()=>{const{previewThumbnails:n}=t;n&&n.loaded&&n.endMove(!1,!0)}),this.bind(i.progress,"mousedown touchstart",n=>{const{previewThumbnails:r}=t;r&&r.loaded&&r.startScrubbing(n)}),this.bind(i.progress,"mouseup touchend",n=>{const{previewThumbnails:r}=t;r&&r.loaded&&r.endScrubbing(n)}),be.isWebKit&&Array.from(ct.call(t,'input[type="range"]')).forEach(n=>{this.bind(n,"input",r=>W.updateRangeFill.call(t,r.target))}),t.config.toggleInvert&&!y.element(i.display.duration)&&this.bind(i.display.currentTime,"click",()=>{t.currentTime!==0&&(t.config.invertTime=!t.config.invertTime,W.timeUpdate.call(t))}),this.bind(i.inputs.volume,s,n=>{t.volume=n.target.value},"volume"),this.bind(i.controls,"mouseenter mouseleave",n=>{i.controls.hover=!t.touch&&n.type==="mouseenter"}),i.fullscreen&&Array.from(i.fullscreen.children).filter(n=>!n.contains(i.container)).forEach(n=>{this.bind(n,"mouseenter mouseleave",r=>{i.controls&&(i.controls.hover=!t.touch&&r.type==="mouseenter")})}),this.bind(i.controls,"mousedown mouseup touchstart touchend touchcancel",n=>{i.controls.pressed=["mousedown","touchstart"].includes(n.type)}),this.bind(i.controls,"focusin",()=>{const{config:n,timers:r}=t;Z(i.controls,n.classNames.noTransition,!0),J.toggleControls.call(t,!0),setTimeout(()=>{Z(i.controls,n.classNames.noTransition,!1)},0);const a=this.touch?3e3:4e3;clearTimeout(r.controls),r.controls=setTimeout(()=>J.toggleControls.call(t,!1),a)}),this.bind(i.inputs.volume,"wheel",n=>{const r=n.webkitDirectionInvertedFromDevice,[a,o]=[n.deltaX,-n.deltaY].map(l=>r?-l:l),h=Math.sign(Math.abs(a)>Math.abs(o)?a:o);t.increaseVolume(h/50);const{volume:f}=t.media;(h===1&&f<1||h===-1&&f>0)&&n.preventDefault()},"volume",!1)}),this.player=e,this.lastKey=null,this.focusTimer=null,this.lastKeyDown=null,this.handleKey=this.handleKey.bind(this),this.toggleMenu=this.toggleMenu.bind(this),this.firstTouch=this.firstTouch.bind(this)}handleKey(e){const{player:t}=this,{elements:i}=t,{key:s,type:n,altKey:r,ctrlKey:a,metaKey:o,shiftKey:h}=e,f=n==="keydown",l=f&&s===this.lastKey;if(r||a||o||h||!s)return;const u=c=>{t.currentTime=t.duration/10*c};if(f){const c=document.activeElement;if(y.element(c)){const{editable:d}=t.config.selectors,{seek:m}=i.inputs;if(c!==m&&$e(c,d)||e.key===" "&&$e(c,'button, [role^="menuitem"]'))return}switch([" ","ArrowLeft","ArrowUp","ArrowRight","ArrowDown","0","1","2","3","4","5","6","7","8","9","c","f","k","l","m"].includes(s)&&(e.preventDefault(),e.stopPropagation()),s){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":l||u(Number.parseInt(s,10));break;case" ":case"k":l||Ne(t.togglePlay());break;case"ArrowUp":t.increaseVolume(.1);break;case"ArrowDown":t.decreaseVolume(.1);break;case"m":l||(t.muted=!t.muted);break;case"ArrowRight":t.forward();break;case"ArrowLeft":t.rewind();break;case"f":t.fullscreen.toggle();break;case"c":l||t.toggleCaptions();break;case"l":t.loop=!t.loop;break}s==="Escape"&&!t.fullscreen.usingNative&&t.fullscreen.active&&t.fullscreen.toggle(),this.lastKey=s}else this.lastKey=null}toggleMenu(e){W.toggleMenu.call(this.player,e)}};function ms(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var vt={exports:{}},gs=vt.exports,fi;function bs(){return fi||(fi=1,(function(e,t){(function(i,s){e.exports=s()})(gs,function(){var i=function(){},s={},n={},r={};function a(c,d){c=c.push?c:[c];for(var m=[],T=c.length,x=T,k=function(D,w){w.length&&m.push(D),x--,x||d(m)},M,L,E;T--;){if(M=c[T],L=n[M],L){k(M,L);continue}E=r[M]=r[M]||[],E.push(k)}}function o(c,d){if(c){var m=r[c];if(n[c]=d,!!m)for(;m.length;)m[0](c,d),m.splice(0,1)}}function h(c,d){c.call&&(c={success:c}),d.length?(c.error||i)(d):(c.success||i)(c)}function f(c,d,m,T){var x=document,k=m.async,M=(m.numRetries||0)+1,L=m.before||i,E=c.replace(/[\?|#].*$/,""),D=c.replace(/^(css|img|module|nomodule)!/,""),w,R,p;if(T=T||0,/(^css!|\.css$)/.test(E))p=x.createElement("link"),p.rel="stylesheet",p.href=D,w="hideFocus"in p,w&&p.relList&&(w=0,p.rel="preload",p.as="style");else if(/(^img!|\.(png|gif|jpg|svg|webp)$)/.test(E))p=x.createElement("img"),p.src=D;else if(p=x.createElement("script"),p.src=D,p.async=k===void 0?!0:k,R="noModule"in p,/^module!/.test(E)){if(!R)return d(c,"l");p.type="module"}else if(/^nomodule!/.test(E)&&R)return d(c,"l");p.onload=p.onerror=p.onbeforeload=function(b){var A=b.type[0];if(w)try{p.sheet.cssText.length||(A="e")}catch(C){C.code!=18&&(A="e")}if(A=="e"){if(T+=1,T<M)return f(c,d,m,T)}else if(p.rel=="preload"&&p.as=="style")return p.rel="stylesheet";d(c,A,b.defaultPrevented)},L(c,p)!==!1&&x.head.appendChild(p)}function l(c,d,m){c=c.push?c:[c];var T=c.length,x=T,k=[],M=function(E,D,w){if(D=="e"&&k.push(E),D=="b")if(w)k.push(E);else return;T--,T||d(k)},L;for(L=0;L<x;L++)f(c[L],M,m)}function u(c,d,m){var T,x;if(d&&d.trim&&(T=d),x=(T?m:d)||{},T){if(T in s)throw"LoadJS";s[T]=!0}function k(M,L){l(c,function(E){h(x,E),M&&h({success:M,error:L},E),o(T,E)},x)}if(x.returnPromise)return new Promise(k);k()}return u.ready=function(d,m){return a(d,function(T){h(m,T)}),u},u.done=function(d){o(d,[])},u.reset=function(){s={},n={},r={}},u.isDefined=function(d){return d in s},u})})(vt)),vt.exports}var ys=ms(bs());function ti(e){return new Promise((t,i)=>{ys(e,{success:t,error:i})})}function vs(e){if(y.empty(e))return null;if(y.number(Number(e)))return e;const t=e.match(/^.*(vimeo.com\/|video\/)(\d+).*/);return t?t[2]:e}function ws(e){const t=e.match(/^.*(vimeo.com\/|video\/)(\d+)(\?.*h=|\/)+([\d,a-f]+)/);return t&&t.length===5?t[4]:null}function at(e){e&&!this.embed.hasPlayed&&(this.embed.hasPlayed=!0),this.media.paused===e&&(this.media.paused=!e,Q.call(this,this.media,e?"play":"pause"))}var Vt={setup(){const e=this;Z(e.elements.wrapper,e.config.classNames.embed,!0),e.options.speed=e.config.speed.options,it.call(e),y.object(window.Vimeo)?Vt.ready.call(e):ti(e.config.urls.vimeo.sdk).then(()=>{Vt.ready.call(e)}).catch(t=>{e.debug.warn("Vimeo SDK (player.js) failed to load",t)})},ready(){const e=this,t=e.config.vimeo,{premium:i,referrerPolicy:s,...n}=t;let r=e.media.getAttribute("src"),a="";y.empty(r)?(r=e.media.getAttribute(e.config.attributes.embed.id),a=e.media.getAttribute(e.config.attributes.embed.hash)):a=ws(r);const o=a?{h:a}:{};i&&Object.assign(n,{controls:!1,sidedock:!1});const h=en({loop:e.config.loop.active,autoplay:e.autoplay,muted:e.muted,gesture:"media",playsinline:e.config.playsinline,...o,...n}),f=vs(r),l=V("iframe"),u=qt(e.config.urls.vimeo.iframe,f,h);if(l.setAttribute("src",u),l.setAttribute("allowfullscreen",""),l.setAttribute("allow",["autoplay","fullscreen","picture-in-picture","encrypted-media","accelerometer","gyroscope"].join("; ")),y.empty(s)||l.setAttribute("referrerPolicy",s),i||!t.customControls)l.setAttribute("data-poster",e.poster),e.media=Et(l,e.media);else{const M=V("div",{class:e.config.classNames.embedContainer,"data-poster":e.poster});M.appendChild(l),e.media=Et(M,e.media)}t.customControls||ft(qt(e.config.urls.vimeo.api,u)).then(M=>{y.empty(M)||!M.thumbnail_url||J.setPoster.call(e,M.thumbnail_url).catch(()=>{})}),e.embed=new window.Vimeo.Player(l,{autopause:e.config.autopause,muted:e.muted}),e.media.paused=!0,e.media.currentTime=0,e.supported.ui&&e.embed.disableTextTrack(),e.media.play=()=>(at.call(e,!0),e.embed.play()),e.media.pause=()=>(at.call(e,!1),e.embed.pause()),e.media.stop=()=>{e.pause(),e.currentTime=0};let{currentTime:c}=e.media;Object.defineProperty(e.media,"currentTime",{get(){return c},set(M){const{embed:L,media:E,paused:D,volume:w}=e,R=D&&!L.hasPlayed;E.seeking=!0,Q.call(e,E,"seeking"),Promise.resolve(R&&L.setVolume(0)).then(()=>L.setCurrentTime(M)).then(()=>R&&L.pause()).then(()=>R&&L.setVolume(w)).catch(()=>{})}});let d=e.config.speed.selected;Object.defineProperty(e.media,"playbackRate",{get(){return d},set(M){e.embed.setPlaybackRate(M).then(()=>{d=M,Q.call(e,e.media,"ratechange")}).catch(()=>{e.options.speed=[1]})}});let{volume:m}=e.config;Object.defineProperty(e.media,"volume",{get(){return m},set(M){e.embed.setVolume(M).then(()=>{m=M,Q.call(e,e.media,"volumechange")})}});let{muted:T}=e.config;Object.defineProperty(e.media,"muted",{get(){return T},set(M){const L=y.boolean(M)?M:!1;e.embed.setMuted(L?!0:e.config.muted).then(()=>{T=L,Q.call(e,e.media,"volumechange")})}});let{loop:x}=e.config;Object.defineProperty(e.media,"loop",{get(){return x},set(M){const L=y.boolean(M)?M:e.config.loop.active;e.embed.setLoop(L).then(()=>{x=L})}});let k;e.embed.getVideoUrl().then(M=>{k=M,W.setDownloadUrl.call(e)}).catch(M=>{this.debug.warn(M)}),Object.defineProperty(e.media,"currentSrc",{get(){return k}}),Object.defineProperty(e.media,"ended",{get(){return e.currentTime===e.duration}}),Promise.all([e.embed.getVideoWidth(),e.embed.getVideoHeight()]).then(M=>{const[L,E]=M;e.embed.ratio=Xi(L,E),it.call(this)}),e.embed.setAutopause(e.config.autopause).then(M=>{e.config.autopause=M}),e.embed.getVideoTitle().then(M=>{e.config.title=M,J.setTitle.call(this)}),e.embed.getCurrentTime().then(M=>{c=M,Q.call(e,e.media,"timeupdate")}),e.embed.getDuration().then(M=>{e.media.duration=M,Q.call(e,e.media,"durationchange")}),e.embed.getTextTracks().then(M=>{e.media.textTracks=M,Y.setup.call(e)}),e.embed.on("cuechange",({cues:M=[]})=>{const L=M.map(E=>os(E.text));Y.updateCues.call(e,L)}),e.embed.on("loaded",()=>{e.embed.getPaused().then(M=>{at.call(e,!M),M||Q.call(e,e.media,"playing")}),y.element(e.embed.element)&&e.supported.ui&&e.embed.element.setAttribute("tabindex",-1)}),e.embed.on("bufferstart",()=>{Q.call(e,e.media,"waiting")}),e.embed.on("bufferend",()=>{Q.call(e,e.media,"playing")}),e.embed.on("play",()=>{at.call(e,!0),Q.call(e,e.media,"playing")}),e.embed.on("pause",()=>{at.call(e,!1)}),e.embed.on("timeupdate",M=>{e.media.seeking=!1,c=M.seconds,Q.call(e,e.media,"timeupdate")}),e.embed.on("progress",M=>{e.media.buffered=M.percent,Q.call(e,e.media,"progress"),Number.parseInt(M.percent,10)===1&&Q.call(e,e.media,"canplaythrough"),e.embed.getDuration().then(L=>{L!==e.media.duration&&(e.media.duration=L,Q.call(e,e.media,"durationchange"))})}),e.embed.on("seeked",()=>{e.media.seeking=!1,Q.call(e,e.media,"seeked")}),e.embed.on("ended",()=>{e.media.paused=!0,Q.call(e,e.media,"ended")}),e.embed.on("error",M=>{e.media.error=M,Q.call(e,e.media,"error")}),t.customControls&&setTimeout(()=>J.build.call(e),0)}};function ks(e){if(y.empty(e))return null;const t=e.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/);return t&&t[2]?t[2]:e}function ot(e){e&&!this.embed.hasPlayed&&(this.embed.hasPlayed=!0),this.media.paused===e&&(this.media.paused=!e,Q.call(this,this.media,e?"play":"pause"))}function Ts(e){if(e.noCookie)return"https://www.youtube-nocookie.com";if(window.location.protocol==="http:")return"http://www.youtube.com"}var wt={setup(){if(Z(this.elements.wrapper,this.config.classNames.embed,!0),y.object(window.YT)&&y.function(window.YT.Player))wt.ready.call(this);else{const e=window.onYouTubeIframeAPIReady;window.onYouTubeIframeAPIReady=()=>{y.function(e)&&e(),wt.ready.call(this)},ti(this.config.urls.youtube.sdk).catch(t=>{this.debug.warn("YouTube API failed to load",t)})}},getTitle(e){ft(qt(this.config.urls.youtube.api,e)).then(t=>{if(y.object(t)){const{title:i,height:s,width:n}=t;this.config.title=i,J.setTitle.call(this),this.embed.ratio=Xi(n,s)}it.call(this)}).catch(()=>{it.call(this)})},ready(){const e=this,t=e.config.youtube,i=e.media&&e.media.getAttribute("id");if(!y.empty(i)&&i.startsWith("youtube-"))return;let s=e.media.getAttribute("src");y.empty(s)&&(s=e.media.getAttribute(this.config.attributes.embed.id));const n=ks(s);if(e.media=Et(V("div",{id:ns(e.provider),"data-poster":t.customControls?e.poster:void 0}),e.media),t.customControls){const r=a=>`https://i.ytimg.com/vi/${n}/${a}default.jpg`;yt(r("maxres"),121).catch(()=>yt(r("sd"),121)).catch(()=>yt(r("hq"))).then(a=>J.setPoster.call(e,a.src)).then(a=>{a.includes("maxres")||(e.elements.poster.style.backgroundSize="cover")}).catch(()=>{})}e.embed=new window.YT.Player(e.media,{videoId:n,host:Ts(t),playerVars:oe({},{autoplay:e.config.autoplay?1:0,hl:e.config.hl,controls:e.supported.ui&&t.customControls?0:1,disablekb:1,playsinline:e.config.playsinline&&!e.config.fullscreen.iosNative?1:0,cc_load_policy:e.captions.active?1:0,cc_lang_pref:e.config.captions.language,widget_referrer:window?window.location.href:null},t),events:{onError(r){if(!e.media.error){const a=r.data,o={2:"The request contains an invalid parameter value. For example, this error occurs if you specify a video ID that does not have 11 characters, or if the video ID contains invalid characters, such as exclamation points or asterisks.",5:"The requested content cannot be played in an HTML5 player or another error related to the HTML5 player has occurred.",100:"The video requested was not found. This error occurs when a video has been removed (for any reason) or has been marked as private.",101:"The owner of the requested video does not allow it to be played in embedded players.",150:"The owner of the requested video does not allow it to be played in embedded players."}[a]||"An unknown error occurred";e.media.error={code:a,message:o},Q.call(e,e.media,"error")}},onPlaybackRateChange(r){const a=r.target;e.media.playbackRate=a.getPlaybackRate(),Q.call(e,e.media,"ratechange")},onReady(r){if(y.function(e.media.play))return;const a=r.target;wt.getTitle.call(e,n),e.media.play=()=>{ot.call(e,!0),a.playVideo()},e.media.pause=()=>{ot.call(e,!1),a.pauseVideo()},e.media.stop=()=>{a.stopVideo()},e.media.duration=a.getDuration(),e.media.paused=!0,e.media.currentTime=0,Object.defineProperty(e.media,"currentTime",{get(){return Number(a.getCurrentTime())},set(l){e.paused&&!e.embed.hasPlayed&&e.embed.mute(),e.media.seeking=!0,Q.call(e,e.media,"seeking"),a.seekTo(l)}}),Object.defineProperty(e.media,"playbackRate",{get(){return a.getPlaybackRate()},set(l){a.setPlaybackRate(l)}});let{volume:o}=e.config;Object.defineProperty(e.media,"volume",{get(){return o},set(l){o=l,a.setVolume(o*100),Q.call(e,e.media,"volumechange")}});let{muted:h}=e.config;Object.defineProperty(e.media,"muted",{get(){return h},set(l){const u=y.boolean(l)?l:h;h=u,a[u?"mute":"unMute"](),a.setVolume(o*100),Q.call(e,e.media,"volumechange")}}),Object.defineProperty(e.media,"currentSrc",{get(){return a.getVideoUrl()}}),Object.defineProperty(e.media,"ended",{get(){return e.currentTime===e.duration}});const f=a.getAvailablePlaybackRates();e.options.speed=f.filter(l=>e.config.speed.options.includes(l)),e.supported.ui&&t.customControls&&e.media.setAttribute("tabindex",-1),Q.call(e,e.media,"timeupdate"),Q.call(e,e.media,"durationchange"),clearInterval(e.timers.buffering),e.timers.buffering=setInterval(()=>{e.media.buffered=a.getVideoLoadedFraction(),(e.media.lastBuffered===null||e.media.lastBuffered<e.media.buffered)&&Q.call(e,e.media,"progress"),e.media.lastBuffered=e.media.buffered,e.media.buffered===1&&(clearInterval(e.timers.buffering),Q.call(e,e.media,"canplaythrough"))},200),t.customControls&&setTimeout(()=>J.build.call(e),50)},onStateChange(r){const a=r.target;switch(clearInterval(e.timers.playing),e.media.seeking&&[1,2].includes(r.data)&&(e.media.seeking=!1,Q.call(e,e.media,"seeked")),r.data){case-1:Q.call(e,e.media,"timeupdate"),e.media.buffered=a.getVideoLoadedFraction(),Q.call(e,e.media,"progress");break;case 0:ot.call(e,!1),e.media.loop?(a.stopVideo(),a.playVideo()):Q.call(e,e.media,"ended");break;case 1:t.customControls&&!e.config.autoplay&&e.media.paused&&!e.embed.hasPlayed?e.media.pause():(ot.call(e,!0),Q.call(e,e.media,"playing"),e.timers.playing=setInterval(()=>{Q.call(e,e.media,"timeupdate")},50),e.media.duration!==a.getDuration()&&(e.media.duration=a.getDuration(),Q.call(e,e.media,"durationchange")));break;case 2:e.muted||e.embed.unMute(),ot.call(e,!1);break;case 3:Q.call(e,e.media,"waiting");break}Q.call(e,e.elements.container,"statechange",!1,{code:r.data})}}})}},nn={setup(){if(!this.media){this.debug.warn("No media element found!");return}Z(this.elements.container,this.config.classNames.type.replace("{0}",this.type),!0),Z(this.elements.container,this.config.classNames.provider.replace("{0}",this.provider),!0),this.isEmbed&&Z(this.elements.container,this.config.classNames.type.replace("{0}","video"),!0),this.isVideo&&(this.elements.wrapper=V("div",{class:this.config.classNames.video}),zi(this.media,this.elements.wrapper),this.elements.poster=V("div",{class:this.config.classNames.poster}),this.elements.wrapper.appendChild(this.elements.poster)),this.isHTML5?ze.setup.call(this):this.isYouTube?wt.setup.call(this):this.isVimeo&&Vt.setup.call(this)}};function Cs(e){e.manager&&e.manager.destroy(),e.elements.displayContainer&&e.elements.displayContainer.destroy(),e.elements.container.remove()}var As=class{constructor(e){B(this,"load",()=>{this.enabled&&(!y.object(window.google)||!y.object(window.google.ima)?ti(this.player.config.urls.googleIMA.sdk).then(()=>{this.ready()}).catch(()=>{this.trigger("error",new Error("Google IMA SDK failed to load"))}):this.ready())}),B(this,"ready",()=>{this.enabled||Cs(this),this.startSafetyTimer(12e3,"ready()"),this.managerPromise.then(()=>{this.clearSafetyTimer("onAdsManagerLoaded()")}),this.listeners(),this.setupIMA()}),B(this,"setupIMA",()=>{this.elements.container=V("div",{class:this.player.config.classNames.ads}),this.player.elements.container.appendChild(this.elements.container),google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED),google.ima.settings.setLocale(this.player.config.ads.language),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(this.player.config.playsinline),this.elements.displayContainer=new google.ima.AdDisplayContainer(this.elements.container,this.player.media),this.loader=new google.ima.AdsLoader(this.elements.displayContainer),this.loader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,t=>this.onAdsManagerLoaded(t),!1),this.loader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,t=>this.onAdError(t),!1),this.requestAds()}),B(this,"requestAds",()=>{const{container:t}=this.player.elements;try{const i=new google.ima.AdsRequest;i.adTagUrl=this.tagUrl,i.linearAdSlotWidth=t.offsetWidth,i.linearAdSlotHeight=t.offsetHeight,i.nonLinearAdSlotWidth=t.offsetWidth,i.nonLinearAdSlotHeight=t.offsetHeight,i.forceNonLinearFullSlot=!1,i.setAdWillPlayMuted(!this.player.muted),this.loader.requestAds(i)}catch(i){this.onAdError(i)}}),B(this,"pollCountdown",(t=!1)=>{if(!t){clearInterval(this.countdownTimer),this.elements.container.removeAttribute("data-badge-text");return}const i=()=>{const s=_t(Math.max(this.manager.getRemainingTime(),0)),n=`${ge.get("advertisement",this.player.config)} - ${s}`;this.elements.container.setAttribute("data-badge-text",n)};this.countdownTimer=setInterval(i,100)}),B(this,"onAdsManagerLoaded",t=>{if(!this.enabled)return;const i=new google.ima.AdsRenderingSettings;i.restoreCustomPlaybackStateOnAdBreakComplete=!0,i.enablePreloading=!0,this.manager=t.getAdsManager(this.player,i),this.cuePoints=this.manager.getCuePoints(),this.manager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,s=>this.onAdError(s)),Object.keys(google.ima.AdEvent.Type).forEach(s=>{this.manager.addEventListener(google.ima.AdEvent.Type[s],n=>this.onAdEvent(n))}),this.trigger("loaded")}),B(this,"addCuePoints",()=>{y.empty(this.cuePoints)||this.cuePoints.forEach(t=>{if(t!==0&&t!==-1&&t<this.player.duration){const i=this.player.elements.progress;if(y.element(i)){const s=100/this.player.duration*t,n=V("span",{class:this.player.config.classNames.cues});n.style.left=`${s.toString()}%`,i.appendChild(n)}}})}),B(this,"onAdEvent",t=>{const{container:i}=this.player.elements,s=t.getAd(),n=t.getAdData();switch((a=>{Q.call(this.player,this.player.media,`ads${a.replace(/_/g,"").toLowerCase()}`)})(t.type),t.type){case google.ima.AdEvent.Type.LOADED:this.trigger("loaded"),this.pollCountdown(!0),s.isLinear()||(s.width=i.offsetWidth,s.height=i.offsetHeight);break;case google.ima.AdEvent.Type.STARTED:this.manager.setVolume(this.player.volume);break;case google.ima.AdEvent.Type.ALL_ADS_COMPLETED:this.player.ended?this.loadAds():this.loader.contentComplete();break;case google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED:this.pauseContent();break;case google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED:this.pollCountdown(),this.resumeContent();break;case google.ima.AdEvent.Type.LOG:n.adError&&this.player.debug.warn(`Non-fatal ad error: ${n.adError.getMessage()}`);break}}),B(this,"onAdError",t=>{this.cancel(),this.player.debug.warn("Ads error",t)}),B(this,"listeners",()=>{const{container:t}=this.player.elements;let i;this.player.on("canplay",()=>{this.addCuePoints()}),this.player.on("ended",()=>{this.loader.contentComplete()}),this.player.on("timeupdate",()=>{i=this.player.currentTime}),this.player.on("seeked",()=>{const s=this.player.currentTime;y.empty(this.cuePoints)||this.cuePoints.forEach((n,r)=>{i<n&&n<s&&(this.manager.discardAdBreak(),this.cuePoints.splice(r,1))})}),window.addEventListener("resize",()=>{this.manager&&this.manager.resize(t.offsetWidth,t.offsetHeight,google.ima.ViewMode.NORMAL)})}),B(this,"play",()=>{const{container:t}=this.player.elements;this.managerPromise||this.resumeContent(),this.managerPromise.then(()=>{this.manager.setVolume(this.player.volume),this.elements.displayContainer.initialize();try{this.initialized||(this.manager.init(t.offsetWidth,t.offsetHeight,google.ima.ViewMode.NORMAL),this.manager.start()),this.initialized=!0}catch(i){this.onAdError(i)}}).catch(()=>{})}),B(this,"resumeContent",()=>{this.elements.container.style.zIndex="",this.playing=!1,Ne(this.player.media.play())}),B(this,"pauseContent",()=>{this.elements.container.style.zIndex=3,this.playing=!0,this.player.media.pause()}),B(this,"cancel",()=>{this.initialized&&this.resumeContent(),this.trigger("error"),this.loadAds()}),B(this,"loadAds",()=>{this.managerPromise.then(()=>{this.manager&&this.manager.destroy(),this.managerPromise=new Promise(t=>{this.on("loaded",t),this.player.debug.log(this.manager)}),this.initialized=!1,this.requestAds()}).catch(()=>{})}),B(this,"trigger",(t,...i)=>{const s=this.events[t];y.array(s)&&s.forEach(n=>{y.function(n)&&n.apply(this,i)})}),B(this,"on",(t,i)=>(y.array(this.events[t])||(this.events[t]=[]),this.events[t].push(i),this)),B(this,"startSafetyTimer",(t,i)=>{this.player.debug.log(`Safety timer invoked from: ${i}`),this.safetyTimer=setTimeout(()=>{this.cancel(),this.clearSafetyTimer("startSafetyTimer()")},t)}),B(this,"clearSafetyTimer",t=>{y.nullOrUndefined(this.safetyTimer)||(this.player.debug.log(`Safety timer cleared from: ${t}`),clearTimeout(this.safetyTimer),this.safetyTimer=null)}),this.player=e,this.config=e.config.ads,this.playing=!1,this.initialized=!1,this.elements={container:null,displayContainer:null},this.manager=null,this.loader=null,this.cuePoints=null,this.events={},this.safetyTimer=null,this.countdownTimer=null,this.managerPromise=new Promise((t,i)=>{this.on("loaded",t),this.on("error",i)}),this.load()}get enabled(){const{config:e}=this;return this.player.isHTML5&&this.player.isVideo&&e.enabled&&(!y.empty(e.publisherId)||y.url(e.tagUrl))}get tagUrl(){const{config:e}=this;return y.url(e.tagUrl)?e.tagUrl:`https://go.aniview.com/api/adserver6/vast/?${en({AV_PUBLISHERID:"58c25bb0073ef448b1087ad6",AV_CHANNELID:"5a0458dc28a06145e4519d21",AV_URL:window.location.hostname,cb:Date.now(),AV_WIDTH:640,AV_HEIGHT:480,AV_CDIM2:e.publisherId})}`}};function sn(e=0,t=0,i=255){return Math.min(Math.max(e,t),i)}function Es(e){const t=[];return e.split(/\r\n\r\n|\n\n|\r\r/).forEach(i=>{const s={};i.split(/\r\n|\n|\r/).forEach(n=>{if(y.number(s.startTime)){if(!y.empty(n.trim())&&y.empty(s.text)){const r=n.trim().split("#xywh=");[s.text]=r,r[1]&&([s.x,s.y,s.w,s.h]=r[1].split(","))}}else{const r=n.match(/(\d{2})?:?(\d{2}):(\d{2}).(\d{2,3})( ?--> ?)(\d{2})?:?(\d{2}):(\d{2}).(\d{2,3})/);r&&(s.startTime=Number(r[1]||0)*60*60+Number(r[2])*60+Number(r[3])+ +`0.${r[4]}`,s.endTime=Number(r[6]||0)*60*60+Number(r[7])*60+Number(r[8])+ +`0.${r[9]}`)}}),s.text&&t.push(s)}),t}function pi(e,t){const i=t.width/t.height,s={};return e>i?(s.width=t.width,s.height=1/e*t.width):(s.height=t.height,s.width=e*t.height),s}var Qt=class{constructor(e){B(this,"load",()=>{this.player.elements.display.seekTooltip&&(this.player.elements.display.seekTooltip.hidden=this.enabled),this.enabled&&this.getThumbnails().then(()=>{this.enabled&&(this.render(),this.determineContainerAutoSizing(),this.listeners(),this.loaded=!0)})}),B(this,"getThumbnails",()=>new Promise(t=>{const{src:i}=this.player.config.previewThumbnails;if(y.empty(i))throw new Error("Missing previewThumbnails.src config attribute");const s=()=>{this.thumbnails.sort((n,r)=>n.height-r.height),this.player.debug.log("Preview thumbnails",this.thumbnails),t()};if(y.function(i))i(n=>{this.thumbnails=n,s()});else{const n=(y.string(i)?[i]:i).map(r=>this.getThumbnail(r));Promise.all(n).then(s)}})),B(this,"getThumbnail",t=>new Promise(i=>{ft(t,void 0,this.player.config.previewThumbnails.withCredentials).then(s=>{const n={frames:Es(s),height:null,urlPrefix:""};!n.frames[0].text.startsWith("/")&&!n.frames[0].text.startsWith("http://")&&!n.frames[0].text.startsWith("https://")&&(n.urlPrefix=t.substring(0,t.lastIndexOf("/")+1));const r=new Image;r.onload=()=>{n.height=r.naturalHeight,n.width=r.naturalWidth,this.thumbnails.push(n),i()},r.src=n.urlPrefix+n.frames[0].text})})),B(this,"startMove",t=>{if(this.loaded&&!(!y.event(t)||!["touchmove","mousemove"].includes(t.type))&&this.player.media.duration){if(t.type==="touchmove")this.seekTime=this.player.media.duration*(this.player.elements.inputs.seek.value/100);else{var i,s;const n=this.player.elements.progress.getBoundingClientRect(),r=100/n.width*(t.pageX-n.left);this.seekTime=this.player.media.duration*(r/100),this.seekTime<0&&(this.seekTime=0),this.seekTime>this.player.media.duration-1&&(this.seekTime=this.player.media.duration-1),this.mousePosX=t.pageX,this.elements.thumb.time.textContent=_t(this.seekTime);const a=(i=this.player.config.markers)===null||i===void 0||(s=i.points)===null||s===void 0?void 0:s.find(({time:o})=>o===Math.round(this.seekTime));a&&this.elements.thumb.time.insertAdjacentHTML("afterbegin",`${a.label}<br>`)}this.showImageAtCurrentTime()}}),B(this,"endMove",()=>{this.toggleThumbContainer(!1,!0)}),B(this,"startScrubbing",t=>{(y.nullOrUndefined(t.button)||t.button===!1||t.button===0)&&(this.mouseDown=!0,this.player.media.duration&&(this.toggleScrubbingContainer(!0),this.toggleThumbContainer(!1,!0),this.showImageAtCurrentTime()))}),B(this,"endScrubbing",()=>{this.mouseDown=!1,Math.ceil(this.lastTime)===Math.ceil(this.player.media.currentTime)?this.toggleScrubbingContainer(!1):$t.call(this.player,this.player.media,"timeupdate",()=>{this.mouseDown||this.toggleScrubbingContainer(!1)})}),B(this,"listeners",()=>{this.player.on("play",()=>{this.toggleThumbContainer(!1,!0)}),this.player.on("seeked",()=>{this.toggleThumbContainer(!1)}),this.player.on("timeupdate",()=>{this.lastTime=this.player.media.currentTime})}),B(this,"render",()=>{this.elements.thumb.container=V("div",{class:this.player.config.classNames.previewThumbnails.thumbContainer}),this.elements.thumb.imageContainer=V("div",{class:this.player.config.classNames.previewThumbnails.imageContainer}),this.elements.thumb.container.appendChild(this.elements.thumb.imageContainer);const t=V("div",{class:this.player.config.classNames.previewThumbnails.timeContainer});this.elements.thumb.time=V("span",{},"00:00"),t.appendChild(this.elements.thumb.time),this.elements.thumb.imageContainer.appendChild(t),y.element(this.player.elements.progress)&&this.player.elements.progress.appendChild(this.elements.thumb.container),this.elements.scrubbing.container=V("div",{class:this.player.config.classNames.previewThumbnails.scrubbingContainer}),this.player.elements.wrapper.appendChild(this.elements.scrubbing.container)}),B(this,"destroy",()=>{this.elements.thumb.container&&this.elements.thumb.container.remove(),this.elements.scrubbing.container&&this.elements.scrubbing.container.remove()}),B(this,"showImageAtCurrentTime",()=>{this.mouseDown?this.setScrubbingContainerSize():this.setThumbContainerSizeAndPos();const t=this.thumbnails[0].frames.findIndex(n=>this.seekTime>=n.startTime&&this.seekTime<=n.endTime),i=t>=0;let s=0;this.mouseDown||this.toggleThumbContainer(i),i&&(this.thumbnails.forEach((n,r)=>{this.loadedImages.includes(n.frames[t].text)&&(s=r)}),t!==this.showingThumb&&(this.showingThumb=t,this.loadImage(s)))}),B(this,"loadImage",(t=0)=>{const i=this.showingThumb,s=this.thumbnails[t],{urlPrefix:n}=s,r=s.frames[i],a=s.frames[i].text,o=n+a;if(!this.currentImageElement||this.currentImageElement.dataset.filename!==a){this.loadingImage&&this.usingSprites&&(this.loadingImage.onload=null);const h=new Image;h.src=o,h.dataset.index=i,h.dataset.filename=a,this.showingThumbFilename=a,this.player.debug.log(`Loading image: ${o}`),h.onload=()=>this.showImage(h,r,t,i,a,!0),this.loadingImage=h,this.removeOldImages(h)}else this.showImage(this.currentImageElement,r,t,i,a,!1),this.currentImageElement.dataset.index=i,this.removeOldImages(this.currentImageElement)}),B(this,"showImage",(t,i,s,n,r,a=!0)=>{this.player.debug.log(`Showing thumb: ${r}. num: ${n}. qual: ${s}. newimg: ${a}`),this.setImageSizeAndOffset(t,i),a&&(this.currentImageContainer.appendChild(t),this.currentImageElement=t,this.loadedImages.includes(r)||this.loadedImages.push(r)),this.preloadNearby(n,!0).then(this.preloadNearby(n,!1)).then(this.getHigherQuality(s,t,i,r))}),B(this,"removeOldImages",t=>{Array.from(this.currentImageContainer.children).forEach(i=>{if(i.tagName.toLowerCase()!=="img")return;const s=this.usingSprites?500:1e3;if(i.dataset.index!==t.dataset.index&&!i.dataset.deleting){i.dataset.deleting=!0;const{currentImageContainer:n}=this;setTimeout(()=>{n.removeChild(i),this.player.debug.log(`Removing thumb: ${i.dataset.filename}`)},s)}})}),B(this,"preloadNearby",(t,i=!0)=>new Promise(s=>{setTimeout(()=>{const n=this.thumbnails[0].frames[t].text;if(this.showingThumbFilename===n){let r;i?r=this.thumbnails[0].frames.slice(t):r=this.thumbnails[0].frames.slice(0,t).reverse();let a=!1;r.forEach(o=>{const h=o.text;if(h!==n&&!this.loadedImages.includes(h)){a=!0,this.player.debug.log(`Preloading thumb filename: ${h}`);const{urlPrefix:f}=this.thumbnails[0],l=f+h,u=new Image;u.src=l,u.onload=()=>{this.player.debug.log(`Preloaded thumb filename: ${h}`),this.loadedImages.includes(h)||this.loadedImages.push(h),s()}}}),a||s()}},300)})),B(this,"getHigherQuality",(t,i,s,n)=>{if(t<this.thumbnails.length-1){let r=i.naturalHeight;this.usingSprites&&(r=s.h),r<this.thumbContainerHeight&&setTimeout(()=>{this.showingThumbFilename===n&&(this.player.debug.log(`Showing higher quality thumb for: ${n}`),this.loadImage(t+1))},300)}}),B(this,"toggleThumbContainer",(t=!1,i=!1)=>{const s=this.player.config.classNames.previewThumbnails.thumbContainerShown;this.elements.thumb.container.classList.toggle(s,t),!t&&i&&(this.showingThumb=null,this.showingThumbFilename=null)}),B(this,"toggleScrubbingContainer",(t=!1)=>{const i=this.player.config.classNames.previewThumbnails.scrubbingContainerShown;this.elements.scrubbing.container.classList.toggle(i,t),t||(this.showingThumb=null,this.showingThumbFilename=null)}),B(this,"determineContainerAutoSizing",()=>{(this.elements.thumb.imageContainer.clientHeight>20||this.elements.thumb.imageContainer.clientWidth>20)&&(this.sizeSpecifiedInCSS=!0)}),B(this,"setThumbContainerSizeAndPos",()=>{const{imageContainer:t}=this.elements.thumb;if(this.sizeSpecifiedInCSS){if(t.clientHeight>20&&t.clientWidth<20){const i=Math.floor(t.clientHeight*this.thumbAspectRatio);t.style.width=`${i}px`}else if(t.clientHeight<20&&t.clientWidth>20){const i=Math.floor(t.clientWidth/this.thumbAspectRatio);t.style.height=`${i}px`}}else{const i=Math.floor(this.thumbContainerHeight*this.thumbAspectRatio);t.style.height=`${this.thumbContainerHeight}px`,t.style.width=`${i}px`}this.setThumbContainerPos()}),B(this,"setThumbContainerPos",()=>{const t=this.player.elements.progress.getBoundingClientRect(),i=this.player.elements.container.getBoundingClientRect(),{container:s}=this.elements.thumb,n=i.left-t.left+10,r=i.right-t.left-s.clientWidth-10,a=this.mousePosX-t.left-s.clientWidth/2,o=sn(a,n,r);s.style.left=`${o}px`,s.style.setProperty("--preview-arrow-offset",`${a-o}px`)}),B(this,"setScrubbingContainerSize",()=>{const{width:t,height:i}=pi(this.thumbAspectRatio,{width:this.player.media.clientWidth,height:this.player.media.clientHeight});this.elements.scrubbing.container.style.width=`${t}px`,this.elements.scrubbing.container.style.height=`${i}px`}),B(this,"setImageSizeAndOffset",(t,i)=>{if(!this.usingSprites)return;const s=this.thumbContainerHeight/i.h;t.style.height=`${t.naturalHeight*s}px`,t.style.width=`${t.naturalWidth*s}px`,t.style.left=`-${i.x*s}px`,t.style.top=`-${i.y*s}px`}),this.player=e,this.thumbnails=[],this.loaded=!1,this.lastMouseMoveTime=Date.now(),this.mouseDown=!1,this.loadedImages=[],this.elements={thumb:{},scrubbing:{}},this.load()}get enabled(){return this.player.isHTML5&&this.player.isVideo&&this.player.config.previewThumbnails.enabled}get currentImageContainer(){return this.mouseDown?this.elements.scrubbing.container:this.elements.thumb.imageContainer}get usingSprites(){return Object.keys(this.thumbnails[0].frames[0]).includes("w")}get thumbAspectRatio(){return this.usingSprites?this.thumbnails[0].frames[0].w/this.thumbnails[0].frames[0].h:this.thumbnails[0].width/this.thumbnails[0].height}get thumbContainerHeight(){if(this.mouseDown){const{height:e}=pi(this.thumbAspectRatio,{width:this.player.media.clientWidth,height:this.player.media.clientHeight});return e}return this.sizeSpecifiedInCSS?this.elements.thumb.imageContainer.clientHeight:Math.floor(this.player.media.clientWidth/this.thumbAspectRatio/4)}get currentImageElement(){return this.mouseDown?this.currentScrubbingImageElement:this.currentThumbnailImageElement}set currentImageElement(e){this.mouseDown?this.currentScrubbingImageElement=e:this.currentThumbnailImageElement=e}},Kt={insertElements(e,t){y.string(t)?ci(e,this.media,{src:t}):y.array(t)&&t.forEach(i=>{ci(e,this.media,i)})},change(e){if(!qi(e,"sources.length")){this.debug.warn("Invalid source format");return}ze.cancelRequests.call(this),this.destroy(()=>{this.options.quality=[],Ue(this.media),this.media=null,y.element(this.elements.container)&&this.elements.container.removeAttribute("class");const{sources:t,type:i}=e,[{provider:s=qe.html5,src:n}]=t,r=s==="html5"?i:"div",a=s==="html5"?{}:{src:n};Object.assign(this,{provider:s,type:i,supported:ce.check(i,s,this.config.playsinline),media:V(r,a)}),this.elements.container.appendChild(this.media),y.boolean(e.autoplay)&&(this.config.autoplay=e.autoplay),this.isHTML5&&(this.config.crossorigin&&this.media.setAttribute("crossorigin",""),this.config.autoplay&&this.media.setAttribute("autoplay",""),y.empty(e.poster)||(this.poster=e.poster),this.config.loop.active&&this.media.setAttribute("loop",""),this.config.muted&&this.media.setAttribute("muted",""),this.config.playsinline&&this.media.setAttribute("playsinline","")),J.addStyleHook.call(this),this.isHTML5&&Kt.insertElements.call(this,"source",t),this.config.title=e.title,nn.setup.call(this),this.isHTML5&&Object.keys(e).includes("tracks")&&Kt.insertElements.call(this,"track",e.tracks),(this.isHTML5||this.isEmbed&&!this.supported.ui)&&J.build.call(this),this.isHTML5&&this.media.load(),y.empty(e.previewThumbnails)||(Object.assign(this.config.previewThumbnails,e.previewThumbnails),this.previewThumbnails&&this.previewThumbnails.loaded&&(this.previewThumbnails.destroy(),this.previewThumbnails=null),this.config.previewThumbnails.enabled&&(this.previewThumbnails=new Qt(this))),this.fullscreen.update()},!0)}},rn=class Xt{constructor(t,i){if(B(this,"play",()=>y.function(this.media.play)?(this.ads&&this.ads.enabled&&this.ads.managerPromise.then(()=>this.ads.play()).catch(()=>Ne(this.media.play())),this.media.play()):null),B(this,"pause",()=>!this.playing||!y.function(this.media.pause)?null:this.media.pause()),B(this,"togglePlay",o=>(y.boolean(o)?o:!this.playing)?this.play():this.pause()),B(this,"stop",()=>{this.isHTML5?(this.pause(),this.restart()):y.function(this.media.stop)&&this.media.stop()}),B(this,"restart",()=>{this.currentTime=0}),B(this,"rewind",o=>{this.currentTime-=y.number(o)?o:this.config.seekTime}),B(this,"forward",o=>{this.currentTime+=y.number(o)?o:this.config.seekTime}),B(this,"increaseVolume",o=>{this.volume=(this.media.muted?0:this.volume)+(y.number(o)?o:0)}),B(this,"decreaseVolume",o=>{this.increaseVolume(-o)}),B(this,"airplay",()=>{ce.airplay&&this.media.webkitShowPlaybackTargetPicker()}),B(this,"toggleControls",o=>{if(this.supported.ui&&!this.isAudio){const h=St(this.elements.container,this.config.classNames.hideControls),f=typeof o>"u"?void 0:!o,l=Z(this.elements.container,this.config.classNames.hideControls,f);if(l&&y.array(this.config.controls)&&this.config.controls.includes("settings")&&!y.empty(this.config.settings)&&W.toggleMenu.call(this,!1),l!==h){const u=l?"controlshidden":"controlsshown";Q.call(this,this.media,u)}return!l}return!1}),B(this,"on",(o,h)=>{X.call(this,this.elements.container,o,h)}),B(this,"once",(o,h)=>{$t.call(this,this.elements.container,o,h)}),B(this,"off",(o,h)=>{Lt(this.elements.container,o,h)}),B(this,"destroy",(o,h=!1)=>{if(!this.ready)return;const f=()=>{document.body.style.overflow="",this.embed=null,h?(Object.keys(this.elements).length&&(Ue(this.elements.buttons.play),Ue(this.elements.captions),Ue(this.elements.controls),Ue(this.elements.wrapper),this.elements.buttons.play=null,this.elements.captions=null,this.elements.controls=null,this.elements.wrapper=null),y.function(o)&&o()):(es.call(this),ze.cancelRequests.call(this),Et(this.elements.original,this.elements.container),Q.call(this,this.elements.original,"destroyed",!0),y.function(o)&&o.call(this.elements.original),this.ready=!1,setTimeout(()=>{this.elements=null,this.media=null},200))};this.stop(),clearTimeout(this.timers.loading),clearTimeout(this.timers.controls),clearTimeout(this.timers.resized),this.isHTML5?(J.toggleNativeControls.call(this,!0),f()):this.isYouTube?(clearInterval(this.timers.buffering),clearInterval(this.timers.playing),this.embed!==null&&y.function(this.embed.destroy)&&this.embed.destroy(),f()):this.isVimeo&&(this.embed!==null&&this.embed.unload().then(f),setTimeout(f,200))}),B(this,"supports",o=>ce.mime.call(this,o)),this.timers={},this.ready=!1,this.loading=!1,this.failed=!1,this.touch=ce.touch,this.media=t,y.string(this.media)&&(this.media=document.querySelectorAll(this.media)),(window.jQuery&&this.media instanceof jQuery||y.nodeList(this.media)||y.array(this.media))&&(this.media=this.media[0]),this.config=oe({},tn,Xt.defaults,i||{},(()=>{try{return JSON.parse(this.media.getAttribute("data-plyr-config"))}catch{return{}}})()),this.elements={container:null,fullscreen:null,captions:null,buttons:{},display:{},progress:{},inputs:{},settings:{popup:null,menu:null,panels:{},buttons:{}}},this.captions={active:null,currentTrack:-1,meta:new WeakMap},this.fullscreen={active:!1},this.options={speed:[],quality:[]},this.debug=new ds(this.config.debug),this.debug.log("Config",this.config),this.debug.log("Support",ce),y.nullOrUndefined(this.media)||!y.element(this.media)){this.debug.error("Setup failed: no suitable element passed");return}if(this.media.plyr){this.debug.warn("Target already setup");return}if(!this.config.enabled){this.debug.error("Setup failed: disabled by config");return}if(!ce.check().api){this.debug.error("Setup failed: no support");return}const s=this.media.cloneNode(!0);s.autoplay=!1,this.elements.original=s;const n=this.media.tagName.toLowerCase();let r=null,a=null;switch(n){case"div":if(r=this.media.querySelector("iframe"),y.element(r)){if(a=$i(r.getAttribute("src")),this.provider=hs(a.toString()),this.elements.container=this.media,this.media=r,this.elements.container.className="",a.search.length){const o=["1","true"];o.includes(a.searchParams.get("autoplay"))&&(this.config.autoplay=!0),o.includes(a.searchParams.get("loop"))&&(this.config.loop.active=!0),this.isYouTube?(this.config.playsinline=o.includes(a.searchParams.get("playsinline")),this.config.youtube.hl=a.searchParams.get("hl")):this.config.playsinline=!0}}else this.provider=this.media.getAttribute(this.config.attributes.embed.provider),this.media.removeAttribute(this.config.attributes.embed.provider);if(y.empty(this.provider)||!Object.values(qe).includes(this.provider)){this.debug.error("Setup failed: Invalid provider");return}this.type=Ut.video;break;case"video":case"audio":this.type=n,this.provider=qe.html5,this.media.hasAttribute("crossorigin")&&(this.config.crossorigin=!0),this.media.hasAttribute("autoplay")&&(this.config.autoplay=!0),(this.media.hasAttribute("playsinline")||this.media.hasAttribute("webkit-playsinline"))&&(this.config.playsinline=!0),this.media.hasAttribute("muted")&&(this.config.muted=!0),this.media.hasAttribute("loop")&&(this.config.loop.active=!0);break;default:this.debug.error("Setup failed: unsupported type");return}if(this.supported=ce.check(this.type,this.provider),!this.supported.api){this.debug.error("Setup failed: no support");return}this.eventListeners=[],this.listeners=new ps(this),this.storage=new Gi(this),this.media.plyr=this,y.element(this.elements.container)||(this.elements.container=V("div"),zi(this.media,this.elements.container)),J.migrateStyles.call(this),J.addStyleHook.call(this),nn.setup.call(this),this.config.debug&&X.call(this,this.elements.container,this.config.events.join(" "),o=>{this.debug.log(`event: ${o.type}`)}),this.fullscreen=new fs(this),(this.isHTML5||this.isEmbed&&!this.supported.ui)&&J.build.call(this),this.listeners.container(),this.listeners.global(),this.config.ads.enabled&&(this.ads=new As(this)),this.isHTML5&&this.config.autoplay&&this.once("canplay",()=>Ne(this.play())),this.lastSeekTime=0,this.config.previewThumbnails.enabled&&(this.previewThumbnails=new Qt(this))}get isHTML5(){return this.provider===qe.html5}get isEmbed(){return this.isYouTube||this.isVimeo}get isYouTube(){return this.provider===qe.youtube}get isVimeo(){return this.provider===qe.vimeo}get isVideo(){return this.type===Ut.video}get isAudio(){return this.type===Ut.audio}get playing(){return!!(this.ready&&!this.paused&&!this.ended)}get paused(){return!!this.media.paused}get stopped(){return!!(this.paused&&this.currentTime===0)}get ended(){return!!this.media.ended}set currentTime(t){if(!this.duration)return;const i=y.number(t)&&t>0;this.media.currentTime=i?Math.min(t,this.duration):0,this.debug.log(`Seeking to ${this.currentTime} seconds`)}get currentTime(){return Number(this.media.currentTime)}get buffered(){const{buffered:t}=this.media;return y.number(t)?t:t&&t.length&&this.duration>0?t.end(0)/this.duration:0}get seeking(){return!!this.media.seeking}get duration(){const t=Number.parseFloat(this.config.duration),i=(this.media||{}).duration,s=!y.number(i)||i===1/0?0:i;return t||s}set volume(t){let i=t;const s=1,n=0;y.string(i)&&(i=Number(i)),y.number(i)||(i=this.storage.get("volume")),y.number(i)||({volume:i}=this.config),i>s&&(i=s),i<n&&(i=n),this.config.volume=i,this.media.volume=i,!y.empty(t)&&this.muted&&i>0&&(this.muted=!1)}get volume(){return Number(this.media.volume)}set muted(t){let i=t;y.boolean(i)||(i=this.storage.get("muted")),y.boolean(i)||(i=this.config.muted),this.config.muted=i,this.media.muted=i}get muted(){return!!this.media.muted}get hasAudio(){return!this.isHTML5||this.isAudio?!0:!!this.media.mozHasAudio||!!this.media.webkitAudioDecodedByteCount||!!(this.media.audioTracks&&this.media.audioTracks.length)}set speed(t){let i=null;y.number(t)&&(i=t),y.number(i)||(i=this.storage.get("speed")),y.number(i)||(i=this.config.speed.selected);const{minimumSpeed:s,maximumSpeed:n}=this;i=sn(i,s,n),this.config.speed.selected=i,setTimeout(()=>{this.media&&(this.media.playbackRate=i)},0)}get speed(){return Number(this.media.playbackRate)}get minimumSpeed(){return this.isYouTube?Math.min(...this.options.speed):this.isVimeo?.5:.0625}get maximumSpeed(){return this.isYouTube?Math.max(...this.options.speed):this.isVimeo?2:16}set quality(t){const i=this.config.quality,s=this.options.quality;if(!s.length)return;let n=[!y.empty(t)&&Number(t),this.storage.get("quality"),i.selected,i.default].find(y.number),r=!0;if(!s.includes(n)){const a=Vi(s,n);this.debug.warn(`Unsupported quality option: ${n}, using ${a} instead`),n=a,r=!1}i.selected=n,this.media.quality=n,r&&this.storage.set({quality:n})}get quality(){return this.media.quality}set loop(t){const i=y.boolean(t)?t:this.config.loop.active;this.config.loop.active=i,this.media.loop=i}get loop(){return!!this.media.loop}set source(t){Kt.change.call(this,t)}get source(){return this.media.currentSrc}get download(){const{download:t}=this.config.urls;return y.url(t)?t:this.source}set download(t){y.url(t)&&(this.config.urls.download=t,W.setDownloadUrl.call(this))}set poster(t){if(!this.isVideo){this.debug.warn("Poster can only be set for video");return}J.setPoster.call(this,t,!1).catch(()=>{})}get poster(){return this.isVideo?this.media.getAttribute("poster")||this.media.getAttribute("data-poster"):null}get ratio(){if(!this.isVideo)return null;const t=Pt(ei.call(this));return y.array(t)?t.join(":"):t}set ratio(t){if(!this.isVideo){this.debug.warn("Aspect ratio can only be set for video");return}if(!y.string(t)||!Ki(t)){this.debug.error(`Invalid aspect ratio specified (${t})`);return}this.config.ratio=Pt(t),it.call(this)}set autoplay(t){this.config.autoplay=y.boolean(t)?t:this.config.autoplay}get autoplay(){return!!this.config.autoplay}toggleCaptions(t){Y.toggle.call(this,t,!1)}set currentTrack(t){Y.set.call(this,t,!1),Y.setup.call(this)}get currentTrack(){const{toggled:t,currentTrack:i}=this.captions;return t?i:-1}set language(t){Y.setLanguage.call(this,t,!1)}get language(){return(Y.getCurrentTrack.call(this)||{}).language}set pip(t){if(!ce.pip)return;const i=y.boolean(t)?t:!this.pip;y.function(this.media.webkitSetPresentationMode)&&this.media.webkitSetPresentationMode(i?Ot.active:Ot.inactive),y.function(this.media.requestPictureInPicture)&&(!this.pip&&i?this.media.requestPictureInPicture():this.pip&&!i&&document.exitPictureInPicture())}get pip(){return ce.pip?y.empty(this.media.webkitPresentationMode)?this.media===document.pictureInPictureElement:this.media.webkitPresentationMode===Ot.active:null}setPreviewThumbnails(t){this.previewThumbnails&&this.previewThumbnails.loaded&&(this.previewThumbnails.destroy(),this.previewThumbnails=null),Object.assign(this.config.previewThumbnails,t),this.config.previewThumbnails.enabled&&(this.previewThumbnails=new Qt(this))}static supported(t,i){return ce.check(t,i)}static loadSprite(t,i){return Zi(t,i)}static setup(t,i={}){let s=null;return y.string(t)?s=Array.from(document.querySelectorAll(t)):y.nodeList(t)?s=Array.from(t):y.array(t)&&(s=t.filter(y.element)),y.empty(s)?null:s.map(n=>new Xt(n,i))}};rn.defaults=Gn(tn);var Ss=wi(dn(),1),Ps=wi(fn(),1),Ms=rn,xs=(e,t)=>{let i=new Ms(".plyr-react",t?.options??{});return t?.source&&(i.source=t?.source),i},Ls=e=>{e&&e.destroy()},_s=()=>{},Rs=e=>e?()=>({plyr:e}):()=>new Proxy({plyr:{source:null}},{get:(t,i)=>i==="plyr"?t[i]:_s});function Is(e,t,i=null){return pn(e,{instantiate:xs,getAPI:Rs,destroy:Ls,params:t},i??[t.options,t.source])}var Ns=Ss.forwardRef((e,t)=>{let{source:i,options:s=null,...n}=e;return(0,Ps.jsx)("video",{ref:Is(t,{source:i,options:s}),className:"plyr-react plyr",...n})});Ns.displayName="Plyr";function Ce(e,t,i,s){return new(i||(i=Promise))((function(n,r){function a(f){try{h(s.next(f))}catch(l){r(l)}}function o(f){try{h(s.throw(f))}catch(l){r(l)}}function h(f){var l;f.done?n(f.value):(l=f.value,l instanceof i?l:new i((function(u){u(l)}))).then(a,o)}h((s=s.apply(e,t||[])).next())}))}var pt=class{constructor(){this.listeners={}}on(e,t,i){if(this.listeners[e]||(this.listeners[e]=new Set),i?.once){const s=(...n)=>{this.un(e,s),t(...n)};return this.listeners[e].add(s),()=>this.un(e,s)}return this.listeners[e].add(t),()=>this.un(e,t)}un(e,t){var i;(i=this.listeners[e])===null||i===void 0||i.delete(t)}once(e,t){return this.on(e,t,{once:!0})}unAll(){this.listeners={}}emit(e,...t){this.listeners[e]&&this.listeners[e].forEach((i=>i(...t)))}},mt={decode:function(e,t){return Ce(this,void 0,void 0,(function*(){const i=new AudioContext({sampleRate:t});try{return yield i.decodeAudioData(e)}finally{i.close()}}))},createBuffer:function(e,t){if(!e||e.length===0)throw new Error("channelData must be a non-empty array");if(t<=0)throw new Error("duration must be greater than 0");if(typeof e[0]=="number"&&(e=[e]),!e[0]||e[0].length===0)throw new Error("channelData must contain non-empty channel arrays");(function(s){const n=s[0];if(n.some((r=>r>1||r<-1))){const r=n.length;let a=0;for(let o=0;o<r;o++){const h=Math.abs(n[o]);h>a&&(a=h)}for(const o of s)for(let h=0;h<r;h++)o[h]/=a}})(e);const i=e.map((s=>s instanceof Float32Array?s:Float32Array.from(s)));return{duration:t,length:i[0].length,sampleRate:i[0].length/t,numberOfChannels:i.length,getChannelData:s=>{const n=i[s];if(!n)throw new Error(`Channel ${s} not found`);return n},copyFromChannel:AudioBuffer.prototype.copyFromChannel,copyToChannel:AudioBuffer.prototype.copyToChannel}}};function an(e,t){const i=t.xmlns?document.createElementNS(t.xmlns,e):document.createElement(e);for(const[s,n]of Object.entries(t))if(s==="children"&&n)for(const[r,a]of Object.entries(n))a instanceof Node?i.appendChild(a):typeof a=="string"?i.appendChild(document.createTextNode(a)):i.appendChild(an(r,a));else s==="style"?Object.assign(i.style,n):s==="textContent"?i.textContent=n:i.setAttribute(s,n.toString());return i}function mi(e,t,i){const s=an(e,t||{});return i?.appendChild(s),s}var Ds=Object.freeze({__proto__:null,createElement:mi,default:mi}),Os={fetchBlob:function(e,t,i){return Ce(this,void 0,void 0,(function*(){const s=yield fetch(e,i);if(s.status>=400)throw new Error(`Failed to fetch ${e}: ${s.status} (${s.statusText})`);return(function(n,r){Ce(this,void 0,void 0,(function*(){if(!n.body||!n.headers)return;const a=n.body.getReader(),o=Number(n.headers.get("Content-Length"))||0;let h=0;const f=l=>{h+=l?.length||0,r(Math.round(h/o*100))};try{for(;;){const l=yield a.read();if(l.done)break;f(l.value)}}catch(l){console.warn("Progress tracking error:",l)}}))})(s.clone(),t),s.blob()}))}};function le(e){let t=e;const i=new Set;return{get value(){return t},set(s){Object.is(t,s)||(t=s,i.forEach((n=>n(t))))},update(s){this.set(s(t))},subscribe:s=>(i.add(s),()=>i.delete(s))}}function Ze(e,t){const i=le(e());return t.forEach((s=>s.subscribe((()=>{const n=e();Object.is(i.value,n)||i.set(n)})))),{get value(){return i.value},subscribe:s=>i.subscribe(s)}}function Be(e,t){let i;const s=()=>{i&&(i(),i=void 0),i=e()},n=t.map((r=>r.subscribe(s)));return s(),()=>{i&&(i(),i=void 0),n.forEach((r=>r()))}}var Us=class extends pt{get isPlayingSignal(){return this._isPlaying}get currentTimeSignal(){return this._currentTime}get durationSignal(){return this._duration}get volumeSignal(){return this._volume}get mutedSignal(){return this._muted}get playbackRateSignal(){return this._playbackRate}get seekingSignal(){return this._seeking}constructor(e){super(),this.isExternalMedia=!1,this.reactiveMediaEventCleanups=[],e.media?(this.media=e.media,this.isExternalMedia=!0):this.media=document.createElement("audio"),this._isPlaying=le(!1),this._currentTime=le(0),this._duration=le(0),this._volume=le(this.media.volume),this._muted=le(this.media.muted),this._playbackRate=le(this.media.playbackRate||1),this._seeking=le(!1),this.setupReactiveMediaEvents(),e.mediaControls&&(this.media.controls=!0),e.autoplay&&(this.media.autoplay=!0),e.playbackRate!=null&&this.onMediaEvent("canplay",(()=>{e.playbackRate!=null&&(this.media.playbackRate=e.playbackRate)}),{once:!0})}setupReactiveMediaEvents(){this.reactiveMediaEventCleanups.push(this.onMediaEvent("play",(()=>{this._isPlaying.set(!0)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("pause",(()=>{this._isPlaying.set(!1)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("ended",(()=>{this._isPlaying.set(!1)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("timeupdate",(()=>{this._currentTime.set(this.media.currentTime)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("durationchange",(()=>{this._duration.set(this.media.duration||0)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("loadedmetadata",(()=>{this._duration.set(this.media.duration||0)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("seeking",(()=>{this._seeking.set(!0)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("seeked",(()=>{this._seeking.set(!1)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("volumechange",(()=>{this._volume.set(this.media.volume),this._muted.set(this.media.muted)}))),this.reactiveMediaEventCleanups.push(this.onMediaEvent("ratechange",(()=>{this._playbackRate.set(this.media.playbackRate)})))}onMediaEvent(e,t,i){return this.media.addEventListener(e,t,i),()=>this.media.removeEventListener(e,t,i)}getSrc(){return this.media.currentSrc||this.media.src||""}revokeSrc(){const e=this.getSrc();e.startsWith("blob:")&&URL.revokeObjectURL(e)}canPlayType(e){return this.media.canPlayType(e)!==""}setSrc(e,t){const i=this.getSrc();if(e&&i===e)return;this.revokeSrc();const s=t instanceof Blob&&(this.canPlayType(t.type)||!e)?URL.createObjectURL(t):e;if(i&&this.media.removeAttribute("src"),s||e)try{this.media.src=s}catch{this.media.src=e}}destroy(){this.reactiveMediaEventCleanups.forEach((e=>e())),this.reactiveMediaEventCleanups=[],this.isExternalMedia||(this.media.pause(),this.revokeSrc(),this.media.removeAttribute("src"),this.media.load(),this.media.remove())}setMediaElement(e){this.reactiveMediaEventCleanups.forEach((t=>t())),this.reactiveMediaEventCleanups=[],this.media=e,this.setupReactiveMediaEvents()}play(){return Ce(this,void 0,void 0,(function*(){try{return yield this.media.play()}catch(e){if(e instanceof DOMException&&e.name==="AbortError")return;throw e}}))}pause(){this.media.pause()}isPlaying(){return!this.media.paused&&!this.media.ended}setTime(e){this.media.currentTime=Math.max(0,Math.min(e,this.getDuration()))}getDuration(){return this.media.duration}getCurrentTime(){return this.media.currentTime}getVolume(){return this.media.volume}setVolume(e){this.media.volume=e}getMuted(){return this.media.muted}setMuted(e){this.media.muted=e}getPlaybackRate(){return this.media.playbackRate}isSeeking(){return this.media.seeking}setPlaybackRate(e,t){t!=null&&(this.media.preservesPitch=t),this.media.playbackRate=e}getMediaElement(){return this.media}setSinkId(e){return this.media.setSinkId(e)}};function Fs({maxTop:e,maxBottom:t,halfHeight:i,vScale:s,barMinHeight:n=0,barAlign:r}){let a=Math.round(e*i*s),o=a+Math.round(t*i*s)||1;return o<n&&(o=n,r||(a=o/2)),{topHeight:a,totalHeight:o}}function Hs({barAlign:e,halfHeight:t,topHeight:i,totalHeight:s,canvasHeight:n}){return e==="top"?0:e==="bottom"?n-s:t-i}function gi(e,t,i){const s=t-e.left,n=i-e.top;return[s/e.width,n/e.height]}function on(e){return!!(e.barWidth||e.barGap||e.barAlign)}function bi(e,t){if(!on(t))return e;const i=t.barWidth||.5,s=i+(t.barGap||i/2);return s===0?e:Math.floor(e/s)*s}function yi({scrollLeft:e,totalWidth:t,numCanvases:i}){if(t===0)return[0];const s=e/t,n=Math.floor(s*i);return[n-1,n,n+1]}function ln(e){const t=e._cleanup;typeof t=="function"&&t()}function js(e){const t=le({scrollLeft:e.scrollLeft,scrollWidth:e.scrollWidth,clientWidth:e.clientWidth}),i=Ze((()=>(function(r){const{scrollLeft:a,scrollWidth:o,clientWidth:h}=r;if(o===0)return{startX:0,endX:1};const f=a/o,l=(a+h)/o;return{startX:Math.max(0,Math.min(1,f)),endX:Math.max(0,Math.min(1,l))}})(t.value)),[t]),s=Ze((()=>(function(r){return{left:r.scrollLeft,right:r.scrollLeft+r.clientWidth}})(t.value)),[t]),n=()=>{t.set({scrollLeft:e.scrollLeft,scrollWidth:e.scrollWidth,clientWidth:e.clientWidth})};return e.addEventListener("scroll",n,{passive:!0}),{scrollData:t,percentages:i,bounds:s,cleanup:()=>{e.removeEventListener("scroll",n),ln(t)}}}var Ws=class extends pt{constructor(e,t){super(),this.timeouts=[],this.isScrollable=!1,this.audioData=null,this.resizeObserver=null,this.lastContainerWidth=0,this.isDragging=!1,this.subscriptions=[],this.unsubscribeOnScroll=[],this.dragStream=null,this.scrollStream=null,this.subscriptions=[],this.options=e;const i=this.parentFromOptionsContainer(e.container);this.parent=i;const[s,n]=this.initHtml();i.appendChild(s),this.container=s,this.scrollContainer=n.querySelector(".scroll"),this.wrapper=n.querySelector(".wrapper"),this.canvasWrapper=n.querySelector(".canvases"),this.progressWrapper=n.querySelector(".progress"),this.cursor=n.querySelector(".cursor"),t&&n.appendChild(t),this.initEvents()}parentFromOptionsContainer(e){let t;if(typeof e=="string"?t=document.querySelector(e):e instanceof HTMLElement&&(t=e),!t)throw new Error("Container not found");return t}initEvents(){this.wrapper.addEventListener("click",(t=>{const[i,s]=gi(this.wrapper.getBoundingClientRect(),t.clientX,t.clientY);this.emit("click",i,s)})),this.wrapper.addEventListener("dblclick",(t=>{const[i,s]=gi(this.wrapper.getBoundingClientRect(),t.clientX,t.clientY);this.emit("dblclick",i,s)})),this.options.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.scrollStream=js(this.scrollContainer);const e=Be((()=>{const{startX:t,endX:i}=this.scrollStream.percentages.value,{left:s,right:n}=this.scrollStream.bounds.value;this.emit("scroll",t,i,s,n)}),[this.scrollStream.percentages,this.scrollStream.bounds]);if(this.subscriptions.push(e),typeof ResizeObserver=="function"){const t=this.createDelay(100);this.resizeObserver=new ResizeObserver((()=>{t().then((()=>this.onContainerResize())).catch((()=>{}))})),this.resizeObserver.observe(this.scrollContainer)}}onContainerResize(){const e=this.parent.clientWidth;e===this.lastContainerWidth&&this.options.height!=="auto"||(this.lastContainerWidth=e,this.reRender(),this.emit("resize"))}initDrag(){if(this.dragStream)return;this.dragStream=(function(t,i={}){const{threshold:s=3,mouseButton:n=0,touchDelay:r=100}=i,a=le(null),o=new Map,h=matchMedia("(pointer: coarse)").matches;let f=()=>{};const l=u=>{if(u.button!==n||(o.set(u.pointerId,u),o.size>1))return;let c=u.clientX,d=u.clientY,m=!1;const T=Date.now(),{left:x,top:k}=t.getBoundingClientRect(),M=R=>{if(R.defaultPrevented||o.size>1||h&&Date.now()-T<r)return;const p=R.clientX,b=R.clientY,A=p-c,C=b-d;(m||Math.abs(A)>s||Math.abs(C)>s)&&(R.preventDefault(),R.stopPropagation(),m||(a.set({type:"start",x:c-x,y:d-k}),m=!0),a.set({type:"move",x:p-x,y:b-k,deltaX:A,deltaY:C}),c=p,d=b)},L=R=>{if(o.delete(R.pointerId),m){const p=R.clientX,b=R.clientY;a.set({type:"end",x:p-x,y:b-k})}f()},E=R=>{o.delete(R.pointerId),R.relatedTarget&&R.relatedTarget!==document.documentElement||L(R)},D=R=>{m&&(R.stopPropagation(),R.preventDefault())},w=R=>{R.defaultPrevented||o.size>1||m&&R.preventDefault()};document.addEventListener("pointermove",M),document.addEventListener("pointerup",L),document.addEventListener("pointerout",E),document.addEventListener("pointercancel",E),document.addEventListener("touchmove",w,{passive:!1}),document.addEventListener("click",D,{capture:!0}),f=()=>{document.removeEventListener("pointermove",M),document.removeEventListener("pointerup",L),document.removeEventListener("pointerout",E),document.removeEventListener("pointercancel",E),document.removeEventListener("touchmove",w),setTimeout((()=>{document.removeEventListener("click",D,{capture:!0})}),10)}};return t.addEventListener("pointerdown",l),{signal:a,cleanup:()=>{f(),t.removeEventListener("pointerdown",l),o.clear(),ln(a)}}})(this.wrapper);const e=Be((()=>{const t=this.dragStream.signal.value;if(!t)return;const i=this.wrapper.getBoundingClientRect().width,s=(n=t.x/i)<0?0:n>1?1:n;var n;t.type==="start"?(this.isDragging=!0,this.emit("dragstart",s)):t.type==="move"?this.emit("drag",s):t.type==="end"&&(this.isDragging=!1,this.emit("dragend",s))}),[this.dragStream.signal]);this.subscriptions.push(e)}initHtml(){const e=document.createElement("div"),t=e.attachShadow({mode:"open"}),i=this.options.cspNonce&&typeof this.options.cspNonce=="string"?this.options.cspNonce.replace(/"/g,""):"";return t.innerHTML=`
      <style${i?` nonce="${i}"`:""}>
        :host {
          user-select: none;
          min-width: 1px;
        }
        :host audio {
          display: block;
          width: 100%;
        }
        :host .scroll {
          overflow-x: auto;
          overflow-y: hidden;
          width: 100%;
          position: relative;
        }
        :host .noScrollbar {
          scrollbar-color: transparent;
          scrollbar-width: none;
        }
        :host .noScrollbar::-webkit-scrollbar {
          display: none;
          -webkit-appearance: none;
        }
        :host .wrapper {
          position: relative;
          overflow: visible;
          z-index: 2;
        }
        :host .canvases {
          min-height: ${this.getHeight(this.options.height,this.options.splitChannels)}px;
          pointer-events: none;
        }
        :host .canvases > div {
          position: relative;
        }
        :host canvas {
          display: block;
          position: absolute;
          top: 0;
          image-rendering: pixelated;
        }
        :host .progress {
          pointer-events: none;
          position: absolute;
          z-index: 2;
          top: 0;
          left: 0;
          width: 0;
          height: 100%;
          overflow: hidden;
        }
        :host .progress > div {
          position: relative;
        }
        :host .cursor {
          pointer-events: none;
          position: absolute;
          z-index: 5;
          top: 0;
          left: 0;
          height: 100%;
          border-radius: 2px;
        }
      </style>

      <div class="scroll" part="scroll">
        <div class="wrapper" part="wrapper">
          <div class="canvases" part="canvases"></div>
          <div class="progress" part="progress"></div>
          <div class="cursor" part="cursor"></div>
        </div>
      </div>
    `,[e,t]}setOptions(e){if(this.options.container!==e.container){const t=this.parentFromOptionsContainer(e.container);t.appendChild(this.container),this.parent=t}e.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.options=e,this.reRender()}getWrapper(){return this.wrapper}getWidth(){return this.scrollContainer.clientWidth}getScroll(){return this.scrollContainer.scrollLeft}setScroll(e){this.scrollContainer.scrollLeft=e}setScrollPercentage(e){const{scrollWidth:t}=this.scrollContainer,i=t*e;this.setScroll(i)}destroy(){var e;this.subscriptions.forEach((t=>t())),this.container.remove(),this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null),(e=this.unsubscribeOnScroll)===null||e===void 0||e.forEach((t=>t())),this.unsubscribeOnScroll=[],this.dragStream&&(this.dragStream.cleanup(),this.dragStream=null),this.scrollStream&&(this.scrollStream.cleanup(),this.scrollStream=null)}createDelay(e=10){let t,i;const s=()=>{t&&(clearTimeout(t),t=void 0),i&&(i(),i=void 0)};return this.timeouts.push(s),()=>new Promise(((n,r)=>{s(),i=r,t=setTimeout((()=>{t=void 0,i=void 0,n()}),e)}))}getHeight(e,t){var i;const s=((i=this.audioData)===null||i===void 0?void 0:i.numberOfChannels)||1;return(function({optionsHeight:n,optionsSplitChannels:r,parentHeight:a,numberOfChannels:o,defaultHeight:h=128}){if(n==null)return h;const f=Number(n);if(!isNaN(f))return f;if(n==="auto"){const l=a||h;return r?.every((u=>!u.overlay))?l/o:l}return h})({optionsHeight:e,optionsSplitChannels:t,parentHeight:this.parent.clientHeight,numberOfChannels:s,defaultHeight:128})}convertColorValues(e,t){return(function(i,s,n){if(!Array.isArray(i))return i||"";if(i.length===0)return"#999";if(i.length<2)return i[0]||"";const r=document.createElement("canvas"),a=r.getContext("2d"),o=n??r.height*s,h=a.createLinearGradient(0,0,0,o||s),f=1/(i.length-1);return i.forEach(((l,u)=>{h.addColorStop(u*f,l)})),h})(e,this.getPixelRatio(),t?.canvas.height)}getPixelRatio(){return e=window.devicePixelRatio,Math.max(1,e||1);var e}renderBarWaveform(e,t,i,s){const{width:n,height:r}=i.canvas,{halfHeight:a,barWidth:o,barRadius:h,barIndexScale:f,barSpacing:l,barMinHeight:u}=(function({width:d,height:m,length:T,options:x,pixelRatio:k}){const M=m/2,L=x.barWidth?x.barWidth*k:1,E=x.barGap?x.barGap*k:x.barWidth?L/2:0,D=L+E||1;return{halfHeight:M,barWidth:L,barGap:E,barRadius:x.barRadius||0,barMinHeight:x.barMinHeight?x.barMinHeight*k:0,barIndexScale:T>0?d/D/T:0,barSpacing:D}})({width:n,height:r,length:(e[0]||[]).length,options:t,pixelRatio:this.getPixelRatio()}),c=(function({channelData:d,barIndexScale:m,barSpacing:T,barWidth:x,halfHeight:k,vScale:M,canvasHeight:L,barAlign:E,barMinHeight:D}){const w=d[0]||[],R=d[1]||w,p=w.length,b=[];let A=0,C=0,P=0;for(let _=0;_<=p;_++){const S=Math.round(_*m);if(S>A){const{topHeight:g,totalHeight:U}=Fs({maxTop:C,maxBottom:P,halfHeight:k,vScale:M,barMinHeight:D,barAlign:E}),I=Hs({barAlign:E,halfHeight:k,topHeight:g,totalHeight:U,canvasHeight:L});b.push({x:A*T,y:I,width:x,height:U}),A=S,C=0,P=0}const N=Math.abs(w[_]||0),v=Math.abs(R[_]||0);N>C&&(C=N),v>P&&(P=v)}return b})({channelData:e,barIndexScale:f,barSpacing:l,barWidth:o,halfHeight:a,vScale:s,canvasHeight:r,barAlign:t.barAlign,barMinHeight:u});i.beginPath();for(const d of c)h&&"roundRect"in i?i.roundRect(d.x,d.y,d.width,d.height,h):i.rect(d.x,d.y,d.width,d.height);i.fill(),i.closePath()}renderLineWaveform(e,t,i,s){const{width:n,height:r}=i.canvas,a=(function({channelData:o,width:h,height:f,vScale:l}){const u=f/2,c=o[0]||[];return[c,o[1]||c].map(((d,m)=>{const T=d.length,x=T?h/T:0,k=u,M=m===0?-1:1,L=[{x:0,y:k}];let E=0,D=0;for(let w=0;w<=T;w++){const R=Math.round(w*x);if(R>E){const b=k+(Math.round(D*u*l)||1)*M;L.push({x:E,y:b}),E=R,D=0}const p=Math.abs(d[w]||0);p>D&&(D=p)}return L.push({x:E,y:k}),L}))})({channelData:e,width:n,height:r,vScale:s});i.beginPath();for(const o of a)if(o.length){i.moveTo(o[0].x,o[0].y);for(let h=1;h<o.length;h++){const f=o[h];i.lineTo(f.x,f.y)}}i.fill(),i.closePath()}renderWaveform(e,t,i){if(i.fillStyle=this.convertColorValues(t.waveColor,i),t.renderFunction)return void t.renderFunction(e,i);const s=(function({channelData:n,barHeight:r,normalize:a,maxPeak:o}){var h;const f=r||1;if(!a)return f;const l=n[0];if(!l||l.length===0)return f;let u=o??0;if(!o)for(let c=0;c<l.length;c++){const d=(h=l[c])!==null&&h!==void 0?h:0,m=Math.abs(d);m>u&&(u=m)}return u?f/u:f})({channelData:e,barHeight:t.barHeight,normalize:t.normalize,maxPeak:t.maxPeak});on(t)?this.renderBarWaveform(e,t,i,s):this.renderLineWaveform(e,t,i,s)}renderSingleCanvas(e,t,i,s,n,r,a){const o=this.getPixelRatio(),h=document.createElement("canvas");h.width=Math.round(i*o),h.height=Math.round(s*o),h.style.width=`${i}px`,h.style.height=`${s}px`,h.style.left=`${Math.round(n)}px`,r.appendChild(h);const f=h.getContext("2d");if(t.renderFunction?(f.fillStyle=this.convertColorValues(t.waveColor,f),t.renderFunction(e,f)):this.renderWaveform(e,t,f),h.width>0&&h.height>0){const l=h.cloneNode(),u=l.getContext("2d");u.drawImage(h,0,0),u.globalCompositeOperation="source-in",u.fillStyle=this.convertColorValues(t.progressColor,u),u.fillRect(0,0,h.width,h.height),a.appendChild(l)}}renderMultiCanvas(e,t,i,s,n,r){const a=this.getPixelRatio(),{clientWidth:o}=this.scrollContainer,h=i/a,f=(function({clientWidth:d,totalWidth:m,options:T}){return bi(Math.min(8e3,d,m),T)})({clientWidth:o,totalWidth:h,options:t});let l={};if(f===0)return;const u=d=>{if(d<0||d>=c||l[d])return;l[d]=!0;const m=d*f;let T=Math.min(h-m,f);if(T=bi(T,t),T<=0)return;const x=(function({channelData:k,offset:M,clampedWidth:L,totalWidth:E}){return k.map((D=>{const w=Math.floor(M/E*D.length),R=Math.floor((M+L)/E*D.length);return D.slice(w,R)}))})({channelData:e,offset:m,clampedWidth:T,totalWidth:h});this.renderSingleCanvas(x,t,T,s,m,n,r)},c=Math.ceil(h/f);if(!this.isScrollable){for(let d=0;d<c;d++)u(d);return}if(yi({scrollLeft:this.scrollContainer.scrollLeft,totalWidth:h,numCanvases:c}).forEach((d=>u(d))),c>1){const d=this.on("scroll",(()=>{const{scrollLeft:m}=this.scrollContainer;Object.keys(l).length>10&&(n.innerHTML="",r.innerHTML="",l={}),yi({scrollLeft:m,totalWidth:h,numCanvases:c}).forEach((T=>u(T)))}));this.unsubscribeOnScroll.push(d)}}renderChannel(e,t,i,s){var{overlay:n}=t,r=(function(f,l){var u={};for(var c in f)Object.prototype.hasOwnProperty.call(f,c)&&l.indexOf(c)<0&&(u[c]=f[c]);if(f!=null&&typeof Object.getOwnPropertySymbols=="function"){var d=0;for(c=Object.getOwnPropertySymbols(f);d<c.length;d++)l.indexOf(c[d])<0&&Object.prototype.propertyIsEnumerable.call(f,c[d])&&(u[c[d]]=f[c[d]])}return u})(t,["overlay"]);const a=document.createElement("div"),o=this.getHeight(r.height,r.splitChannels);a.style.height=`${o}px`,n&&s>0&&(a.style.marginTop=`-${o}px`),this.canvasWrapper.style.minHeight=`${o}px`,this.canvasWrapper.appendChild(a);const h=a.cloneNode();this.progressWrapper.appendChild(h),this.renderMultiCanvas(e,r,i,o,a,h)}render(e){return Ce(this,void 0,void 0,(function*(){var t;this.timeouts.forEach((h=>h())),this.timeouts=[],this.canvasWrapper.innerHTML="",this.progressWrapper.innerHTML="",this.options.width!=null&&(this.scrollContainer.style.width=typeof this.options.width=="number"?`${this.options.width}px`:this.options.width);const i=this.getPixelRatio(),s=this.scrollContainer.clientWidth,{scrollWidth:n,isScrollable:r,useParentWidth:a,width:o}=(function({duration:h,minPxPerSec:f=0,parentWidth:l,fillParent:u,pixelRatio:c}){const d=Math.ceil(h*f),m=d>l,T=!!(u&&!m);return{scrollWidth:d,isScrollable:m,useParentWidth:T,width:(T?l:d)*c}})({duration:e.duration,minPxPerSec:this.options.minPxPerSec||0,parentWidth:s,fillParent:this.options.fillParent,pixelRatio:i});if(this.isScrollable=r,this.wrapper.style.width=a?"100%":`${n}px`,this.scrollContainer.style.overflowX=this.isScrollable?"auto":"hidden",this.scrollContainer.classList.toggle("noScrollbar",!!this.options.hideScrollbar),this.cursor.style.backgroundColor=`${this.options.cursorColor||this.options.progressColor}`,this.cursor.style.width=`${this.options.cursorWidth}px`,this.audioData=e,this.emit("render"),this.options.splitChannels)for(let h=0;h<e.numberOfChannels;h++){const f=Object.assign(Object.assign({},this.options),(t=this.options.splitChannels)===null||t===void 0?void 0:t[h]);this.renderChannel([e.getChannelData(h)],f,o,h)}else{const h=[e.getChannelData(0)];e.numberOfChannels>1&&h.push(e.getChannelData(1)),this.renderChannel(h,this.options,o,0)}Promise.resolve().then((()=>this.emit("rendered")))}))}reRender(){if(this.unsubscribeOnScroll.forEach((i=>i())),this.unsubscribeOnScroll=[],!this.audioData)return;const{scrollWidth:e}=this.scrollContainer,{right:t}=this.progressWrapper.getBoundingClientRect();if(this.render(this.audioData),this.isScrollable&&e!==this.scrollContainer.scrollWidth){const{right:i}=this.progressWrapper.getBoundingClientRect(),s=(function(n){const r=2*n;return(r<0?Math.floor(r):Math.ceil(r))/2})(i-t);this.scrollContainer.scrollLeft+=s}}zoom(e){this.options.minPxPerSec=e,this.reRender()}scrollIntoView(e,t=!1){const{scrollLeft:i,scrollWidth:s,clientWidth:n}=this.scrollContainer,r=e*s,a=i,o=i+n,h=n/2;if(this.isDragging)r+30>o?this.scrollContainer.scrollLeft+=30:r-30<a&&(this.scrollContainer.scrollLeft-=30);else{(r<a||r>o)&&(this.scrollContainer.scrollLeft=r-(this.options.autoCenter?h:0));const f=r-i-h;t&&this.options.autoCenter&&f>0&&(this.scrollContainer.scrollLeft+=f)}}renderProgress(e,t){if(isNaN(e))return;const i=100*e;this.canvasWrapper.style.clipPath=`polygon(${i}% 0%, 100% 0%, 100% 100%, ${i}% 100%)`,this.progressWrapper.style.width=`${i}%`,this.cursor.style.left=`${i}%`,this.cursor.style.transform=this.options.cursorWidth?`translateX(-${e*this.options.cursorWidth}px)`:"",this.isScrollable&&this.options.autoScroll&&this.audioData&&this.audioData.duration>0&&this.scrollIntoView(e,t)}exportImage(e,t,i){return Ce(this,void 0,void 0,(function*(){const s=this.canvasWrapper.querySelectorAll("canvas");if(!s.length)throw new Error("No waveform data");if(i==="dataURL"){const n=Array.from(s).map((r=>r.toDataURL(e,t)));return Promise.resolve(n)}return Promise.all(Array.from(s).map((n=>new Promise(((r,a)=>{n.toBlob((o=>{o?r(o):a(new Error("Could not export image"))}),e,t)})))))}))}},Bs=class extends pt{constructor(){super(...arguments),this.animationFrameId=null,this.isRunning=!1}start(){if(this.isRunning)return;this.isRunning=!0;const e=()=>{this.isRunning&&(this.emit("tick"),this.animationFrameId=requestAnimationFrame(e))};e()}stop(){this.isRunning=!1,this.animationFrameId!==null&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null)}destroy(){this.stop()}},Ht=class extends pt{constructor(e=new AudioContext){super(),this.bufferNode=null,this.playStartTime=0,this.playedDuration=0,this._muted=!1,this._playbackRate=1,this._duration=void 0,this.buffer=null,this.currentSrc="",this.paused=!0,this.crossOrigin=null,this.seeking=!1,this.autoplay=!1,this.addEventListener=this.on,this.removeEventListener=this.un,this.audioContext=e,this.gainNode=this.audioContext.createGain(),this.gainNode.connect(this.audioContext.destination)}load(){return Ce(this,void 0,void 0,(function*(){}))}get src(){return this.currentSrc}set src(e){if(this.currentSrc=e,this._duration=void 0,!e)return this.buffer=null,void this.emit("emptied");fetch(e).then((t=>{if(t.status>=400)throw new Error(`Failed to fetch ${e}: ${t.status} (${t.statusText})`);return t.arrayBuffer()})).then((t=>this.currentSrc!==e?null:this.audioContext.decodeAudioData(t))).then((t=>{this.currentSrc===e&&(this.buffer=t,this.emit("loadedmetadata"),this.emit("canplay"),this.autoplay&&this.play())})).catch((t=>{console.error("WebAudioPlayer load error:",t)}))}_play(){if(!this.paused)return;this.paused=!1,this.bufferNode&&(this.bufferNode.onended=null,this.bufferNode.disconnect()),this.bufferNode=this.audioContext.createBufferSource(),this.buffer&&(this.bufferNode.buffer=this.buffer),this.bufferNode.playbackRate.value=this._playbackRate,this.bufferNode.connect(this.gainNode);let e=this.playedDuration*this._playbackRate;(e>=this.duration||e<0)&&(e=0,this.playedDuration=0),this.bufferNode.start(this.audioContext.currentTime,e),this.playStartTime=this.audioContext.currentTime,this.bufferNode.onended=()=>{this.currentTime>=this.duration&&(this.pause(),this.emit("ended"))}}_pause(){var e;this.paused=!0,(e=this.bufferNode)===null||e===void 0||e.stop(),this.playedDuration+=this.audioContext.currentTime-this.playStartTime}play(){return Ce(this,void 0,void 0,(function*(){this.paused&&(this._play(),this.emit("play"))}))}pause(){this.paused||(this._pause(),this.emit("pause"))}stopAt(e){const t=e-this.currentTime,i=this.bufferNode;i?.stop(this.audioContext.currentTime+t),i?.addEventListener("ended",(()=>{i===this.bufferNode&&(this.bufferNode=null,this.pause())}),{once:!0})}setSinkId(e){return Ce(this,void 0,void 0,(function*(){return this.audioContext.setSinkId(e)}))}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e,this.bufferNode&&(this.bufferNode.playbackRate.value=e)}get currentTime(){return(this.paused?this.playedDuration:this.playedDuration+(this.audioContext.currentTime-this.playStartTime))*this._playbackRate}set currentTime(e){const t=!this.paused;t&&this._pause(),this.playedDuration=e/this._playbackRate,t&&this._play(),this.emit("seeking"),this.emit("timeupdate")}get duration(){var e,t;return(e=this._duration)!==null&&e!==void 0?e:((t=this.buffer)===null||t===void 0?void 0:t.duration)||0}set duration(e){this._duration=e}get volume(){return this.gainNode.gain.value}set volume(e){this.gainNode.gain.value=e,this.emit("volumechange")}get muted(){return this._muted}set muted(e){this._muted!==e&&(this._muted=e,this._muted?this.gainNode.disconnect():this.gainNode.connect(this.audioContext.destination))}canPlayType(e){return/^(audio|video)\//.test(e)}getGainNode(){return this.gainNode}getChannelData(){const e=[];if(!this.buffer)return e;const t=this.buffer.numberOfChannels;for(let i=0;i<t;i++)e.push(this.buffer.getChannelData(i));return e}removeAttribute(e){switch(e){case"src":this.src="";break;case"playbackRate":this.playbackRate=0;break;case"currentTime":this.currentTime=0;break;case"duration":this.duration=0;break;case"volume":this.volume=0;break;case"muted":this.muted=!1}}},qs={waveColor:"#999",progressColor:"#555",cursorWidth:1,minPxPerSec:0,fillParent:!0,interact:!0,dragToSeek:!1,autoScroll:!0,autoCenter:!0,sampleRate:8e3},vi=class cn extends Us{static create(t){return new cn(t)}getState(){return this.wavesurferState}getRenderer(){return this.renderer}constructor(t){const i=t.media||(t.backend==="WebAudio"?new Ht:void 0);super({media:i,mediaControls:t.mediaControls,autoplay:t.autoplay,playbackRate:t.audioRate}),this.plugins=[],this.decodedData=null,this.stopAtPosition=null,this.subscriptions=[],this.mediaSubscriptions=[],this.abortController=null,this.reactiveCleanups=[],this.options=Object.assign({},qs,t);const{state:s,actions:n}=(function(o){var h,f,l,u,c,d;const m=(h=o?.currentTime)!==null&&h!==void 0?h:le(0),T=(f=o?.duration)!==null&&f!==void 0?f:le(0),x=(l=o?.isPlaying)!==null&&l!==void 0?l:le(!1),k=(u=o?.isSeeking)!==null&&u!==void 0?u:le(!1),M=(c=o?.volume)!==null&&c!==void 0?c:le(1),L=(d=o?.playbackRate)!==null&&d!==void 0?d:le(1),E=le(null),D=le(null),w=le(""),R=le(0),p=le(0),b=Ze((()=>!x.value),[x]),A=Ze((()=>E.value!==null),[E]);return{state:{currentTime:m,duration:T,isPlaying:x,isPaused:b,isSeeking:k,volume:M,playbackRate:L,audioBuffer:E,peaks:D,url:w,zoom:R,scrollPosition:p,canPlay:A,isReady:Ze((()=>A.value&&T.value>0),[A,T]),progress:Ze((()=>m.value),[m]),progressPercent:Ze((()=>T.value>0?m.value/T.value:0),[m,T])},actions:{setCurrentTime:C=>{const P=Math.max(0,Math.min(T.value||1/0,C));m.set(P)},setDuration:C=>{T.set(Math.max(0,C))},setPlaying:C=>{x.set(C)},setSeeking:C=>{k.set(C)},setVolume:C=>{const P=Math.max(0,Math.min(1,C));M.set(P)},setPlaybackRate:C=>{const P=Math.max(.1,Math.min(16,C));L.set(P)},setAudioBuffer:C=>{E.set(C),C&&T.set(C.duration)},setPeaks:C=>{D.set(C)},setUrl:C=>{w.set(C)},setZoom:C=>{R.set(Math.max(0,C))},setScrollPosition:C=>{p.set(Math.max(0,C))}}}})({isPlaying:this.isPlayingSignal,currentTime:this.currentTimeSignal,duration:this.durationSignal,volume:this.volumeSignal,playbackRate:this.playbackRateSignal,isSeeking:this.seekingSignal});this.wavesurferState=s,this.wavesurferActions=n,this.timer=new Bs;const r=i?void 0:this.getMediaElement();this.renderer=new Ws(this.options,r),this.initPlayerEvents(),this.initRendererEvents(),this.initTimerEvents(),this.initReactiveState(),this.initPlugins();const a=this.options.url||this.getSrc()||"";Promise.resolve().then((()=>{this.emit("init");const{peaks:o,duration:h}=this.options;(a||o&&h)&&this.load(a,o,h).catch((f=>{this.emit("error",f instanceof Error?f:new Error(String(f)))}))}))}updateProgress(t=this.getCurrentTime()){return this.renderer.renderProgress(t/this.getDuration(),this.isPlaying()),t}initTimerEvents(){this.subscriptions.push(this.timer.on("tick",(()=>{if(!this.isSeeking()){const t=this.updateProgress();this.emit("timeupdate",t),this.emit("audioprocess",t),this.stopAtPosition!=null&&this.isPlaying()&&t>=this.stopAtPosition&&this.pause()}})))}initReactiveState(){this.reactiveCleanups.push((function(t,i){const s=[];s.push(Be((()=>{const a=t.isPlaying.value;i.emit(a?"play":"pause")}),[t.isPlaying])),s.push(Be((()=>{const a=t.currentTime.value;i.emit("timeupdate",a),t.isPlaying.value&&i.emit("audioprocess",a)}),[t.currentTime,t.isPlaying])),s.push(Be((()=>{t.isSeeking.value&&i.emit("seeking",t.currentTime.value)}),[t.isSeeking,t.currentTime]));let n=!1;s.push(Be((()=>{t.isReady.value&&!n&&(n=!0,i.emit("ready",t.duration.value))}),[t.isReady,t.duration]));let r=!1;return s.push(Be((()=>{const a=t.isPlaying.value,o=t.currentTime.value,h=t.duration.value,f=h>0&&o>=h;r&&!a&&f&&i.emit("finish"),r=a&&f}),[t.isPlaying,t.currentTime,t.duration])),s.push(Be((()=>{const a=t.zoom.value;a>0&&i.emit("zoom",a)}),[t.zoom])),()=>{s.forEach((a=>a()))}})(this.wavesurferState,{emit:this.emit.bind(this)}))}initPlayerEvents(){this.isPlaying()&&(this.emit("play"),this.timer.start()),this.mediaSubscriptions.push(this.onMediaEvent("timeupdate",(()=>{const t=this.updateProgress();this.emit("timeupdate",t)})),this.onMediaEvent("play",(()=>{this.emit("play"),this.timer.start()})),this.onMediaEvent("pause",(()=>{this.emit("pause"),this.timer.stop(),this.stopAtPosition=null})),this.onMediaEvent("emptied",(()=>{this.timer.stop(),this.stopAtPosition=null})),this.onMediaEvent("ended",(()=>{this.emit("timeupdate",this.getDuration()),this.emit("finish"),this.stopAtPosition=null})),this.onMediaEvent("seeking",(()=>{this.emit("seeking",this.getCurrentTime())})),this.onMediaEvent("error",(()=>{var t;this.emit("error",(t=this.getMediaElement().error)!==null&&t!==void 0?t:new Error("Media error")),this.stopAtPosition=null})))}initRendererEvents(){this.subscriptions.push(this.renderer.on("click",((t,i)=>{this.options.interact&&(this.seekTo(t),this.emit("interaction",t*this.getDuration()),this.emit("click",t,i))})),this.renderer.on("dblclick",((t,i)=>{this.emit("dblclick",t,i)})),this.renderer.on("scroll",((t,i,s,n)=>{const r=this.getDuration();this.emit("scroll",t*r,i*r,s,n)})),this.renderer.on("render",(()=>{this.emit("redraw")})),this.renderer.on("rendered",(()=>{this.emit("redrawcomplete")})),this.renderer.on("dragstart",(t=>{this.emit("dragstart",t)})),this.renderer.on("dragend",(t=>{this.emit("dragend",t)})),this.renderer.on("resize",(()=>{this.emit("resize")})));{let t;const i=this.renderer.on("drag",(s=>{var n;if(!this.options.interact)return;this.renderer.renderProgress(s),clearTimeout(t);let r=0;const a=this.options.dragToSeek;this.isPlaying()?r=0:a===!0?r=200:a&&typeof a=="object"&&(r=(n=a.debounceTime)!==null&&n!==void 0?n:200),t=setTimeout((()=>{this.seekTo(s)}),r),this.emit("interaction",s*this.getDuration()),this.emit("drag",s)}));this.subscriptions.push((()=>{clearTimeout(t),i()}))}}initPlugins(){var t;!((t=this.options.plugins)===null||t===void 0)&&t.length&&this.options.plugins.forEach((i=>{this.registerPlugin(i)}))}unsubscribePlayerEvents(){this.mediaSubscriptions.forEach((t=>t())),this.mediaSubscriptions=[]}setOptions(t){this.options=Object.assign({},this.options,t),t.duration&&!t.peaks&&(this.decodedData=mt.createBuffer(this.exportPeaks(),t.duration)),t.peaks&&t.duration&&(this.decodedData=mt.createBuffer(t.peaks,t.duration)),this.renderer.setOptions(this.options),t.audioRate&&this.setPlaybackRate(t.audioRate),t.mediaControls!=null&&(this.getMediaElement().controls=t.mediaControls)}registerPlugin(t){if(this.plugins.includes(t))return t;t._init(this),this.plugins.push(t);const i=t.once("destroy",(()=>{this.plugins=this.plugins.filter((s=>s!==t)),this.subscriptions=this.subscriptions.filter((s=>s!==i))}));return this.subscriptions.push(i),t}unregisterPlugin(t){this.plugins=this.plugins.filter((i=>i!==t)),t.destroy()}getWrapper(){return this.renderer.getWrapper()}getWidth(){return this.renderer.getWidth()}getScroll(){return this.renderer.getScroll()}setScroll(t){return this.renderer.setScroll(t)}setScrollTime(t){const i=t/this.getDuration();this.renderer.setScrollPercentage(i)}getActivePlugins(){return this.plugins}loadAudio(t,i,s,n){return Ce(this,void 0,void 0,(function*(){var r;if(this.emit("load",t),!this.options.media&&this.isPlaying()&&this.pause(),this.decodedData=null,this.stopAtPosition=null,(r=this.abortController)===null||r===void 0||r.abort(),this.abortController=null,!i&&!s){const o=this.options.fetchParams||{};window.AbortController&&!o.signal&&(this.abortController=new AbortController,o.signal=this.abortController.signal);const h=l=>this.emit("loading",l);i=yield Os.fetchBlob(t,h,o);const f=this.options.blobMimeType;f&&(i=new Blob([i],{type:f}))}this.setSrc(t,i);const a=yield new Promise((o=>{const h=n||this.getDuration();h?o(h):this.mediaSubscriptions.push(this.onMediaEvent("loadedmetadata",(()=>o(this.getDuration())),{once:!0}))}));if(!t&&!i){const o=this.getMediaElement();o instanceof Ht&&(o.duration=a)}if(s)this.decodedData=mt.createBuffer(s,a||0);else if(i){const o=yield i.arrayBuffer();this.decodedData=yield mt.decode(o,this.options.sampleRate)}this.decodedData&&(this.emit("decode",this.getDuration()),this.renderer.render(this.decodedData)),this.emit("ready",this.getDuration())}))}load(t,i,s){return Ce(this,void 0,void 0,(function*(){try{return yield this.loadAudio(t,void 0,i,s)}catch(n){throw this.emit("error",n),n}}))}loadBlob(t,i,s){return Ce(this,void 0,void 0,(function*(){try{return yield this.loadAudio("",t,i,s)}catch(n){throw this.emit("error",n),n}}))}zoom(t){if(!this.decodedData)throw new Error("No audio loaded");this.renderer.zoom(t),this.emit("zoom",t)}getDecodedData(){return this.decodedData}exportPeaks({channels:t=2,maxLength:i=8e3,precision:s=1e4}={}){if(!this.decodedData)throw new Error("The audio has not been decoded yet");const n=Math.min(t,this.decodedData.numberOfChannels),r=[];for(let a=0;a<n;a++){const o=this.decodedData.getChannelData(a),h=[],f=o.length/i;for(let l=0;l<i;l++){const u=o.slice(Math.floor(l*f),Math.ceil((l+1)*f));let c=0;for(let d=0;d<u.length;d++){const m=u[d];Math.abs(m)>Math.abs(c)&&(c=m)}h.push(Math.round(c*s)/s)}r.push(h)}return r}getDuration(){let t=super.getDuration()||0;return t!==0&&t!==1/0||!this.decodedData||(t=this.decodedData.duration),t}toggleInteraction(t){this.options.interact=t}setTime(t){this.stopAtPosition=null,super.setTime(t),this.updateProgress(t),this.emit("timeupdate",t)}seekTo(t){const i=this.getDuration()*t;this.setTime(i)}play(t,i){const s=Object.create(null,{play:{get:()=>super.play}});return Ce(this,void 0,void 0,(function*(){t!=null&&this.setTime(t);const n=yield s.play.call(this);return i!=null&&(this.media instanceof Ht?this.media.stopAt(i):this.stopAtPosition=i),n}))}playPause(){return Ce(this,void 0,void 0,(function*(){return this.isPlaying()?this.pause():this.play()}))}stop(){this.pause(),this.setTime(0)}skip(t){this.setTime(this.getCurrentTime()+t)}empty(){this.load("",[[0]],.001)}setMediaElement(t){this.unsubscribePlayerEvents(),super.setMediaElement(t),this.initPlayerEvents()}exportImage(){return Ce(this,arguments,void 0,(function*(t="image/png",i=1,s="dataURL"){return this.renderer.exportImage(t,i,s)}))}destroy(){var t;this.emit("destroy"),(t=this.abortController)===null||t===void 0||t.abort(),this.plugins.forEach((i=>i.destroy())),this.subscriptions.forEach((i=>i())),this.unsubscribePlayerEvents(),this.reactiveCleanups.forEach((i=>i())),this.reactiveCleanups=[],this.timer.destroy(),this.renderer.destroy(),super.destroy()}};vi.BasePlugin=class extends pt{constructor(e){super(),this.subscriptions=[],this.isDestroyed=!1,this.options=e}onInit(){}_init(e){this.isDestroyed&&(this.subscriptions=[],this.isDestroyed=!1),this.wavesurfer=e,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach((e=>e())),this.subscriptions=[],this.isDestroyed=!0,this.wavesurfer=void 0}},vi.dom=Ds;export{Te as i,Is as n,Ns as r,vi as t};

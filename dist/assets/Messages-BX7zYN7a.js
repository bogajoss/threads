const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/VoiceMessage-nA5O8d5h.js","assets/framework-CsA6nn9m.js","assets/rolldown-runtime-BaZ8gS7u.js","assets/framework-sg0yWRLc.css","assets/ui-libs-Dw1mhyv2.js","assets/media-libs-Btb8RX-I.js","assets/media-libs-CqCaMccn.css","assets/VoiceMessage-CN24UrPh.js","assets/index-B5uPPvtO.js","assets/database-BiY55TQY.js","assets/query-QyXblnmD.js","assets/animations-T0TOZv2c.js","assets/index-DeZGUR-9.css"])))=>i.map(i=>d[i]);
import{a as je}from"./rolldown-runtime-BaZ8gS7u.js";import{C as Ce,E as Me,b as ze,c as q,d as Ge}from"./framework-CsA6nn9m.js";import"./database-BiY55TQY.js";import{Bt as fe,Ft as pe,Gn as Te,Ht as be,In as _e,Mt as Re,Ot as Ie,Qt as ue,Sn as Pe,Ut as $e,Wn as Ae,Wt as Oe,Xn as Ee,Xt as ge,Yt as Ue,fn as Le,kt as me,on as Fe,rn as Ne,tn as De,un as He,vn as ke,zt as Ye}from"./ui-libs-Dw1mhyv2.js";import"./media-libs-Btb8RX-I.js";import{a as qe,i as ne}from"./animations-T0TOZv2c.js";import{$ as Ve,B as Be,G as We,P as Xe,Q as Ke,R as Je,at as se,b as Qe,cn as ve,et as le,g as Ze,gt as et,ht as tt,it as ie,ln as U,n as st,nt as it,r as rt,rt as re,t as lt,tt as nt,z as at}from"./index-B5uPPvtO.js";import"./VoiceMessage-CN24UrPh.js";import{t as ct}from"./text-processing-DFvQvkgt.js";import{t as ot}from"./linkify-BIniK2-v.js";import{a as dt,d as xt,f as mt}from"./hooks-CfG2Zc5q.js";var ut=q(),A=je(Me(),1),t=je(Ge(),1),ht=s=>{const e=(0,ut.c)(60),{conv:i,selectedId:n,onSelect:h,onlineUsers:a}=s;let o;e[0]!==i.isGroup||e[1]!==i.user||e[2]!==a?(o=!i.isGroup&&i.user?a.has(i.user.id):!1,e[0]=i.isGroup,e[1]=i.user,e[2]=a,e[3]=o):o=e[3];const m=o,c=n===i.id,x=i.unread>0,f=i.isGroup?i.name:i.user?.name,l=i.isGroup?i.avatar:i.user?.avatar;let j;e[4]!==i||e[5]!==h?(j=()=>h(i),e[4]=i,e[5]=h,e[6]=j):j=e[6];const P=c?"bg-violet-500/10 dark:bg-violet-500/20":"hover:bg-zinc-100 dark:hover:bg-zinc-800/50";let w;e[7]!==P?(w=U("group relative flex cursor-pointer items-center gap-4 p-3 mx-1 md:mx-2 rounded-2xl transition-all duration-200",P),e[7]=P,e[8]=w):w=e[8];const $=c?"border-violet-500/30":"border-transparent group-hover:border-zinc-200 dark:group-hover:border-zinc-700";let z;e[9]!==$?(z=U("size-[52px] border-2 transition-all",$),e[9]=$,e[10]=z):z=e[10];const p=f||"";let M;e[11]!==l||e[12]!==p?(M=(0,t.jsx)(se,{src:l,alt:p,className:"object-cover"}),e[11]=l,e[12]=p,e[13]=M):M=e[13];let k;e[14]!==f?.[0]?(k=f?.[0]?.toUpperCase(),e[14]=f?.[0],e[15]=k):k=e[15];let b;e[16]!==k?(b=(0,t.jsx)(ie,{className:"bg-zinc-100 text-zinc-500 font-bold text-lg dark:bg-zinc-800 dark:text-zinc-400",children:k}),e[16]=k,e[17]=b):b=e[17];let g;e[18]!==b||e[19]!==z||e[20]!==M?(g=(0,t.jsxs)(re,{className:z,children:[M,b]}),e[18]=b,e[19]=z,e[20]=M,e[21]=g):g=e[21];let T;e[22]!==m?(T=m&&(0,t.jsx)("span",{className:"absolute bottom-0.5 right-0.5 size-3.5 rounded-full border-[2.5px] border-white bg-emerald-500 ring-0 dark:border-black"}),e[22]=m,e[23]=T):T=e[23];let _;e[24]!==g||e[25]!==T?(_=(0,t.jsxs)("div",{className:"relative",children:[g,T]}),e[24]=g,e[25]=T,e[26]=_):_=e[26];const O=x?"text-zinc-900 dark:text-white":"text-zinc-700 dark:text-zinc-200";let d;e[27]!==O?(d=U("truncate text-[15px] font-semibold",O),e[27]=O,e[28]=d):d=e[28];let G;e[29]!==f||e[30]!==d?(G=(0,t.jsx)("span",{className:d,children:f}),e[29]=f,e[30]=d,e[31]=G):G=e[31];const y=x?"text-violet-600 dark:text-violet-400":"text-zinc-400";let S;e[32]!==y?(S=U("ml-2 whitespace-nowrap text-[11px] font-medium",y),e[32]=y,e[33]=S):S=e[33];let r;e[34]!==i.time||e[35]!==S?(r=(0,t.jsx)("span",{className:S,children:i.time}),e[34]=i.time,e[35]=S,e[36]=r):r=e[36];let u;e[37]!==G||e[38]!==r?(u=(0,t.jsxs)("div",{className:"flex items-center justify-between mb-0.5",children:[G,r]}),e[37]=G,e[38]=r,e[39]=u):u=e[39];const v=x?"font-semibold text-zinc-900 dark:text-zinc-100":"text-zinc-500 dark:text-zinc-400 group-hover:text-zinc-600 dark:group-hover:text-zinc-300";let R;e[40]!==v?(R=U("truncate whitespace-nowrap text-[13px] leading-relaxed flex-1",v),e[40]=v,e[41]=R):R=e[41];const I=i.currentUserSent?"You: ":"",C=i.lastMessage?.length>27?i.lastMessage.substring(0,27)+"...":i.lastMessage;let N;e[42]!==R||e[43]!==I||e[44]!==C?(N=(0,t.jsxs)("p",{className:R,children:[I,C]}),e[42]=R,e[43]=I,e[44]=C,e[45]=N):N=e[45];let F;e[46]!==i.unread||e[47]!==x?(F=x&&(0,t.jsx)("span",{className:"flex size-5 shrink-0 items-center justify-center rounded-full bg-violet-600 text-[10px] font-bold text-white shadow-sm shadow-violet-500/30",children:i.unread}),e[46]=i.unread,e[47]=x,e[48]=F):F=e[48];let H;e[49]!==N||e[50]!==F?(H=(0,t.jsxs)("div",{className:"flex items-center justify-between gap-2 min-w-0",children:[N,F]}),e[49]=N,e[50]=F,e[51]=H):H=e[51];let D;e[52]!==u||e[53]!==H?(D=(0,t.jsxs)("div",{className:"min-w-0 flex-1 py-1",children:[u,H]}),e[52]=u,e[53]=H,e[54]=D):D=e[54];let Y;return e[55]!==_||e[56]!==j||e[57]!==D||e[58]!==w?(Y=(0,t.jsxs)("div",{onClick:j,className:w,children:[_,D]}),e[55]=_,e[56]=j,e[57]=D,e[58]=w,e[59]=Y):Y=e[59],Y},ft=({conversations:s,userResults:e=[],onSelect:i,onStartNew:n,selectedId:h,searchQuery:a,onSearchChange:o,onlineUsers:m=new Set})=>{const[c,x]=(0,A.useState)(!1),f=s.filter(l=>m.has(l.user?.id));return(0,t.jsxs)("div",{className:"flex min-w-0 flex-1 flex-col overflow-hidden bg-white dark:bg-black h-full",children:[(0,t.jsxs)("div",{className:"px-4 md:px-5 pt-5 pb-2 shrink-0 w-full overflow-hidden",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-5 min-w-0",children:[(0,t.jsx)("h2",{className:"text-2xl font-black tracking-tight text-zinc-900 dark:text-white truncate",children:"Chats"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{onClick:()=>x(!0),className:"rounded-full bg-zinc-100 p-2.5 text-zinc-600 transition-colors hover:bg-zinc-200 dark:bg-zinc-900 dark:text-zinc-400 dark:hover:bg-zinc-800",title:"New Group",children:(0,t.jsx)(Re,{size:20})}),(0,t.jsx)("button",{className:"rounded-full bg-zinc-100 p-2.5 text-zinc-600 transition-colors hover:bg-zinc-200 dark:bg-zinc-900 dark:text-zinc-400 dark:hover:bg-zinc-800",children:(0,t.jsx)($e,{size:20})})]})]}),(0,t.jsxs)("div",{className:"relative group min-w-0",children:[(0,t.jsx)(ge,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-zinc-400 group-focus-within:text-violet-500 transition-colors",size:18}),(0,t.jsx)("input",{type:"text",value:a,onChange:l=>o(l.target.value),placeholder:"Search Messenger",className:"w-full rounded-2xl border-none bg-zinc-100 py-3 pl-12 pr-4 text-base font-medium text-zinc-900 placeholder:text-zinc-500 transition-all focus:bg-white focus:ring-2 focus:ring-violet-500/20 focus:shadow-md dark:bg-zinc-900 dark:text-white dark:focus:bg-black"})]})]}),(0,t.jsx)("div",{className:"flex-1 min-h-0 overflow-hidden",children:(0,t.jsx)(Xe,{className:"h-full min-w-0",children:(0,t.jsxs)("div",{className:"flex flex-col pb-4 min-w-0",children:[!a&&f.length>0&&(0,t.jsx)("div",{className:"mb-4 mt-2 min-w-0 w-full overflow-hidden",children:(0,t.jsxs)("div",{className:"flex gap-4 overflow-x-auto px-4 md:px-5 pb-4 pt-2 no-scrollbar w-full",children:[(0,t.jsxs)("div",{className:"flex flex-col items-center gap-2 min-w-[64px] cursor-pointer group",children:[(0,t.jsxs)("div",{className:"relative flex size-[60px] items-center justify-center rounded-full bg-zinc-50 border border-zinc-200 dark:bg-zinc-900 dark:border-zinc-800 group-hover:bg-zinc-100 dark:group-hover:bg-zinc-800 transition-colors",children:[(0,t.jsx)(pe,{size:24,className:"text-zinc-400"}),(0,t.jsx)("div",{className:"absolute bottom-0 right-0 size-5 bg-white dark:bg-black rounded-full flex items-center justify-center",children:(0,t.jsx)("div",{className:"size-4 bg-zinc-200 dark:bg-zinc-700 rounded-full flex items-center justify-center",children:(0,t.jsx)("span",{className:"text-[10px] text-zinc-500 font-bold",children:"+"})})})]}),(0,t.jsx)("span",{className:"text-[11px] font-medium text-zinc-500",children:"Your Story"})]}),f.map(l=>(0,t.jsxs)("div",{onClick:()=>i(l),className:"flex flex-col items-center gap-2 cursor-pointer group min-w-[64px] transition-transform active:scale-95",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"absolute -inset-[3px] rounded-full bg-gradient-to-tr from-violet-500 via-fuchsia-500 to-orange-500 opacity-90 p-[2px]"}),(0,t.jsx)("div",{className:"relative rounded-full border-[3px] border-white dark:border-black p-[2px] bg-white dark:bg-black",children:(0,t.jsxs)(re,{className:"size-[50px]",children:[(0,t.jsx)(se,{src:l.user?.avatar,className:"object-cover"}),(0,t.jsx)(ie,{children:l.user?.name?.[0]})]})}),(0,t.jsx)("span",{className:"absolute bottom-1 right-1 size-3.5 rounded-full border-[2.5px] border-white bg-emerald-500 dark:border-black"})]}),(0,t.jsx)("span",{className:"w-full truncate text-center text-[11px] font-medium text-zinc-600 dark:text-zinc-400 group-hover:text-zinc-900 dark:group-hover:text-white transition-colors",children:l.user?.name.split(" ")[0]})]},l.id))]})}),(0,t.jsx)("div",{className:"px-2 space-y-1",children:s.length>0&&s.filter(l=>l.lastMessage!=="No messages yet"||l.id===h||a).map(l=>(0,t.jsx)(ht,{conv:l,selectedId:h,onSelect:i,onlineUsers:m},l.id))}),e.length>0&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"px-6 py-3 mt-2 text-xs font-bold uppercase tracking-wider text-zinc-400",children:"More People"}),(0,t.jsx)("div",{className:"px-2 space-y-1",children:e.map(l=>(0,t.jsxs)("div",{onClick:()=>n(l),className:"flex cursor-pointer items-center gap-4 px-3 py-2 rounded-2xl transition-colors hover:bg-zinc-100 dark:hover:bg-zinc-800/50",children:[(0,t.jsxs)(re,{className:"size-10",children:[(0,t.jsx)(se,{src:l.avatar,className:"object-cover"}),(0,t.jsx)(ie,{children:l.name?.[0]?.toUpperCase()})]}),(0,t.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,t.jsx)("div",{className:"truncate text-sm font-bold text-zinc-900 dark:text-white",children:l.name}),(0,t.jsxs)("div",{className:"truncate text-xs text-zinc-500",children:["@",l.handle]})]}),(0,t.jsx)("button",{className:"flex size-8 items-center justify-center rounded-full bg-violet-50 text-violet-600 dark:bg-violet-900/20 dark:text-violet-400",children:(0,t.jsx)(pe,{size:16})})]},l.id))})]}),s.length===0&&e.length===0&&a&&(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center px-6",children:[(0,t.jsx)("div",{className:"mb-4 rounded-full bg-zinc-100 p-4 dark:bg-zinc-900",children:(0,t.jsx)(ge,{className:"text-zinc-400",size:24})}),(0,t.jsxs)("p",{className:"text-zinc-500",children:['No results found for "',a,'"']})]})]})})}),(0,t.jsx)(rt,{isOpen:c,onClose:()=>x(!1),onCreated:l=>{i({id:l,isGroup:!0})}})]})},pt=ft,bt=q(),gt=s=>{const e=(0,bt.c)(51),{conversation:i,isOnline:n,onBack:h,onOpenSettings:a}=s,o=ze(),m=mt(i.user?.lastSeen),c=i.isGroup?i.name:i.user?.name,x=i.isGroup?i.avatar:i.user?.avatar;let f;e[0]===Symbol.for("react.memo_cache_sentinel")?(f=(0,t.jsx)(Ee,{size:24}),e[0]=f):f=e[0];let l;e[1]!==h?(l=(0,t.jsx)("button",{onClick:h,className:"mr-1 -ml-2.5 rounded-full p-2.5 text-zinc-600 transition-colors hover:bg-zinc-100 dark:text-zinc-300 dark:hover:bg-zinc-800 md:hidden",children:f}),e[1]=h,e[2]=l):l=e[2];let j;e[3]!==i.isGroup||e[4]!==i.user||e[5]!==o?(j=()=>!i.isGroup&&i.user&&o(`/u/${i.user.handle}`),e[3]=i.isGroup,e[4]=i.user,e[5]=o,e[6]=j):j=e[6];const P=c||"";let w;e[7]!==x||e[8]!==P?(w=(0,t.jsx)(se,{src:x,alt:P,className:"object-cover"}),e[7]=x,e[8]=P,e[9]=w):w=e[9];let $;e[10]!==c?.[0]?($=c?.[0]?.toUpperCase(),e[10]=c?.[0],e[11]=$):$=e[11];let z;e[12]!==$?(z=(0,t.jsx)(ie,{children:$}),e[12]=$,e[13]=z):z=e[13];let p;e[14]!==w||e[15]!==z?(p=(0,t.jsxs)(re,{className:"size-10 border-2 border-white shadow-sm dark:border-zinc-800",children:[w,z]}),e[14]=w,e[15]=z,e[16]=p):p=e[16];let M;e[17]!==i.isGroup||e[18]!==n?(M=n&&!i.isGroup&&(0,t.jsx)("span",{className:"absolute bottom-0 right-0 size-3 rounded-full border-2 border-white bg-emerald-500 dark:border-black"}),e[17]=i.isGroup,e[18]=n,e[19]=M):M=e[19];let k;e[20]!==j||e[21]!==p||e[22]!==M?(k=(0,t.jsxs)("div",{className:"relative cursor-pointer",onClick:j,children:[p,M]}),e[20]=j,e[21]=p,e[22]=M,e[23]=k):k=e[23];let b;e[24]!==i.isGroup||e[25]!==i.user||e[26]!==o?(b=()=>!i.isGroup&&i.user&&o(`/u/${i.user.handle}`),e[24]=i.isGroup,e[25]=i.user,e[26]=o,e[27]=b):b=e[27];let g;e[28]!==c?(g=(0,t.jsx)("h3",{className:"text-sm font-bold text-zinc-900 dark:text-white",children:c}),e[28]=c,e[29]=g):g=e[29];let T;e[30]!==i.isGroup||e[31]!==i.user?.lastSeen||e[32]!==n||e[33]!==m?(T=i.isGroup?"Group Chat":n?(0,t.jsx)("span",{className:"text-emerald-500",children:"Active now"}):i.user?.lastSeen?`Last seen ${m}`:"Offline",e[30]=i.isGroup,e[31]=i.user?.lastSeen,e[32]=n,e[33]=m,e[34]=T):T=e[34];let _;e[35]!==T?(_=(0,t.jsx)("span",{className:"text-[11px] font-medium text-zinc-500",children:T}),e[35]=T,e[36]=_):_=e[36];let O;e[37]!==b||e[38]!==g||e[39]!==_?(O=(0,t.jsxs)("div",{className:"flex flex-col cursor-pointer",onClick:b,children:[g,_]}),e[37]=b,e[38]=g,e[39]=_,e[40]=O):O=e[40];let d;e[41]!==k||e[42]!==O||e[43]!==l?(d=(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[l,k,O]}),e[41]=k,e[42]=O,e[43]=l,e[44]=d):d=e[44];let G;e[45]===Symbol.for("react.memo_cache_sentinel")?(G=(0,t.jsx)(Pe,{size:20}),e[45]=G):G=e[45];let y;e[46]!==a?(y=(0,t.jsx)("div",{className:"flex items-center gap-1",children:(0,t.jsx)("button",{onClick:a,className:"rounded-full p-2.5 text-zinc-400 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors",children:G})}),e[46]=a,e[47]=y):y=e[47];let S;return e[48]!==d||e[49]!==y?(S=(0,t.jsxs)("div",{className:"sticky top-0 z-30 flex shrink-0 items-center justify-between border-b border-zinc-100 bg-white/75 px-4 py-3 backdrop-blur-xl dark:border-zinc-800 dark:bg-black/75",children:[d,y]}),e[48]=d,e[49]=y,e[50]=S):S=e[50],S},vt=gt,jt=q();const zt=(s,e,i)=>{const n=(0,jt.c)(7),h=e===void 0?40:e,a=i===void 0?120:i,o=(0,A.useRef)(null);let m;n[0]!==a||n[1]!==h?(m=()=>{const x=o.current;if(x){x.style.height="auto";const f=x.scrollHeight;x.style.height=`${Math.min(Math.max(f,h),a)}px`}},n[0]=a,n[1]=h,n[2]=m):m=n[2];let c;return n[3]!==a||n[4]!==h||n[5]!==s?(c=[s,h,a],n[3]=a,n[4]=h,n[5]=s,n[6]=c):c=n[6],(0,A.useEffect)(m,c),o};var Nt=q(),kt=s=>{const e=(0,Nt.c)(71),{onSendMessage:i,onTyping:n,replyingTo:h,setReplyingTo:a,editingMessage:o,setEditingMessage:m}=s,[c,x]=(0,A.useState)("");let f;e[0]===Symbol.for("react.memo_cache_sentinel")?(f=[],e[0]=f):f=e[0];const[l,j]=(0,A.useState)(f),[P,w]=(0,A.useState)(!1),$=(0,A.useRef)(null),z=(0,A.useRef)(null),p=zt(c);let M,k;e[1]!==o||e[2]!==a||e[3]!==p?(M=()=>{o&&(x(o.text),a(null),p.current&&p.current.focus())},k=[o,a,p],e[1]=o,e[2]=a,e[3]=p,e[4]=M,e[5]=k):(M=e[4],k=e[5]),A.useEffect(M,k);const{isRecording:b,recordingTime:g,startRecording:T,stopRecording:_,cancelRecording:O,audioBlob:d,audioUrl:G,clearAudio:y}=xt(),[S,r]=(0,A.useState)(!1),u=(0,A.useRef)(null),v=yt;let R;e[6]!==n?(R=E=>{const L=E.target.value;x(L),n&&(n(!0),z.current&&clearTimeout(z.current),z.current=setTimeout(()=>{n(!1)},2e3))},e[6]=n,e[7]=R):R=e[7];const I=R;let C;e[8]!==l||e[9]!==d||e[10]!==y||e[11]!==i||e[12]!==n||e[13]!==g||e[14]!==a||e[15]!==c||e[16]!==p?(C=E=>{if(E&&E.preventDefault(),d){i("",[],d,g),y();return}!c.trim()&&l.length===0||(n&&(z.current&&clearTimeout(z.current),n(!1)),i(c,l),x(""),j([]),a(null),setTimeout(()=>{p.current?.focus()},10))},e[8]=l,e[9]=d,e[10]=y,e[11]=i,e[12]=n,e[13]=g,e[14]=a,e[15]=c,e[16]=p,e[17]=C):C=e[17];const N=C;let F;e[18]!==G||e[19]!==S?(F=()=>{G&&(u.current||(u.current=new Audio(G),u.current.onended=()=>r(!1)),S?u.current.pause():u.current.play(),r(!S))},e[18]=G,e[19]=S,e[20]=F):F=e[20];const H=F;let D,Y;e[21]!==d?(D=()=>{!d&&u.current&&(u.current.pause(),u.current=null,r(!1))},Y=[d],e[21]=d,e[22]=D,e[23]=Y):(D=e[22],Y=e[23]),A.useEffect(D,Y);let ae;e[24]===Symbol.for("react.memo_cache_sentinel")?(ae=E=>{if(!E.target.files)return;const L=Array.from(E.target.files);j(te=>[...te,...L])},e[24]=ae):ae=e[24];const we=ae;let ce;e[25]===Symbol.for("react.memo_cache_sentinel")?(ce=E=>{const L=E.clipboardData.files;if(L&&L.length>0){const te=Array.from(L).filter(St);te.length>0&&(E.preventDefault(),j(he=>[...he,...te]))}},e[25]=ce):ce=e[25];const ye=ce;let V;e[26]!==h||e[27]!==a?(V=h&&(0,t.jsxs)(ne.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"flex items-center justify-between mb-2 px-4 py-2 bg-zinc-50 dark:bg-zinc-900 rounded-xl border border-zinc-100 dark:border-zinc-800",children:[(0,t.jsxs)("div",{className:"text-sm flex items-center gap-2",children:[(0,t.jsx)(ue,{size:14,className:"text-violet-500"}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("span",{className:"text-xs font-bold text-violet-500 block mb-0.5",children:["Replying to"," ",h.sender==="me"?"yourself":h.senderName]}),(0,t.jsx)("p",{className:"line-clamp-1 text-zinc-500",children:h.text})]})]}),(0,t.jsx)("button",{onClick:()=>a(null),children:(0,t.jsx)(me,{size:16,className:"text-zinc-400"})})]}),e[26]=h,e[27]=a,e[28]=V):V=e[28];let B;e[29]!==o||e[30]!==m?(B=o&&(0,t.jsxs)(ne.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"flex items-center justify-between mb-2 px-4 py-2 bg-zinc-50 dark:bg-zinc-900 rounded-xl border border-zinc-100 dark:border-zinc-800",children:[(0,t.jsxs)("div",{className:"text-sm flex items-center gap-2",children:[(0,t.jsx)(Ne,{size:14,className:"text-violet-500"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-xs font-bold text-violet-500 block mb-0.5",children:"Edit Message"}),(0,t.jsx)("p",{className:"line-clamp-1 text-zinc-500",children:o.text})]})]}),(0,t.jsx)("button",{onClick:()=>{m(null),x("")},children:(0,t.jsx)(me,{size:16,className:"text-zinc-400"})})]}),e[29]=o,e[30]=m,e[31]=B):B=e[31];let W;e[32]!==V||e[33]!==B?(W=(0,t.jsxs)(qe,{children:[V,B]}),e[32]=V,e[33]=B,e[34]=W):W=e[34];let X;e[35]!==l?(X=l.length>0&&(0,t.jsx)("div",{className:"flex gap-2 mb-2 px-1",children:l.map((E,L)=>(0,t.jsxs)("div",{className:"relative size-16 rounded-lg overflow-hidden border border-zinc-200",children:[(0,t.jsx)("img",{src:URL.createObjectURL(E),className:"size-full object-cover"}),(0,t.jsx)("button",{onClick:()=>j(te=>te.filter((he,Se)=>Se!==L)),className:"absolute top-0 right-0 bg-black/50 text-white p-0.5",children:(0,t.jsx)(me,{size:12})})]},L))}),e[35]=l,e[36]=X):X=e[36];const xe=b?"bg-zinc-900 border-zinc-800 shadow-2xl scale-[1.02] ring-4 ring-red-500/10":d?"bg-violet-50 dark:bg-violet-900/20 border-violet-200 dark:border-violet-800 shadow-sm":"bg-zinc-100 dark:bg-zinc-900 border-transparent focus-within:ring-2 focus-within:ring-violet-500/20 focus-within:bg-white dark:focus-within:bg-zinc-900 focus-within:border-violet-200 dark:focus-within:border-violet-900";let K;e[37]!==xe?(K=U("flex-1 flex items-center gap-2 rounded-[28px] px-2 py-2 transition-all duration-300 overflow-hidden border",xe),e[37]=xe,e[38]=K):K=e[38];let J;e[39]!==d||e[40]!==O||e[41]!==y||e[42]!==N||e[43]!==I||e[44]!==P||e[45]!==S||e[46]!==b||e[47]!==g||e[48]!==c||e[49]!==p||e[50]!==H?(J=b?(0,t.jsxs)("div",{className:"flex-1 flex items-center gap-4 px-3 py-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2.5 bg-red-500/10 px-3 py-1.5 rounded-full border border-red-500/20",children:[(0,t.jsx)(ne.div,{animate:{scale:[1,1.2,1]},transition:{repeat:1/0,duration:1.5},className:"size-2.5 rounded-full bg-red-500 shadow-[0_0_8px_rgba(239,68,68,0.5)]"}),(0,t.jsx)("span",{className:"text-sm font-bold tabular-nums text-red-500",children:v(g)})]}),(0,t.jsx)("div",{className:"flex-1 h-6 flex items-center justify-center gap-1 opacity-80",children:(0,t.jsx)("div",{className:"w-full h-1 bg-white/20 rounded-full overflow-hidden",children:(0,t.jsx)(ne.div,{animate:{x:["-100%","100%"]},transition:{repeat:1/0,duration:1,ease:"linear"},className:"w-1/2 h-full bg-white/40"})})}),(0,t.jsx)("button",{type:"button",onClick:O,className:"p-2 text-zinc-400 hover:text-white transition-colors hover:bg-white/10 rounded-full",children:(0,t.jsx)(fe,{size:20})})]}):d?(0,t.jsxs)("div",{className:"flex-1 flex items-center gap-3 px-2 py-1",children:[(0,t.jsx)("button",{type:"button",onClick:H,className:"size-9 flex shrink-0 items-center justify-center rounded-full bg-violet-500 text-white hover:bg-violet-600 transition-colors",children:S?(0,t.jsx)(be,{size:14,fill:"currentColor"}):(0,t.jsx)(De,{size:18,fill:"currentColor",className:"ml-0.5"})}),(0,t.jsxs)("div",{className:"flex-1 flex flex-col justify-center",children:[(0,t.jsx)("div",{className:"text-xs font-bold text-violet-600 dark:text-violet-400",children:"Voice Message Preview"}),(0,t.jsx)("div",{className:"text-[11px] font-medium text-zinc-500 tabular-nums",children:v(g)})]}),(0,t.jsx)("button",{type:"button",onClick:y,className:"p-2 text-zinc-400 hover:text-red-500 transition-colors rounded-full hover:bg-red-50 dark:hover:bg-red-950/30",children:(0,t.jsx)(fe,{size:20})})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex items-center gap-0.5 ml-1",children:[(0,t.jsxs)(Je,{open:P,onOpenChange:w,children:[(0,t.jsx)(Be,{asChild:!0,children:(0,t.jsx)("button",{type:"button",className:"p-2 text-zinc-400 hover:text-yellow-500 transition-colors",children:(0,t.jsx)(Oe,{size:22})})}),(0,t.jsx)(at,{className:"w-full p-0 border-none bg-transparent shadow-none",side:"top",align:"start",children:(0,t.jsx)(We,{onEmojiSelect:E=>x(L=>L+E.emoji)})})]}),(0,t.jsx)("button",{type:"button",className:"p-2 text-zinc-400 hover:text-violet-600 transition-colors rounded-full hover:bg-zinc-200/50 dark:hover:bg-zinc-800",onClick:()=>$.current?.click(),children:(0,t.jsx)(Ze,{size:22})}),(0,t.jsx)("button",{type:"button",className:"hidden sm:block p-2 text-zinc-400 hover:text-violet-600 transition-colors rounded-full hover:bg-zinc-200/50 dark:hover:bg-zinc-800",children:(0,t.jsx)(Fe,{size:20})})]}),(0,t.jsx)("textarea",{ref:p,value:c,onChange:I,onKeyDown:E=>{E.key==="Enter"&&!E.shiftKey&&(E.preventDefault(),N())},onPaste:ye,placeholder:"Message...",className:"flex-1 bg-transparent border-none outline-none text-base resize-none py-2.5 min-h-[40px] text-zinc-900 dark:text-white placeholder:text-zinc-500",rows:1})]}),e[39]=d,e[40]=O,e[41]=y,e[42]=N,e[43]=I,e[44]=P,e[45]=S,e[46]=b,e[47]=g,e[48]=c,e[49]=p,e[50]=H,e[51]=J):J=e[51];let Q;e[52]!==l.length||e[53]!==d||e[54]!==b||e[55]!==T||e[56]!==_||e[57]!==c?(Q=c.trim()||l.length>0||d?(0,t.jsx)("button",{type:"submit",className:"p-2 mr-1 rounded-full bg-violet-600 text-white hover:bg-violet-700 hover:scale-105 transition-all shadow-sm",children:(0,t.jsx)(Ue,{size:18,className:"translate-x-0.5 translate-y-0.5"})}):b?(0,t.jsx)("button",{type:"button",onClick:_,className:"p-2.5 mr-1 rounded-full bg-red-500 text-white hover:bg-red-600 transition-all shadow-[0_0_15px_rgba(239,68,68,0.4)] hover:scale-110 active:scale-95",children:(0,t.jsx)(be,{size:16,fill:"currentColor"})}):(0,t.jsx)("button",{type:"button",onClick:T,className:"p-2 mr-1 text-zinc-400 hover:text-violet-600 dark:hover:text-violet-400 transition-colors",children:(0,t.jsx)(He,{size:22})}),e[52]=l.length,e[53]=d,e[54]=b,e[55]=T,e[56]=_,e[57]=c,e[58]=Q):Q=e[58];let Z;e[59]!==N||e[60]!==K||e[61]!==J||e[62]!==Q?(Z=(0,t.jsxs)("form",{className:K,onSubmit:N,children:[J,Q]}),e[59]=N,e[60]=K,e[61]=J,e[62]=Q,e[63]=Z):Z=e[63];let oe;e[64]===Symbol.for("react.memo_cache_sentinel")?(oe=(0,t.jsx)("input",{type:"file",ref:$,onChange:we,className:"hidden",multiple:!0,accept:"image/*,video/*"}),e[64]=oe):oe=e[64];let ee;e[65]!==Z?(ee=(0,t.jsxs)("div",{className:"flex items-end gap-2",children:[Z,oe]}),e[65]=Z,e[66]=ee):ee=e[66];let de;return e[67]!==W||e[68]!==X||e[69]!==ee?(de=(0,t.jsxs)("div",{className:"shrink-0 p-3 md:p-4 bg-white dark:bg-black border-t border-zinc-100 dark:border-zinc-800",children:[W,X,ee]}),e[67]=W,e[68]=X,e[69]=ee,e[70]=de):de=e[70],de},wt=kt;function yt(s){return`${Math.floor(s/60)}:${(s%60).toString().padStart(2,"0")}`}function St(s){return s.type.startsWith("image/")}var Vt=q(),Ct=q(),Mt=s=>{const e=(0,Ct.c)(10),{reactions:i,currentUser:n,onToggle:h}=s;let a;e[0]!==i?(a=i===void 0?[]:i,e[0]=i,e[1]=a):a=e[1];const o=a;let m;e[2]!==n?.id||e[3]!==o?(m={},o.forEach(l=>{m[l.emoji]||(m[l.emoji]={count:0,me:!1}),m[l.emoji].count=m[l.emoji].count+1,l.user_id===n?.id&&(m[l.emoji].me=!0)}),e[2]=n?.id,e[3]=o,e[4]=m):m=e[4];const c=m;if(o.length===0)return null;let x;e[5]!==c?(x=Object.entries(c),e[5]=c,e[6]=x):x=e[6];let f;return e[7]!==h||e[8]!==x?(f=(0,t.jsx)("div",{className:"flex flex-wrap gap-1",children:x.map(l=>{const[j,P]=l;return(0,t.jsxs)("button",{onClick:w=>{w.stopPropagation(),h(j)},className:U("pointer-events-auto flex items-center gap-1 rounded-full border px-1.5 py-0.5 text-[11px] font-bold shadow-sm transition-all hover:scale-110 active:scale-90",P.me?"bg-violet-50 border-violet-200 text-violet-600 dark:bg-violet-900/30 dark:border-violet-800 dark:text-violet-400":"bg-white border-zinc-100 text-zinc-700 dark:bg-zinc-800 dark:border-zinc-700 dark:text-zinc-300"),children:[(0,t.jsx)("span",{className:"leading-none",children:j}),P.count>1&&(0,t.jsx)("span",{className:"text-[10px] leading-none opacity-80",children:P.count})]},j)})}),e[7]=h,e[8]=x,e[9]=f):f=e[9],f},Gt=Mt,Tt=A.lazy(()=>Ce(()=>import("./VoiceMessage-nA5O8d5h.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12]))),_t=({conversation:s,messages:e,currentUser:i,onBack:n,onSendMessage:h,onEditMessage:a,onDeleteMessage:o,onToggleReaction:m,onTyping:c,isLoading:x,isTyping:f,isOnline:l})=>{const j=ze(),{openLightbox:P}=et(),[w,$]=(0,A.useState)(null),[z,p]=(0,A.useState)(null),[M,k]=(0,A.useState)(!1),b=(0,A.useRef)(null),g=s.isGroup?s.name:s.user?.name,T=s.isGroup?s.avatar:s.user?.avatar;(0,A.useEffect)(()=>{b.current&&(b.current.scrollTop=b.current.scrollHeight)},[e,f,w,z]);const _=async(r,u,v,R)=>{if(z){a?.(z.id,r),p(null);return}if(v&&R){try{const N=await ve(new File([v],`voice-message-${Date.now()}.webm`,{type:v.type}));h(s.id,"Voice message","voice",[{url:N.url,duration:R}],w?.id)}catch(N){console.error("Failed to send voice message:",N)}return}let I=[];if(u.length>0)try{I=await Promise.all(u.map(N=>ve(N)))}catch(N){console.error("Upload failed:",N);return}const C=I.length>0?I[0].type==="video"?"video":"image":"text";h(s.id,r,C,I,w?.id),$(null)},O=r=>{!r.media||r.media.length===0||P(r.media.map(u=>u.url),0)},d=(0,A.useMemo)(()=>{const r=e.filter(u=>u.sender==="me");return r.length>0?r[r.length-1].id:null},[e]),G=r=>e.find(u=>u.id===r),y=(r,u)=>r===0?!1:e[r-1].sender===u.sender,S=(r,u)=>r===e.length-1?!1:e[r+1].sender===u.sender;return(0,t.jsxs)("div",{className:"relative flex h-full w-full flex-col overflow-hidden bg-white/50 dark:bg-black/50 md:border-l md:border-zinc-200/50 dark:md:border-zinc-800/50",children:[(0,t.jsx)(vt,{conversation:s,isOnline:l,onBack:n,onOpenSettings:()=>k(!0)}),(0,t.jsx)("div",{className:"flex-1 min-h-0 overflow-hidden",children:(0,t.jsx)("div",{className:"h-full overflow-y-auto px-3 md:px-4 py-4",ref:b,children:(0,t.jsxs)("div",{className:"flex flex-col min-h-full justify-end",children:[e.length<5&&(0,t.jsxs)("div",{className:"py-12 flex flex-col items-center justify-center opacity-80 mb-auto",children:[(0,t.jsxs)(re,{className:"size-24 border-4 border-zinc-100 dark:border-zinc-800 mb-4 bg-zinc-50 dark:bg-zinc-900",children:[(0,t.jsx)(se,{src:T,className:"object-cover"}),(0,t.jsx)(ie,{className:"text-4xl",children:g?.[0]})]}),(0,t.jsx)("h2",{className:"text-xl font-bold dark:text-white",children:g}),(0,t.jsx)("p",{className:"text-zinc-500 text-sm mb-4",children:s.isGroup?"Group chat on Sysm":"You're friends on Sysm"}),!s.isGroup&&s.user?.handle&&(0,t.jsx)(tt,{variant:"outline",className:"rounded-full h-8 text-xs",onClick:()=>j(`/u/${s.user.handle}`),children:"View Profile"})]}),x&&e.length===0?(0,t.jsx)("div",{className:"flex justify-center p-8",children:(0,t.jsx)(ke,{className:"animate-spin text-violet-500",size:32})}):(0,t.jsx)("div",{className:"space-y-[2px]",children:e.map((r,u)=>{const v=r.sender==="me",R=y(u,r),I=S(u,r);return(0,t.jsx)(ne.div,{id:`msg-${r.id}`,initial:{opacity:0,y:10,scale:.95},animate:{opacity:1,y:0,scale:1},className:U("flex w-full",v?"justify-end":"justify-start",!I&&"mb-4"),children:(0,t.jsxs)("div",{className:U("flex max-w-[75%] md:max-w-[65%] items-end gap-2 group",v?"flex-row-reverse":"flex-row"),children:[!v&&(0,t.jsx)("div",{className:"w-7 shrink-0",children:I?null:(0,t.jsxs)(re,{className:"size-7 border border-zinc-100 shadow-sm dark:border-zinc-800",children:[(0,t.jsx)(se,{src:r.senderAvatar||T}),(0,t.jsx)(ie,{children:(r.senderName||g)?.[0]})]})}),(0,t.jsxs)("div",{className:U("relative flex flex-col",v?"items-end":"items-start"),children:[(0,t.jsxs)(Ke,{children:[(0,t.jsx)(it,{onClick:C=>{const N=new MouseEvent("contextmenu",{bubbles:!0,cancelable:!0,view:window,button:2,buttons:2,clientX:C.clientX,clientY:C.clientY});C.currentTarget.dispatchEvent(N)},children:(0,t.jsxs)("div",{className:U("relative px-4 py-2.5 shadow-sm text-[15px] leading-[1.4]",v?"bg-gradient-to-br from-violet-600 to-indigo-600 text-white":"bg-white text-zinc-900 dark:bg-zinc-800 dark:text-white border border-zinc-200/50 dark:border-zinc-700/50",!I&&!R&&"rounded-[22px]",v&&!I&&R&&"rounded-[22px] rounded-tr-md",v&&I&&!R&&"rounded-[22px] rounded-br-md",v&&I&&R&&"rounded-[22px] rounded-r-md",!v&&!I&&R&&"rounded-[22px] rounded-tl-md",!v&&I&&!R&&"rounded-[22px] rounded-bl-md",!v&&I&&R&&"rounded-[22px] rounded-l-md"),children:[r.replyToId&&(0,t.jsxs)("div",{className:U("mb-1.5 -mx-1 px-3 py-1.5 rounded-xl text-xs border-l-2 cursor-pointer",v?"bg-black/10 border-white/40 text-white/90":"bg-zinc-100 border-zinc-300 text-zinc-600 dark:bg-zinc-700 dark:border-zinc-500 dark:text-zinc-300"),onClick:C=>{C.stopPropagation();const N=document.getElementById(`msg-${r.replyToId}`);N&&N.scrollIntoView({behavior:"smooth",block:"center"})},children:[(0,t.jsxs)("div",{className:"flex items-center gap-1.5 mb-0.5 opacity-75",children:[(0,t.jsx)(ue,{size:10}),(0,t.jsx)("span",{className:"font-bold",children:"Reply"})]}),(0,t.jsx)("div",{className:"truncate opacity-90",children:G(r.replyToId)?.text||"Attachment"})]}),r.media?.length>0&&r.type!=="voice"&&(0,t.jsx)("div",{className:"grid gap-1 mb-1 overflow-hidden rounded-lg",children:r.media.map((C,N)=>(0,t.jsx)(A.Fragment,{children:r.type==="video"?(0,t.jsx)("video",{src:C.url,controls:!0,className:"max-h-64 w-full rounded-md bg-black",poster:C.poster,playsInline:!0}):(0,t.jsx)("img",{src:C.url,className:"max-h-64 object-cover w-full rounded-md cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>O(r)})},N))}),r.type==="voice"?(0,t.jsx)(A.Suspense,{fallback:(0,t.jsxs)("div",{className:"flex h-[44px] w-[200px] items-center gap-2 py-1 px-1 opacity-50",children:[(0,t.jsx)("div",{className:"size-9 shrink-0 rounded-full bg-zinc-200 animate-pulse dark:bg-zinc-700"}),(0,t.jsx)("div",{className:"flex-1 h-3 bg-zinc-200 animate-pulse dark:bg-zinc-700 rounded-sm"})]}),children:(0,t.jsx)(Tt,{url:r.media?.[0]?.url||r.text,duration:r.media?.[0]?.duration,isMe:v})}):(0,t.jsx)("div",{className:"whitespace-pre-wrap break-words",children:(0,t.jsx)(ct,{options:{...ot,className:v?"text-white underline":"text-violet-600 dark:text-violet-400 underline"},children:r.text})}),(0,t.jsxs)("div",{className:U("flex justify-end items-center gap-1 mt-0.5 select-none",v?"text-white/70":"text-zinc-400"),children:[(0,t.jsx)("span",{className:"text-[9px] font-medium",children:r.time}),v&&r.id===d&&(r.isRead?(0,t.jsx)(Te,{size:12,className:"text-white"}):(0,t.jsx)(Ae,{size:12,className:"text-white/60"}))]})]})}),(0,t.jsxs)(Ve,{className:"w-48",children:[(0,t.jsx)("div",{className:"flex items-center justify-between p-1 border-b border-zinc-100 dark:border-zinc-800 mb-1",children:["â¤ï¸","ðŸ˜‚","ðŸ˜®","ðŸ˜¢","ðŸ™","ðŸ‘"].map(C=>(0,t.jsx)(le,{onSelect:()=>m?.(r.id,C),className:"flex-1 justify-center p-2 text-lg hover:scale-125 transition-transform active:scale-90 focus:bg-transparent cursor-pointer",children:C},C))}),(0,t.jsxs)(le,{onSelect:()=>{navigator.clipboard.writeText(r.text)},children:[(0,t.jsx)(_e,{size:14,className:"mr-2"})," Copy"]}),(0,t.jsxs)(le,{onSelect:()=>$(r),children:[(0,t.jsx)(ue,{size:14,className:"mr-2"})," Reply"]}),v&&(0,t.jsxs)(le,{onSelect:()=>p(r),children:[(0,t.jsx)(Ne,{size:14,className:"mr-2"})," Edit"]}),(0,t.jsx)(nt,{}),(0,t.jsxs)(le,{onSelect:()=>o&&o(r.id),className:"text-red-500 focus:text-red-500 focus:bg-red-50 dark:focus:bg-red-950/30 cursor-pointer",children:[(0,t.jsx)(Ye,{size:14,className:"mr-2"})," Delete"]})]})]}),r.reactions&&r.reactions.length>0&&(0,t.jsx)("div",{className:U("mt-1 flex",v?"justify-end":"justify-start"),children:(0,t.jsx)(Gt,{reactions:r.reactions,currentUser:i,onToggle:C=>m?.(r.id,C)})})]})]})},r.id)})}),f&&(0,t.jsx)("div",{className:"flex items-center gap-2 mt-2 ml-9",children:(0,t.jsx)("div",{className:"bg-zinc-100 dark:bg-zinc-800 px-4 py-2.5 rounded-[22px] rounded-tl-md",children:(0,t.jsx)(Qe,{})})})]})})}),(0,t.jsx)(wt,{onSendMessage:_,onTyping:c,replyingTo:w,setReplyingTo:$,editingMessage:z,setEditingMessage:p}),s.isGroup?(0,t.jsx)(st,{isOpen:M,onClose:()=>k(!1),conversation:s,onUpdate:()=>{k(!1)}}):(0,t.jsx)(lt,{isOpen:M,onClose:()=>k(!1),user:s.user,conversationId:s.id})]})},Rt=_t,It=q(),Pt=()=>{const s=(0,It.c)(32),{id:e,currentUser:i,onlineUsers:n,msgSearchQuery:h,setMsgSearchQuery:a,userSearchResults:o,filteredConversations:m,selectedConversation:c,localMessages:x,isConvLoading:f,isMsgLoading:l,currentIsTyping:j,otherUserIsOnline:P,handleStartConversation:w,handleSelectConversation:$,sendMessage:z,editMessage:p,onDeleteMessage:M,onToggleReaction:k,sendTypingStatus:b,navigate:g}=dt();if(!i){let r;s[0]===Symbol.for("react.memo_cache_sentinel")?(r=(0,t.jsx)("div",{className:"rounded-3xl bg-zinc-50 p-6 dark:bg-zinc-900",children:(0,t.jsx)(Ie,{size:48,className:"text-zinc-300 dark:text-zinc-600"})}),s[0]=r):r=s[0];let u;return s[1]===Symbol.for("react.memo_cache_sentinel")?(u=(0,t.jsxs)("div",{className:"flex h-[100dvh] flex-col items-center justify-center gap-6 border-zinc-100 bg-white p-8 text-center dark:border-zinc-800 dark:bg-black md:h-[calc(100vh-1.5rem)] md:rounded-2xl md:border",children:[r,(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h3",{className:"text-2xl font-black tracking-tight dark:text-white",children:"Sign in to message"}),(0,t.jsx)("p",{className:"max-w-xs text-zinc-500 font-medium",children:"Join the conversation. Sign up or log in to start chatting."})]})]}),s[1]=u):u=s[1],u}if(f){let r;return s[2]===Symbol.for("react.memo_cache_sentinel")?(r=(0,t.jsx)("div",{className:"flex h-[100dvh] items-center justify-center border-zinc-100 bg-white dark:border-zinc-800 dark:bg-black md:h-[calc(100vh-1.5rem)] md:rounded-2xl md:border",children:(0,t.jsx)(ke,{className:"animate-spin text-violet-500",size:32})}),s[2]=r):r=s[2],r}const T=`flex ${e?"h-[100dvh]":"h-[calc(100dvh-4rem)]"} w-full max-w-full box-border overscroll-none overflow-x-hidden overflow-y-hidden bg-white shadow-2xl shadow-zinc-200/50 dark:border-zinc-800 dark:bg-black dark:shadow-none md:h-[calc(100vh-1.5rem)] md:rounded-3xl md:border md:border-zinc-200/50`,_=`flex-col md:flex md:w-[400px] ${c?"hidden":"flex"} h-full min-h-0 min-w-0 flex-1 md:flex-none bg-white dark:bg-black border-r border-zinc-100 dark:border-zinc-800 z-10`,O=e??null;let d;s[3]!==m||s[4]!==$||s[5]!==w||s[6]!==h||s[7]!==n||s[8]!==a||s[9]!==O||s[10]!==o?(d=(0,t.jsx)(pt,{conversations:m,userResults:o,onSelect:$,onStartNew:w,selectedId:O,searchQuery:h,onSearchChange:a,onlineUsers:n}),s[3]=m,s[4]=$,s[5]=w,s[6]=h,s[7]=n,s[8]=a,s[9]=O,s[10]=o,s[11]=d):d=s[11];let G;s[12]!==_||s[13]!==d?(G=(0,t.jsx)("div",{className:_,children:d}),s[12]=_,s[13]=d,s[14]=G):G=s[14];let y;s[15]!==j||s[16]!==i||s[17]!==p||s[18]!==l||s[19]!==x||s[20]!==g||s[21]!==M||s[22]!==k||s[23]!==P||s[24]!==c||s[25]!==z||s[26]!==b?(y=c?(0,t.jsx)(Rt,{conversation:c,messages:x,currentUser:i,onBack:()=>g("/m"),onSendMessage:z,onEditMessage:p,onDeleteMessage:M,onToggleReaction:k,onTyping:r=>b(c.id,r),isLoading:l,isTyping:!!j,isOnline:!!P}):(0,t.jsxs)("div",{className:"hidden flex-1 flex-col items-center justify-center gap-6 text-zinc-500 md:flex bg-zinc-50/30 dark:bg-zinc-900/10",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"absolute -inset-10 rounded-full bg-violet-500/5 blur-3xl dark:bg-violet-500/10"}),(0,t.jsx)("div",{className:"relative rounded-[2.5rem] bg-white p-10 shadow-xl shadow-zinc-200/50 dark:bg-zinc-900/50 dark:shadow-none ring-1 ring-zinc-100 dark:ring-zinc-800",children:(0,t.jsx)(Le,{size:80,className:"text-violet-500 stroke-[1.5]"})})]}),(0,t.jsxs)("div",{className:"text-center max-w-sm px-4 space-y-3",children:[(0,t.jsx)("h3",{className:"text-3xl font-black tracking-tighter text-zinc-900 dark:text-white",children:"Your Messages"}),(0,t.jsx)("p",{className:"text-zinc-500 font-medium text-lg",children:"Send private photos and messages to a friend or group."})]})]}),s[15]=j,s[16]=i,s[17]=p,s[18]=l,s[19]=x,s[20]=g,s[21]=M,s[22]=k,s[23]=P,s[24]=c,s[25]=z,s[26]=b,s[27]=y):y=s[27];let S;return s[28]!==T||s[29]!==G||s[30]!==y?(S=(0,t.jsxs)("div",{className:T,children:[G,y]}),s[28]=T,s[29]=G,s[30]=y,s[31]=S):S=s[31],S},Bt=Pt;export{Bt as default};

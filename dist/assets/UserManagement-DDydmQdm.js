import{a as ee}from"./rolldown-runtime-BaZ8gS7u.js";import{c as ae,s as re}from"./animations-DZuN0xpW.js";import{c as ie}from"./framework-YRQI4BOE.js";import"./database-Bh-Nv8Zy.js";import{En as ne,Pt as G,Tn as J,Yt as K,cn as ce,en as de,wn as oe}from"./ui-libs-dHBs5Tk6.js";import"./media-libs-CqtNZWFg.js";import{$t as me,At as xe,Dt as he,Mt as fe,Ot as ue,Qt as je,R as W,V as Y,Zt as ge,_t as be,at as q,b as Z,h as ve,it as r,jn as pe,jt as Ne,kt as ye,nt as H,ot as Q,rt as X,tn as E,y as ke}from"./index-B89InrcM.js";var se=ie(),F=ee(ae(),1),s=ee(re(),1),ze=()=>{const e=(0,se.c)(66),[l,w]=(0,F.useState)("");let c;e[0]===Symbol.for("react.memo_cache_sentinel")?(c={role:"all",status:"all"},e[0]=c):c=e[0];const[a,C]=(0,F.useState)(c),{users:V,actions:i}=ve(),[T,P]=(0,F.useState)(null);let _,u,$,j,D,d,U;if(e[1]!==i||e[2]!==a||e[3]!==l||e[4]!==V.data||e[5]!==V.isLoading){U=Symbol.for("react.early_return_sentinel");e:{let B;if(e[13]!==a||e[14]!==l?(B=t=>{if(!t)return!1;const O=t.name.toLowerCase().includes(l.toLowerCase())||t.handle.toLowerCase().includes(l.toLowerCase()),le=a.role==="all"||t.role===a.role,te=a.status==="all"||a.status==="verified"&&t.verified||a.status==="unverified"&&!t.verified||a.status==="banned"&&t.isBanned;return O&&le&&te},e[13]=a,e[14]=l,e[15]=B):B=e[15],_=(V.data||[]).filter(B),V.isLoading){let t;e[16]===Symbol.for("react.memo_cache_sentinel")?(t=(0,s.jsx)("div",{className:"flex min-h-[600px] items-center justify-center",children:(0,s.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,s.jsx)(ne,{className:"h-8 w-8 animate-spin text-violet-600"}),(0,s.jsx)("p",{className:"text-sm font-semibold text-zinc-500",children:"Loading users..."})]})}),e[16]=t):t=e[16],U=t;break e}j="space-y-6",e[17]===Symbol.for("react.memo_cache_sentinel")?(D=(0,s.jsx)("div",{className:"space-y-2",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-2xl bg-violet-600 text-white",children:(0,s.jsx)(G,{className:"h-5 w-5"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-black tracking-tight",children:"User Directory"}),(0,s.jsx)("p",{className:"text-sm text-zinc-500",children:"Manage platform users and permissions"})]})]})}),e[17]=D):D=e[17];let I;e[18]===Symbol.for("react.memo_cache_sentinel")?(I=(0,s.jsx)(de,{className:"absolute left-3 top-1/2 h-5 w-5 -translate-y-1/2 text-zinc-400"}),e[18]=I):I=e[18];let L;e[19]===Symbol.for("react.memo_cache_sentinel")?(L=t=>w(t.target.value),e[19]=L):L=e[19];let m;e[20]!==l?(m=(0,s.jsxs)("div",{className:"relative",children:[I,(0,s.jsx)(be,{placeholder:"Search by name or handle...",value:l,onChange:L,className:"h-11 rounded-xl border-zinc-200 bg-white pl-10 text-sm font-medium dark:border-zinc-800 dark:bg-black"})]}),e[20]=l,e[21]=m):m=e[21];let p;e[22]!==a?(p=t=>C({...a,role:t}),e[22]=a,e[23]=p):p=e[23];let N;e[24]===Symbol.for("react.memo_cache_sentinel")?(N=(0,s.jsx)(q,{className:"w-[180px] rounded-xl border-zinc-200 dark:border-zinc-800",children:(0,s.jsx)(Q,{placeholder:"Filter by role"})}),e[24]=N):N=e[24];let y;e[25]===Symbol.for("react.memo_cache_sentinel")?(y=(0,s.jsxs)(X,{className:"rounded-xl dark:bg-zinc-900",children:[(0,s.jsx)(r,{value:"all",children:"All Roles"}),(0,s.jsx)(r,{value:"user",children:"Users"}),(0,s.jsx)(r,{value:"moderator",children:"Moderators"}),(0,s.jsx)(r,{value:"admin",children:"Admins"})]}),e[25]=y):y=e[25];let x;e[26]!==a.role||e[27]!==p?(x=(0,s.jsxs)(H,{value:a.role,onValueChange:p,children:[N,y]}),e[26]=a.role,e[27]=p,e[28]=x):x=e[28];let h;e[29]!==a?(h=t=>C({...a,status:t}),e[29]=a,e[30]=h):h=e[30];let k;e[31]===Symbol.for("react.memo_cache_sentinel")?(k=(0,s.jsx)(q,{className:"w-[180px] rounded-xl border-zinc-200 dark:border-zinc-800",children:(0,s.jsx)(Q,{placeholder:"Filter by status"})}),e[31]=k):k=e[31];let z;e[32]===Symbol.for("react.memo_cache_sentinel")?(z=(0,s.jsxs)(X,{className:"rounded-xl dark:bg-zinc-900",children:[(0,s.jsx)(r,{value:"all",children:"All Status"}),(0,s.jsx)(r,{value:"verified",children:"Verified"}),(0,s.jsx)(r,{value:"unverified",children:"Unverified"}),(0,s.jsx)(r,{value:"banned",children:"Banned"})]}),e[32]=z):z=e[32];let f;e[33]!==a.status||e[34]!==h?(f=(0,s.jsxs)(H,{value:a.status,onValueChange:h,children:[k,z]}),e[33]=a.status,e[34]=h,e[35]=f):f=e[35];let S;e[36]!==a.role||e[37]!==a.status?(S=(a.role!=="all"||a.status!=="all")&&(0,s.jsx)(E,{variant:"outline",size:"sm",onClick:()=>C({role:"all",status:"all"}),className:"rounded-xl",children:"Clear Filters"}),e[36]=a.role,e[37]=a.status,e[38]=S):S=e[38];let n;e[39]!==x||e[40]!==f||e[41]!==S?(n=(0,s.jsxs)("div",{className:"flex flex-wrap gap-3",children:[x,f,S]}),e[39]=x,e[40]=f,e[41]=S,e[42]=n):n=e[42],e[43]!==m||e[44]!==n?(d=(0,s.jsxs)("div",{className:"space-y-4",children:[m,n]}),e[43]=m,e[44]=n,e[45]=d):d=e[45],u="overflow-hidden rounded-3xl border border-zinc-200 dark:border-zinc-800",$=_.length===0?(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center bg-white py-12 text-center dark:bg-black",children:[(0,s.jsx)(G,{className:"h-12 w-12 text-zinc-300 dark:text-zinc-700"}),(0,s.jsx)("p",{className:"mt-4 font-semibold text-zinc-600 dark:text-zinc-400",children:"No users found"}),(0,s.jsx)("p",{className:"text-sm text-zinc-500",children:"Try adjusting your search or filters"})]}):(0,s.jsx)("div",{className:"divide-y divide-zinc-200 bg-white dark:divide-zinc-800 dark:bg-black",children:_.map(t=>t?(0,s.jsxs)("div",{className:"flex flex-col gap-4 p-4 transition-colors hover:bg-zinc-50 dark:hover:bg-zinc-900/50 sm:flex-row sm:items-center sm:justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4 min-w-0",children:[(0,s.jsxs)("div",{className:"relative shrink-0",children:[(0,s.jsxs)(ge,{className:"h-12 w-12 rounded-2xl ring-2 ring-zinc-200 dark:ring-zinc-800",children:[(0,s.jsx)(me,{src:t.avatar,className:"rounded-2xl"}),(0,s.jsx)(je,{className:"rounded-2xl bg-violet-500/10 text-sm font-bold text-violet-600",children:t.name[0]?.toUpperCase()})]}),t.verified&&(0,s.jsx)(Y,{size:20,className:"absolute -bottom-2 -right-2 rounded-full bg-white p-0.5"}),t.isPro&&(0,s.jsx)(W,{size:20,className:"absolute -bottom-2 -left-2 rounded-full bg-white p-0.5"})]}),(0,s.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,s.jsx)("h3",{className:"truncate font-semibold text-foreground",children:t.name}),(0,s.jsxs)("p",{className:"truncate text-sm text-zinc-500",children:["@",t.handle]})]})]}),(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-2 sm:justify-end",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 rounded-xl bg-zinc-100 px-3 py-1.5 dark:bg-zinc-900",children:[(0,s.jsx)(oe,{className:"h-3.5 w-3.5 text-zinc-600 dark:text-zinc-400"}),(0,s.jsx)("span",{className:"text-xs font-semibold uppercase tracking-wider text-zinc-700 dark:text-zinc-300",children:t.role})]}),(0,s.jsx)("div",{className:"flex items-center gap-2 rounded-xl bg-zinc-100 px-3 py-1.5 dark:bg-zinc-900",children:(0,s.jsx)("span",{className:"text-xs font-semibold uppercase tracking-wider text-zinc-700 dark:text-zinc-300",children:t.roles})}),t.isPro&&(0,s.jsxs)("div",{className:"flex items-center gap-1.5 rounded-xl bg-amber-500/10 px-3 py-1.5",children:[(0,s.jsx)(W,{size:14}),(0,s.jsx)("span",{className:"text-xs font-semibold text-amber-700 dark:text-amber-400",children:"PRO"})]}),t.verified&&(0,s.jsxs)("div",{className:"flex items-center gap-1.5 rounded-xl bg-blue-500/10 px-3 py-1.5",children:[(0,s.jsx)(Y,{size:14}),(0,s.jsx)("span",{className:"text-xs font-semibold text-blue-700 dark:text-blue-400",children:"Verified"})]}),t.isBanned&&(0,s.jsxs)("div",{className:"flex items-center gap-1.5 rounded-xl bg-rose-500/10 px-3 py-1.5",children:[(0,s.jsx)(K,{className:"h-3.5 w-3.5 text-rose-600 dark:text-rose-400"}),(0,s.jsx)("span",{className:"text-xs font-semibold text-rose-700 dark:text-rose-400",children:"Banned"})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 sm:justify-end",children:[(0,s.jsx)(E,{variant:"outline",size:"sm",onClick:()=>P(t),title:"Manage user",className:"h-9 rounded-lg px-3",children:(0,s.jsx)(ce,{className:"h-4 w-4"})}),(0,s.jsxs)(H,{value:t.role,onValueChange:O=>i.updateRole({userId:t.id,role:O}),children:[(0,s.jsx)(q,{className:"w-[130px] rounded-lg border-zinc-200 text-xs font-semibold dark:border-zinc-800",children:(0,s.jsx)(Q,{})}),(0,s.jsxs)(X,{className:"rounded-xl dark:bg-zinc-900",children:[(0,s.jsx)(r,{value:"user",children:"User"}),(0,s.jsx)(r,{value:"moderator",children:"Moderator"}),(0,s.jsx)(r,{value:"admin",children:"Admin"})]})]}),(0,s.jsx)(E,{variant:"outline",size:"sm",onClick:()=>i.toggleVerification({userId:t.id,verified:!t.verified}),title:t.verified?"Remove verification":"Verify user",className:"h-9 rounded-lg px-3",children:t.verified?(0,s.jsx)(J,{className:"h-4 w-4"}):(0,s.jsx)(Y,{size:16})}),(0,s.jsx)(E,{variant:"outline",size:"sm",onClick:()=>{const O=t.isBanned?"unban":"ban";confirm(`Are you sure you want to ${O} @${t.handle}?`)&&i.toggleBan({userId:t.id,banned:!t.isBanned})},title:t.isBanned?"Unban user":"Ban user",className:pe("h-9 rounded-lg px-3",t.isBanned?"border-emerald-200 bg-emerald-50 text-emerald-700 hover:bg-emerald-100 dark:border-emerald-900 dark:bg-emerald-900/20 dark:text-emerald-400":"border-rose-200 bg-rose-50 text-rose-700 hover:bg-rose-100 dark:border-rose-900 dark:bg-rose-900/20 dark:text-rose-400"),children:t.isBanned?(0,s.jsx)(J,{className:"h-4 w-4"}):(0,s.jsx)(K,{className:"h-4 w-4"})})]})]},t.id):null)})}e[1]=i,e[2]=a,e[3]=l,e[4]=V.data,e[5]=V.isLoading,e[6]=_,e[7]=u,e[8]=$,e[9]=j,e[10]=D,e[11]=d,e[12]=U}else _=e[6],u=e[7],$=e[8],j=e[9],D=e[10],d=e[11],U=e[12];if(U!==Symbol.for("react.early_return_sentinel"))return U;let g;e[46]!==u||e[47]!==$?(g=(0,s.jsx)("div",{className:u,children:$}),e[46]=u,e[47]=$,e[48]=g):g=e[48];let M;e[49]!==_.length?(M=(0,s.jsx)("span",{className:"font-semibold text-foreground",children:_.length}),e[49]=_.length,e[50]=M):M=e[50];const R=V.data?.length||0;let A;e[51]!==R?(A=(0,s.jsx)("span",{className:"font-semibold text-foreground",children:R}),e[51]=R,e[52]=A):A=e[52];let o;e[53]!==A||e[54]!==M?(o=(0,s.jsx)("div",{className:"rounded-2xl border border-zinc-200 bg-white p-4 dark:border-zinc-800 dark:bg-black",children:(0,s.jsxs)("p",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:["Showing"," ",M," ","of"," ",A," ","users"]})}),e[53]=A,e[54]=M,e[55]=o):o=e[55];let b;e[56]!==i||e[57]!==T?(b=T&&(0,s.jsx)(Se,{user:T,onClose:()=>P(null),actions:i}),e[56]=i,e[57]=T,e[58]=b):b=e[58];let v;return e[59]!==o||e[60]!==b||e[61]!==j||e[62]!==D||e[63]!==d||e[64]!==g?(v=(0,s.jsxs)("div",{className:j,children:[D,d,g,o,b]}),e[59]=o,e[60]=b,e[61]=j,e[62]=D,e[63]=d,e[64]=g,e[65]=v):v=e[65],v},Se=e=>{const l=(0,se.c)(45),{user:w,onClose:c,actions:a}=e,[C,V]=(0,F.useState)(w.roles||"Newbie"),[i,T]=(0,F.useState)(w.isPro||!1),[P,_]=(0,F.useState)(30),[u,$]=(0,F.useState)(!1),[j,D]=(0,F.useState)(!1);let d;l[0]!==a||l[1]!==i||l[2]!==u||l[3]!==j||l[4]!==c||l[5]!==P||l[6]!==C||l[7]!==w.id?(d=()=>{let n=null;u&&(n=i?P:0),(j||u)&&a.adminUpdateUser({userId:w.id,role:j?C:null,proValidityDays:n}),c()},l[0]=a,l[1]=i,l[2]=u,l[3]=j,l[4]=c,l[5]=P,l[6]=C,l[7]=w.id,l[8]=d):d=l[8];const U=d;let g;l[9]===Symbol.for("react.memo_cache_sentinel")?(g=n=>{V(n),D(!0)},l[9]=g):g=l[9];const M=g;let R;l[10]===Symbol.for("react.memo_cache_sentinel")?(R=n=>{T(n),$(!0)},l[10]=R):R=l[10];const A=R;let o;l[11]!==w.name?(o=(0,s.jsxs)(fe,{children:["Manage ",w.name]}),l[11]=w.name,l[12]=o):o=l[12];let b;l[13]===Symbol.for("react.memo_cache_sentinel")?(b=(0,s.jsx)(ye,{children:"Update user role and pro status. Changes are saved upon clicking 'Save changes'."}),l[13]=b):b=l[13];let v;l[14]!==o?(v=(0,s.jsxs)(Ne,{children:[o,b]}),l[14]=o,l[15]=v):v=l[15];let B;l[16]===Symbol.for("react.memo_cache_sentinel")?(B=(0,s.jsx)(Z,{htmlFor:"role",className:"text-right",children:"Role"}),l[16]=B):B=l[16];let I;l[17]===Symbol.for("react.memo_cache_sentinel")?(I=(0,s.jsx)(q,{children:(0,s.jsx)(Q,{placeholder:"Select a role"})}),l[17]=I):I=l[17];let L;l[18]===Symbol.for("react.memo_cache_sentinel")?(L=(0,s.jsxs)(X,{children:[(0,s.jsx)(r,{value:"Newbie",children:"Newbie"}),(0,s.jsx)(r,{value:"Hunter",children:"Hunter"}),(0,s.jsx)(r,{value:"Elite",children:"Elite"})]}),l[18]=L):L=l[18];let m;l[19]!==C?(m=(0,s.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[B,(0,s.jsx)("div",{className:"col-span-3",children:(0,s.jsxs)(H,{value:C,onValueChange:M,children:[I,L]})})]}),l[19]=C,l[20]=m):m=l[20];let p;l[21]===Symbol.for("react.memo_cache_sentinel")?(p=(0,s.jsx)(Z,{htmlFor:"is-pro",className:"text-right",children:"Pro Status"}),l[21]=p):p=l[21];let N;l[22]!==i?(N=(0,s.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[p,(0,s.jsx)(ke,{id:"is-pro",checked:i,onCheckedChange:A})]}),l[22]=i,l[23]=N):N=l[23];let y;l[24]!==i||l[25]!==P?(y=i&&(0,s.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,s.jsx)(Z,{htmlFor:"validity",className:"text-right",children:"Validity"}),(0,s.jsx)("div",{className:"col-span-3",children:(0,s.jsxs)(H,{value:String(P),onValueChange:n=>{_(Number(n)),$(!0)},children:[(0,s.jsx)(q,{children:(0,s.jsx)(Q,{placeholder:"Select validity"})}),(0,s.jsxs)(X,{children:[(0,s.jsx)(r,{value:"7",children:"7 days"}),(0,s.jsx)(r,{value:"15",children:"15 days"}),(0,s.jsx)(r,{value:"30",children:"30 days"}),(0,s.jsx)(r,{value:"90",children:"90 days"}),(0,s.jsx)(r,{value:"365",children:"365 days"})]})]})})]}),l[24]=i,l[25]=P,l[26]=y):y=l[26];let x;l[27]!==m||l[28]!==N||l[29]!==y?(x=(0,s.jsxs)("div",{className:"grid gap-6 py-4",children:[m,N,y]}),l[27]=m,l[28]=N,l[29]=y,l[30]=x):x=l[30];let h;l[31]!==c?(h=(0,s.jsx)(E,{variant:"outline",onClick:c,children:"Cancel"}),l[31]=c,l[32]=h):h=l[32];let k;l[33]!==U?(k=(0,s.jsx)(E,{onClick:U,children:"Save changes"}),l[33]=U,l[34]=k):k=l[34];let z;l[35]!==h||l[36]!==k?(z=(0,s.jsxs)(xe,{children:[h,k]}),l[35]=h,l[36]=k,l[37]=z):z=l[37];let f;l[38]!==x||l[39]!==z||l[40]!==v?(f=(0,s.jsxs)(ue,{className:"sm:max-w-[425px] rounded-2xl",children:[v,x,z]}),l[38]=x,l[39]=z,l[40]=v,l[41]=f):f=l[41];let S;return l[42]!==c||l[43]!==f?(S=(0,s.jsx)(he,{open:!0,onOpenChange:c,children:f}),l[42]=c,l[43]=f,l[44]=S):S=l[44],S},$e=ze;export{$e as default};

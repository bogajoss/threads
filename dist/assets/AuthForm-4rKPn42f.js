import{a as x}from"./rolldown-runtime-BaZ8gS7u.js";import{E as j,d as v}from"./framework-CsA6nn9m.js";import{Jn as w}from"./ui-libs-DgSTeYpE.js";import{U as o,ht as k,vt as N,xt as _}from"./index-c4sbIxm5.js";var i=x(j(),1),e=x(v(),1),y=({type:s,onComplete:h,onSwitch:d})=>{const{login:g,signup:p}=_(),{addToast:n}=N(),[a,t]=(0,i.useState)({name:"",email:"",username:"",password:""}),[b,m]=(0,i.useState)(!1),[c,u]=(0,i.useState)(null),f=async r=>{r.preventDefault(),m(!0),u(null);try{s==="login"?(await g({email:a.email,password:a.password}),n("Welcome back!"),h()):(await p({email:a.email,password:a.password,username:a.username,name:a.name}),n("Confirm Your Email","info"),d())}catch(l){console.error("Auth error:",l),u(l.message||"Authentication failed. Please check your credentials."),n("Authentication failed!","error")}finally{m(!1)}};return(0,e.jsxs)("div",{className:"mx-auto w-full max-w-md animate-in fade-in slide-in-from-bottom-5 duration-300 p-8",children:[(0,e.jsxs)("div",{className:"mb-8 text-center",children:[(0,e.jsx)("div",{className:"mb-4 flex justify-center",children:(0,e.jsx)("div",{className:"rounded-2xl bg-black p-3 shadow-lg text-white dark:bg-white dark:text-black",children:(0,e.jsx)("img",{src:"/logo.webp",alt:"Logo",className:"size-16 rounded-2xl border-2 border-zinc-100 shadow-xl dark:border-zinc-800"})})}),(0,e.jsx)("h2",{className:"mb-2 text-3xl font-extrabold tracking-tight dark:text-white",children:s==="login"?"Welcome back!":"Join Sysm today"}),(0,e.jsx)("p",{className:"font-medium text-zinc-500",children:"The decentralized social network"})]}),c&&(0,e.jsxs)("div",{className:"mb-6 flex items-center gap-3 rounded-xl border border-rose-100 bg-rose-50 p-4 text-sm text-rose-600 dark:border-rose-800 dark:bg-rose-900/20 dark:text-rose-400",children:[(0,e.jsx)(w,{size:18}),(0,e.jsx)("span",{children:c})]}),(0,e.jsxs)("form",{onSubmit:f,className:"space-y-4",children:[(0,e.jsx)(o,{label:"Email",type:"email",placeholder:"john@example.com",value:a.email,onChange:r=>t({...a,email:r.target.value}),required:!0}),s==="signup"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(o,{label:"Name",placeholder:"John Doe",value:a.name,onChange:r=>t({...a,name:r.target.value}),required:!0}),(0,e.jsx)(o,{label:"Username",placeholder:"johndoe",value:a.username,onChange:r=>{const l=r.target.value.replace(/[^a-zA-Z0-9_]/g,"");t({...a,username:l})},required:!0})]}),(0,e.jsx)(o,{label:"Password",type:"password",placeholder:"••••••••",value:a.password,onChange:r=>t({...a,password:r.target.value}),required:!0}),(0,e.jsx)(k,{type:"submit",className:"mt-6 w-full justify-center py-3 text-lg",loading:b,children:s==="login"?"Log in":"Sign up"})]}),(0,e.jsxs)("div",{className:"mt-8 text-center text-sm",children:[(0,e.jsx)("span",{className:"text-zinc-500",children:s==="login"?"Don't have an account?":"Already have an account?"}),(0,e.jsx)("button",{onClick:d,className:"ml-1 font-bold hover:underline dark:text-white",children:s==="login"?"Sign up":"Log in"})]})]})},q=y;export{q as t};

import{a as Ce}from"./rolldown-runtime-BaZ8gS7u.js";import{a as Ee,c as Ae,i as ce,n as ye,r as Pe,s as De}from"./animations-DZuN0xpW.js";import{_ as Me,c as de}from"./framework-YRQI4BOE.js";import"./database-Bh-Nv8Zy.js";import{At as ze,Bn as Ie,Gn as Ge,Ht as Ne,Kn as Le,Kt as ke,Nt as Ve,Wn as Ue,_n as Se,dn as Oe,en as Fe,fr as He,hn as We,kt as qe,ln as Ke,on as be,or as Be,qt as Qe,rn as Te,sn as Ye,sr as Je,un as Xe,vn as Ze}from"./ui-libs-Cxlst_z9.js";import{t as et}from"./media-libs-CqtNZWFg.js";import{At as tt,Cn as D,En as Re,Gt as ve,I as st,Mt as fe,Nt as it,Pt as rt,R as at,Sn as _e,Ut as je,Wt as we,Y as he,_t as lt,c as nt,ct,gt as ot,h as dt,ht as xt,jt as mt,kt as ut,lt as ft,qt as oe,rt as $e,st as ht,xt as pt,yt as ge}from"./index-DUBNvGRb.js";import{t as gt}from"./VideoPlayer-C5NI8Uyo.js";import"./text-processing-COMFTedg.js";import{t as bt}from"./rich-text-C0Z-Ph69.js";import{t as vt}from"./useAutoResizeTextArea-n5XCjvX4.js";var jt=de(),_=Ce(Ae(),1),t=Ce(De(),1),wt=_.memo(s=>{const e=(0,jt.c)(52),{conv:i,isSelected:r,isOnline:h,isTyping:g,onClick:n}=s,y=i.isGroup?i.name:i.user?.name||"Unknown User",c=i.isGroup?i.avatar:i.user?.avatar;let o="";try{if(i.created_at){let j;e[0]!==i.created_at?(j=Re(i.created_at),e[0]=i.created_at,e[1]=j):j=e[1],o=j}}catch{o=""}const M=r?"bg-violet-600/10 dark:bg-violet-500/10":"hover:bg-zinc-100 dark:hover:bg-zinc-800/50";let a;e[2]!==M?(a=D("group relative flex w-full cursor-pointer items-center gap-3 rounded-xl p-3 transition-all",M),e[2]=M,e[3]=a):a=e[3];let b;e[4]!==c?(b=(0,t.jsx)(ve,{src:c,className:"object-cover"}),e[4]=c,e[5]=b):b=e[5];let N;e[6]!==y[0]?(N=y[0]?.toUpperCase(),e[6]=y[0],e[7]=N):N=e[7];let E;e[8]!==N?(E=(0,t.jsx)(we,{className:"bg-gradient-to-br from-violet-500 to-fuchsia-600 text-white text-lg font-bold",children:N}),e[8]=N,e[9]=E):E=e[9];let T;e[10]!==b||e[11]!==E?(T=(0,t.jsxs)(je,{className:"h-12 w-12 border border-zinc-200 dark:border-zinc-800",children:[b,E]}),e[10]=b,e[11]=E,e[12]=T):T=e[12];let z;e[13]!==i.isGroup||e[14]!==h?(z=h&&!i.isGroup&&(0,t.jsx)("span",{className:"absolute bottom-0 right-0 h-3.5 w-3.5 rounded-full border-[2px] border-white bg-emerald-500 ring-0 dark:border-zinc-950"}),e[13]=i.isGroup,e[14]=h,e[15]=z):z=e[15];let d;e[16]!==T||e[17]!==z?(d=(0,t.jsxs)("div",{className:"relative shrink-0",children:[T,z]}),e[16]=T,e[17]=z,e[18]=d):d=e[18];const A=r?"text-violet-900 dark:text-violet-100":"text-zinc-900 dark:text-zinc-100";let R;e[19]!==A?(R=D("truncate text-[15px] font-semibold",A),e[19]=A,e[20]=R):R=e[20];let S;e[21]!==y||e[22]!==R?(S=(0,t.jsx)("h4",{className:R,children:y}),e[21]=y,e[22]=R,e[23]=S):S=e[23];let k;e[24]!==o?(k=(0,t.jsx)("span",{className:"text-[11px] font-medium text-zinc-400 dark:text-zinc-500 shrink-0",children:o}),e[24]=o,e[25]=k):k=e[25];let u;e[26]!==S||e[27]!==k?(u=(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[S,k]}),e[26]=S,e[27]=k,e[28]=u):u=e[28];let x;e[29]!==i.currentUserSent||e[30]!==i.isGroup||e[31]!==i.lastMessage||e[32]!==i.lastMessageSender||e[33]!==i.unread||e[34]!==g?(x=(0,t.jsx)("div",{className:"flex-1 min-w-0 flex items-center gap-1",children:g?(0,t.jsx)("p",{className:"truncate text-[13px] leading-relaxed text-violet-600 dark:text-violet-400 font-medium italic",children:"Typing..."}):(0,t.jsxs)("p",{className:D("truncate text-[13px] leading-relaxed",i.unread>0?"font-semibold text-zinc-900 dark:text-zinc-100":"text-zinc-500 dark:text-zinc-400"),children:[i.lastMessageSender&&i.isGroup&&(0,t.jsxs)("span",{className:"mr-1 font-medium",children:[i.lastMessageSender,":"]}),i.currentUserSent&&(0,t.jsx)("span",{className:"mr-1",children:"You:"}),i.lastMessage||"Start a conversation"]})}),e[29]=i.currentUserSent,e[30]=i.isGroup,e[31]=i.lastMessage,e[32]=i.lastMessageSender,e[33]=i.unread,e[34]=g,e[35]=x):x=e[35];let p;e[36]!==i.unread?(p=i.unread>0&&(0,t.jsx)("span",{className:"flex h-5 w-auto min-w-[20px] items-center justify-center rounded-full bg-violet-600 px-1.5 text-[10px] font-bold text-white shadow-sm ring-1 ring-violet-500 dark:bg-violet-500",children:i.unread}),e[36]=i.unread,e[37]=p):p=e[37];let v;e[38]!==x||e[39]!==p?(v=(0,t.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[x,p]}),e[38]=x,e[39]=p,e[40]=v):v=e[40];let l;e[41]!==u||e[42]!==v?(l=(0,t.jsxs)("div",{className:"flex min-w-0 flex-1 flex-col justify-center gap-0.5",children:[u,v]}),e[41]=u,e[42]=v,e[43]=l):l=e[43];let f;e[44]!==r?(f=r&&(0,t.jsx)("div",{className:"absolute left-0 top-1/2 h-8 w-1 -translate-y-1/2 rounded-r-full bg-violet-600 dark:bg-violet-500"}),e[44]=r,e[45]=f):f=e[45];let m;return e[46]!==n||e[47]!==l||e[48]!==f||e[49]!==a||e[50]!==d?(m=(0,t.jsxs)("div",{onClick:n,className:a,children:[d,l,f]}),e[46]=n,e[47]=l,e[48]=f,e[49]=a,e[50]=d,e[51]=m):m=e[51],m}),yt=({conversations:s,onSelect:e,selectedId:i,searchQuery:r,onSearchChange:h,onlineUsers:g=new Set,typingStatus:n={}})=>{const y=Me(),[c,o]=(0,_.useState)("all"),M=(0,_.useMemo)(()=>{let a=s;return c==="unread"&&(a=a.filter(b=>b.unread>0)),c==="groups"&&(a=a.filter(b=>b.isGroup)),a},[s,c]);return(0,t.jsxs)("div",{className:"flex h-full w-full flex-col bg-white dark:bg-[#09090b] overflow-hidden",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-4 border-b border-zinc-100 p-4 dark:border-zinc-800/50 shrink-0",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h2",{className:"text-xl font-bold tracking-tight text-zinc-900 dark:text-white",children:"Messages"}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(oe,{variant:"ghost",size:"icon",className:"rounded-full text-zinc-500 dark:text-zinc-400 hover:bg-zinc-100 dark:hover:bg-zinc-800",onClick:()=>y("/create-group"),title:"New Group",children:(0,t.jsx)(Se,{size:20})}),(0,t.jsxs)(ot,{children:[(0,t.jsx)(pt,{asChild:!0,children:(0,t.jsx)(oe,{variant:"ghost",size:"icon",className:"rounded-full text-zinc-500 dark:text-zinc-400 hover:bg-zinc-100 dark:hover:bg-zinc-800",children:(0,t.jsx)(Ge,{size:20})})}),(0,t.jsxs)(lt,{align:"end",className:"w-48",children:[(0,t.jsxs)(ge,{onClick:()=>o("all"),children:[(0,t.jsx)("span",{children:"All Chats"}),c==="all"&&(0,t.jsx)("span",{className:"ml-auto text-violet-500",children:"✓"})]}),(0,t.jsxs)(ge,{onClick:()=>o("unread"),children:[(0,t.jsx)("span",{children:"Unread"}),c==="unread"&&(0,t.jsx)("span",{className:"ml-auto text-violet-500",children:"✓"})]}),(0,t.jsxs)(ge,{onClick:()=>o("groups"),children:[(0,t.jsx)("span",{children:"Groups"}),c==="groups"&&(0,t.jsx)("span",{className:"ml-auto text-violet-500",children:"✓"})]})]})]})]})]}),(0,t.jsxs)("div",{className:"relative group",children:[(0,t.jsx)(Fe,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-zinc-400 transition-colors group-focus-within:text-violet-500"}),(0,t.jsx)("input",{type:"text",placeholder:"Search messages...",value:r,onChange:a=>h(a.target.value),className:"w-full rounded-2xl border-none bg-zinc-100 py-2.5 pl-9 pr-4 text-sm font-medium text-zinc-900 outline-none placeholder:text-zinc-500 transition-all focus:ring-2 focus:ring-violet-500/20 dark:bg-zinc-900 dark:text-white dark:focus:bg-zinc-800"})]})]}),(0,t.jsx)($e,{className:"flex-1",children:(0,t.jsxs)("div",{className:"flex flex-col gap-1 p-2",children:[s.length===0&&!r&&(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center gap-2 py-12 text-center",children:[(0,t.jsx)("div",{className:"rounded-full bg-zinc-100 p-4 dark:bg-zinc-800",children:(0,t.jsx)(Se,{size:24,className:"text-zinc-400"})}),(0,t.jsx)("h3",{className:"text-sm font-semibold text-zinc-900 dark:text-white",children:"No messages yet"}),(0,t.jsx)("p",{className:"max-w-[180px] text-xs text-zinc-500",children:"Start a conversation with a friend or create a group."}),(0,t.jsx)(oe,{size:"sm",className:"mt-2 rounded-full bg-violet-600 hover:bg-violet-700 text-white",onClick:()=>y("/explore"),children:"Start New Chat"})]}),s.length>0&&M.length===0&&(0,t.jsx)("div",{className:"py-8 text-center text-sm text-zinc-500",children:"No messages found"}),M.map(a=>(0,t.jsx)(wt,{conv:a,isSelected:i===a.id,isOnline:!a.isGroup&&a.user&&g.has(a.user.id),isTyping:!!n[a.id],onClick:()=>e(a)},a.id))]})})]})},zt=yt,Nt=de(),kt=s=>{const e=(0,Nt.c)(68),{onSendMessage:i,onTyping:r,replyingTo:h,setReplyingTo:g,editingMessage:n,setEditingMessage:y}=s,[c,o]=(0,_.useState)("");let M;e[0]===Symbol.for("react.memo_cache_sentinel")?(M=[],e[0]=M):M=e[0];const[a,b]=(0,_.useState)(M),[N,E]=(0,_.useState)(!1),T=(0,_.useRef)(null),z=(0,_.useRef)(null),d=vt(c),A=ut("(min-width: 768px)");let R,S;e[1]!==n||e[2]!==g||e[3]!==d?(R=()=>{n&&(o(n.text),g(null),d.current&&d.current.focus())},S=[n,g,d],e[1]=n,e[2]=g,e[3]=d,e[4]=R,e[5]=S):(R=e[4],S=e[5]),_.useEffect(R,S);const{isRecording:k,recordingTime:u,startRecording:x,stopRecording:p,cancelRecording:v,audioBlob:l,audioUrl:f,clearAudio:m}=dt(),[j,C]=(0,_.useState)(!1),w=(0,_.useRef)(null),ie=_t,J=(0,_.useRef)(0);let re;e[6]!==r?(re=$=>{const I=$.target.value;if(o(I),r){const W=Date.now();W-J.current>3e3&&(r(!0),J.current=W),z.current&&clearTimeout(z.current),z.current=setTimeout(()=>{r(!1),J.current=0},2e3)}},e[6]=r,e[7]=re):re=e[7];const X=re;let q;e[8]!==a||e[9]!==l||e[10]!==m||e[11]!==A||e[12]!==i||e[13]!==r||e[14]!==u||e[15]!==c||e[16]!==d?(q=$=>{if($&&$.preventDefault(),l){i("",[],l,u),m();return}!c.trim()&&a.length===0||(r&&(z.current&&clearTimeout(z.current),r(!1)),i(c,a),o(""),b([]),setTimeout(()=>{A?d.current?.focus():d.current?.blur()},10))},e[8]=a,e[9]=l,e[10]=m,e[11]=A,e[12]=i,e[13]=r,e[14]=u,e[15]=c,e[16]=d,e[17]=q):q=e[17];const Z=q;let ae;e[18]!==f||e[19]!==j?(ae=()=>{f&&(w.current||(w.current=new Audio(f),w.current.onended=()=>C(!1)),j?w.current.pause():w.current.play(),C(!j))},e[18]=f,e[19]=j,e[20]=ae):ae=e[20];const ee=ae;let K,B;e[21]!==l?(K=()=>{!l&&w.current&&(w.current.pause(),w.current=null,C(!1))},B=[l],e[21]=l,e[22]=K,e[23]=B):(K=e[22],B=e[23]),_.useEffect(K,B);let xe;e[24]===Symbol.for("react.memo_cache_sentinel")?(xe=$=>{if(!$.target.files)return;const I=Array.from($.target.files);b(W=>[...W,...I])},e[24]=xe):xe=e[24];const me=xe;let G;e[25]!==a?(G=a.length>0&&(0,t.jsx)(ce.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},exit:{y:20,opacity:0},className:"flex gap-2 overflow-x-auto mx-auto mb-2 px-2 py-2 bg-white dark:bg-[#212121] rounded-2xl shadow-lg border border-zinc-100 dark:border-zinc-800 w-full max-w-3xl no-scrollbar",children:a.map(($,I)=>(0,t.jsxs)("div",{className:"relative size-20 shrink-0 rounded-xl overflow-hidden border border-zinc-200 dark:border-zinc-700 group",children:[$.type.startsWith("video/")?(0,t.jsx)("div",{className:"size-full bg-black flex items-center justify-center",children:(0,t.jsx)(be,{size:20,className:"text-white opacity-50"})}):(0,t.jsx)("img",{src:URL.createObjectURL($),className:"size-full object-cover"}),(0,t.jsx)("button",{type:"button",onClick:()=>b(W=>W.filter((ne,le)=>le!==I)),className:"absolute top-1 right-1 size-6 flex items-center justify-center rounded-full bg-black/50 text-white hover:bg-black/70 transition-colors",children:(0,t.jsx)(ze,{size:14})})]},I))}),e[25]=a,e[26]=G):G=e[26];let L;e[27]!==n||e[28]!==h||e[29]!==y||e[30]!==g?(L=(h||n)&&(0,t.jsxs)(ce.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},exit:{y:20,opacity:0},className:"flex items-center justify-between mx-auto mb-1.5 px-4 py-2 bg-white dark:bg-[#212121] rounded-2xl shadow-lg border border-zinc-100 dark:border-zinc-800 w-full max-w-3xl",children:[(0,t.jsxs)("div",{className:"text-sm flex items-center gap-3 min-w-0",children:[(0,t.jsx)("div",{className:"size-8 flex items-center justify-center rounded-full bg-violet-500/10 text-violet-500",children:n?(0,t.jsx)(Ke,{size:16}):(0,t.jsx)(Te,{size:16})}),(0,t.jsxs)("div",{className:"min-w-0",children:[(0,t.jsx)("span",{className:"text-[13px] font-bold text-violet-500 block leading-tight",children:n?"Edit Message":`Reply to ${h.sender==="me"?"yourself":h.senderName}`}),(0,t.jsx)("p",{className:"truncate text-xs text-zinc-500 dark:text-[#aaaaaa]",children:n?n.text:h.text})]})]}),(0,t.jsx)("button",{onClick:()=>{g(null),y(null),n&&o("")},className:"p-1 rounded-full hover:bg-zinc-100 dark:hover:bg-white/10",children:(0,t.jsx)(ze,{size:18,className:"text-zinc-400"})})]}),e[27]=n,e[28]=h,e[29]=y,e[30]=g,e[31]=L):L=e[31];let te;e[32]!==G||e[33]!==L?(te=(0,t.jsxs)(Ee,{children:[G,L]}),e[32]=G,e[33]=L,e[34]=te):te=e[34];const se=(k||l)&&"bg-zinc-900 ring-red-500/50";let V;e[35]!==se?(V=D("flex-1 min-w-0 flex items-center gap-1 rounded-[24px] px-1.5 py-1.5 transition-all bg-white dark:bg-[#212121] shadow-md border-0 ring-1 ring-zinc-200 dark:ring-zinc-800 focus-within:ring-violet-500/30",se),e[35]=se,e[36]=V):V=e[36];let U;e[37]!==l||e[38]!==v||e[39]!==m||e[40]!==Z||e[41]!==X||e[42]!==N||e[43]!==j||e[44]!==k||e[45]!==u||e[46]!==c||e[47]!==d||e[48]!==ee?(U=k?(0,t.jsxs)("div",{className:"flex-1 flex items-center gap-4 px-3 py-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(ce.div,{animate:{scale:[1,1.2,1]},transition:{repeat:1/0},className:"size-2 rounded-full bg-red-500"}),(0,t.jsx)("span",{className:"text-[15px] font-medium tabular-nums text-red-500",children:ie(u)})]}),(0,t.jsx)("div",{className:"flex-1 text-center text-sm text-zinc-500",children:"Recording..."}),(0,t.jsx)("button",{type:"button",onClick:v,className:"p-2 text-zinc-400 hover:text-red-500",children:(0,t.jsx)(Ne,{size:20})})]}):l?(0,t.jsxs)("div",{className:"flex-1 flex items-center gap-3 px-3 py-1",children:[(0,t.jsx)("button",{type:"button",onClick:ee,className:"size-10 flex items-center justify-center rounded-full bg-[#8774e1] text-white",children:j?(0,t.jsx)(ke,{size:16,fill:"currentColor"}):(0,t.jsx)(be,{size:20,fill:"currentColor",className:"ml-0.5"})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("div",{className:"h-1 bg-zinc-800 rounded-full overflow-hidden",children:(0,t.jsx)(ce.div,{initial:{width:0},animate:{width:j?"100%":"0%"},transition:{duration:u,ease:"linear"},className:"h-full bg-[#8774e1]"})}),(0,t.jsxs)("div",{className:"flex justify-between mt-1",children:[(0,t.jsx)("span",{className:"text-[10px] text-zinc-500",children:"Voice message"}),(0,t.jsx)("span",{className:"text-[10px] text-zinc-500 tabular-nums",children:ie(u)})]})]}),(0,t.jsx)("button",{type:"button",onClick:m,className:"p-2 text-zinc-400 hover:text-red-500",children:(0,t.jsx)(Ne,{size:20})})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(ht,{open:N,onOpenChange:E,children:[(0,t.jsx)(ft,{asChild:!0,children:(0,t.jsx)("button",{type:"button",className:"p-2 text-zinc-400 hover:text-violet-500 dark:text-[#aaaaaa] dark:hover:text-[#8774e1] transition-colors",children:(0,t.jsx)(Qe,{size:24})})}),(0,t.jsx)(ct,{className:"p-0 border-none bg-transparent",side:"top",align:"start",children:(0,t.jsx)(xt,{onEmojiSelect:$=>o(I=>I+$.emoji)})})]}),(0,t.jsx)("textarea",{ref:d,value:c,onChange:X,onKeyDown:$=>{$.key==="Enter"&&!$.shiftKey&&($.preventDefault(),Z())},placeholder:"Message",className:"flex-1 bg-transparent border-none outline-none text-[16px] resize-none py-2 px-1 text-zinc-900 dark:text-white placeholder:text-zinc-500 dark:placeholder:text-[#aaaaaa] min-h-[40px] max-h-[200px]",rows:1}),(0,t.jsx)("button",{type:"button",onClick:()=>T.current?.click(),className:"p-2 text-zinc-400 hover:text-violet-500 dark:text-[#aaaaaa] dark:hover:text-[#8774e1] transition-colors",children:(0,t.jsx)(Oe,{size:24,className:"-rotate-45"})})]}),e[37]=l,e[38]=v,e[39]=m,e[40]=Z,e[41]=X,e[42]=N,e[43]=j,e[44]=k,e[45]=u,e[46]=c,e[47]=d,e[48]=ee,e[49]=U):U=e[49];let O;e[50]!==V||e[51]!==U?(O=(0,t.jsx)("div",{className:V,children:U}),e[50]=V,e[51]=U,e[52]=O):O=e[52];let F;e[53]!==a.length||e[54]!==l||e[55]!==Z||e[56]!==k||e[57]!==x||e[58]!==p||e[59]!==c?(F=c.trim()||a.length>0||l?(0,t.jsx)("button",{onClick:Z,className:"size-[50px] shrink-0 flex items-center justify-center rounded-full bg-[#8774e1] text-white shadow-md hover:scale-105 transition-transform",children:(0,t.jsx)(st,{size:24})}):k?(0,t.jsx)("button",{onClick:p,className:"size-[50px] shrink-0 flex items-center justify-center rounded-full bg-red-500 text-white shadow-md hover:scale-105 transition-transform",children:(0,t.jsx)(ke,{size:20,fill:"currentColor"})}):(0,t.jsx)("button",{onClick:x,className:"size-[50px] shrink-0 flex items-center justify-center rounded-full bg-zinc-200 dark:bg-[#212121] text-zinc-500 dark:text-[#aaaaaa] shadow-md hover:scale-105 transition-transform",children:(0,t.jsx)(We,{size:24})}),e[53]=a.length,e[54]=l,e[55]=Z,e[56]=k,e[57]=x,e[58]=p,e[59]=c,e[60]=F):F=e[60];let H;e[61]!==O||e[62]!==F?(H=(0,t.jsxs)("div",{className:"flex items-end gap-2 w-full max-w-3xl mx-auto",children:[O,F]}),e[61]=O,e[62]=F,e[63]=H):H=e[63];let Q;e[64]===Symbol.for("react.memo_cache_sentinel")?(Q=(0,t.jsx)("input",{type:"file",ref:T,onChange:me,className:"hidden",multiple:!0,accept:"image/*,video/*"}),e[64]=Q):Q=e[64];let Y;return e[65]!==te||e[66]!==H?(Y=(0,t.jsxs)("div",{className:"shrink-0 p-2 md:p-3 relative z-50 bg-white dark:bg-[#09090b]",children:[te,H,Q]}),e[65]=te,e[66]=H,e[67]=Y):Y=e[67],Y},St=kt;function _t(s){return`${Math.floor(s/60)}:${(s%60).toString().padStart(2,"0")}`}var Ct=de(),Mt=s=>{const e=(0,Ct.c)(24),{url:i,duration:r,isMe:h}=s,g=(0,_.useRef)(null),n=(0,_.useRef)(null),[y,c]=(0,_.useState)(!1),[o,M]=(0,_.useState)(!1),[a,b]=(0,_.useState)(0),[N,E]=(0,_.useState)(r||0);let T,z;e[0]!==r||e[1]!==h||e[2]!==i?(T=()=>{if(!g.current)return;const w=et.create({container:g.current,waveColor:h?"rgba(255, 255, 255, 0.35)":"rgba(135, 116, 225, 0.25)",progressColor:h?"#ffffff":"#8774e1",cursorColor:"transparent",barWidth:2,barGap:3,barRadius:2,height:28,normalize:!0,url:i});return n.current=w,w.on("ready",()=>{M(!0),r||E(w.getDuration())}),w.on("play",()=>c(!0)),w.on("pause",()=>c(!1)),w.on("finish",()=>{c(!1),w.setTime(0),b(0)}),w.on("audioprocess",()=>b(w.getCurrentTime())),w.on("interaction",()=>b(w.getCurrentTime())),()=>w.destroy()},z=[i,h,r],e[0]=r,e[1]=h,e[2]=i,e[3]=T,e[4]=z):(T=e[3],z=e[4]),(0,_.useEffect)(T,z);let d;e[5]===Symbol.for("react.memo_cache_sentinel")?(d=w=>{w.stopPropagation(),n.current?.playPause()},e[5]=d):d=e[5];const A=d,R=Rt,S=!o,k=h?"bg-white/20 text-white":"bg-[#8774e1] text-white";let u;e[6]!==k?(u=D("size-10 flex shrink-0 items-center justify-center rounded-full transition-all active:scale-90",k),e[6]=k,e[7]=u):u=e[7];let x;e[8]!==y||e[9]!==o?(x=o?y?(0,t.jsx)(Xe,{size:20,fill:"currentColor"}):(0,t.jsx)(be,{size:20,fill:"currentColor",className:"ml-0.5"}):(0,t.jsx)("span",{className:"animate-pulse font-bold",children:"..."}),e[8]=y,e[9]=o,e[10]=x):x=e[10];let p;e[11]!==S||e[12]!==u||e[13]!==x?(p=(0,t.jsx)("button",{type:"button",onClick:A,disabled:S,className:u,children:x}),e[11]=S,e[12]=u,e[13]=x,e[14]=p):p=e[14];let v;e[15]===Symbol.for("react.memo_cache_sentinel")?(v=(0,t.jsx)("div",{className:"h-7 w-full overflow-hidden",children:(0,t.jsx)("div",{ref:g,className:"w-full cursor-pointer"})}),e[15]=v):v=e[15];const l=h?"text-white/80":"text-[#8774e1]";let f;e[16]!==l?(f=D("text-[11px] font-medium mt-0.5 select-none tabular-nums",l),e[16]=l,e[17]=f):f=e[17];const m=y||a>0?R(a):R(N);let j;e[18]!==f||e[19]!==m?(j=(0,t.jsxs)("div",{className:"flex-1 flex flex-col justify-center min-w-0",children:[v,(0,t.jsx)("div",{className:f,children:m})]}),e[18]=f,e[19]=m,e[20]=j):j=e[20];let C;return e[21]!==j||e[22]!==p?(C=(0,t.jsxs)("div",{className:"flex items-center gap-3 py-1 min-w-[220px] md:min-w-[280px]",children:[p,j]}),e[21]=j,e[22]=p,e[23]=C):C=e[23],C},Tt=Mt;function Rt(s){return`${Math.floor(s/60)}:${Math.floor(s%60).toString().padStart(2,"0")}`}var $t=de(),Et=s=>{const e=(0,$t.c)(103),{message:i,isMe:r,isLastInGroup:h,showAvatar:g,onReply:n,onEdit:y,onDelete:c}=s,o=Pe(0);let M,a;e[0]===Symbol.for("react.memo_cache_sentinel")?(M=[0,-50],a=[0,1],e[0]=M,e[1]=a):(M=e[0],a=e[1]);const b=ye(o,M,a);let N,E;e[2]===Symbol.for("react.memo_cache_sentinel")?(N=[0,-50],E=[.5,1],e[2]=N,e[3]=E):(N=e[2],E=e[3]);const T=ye(o,N,E);let z;e[4]!==i||e[5]!==n?(z=(P,pe)=>{pe.offset.x<-50&&(n(i),window.navigator.vibrate&&window.navigator.vibrate(10))},e[4]=i,e[5]=n,e[6]=z):z=e[6];const d=z;let A;e[7]!==i.updatedAt?(A=new Intl.DateTimeFormat("en-US",{hour:"numeric",minute:"numeric",hour12:!0}).format(new Date(i.updatedAt)),e[7]=i.updatedAt,e[8]=A):A=e[8];const R=A,S=r?"justify-end":"justify-start",k=h?"mb-4":"mb-1";let u;e[9]!==S||e[10]!==k?(u=D("group relative flex w-full items-end gap-2 mb-1",S,k),e[9]=S,e[10]=k,e[11]=u):u=e[11];let x,p,v;e[12]===Symbol.for("react.memo_cache_sentinel")?(x={opacity:0,y:10},p={opacity:1,y:0},v={duration:.2},e[12]=x,e[13]=p,e[14]=v):(x=e[12],p=e[13],v=e[14]);let l;e[15]!==b||e[16]!==T?(l={opacity:b,scale:T,right:10},e[15]=b,e[16]=T,e[17]=l):l=e[17];let f;e[18]===Symbol.for("react.memo_cache_sentinel")?(f=(0,t.jsx)(Te,{size:16}),e[18]=f):f=e[18];let m;e[19]!==l?(m=(0,t.jsx)(ce.div,{style:l,className:"absolute top-1/2 -translate-y-1/2 flex items-center justify-center size-8 rounded-full bg-violet-500/20 text-violet-600 dark:text-violet-400 z-0 pointer-events-none",children:f}),e[19]=l,e[20]=m):m=e[20];let j;e[21]===Symbol.for("react.memo_cache_sentinel")?(j={left:-50,right:0},e[21]=j):j=e[21];let C;e[22]!==o?(C={x:o},e[22]=o,e[23]=C):C=e[23];const w=r?"flex-row-reverse":"flex-row";let ie;e[24]!==w?(ie=D("flex max-w-[75%] items-end gap-2 relative z-10",w),e[24]=w,e[25]=ie):ie=e[25];let J;e[26]!==r||e[27]!==i.senderAvatar||e[28]!==i.senderName||e[29]!==g?(J=!r&&(0,t.jsx)("div",{className:"w-8 flex-shrink-0",children:g?(0,t.jsx)("img",{src:i.senderAvatar||"/placeholder-avatar.png",alt:i.senderName,className:"size-8 rounded-full object-cover bg-zinc-200 dark:bg-zinc-800"}):(0,t.jsx)("div",{className:"w-8"})}),e[26]=r,e[27]=i.senderAvatar,e[28]=i.senderName,e[29]=g,e[30]=J):J=e[30];const re=r?"items-end":"items-start";let X;e[31]!==re?(X=D("flex flex-col min-w-0",re),e[31]=re,e[32]=X):X=e[32];let q;e[33]!==r||e[34]!==i.replyTo?(q=i.replyTo&&(0,t.jsxs)("div",{className:D("mb-1 flex items-center gap-2 rounded-lg bg-zinc-100 px-3 py-2 text-xs text-zinc-500 dark:bg-zinc-800 dark:text-zinc-400 max-w-full truncate opacity-80 hover:opacity-100 cursor-pointer transition-opacity",r?"self-end":"self-start"),children:[(0,t.jsx)("div",{className:"w-0.5 h-full bg-zinc-300 dark:bg-zinc-600 rounded-full"}),(0,t.jsxs)("span",{className:"font-semibold",children:[i.replyTo.senderName,":"]}),(0,t.jsx)("span",{className:"truncate max-w-[150px]",children:i.replyTo.text})]}),e[33]=r,e[34]=i.replyTo,e[35]=q):q=e[35];const Z=r?"rounded-2xl rounded-tr-sm bg-violet-600 text-white dark:bg-violet-600":"rounded-2xl rounded-tl-sm bg-zinc-100 text-zinc-900 dark:bg-zinc-800 dark:text-zinc-100",ae=i.isOptimistic&&"opacity-70";let ee;e[36]!==Z||e[37]!==ae?(ee=D("relative px-4 py-2 text-[15px] leading-relaxed break-words",Z,ae),e[36]=Z,e[37]=ae,e[38]=ee):ee=e[38];let K;e[39]!==r||e[40]!==i.media||e[41]!==i.text?(K=i.media&&i.media.length>0&&(0,t.jsx)("div",{className:D("mb-2 -mx-2 -mt-2 overflow-hidden rounded-xl",i.text?"mb-2":"-mb-2"),children:i.media.map((P,pe)=>(0,t.jsx)("div",{className:"relative",children:P.type==="video"||typeof P.url=="string"&&P.url.endsWith(".mp4")?(0,t.jsx)(gt,{src:P.url}):P.type==="audio"||P.type==="voice"||typeof P.url=="string"&&(P.url.endsWith(".webm")||P.url.endsWith(".mp3"))?(0,t.jsx)("div",{className:"px-2 py-1",children:(0,t.jsx)(Tt,{url:P.url,isMe:r,duration:P.duration})}):P.type==="image"||typeof P.url=="string"&&P.url.match(/\.(jpeg|jpg|gif|png|webp)$/i)?(0,t.jsx)("img",{src:P.url,className:"w-full h-auto object-cover max-h-[300px]",alt:"Attachment"}):(0,t.jsxs)("a",{href:P.url,target:"_blank",rel:"noopener noreferrer",className:D("flex items-center gap-3 p-3 rounded-lg border hover:bg-black/5 transition-colors",r?"border-white/20 bg-white/10":"border-zinc-200 bg-white dark:border-zinc-700 dark:bg-zinc-900"),children:[(0,t.jsx)("div",{className:D("p-2 rounded-full",r?"bg-white/20":"bg-zinc-100 dark:bg-zinc-800"),children:(0,t.jsx)(Ie,{size:20})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("p",{className:"text-sm font-medium truncate",children:P.name||"Attachment"}),(0,t.jsx)("p",{className:"text-xs opacity-70",children:P.size?`${(P.size/1024).toFixed(0)} KB`:"File"})]}),(0,t.jsx)(Le,{size:16,className:"opacity-70"})]})},pe))}),e[39]=r,e[40]=i.media,e[41]=i.text,e[42]=K):K=e[42];let B;e[43]!==i.media||e[44]!==i.type?(B=i.type==="voice"&&(!i.media||i.media.length===0)&&(0,t.jsx)("div",{className:"py-1",children:(0,t.jsx)("p",{className:"text-xs opacity-70 italic",children:"Voice message unavailable"})}),e[43]=i.media,e[44]=i.type,e[45]=B):B=e[45];const xe=i.text,me=r?"text-white":"text-zinc-900 dark:text-zinc-100";let G;e[46]!==me?(G=D(me),e[46]=me,e[47]=G):G=e[47];let L;e[48]!==i.text||e[49]!==G?(L=(0,t.jsx)(bt,{content:xe,className:G}),e[48]=i.text,e[49]=G,e[50]=L):L=e[50];const te=r?"text-white/80":"text-zinc-500 dark:text-zinc-400";let se;e[51]!==te?(se=D("mt-1 flex items-center justify-end gap-1 text-[10px] opacity-70",te),e[51]=te,e[52]=se):se=e[52];let V;e[53]!==R?(V=(0,t.jsx)("span",{children:R}),e[53]=R,e[54]=V):V=e[54];let U;e[55]!==r||e[56]!==i.isRead?(U=r&&(0,t.jsx)("span",{children:i.isRead?(0,t.jsx)(Je,{size:12}):(0,t.jsx)(Be,{size:12})}),e[55]=r,e[56]=i.isRead,e[57]=U):U=e[57];let O;e[58]!==se||e[59]!==V||e[60]!==U?(O=(0,t.jsxs)("div",{className:se,children:[V,U]}),e[58]=se,e[59]=V,e[60]=U,e[61]=O):O=e[61];let F;e[62]!==ee||e[63]!==K||e[64]!==B||e[65]!==L||e[66]!==O?(F=(0,t.jsx)(rt,{children:(0,t.jsxs)("div",{className:ee,children:[K,B,L,O]})}),e[62]=ee,e[63]=K,e[64]=B,e[65]=L,e[66]=O,e[67]=F):F=e[67];let H;e[68]!==i||e[69]!==n?(H=(0,t.jsx)(fe,{onClick:()=>n(i),children:"Reply"}),e[68]=i,e[69]=n,e[70]=H):H=e[70];let Q;e[71]!==i.text?(Q=i.text&&(0,t.jsx)(fe,{onClick:()=>navigator.clipboard.writeText(i.text),children:"Copy"}),e[71]=i.text,e[72]=Q):Q=e[72];let Y;e[73]!==r||e[74]!==i||e[75]!==c||e[76]!==y?(Y=r&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(it,{}),y&&i.type==="text"&&(0,t.jsx)(fe,{onClick:()=>y(i),children:"Edit"}),c&&(0,t.jsx)(fe,{className:"text-red-500 focus:text-red-500",onClick:()=>c(i),children:"Delete"})]}),e[73]=r,e[74]=i,e[75]=c,e[76]=y,e[77]=Y):Y=e[77];let $;e[78]!==H||e[79]!==Q||e[80]!==Y?($=(0,t.jsxs)(mt,{className:"w-48",children:[H,Q,Y]}),e[78]=H,e[79]=Q,e[80]=Y,e[81]=$):$=e[81];let I;e[82]!==F||e[83]!==$?(I=(0,t.jsxs)(tt,{children:[F,$]}),e[82]=F,e[83]=$,e[84]=I):I=e[84];let W;e[85]!==r||e[86]!==i.reactions?(W=i.reactions&&i.reactions.length>0&&(0,t.jsx)("div",{className:D("mt-1 flex flex-wrap gap-1",r?"justify-end":"justify-start"),children:i.reactions.map(Pt)}),e[85]=r,e[86]=i.reactions,e[87]=W):W=e[87];let ne;e[88]!==X||e[89]!==q||e[90]!==I||e[91]!==W?(ne=(0,t.jsxs)("div",{className:X,children:[q,I,W]}),e[88]=X,e[89]=q,e[90]=I,e[91]=W,e[92]=ne):ne=e[92];let le;e[93]!==d||e[94]!==C||e[95]!==ie||e[96]!==J||e[97]!==ne?(le=(0,t.jsxs)(ce.div,{drag:"x",dragConstraints:j,dragElastic:.1,onDragEnd:d,style:C,className:ie,children:[J,ne]}),e[93]=d,e[94]=C,e[95]=ie,e[96]=J,e[97]=ne,e[98]=le):le=e[98];let ue;return e[99]!==m||e[100]!==le||e[101]!==u?(ue=(0,t.jsxs)(ce.div,{className:u,initial:x,animate:p,transition:v,children:[m,le]}),e[99]=m,e[100]=le,e[101]=u,e[102]=ue):ue=e[102],ue},At=_.memo(Et);function Pt(s,e){return(0,t.jsx)("span",{className:"px-1.5 py-0.5 text-xs bg-zinc-100 dark:bg-zinc-800 rounded-full border border-zinc-200 dark:border-zinc-700",children:s.emoji},e)}var Dt=de();const It=()=>{const s=(0,Dt.c)(3);let e;s[0]===Symbol.for("react.memo_cache_sentinel")?(e={height:typeof window<"u"?window.innerHeight:0,keyboardOpen:!1,keyboardHeight:0},s[0]=e):e=s[0];const[i,r]=(0,_.useState)(e);let h,g;return s[1]===Symbol.for("react.memo_cache_sentinel")?(h=()=>{if(typeof window>"u"||!window.visualViewport)return;const n=()=>{const y=window.visualViewport,c=window.innerHeight,o=y.height,M=c-o,a=M>150,b=a?M:0;document.documentElement.style.setProperty("--viewport-height",`${o}px`),document.documentElement.style.setProperty("--keyboard-height",`${b}px`),document.documentElement.style.setProperty("--actual-viewport-height",`${o}px`),r({height:o,keyboardOpen:a,keyboardHeight:b}),a&&window.scrollTo(0,0)};return window.visualViewport.addEventListener("resize",n),window.visualViewport.addEventListener("scroll",n),window.addEventListener("resize",n),n(),()=>{window.visualViewport&&(window.visualViewport.removeEventListener("resize",n),window.visualViewport.removeEventListener("scroll",n)),window.removeEventListener("resize",n)}},g=[],s[1]=h,s[2]=g):(h=s[1],g=s[2]),(0,_.useEffect)(h,g),i};var Gt=({conversation:s,messages:e,currentUser:i,onBack:r,onSendMessage:h,onEditMessage:g,onDeleteMessage:n,onToggleReaction:y,onTyping:c,isLoading:o,isTyping:M,isOnline:a})=>{const b=Me(),N=(0,_.useRef)(null),[E,T]=(0,_.useState)(null),[z,d]=(0,_.useState)(null),{height:A,keyboardOpen:R}=It();(0,_.useEffect)(()=>{R&&N.current&&setTimeout(()=>{N.current?.scrollTo({top:N.current.scrollHeight,behavior:"smooth"})},100)},[R]),(0,_.useEffect)(()=>{N.current&&(N.current.scrollTop=N.current.scrollHeight)},[e.length,M]);const S=s.isGroup?s.name:s.user?.name,k=s.isGroup?s.avatar:s.user?.avatar,u=async(x,p,v)=>{if(z){g?.(z.id,x),d(null);return}let l=[],f="text";try{if(p.length>0){const m=await Promise.all(p.map(j=>_e(j)));l=m,f=m[0].type==="video"?"video":"image"}if(v){const m=await _e(new File([v],`voice-${Date.now()}.webm`,{type:"audio/webm"}));l.push(m),f="voice"}}catch(m){console.error("Failed to upload media:",m);return}h(s.id,x,f,l,E?.id),T(null)};return(0,t.jsxs)("div",{className:"flex w-full flex-col bg-white dark:bg-[#09090b] relative overflow-hidden",style:{height:`${A}px`},children:[(0,t.jsxs)("div",{className:"flex shrink-0 items-center justify-between border-b border-zinc-100 bg-white/80 px-4 py-3 backdrop-blur-md dark:border-zinc-800 dark:bg-[#09090b]/80 z-30",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(oe,{variant:"ghost",size:"icon",className:"md:hidden -ml-2",onClick:r,children:(0,t.jsx)(He,{size:20})}),(0,t.jsxs)("div",{className:"relative cursor-pointer",onClick:()=>s.user&&b(`/u/${s.user.handle}`),children:[(0,t.jsxs)(je,{className:"h-10 w-10 border border-zinc-200 dark:border-zinc-800",children:[(0,t.jsx)(ve,{src:k}),(0,t.jsx)(we,{children:S?.[0]})]}),a&&!s.isGroup&&(0,t.jsx)("span",{className:"absolute bottom-0 right-0 h-3 w-3 rounded-full border-[2px] border-white bg-emerald-500 dark:border-zinc-950"})]}),(0,t.jsxs)("div",{className:"flex flex-col cursor-pointer",onClick:()=>s.user&&b(`/u/${s.user.handle}`),children:[(0,t.jsx)("h3",{className:"text-sm font-bold text-zinc-900 dark:text-zinc-100 leading-none",children:S}),(0,t.jsx)("span",{className:"text-xs text-zinc-500 dark:text-zinc-400 mt-0.5",children:s.isGroup?`${s.members?.length||0} members`:a||s.user?.lastSeen&&new Date().getTime()-new Date(s.user.lastSeen).getTime()<6e4?"Active now":s.user?.lastSeen?`Last seen ${Re(s.user.lastSeen)}`:"Offline"})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(oe,{variant:"ghost",size:"icon",className:"text-zinc-500 dark:text-zinc-400",children:(0,t.jsx)(Ye,{size:20})}),(0,t.jsx)(oe,{variant:"ghost",size:"icon",className:"text-zinc-500 dark:text-zinc-400",children:(0,t.jsx)(Ve,{size:20})}),(0,t.jsx)(oe,{variant:"ghost",size:"icon",className:"text-zinc-500 dark:text-zinc-400",children:(0,t.jsx)(Ue,{size:20})})]})]}),(0,t.jsx)($e,{className:"flex-1 bg-zinc-50/50 dark:bg-[#09090b]",children:(0,t.jsxs)("div",{ref:N,className:"absolute inset-0 overflow-y-auto p-4 flex flex-col gap-1 pb-[100px] md:pb-[100px]",style:{overscrollBehavior:"contain"},children:[e.length===0&&!o&&(0,t.jsxs)("div",{className:"flex h-full flex-col items-center justify-center gap-4 text-center opacity-50",children:[(0,t.jsxs)(je,{className:"h-24 w-24 grayscale opacity-50",children:[(0,t.jsx)(ve,{src:k}),(0,t.jsx)(we,{children:S?.[0]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold",children:"Say hello!"}),(0,t.jsxs)("p",{className:"text-sm",children:["Start the conversation with ",S.split(" ")[0],"."]})]})]}),o&&e.length===0&&(0,t.jsx)("div",{className:"py-10 text-center text-sm text-zinc-500",children:"Loading messages..."}),e.map((x,p)=>{const v=x.sender==="me"||x.sender_id===i.id,l=p===e.length-1||e[p+1]?.sender!==x.sender;return(0,t.jsx)(At,{message:x,isMe:v,isLastInGroup:l,showAvatar:!v&&l,onReply:T,onEdit:v?()=>d(x):void 0,onDelete:v?n:void 0,onReaction:y},x.id||p)}),M&&(0,t.jsx)("div",{className:"flex items-end gap-2 mb-2 ml-10",children:(0,t.jsx)("div",{className:"rounded-2xl bg-zinc-100 px-4 py-3 dark:bg-zinc-800 rounded-tl-sm",children:(0,t.jsx)(at,{})})})]})}),(0,t.jsx)("div",{className:"fixed bottom-0 left-0 right-0 z-40 bg-white dark:bg-[#09090b] border-t border-zinc-100 dark:border-zinc-800 transition-transform duration-100 ease-out md:absolute md:transform-none",style:{bottom:"calc(env(safe-area-inset-bottom) + var(--keyboard-height, 0px))"},children:(0,t.jsx)("div",{className:"w-full max-w-[1500px] mx-auto md:max-w-none",children:(0,t.jsx)(St,{onSendMessage:u,onTyping:c,replyingTo:E,setReplyingTo:T,editingMessage:z,setEditingMessage:d})})})]})},Lt=Gt,Vt=de();function Ut(){const s=(0,Vt.c)(1);let e;return s[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsx)("div",{className:"flex flex-col",children:[1,2,3,4,5,6].map(Ot)}),s[0]=e):e=s[0],e}function Ot(s){return(0,t.jsxs)("div",{className:"flex items-center gap-3 p-4 border-b border-zinc-50 dark:border-zinc-900",children:[(0,t.jsx)(he,{className:"h-12 w-12 rounded-full"}),(0,t.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)(he,{className:"h-4 w-24 rounded"}),(0,t.jsx)(he,{className:"h-3 w-12 rounded"})]}),(0,t.jsx)(he,{className:"h-3 w-32 rounded"})]})]},s)}var Ft=de(),Ht=()=>{const s=(0,Ft.c)(33),{id:e,currentUser:i,onlineUsers:r,msgSearchQuery:h,setMsgSearchQuery:g,userSearchResults:n,filteredConversations:y,selectedConversation:c,localMessages:o,isConvLoading:M,isMsgLoading:a,currentIsTyping:b,otherUserIsOnline:N,handleStartConversation:E,handleSelectConversation:T,sendMessage:z,editMessage:d,onDeleteMessage:A,onToggleReaction:R,sendTypingStatus:S,typingStatus:k,navigate:u}=nt();if(!i){let C;s[0]===Symbol.for("react.memo_cache_sentinel")?(C=(0,t.jsx)("div",{className:"rounded-3xl bg-zinc-50 p-6 dark:bg-zinc-900",children:(0,t.jsx)(qe,{size:48,className:"text-zinc-300 dark:text-zinc-600"})}),s[0]=C):C=s[0];let w;return s[1]===Symbol.for("react.memo_cache_sentinel")?(w=(0,t.jsxs)("div",{className:"flex h-[100dvh] flex-col items-center justify-center gap-6 border-zinc-100 bg-white p-8 text-center dark:border-zinc-800 dark:bg-black md:h-[calc(100vh-1.5rem)] md:rounded-2xl md:border",children:[C,(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h3",{className:"text-2xl font-black tracking-tight dark:text-white",children:"Sign in to message"}),(0,t.jsx)("p",{className:"max-w-xs text-zinc-500 font-medium",children:"Join the conversation. Sign up or log in to start chatting."})]})]}),s[1]=w):w=s[1],w}if(M){let C;return s[2]===Symbol.for("react.memo_cache_sentinel")?(C=(0,t.jsx)("div",{className:"flex h-[100dvh] pt-4 md:h-[calc(100vh-1.5rem)] md:rounded-2xl border-zinc-100 bg-white dark:border-zinc-800 dark:bg-black md:border",children:(0,t.jsx)("div",{className:"w-full md:w-[420px]",children:(0,t.jsx)(Ut,{})})}),s[2]=C):C=s[2],C}const x=`flex ${e?"h-[100dvh]":"h-[calc(100dvh-4rem)]"} w-full max-w-full box-border overscroll-none overflow-x-hidden overflow-y-hidden bg-white shadow-2xl shadow-zinc-200/50 dark:border-zinc-800 dark:bg-[#0f0f0f] dark:shadow-none md:h-[calc(100vh-1.5rem)] md:rounded-3xl md:border md:border-zinc-200/50`,p=`flex-col md:flex md:w-[420px] ${c?"hidden":"flex"} h-full min-h-0 min-w-0 flex-1 md:flex-none bg-white dark:bg-[#0f0f0f] border-r border-zinc-100 dark:border-zinc-800 z-10`,v=e??null;let l;s[3]!==y||s[4]!==T||s[5]!==E||s[6]!==h||s[7]!==r||s[8]!==g||s[9]!==v||s[10]!==k||s[11]!==n?(l=(0,t.jsx)(zt,{conversations:y,userResults:n,onSelect:T,onStartNew:E,selectedId:v,searchQuery:h,onSearchChange:g,onlineUsers:r,typingStatus:k}),s[3]=y,s[4]=T,s[5]=E,s[6]=h,s[7]=r,s[8]=g,s[9]=v,s[10]=k,s[11]=n,s[12]=l):l=s[12];let f;s[13]!==p||s[14]!==l?(f=(0,t.jsx)("div",{className:p,children:l}),s[13]=p,s[14]=l,s[15]=f):f=s[15];let m;s[16]!==b||s[17]!==i||s[18]!==d||s[19]!==a||s[20]!==o||s[21]!==u||s[22]!==A||s[23]!==R||s[24]!==N||s[25]!==c||s[26]!==z||s[27]!==S?(m=c?(0,t.jsx)(Lt,{conversation:c,messages:o,currentUser:i,onBack:()=>u("/m"),onSendMessage:z,onEditMessage:d,onDeleteMessage:A,onToggleReaction:R,onTyping:C=>S(c.id,C),isLoading:a,isTyping:!!b,isOnline:!!N}):(0,t.jsxs)("div",{className:"hidden flex-1 flex-col items-center justify-center gap-6 text-zinc-500 md:flex bg-zinc-50/30 dark:bg-zinc-900/10",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"absolute -inset-10 rounded-full bg-violet-500/5 blur-3xl dark:bg-violet-500/10"}),(0,t.jsx)("div",{className:"relative rounded-[2.5rem] bg-white p-10 shadow-xl shadow-zinc-200/50 dark:bg-zinc-900/50 dark:shadow-none ring-1 ring-zinc-100 dark:ring-zinc-800",children:(0,t.jsx)(Ze,{size:80,className:"text-violet-500 stroke-[1.5]"})})]}),(0,t.jsxs)("div",{className:"text-center max-w-sm px-4 space-y-3",children:[(0,t.jsx)("h3",{className:"text-3xl font-black tracking-tighter text-zinc-900 dark:text-white",children:"Your Messages"}),(0,t.jsx)("p",{className:"text-zinc-500 font-medium text-lg",children:"Send private photos and messages to a friend or group."})]})]}),s[16]=b,s[17]=i,s[18]=d,s[19]=a,s[20]=o,s[21]=u,s[22]=A,s[23]=R,s[24]=N,s[25]=c,s[26]=z,s[27]=S,s[28]=m):m=s[28];let j;return s[29]!==x||s[30]!==f||s[31]!==m?(j=(0,t.jsxs)("div",{className:x,children:[f,m]}),s[29]=x,s[30]=f,s[31]=m,s[32]=j):j=s[32],j},ss=Ht;export{ss as default};

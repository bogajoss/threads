import{a as se}from"./rolldown-runtime-BaZ8gS7u.js";import{c as te,s as re}from"./animations-DZuN0xpW.js";import{c as ie}from"./framework-YRQI4BOE.js";import"./database-Bh-Nv8Zy.js";import{En as ne,Gt as ce,Pt as J,Tn as K,Xt as Y,Yt as ee,cn as de,en as oe,wn as xe}from"./ui-libs-Cxlst_z9.js";import"./media-libs-CqtNZWFg.js";import{$ as t,Cn as me,Ct as he,Dt as ue,Et as fe,Gt as je,Q as L,St as ge,Tt as ve,Ut as be,Wt as pe,Z as P,_ as Ne,et as I,ft as ke,p as ye,qt as V,tt as M,v as Z,wt as we}from"./index-Bu7l9gB1.js";var ze=ie(),j=se(te(),1),s=se(re(),1),Se=()=>{const e=(0,ze.c)(68),[i,_]=(0,j.useState)("");let v;e[0]===Symbol.for("react.memo_cache_sentinel")?(v={role:"all",status:"all"},e[0]=v):v=e[0];const[l,$]=(0,j.useState)(v),{users:n,actions:d}=ye(),[g,R]=(0,j.useState)(null);let c,m,h,u,o,x,f;if(e[1]!==d||e[2]!==l||e[3]!==i||e[4]!==n.data||e[5]!==n.isLoading){f=Symbol.for("react.early_return_sentinel");e:{let T;if(e[13]!==l||e[14]!==i?(T=a=>{if(!a)return!1;const B=a.name.toLowerCase().includes(i.toLowerCase())||a.handle.toLowerCase().includes(i.toLowerCase()),ae=l.role==="all"||a.role===l.role,le=l.status==="all"||l.status==="verified"&&a.verified||l.status==="unverified"&&!a.verified||l.status==="banned"&&a.isBanned;return B&&ae&&le},e[13]=l,e[14]=i,e[15]=T):T=e[15],c=(n.data||[]).filter(T),n.isLoading){let a;e[16]===Symbol.for("react.memo_cache_sentinel")?(a=(0,s.jsx)("div",{className:"flex min-h-[600px] items-center justify-center",children:(0,s.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,s.jsx)(ne,{className:"h-8 w-8 animate-spin text-violet-600"}),(0,s.jsx)("p",{className:"text-sm font-semibold text-zinc-500",children:"Loading users..."})]})}),e[16]=a):a=e[16],f=a;break e}u="space-y-6",e[17]===Symbol.for("react.memo_cache_sentinel")?(o=(0,s.jsx)("div",{className:"space-y-2",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-2xl bg-violet-600 text-white",children:(0,s.jsx)(J,{className:"h-5 w-5"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-black tracking-tight",children:"User Directory"}),(0,s.jsx)("p",{className:"text-sm text-zinc-500",children:"Manage platform users and permissions"})]})]})}),e[17]=o):o=e[17];let E;e[18]===Symbol.for("react.memo_cache_sentinel")?(E=(0,s.jsx)(oe,{className:"absolute left-3 top-1/2 h-5 w-5 -translate-y-1/2 text-zinc-400"}),e[18]=E):E=e[18];let q;e[19]===Symbol.for("react.memo_cache_sentinel")?(q=a=>_(a.target.value),e[19]=q):q=e[19];let y;e[20]!==i?(y=(0,s.jsxs)("div",{className:"relative",children:[E,(0,s.jsx)(ke,{placeholder:"Search by name or handle...",value:i,onChange:q,className:"h-11 rounded-xl border-zinc-200 bg-white pl-10 text-sm font-medium dark:border-zinc-800 dark:bg-black"})]}),e[20]=i,e[21]=y):y=e[21];let w;e[22]!==l?(w=a=>$({...l,role:a}),e[22]=l,e[23]=w):w=e[23];let H;e[24]===Symbol.for("react.memo_cache_sentinel")?(H=(0,s.jsx)(I,{className:"w-[180px] rounded-xl border-zinc-200 dark:border-zinc-800",children:(0,s.jsx)(M,{placeholder:"Filter by role"})}),e[24]=H):H=e[24];let O;e[25]===Symbol.for("react.memo_cache_sentinel")?(O=(0,s.jsxs)(L,{className:"rounded-xl dark:bg-zinc-900",children:[(0,s.jsx)(t,{value:"all",children:"All Roles"}),(0,s.jsx)(t,{value:"user",children:"Users"}),(0,s.jsx)(t,{value:"moderator",children:"Moderators"}),(0,s.jsx)(t,{value:"admin",children:"Admins"})]}),e[25]=O):O=e[25];let z;e[26]!==l.role||e[27]!==w?(z=(0,s.jsxs)(P,{value:l.role,onValueChange:w,children:[H,O]}),e[26]=l.role,e[27]=w,e[28]=z):z=e[28];let S;e[29]!==l?(S=a=>$({...l,status:a}),e[29]=l,e[30]=S):S=e[30];let G;e[31]===Symbol.for("react.memo_cache_sentinel")?(G=(0,s.jsx)(I,{className:"w-[180px] rounded-xl border-zinc-200 dark:border-zinc-800",children:(0,s.jsx)(M,{placeholder:"Filter by status"})}),e[31]=G):G=e[31];let X;e[32]===Symbol.for("react.memo_cache_sentinel")?(X=(0,s.jsxs)(L,{className:"rounded-xl dark:bg-zinc-900",children:[(0,s.jsx)(t,{value:"all",children:"All Status"}),(0,s.jsx)(t,{value:"verified",children:"Verified"}),(0,s.jsx)(t,{value:"unverified",children:"Unverified"}),(0,s.jsx)(t,{value:"banned",children:"Banned"})]}),e[32]=X):X=e[32];let C;e[33]!==l.status||e[34]!==S?(C=(0,s.jsxs)(P,{value:l.status,onValueChange:S,children:[G,X]}),e[33]=l.status,e[34]=S,e[35]=C):C=e[35];let U;e[36]!==l.role||e[37]!==l.status?(U=(l.role!=="all"||l.status!=="all")&&(0,s.jsx)(V,{variant:"outline",size:"sm",onClick:()=>$({role:"all",status:"all"}),className:"rounded-xl",children:"Clear Filters"}),e[36]=l.role,e[37]=l.status,e[38]=U):U=e[38];let D;e[39]!==z||e[40]!==C||e[41]!==U?(D=(0,s.jsxs)("div",{className:"flex flex-wrap gap-3",children:[z,C,U]}),e[39]=z,e[40]=C,e[41]=U,e[42]=D):D=e[42],e[43]!==y||e[44]!==D?(x=(0,s.jsxs)("div",{className:"space-y-4",children:[y,D]}),e[43]=y,e[44]=D,e[45]=x):x=e[45],m="overflow-hidden rounded-3xl border border-zinc-200 dark:border-zinc-800",h=c.length===0?(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center bg-white py-12 text-center dark:bg-black",children:[(0,s.jsx)(J,{className:"h-12 w-12 text-zinc-300 dark:text-zinc-700"}),(0,s.jsx)("p",{className:"mt-4 font-semibold text-zinc-600 dark:text-zinc-400",children:"No users found"}),(0,s.jsx)("p",{className:"text-sm text-zinc-500",children:"Try adjusting your search or filters"})]}):(0,s.jsx)("div",{className:"divide-y divide-zinc-200 bg-white dark:divide-zinc-800 dark:bg-black",children:c.map(a=>a?(0,s.jsxs)("div",{className:"flex flex-col gap-4 p-4 transition-colors hover:bg-zinc-50 dark:hover:bg-zinc-900/50 sm:flex-row sm:items-center sm:justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4 min-w-0",children:[(0,s.jsxs)("div",{className:"relative shrink-0",children:[(0,s.jsxs)(be,{className:"h-12 w-12 rounded-2xl ring-2 ring-zinc-200 dark:ring-zinc-800",children:[(0,s.jsx)(je,{src:a.avatar,className:"rounded-2xl"}),(0,s.jsx)(pe,{className:"rounded-2xl bg-violet-500/10 text-sm font-bold text-violet-600",children:a.name[0]?.toUpperCase()})]}),a.verified&&(0,s.jsx)(Y,{className:"absolute -bottom-2 -right-2 h-5 w-5 rounded-full bg-blue-500 p-0.5 text-white"})]}),(0,s.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,s.jsx)("h3",{className:"truncate font-semibold text-foreground",children:a.name}),(0,s.jsxs)("p",{className:"truncate text-sm text-zinc-500",children:["@",a.handle]})]})]}),(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-2 sm:justify-end",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 rounded-xl bg-zinc-100 px-3 py-1.5 dark:bg-zinc-900",children:[(0,s.jsx)(xe,{className:"h-3.5 w-3.5 text-zinc-600 dark:text-zinc-400"}),(0,s.jsx)("span",{className:"text-xs font-semibold uppercase tracking-wider text-zinc-700 dark:text-zinc-300",children:a.role})]}),(0,s.jsx)("div",{className:"flex items-center gap-2 rounded-xl bg-zinc-100 px-3 py-1.5 dark:bg-zinc-900",children:(0,s.jsx)("span",{className:"text-xs font-semibold uppercase tracking-wider text-zinc-700 dark:text-zinc-300",children:a.roles})}),a.isPro&&(0,s.jsxs)("div",{className:"flex items-center gap-1.5 rounded-xl bg-amber-500/10 px-3 py-1.5",children:[(0,s.jsx)(ce,{className:"h-3.5 w-3.5 text-amber-600 dark:text-amber-400"}),(0,s.jsx)("span",{className:"text-xs font-semibold text-amber-700 dark:text-amber-400",children:"PRO"})]}),a.verified&&(0,s.jsxs)("div",{className:"flex items-center gap-1.5 rounded-xl bg-blue-500/10 px-3 py-1.5",children:[(0,s.jsx)(Y,{className:"h-3.5 w-3.5 text-blue-600 dark:text-blue-400"}),(0,s.jsx)("span",{className:"text-xs font-semibold text-blue-700 dark:text-blue-400",children:"Verified"})]}),a.isBanned&&(0,s.jsxs)("div",{className:"flex items-center gap-1.5 rounded-xl bg-rose-500/10 px-3 py-1.5",children:[(0,s.jsx)(ee,{className:"h-3.5 w-3.5 text-rose-600 dark:text-rose-400"}),(0,s.jsx)("span",{className:"text-xs font-semibold text-rose-700 dark:text-rose-400",children:"Banned"})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 sm:justify-end",children:[(0,s.jsx)(V,{variant:"outline",size:"sm",onClick:()=>R(a),title:"Manage user",className:"h-9 rounded-lg px-3",children:(0,s.jsx)(de,{className:"h-4 w-4"})}),(0,s.jsxs)(P,{value:a.role,onValueChange:B=>d.updateRole({userId:a.id,role:B}),children:[(0,s.jsx)(I,{className:"w-[130px] rounded-lg border-zinc-200 text-xs font-semibold dark:border-zinc-800",children:(0,s.jsx)(M,{})}),(0,s.jsxs)(L,{className:"rounded-xl dark:bg-zinc-900",children:[(0,s.jsx)(t,{value:"user",children:"User"}),(0,s.jsx)(t,{value:"moderator",children:"Moderator"}),(0,s.jsx)(t,{value:"admin",children:"Admin"})]})]}),(0,s.jsx)(V,{variant:"outline",size:"sm",onClick:()=>d.toggleVerification({userId:a.id,verified:!a.verified}),title:a.verified?"Remove verification":"Verify user",className:"h-9 rounded-lg px-3",children:a.verified?(0,s.jsx)(K,{className:"h-4 w-4"}):(0,s.jsx)(Y,{className:"h-4 w-4"})}),(0,s.jsx)(V,{variant:"outline",size:"sm",onClick:()=>{const B=a.isBanned?"unban":"ban";confirm(`Are you sure you want to ${B} @${a.handle}?`)&&d.toggleBan({userId:a.id,banned:!a.isBanned})},title:a.isBanned?"Unban user":"Ban user",className:me("h-9 rounded-lg px-3",a.isBanned?"border-emerald-200 bg-emerald-50 text-emerald-700 hover:bg-emerald-100 dark:border-emerald-900 dark:bg-emerald-900/20 dark:text-emerald-400":"border-rose-200 bg-rose-50 text-rose-700 hover:bg-rose-100 dark:border-rose-900 dark:bg-rose-900/20 dark:text-rose-400"),children:a.isBanned?(0,s.jsx)(K,{className:"h-4 w-4"}):(0,s.jsx)(ee,{className:"h-4 w-4"})})]})]},a.id):null)})}e[1]=d,e[2]=l,e[3]=i,e[4]=n.data,e[5]=n.isLoading,e[6]=c,e[7]=m,e[8]=h,e[9]=u,e[10]=o,e[11]=x,e[12]=f}else c=e[6],m=e[7],h=e[8],u=e[9],o=e[10],x=e[11],f=e[12];if(f!==Symbol.for("react.early_return_sentinel"))return f;let r;e[46]!==m||e[47]!==h?(r=(0,s.jsx)("div",{className:m,children:h}),e[46]=m,e[47]=h,e[48]=r):r=e[48];let b;e[49]!==c.length?(b=(0,s.jsx)("span",{className:"font-semibold text-foreground",children:c.length}),e[49]=c.length,e[50]=b):b=e[50];const Q=n.data?.length||0;let p;e[51]!==Q?(p=(0,s.jsx)("span",{className:"font-semibold text-foreground",children:Q}),e[51]=Q,e[52]=p):p=e[52];let N;e[53]!==p||e[54]!==b?(N=(0,s.jsx)("div",{className:"rounded-2xl border border-zinc-200 bg-white p-4 dark:border-zinc-800 dark:bg-black",children:(0,s.jsxs)("p",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:["Showing"," ",b," ","of"," ",p," ","users"]})}),e[53]=p,e[54]=b,e[55]=N):N=e[55];const W=!!g;let A;e[56]===Symbol.for("react.memo_cache_sentinel")?(A=()=>R(null),e[56]=A):A=e[56];let k;e[57]!==d||e[58]!==g||e[59]!==W?(k=(0,s.jsx)(Ce,{user:g,isOpen:W,onClose:A,actions:d}),e[57]=d,e[58]=g,e[59]=W,e[60]=k):k=e[60];let F;return e[61]!==N||e[62]!==k||e[63]!==u||e[64]!==o||e[65]!==x||e[66]!==r?(F=(0,s.jsxs)("div",{className:u,children:[o,x,r,N,k]}),e[61]=N,e[62]=k,e[63]=u,e[64]=o,e[65]=x,e[66]=r,e[67]=F):F=e[67],F},Ce=({user:e,isOpen:i,onClose:_,actions:v})=>{if(!i)return null;const[l,$]=(0,j.useState)(e.roles||"Newbie"),[n,d]=(0,j.useState)(e.isPro||!1),[g,R]=(0,j.useState)(30),[c,m]=(0,j.useState)(!1),[h,u]=(0,j.useState)(!1),o=()=>{let r=null;c&&(r=n?g:0),(h||c)&&v.adminUpdateUser({userId:e.id,role:h?l:null,proValidityDays:r}),_()},x=r=>{$(r),u(!0)},f=r=>{d(r),m(!0)};return(0,s.jsx)(ge,{open:i,onOpenChange:_,children:(0,s.jsxs)(he,{className:"sm:max-w-[425px] rounded-2xl",children:[(0,s.jsxs)(fe,{children:[(0,s.jsxs)(ue,{children:["Manage ",e.name]}),(0,s.jsx)(we,{children:"Update user role and pro status. Changes are saved upon clicking 'Save changes'."})]}),(0,s.jsxs)("div",{className:"grid gap-6 py-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,s.jsx)(Z,{htmlFor:"role",className:"text-right",children:"Role"}),(0,s.jsx)("div",{className:"col-span-3",children:(0,s.jsxs)(P,{value:l,onValueChange:x,children:[(0,s.jsx)(I,{children:(0,s.jsx)(M,{placeholder:"Select a role"})}),(0,s.jsxs)(L,{children:[(0,s.jsx)(t,{value:"Newbie",children:"Newbie"}),(0,s.jsx)(t,{value:"Hunter",children:"Hunter"}),(0,s.jsx)(t,{value:"Elite",children:"Elite"})]})]})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,s.jsx)(Z,{htmlFor:"is-pro",className:"text-right",children:"Pro Status"}),(0,s.jsx)(Ne,{id:"is-pro",checked:n,onCheckedChange:f})]}),n&&(0,s.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,s.jsx)(Z,{htmlFor:"validity",className:"text-right",children:"Validity"}),(0,s.jsx)("div",{className:"col-span-3",children:(0,s.jsxs)(P,{value:String(g),onValueChange:r=>{R(Number(r)),m(!0)},children:[(0,s.jsx)(I,{children:(0,s.jsx)(M,{placeholder:"Select validity"})}),(0,s.jsxs)(L,{children:[(0,s.jsx)(t,{value:"7",children:"7 days"}),(0,s.jsx)(t,{value:"15",children:"15 days"}),(0,s.jsx)(t,{value:"30",children:"30 days"}),(0,s.jsx)(t,{value:"90",children:"90 days"}),(0,s.jsx)(t,{value:"365",children:"365 days"})]})]})})]})]}),(0,s.jsxs)(ve,{children:[(0,s.jsx)(V,{variant:"outline",onClick:_,children:"Cancel"}),(0,s.jsx)(V,{onClick:o,children:"Save changes"})]})]})})},Pe=Se;export{Pe as default};

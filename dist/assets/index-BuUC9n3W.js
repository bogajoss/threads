const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Home-BC20PAej.js","assets/framework-pMVb9Z5_.js","assets/rolldown-runtime-2JzG8er9.js","assets/framework-sg0yWRLc.css","assets/ui-libs-C0jnt0Gl.js","assets/ui-libs-CqCaMccn.css","assets/database-ApDMvJcm.js","assets/linkify-fXGRsD3N.js","assets/post-CUshWiyt.js","assets/query-CYcBlx0y.js","assets/hooks-DyU63E8q.js","assets/Explore-OmjGMPlL.js","assets/Reels-CI2rRBEO.js","assets/Messages-Bozy05FM.js","assets/Notifications-DDh4AeOK.js","assets/Profile-2ZGJx53v.js","assets/Community-DrF3Qlsh.js","assets/PostDetails-DR_6EaZU.js","assets/Settings-BS0XxYt6.js","assets/HashtagFeed-CmwsMY8o.js"])))=>i.map(i=>d[i]);
import{n as On}from"./rolldown-runtime-2JzG8er9.js";import{C as Xr,S as Ua,_ as Ha,a as Ba,d as qa,f as Qr,g as We,h as Wa,i as Va,m as ar,p as Kr,r as Ya,s as ie,u as Xa,v as gn,w as Qa,x as ft,y as vn}from"./framework-pMVb9Z5_.js";import{a as Ka,i as Un,n as Mt,r as Za,t as Ja}from"./query-CYcBlx0y.js";import{t as Ga}from"./database-ApDMvJcm.js";import{$ as $a,A as eo,B as to,C as no,D as ro,Dt as Zr,E as so,F as ao,Ft as oo,G as io,H as lo,I as co,J as uo,Jt as fo,K as mo,Kt as ho,L as po,Lt as go,M as vo,N as bo,O as xo,Ot as wo,P as yo,Q as jo,R as Co,S as ko,Sn as _o,St as So,T as No,Tt as zo,U as Ao,Ut as mt,V as Eo,W as Ro,X as Io,Y as Mo,Z as Do,Zt as or,_ as Jr,_n as ir,a as To,at as Po,b as Lo,bn as Fo,c as Oo,cn as Uo,ct as Ho,d as Bo,dn as Gr,et as qo,f as $r,fn as es,g as ts,gn as Wo,h as ns,i as Vo,it as Yo,j as Xo,jt as Vt,k as Qo,l as rs,ln as ss,m as Ko,mn as Zo,mt as In,n as Jo,nt as Go,o as as,on as $o,ot as ei,p as ti,pn as os,pt as is,q as ni,qt as ri,r as si,rt as ai,s as Xf,st as oi,tn as ii,tt as li,u as ci,un as di,ut as Et,v as ls,w as ui,x as fi,xn as mi,xt as hi,y as pi,yt as gi,z as vi}from"./ui-libs-C0jnt0Gl.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}})();var bi=Ua(),g=On(Qa(),1),xi="https://dbkcedktqhueqnulnosq.supabase.co",wi="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRia2NlZGt0cWh1ZXFudWxub3NxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njg5NzE1NTQsImV4cCI6MjA4NDU0NzU1NH0.m_Tv-H7o5mL1Nac6TH-S1JkS1x7ZN1AK_4Mt1hZlkvU";const Y=Ga(xi,wi);var yi=ie();function oe(...t){return mi(_o(t))}const ji=()=>{const t=(0,yi.c)(2),{pathname:e}=gn();let n;return t[0]!==e?(n=[e],t[0]=e,t[1]=n):n=t[1],(0,g.useEffect)(ki,n),null},tn=t=>typeof t!="string"?!1:/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(t),Ci=(t,e)=>{const n=document.createElement("canvas"),s=t.naturalWidth/t.width,r=t.naturalHeight/t.height;n.width=e.width*s,n.height=e.height*r;const a=n.getContext("2d");return a.imageSmoothingEnabled=!0,a.imageSmoothingQuality="high",a.drawImage(t,e.x*s,e.y*r,e.width*s,e.height*r,0,0,e.width*s,e.height*r),new Promise((o,i)=>{n.toBlob(d=>{if(!d){i(new Error("Canvas is empty"));return}o(d)},"image/jpeg",.95)})},cs=t=>{if(!t)return"";const e=new Date-new Date(t),n=Math.floor(e/1e3),s=Math.floor(n/60),r=Math.floor(s/60),a=Math.floor(r/24);return n<60?"Just now":s<60?`${s}m ago`:r<24?`${r}h ago`:a<7?`${a}d ago`:new Date(t).toLocaleDateString(void 0,{day:"2-digit",month:"2-digit",year:"2-digit"})},Qf=t=>typeof t!="string"?!1:/[\u0980-\u09FF]/.test(t),Kf=t=>{if(!t)return null;const e=t.match(/(https?:\/\/[^\s]+)/g);return e?e[0]:null};function ki(){window.scrollTo(0,0)}const wt=t=>t?{id:t.id,handle:t.username,name:t.display_name,avatar:t.avatar_url||"/default-avatar.webp",cover:t.cover_url||"/welcome-banner.webp",verified:t.is_verified,bio:t.bio,location:t.location,website:t.website,follower_count:t.follower_count||0,following_count:t.following_count||0,lastSeen:t.last_seen_at}:null,yt=t=>{if(!t)return null;const e=t.reposter_id||t.reposter_data?.id||t.reposted_by?.id,n=Math.random().toString(36).substring(2,9),s=`${t.feed_id||(e?`${t.id}-${e}`:`${t.id}-orig`)}-${n}`;return{...t,feed_id:s,stats:{comments:t.comments_count||0,likes:t.likes_count||0,mirrors:t.mirrors_count||0},user:wt(t.author_data||t.user),community:t.community_data||t.communities?{...t.community_data||t.communities,avatar:(t.community_data||t.communities).avatar_url||(t.community_data||t.communities).avatar}:null,repostedBy:t.reposter_data?{handle:t.reposter_data.username,name:t.reposter_data.display_name,id:t.reposter_data.id}:t.reposted_by?{handle:t.reposted_by.username,name:t.reposted_by.display_name,id:t.reposted_by.id}:null,timeAgo:cs(t.created_at)}},ds=t=>t?{...t,stats:{likes:t.likes_count||0},user:wt(t.user),timeAgo:cs(t.created_at)}:null,_i=t=>t?{...t,user:t.actor?.username,avatar:t.actor?.avatar_url||"/default-avatar.webp"}:null,us=t=>t?{...t,media:t.media_url,user:wt(t.user)}:null,Zt=t=>t?{id:t.id,handle:t.handle,name:t.name,description:t.description,avatar:t.avatar_url||"/default-avatar.webp",cover:t.cover_url||"/welcome-banner.webp",membersCount:t.members_count||0,postsCount:t.posts_count||0,isPrivate:t.is_private,createdAt:t.created_at,type:"community",creatorId:t.creator_id}:null,Si=t=>t?{id:t.id,conversation_id:t.conversation_id,sender_id:t.sender_id,content:t.content,type:t.type||"text",media:t.media||[],reply_to_id:t.reply_to_id,is_read:t.is_read,created_at:t.created_at}:null,Ni=(t,e)=>{if(!t||!t.conversation)return null;const n=t.conversation,s=n.participants.find(a=>a.user?.id!==e)||n.participants[0],r=n.messages?.filter(a=>!a.is_read&&a.sender_id!==e).length||0;return{id:n.id,user:wt(s?.user),lastMessage:n.last_message_content||"No messages yet",lastMessageAt:n.last_message_at,time:n.last_message_at?new Date(n.last_message_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"",unread:r}},Zf=async(t,e=10)=>{const{data:n,error:s}=await Y.from("users").select("*").or(`username.ilike.%${t}%,display_name.ilike.%${t}%`).limit(e);if(s)throw s;return n.map(wt)},fs=async(t,e="id")=>{let n=Y.from("users").select("*");e==="id"?n=n.eq("id",t):n=n.ilike("username",t);const{data:s,error:r}=await n.maybeSingle();if(r)throw r;return s?wt(s):null},zi=t=>fs(t,"username"),kt=async t=>{if(!t)return;const{error:e}=await Y.from("users").update({last_seen_at:new Date().toISOString()}).eq("id",t);if(e)throw e},Ai=async(t,e)=>{const n={display_name:e.name,username:e.handle,avatar_url:e.avatar,bio:e.bio,cover_url:e.cover,website:e.website,location:e.location};Object.keys(n).forEach(r=>n[r]===void 0&&delete n[r]);const{error:s}=await Y.from("users").update(n).eq("id",t);if(s)throw s},Ei=async(t,e)=>{const{data:n}=await Y.from("follows").select("*").eq("follower_id",t).eq("following_id",e).maybeSingle();return n?(await Y.from("follows").delete().eq("follower_id",t).eq("following_id",e),!1):(await Y.from("follows").insert([{follower_id:t,following_id:e}]),!0)},Ri=async(t,e)=>{if(!t)return!1;const{data:n}=await Y.from("follows").select("*").eq("follower_id",t).eq("following_id",e).maybeSingle();return!!n},Jf=async(t,e=null,n=10)=>{let s=Y.from("follows").select(`
      created_at,
      user:users!follower_id (
        id,
        username,
        display_name,
        avatar_url,
        is_verified,
        bio
      )
    `).eq("following_id",t).order("created_at",{ascending:!1}).limit(n);e&&(s=s.lt("created_at",e));const{data:r,error:a}=await s;if(a)throw a;return r.map(o=>({...wt(o.user),followed_at:o.created_at}))},Gf=async(t,e=null,n=10)=>{let s=Y.from("follows").select(`
      created_at,
      user:users!following_id (
        id,
        username,
        display_name,
        avatar_url,
        is_verified,
        bio
      )
    `).eq("follower_id",t).order("created_at",{ascending:!1}).limit(n);e&&(s=s.lt("created_at",e));const{data:r,error:a}=await s;if(a)throw a;return r.map(o=>({...wt(o.user),followed_at:o.created_at}))},Ii=async t=>{const{data:e,error:n}=await Y.from("users").select("follower_count, following_count").eq("id",t).maybeSingle();return n||!e?{followers:0,following:0}:{followers:e.follower_count||0,following:e.following_count||0}},Mi=async(t=null,e=10)=>{let n=Y.from("unified_posts").select("*").order("sort_timestamp",{ascending:!1}).limit(e);t&&(n=n.lt("sort_timestamp",t));const{data:s,error:r}=await n;if(r)throw r;return s.map(yt)},$f=async t=>{const{data:e,error:n}=await Y.from("posts").select(`
            *,
            user:users!user_id (
                id,
                username,
                display_name,
                avatar_url,
                is_verified,
                bio,
                location,
                website,
                follower_count,
                following_count
            ),
            communities (
                id,
                handle,
                name,
                avatar_url
            ),
            quoted_post:posts!quoted_post_id (
                *,
                user:users!user_id (
                    id,
                    username,
                    display_name,
                    avatar_url,
                    is_verified
                )
            )
        `).eq("id",t).single();if(n)throw n;return yt(e)},em=async(t,e=null,n=10)=>{let s=Y.from("unified_posts").select("*").or(`user_id.eq.${t},reposter_id.eq.${t}`).order("sort_timestamp",{ascending:!1}).limit(n);e&&(s=s.lt("sort_timestamp",e));const{data:r,error:a}=await s;if(a)throw a;return r.map(yt)},Di=async({content:t,media:e=[],type:n="text",userId:s,poll:r=null,parentId:a=null,communityId:o=null})=>{const{data:i,error:d}=await Y.from("posts").insert([{user_id:s,content:t,media:e,type:n,poll:r,parent_id:a,community_id:o}]).select(`
            *,
            user:users!user_id (
                id,
                username,
                display_name,
                avatar_url,
                is_verified
            ),
            communities:community_id (
                id,
                handle,
                name,
                avatar_url
            )
        `);if(d)throw d;return yt(i[0])},Ti=async t=>{const{error:e}=await Y.from("posts").delete().eq("id",t);if(e)throw e},Pi=async(t,e)=>{const{error:n}=await Y.from("posts").update(e).eq("id",t);if(n)throw n},tm=async(t,e=null,n=10)=>{let s=Y.from("comments").select(`
            *,
            user:users!user_id (
                id,
                username,
                display_name,
                avatar_url,
                is_verified
            )
        `).eq("post_id",t).order("created_at",{ascending:!0}).limit(n);e&&(s=s.gt("created_at",e));const{data:r,error:a}=await s;if(a)throw a;return r.map(ds)},nm=async(t,e,n,s=[])=>{const{data:r,error:a}=await Y.from("comments").insert([{post_id:t,user_id:e,content:n,media:s}]).select(`
            *,
            user:users!user_id (
                id,
                username,
                display_name,
                avatar_url,
                is_verified
            )
        `);if(a)throw a;return ds(r[0])},rm=async(t,e)=>{const{data:n}=await Y.from("likes").select("*").eq("post_id",t).eq("user_id",e).maybeSingle();return n?(await Y.from("likes").delete().eq("post_id",t).eq("user_id",e),!1):(await Y.from("likes").insert([{post_id:t,user_id:e}]),!0)},sm=async(t,e)=>{if(!e)return!1;const{data:n}=await Y.from("likes").select("*").eq("post_id",t).eq("user_id",e).maybeSingle();return!!n},am=async(t,e)=>{const{data:n}=await Y.from("reposts").select("*").eq("post_id",t).eq("user_id",e).maybeSingle();return n?(await Y.from("reposts").delete().eq("post_id",t).eq("user_id",e),!1):(await Y.from("reposts").insert([{post_id:t,user_id:e}]),!0)},om=async(t,e)=>{if(!e)return!1;const{data:n}=await Y.from("reposts").select("*").eq("post_id",t).eq("user_id",e).maybeSingle();return!!n},im=async(t,e=null,n=10,s=!1)=>{let r=Y.from("unified_posts").select("*").ilike("content",`%${t}%`);s&&(r=r.not("community_id","is",null).is("reposter_id",null)),r=r.order("sort_timestamp",{ascending:!1}).limit(n),e&&(r=r.lt("sort_timestamp",e));const{data:a,error:o}=await r;if(o)throw o;return a.map(yt)},lm=async(t=null,e=10)=>{let n=Y.from("unified_posts").select("*").not("community_id","is",null).is("reposter_id",null).order("sort_timestamp",{ascending:!1}).limit(e);t&&(n=n.lt("sort_timestamp",t));const{data:s,error:r}=await n;if(r)throw r;return s.map(yt)},cm=async(t=null,e=10)=>{let n=Y.from("unified_posts").select("*").eq("type","video").order("sort_timestamp",{ascending:!1}).limit(e);t&&(n=n.lt("sort_timestamp",t));const{data:s,error:r}=await n;if(r)throw r;return s.map(yt)},dm=async(t,e)=>{const{data:n}=await Y.from("conversation_participants").select("conversation_id").eq("user_id",t),s=n.map(i=>i.conversation_id),{data:r}=await Y.from("conversation_participants").select("conversation_id").eq("user_id",e).in("conversation_id",s).maybeSingle();if(r)return r.conversation_id;const{data:a,error:o}=await Y.from("conversations").insert([{}]).select().single();if(o)throw o;return await Y.from("conversation_participants").insert([{conversation_id:a.id,user_id:t},{conversation_id:a.id,user_id:e}]),a.id},Li=async t=>{if(!t)return 0;const{data:e}=await Y.from("conversation_participants").select("conversation_id").eq("user_id",t),n=e?.map(a=>a.conversation_id)||[];if(n.length===0)return 0;const{count:s,error:r}=await Y.from("messages").select("*",{count:"exact",head:!0}).eq("is_read",!1).neq("sender_id",t).in("conversation_id",n);if(r)throw r;return s||0},Fi=async(t,e)=>{if(!t||!e)return;const{error:n}=await Y.from("messages").update({is_read:!0}).eq("conversation_id",t).neq("sender_id",e).eq("is_read",!1);if(n)throw n},Oi=async t=>{if(!t)return[];const{data:e,error:n}=await Y.from("conversation_participants").select(`
            conversation:conversations (
                id,
                last_message_at,
                last_message_content,
                participants:conversation_participants (
                    user:users (
                        id,
                        username,
                        display_name,
                        avatar_url,
                        last_seen_at
                    )
                ),
                messages (
                    id,
                    is_read,
                    sender_id
                )
            )
        `).eq("user_id",t);if(n)throw n;return e.map(s=>Ni(s,t)).sort((s,r)=>s.lastMessageAt?r.lastMessageAt?new Date(r.lastMessageAt)-new Date(s.lastMessageAt):-1:1)},um=async t=>{const{data:e,error:n}=await Y.from("messages").select("*").eq("conversation_id",t).order("created_at",{ascending:!0});if(n)throw n;return e.map(Si)},Ui=async()=>{const{data:t,error:e}=await Y.from("message_reactions").select("*");if(e)throw e;return t||[]},Hi=async(t,e,n)=>{const{data:s}=await Y.from("message_reactions").select("*").eq("message_id",t).eq("user_id",e).maybeSingle();return s?s.emoji===n?(await Y.from("message_reactions").delete().eq("id",s.id),{action:"removed",emoji:n}):(await Y.from("message_reactions").update({emoji:n}).eq("id",s.id),{action:"updated",emoji:n}):(await Y.from("message_reactions").insert([{message_id:t,user_id:e,emoji:n}]),{action:"added",emoji:n})},Bi=async(t,e,n,s="text",r=[],a=null)=>{const{data:o,error:i}=await Y.from("messages").insert([{conversation_id:t,sender_id:e,content:n,type:s,media:r,reply_to_id:a}]).select();if(i)throw i;return await Y.from("conversations").update({last_message_at:new Date,last_message_content:s==="image"||r&&r.length>0?"Sent an image":n}).eq("id",t),o[0]},qi=async t=>{const{error:e}=await Y.from("messages").delete().eq("id",t);if(e)throw e},fm=async(t,e=null,n=10)=>{if(!t)return[];let s=Y.from("notifications").select(`
            *,
            actor:users!actor_id (
                username,
                avatar_url
            )
        `).eq("recipient_id",t).order("created_at",{ascending:!1}).limit(n);e&&(s=s.lt("created_at",e));const{data:r,error:a}=await s;if(a)throw a;return r.map(_i)},mm=async t=>{const{error:e}=await Y.from("notifications").update({is_read:!0}).eq("recipient_id",t).eq("is_read",!1);if(e)throw e},Wi=async t=>{if(!t)return 0;const{count:e,error:n}=await Y.from("notifications").select("*",{count:"exact",head:!0}).eq("recipient_id",t).eq("is_read",!1);if(n)throw n;return e||0},hm=async()=>{const{data:t,error:e}=await Y.from("stories").select(`
            *,
            user:users!user_id (
                id,
                username,
                display_name,
                avatar_url,
                is_verified
            )
        `).gt("expires_at",new Date().toISOString()).order("created_at",{ascending:!1});if(e)throw e;return t.map(us)},Vi=async(t,e,n="image")=>{const{data:s,error:r}=await Y.from("stories").insert([{user_id:t,media_url:e,type:n}]).select(`
            *,
            user:users!user_id (
                id,
                username,
                display_name,
                avatar_url,
                is_verified
            )
        `);if(r)throw r;return us(s[0])},pm=async(t=null,e=10)=>{let n=Y.from("communities").select("*").order("created_at",{ascending:!1}).limit(e);t&&(n=n.lt("created_at",t));const{data:s,error:r}=await n;if(r)throw r;return s.map(Zt)},gm=async t=>{const{data:e,error:n}=await Y.from("communities").select("*").eq("handle",t).single();if(n)throw n;return Zt(e)},vm=async(t,e=null,n=10)=>{let s=Y.from("unified_posts").select("*").eq("community_id",t).is("reposter_id",null).order("sort_timestamp",{ascending:!1}).limit(n);e&&(s=s.lt("sort_timestamp",e));const{data:r,error:a}=await s;if(a)throw a;return r.map(yt)},Yi=async(t,e)=>{const{data:n}=await Y.from("community_members").select("*").eq("community_id",t).eq("user_id",e).maybeSingle();if(n){const{error:s}=await Y.from("community_members").delete().eq("community_id",t).eq("user_id",e);if(s)throw s;return!1}else{const{error:s}=await Y.from("community_members").insert([{community_id:t,user_id:e}]);if(s)throw s;return!0}},Xi=async(t,e)=>{if(!e)return null;const{data:n}=await Y.from("community_members").select("*").eq("community_id",t).eq("user_id",e).maybeSingle();return n},Qi=async t=>{if(!t)return[];const{data:e,error:n}=await Y.from("community_members").select(`
      role,
      communities (*)
    `).eq("user_id",t);if(n)throw n;return e.map(s=>({...Zt(s.communities),myRole:s.role}))},Ki=async t=>{const{data:e,error:n}=await Y.from("communities").insert([t]).select().single();if(n)throw n;return Zt(e)},Zi=async(t,e)=>{const{data:n,error:s}=await Y.from("communities").update(e).eq("id",t).select().single();if(s)throw s;return Zt(n)},Ji=async(t,e="")=>{let n=Y.from("community_members").select(`
      role,
      user_id,
      users:user_id!inner (
        id,
        username,
        display_name,
        avatar_url,
        is_verified
      )
    `).eq("community_id",t);e&&(n=n.or(`username.ilike.%${e}%,display_name.ilike.%${e}%`,{foreignTable:"users"}));const{data:s,error:r}=await n.limit(20);if(r)throw r;return s.map(a=>({role:a.role,userId:a.user_id,user:a.users}))},Gi=async(t,e,n)=>{const{data:s,error:r}=await Y.from("community_members").update({role:n}).eq("community_id",t).eq("user_id",e).select().single();if(r)throw r;return s},$i=async(t=5)=>{const{data:e,error:n}=await Y.from("hashtags").select("*").order("usage_count",{ascending:!1}).limit(t);if(n)throw n;return e},el=async t=>{try{const e=`https://api.allorigins.win/raw?url=${encodeURIComponent(t)}`,n=await fetch(e);if(!n.ok)throw new Error("Failed to fetch preview");const s=await n.text(),r=new DOMParser().parseFromString(s,"text/html"),a=o=>r.querySelector(`meta[property="${o}"]`)?.getAttribute("content")||r.querySelector(`meta[name="${o}"]`)?.getAttribute("content");return{title:a("og:title")||r.title||t,description:a("og:description")||a("description")||"",image:a("og:image")||a("twitter:image")||"",siteName:a("og:site_name")||new URL(t).hostname,url:t}}catch(e){return console.error("Link preview error:",e),null}},bm=async t=>{if(!t)return null;try{const{data:e}=await Y.from("link_previews").select("*").eq("url",t).maybeSingle();if(e)return Y.from("link_previews").update({last_used_at:new Date().toISOString()}).eq("url",t).then(()=>{}),{title:e.title,description:e.description,image:e.image,siteName:e.site_name,url:e.url};const n=await el(t);return n?(Y.from("link_previews").insert([{url:n.url,title:n.title,description:n.description,image:n.image,site_name:n.siteName}]).then(({error:s})=>{s&&console.error("Cache save error:",s)}),n):null}catch(e){return console.error("Link preview cache error:",e),null}};function tl(t,e){return e.forEach((function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach((function(s){if(s!=="default"&&!(s in t)){var r=Object.getOwnPropertyDescriptor(n,s);Object.defineProperty(t,s,r.get?r:{enumerable:!0,get:function(){return n[s]}})}}))})),Object.freeze(t)}function ms(t,e){return new Promise((function(n,s){let r;return nl(t).then((function(a){try{return r=a,n(new Blob([e.slice(0,2),r,e.slice(2)],{type:"image/jpeg"}))}catch(o){return s(o)}}),s)}))}var nl=t=>new Promise(((e,n)=>{const s=new FileReader;s.addEventListener("load",(({target:{result:r}})=>{const a=new DataView(r);let o=0;if(a.getUint16(o)!==65496)return n("not a valid JPEG");for(o+=2;;){const i=a.getUint16(o);if(i===65498)break;const d=a.getUint16(o+2);if(i===65505&&a.getUint32(o+4)===1165519206){const h=o+10;let u;switch(a.getUint16(h)){case 18761:u=!0;break;case 19789:u=!1;break;default:return n("TIFF header contains invalid endian")}if(a.getUint16(h+2,u)!==42)return n("TIFF header contains invalid version");const c=a.getUint32(h+4,u),f=h+c+2+12*a.getUint16(h+c,u);for(let m=h+c+2;m<f;m+=12)if(a.getUint16(m,u)==274){if(a.getUint16(m+2,u)!==3)return n("Orientation data type is invalid");if(a.getUint32(m+4,u)!==1)return n("Orientation data count is invalid");a.setUint16(m+8,1,u);break}return e(r.slice(o,o+2+d))}o+=2+d}return e(new Blob)})),s.readAsArrayBuffer(t)})),ln={},rl={get exports(){return ln},set exports(t){ln=t}};(function(t){var e,n,s={};rl.exports=s,s.parse=function(r,a){for(var o=s.bin.readUshort,i=s.bin.readUint,d=0,h={},u=new Uint8Array(r),c=u.length-4;i(u,c)!=101010256;)c--;d=c,d+=4;var f=o(u,d+=4);o(u,d+=2);var m=i(u,d+=2),p=i(u,d+=4);d+=4,d=p;for(var b=0;b<f;b++){i(u,d),d+=4,d+=4,d+=4,i(u,d+=4),m=i(u,d+=4);var x=i(u,d+=4),v=o(u,d+=4),_=o(u,d+2),N=o(u,d+4);d+=6;var S=i(u,d+=8);d+=4,d+=v+_+N,s._readLocal(u,S,h,m,x,a)}return h},s._readLocal=function(r,a,o,i,d,h){var u=s.bin.readUshort,c=s.bin.readUint;c(r,a),u(r,a+=4),u(r,a+=2);var f=u(r,a+=2);c(r,a+=2),c(r,a+=4),a+=4;var m=u(r,a+=8),p=u(r,a+=2);a+=2;var b=s.bin.readUTF8(r,a,m);if(a+=m,a+=p,h)o[b]={size:d,csize:i};else{var x=new Uint8Array(r.buffer,a);if(f==0)o[b]=new Uint8Array(x.buffer.slice(a,a+i));else{if(f!=8)throw"unknown compression method: "+f;var v=new Uint8Array(d);s.inflateRaw(x,v),o[b]=v}}},s.inflateRaw=function(r,a){return s.F.inflate(r,a)},s.inflate=function(r,a){return r[0],r[1],s.inflateRaw(new Uint8Array(r.buffer,r.byteOffset+2,r.length-6),a)},s.deflate=function(r,a){a??={level:6};var o=0,i=new Uint8Array(50+Math.floor(1.1*r.length));i[o]=120,i[o+1]=156,o+=2,o=s.F.deflateRaw(r,i,o,a.level);var d=s.adler(r,0,r.length);return i[o+0]=d>>>24&255,i[o+1]=d>>>16&255,i[o+2]=d>>>8&255,i[o+3]=d>>>0&255,new Uint8Array(i.buffer,0,o+4)},s.deflateRaw=function(r,a){a??={level:6};var o=new Uint8Array(50+Math.floor(1.1*r.length)),i=s.F.deflateRaw(r,o,i,a.level);return new Uint8Array(o.buffer,0,i)},s.encode=function(r,a){a??=!1;var o=0,i=s.bin.writeUint,d=s.bin.writeUshort,h={};for(var u in r){var c=!s._noNeed(u)&&!a,f=r[u],m=s.crc.crc(f,0,f.length);h[u]={cpr:c,usize:f.length,crc:m,file:c?s.deflateRaw(f):f}}for(var u in h)o+=h[u].file.length+30+46+2*s.bin.sizeUTF8(u);o+=22;var p=new Uint8Array(o),b=0,x=[];for(var u in h){var v=h[u];x.push(b),b=s._writeHeader(p,b,u,v,0)}var _=0,N=b;for(var u in h)v=h[u],x.push(b),b=s._writeHeader(p,b,u,v,1,x[_++]);var S=b-N;return i(p,b,101010256),b+=4,d(p,b+=4,_),d(p,b+=2,_),i(p,b+=2,S),i(p,b+=4,N),b+=4,b+=2,p.buffer},s._noNeed=function(r){var a=r.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(a)!=-1},s._writeHeader=function(r,a,o,i,d,h){var u=s.bin.writeUint,c=s.bin.writeUshort,f=i.file;return u(r,a,d==0?67324752:33639248),a+=4,d==1&&(a+=2),c(r,a,20),c(r,a+=2,0),c(r,a+=2,i.cpr?8:0),u(r,a+=2,0),u(r,a+=4,i.crc),u(r,a+=4,f.length),u(r,a+=4,i.usize),c(r,a+=4,s.bin.sizeUTF8(o)),c(r,a+=2,0),a+=2,d==1&&(a+=2,a+=2,u(r,a+=6,h),a+=4),a+=s.bin.writeUTF8(r,a,o),d==0&&(r.set(f,a),a+=f.length),a},s.crc={table:(function(){for(var r=new Uint32Array(256),a=0;a<256;a++){for(var o=a,i=0;i<8;i++)1&o?o=3988292384^o>>>1:o>>>=1;r[a]=o}return r})(),update:function(r,a,o,i){for(var d=0;d<i;d++)r=s.crc.table[255&(r^a[o+d])]^r>>>8;return r},crc:function(r,a,o){return 4294967295^s.crc.update(4294967295,r,a,o)}},s.adler=function(r,a,o){for(var i=1,d=0,h=a,u=a+o;h<u;){for(var c=Math.min(h+5552,u);h<c;)d+=i+=r[h++];i%=65521,d%=65521}return d<<16|i},s.bin={readUshort:function(r,a){return r[a]|r[a+1]<<8},writeUshort:function(r,a,o){r[a]=255&o,r[a+1]=o>>8&255},readUint:function(r,a){return 16777216*r[a+3]+(r[a+2]<<16|r[a+1]<<8|r[a])},writeUint:function(r,a,o){r[a]=255&o,r[a+1]=o>>8&255,r[a+2]=o>>16&255,r[a+3]=o>>24&255},readASCII:function(r,a,o){for(var i="",d=0;d<o;d++)i+=String.fromCharCode(r[a+d]);return i},writeASCII:function(r,a,o){for(var i=0;i<o.length;i++)r[a+i]=o.charCodeAt(i)},pad:function(r){return r.length<2?"0"+r:r},readUTF8:function(r,a,o){for(var i,d="",h=0;h<o;h++)d+="%"+s.bin.pad(r[a+h].toString(16));try{i=decodeURIComponent(d)}catch{return s.bin.readASCII(r,a,o)}return i},writeUTF8:function(r,a,o){for(var i=o.length,d=0,h=0;h<i;h++){var u=o.charCodeAt(h);if((4294967168&u)==0)r[a+d]=u,d++;else if((4294965248&u)==0)r[a+d]=192|u>>6,r[a+d+1]=128|u>>0&63,d+=2;else if((4294901760&u)==0)r[a+d]=224|u>>12,r[a+d+1]=128|u>>6&63,r[a+d+2]=128|u>>0&63,d+=3;else{if((4292870144&u)!=0)throw"e";r[a+d]=240|u>>18,r[a+d+1]=128|u>>12&63,r[a+d+2]=128|u>>6&63,r[a+d+3]=128|u>>0&63,d+=4}}return d},sizeUTF8:function(r){for(var a=r.length,o=0,i=0;i<a;i++){var d=r.charCodeAt(i);if((4294967168&d)==0)o++;else if((4294965248&d)==0)o+=2;else if((4294901760&d)==0)o+=3;else{if((4292870144&d)!=0)throw"e";o+=4}}return o}},s.F={},s.F.deflateRaw=function(r,a,o,i){var d=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][i],h=s.F.U,u=s.F._goodIndex;s.F._hash;var c=s.F._putsE,f=0,m=o<<3,p=0,b=r.length;if(i==0){for(;f<b;)c(a,m,f+(R=Math.min(65535,b-f))==b?1:0),m=s.F._copyExact(r,f,R,a,m+8),f+=R;return m>>>3}var x=h.lits,v=h.strt,_=h.prev,N=0,S=0,M=0,k=0,D=0,y=0;for(b>2&&(v[y=s.F._hash(r,0)]=0),f=0;f<b;f++){if(D=y,f+1<b-2){y=s.F._hash(r,f+1);var w=f+1&32767;_[w]=v[y],v[y]=w}if(p<=f){(N>14e3||S>26697)&&b-f>100&&(p<f&&(x[N]=f-p,N+=2,p=f),m=s.F._writeBlock(f==b-1||p==b?1:0,x,N,k,r,M,f-M,a,m),N=S=k=0,M=f);var A=0;f<b-2&&(A=s.F._bestMatch(r,f,_,D,Math.min(d[2],b-f),d[3]));var R=A>>>16,E=65535&A;if(A!=0){E=65535&A;var I=u(R=A>>>16,h.of0);h.lhst[257+I]++;var z=u(E,h.df0);h.dhst[z]++,k+=h.exb[I]+h.dxb[z],x[N]=R<<23|f-p,x[N+1]=E<<16|I<<8|z,N+=2,p=f+R}else h.lhst[r[f]]++;S++}}for(M==f&&r.length!=0||(p<f&&(x[N]=f-p,N+=2,p=f),m=s.F._writeBlock(1,x,N,k,r,M,f-M,a,m),N=0,S=0,N=S=k=0,M=f);(7&m)!=0;)m++;return m>>>3},s.F._bestMatch=function(r,a,o,i,d,h){var u=32767&a,c=o[u],f=u-c+32768&32767;if(c==u||i!=s.F._hash(r,a-f))return 0;for(var m=0,p=0,b=Math.min(32767,a);f<=b&&--h!=0&&c!=u;){if(m==0||r[a+m]==r[a+m-f]){var x=s.F._howLong(r,a,f);if(x>m){if(p=f,(m=x)>=d)break;f+2<x&&(x=f+2);for(var v=0,_=0;_<x-2;_++){var N=a-f+_+32768&32767,S=N-o[N]+32768&32767;S>v&&(v=S,c=N)}}}f+=(u=c)-(c=o[u])+32768&32767}return m<<16|p},s.F._howLong=function(r,a,o){if(r[a]!=r[a-o]||r[a+1]!=r[a+1-o]||r[a+2]!=r[a+2-o])return 0;var i=a,d=Math.min(r.length,a+258);for(a+=3;a<d&&r[a]==r[a-o];)a++;return a-i},s.F._hash=function(r,a){return(r[a]<<8|r[a+1])+(r[a+2]<<4)&65535},s.saved=0,s.F._writeBlock=function(r,a,o,i,d,h,u,c,f){var m,p,b,x,v,_,N,S,M,k=s.F.U,D=s.F._putsF,y=s.F._putsE;k.lhst[256]++,p=(m=s.F.getTrees())[0],b=m[1],x=m[2],v=m[3],_=m[4],N=m[5],S=m[6],M=m[7];var w=32+((f+3&7)==0?0:8-(f+3&7))+(u<<3),A=i+s.F.contSize(k.fltree,k.lhst)+s.F.contSize(k.fdtree,k.dhst),R=i+s.F.contSize(k.ltree,k.lhst)+s.F.contSize(k.dtree,k.dhst);R+=14+3*N+s.F.contSize(k.itree,k.ihst)+(2*k.ihst[16]+3*k.ihst[17]+7*k.ihst[18]);for(var E=0;E<286;E++)k.lhst[E]=0;for(E=0;E<30;E++)k.dhst[E]=0;for(E=0;E<19;E++)k.ihst[E]=0;var I=w<A&&w<R?0:A<R?1:2;if(D(c,f,r),D(c,f+1,I),f+=3,I==0){for(;(7&f)!=0;)f++;f=s.F._copyExact(d,h,u,c,f)}else{var z,L;if(I==1&&(z=k.fltree,L=k.fdtree),I==2){s.F.makeCodes(k.ltree,p),s.F.revCodes(k.ltree,p),s.F.makeCodes(k.dtree,b),s.F.revCodes(k.dtree,b),s.F.makeCodes(k.itree,x),s.F.revCodes(k.itree,x),z=k.ltree,L=k.dtree,y(c,f,v-257),y(c,f+=5,_-1),y(c,f+=5,N-4),f+=4;for(var j=0;j<N;j++)y(c,f+3*j,k.itree[1+(k.ordr[j]<<1)]);f+=3*N,f=s.F._codeTiny(S,k.itree,c,f),f=s.F._codeTiny(M,k.itree,c,f)}for(var C=h,P=0;P<o;P+=2){for(var T=a[P],F=T>>>23,q=C+(8388607&T);C<q;)f=s.F._writeLit(d[C++],z,c,f);if(F!=0){var H=a[P+1],B=H>>16,U=H>>8&255,O=255&H;y(c,f=s.F._writeLit(257+U,z,c,f),F-k.of0[U]),f+=k.exb[U],D(c,f=s.F._writeLit(O,L,c,f),B-k.df0[O]),f+=k.dxb[O],C+=F}}f=s.F._writeLit(256,z,c,f)}return f},s.F._copyExact=function(r,a,o,i,d){var h=d>>>3;return i[h]=o,i[h+1]=o>>>8,i[h+2]=255-i[h],i[h+3]=255-i[h+1],h+=4,i.set(new Uint8Array(r.buffer,a,o),h),d+(o+4<<3)},s.F.getTrees=function(){for(var r=s.F.U,a=s.F._hufTree(r.lhst,r.ltree,15),o=s.F._hufTree(r.dhst,r.dtree,15),i=[],d=s.F._lenCodes(r.ltree,i),h=[],u=s.F._lenCodes(r.dtree,h),c=0;c<i.length;c+=2)r.ihst[i[c]]++;for(c=0;c<h.length;c+=2)r.ihst[h[c]]++;for(var f=s.F._hufTree(r.ihst,r.itree,7),m=19;m>4&&r.itree[1+(r.ordr[m-1]<<1)]==0;)m--;return[a,o,f,d,u,m,i,h]},s.F.getSecond=function(r){for(var a=[],o=0;o<r.length;o+=2)a.push(r[o+1]);return a},s.F.nonZero=function(r){for(var a="",o=0;o<r.length;o+=2)r[o+1]!=0&&(a+=(o>>1)+",");return a},s.F.contSize=function(r,a){for(var o=0,i=0;i<a.length;i++)o+=a[i]*r[1+(i<<1)];return o},s.F._codeTiny=function(r,a,o,i){for(var d=0;d<r.length;d+=2){var h=r[d],u=r[d+1];i=s.F._writeLit(h,a,o,i);var c=h==16?2:h==17?3:7;h>15&&(s.F._putsE(o,i,u,c),i+=c)}return i},s.F._lenCodes=function(r,a){for(var o=r.length;o!=2&&r[o-1]==0;)o-=2;for(var i=0;i<o;i+=2){var d=r[i+1],h=i+3<o?r[i+3]:-1,u=i+5<o?r[i+5]:-1,c=i==0?-1:r[i-1];if(d==0&&h==d&&u==d){for(var f=i+5;f+2<o&&r[f+2]==d;)f+=2;(m=Math.min(f+1-i>>>1,138))<11?a.push(17,m-3):a.push(18,m-11),i+=2*m-2}else if(d==c&&h==d&&u==d){for(f=i+5;f+2<o&&r[f+2]==d;)f+=2;var m=Math.min(f+1-i>>>1,6);a.push(16,m-3),i+=2*m-2}else a.push(d,0)}return o>>>1},s.F._hufTree=function(r,a,o){var i=[],d=r.length,h=a.length,u=0;for(u=0;u<h;u+=2)a[u]=0,a[u+1]=0;for(u=0;u<d;u++)r[u]!=0&&i.push({lit:u,f:r[u]});var c=i.length,f=i.slice(0);if(c==0)return 0;if(c==1){var m=i[0].lit;return f=m==0?1:0,a[1+(m<<1)]=1,a[1+(f<<1)]=1,1}i.sort((function(S,M){return S.f-M.f}));var p=i[0],b=i[1],x=0,v=1,_=2;for(i[0]={lit:-1,f:p.f+b.f,l:p,r:b,d:0};v!=c-1;)p=x!=v&&(_==c||i[x].f<i[_].f)?i[x++]:i[_++],b=x!=v&&(_==c||i[x].f<i[_].f)?i[x++]:i[_++],i[v++]={lit:-1,f:p.f+b.f,l:p,r:b};var N=s.F.setDepth(i[v-1],0);for(N>o&&(s.F.restrictDepth(f,o,N),N=o),u=0;u<c;u++)a[1+(f[u].lit<<1)]=f[u].d;return N},s.F.setDepth=function(r,a){return r.lit!=-1?(r.d=a,a):Math.max(s.F.setDepth(r.l,a+1),s.F.setDepth(r.r,a+1))},s.F.restrictDepth=function(r,a,o){var i=0,d=1<<o-a,h=0;for(r.sort((function(c,f){return f.d==c.d?c.f-f.f:f.d-c.d})),i=0;i<r.length&&r[i].d>a;i++){var u=r[i].d;r[i].d=a,h+=d-(1<<o-u)}for(h>>>=o-a;h>0;)(u=r[i].d)<a?(r[i].d++,h-=1<<a-u-1):i++;for(;i>=0;i--)r[i].d==a&&h<0&&(r[i].d--,h++);h!=0&&console.log("debt left")},s.F._goodIndex=function(r,a){var o=0;return a[16|o]<=r&&(o|=16),a[8|o]<=r&&(o|=8),a[4|o]<=r&&(o|=4),a[2|o]<=r&&(o|=2),a[1|o]<=r&&(o|=1),o},s.F._writeLit=function(r,a,o,i){return s.F._putsF(o,i,a[r<<1]),i+a[1+(r<<1)]},s.F.inflate=function(r,a){var o=Uint8Array;if(r[0]==3&&r[1]==0)return a||new o(0);var i=s.F,d=i._bitsF,h=i._bitsE,u=i._decodeTiny,c=i.makeCodes,f=i.codes2map,m=i._get17,p=i.U,b=a==null;b&&(a=new o(r.length>>>2<<3));for(var x,v,_=0,N=0,S=0,M=0,k=0,D=0,y=0,w=0,A=0;_==0;)if(_=d(r,A,1),N=d(r,A+1,2),A+=3,N!=0){if(b&&(a=s.F._check(a,w+(1<<17))),N==1&&(x=p.flmap,v=p.fdmap,D=511,y=31),N==2){S=h(r,A,5)+257,M=h(r,A+5,5)+1,k=h(r,A+10,4)+4,A+=14;for(var R=0;R<38;R+=2)p.itree[R]=0,p.itree[R+1]=0;var E=1;for(R=0;R<k;R++){var I=h(r,A+3*R,3);p.itree[1+(p.ordr[R]<<1)]=I,I>E&&(E=I)}A+=3*k,c(p.itree,E),f(p.itree,E,p.imap),x=p.lmap,v=p.dmap,A=u(p.imap,(1<<E)-1,S+M,r,A,p.ttree);var z=i._copyOut(p.ttree,0,S,p.ltree);D=(1<<z)-1;var L=i._copyOut(p.ttree,S,M,p.dtree);y=(1<<L)-1,c(p.ltree,z),f(p.ltree,z,x),c(p.dtree,L),f(p.dtree,L,v)}for(;;){var j=x[m(r,A)&D];A+=15&j;var C=j>>>4;if(!(C>>>8))a[w++]=C;else{if(C==256)break;var P=w+C-254;if(C>264){var T=p.ldef[C-257];P=w+(T>>>3)+h(r,A,7&T),A+=7&T}var F=v[m(r,A)&y];A+=15&F;var q=F>>>4,H=p.ddef[q],B=(H>>>4)+d(r,A,15&H);for(A+=15&H,b&&(a=s.F._check(a,w+(1<<17)));w<P;)a[w]=a[w++-B],a[w]=a[w++-B],a[w]=a[w++-B],a[w]=a[w++-B];w=P}}}else{(7&A)!=0&&(A+=8-(7&A));var U=4+(A>>>3),O=r[U-4]|r[U-3]<<8;b&&(a=s.F._check(a,w+O)),a.set(new o(r.buffer,r.byteOffset+U,O),w),A=U+O<<3,w+=O}return a.length==w?a:a.slice(0,w)},s.F._check=function(r,a){var o=r.length;if(a<=o)return r;var i=new Uint8Array(Math.max(o<<1,a));return i.set(r,0),i},s.F._decodeTiny=function(r,a,o,i,d,h){for(var u=s.F._bitsE,c=s.F._get17,f=0;f<o;){var m=r[c(i,d)&a];d+=15&m;var p=m>>>4;if(p<=15)h[f]=p,f++;else{var b=0,x=0;p==16?(x=3+u(i,d,2),d+=2,b=h[f-1]):p==17?(x=3+u(i,d,3),d+=3):p==18&&(x=11+u(i,d,7),d+=7);for(var v=f+x;f<v;)h[f]=b,f++}}return d},s.F._copyOut=function(r,a,o,i){for(var d=0,h=0,u=i.length>>>1;h<o;){var c=r[h+a];i[h<<1]=0,i[1+(h<<1)]=c,c>d&&(d=c),h++}for(;h<u;)i[h<<1]=0,i[1+(h<<1)]=0,h++;return d},s.F.makeCodes=function(r,a){for(var o,i,d,h,u=s.F.U,c=r.length,f=u.bl_count,m=0;m<=a;m++)f[m]=0;for(m=1;m<c;m+=2)f[r[m]]++;var p=u.next_code;for(o=0,f[0]=0,i=1;i<=a;i++)o=o+f[i-1]<<1,p[i]=o;for(d=0;d<c;d+=2)(h=r[d+1])!=0&&(r[d]=p[h],p[h]++)},s.F.codes2map=function(r,a,o){for(var i=r.length,d=s.F.U.rev15,h=0;h<i;h+=2)if(r[h+1]!=0)for(var u=h>>1,c=r[h+1],f=u<<4|c,m=a-c,p=r[h]<<m,b=p+(1<<m);p!=b;)o[d[p]>>>15-a]=f,p++},s.F.revCodes=function(r,a){for(var o=s.F.U.rev15,i=15-a,d=0;d<r.length;d+=2)r[d]=o[r[d]<<a-r[d+1]]>>>i},s.F._putsE=function(r,a,o){o<<=7&a;var i=a>>>3;r[i]|=o,r[i+1]|=o>>>8},s.F._putsF=function(r,a,o){o<<=7&a;var i=a>>>3;r[i]|=o,r[i+1]|=o>>>8,r[i+2]|=o>>>16},s.F._bitsE=function(r,a,o){return(r[a>>>3]|r[1+(a>>>3)]<<8)>>>(7&a)&(1<<o)-1},s.F._bitsF=function(r,a,o){return(r[a>>>3]|r[1+(a>>>3)]<<8|r[2+(a>>>3)]<<16)>>>(7&a)&(1<<o)-1},s.F._get17=function(r,a){return(r[a>>>3]|r[1+(a>>>3)]<<8|r[2+(a>>>3)]<<16)>>>(7&a)},s.F._get25=function(r,a){return(r[a>>>3]|r[1+(a>>>3)]<<8|r[2+(a>>>3)]<<16|r[3+(a>>>3)]<<24)>>>(7&a)},s.F.U=(e=Uint16Array,n=Uint32Array,{next_code:new e(16),bl_count:new e(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new e(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new n(32),flmap:new e(512),fltree:[],fdmap:new e(32),fdtree:[],lmap:new e(32768),ltree:[],ttree:[],dmap:new e(32768),dtree:[],imap:new e(512),itree:[],rev15:new e(32768),lhst:new n(286),dhst:new n(30),ihst:new n(19),lits:new n(15e3),strt:new e(65536),prev:new e(32768)}),(function(){for(var r=s.F.U,a=0;a<32768;a++){var o=a;o=(4278255360&(o=(4042322160&(o=(3435973836&(o=(2863311530&o)>>>1|(1431655765&o)<<1))>>>2|(858993459&o)<<2))>>>4|(252645135&o)<<4))>>>8|(16711935&o)<<8,r.rev15[a]=(o>>>16|o<<16)>>>17}function i(d,h,u){for(;h--!=0;)d.push(0,u)}for(a=0;a<32;a++)r.ldef[a]=r.of0[a]<<3|r.exb[a],r.ddef[a]=r.df0[a]<<4|r.dxb[a];i(r.fltree,144,8),i(r.fltree,112,9),i(r.fltree,24,7),i(r.fltree,8,8),s.F.makeCodes(r.fltree,9),s.F.codes2map(r.fltree,9,r.flmap),s.F.revCodes(r.fltree,9),i(r.fdtree,32,5),s.F.makeCodes(r.fdtree,5),s.F.codes2map(r.fdtree,5,r.fdmap),s.F.revCodes(r.fdtree,5),i(r.itree,19,0),i(r.ltree,286,0),i(r.dtree,30,0),i(r.ttree,320,0)})()})();var sl=tl({__proto__:null,default:ln},[ln]),at=(function(){var t={nextZero(u,c){for(;u[c]!=0;)c++;return c},readUshort:(u,c)=>u[c]<<8|u[c+1],writeUshort(u,c,f){u[c]=f>>8&255,u[c+1]=255&f},readUint:(u,c)=>16777216*u[c]+(u[c+1]<<16|u[c+2]<<8|u[c+3]),writeUint(u,c,f){u[c]=f>>24&255,u[c+1]=f>>16&255,u[c+2]=f>>8&255,u[c+3]=255&f},readASCII(u,c,f){let m="";for(let p=0;p<f;p++)m+=String.fromCharCode(u[c+p]);return m},writeASCII(u,c,f){for(let m=0;m<f.length;m++)u[c+m]=f.charCodeAt(m)},readBytes(u,c,f){const m=[];for(let p=0;p<f;p++)m.push(u[c+p]);return m},pad:u=>u.length<2?`0${u}`:u,readUTF8(u,c,f){let m,p="";for(let b=0;b<f;b++)p+=`%${t.pad(u[c+b].toString(16))}`;try{m=decodeURIComponent(p)}catch{return t.readASCII(u,c,f)}return m}};function e(u,c,f,m){const p=c*f,b=a(m),x=Math.ceil(c*b/8),v=new Uint8Array(4*p),_=new Uint32Array(v.buffer),{ctype:N}=m,{depth:S}=m,M=t.readUshort;if(N==6){const T=p<<2;if(S==8)for(var k=0;k<T;k+=4)v[k]=u[k],v[k+1]=u[k+1],v[k+2]=u[k+2],v[k+3]=u[k+3];if(S==16)for(k=0;k<T;k++)v[k]=u[k<<1]}else if(N==2){const T=m.tabs.tRNS;if(T==null){if(S==8)for(k=0;k<p;k++){var D=3*k;_[k]=255<<24|u[D+2]<<16|u[D+1]<<8|u[D]}if(S==16)for(k=0;k<p;k++)D=6*k,_[k]=255<<24|u[D+4]<<16|u[D+2]<<8|u[D]}else{var y=T[0];const F=T[1],q=T[2];if(S==8)for(k=0;k<p;k++){var w=k<<2;D=3*k,_[k]=255<<24|u[D+2]<<16|u[D+1]<<8|u[D],u[D]==y&&u[D+1]==F&&u[D+2]==q&&(v[w+3]=0)}if(S==16)for(k=0;k<p;k++)w=k<<2,D=6*k,_[k]=255<<24|u[D+4]<<16|u[D+2]<<8|u[D],M(u,D)==y&&M(u,D+2)==F&&M(u,D+4)==q&&(v[w+3]=0)}}else if(N==3){const T=m.tabs.PLTE,F=m.tabs.tRNS,q=F?F.length:0;if(S==1)for(var A=0;A<f;A++){var R=A*x,E=A*c;for(k=0;k<c;k++){w=E+k<<2;var I=3*(z=u[R+(k>>3)]>>7-((7&k)<<0)&1);v[w]=T[I],v[w+1]=T[I+1],v[w+2]=T[I+2],v[w+3]=z<q?F[z]:255}}if(S==2)for(A=0;A<f;A++)for(R=A*x,E=A*c,k=0;k<c;k++)w=E+k<<2,I=3*(z=u[R+(k>>2)]>>6-((3&k)<<1)&3),v[w]=T[I],v[w+1]=T[I+1],v[w+2]=T[I+2],v[w+3]=z<q?F[z]:255;if(S==4)for(A=0;A<f;A++)for(R=A*x,E=A*c,k=0;k<c;k++)w=E+k<<2,I=3*(z=u[R+(k>>1)]>>4-((1&k)<<2)&15),v[w]=T[I],v[w+1]=T[I+1],v[w+2]=T[I+2],v[w+3]=z<q?F[z]:255;if(S==8)for(k=0;k<p;k++){var z;w=k<<2,I=3*(z=u[k]),v[w]=T[I],v[w+1]=T[I+1],v[w+2]=T[I+2],v[w+3]=z<q?F[z]:255}}else if(N==4){if(S==8)for(k=0;k<p;k++){w=k<<2;var L=u[j=k<<1];v[w]=L,v[w+1]=L,v[w+2]=L,v[w+3]=u[j+1]}if(S==16)for(k=0;k<p;k++){var j;w=k<<2,L=u[j=k<<2],v[w]=L,v[w+1]=L,v[w+2]=L,v[w+3]=u[j+2]}}else if(N==0)for(y=m.tabs.tRNS?m.tabs.tRNS:-1,A=0;A<f;A++){const T=A*x,F=A*c;if(S==1)for(var C=0;C<c;C++){var P=(L=255*(u[T+(C>>>3)]>>>7-(7&C)&1))==255*y?0:255;_[F+C]=P<<24|L<<16|L<<8|L}else if(S==2)for(C=0;C<c;C++)P=(L=85*(u[T+(C>>>2)]>>>6-((3&C)<<1)&3))==85*y?0:255,_[F+C]=P<<24|L<<16|L<<8|L;else if(S==4)for(C=0;C<c;C++)P=(L=17*(u[T+(C>>>1)]>>>4-((1&C)<<2)&15))==17*y?0:255,_[F+C]=P<<24|L<<16|L<<8|L;else if(S==8)for(C=0;C<c;C++)P=(L=u[T+C])==y?0:255,_[F+C]=P<<24|L<<16|L<<8|L;else if(S==16)for(C=0;C<c;C++)L=u[T+(C<<1)],P=M(u,T+(C<<1))==y?0:255,_[F+C]=P<<24|L<<16|L<<8|L}return v}function n(u,c,f,m){const p=a(u),b=Math.ceil(f*p/8),x=new Uint8Array((b+1+u.interlace)*m);return c=u.tabs.CgBI?r(c,x):s(c,x),u.interlace==0?c=o(c,u,0,f,m):u.interlace==1&&(c=(function(_,N){const S=N.width,M=N.height,k=a(N),D=k>>3,y=Math.ceil(S*k/8),w=new Uint8Array(M*y);let A=0;const R=[0,0,4,0,2,0,1],E=[0,4,0,2,0,1,0],I=[8,8,8,4,4,2,2],z=[8,8,4,4,2,2,1];let L=0;for(;L<7;){const C=I[L],P=z[L];let T=0,F=0,q=R[L];for(;q<M;)q+=C,F++;let H=E[L];for(;H<S;)H+=P,T++;const B=Math.ceil(T*k/8);o(_,N,A,T,F);let U=0,O=R[L];for(;O<M;){let V=E[L],Z=A+U*B<<3;for(;V<S;){var j;if(k==1&&(j=(j=_[Z>>3])>>7-(7&Z)&1,w[O*y+(V>>3)]|=j<<7-((7&V)<<0)),k==2&&(j=(j=_[Z>>3])>>6-(7&Z)&3,w[O*y+(V>>2)]|=j<<6-((3&V)<<1)),k==4&&(j=(j=_[Z>>3])>>4-(7&Z)&15,w[O*y+(V>>1)]|=j<<4-((1&V)<<2)),k>=8){const X=O*y+V*D;for(let W=0;W<D;W++)w[X+W]=_[(Z>>3)+W]}Z+=k,V+=P}U++,O+=C}T*F!=0&&(A+=F*(1+B)),L+=1}return w})(c,u)),c}function s(u,c){return r(new Uint8Array(u.buffer,2,u.length-6),c)}var r=(function(){const u={H:{}};return u.H.N=function(c,f){const m=Uint8Array;let p,b,x=0,v=0,_=0,N=0,S=0,M=0,k=0,D=0,y=0;if(c[0]==3&&c[1]==0)return f||new m(0);const w=u.H,A=w.b,R=w.e,E=w.R,I=w.n,z=w.A,L=w.Z,j=w.m,C=f==null;for(C&&(f=new m(c.length>>>2<<5));x==0;)if(x=A(c,y,1),v=A(c,y+1,2),y+=3,v!=0){if(C&&(f=u.H.W(f,D+(1<<17))),v==1&&(p=j.J,b=j.h,M=511,k=31),v==2){_=R(c,y,5)+257,N=R(c,y+5,5)+1,S=R(c,y+10,4)+4,y+=14;let T=1;for(var P=0;P<38;P+=2)j.Q[P]=0,j.Q[P+1]=0;for(P=0;P<S;P++){const H=R(c,y+3*P,3);j.Q[1+(j.X[P]<<1)]=H,H>T&&(T=H)}y+=3*S,I(j.Q,T),z(j.Q,T,j.u),p=j.w,b=j.d,y=E(j.u,(1<<T)-1,_+N,c,y,j.v);const F=w.V(j.v,0,_,j.C);M=(1<<F)-1;const q=w.V(j.v,_,N,j.D);k=(1<<q)-1,I(j.C,F),z(j.C,F,p),I(j.D,q),z(j.D,q,b)}for(;;){const T=p[L(c,y)&M];y+=15&T;const F=T>>>4;if(!(F>>>8))f[D++]=F;else{if(F==256)break;{let q=D+F-254;if(F>264){const V=j.q[F-257];q=D+(V>>>3)+R(c,y,7&V),y+=7&V}const H=b[L(c,y)&k];y+=15&H;const B=H>>>4,U=j.c[B],O=(U>>>4)+A(c,y,15&U);for(y+=15&U;D<q;)f[D]=f[D++-O],f[D]=f[D++-O],f[D]=f[D++-O],f[D]=f[D++-O];D=q}}}}else{(7&y)!=0&&(y+=8-(7&y));const T=4+(y>>>3),F=c[T-4]|c[T-3]<<8;C&&(f=u.H.W(f,D+F)),f.set(new m(c.buffer,c.byteOffset+T,F),D),y=T+F<<3,D+=F}return f.length==D?f:f.slice(0,D)},u.H.W=function(c,f){const m=c.length;if(f<=m)return c;const p=new Uint8Array(m<<1);return p.set(c,0),p},u.H.R=function(c,f,m,p,b,x){const v=u.H.e,_=u.H.Z;let N=0;for(;N<m;){const S=c[_(p,b)&f];b+=15&S;const M=S>>>4;if(M<=15)x[N]=M,N++;else{let k=0,D=0;M==16?(D=3+v(p,b,2),b+=2,k=x[N-1]):M==17?(D=3+v(p,b,3),b+=3):M==18&&(D=11+v(p,b,7),b+=7);const y=N+D;for(;N<y;)x[N]=k,N++}}return b},u.H.V=function(c,f,m,p){let b=0,x=0;const v=p.length>>>1;for(;x<m;){const _=c[x+f];p[x<<1]=0,p[1+(x<<1)]=_,_>b&&(b=_),x++}for(;x<v;)p[x<<1]=0,p[1+(x<<1)]=0,x++;return b},u.H.n=function(c,f){const m=u.H.m,p=c.length;let b,x,v,_;const N=m.j;for(var S=0;S<=f;S++)N[S]=0;for(S=1;S<p;S+=2)N[c[S]]++;const M=m.K;for(b=0,N[0]=0,x=1;x<=f;x++)b=b+N[x-1]<<1,M[x]=b;for(v=0;v<p;v+=2)_=c[v+1],_!=0&&(c[v]=M[_],M[_]++)},u.H.A=function(c,f,m){const p=c.length,b=u.H.m.r;for(let x=0;x<p;x+=2)if(c[x+1]!=0){const v=x>>1,_=c[x+1],N=v<<4|_,S=f-_;let M=c[x]<<S;const k=M+(1<<S);for(;M!=k;)m[b[M]>>>15-f]=N,M++}},u.H.l=function(c,f){const m=u.H.m.r,p=15-f;for(let b=0;b<c.length;b+=2)c[b]=m[c[b]<<f-c[b+1]]>>>p},u.H.M=function(c,f,m){m<<=7&f;const p=f>>>3;c[p]|=m,c[p+1]|=m>>>8},u.H.I=function(c,f,m){m<<=7&f;const p=f>>>3;c[p]|=m,c[p+1]|=m>>>8,c[p+2]|=m>>>16},u.H.e=function(c,f,m){return(c[f>>>3]|c[1+(f>>>3)]<<8)>>>(7&f)&(1<<m)-1},u.H.b=function(c,f,m){return(c[f>>>3]|c[1+(f>>>3)]<<8|c[2+(f>>>3)]<<16)>>>(7&f)&(1<<m)-1},u.H.Z=function(c,f){return(c[f>>>3]|c[1+(f>>>3)]<<8|c[2+(f>>>3)]<<16)>>>(7&f)},u.H.i=function(c,f){return(c[f>>>3]|c[1+(f>>>3)]<<8|c[2+(f>>>3)]<<16|c[3+(f>>>3)]<<24)>>>(7&f)},u.H.m=(function(){const c=Uint16Array,f=Uint32Array;return{K:new c(16),j:new c(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new c(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new f(32),J:new c(512),_:[],h:new c(32),$:[],w:new c(32768),C:[],v:[],d:new c(32768),D:[],u:new c(512),Q:[],r:new c(32768),s:new f(286),Y:new f(30),a:new f(19),t:new f(15e3),k:new c(65536),g:new c(32768)}})(),(function(){const c=u.H.m;for(var f=0;f<32768;f++){let p=f;p=(2863311530&p)>>>1|(1431655765&p)<<1,p=(3435973836&p)>>>2|(858993459&p)<<2,p=(4042322160&p)>>>4|(252645135&p)<<4,p=(4278255360&p)>>>8|(16711935&p)<<8,c.r[f]=(p>>>16|p<<16)>>>17}function m(p,b,x){for(;b--!=0;)p.push(0,x)}for(f=0;f<32;f++)c.q[f]=c.S[f]<<3|c.T[f],c.c[f]=c.p[f]<<4|c.z[f];m(c._,144,8),m(c._,112,9),m(c._,24,7),m(c._,8,8),u.H.n(c._,9),u.H.A(c._,9,c.J),u.H.l(c._,9),m(c.$,32,5),u.H.n(c.$,5),u.H.A(c.$,5,c.h),u.H.l(c.$,5),m(c.Q,19,0),m(c.C,286,0),m(c.D,30,0),m(c.v,320,0)})(),u.H.N})();function a(u){return[1,null,3,1,2,null,4][u.ctype]*u.depth}function o(u,c,f,m,p){let b=a(c);const x=Math.ceil(m*b/8);let v,_;b=Math.ceil(b/8);let N=u[f],S=0;if(N>1&&(u[f]=[0,0,1][N-2]),N==3)for(S=b;S<x;S++)u[S+1]=u[S+1]+(u[S+1-b]>>>1)&255;for(let M=0;M<p;M++)if(v=f+M*x,_=v+M+1,N=u[_-1],S=0,N==0)for(;S<x;S++)u[v+S]=u[_+S];else if(N==1){for(;S<b;S++)u[v+S]=u[_+S];for(;S<x;S++)u[v+S]=u[_+S]+u[v+S-b]}else if(N==2)for(;S<x;S++)u[v+S]=u[_+S]+u[v+S-x];else if(N==3){for(;S<b;S++)u[v+S]=u[_+S]+(u[v+S-x]>>>1);for(;S<x;S++)u[v+S]=u[_+S]+(u[v+S-x]+u[v+S-b]>>>1)}else{for(;S<b;S++)u[v+S]=u[_+S]+i(0,u[v+S-x],0);for(;S<x;S++)u[v+S]=u[_+S]+i(u[v+S-b],u[v+S-x],u[v+S-b-x])}return u}function i(u,c,f){const m=u+c-f,p=m-u,b=m-c,x=m-f;return p*p<=b*b&&p*p<=x*x?u:b*b<=x*x?c:f}function d(u,c,f){f.width=t.readUint(u,c),c+=4,f.height=t.readUint(u,c),c+=4,f.depth=u[c],c++,f.ctype=u[c],c++,f.compress=u[c],c++,f.filter=u[c],c++,f.interlace=u[c],c++}function h(u,c,f,m,p,b,x,v,_){const N=Math.min(c,p),S=Math.min(f,b);let M=0,k=0;for(let L=0;L<S;L++)for(let j=0;j<N;j++)if(x>=0&&v>=0?(M=L*c+j<<2,k=(v+L)*p+x+j<<2):(M=(-v+L)*c-x+j<<2,k=L*p+j<<2),_==0)m[k]=u[M],m[k+1]=u[M+1],m[k+2]=u[M+2],m[k+3]=u[M+3];else if(_==1){var D=u[M+3]*.00392156862745098,y=u[M]*D,w=u[M+1]*D,A=u[M+2]*D,R=m[k+3]*(1/255),E=m[k]*R,I=m[k+1]*R,z=m[k+2]*R;const C=1-D,P=D+R*C,T=P==0?0:1/P;m[k+3]=255*P,m[k+0]=(y+E*C)*T,m[k+1]=(w+I*C)*T,m[k+2]=(A+z*C)*T}else if(_==2)D=u[M+3],y=u[M],w=u[M+1],A=u[M+2],R=m[k+3],E=m[k],I=m[k+1],z=m[k+2],D==R&&y==E&&w==I&&A==z?(m[k]=0,m[k+1]=0,m[k+2]=0,m[k+3]=0):(m[k]=y,m[k+1]=w,m[k+2]=A,m[k+3]=D);else if(_==3){if(D=u[M+3],y=u[M],w=u[M+1],A=u[M+2],R=m[k+3],E=m[k],I=m[k+1],z=m[k+2],D==R&&y==E&&w==I&&A==z)continue;if(D<220&&R>20)return!1}return!0}return{decode:function(c){const f=new Uint8Array(c);let m=8;const p=t,b=p.readUshort,x=p.readUint,v={tabs:{},frames:[]},_=new Uint8Array(f.length);let N,S=0,M=0;const k=[137,80,78,71,13,10,26,10];for(var D=0;D<8;D++)if(f[D]!=k[D])throw"The input is not a PNG file!";for(;m<f.length;){const L=p.readUint(f,m);m+=4;const j=p.readASCII(f,m,4);if(m+=4,j=="IHDR")d(f,m,v);else if(j=="iCCP"){for(var y=m;f[y]!=0;)y++;p.readASCII(f,m,y-m),f[y+1];const C=f.slice(y+2,m+L);let P=null;try{P=s(C)}catch{P=r(C)}v.tabs[j]=P}else if(j=="CgBI")v.tabs[j]=f.slice(m,m+4);else if(j=="IDAT"){for(D=0;D<L;D++)_[S+D]=f[m+D];S+=L}else if(j=="acTL")v.tabs[j]={num_frames:x(f,m),num_plays:x(f,m+4)},N=new Uint8Array(f.length);else if(j=="fcTL"){M!=0&&((z=v.frames[v.frames.length-1]).data=n(v,N.slice(0,M),z.rect.width,z.rect.height),M=0);const C={x:x(f,m+12),y:x(f,m+16),width:x(f,m+4),height:x(f,m+8)};let P=b(f,m+22);P=b(f,m+20)/(P==0?100:P);const T={rect:C,delay:Math.round(1e3*P),dispose:f[m+24],blend:f[m+25]};v.frames.push(T)}else if(j=="fdAT"){for(D=0;D<L-4;D++)N[M+D]=f[m+D+4];M+=L-4}else if(j=="pHYs")v.tabs[j]=[p.readUint(f,m),p.readUint(f,m+4),f[m+8]];else if(j=="cHRM")for(v.tabs[j]=[],D=0;D<8;D++)v.tabs[j].push(p.readUint(f,m+4*D));else if(j=="tEXt"||j=="zTXt"){v.tabs[j]??(v.tabs[j]={});var w=p.nextZero(f,m),A=p.readASCII(f,m,w-m),R=m+L-w-1;if(j=="tEXt")I=p.readASCII(f,w+1,R);else{var E=s(f.slice(w+2,w+2+R));I=p.readUTF8(E,0,E.length)}v.tabs[j][A]=I}else if(j=="iTXt"){v.tabs[j]??(v.tabs[j]={}),w=0,y=m,w=p.nextZero(f,y),A=p.readASCII(f,y,w-y);const C=f[y=w+1];var I;f[y+1],y+=2,w=p.nextZero(f,y),p.readASCII(f,y,w-y),y=w+1,w=p.nextZero(f,y),p.readUTF8(f,y,w-y),R=L-((y=w+1)-m),C==0?I=p.readUTF8(f,y,R):(E=s(f.slice(y,y+R)),I=p.readUTF8(E,0,E.length)),v.tabs[j][A]=I}else if(j=="PLTE")v.tabs[j]=p.readBytes(f,m,L);else if(j=="hIST"){const C=v.tabs.PLTE.length/3;for(v.tabs[j]=[],D=0;D<C;D++)v.tabs[j].push(b(f,m+2*D))}else if(j=="tRNS")v.ctype==3?v.tabs[j]=p.readBytes(f,m,L):v.ctype==0?v.tabs[j]=b(f,m):v.ctype==2&&(v.tabs[j]=[b(f,m),b(f,m+2),b(f,m+4)]);else if(j=="gAMA")v.tabs[j]=p.readUint(f,m)/1e5;else if(j=="sRGB")v.tabs[j]=f[m];else if(j=="bKGD")v.ctype==0||v.ctype==4?v.tabs[j]=[b(f,m)]:v.ctype==2||v.ctype==6?v.tabs[j]=[b(f,m),b(f,m+2),b(f,m+4)]:v.ctype==3&&(v.tabs[j]=f[m]);else if(j=="IEND")break;m+=L,p.readUint(f,m),m+=4}var z;return M!=0&&((z=v.frames[v.frames.length-1]).data=n(v,N.slice(0,M),z.rect.width,z.rect.height)),v.data=n(v,_,v.width,v.height),delete v.compress,delete v.interlace,delete v.filter,v},toRGBA8:function(c){const f=c.width,m=c.height;if(c.tabs.acTL==null)return[e(c.data,f,m,c).buffer];const p=[];c.frames[0].data??(c.frames[0].data=c.data);const b=f*m*4,x=new Uint8Array(b),v=new Uint8Array(b),_=new Uint8Array(b);for(let S=0;S<c.frames.length;S++){const M=c.frames[S],k=M.rect.x,D=M.rect.y,y=M.rect.width,w=M.rect.height,A=e(M.data,y,w,c);if(S!=0)for(var N=0;N<b;N++)_[N]=x[N];if(M.blend==0?h(A,y,w,x,f,m,k,D,0):M.blend==1&&h(A,y,w,x,f,m,k,D,1),p.push(x.buffer.slice(0)),M.dispose!=0){if(M.dispose==1)h(v,y,w,x,f,m,k,D,0);else if(M.dispose==2)for(N=0;N<b;N++)x[N]=_[N]}}return p},_paeth:i,_copyTile:h,_bin:t}})();(function(){const{_copyTile:t}=at,{_bin:e}=at,n=at._paeth;var s={table:(function(){const y=new Uint32Array(256);for(let w=0;w<256;w++){let A=w;for(let R=0;R<8;R++)1&A?A=3988292384^A>>>1:A>>>=1;y[w]=A}return y})(),update(y,w,A,R){for(let E=0;E<R;E++)y=s.table[255&(y^w[A+E])]^y>>>8;return y},crc:(y,w,A)=>4294967295^s.update(4294967295,y,w,A)};function r(y,w,A,R){w[A]+=y[0]*R>>4,w[A+1]+=y[1]*R>>4,w[A+2]+=y[2]*R>>4,w[A+3]+=y[3]*R>>4}function a(y){return Math.max(0,Math.min(255,y))}function o(y,w){const A=y[0]-w[0],R=y[1]-w[1],E=y[2]-w[2],I=y[3]-w[3];return A*A+R*R+E*E+I*I}function i(y,w,A,R,E,I,z){z??=1;const L=R.length,j=[];for(var C=0;C<L;C++){const O=R[C];j.push([O>>>0&255,O>>>8&255,O>>>16&255,O>>>24&255])}for(C=0;C<L;C++){let O=4294967295;for(var P=0,T=0;T<L;T++){var F=o(j[C],j[T]);T!=C&&F<O&&(O=F,P=T)}}const q=new Uint32Array(E.buffer),H=new Int16Array(w*A*4),B=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(C=0;C<B.length;C++)B[C]=255*((B[C]+.5)/16-.5);for(let O=0;O<A;O++)for(let V=0;V<w;V++){var U;C=4*(O*w+V),z!=2?U=[a(y[C]+H[C]),a(y[C+1]+H[C+1]),a(y[C+2]+H[C+2]),a(y[C+3]+H[C+3])]:(F=B[4*(3&O)+(3&V)],U=[a(y[C]+F),a(y[C+1]+F),a(y[C+2]+F),a(y[C+3]+F)]),P=0;let Z=16777215;for(T=0;T<L;T++){const ee=o(U,j[T]);ee<Z&&(Z=ee,P=T)}const X=j[P],W=[U[0]-X[0],U[1]-X[1],U[2]-X[2],U[3]-X[3]];z==1&&(V!=w-1&&r(W,H,C+4,7),O!=A-1&&(V!=0&&r(W,H,C+4*w-4,3),r(W,H,C+4*w,5),V!=w-1&&r(W,H,C+4*w+4,1))),I[C>>2]=P,q[C>>2]=R[P]}}function d(y,w,A,R,E){E??={};const{crc:I}=s,z=e.writeUint,L=e.writeUshort,j=e.writeASCII;let C=8;const P=y.frames.length>1;let T,F=!1,q=33+(P?20:0);if(E.sRGB!=null&&(q+=13),E.pHYs!=null&&(q+=21),E.iCCP!=null&&(T=pako.deflate(E.iCCP),q+=21+T.length+4),y.ctype==3){for(var H=y.plte.length,B=0;B<H;B++)y.plte[B]>>>24!=255&&(F=!0);q+=8+3*H+4+(F?8+1*H+4:0)}for(var U=0;U<y.frames.length;U++)P&&(q+=38),q+=(X=y.frames[U]).cimg.length+12,U!=0&&(q+=4);q+=12;const O=new Uint8Array(q),V=[137,80,78,71,13,10,26,10];for(B=0;B<8;B++)O[B]=V[B];if(z(O,C,13),C+=4,j(O,C,"IHDR"),C+=4,z(O,C,w),C+=4,z(O,C,A),C+=4,O[C]=y.depth,C++,O[C]=y.ctype,C++,O[C]=0,C++,O[C]=0,C++,O[C]=0,C++,z(O,C,I(O,C-17,17)),C+=4,E.sRGB!=null&&(z(O,C,1),C+=4,j(O,C,"sRGB"),C+=4,O[C]=E.sRGB,C++,z(O,C,I(O,C-5,5)),C+=4),E.iCCP!=null){const W=13+T.length;z(O,C,W),C+=4,j(O,C,"iCCP"),C+=4,j(O,C,"ICC profile"),C+=11,C+=2,O.set(T,C),C+=T.length,z(O,C,I(O,C-(W+4),W+4)),C+=4}if(E.pHYs!=null&&(z(O,C,9),C+=4,j(O,C,"pHYs"),C+=4,z(O,C,E.pHYs[0]),C+=4,z(O,C,E.pHYs[1]),C+=4,O[C]=E.pHYs[2],C++,z(O,C,I(O,C-13,13)),C+=4),P&&(z(O,C,8),C+=4,j(O,C,"acTL"),C+=4,z(O,C,y.frames.length),C+=4,z(O,C,E.loop!=null?E.loop:0),C+=4,z(O,C,I(O,C-12,12)),C+=4),y.ctype==3){for(z(O,C,3*(H=y.plte.length)),C+=4,j(O,C,"PLTE"),C+=4,B=0;B<H;B++){const W=3*B,ee=y.plte[B],K=255&ee,Q=ee>>>8&255,te=ee>>>16&255;O[C+W+0]=K,O[C+W+1]=Q,O[C+W+2]=te}if(C+=3*H,z(O,C,I(O,C-3*H-4,3*H+4)),C+=4,F){for(z(O,C,H),C+=4,j(O,C,"tRNS"),C+=4,B=0;B<H;B++)O[C+B]=y.plte[B]>>>24&255;C+=H,z(O,C,I(O,C-H-4,H+4)),C+=4}}let Z=0;for(U=0;U<y.frames.length;U++){var X=y.frames[U];P&&(z(O,C,26),C+=4,j(O,C,"fcTL"),C+=4,z(O,C,Z++),C+=4,z(O,C,X.rect.width),C+=4,z(O,C,X.rect.height),C+=4,z(O,C,X.rect.x),C+=4,z(O,C,X.rect.y),C+=4,L(O,C,R[U]),C+=2,L(O,C,1e3),C+=2,O[C]=X.dispose,C++,O[C]=X.blend,C++,z(O,C,I(O,C-30,30)),C+=4);const W=X.cimg;z(O,C,(H=W.length)+(U==0?0:4)),C+=4;const ee=C;j(O,C,U==0?"IDAT":"fdAT"),C+=4,U!=0&&(z(O,C,Z++),C+=4),O.set(W,C),C+=H,z(O,C,I(O,ee,C-ee)),C+=4}return z(O,C,0),C+=4,j(O,C,"IEND"),C+=4,z(O,C,I(O,C-4,4)),C+=4,O.buffer}function h(y,w,A){for(let R=0;R<y.frames.length;R++){const E=y.frames[R];E.rect.width;const I=E.rect.height,z=new Uint8Array(I*E.bpl+I);E.cimg=m(E.img,I,E.bpp,E.bpl,z,w,A)}}function u(y,w,A,R,E){const I=E[0],z=E[1],L=E[2],j=E[3],C=E[4],P=E[5];let T=6,F=8,q=255;for(var H=0;H<y.length;H++){const ne=new Uint8Array(y[H]);for(var B=ne.length,U=0;U<B;U+=4)q&=ne[U+3]}const O=q!=255,V=(function(re,le,ae,be,we,ce){const ve=[];for(var me=0;me<re.length;me++){const de=new Uint8Array(re[me]),Se=new Uint32Array(de.buffer);var ke;let Ce=0,Ae=0,Ee=le,Me=ae,Ze=be?1:0;if(me!=0){const se=ce||be||me==1||ve[me-2].dispose!=0?1:2;let xe=0,je=1e9;for(let ze=0;ze<se;ze++){var _e=new Uint8Array(re[me-1-ze]);const Te=new Uint32Array(re[me-1-ze]);let De=le,Ne=ae,$=-1,he=-1;for(let ge=0;ge<ae;ge++)for(let fe=0;fe<le;fe++)Se[Re=ge*le+fe]!=Te[Re]&&(fe<De&&(De=fe),fe>$&&($=fe),ge<Ne&&(Ne=ge),ge>he&&(he=ge));$==-1&&(De=Ne=$=he=0),we&&((1&De)==1&&De--,(1&Ne)==1&&Ne--);const ue=($-De+1)*(he-Ne+1);ue<je&&(je=ue,xe=ze,Ce=De,Ae=Ne,Ee=$-De+1,Me=he-Ne+1)}_e=new Uint8Array(re[me-1-xe]),xe==1&&(ve[me-1].dispose=2),ke=new Uint8Array(Ee*Me*4),t(_e,le,ae,ke,Ee,Me,-Ce,-Ae,0),Ze=t(de,le,ae,ke,Ee,Me,-Ce,-Ae,3)?1:0,Ze==1?f(de,le,ae,ke,{x:Ce,y:Ae,width:Ee,height:Me}):t(de,le,ae,ke,Ee,Me,-Ce,-Ae,0)}else ke=de.slice(0);ve.push({rect:{x:Ce,y:Ae,width:Ee,height:Me},img:ke,blend:Ze,dispose:0})}if(be)for(me=0;me<ve.length;me++){if((Ie=ve[me]).blend==1)continue;const de=Ie.rect,Se=ve[me-1].rect,Ce=Math.min(de.x,Se.x),Ae=Math.min(de.y,Se.y),Ee={x:Ce,y:Ae,width:Math.max(de.x+de.width,Se.x+Se.width)-Ce,height:Math.max(de.y+de.height,Se.y+Se.height)-Ae};ve[me-1].dispose=1,me-1!=0&&c(re,le,ae,ve,me-1,Ee,we),c(re,le,ae,ve,me,Ee,we)}let ye=0;if(re.length!=1)for(var Re=0;Re<ve.length;Re++){var Ie;ye+=(Ie=ve[Re]).rect.width*Ie.rect.height}return ve})(y,w,A,I,z,L),Z={},X=[],W=[];if(R!=0){const ne=[];for(U=0;U<V.length;U++)ne.push(V[U].img.buffer);const re=b((function(be){let we=0;for(var ce=0;ce<be.length;ce++)we+=be[ce].byteLength;const ve=new Uint8Array(we);let me=0;for(ce=0;ce<be.length;ce++){const ke=new Uint8Array(be[ce]),_e=ke.length;for(let ye=0;ye<_e;ye+=4){let Re=ke[ye],Ie=ke[ye+1],de=ke[ye+2];const Se=ke[ye+3];Se==0&&(Re=Ie=de=0),ve[me+ye]=Re,ve[me+ye+1]=Ie,ve[me+ye+2]=de,ve[me+ye+3]=Se}me+=_e}return ve.buffer})(ne),R);for(U=0;U<re.plte.length;U++)X.push(re.plte[U].est.rgba);let le=0;for(U=0;U<V.length;U++){const ae=(K=V[U]).img.length;var ee=new Uint8Array(re.inds.buffer,le>>2,ae>>2);W.push(ee);const be=new Uint8Array(re.abuf,le,ae);P&&i(K.img,K.rect.width,K.rect.height,X,be,ee),K.img.set(be),le+=ae}}else for(H=0;H<V.length;H++){var K=V[H];const ne=new Uint32Array(K.img.buffer);var Q=K.rect.width;for(B=ne.length,ee=new Uint8Array(B),W.push(ee),U=0;U<B;U++){const re=ne[U];if(U!=0&&re==ne[U-1])ee[U]=ee[U-1];else if(U>Q&&re==ne[U-Q])ee[U]=ee[U-Q];else{let le=Z[re];if(le==null&&(Z[re]=le=X.length,X.push(re),X.length>=300))break;ee[U]=le}}}const te=X.length;for(te<=256&&C==0&&(F=te<=2?1:te<=4?2:te<=16?4:8,F=Math.max(F,j)),H=0;H<V.length;H++){(K=V[H]).rect.x,K.rect.y,Q=K.rect.width;const ne=K.rect.height;let re=K.img;new Uint32Array(re.buffer);let le=4*Q,ae=4;if(te<=256&&C==0){le=Math.ceil(F*Q/8);var J=new Uint8Array(le*ne);const be=W[H];for(let we=0;we<ne;we++){U=we*le;const ce=we*Q;if(F==8)for(var G=0;G<Q;G++)J[U+G]=be[ce+G];else if(F==4)for(G=0;G<Q;G++)J[U+(G>>1)]|=be[ce+G]<<4-4*(1&G);else if(F==2)for(G=0;G<Q;G++)J[U+(G>>2)]|=be[ce+G]<<6-2*(3&G);else if(F==1)for(G=0;G<Q;G++)J[U+(G>>3)]|=be[ce+G]<<7-1*(7&G)}re=J,T=3,ae=1}else if(O==0&&V.length==1){J=new Uint8Array(Q*ne*3);const be=Q*ne;for(U=0;U<be;U++){const we=3*U,ce=4*U;J[we]=re[ce],J[we+1]=re[ce+1],J[we+2]=re[ce+2]}re=J,T=2,ae=3,le=3*Q}K.img=re,K.bpl=le,K.bpp=ae}return{ctype:T,depth:F,plte:X,frames:V}}function c(y,w,A,R,E,I,z){const L=Uint8Array,j=Uint32Array,C=new L(y[E-1]),P=new j(y[E-1]),T=E+1<y.length?new L(y[E+1]):null,F=new L(y[E]),q=new j(F.buffer);let H=w,B=A,U=-1,O=-1;for(let Z=0;Z<I.height;Z++)for(let X=0;X<I.width;X++){const W=I.x+X,ee=I.y+Z,K=ee*w+W,Q=q[K];Q==0||R[E-1].dispose==0&&P[K]==Q&&(T==null||T[4*K+3]!=0)||(W<H&&(H=W),W>U&&(U=W),ee<B&&(B=ee),ee>O&&(O=ee))}U==-1&&(H=B=U=O=0),z&&((1&H)==1&&H--,(1&B)==1&&B--),I={x:H,y:B,width:U-H+1,height:O-B+1};const V=R[E];V.rect=I,V.blend=1,V.img=new Uint8Array(I.width*I.height*4),R[E-1].dispose==0?(t(C,w,A,V.img,I.width,I.height,-I.x,-I.y,0),f(F,w,A,V.img,I)):t(F,w,A,V.img,I.width,I.height,-I.x,-I.y,0)}function f(y,w,A,R,E){t(y,w,A,R,E.width,E.height,-E.x,-E.y,2)}function m(y,w,A,R,E,I,z){const L=[];let j,C=[0,1,2,3,4];I!=-1?C=[I]:(w*R>5e5||A==1)&&(C=[0]),z&&(j={level:0});const P=sl;for(var T=0;T<C.length;T++){for(let H=0;H<w;H++)p(E,y,H,R,A,C[T]);L.push(P.deflate(E,j))}let F,q=1e9;for(T=0;T<L.length;T++)L[T].length<q&&(F=T,q=L[T].length);return L[F]}function p(y,w,A,R,E,I){const z=A*R;let L=z+A;if(y[L]=I,L++,I==0)if(R<500)for(var j=0;j<R;j++)y[L+j]=w[z+j];else y.set(new Uint8Array(w.buffer,z,R),L);else if(I==1){for(j=0;j<E;j++)y[L+j]=w[z+j];for(j=E;j<R;j++)y[L+j]=w[z+j]-w[z+j-E]+256&255}else if(A==0){for(j=0;j<E;j++)y[L+j]=w[z+j];if(I==2)for(j=E;j<R;j++)y[L+j]=w[z+j];if(I==3)for(j=E;j<R;j++)y[L+j]=w[z+j]-(w[z+j-E]>>1)+256&255;if(I==4)for(j=E;j<R;j++)y[L+j]=w[z+j]-n(w[z+j-E],0,0)+256&255}else{if(I==2)for(j=0;j<R;j++)y[L+j]=w[z+j]+256-w[z+j-R]&255;if(I==3){for(j=0;j<E;j++)y[L+j]=w[z+j]+256-(w[z+j-R]>>1)&255;for(j=E;j<R;j++)y[L+j]=w[z+j]+256-(w[z+j-R]+w[z+j-E]>>1)&255}if(I==4){for(j=0;j<E;j++)y[L+j]=w[z+j]+256-n(0,w[z+j-R],0)&255;for(j=E;j<R;j++)y[L+j]=w[z+j]+256-n(w[z+j-E],w[z+j-R],w[z+j-E-R])&255}}}function b(y,w){const A=new Uint8Array(y),R=A.slice(0),E=new Uint32Array(R.buffer),I=x(R,w),z=I[0],L=I[1],j=A.length,C=new Uint8Array(j>>2);let P;if(A.length<2e7)for(var T=0;T<j;T+=4)P=v(z,F=A[T]*(1/255),q=A[T+1]*(1/255),H=A[T+2]*(1/255),B=A[T+3]*(1/255)),C[T>>2]=P.ind,E[T>>2]=P.est.rgba;else for(T=0;T<j;T+=4){var F=A[T]*.00392156862745098,q=A[T+1]*(1/255),H=A[T+2]*(1/255),B=A[T+3]*(1/255);for(P=z;P.left;)P=_(P.est,F,q,H,B)<=0?P.left:P.right;C[T>>2]=P.ind,E[T>>2]=P.est.rgba}return{abuf:R.buffer,inds:C,plte:L}}function x(y,w,A){A??=1e-4;const R=new Uint32Array(y.buffer),E={i0:0,i1:y.length,bst:null,est:null,tdst:0,left:null,right:null};E.bst=M(y,E.i0,E.i1),E.est=k(E.bst);const I=[E];for(;I.length<w;){let L=0,j=0;for(var z=0;z<I.length;z++)I[z].est.L>L&&(L=I[z].est.L,j=z);if(L<A)break;const C=I[j],P=N(y,R,C.i0,C.i1,C.est.e,C.est.eMq255);if(C.i0>=P||C.i1<=P){C.est.L=0;continue}const T={i0:C.i0,i1:P,bst:null,est:null,tdst:0,left:null,right:null};T.bst=M(y,T.i0,T.i1),T.est=k(T.bst);const F={i0:P,i1:C.i1,bst:null,est:null,tdst:0,left:null,right:null};for(F.bst={R:[],m:[],N:C.bst.N-T.bst.N},z=0;z<16;z++)F.bst.R[z]=C.bst.R[z]-T.bst.R[z];for(z=0;z<4;z++)F.bst.m[z]=C.bst.m[z]-T.bst.m[z];F.est=k(F.bst),C.left=T,C.right=F,I[j]=T,I.push(F)}for(I.sort(((L,j)=>j.bst.N-L.bst.N)),z=0;z<I.length;z++)I[z].ind=z;return[E,I]}function v(y,w,A,R,E){if(y.left==null)return y.tdst=(function(T,F,q,H,B){const U=F-T[0],O=q-T[1],V=H-T[2],Z=B-T[3];return U*U+O*O+V*V+Z*Z})(y.est.q,w,A,R,E),y;const I=_(y.est,w,A,R,E);let z=y.left,L=y.right;I>0&&(z=y.right,L=y.left);const j=v(z,w,A,R,E);if(j.tdst<=I*I)return j;const C=v(L,w,A,R,E);return C.tdst<j.tdst?C:j}function _(y,w,A,R,E){const{e:I}=y;return I[0]*w+I[1]*A+I[2]*R+I[3]*E-y.eMq}function N(y,w,A,R,E,I){for(R-=4;A<R;){for(;S(y,A,E)<=I;)A+=4;for(;S(y,R,E)>I;)R-=4;if(A>=R)break;const z=w[A>>2];w[A>>2]=w[R>>2],w[R>>2]=z,A+=4,R-=4}for(;S(y,A,E)>I;)A-=4;return A+4}function S(y,w,A){return y[w]*A[0]+y[w+1]*A[1]+y[w+2]*A[2]+y[w+3]*A[3]}function M(y,w,A){const R=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],E=[0,0,0,0],I=A-w>>2;for(let z=w;z<A;z+=4){const L=y[z]*.00392156862745098,j=y[z+1]*(1/255),C=y[z+2]*(1/255),P=y[z+3]*(1/255);E[0]+=L,E[1]+=j,E[2]+=C,E[3]+=P,R[0]+=L*L,R[1]+=L*j,R[2]+=L*C,R[3]+=L*P,R[5]+=j*j,R[6]+=j*C,R[7]+=j*P,R[10]+=C*C,R[11]+=C*P,R[15]+=P*P}return R[4]=R[1],R[8]=R[2],R[9]=R[6],R[12]=R[3],R[13]=R[7],R[14]=R[11],{R,m:E,N:I}}function k(y){const{R:w}=y,{m:A}=y,{N:R}=y,E=A[0],I=A[1],z=A[2],L=A[3],j=R==0?0:1/R,C=[w[0]-E*E*j,w[1]-E*I*j,w[2]-E*z*j,w[3]-E*L*j,w[4]-I*E*j,w[5]-I*I*j,w[6]-I*z*j,w[7]-I*L*j,w[8]-z*E*j,w[9]-z*I*j,w[10]-z*z*j,w[11]-z*L*j,w[12]-L*E*j,w[13]-L*I*j,w[14]-L*z*j,w[15]-L*L*j],P=C,T=D;let F=[Math.random(),Math.random(),Math.random(),Math.random()],q=0,H=0;if(R!=0)for(let U=0;U<16&&(F=T.multVec(P,F),H=Math.sqrt(T.dot(F,F)),F=T.sml(1/H,F),!(U!=0&&Math.abs(H-q)<1e-9));U++)q=H;const B=[E*j,I*j,z*j,L*j];return{Cov:C,q:B,e:F,L:q,eMq255:T.dot(T.sml(255,B),F),eMq:T.dot(F,B),rgba:(Math.round(255*B[3])<<24|Math.round(255*B[2])<<16|Math.round(255*B[1])<<8|Math.round(255*B[0])<<0)>>>0}}var D={multVec:(y,w)=>[y[0]*w[0]+y[1]*w[1]+y[2]*w[2]+y[3]*w[3],y[4]*w[0]+y[5]*w[1]+y[6]*w[2]+y[7]*w[3],y[8]*w[0]+y[9]*w[1]+y[10]*w[2]+y[11]*w[3],y[12]*w[0]+y[13]*w[1]+y[14]*w[2]+y[15]*w[3]],dot:(y,w)=>y[0]*w[0]+y[1]*w[1]+y[2]*w[2]+y[3]*w[3],sml:(y,w)=>[y*w[0],y*w[1],y*w[2],y*w[3]]};at.encode=function(w,A,R,E,I,z,L){E??=0,L??=!1;const j=u(w,A,R,E,[!1,!1,!1,0,L,!1]);return h(j,-1),d(j,A,R,I,z)},at.encodeLL=function(w,A,R,E,I,z,L,j){const C={ctype:0+(E==1?0:2)+(I==0?0:4),depth:z,frames:[]},P=(E+I)*z,T=P*A;for(let F=0;F<w.length;F++)C.frames.push({rect:{x:0,y:0,width:A,height:R},img:new Uint8Array(w[F]),blend:0,dispose:1,bpp:Math.ceil(P/8),bpl:Math.ceil(T/8)});return h(C,0,!0),d(C,A,R,L,j)},at.encode.compress=u,at.encode.dither=i,at.quantize=b,at.quantize.getKDtree=x,at.quantize.getNearest=v})();var hs={toArrayBuffer(t,e){const n=t.width,s=t.height,r=n<<2,a=t.getContext("2d").getImageData(0,0,n,s),o=new Uint32Array(a.data.buffer),i=(32*n+31)/32<<2,d=i*s,h=122+d,u=new ArrayBuffer(h),c=new DataView(u),f=1<<20;let m,p,b,x,v=f,_=0,N=0,S=0;function M(y){c.setUint16(N,y,!0),N+=2}function k(y){c.setUint32(N,y,!0),N+=4}function D(y){N+=y}M(19778),k(h),D(4),k(122),k(108),k(n),k(-s>>>0),M(1),M(32),k(3),k(d),k(2835),k(2835),D(8),k(16711680),k(65280),k(255),k(4278190080),k(1466527264),(function y(){for(;_<s&&v>0;){for(x=122+_*i,m=0;m<r;)v--,p=o[S++],b=p>>>24,c.setUint32(x+m,p<<8|b),m+=4;_++}S<o.length?(v=f,setTimeout(y,hs._dly)):e(u)})()},toBlob(t,e){this.toArrayBuffer(t,(n=>{e(new Blob([n],{type:"image/bmp"}))}))},_dly:9},Ye={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},al={[Ye.CHROME]:16384,[Ye.FIREFOX]:11180,[Ye.DESKTOP_SAFARI]:16384,[Ye.IE]:8192,[Ye.IOS]:4096,[Ye.ETC]:8192},Hn=typeof window<"u",ps=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,cn=Hn&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),ol=(Hn||ps)&&(cn&&cn.getOriginalSymbol(window,"File")||typeof File<"u"&&File),gs=(Hn||ps)&&(cn&&cn.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function Bn(t,e,n=Date.now()){return new Promise((s=>{const r=t.split(","),a=r[0].match(/:(.*?);/)[1],o=globalThis.atob(r[1]);let i=o.length;const d=new Uint8Array(i);for(;i--;)d[i]=o.charCodeAt(i);const h=new Blob([d],{type:a});h.name=e,h.lastModified=n,s(h)}))}function vs(t){return new Promise(((e,n)=>{const s=new gs;s.onload=()=>e(s.result),s.onerror=r=>n(r),s.readAsDataURL(t)}))}function bs(t){return new Promise(((e,n)=>{const s=new Image;s.onload=()=>e(s),s.onerror=r=>n(r),s.src=t}))}function _t(){if(_t.cachedResult!==void 0)return _t.cachedResult;let t=Ye.ETC;const{userAgent:e}=navigator;return/Chrom(e|ium)/i.test(e)?t=Ye.CHROME:/iP(ad|od|hone)/i.test(e)&&/WebKit/i.test(e)?t=Ye.IOS:/Safari/i.test(e)?t=Ye.DESKTOP_SAFARI:/Firefox/i.test(e)?t=Ye.FIREFOX:(/MSIE/i.test(e)||document.documentMode)&&(t=Ye.IE),_t.cachedResult=t,_t.cachedResult}function xs(t,e){const n=al[_t()];let s=t,r=e,a=s*r;const o=s>r?r/s:s/r;for(;a>n*n;){const i=(n+s)/2,d=(n+r)/2;i<d?(r=d,s=d*o):(r=i*o,s=i),a=s*r}return{width:s,height:r}}function bn(t,e){let n,s;try{if(n=new OffscreenCanvas(t,e),s=n.getContext("2d"),s===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{n=document.createElement("canvas"),s=n.getContext("2d")}return n.width=t,n.height=e,[n,s]}function ws(t,e){const{width:n,height:s}=xs(t.width,t.height),[r,a]=bn(n,s);return e&&/jpe?g/.test(e)&&(a.fillStyle="white",a.fillRect(0,0,r.width,r.height)),a.drawImage(t,0,0,r.width,r.height),r}function sn(){return sn.cachedResult!==void 0||(sn.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),sn.cachedResult}function dn(t,e={}){return new Promise((function(n,s){let r,a;var o=function(){try{return a=ws(r,e.fileType||t.type),n([r,a])}catch(d){return s(d)}},i=function(d){try{var h=function(u){try{throw u}catch(c){return s(c)}};try{let u;return vs(t).then((function(c){try{return u=c,bs(u).then((function(f){try{return r=f,(function(){try{return o()}catch(m){return s(m)}})()}catch(m){return h(m)}}),h)}catch(f){return h(f)}}),h)}catch(u){h(u)}}catch(u){return s(u)}};try{if(sn()||[Ye.DESKTOP_SAFARI,Ye.MOBILE_SAFARI].includes(_t()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(t).then((function(d){try{return r=d,o()}catch{return i()}}),i)}catch{i()}}))}function un(t,e,n,s,r=1){return new Promise((function(a,o){let i;if(e==="image/png"){let h,u,c;return h=t.getContext("2d"),{data:u}=h.getImageData(0,0,t.width,t.height),c=at.encode([u.buffer],t.width,t.height,4096*r),i=new Blob([c],{type:e}),i.name=n,i.lastModified=s,d.call(this)}{let h=function(){return d.call(this)};if(e==="image/bmp")return new Promise((u=>hs.toBlob(t,u))).then(function(u){try{return i=u,i.name=n,i.lastModified=s,h.call(this)}catch(c){return o(c)}}.bind(this),o);{let u=function(){return h.call(this)};if(typeof OffscreenCanvas=="function"&&t instanceof OffscreenCanvas)return t.convertToBlob({type:e,quality:r}).then(function(c){try{return i=c,i.name=n,i.lastModified=s,u.call(this)}catch(f){return o(f)}}.bind(this),o);{let c;return c=t.toDataURL(e,r),Bn(c,n,s).then(function(f){try{return i=f,u.call(this)}catch(m){return o(m)}}.bind(this),o)}}}function d(){return a(i)}}))}function ct(t){t.width=0,t.height=0}function It(){return new Promise((function(t,e){let n,s,r,a;return It.cachedResult!==void 0?t(It.cachedResult):Bn("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then((function(o){try{return n=o,dn(n).then((function(i){try{return s=i[1],un(s,n.type,n.name,n.lastModified).then((function(d){try{return r=d,ct(s),dn(r).then((function(h){try{return a=h[0],It.cachedResult=a.width===1&&a.height===2,t(It.cachedResult)}catch(u){return e(u)}}),e)}catch(h){return e(h)}}),e)}catch(d){return e(d)}}),e)}catch(i){return e(i)}}),e)}))}function ys(t){return new Promise(((e,n)=>{const s=new gs;s.onload=r=>{const a=new DataView(r.target.result);if(a.getUint16(0,!1)!=65496)return e(-2);const o=a.byteLength;let i=2;for(;i<o;){if(a.getUint16(i+2,!1)<=8)return e(-1);const d=a.getUint16(i,!1);if(i+=2,d==65505){if(a.getUint32(i+=2,!1)!=1165519206)return e(-1);const h=a.getUint16(i+=6,!1)==18761;i+=a.getUint32(i+4,h);const u=a.getUint16(i,h);i+=2;for(let c=0;c<u;c++)if(a.getUint16(i+12*c,h)==274)return e(a.getUint16(i+12*c+8,h))}else{if((65280&d)!=65280)break;i+=a.getUint16(i,!1)}}return e(-1)},s.onerror=r=>n(r),s.readAsArrayBuffer(t)}))}function js(t,e){const{width:n}=t,{height:s}=t,{maxWidthOrHeight:r}=e;let a,o=t;return isFinite(r)&&(n>r||s>r)&&([o,a]=bn(n,s),n>s?(o.width=r,o.height=s/n*r):(o.width=n/s*r,o.height=r),a.drawImage(t,0,0,o.width,o.height),ct(t)),o}function Cs(t,e){const{width:n}=t,{height:s}=t,[r,a]=bn(n,s);switch(e>4&&e<9?(r.width=s,r.height=n):(r.width=n,r.height=s),e){case 2:a.transform(-1,0,0,1,n,0);break;case 3:a.transform(-1,0,0,-1,n,s);break;case 4:a.transform(1,0,0,-1,0,s);break;case 5:a.transform(0,1,1,0,0,0);break;case 6:a.transform(0,1,-1,0,s,0);break;case 7:a.transform(0,-1,-1,0,s,n);break;case 8:a.transform(0,-1,1,0,0,n)}return a.drawImage(t,0,0,n,s),ct(t),r}function lr(t,e,n=0){return new Promise((function(s,r){let a,o,i,d,h,u,c,f,m,p,b,x,v,_,N,S,M,k,D,y;function w(R=5){if(e.signal&&e.signal.aborted)throw e.signal.reason;a+=R,e.onProgress(Math.min(a,100))}function A(R){if(e.signal&&e.signal.aborted)throw e.signal.reason;a=Math.min(Math.max(R,a),100),e.onProgress(a)}return a=n,o=e.maxIteration||10,i=1024*e.maxSizeMB*1024,w(),dn(t,e).then(function(R){try{return[,d]=R,w(),h=js(d,e),w(),new Promise((function(E,I){var z;if(!(z=e.exifOrientation))return ys(t).then(function(j){try{return z=j,L.call(this)}catch(C){return I(C)}}.bind(this),I);function L(){return E(z)}return L.call(this)})).then(function(E){try{return u=E,w(),It().then(function(I){try{return c=I?h:Cs(h,u),w(),f=e.initialQuality||1,m=e.fileType||t.type,un(c,m,t.name,t.lastModified,f).then(function(z){try{{let j=function(){if(o--&&(N>i||N>v)){let P,T;return P=y?.95*D.width:D.width,T=y?.95*D.height:D.height,[M,k]=bn(P,T),k.drawImage(D,0,0,P,T),f*=m==="image/png"?.85:.95,un(M,m,t.name,t.lastModified,f).then((function(F){try{return S=F,ct(D),D=M,N=S.size,A(Math.min(99,Math.floor((_-N)/(_-i)*100))),j}catch(q){return r(q)}}),r)}return[1]},C=function(){return ct(D),ct(M),ct(h),ct(c),ct(d),A(100),s(S)};if(p=z,w(),b=p.size>i,x=p.size>t.size,!b&&!x)return A(100),s(p);var L;return v=t.size,_=p.size,N=_,D=c,y=!e.alwaysKeepResolution&&b,(L=function(P){for(;P;){if(P.then)return void P.then(L,r);try{if(P.pop){if(P.length)return P.pop()?C.call(this):P;P=j}else P=P.call(this)}catch(T){return r(T)}}}.bind(this))(j)}}catch(j){return r(j)}}.bind(this),r)}catch(z){return r(z)}}.bind(this),r)}catch(I){return r(I)}}.bind(this),r)}catch(E){return r(E)}}.bind(this),r)}))}var il=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`,kn;function ll(t,e){return new Promise(((n,s)=>{kn||(kn=(function(o){const i=[];return typeof o=="function"?i.push(`(${o})()`):i.push(o),URL.createObjectURL(new Blob(i))})(il));const r=new Worker(kn);r.addEventListener("message",(function(o){if(e.signal&&e.signal.aborted)r.terminate();else if(o.data.progress===void 0){if(o.data.error)return s(new Error(o.data.error)),void r.terminate();n(o.data.file),r.terminate()}else e.onProgress(o.data.progress)})),r.addEventListener("error",s),e.signal&&e.signal.addEventListener("abort",(()=>{s(e.signal.reason),r.terminate()})),r.postMessage({file:t,imageCompressionLibUrl:e.libURL,options:{...e,onProgress:void 0,signal:void 0}})}))}function qe(t,e){return new Promise((function(n,s){let r,a,o,i,d,h;if(r={...e},o=0,{onProgress:i}=r,r.maxSizeMB=r.maxSizeMB||Number.POSITIVE_INFINITY,d=typeof r.useWebWorker!="boolean"||r.useWebWorker,delete r.useWebWorker,r.onProgress=m=>{o=m,typeof i=="function"&&i(o)},!(t instanceof Blob||t instanceof ol))return s(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(t.type))return s(new Error("The file given is not an image"));if(h=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!d||typeof Worker!="function"||h)return lr(t,r).then(function(m){try{return a=m,f.call(this)}catch(p){return s(p)}}.bind(this),s);var u=function(){try{return f.call(this)}catch(m){return s(m)}}.bind(this),c=function(m){try{return lr(t,r).then((function(p){try{return a=p,u()}catch(b){return s(b)}}),s)}catch(p){return s(p)}};try{return r.libURL=r.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",ll(t,r).then((function(m){try{return a=m,u()}catch{return c()}}),c)}catch{c()}function f(){try{a.name=t.name,a.lastModified=t.lastModified}catch{}try{r.preserveExif&&t.type==="image/jpeg"&&(!r.fileType||r.fileType&&r.fileType===t.type)&&(a=ms(t,a))}catch{}return n(a)}}))}qe.getDataUrlFromFile=vs,qe.getFilefromDataUrl=Bn,qe.loadImage=bs,qe.drawImageInCanvas=ws,qe.drawFileInCanvas=dn,qe.canvasToFile=un,qe.getExifOrientation=ys,qe.handleMaxWidthOrHeight=js,qe.followExifOrientation=Cs,qe.cleanupCanvasMemory=ct,qe.isAutoOrientationInBrowser=It,qe.approximateBelowMaximumCanvasSizeOfBrowser=xs,qe.copyExifWithoutOrientation=ms,qe.getBrowserName=_t,qe.version="2.0.2";const cl=async(t,e={})=>{if(!t.type.startsWith("image/"))return t;const n={maxSizeMB:1,maxWidthOrHeight:1920,useWebWorker:!0,initialQuality:.8,fileType:"image/webp",...e};try{const s=await qe(t,n);return console.log(`Original size: ${(t.size/1024/1024).toFixed(2)} MB`),console.log(`Compressed size: ${(s.size/1024/1024).toFixed(2)} MB`),s}catch(s){return console.error("Image compression failed:",s),t}},dl=(t,e=1)=>new Promise((n,s)=>{const r=document.createElement("video");r.preload="metadata",r.src=URL.createObjectURL(t),r.muted=!0,r.playsInline=!0,r.onloadedmetadata=()=>{r.currentTime=e},r.onseeked=()=>{const a=document.createElement("canvas");a.width=r.videoWidth,a.height=r.videoHeight,a.getContext("2d").drawImage(r,0,0,a.width,a.height),a.toBlob(o=>{const i=new File([o],"thumbnail.webp",{type:"image/webp"});URL.revokeObjectURL(r.src),n(i)},"image/webp",.7)},r.onerror=a=>s(a)}),St=async(t,e="media",n=null)=>{let s=t,r=t.name.split(".").pop(),a=null;if(t.type.startsWith("image/"))try{s=await cl(t),r="webp"}catch(u){console.error("Image compression failed, uploading original:",u)}if(t.type.startsWith("video/"))try{n?a=(await St(n,e)).url:a=(await St(await dl(t),e)).url}catch(u){console.error("Failed to handle video poster:",u)}const o=`${`${crypto.randomUUID()}.${r}`}`,{data:i,error:d}=await Y.storage.from(e).upload(o,s);if(d)throw d;const{data:{publicUrl:h}}=Y.storage.from(e).getPublicUrl(i.path);return{url:h,poster:a,name:t.name,type:t.type.startsWith("image/")?"image":t.type.startsWith("video/")?"video":"file",size:s.size}};var l=On(Xa(),1),ks=(0,g.createContext)();const ul=({children:t})=>{const[e,n]=(0,g.useState)(null),[s,r]=(0,g.useState)(null),[a,o]=(0,g.useState)({}),[i,d]=(0,g.useState)(!0),h=async b=>{try{const x=await fs(b.id);x?(n(x),o(v=>({...v,[x.handle.toLowerCase()]:x}))):n({id:b.id,email:b.email,name:b.email.split("@")[0],handle:b.email.split("@")[0],avatar:"/default-avatar.webp",verified:!1})}catch(x){console.error("Error fetching user profile:",x)}finally{d(!1)}};(0,g.useEffect)(()=>{if(!e?.id)return;kt(e.id);const b=setInterval(()=>kt(e.id),3e4),x=()=>{document.visibilityState==="visible"&&kt(e.id)};return window.addEventListener("visibilitychange",x),window.addEventListener("beforeunload",()=>kt(e.id)),()=>{clearInterval(b),window.removeEventListener("visibilitychange",x),window.removeEventListener("beforeunload",()=>kt(e.id))}},[e?.id]),(0,g.useEffect)(()=>{Y.auth.getSession().then(({data:{session:x}})=>{x?h(x.user):d(!1)});const{data:{subscription:b}}=Y.auth.onAuthStateChange((x,v)=>{v?h(v.user):(n(null),d(!1))});return()=>b.unsubscribe()},[]);const u=async({email:b,password:x})=>{const{data:v,error:_}=await Y.auth.signInWithPassword({email:b,password:x});if(_)throw _;return r(null),v},c=async({email:b,password:x,username:v,name:_})=>{const{data:{user:N},error:S}=await Y.auth.signUp({email:b,password:x,options:{data:{username:v.toLowerCase(),name:_}}});if(S)throw S;return r(null),N},f=async()=>{await Y.auth.signOut(),n(null),r(null)},m=async b=>{e&&(await Ai(e.id,b),await h(e))},p=async b=>{const x=b.toLowerCase();if(a[x])return a[x];const v=await zi(b);return v?(o(_=>({..._,[x]:v})),v):null};return(0,l.jsx)(ks.Provider,{value:{currentUser:e,authMode:s,setAuthMode:r,profiles:a,login:u,signup:c,logout:f,updateProfile:m,getProfileByHandle:p,loading:i},children:!i&&t})},$e=()=>{const t=(0,g.useContext)(ks);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t};var fl=ie(),_s=(0,g.createContext)();const ml=t=>{const e=(0,fl.c)(10),{children:n}=t,{currentUser:s}=$e();let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r=new Set,e[0]=r):r=e[0];const[a,o]=(0,g.useState)(r);let i;e[1]!==s?(i=()=>{if(!s?.id)return;const f=Y.channel("global_presence",{config:{presence:{key:s.id}}});return f.on("presence",{event:"sync"},()=>{const m=f.presenceState(),p=new Set;Object.keys(m).forEach(b=>p.add(b)),o(p)}).subscribe(async m=>{m==="SUBSCRIBED"&&(await f.track({userId:s.id,online_at:new Date().toISOString()}),kt(s.id))}),()=>{s?.id&&kt(s.id),Y.removeChannel(f),o(new Set)}},e[1]=s,e[2]=i):i=e[2];const d=s?.id;let h;e[3]!==d?(h=[d],e[3]=d,e[4]=h):h=e[4],(0,g.useEffect)(i,h);let u;e[5]!==a?(u={onlineUsers:a},e[5]=a,e[6]=u):u=e[6];let c;return e[7]!==n||e[8]!==u?(c=(0,l.jsx)(_s.Provider,{value:u,children:n}),e[7]=n,e[8]=u,e[9]=c):c=e[9],c},hl=()=>{const t=(0,g.useContext)(_s);if(!t)throw new Error("usePresence must be used within a PresenceProvider");return t};var pl=ie(),Ss=(0,g.createContext)();const gl=t=>{const e=(0,pl.c)(19),{children:n}=t,[s,r]=(0,g.useState)(vl),[a,o]=(0,g.useState)(bl),[i,d]=(0,g.useState)(xl);let h,u;e[0]!==s?(h=()=>{localStorage.setItem("theme",s?"dark":"light"),s?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},u=[s],e[0]=s,e[1]=h,e[2]=u):(h=e[1],u=e[2]),(0,g.useEffect)(h,u);let c,f;e[3]!==a?(c=()=>{localStorage.setItem("font-size",a),document.documentElement.style.setProperty("--app-font-size",{small:"14px",base:"16px",large:"18px"}[a])},f=[a],e[3]=a,e[4]=c,e[5]=f):(c=e[4],f=e[5]),(0,g.useEffect)(c,f);let m,p;e[6]!==i?(m=()=>{localStorage.setItem("data-saver",i)},p=[i],e[6]=i,e[7]=m,e[8]=p):(m=e[7],p=e[8]),(0,g.useEffect)(m,p);let b;e[9]!==s?(b=()=>r(!s),e[9]=s,e[10]=b):b=e[10];const x=b;let v;e[11]!==s||e[12]!==i||e[13]!==a||e[14]!==x?(v={darkMode:s,setDarkMode:r,toggleDarkMode:x,fontSize:a,setFontSize:o,dataSaver:i,setDataSaver:d},e[11]=s,e[12]=i,e[13]=a,e[14]=x,e[15]=v):v=e[15];let _;return e[16]!==n||e[17]!==v?(_=(0,l.jsx)(Ss.Provider,{value:v,children:n}),e[16]=n,e[17]=v,e[18]=_):_=e[18],_},qn=()=>{const t=(0,g.useContext)(Ss);if(!t)throw new Error("useTheme must be used within a ThemeProvider");return t};function vl(){const t=localStorage.getItem("theme");return t==="dark"||!t&&window.matchMedia("(prefers-color-scheme: dark)").matches}function bl(){return localStorage.getItem("font-size")||"base"}function xl(){return localStorage.getItem("data-saver")==="true"}var wl=On(Xr(),1);function yl(t){if(!t||typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}var jl=t=>{switch(t){case"success":return _l;case"info":return Nl;case"warning":return Sl;case"error":return zl;default:return null}},Cl=Array(12).fill(0),kl=({visible:t,className:e})=>g.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},g.createElement("div",{className:"sonner-spinner"},Cl.map((n,s)=>g.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${s}`})))),_l=g.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},g.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),Sl=g.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},g.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),Nl=g.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},g.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),zl=g.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},g.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Al=g.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},g.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),g.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),El=()=>{const[t,e]=g.useState(document.hidden);return g.useEffect(()=>{const n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t},Mn=1,Rl=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{const e=this.subscribers.indexOf(t);this.subscribers.splice(e,1)}),this.publish=t=>{this.subscribers.forEach(e=>e(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var e;const{message:n,...s}=t,r=typeof t?.id=="number"||((e=t.id)==null?void 0:e.length)>0?t.id:Mn++,a=this.toasts.find(i=>i.id===r),o=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(r)&&this.dismissedToasts.delete(r),a?this.toasts=this.toasts.map(i=>i.id===r?(this.publish({...i,...t,id:r,title:n}),{...i,...t,id:r,dismissible:o,title:n}):i):this.addToast({title:n,...s,dismissible:o,id:r}),r},this.dismiss=t=>(t?(this.dismissedToasts.add(t),requestAnimationFrame(()=>this.subscribers.forEach(e=>e({id:t,dismiss:!0})))):this.toasts.forEach(e=>{this.subscribers.forEach(n=>n({id:e.id,dismiss:!0}))}),t),this.message=(t,e)=>this.create({...e,message:t}),this.error=(t,e)=>this.create({...e,message:t,type:"error"}),this.success=(t,e)=>this.create({...e,type:"success",message:t}),this.info=(t,e)=>this.create({...e,type:"info",message:t}),this.warning=(t,e)=>this.create({...e,type:"warning",message:t}),this.loading=(t,e)=>this.create({...e,type:"loading",message:t}),this.promise=(t,e)=>{if(!e)return;let n;e.loading!==void 0&&(n=this.create({...e,promise:t,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));const s=Promise.resolve(t instanceof Function?t():t);let r=n!==void 0,a;const o=s.then(async d=>{if(a=["resolve",d],g.isValidElement(d))r=!1,this.create({id:n,type:"default",message:d});else if(Ml(d)&&!d.ok){r=!1;const h=typeof e.error=="function"?await e.error(`HTTP error! status: ${d.status}`):e.error,u=typeof e.description=="function"?await e.description(`HTTP error! status: ${d.status}`):e.description,c=typeof h=="object"&&!g.isValidElement(h)?h:{message:h};this.create({id:n,type:"error",description:u,...c})}else if(d instanceof Error){r=!1;const h=typeof e.error=="function"?await e.error(d):e.error,u=typeof e.description=="function"?await e.description(d):e.description,c=typeof h=="object"&&!g.isValidElement(h)?h:{message:h};this.create({id:n,type:"error",description:u,...c})}else if(e.success!==void 0){r=!1;const h=typeof e.success=="function"?await e.success(d):e.success,u=typeof e.description=="function"?await e.description(d):e.description,c=typeof h=="object"&&!g.isValidElement(h)?h:{message:h};this.create({id:n,type:"success",description:u,...c})}}).catch(async d=>{if(a=["reject",d],e.error!==void 0){r=!1;const h=typeof e.error=="function"?await e.error(d):e.error,u=typeof e.description=="function"?await e.description(d):e.description,c=typeof h=="object"&&!g.isValidElement(h)?h:{message:h};this.create({id:n,type:"error",description:u,...c})}}).finally(()=>{r&&(this.dismiss(n),n=void 0),e.finally==null||e.finally.call(e)}),i=()=>new Promise((d,h)=>o.then(()=>a[0]==="reject"?h(a[1]):d(a[1])).catch(h));return typeof n!="string"&&typeof n!="number"?{unwrap:i}:Object.assign(n,{unwrap:i})},this.custom=(t,e)=>{const n=e?.id||Mn++;return this.create({jsx:t(n),id:n,...e}),n},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Ve=new Rl,Il=(t,e)=>{const n=e?.id||Mn++;return Ve.addToast({title:t,...e,id:n}),n},Ml=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",Dl=Il,Tl=()=>Ve.toasts,Pl=()=>Ve.getActiveToasts(),_n=Object.assign(Dl,{success:Ve.success,info:Ve.info,warning:Ve.warning,error:Ve.error,custom:Ve.custom,message:Ve.message,promise:Ve.promise,dismiss:Ve.dismiss,loading:Ve.loading},{getHistory:Tl,getToasts:Pl});yl("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function nn(t){return t.label!==void 0}var Ll=3,Fl="24px",Ol="16px",cr=4e3,Ul=356,Hl=14,Bl=45,ql=200;function lt(...t){return t.filter(Boolean).join(" ")}function Wl(t){const[e,n]=t.split("-"),s=[];return e&&s.push(e),n&&s.push(n),s}var Vl=t=>{var e,n,s,r,a,o,i,d,h;const{invert:u,toast:c,unstyled:f,interacting:m,setHeights:p,visibleToasts:b,heights:x,index:v,toasts:_,expanded:N,removeToast:S,defaultRichColors:M,closeButton:k,style:D,cancelButtonStyle:y,actionButtonStyle:w,className:A="",descriptionClassName:R="",duration:E,position:I,gap:z,expandByDefault:L,classNames:j,icons:C,closeButtonAriaLabel:P="Close toast"}=t,[T,F]=g.useState(null),[q,H]=g.useState(null),[B,U]=g.useState(!1),[O,V]=g.useState(!1),[Z,X]=g.useState(!1),[W,ee]=g.useState(!1),[K,Q]=g.useState(!1),[te,J]=g.useState(0),[G,ne]=g.useState(0),re=g.useRef(c.duration||E||cr),le=g.useRef(null),ae=g.useRef(null),be=v===0,we=v+1<=b,ce=c.type,ve=c.dismissible!==!1,me=c.className||"",ke=c.descriptionClassName||"",_e=g.useMemo(()=>x.findIndex($=>$.toastId===c.id)||0,[x,c.id]),ye=g.useMemo(()=>{var $;return($=c.closeButton)!=null?$:k},[c.closeButton,k]),Re=g.useMemo(()=>c.duration||E||cr,[c.duration,E]),Ie=g.useRef(0),de=g.useRef(0),Se=g.useRef(0),Ce=g.useRef(null),[Ae,Ee]=I.split("-"),Me=g.useMemo(()=>x.reduce(($,he,ue)=>ue>=_e?$:$+he.height,0),[x,_e]),Ze=El(),se=c.invert||u,xe=ce==="loading";de.current=g.useMemo(()=>_e*z+Me,[_e,Me]),g.useEffect(()=>{re.current=Re},[Re]),g.useEffect(()=>{U(!0)},[]),g.useEffect(()=>{const $=ae.current;if($){const he=$.getBoundingClientRect().height;return ne(he),p(ue=>[{toastId:c.id,height:he,position:c.position},...ue]),()=>p(ue=>ue.filter(ge=>ge.toastId!==c.id))}},[p,c.id]),g.useLayoutEffect(()=>{if(!B)return;const $=ae.current,he=$.style.height;$.style.height="auto";const ue=$.getBoundingClientRect().height;$.style.height=he,ne(ue),p(ge=>ge.find(fe=>fe.toastId===c.id)?ge.map(fe=>fe.toastId===c.id?{...fe,height:ue}:fe):[{toastId:c.id,height:ue,position:c.position},...ge])},[B,c.title,c.description,p,c.id,c.jsx,c.action,c.cancel]);const je=g.useCallback(()=>{V(!0),J(de.current),p($=>$.filter(he=>he.toastId!==c.id)),setTimeout(()=>{S(c)},ql)},[c,S,p,de]);g.useEffect(()=>{if(c.promise&&ce==="loading"||c.duration===1/0||c.type==="loading")return;let $;return N||m||Ze?(()=>{if(Se.current<Ie.current){const ge=new Date().getTime()-Ie.current;re.current=re.current-ge}Se.current=new Date().getTime()})():re.current!==1/0&&(Ie.current=new Date().getTime(),$=setTimeout(()=>{c.onAutoClose==null||c.onAutoClose.call(c,c),je()},re.current)),()=>clearTimeout($)},[N,m,c,ce,Ze,je]),g.useEffect(()=>{c.delete&&(je(),c.onDismiss==null||c.onDismiss.call(c,c))},[je,c.delete]);function ze(){var $;if(C?.loading){var he;return g.createElement("div",{className:lt(j?.loader,c==null||(he=c.classNames)==null?void 0:he.loader,"sonner-loader"),"data-visible":ce==="loading"},C.loading)}return g.createElement(kl,{className:lt(j?.loader,c==null||($=c.classNames)==null?void 0:$.loader),visible:ce==="loading"})}const Te=c.icon||C?.[ce]||jl(ce);var De,Ne;return g.createElement("li",{tabIndex:0,ref:ae,className:lt(A,me,j?.toast,c==null||(e=c.classNames)==null?void 0:e.toast,j?.default,j?.[ce],c==null||(n=c.classNames)==null?void 0:n[ce]),"data-sonner-toast":"","data-rich-colors":(De=c.richColors)!=null?De:M,"data-styled":!(c.jsx||c.unstyled||f),"data-mounted":B,"data-promise":!!c.promise,"data-swiped":K,"data-removed":O,"data-visible":we,"data-y-position":Ae,"data-x-position":Ee,"data-index":v,"data-front":be,"data-swiping":Z,"data-dismissible":ve,"data-type":ce,"data-invert":se,"data-swipe-out":W,"data-swipe-direction":q,"data-expanded":!!(N||L&&B),"data-testid":c.testId,style:{"--index":v,"--toasts-before":v,"--z-index":_.length-v,"--offset":`${O?te:de.current}px`,"--initial-height":L?"auto":`${G}px`,...D,...c.style},onDragEnd:()=>{X(!1),F(null),Ce.current=null},onPointerDown:$=>{$.button!==2&&(xe||!ve||(le.current=new Date,J(de.current),$.target.setPointerCapture($.pointerId),$.target.tagName!=="BUTTON"&&(X(!0),Ce.current={x:$.clientX,y:$.clientY})))},onPointerUp:()=>{var $,he,ue;if(W||!ve)return;Ce.current=null;const ge=Number((($=ae.current)==null?void 0:$.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),fe=Number(((he=ae.current)==null?void 0:he.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Fe=new Date().getTime()-((ue=le.current)==null?void 0:ue.getTime()),et=T==="x"?ge:fe,He=Math.abs(et)/Fe;if(Math.abs(et)>=Bl||He>.11){J(de.current),c.onDismiss==null||c.onDismiss.call(c,c),H(T==="x"?ge>0?"right":"left":fe>0?"down":"up"),je(),ee(!0);return}else{var Oe,rt;(Oe=ae.current)==null||Oe.style.setProperty("--swipe-amount-x","0px"),(rt=ae.current)==null||rt.style.setProperty("--swipe-amount-y","0px")}Q(!1),X(!1),F(null)},onPointerMove:$=>{var he,ue,ge;if(!Ce.current||!ve||((he=window.getSelection())==null?void 0:he.toString().length)>0)return;const fe=$.clientY-Ce.current.y,Fe=$.clientX-Ce.current.x;var et;const He=(et=t.swipeDirections)!=null?et:Wl(I);!T&&(Math.abs(Fe)>1||Math.abs(fe)>1)&&F(Math.abs(Fe)>Math.abs(fe)?"x":"y");let Oe={x:0,y:0};const rt=pt=>1/(1.5+Math.abs(pt)/20);if(T==="y"){if(He.includes("top")||He.includes("bottom"))if(He.includes("top")&&fe<0||He.includes("bottom")&&fe>0)Oe.y=fe;else{const pt=fe*rt(fe);Oe.y=Math.abs(pt)<Math.abs(fe)?pt:fe}}else if(T==="x"&&(He.includes("left")||He.includes("right")))if(He.includes("left")&&Fe<0||He.includes("right")&&Fe>0)Oe.x=Fe;else{const pt=Fe*rt(Fe);Oe.x=Math.abs(pt)<Math.abs(Fe)?pt:Fe}(Math.abs(Oe.x)>0||Math.abs(Oe.y)>0)&&Q(!0),(ue=ae.current)==null||ue.style.setProperty("--swipe-amount-x",`${Oe.x}px`),(ge=ae.current)==null||ge.style.setProperty("--swipe-amount-y",`${Oe.y}px`)}},ye&&!c.jsx&&ce!=="loading"?g.createElement("button",{"aria-label":P,"data-disabled":xe,"data-close-button":!0,onClick:xe||!ve?()=>{}:()=>{je(),c.onDismiss==null||c.onDismiss.call(c,c)},className:lt(j?.closeButton,c==null||(s=c.classNames)==null?void 0:s.closeButton)},(Ne=C?.close)!=null?Ne:Al):null,(ce||c.icon||c.promise)&&c.icon!==null&&(C?.[ce]!==null||c.icon)?g.createElement("div",{"data-icon":"",className:lt(j?.icon,c==null||(r=c.classNames)==null?void 0:r.icon)},c.promise||c.type==="loading"&&!c.icon?c.icon||ze():null,c.type!=="loading"?Te:null):null,g.createElement("div",{"data-content":"",className:lt(j?.content,c==null||(a=c.classNames)==null?void 0:a.content)},g.createElement("div",{"data-title":"",className:lt(j?.title,c==null||(o=c.classNames)==null?void 0:o.title)},c.jsx?c.jsx:typeof c.title=="function"?c.title():c.title),c.description?g.createElement("div",{"data-description":"",className:lt(R,ke,j?.description,c==null||(i=c.classNames)==null?void 0:i.description)},typeof c.description=="function"?c.description():c.description):null),g.isValidElement(c.cancel)?c.cancel:c.cancel&&nn(c.cancel)?g.createElement("button",{"data-button":!0,"data-cancel":!0,style:c.cancelButtonStyle||y,onClick:$=>{nn(c.cancel)&&ve&&(c.cancel.onClick==null||c.cancel.onClick.call(c.cancel,$),je())},className:lt(j?.cancelButton,c==null||(d=c.classNames)==null?void 0:d.cancelButton)},c.cancel.label):null,g.isValidElement(c.action)?c.action:c.action&&nn(c.action)?g.createElement("button",{"data-button":!0,"data-action":!0,style:c.actionButtonStyle||w,onClick:$=>{nn(c.action)&&(c.action.onClick==null||c.action.onClick.call(c.action,$),!$.defaultPrevented&&je())},className:lt(j?.actionButton,c==null||(h=c.classNames)==null?void 0:h.actionButton)},c.action.label):null)};function dr(){if(typeof window>"u"||typeof document>"u")return"ltr";const t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function Yl(t,e){const n={};return[t,e].forEach((s,r)=>{const a=r===1,o=a?"--mobile-offset":"--offset",i=a?Ol:Fl;function d(h){["top","right","bottom","left"].forEach(u=>{n[`${o}-${u}`]=typeof h=="number"?`${h}px`:h})}typeof s=="number"||typeof s=="string"?d(s):typeof s=="object"?["top","right","bottom","left"].forEach(h=>{s[h]===void 0?n[`${o}-${h}`]=i:n[`${o}-${h}`]=typeof s[h]=="number"?`${s[h]}px`:s[h]}):d(i)}),n}var Xl=g.forwardRef(function(e,n){const{id:s,invert:r,position:a="bottom-right",hotkey:o=["altKey","KeyT"],expand:i,closeButton:d,className:h,offset:u,mobileOffset:c,theme:f="light",richColors:m,duration:p,style:b,visibleToasts:x=Ll,toastOptions:v,dir:_=dr(),gap:N=Hl,icons:S,containerAriaLabel:M="Notifications"}=e,[k,D]=g.useState([]),y=g.useMemo(()=>s?k.filter(B=>B.toasterId===s):k.filter(B=>!B.toasterId),[k,s]),w=g.useMemo(()=>Array.from(new Set([a].concat(y.filter(B=>B.position).map(B=>B.position)))),[y,a]),[A,R]=g.useState([]),[E,I]=g.useState(!1),[z,L]=g.useState(!1),[j,C]=g.useState(f!=="system"?f:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),P=g.useRef(null),T=o.join("+").replace(/Key/g,"").replace(/Digit/g,""),F=g.useRef(null),q=g.useRef(!1),H=g.useCallback(B=>{D(U=>{var O;return(O=U.find(V=>V.id===B.id))!=null&&O.delete||Ve.dismiss(B.id),U.filter(({id:V})=>V!==B.id)})},[]);return g.useEffect(()=>Ve.subscribe(B=>{if(B.dismiss){requestAnimationFrame(()=>{D(U=>U.map(O=>O.id===B.id?{...O,delete:!0}:O))});return}setTimeout(()=>{wl.flushSync(()=>{D(U=>{const O=U.findIndex(V=>V.id===B.id);return O!==-1?[...U.slice(0,O),{...U[O],...B},...U.slice(O+1)]:[B,...U]})})})}),[k]),g.useEffect(()=>{if(f!=="system"){C(f);return}if(f==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?C("dark"):C("light")),typeof window>"u")return;const B=window.matchMedia("(prefers-color-scheme: dark)");try{B.addEventListener("change",({matches:U})=>{C(U?"dark":"light")})}catch{B.addListener(({matches:O})=>{try{C(O?"dark":"light")}catch(V){console.error(V)}})}},[f]),g.useEffect(()=>{k.length<=1&&I(!1)},[k]),g.useEffect(()=>{const B=U=>{var O;if(o.every(Z=>U[Z]||U.code===Z)){var V;I(!0),(V=P.current)==null||V.focus()}U.code==="Escape"&&(document.activeElement===P.current||(O=P.current)!=null&&O.contains(document.activeElement))&&I(!1)};return document.addEventListener("keydown",B),()=>document.removeEventListener("keydown",B)},[o]),g.useEffect(()=>{if(P.current)return()=>{F.current&&(F.current.focus({preventScroll:!0}),F.current=null,q.current=!1)}},[P.current]),g.createElement("section",{ref:n,"aria-label":`${M} ${T}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},w.map((B,U)=>{var O;const[V,Z]=B.split("-");return y.length?g.createElement("ol",{key:B,dir:_==="auto"?dr():_,tabIndex:-1,ref:P,className:h,"data-sonner-toaster":!0,"data-sonner-theme":j,"data-y-position":V,"data-x-position":Z,style:{"--front-toast-height":`${((O=A[0])==null?void 0:O.height)||0}px`,"--width":`${Ul}px`,"--gap":`${N}px`,...b,...Yl(u,c)},onBlur:X=>{q.current&&!X.currentTarget.contains(X.relatedTarget)&&(q.current=!1,F.current&&(F.current.focus({preventScroll:!0}),F.current=null))},onFocus:X=>{X.target instanceof HTMLElement&&X.target.dataset.dismissible==="false"||q.current||(q.current=!0,F.current=X.relatedTarget)},onMouseEnter:()=>I(!0),onMouseMove:()=>I(!0),onMouseLeave:()=>{z||I(!1)},onDragEnd:()=>I(!1),onPointerDown:X=>{X.target instanceof HTMLElement&&X.target.dataset.dismissible==="false"||L(!0)},onPointerUp:()=>L(!1)},y.filter(X=>!X.position&&U===0||X.position===B).map((X,W)=>{var ee,K;return g.createElement(Vl,{key:X.id,icons:S,index:W,toast:X,defaultRichColors:m,duration:(ee=v?.duration)!=null?ee:p,className:v?.className,descriptionClassName:v?.descriptionClassName,invert:r,visibleToasts:x,closeButton:(K=v?.closeButton)!=null?K:d,interacting:z,position:B,style:v?.style,unstyled:v?.unstyled,classNames:v?.classNames,cancelButtonStyle:v?.cancelButtonStyle,actionButtonStyle:v?.actionButtonStyle,closeButtonAriaLabel:v?.closeButtonAriaLabel,removeToast:H,toasts:y.filter(Q=>Q.position==X.position),heights:A.filter(Q=>Q.position==X.position),setHeights:R,expandByDefault:i,gap:N,expanded:E,swipeDirections:e.swipeDirections})})):null}))}),Ql=(t,e,n,s,r,a,o,i)=>{let d=document.documentElement,h=["light","dark"];function u(m){(Array.isArray(t)?t:[t]).forEach(p=>{let b=p==="class",x=b&&a?r.map(v=>a[v]||v):r;b?(d.classList.remove(...x),d.classList.add(a&&a[m]?a[m]:m)):d.setAttribute(p,m)}),c(m)}function c(m){i&&h.includes(m)&&(d.style.colorScheme=m)}function f(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(s)u(s);else try{let m=localStorage.getItem(e)||n;u(o&&m==="system"?f():m)}catch{}};var Kl=g.createContext(void 0),Zl={setTheme:t=>{},themes:[]},Jl=()=>{var t;return(t=g.useContext(Kl))!=null?t:Zl};var xm=g.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:s,enableColorScheme:r,defaultTheme:a,value:o,themes:i,nonce:d,scriptProps:h})=>{let u=JSON.stringify([n,e,a,t,i,o,s,r]).slice(1,-1);return g.createElement("script",{...h,suppressHydrationWarning:!0,nonce:typeof window>"u"?d:"",dangerouslySetInnerHTML:{__html:`(${Ql.toString()})(${u})`}})});var Gl=ie(),$l=t=>{const e=(0,Gl.c)(7);let n;e[0]!==t?({...n}=t,e[0]=t,e[1]=n):n=e[1];const{theme:s}=Jl(),r=s===void 0?"system":s;let a,o;e[2]===Symbol.for("react.memo_cache_sentinel")?(a={success:(0,l.jsx)(Uo,{className:"size-4"}),info:(0,l.jsx)(ho,{className:"size-4"}),warning:(0,l.jsx)(gi,{className:"size-4"}),error:(0,l.jsx)(oo,{className:"size-4"}),loading:(0,l.jsx)(mt,{className:"size-4 animate-spin"})},o={"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)","--border-radius":"var(--radius)"},e[2]=a,e[3]=o):(a=e[2],o=e[3]);let i;return e[4]!==n||e[5]!==r?(i=(0,l.jsx)(Xl,{theme:r,className:"toaster group",icons:a,style:o,...n}),e[4]=n,e[5]=r,e[6]=i):i=e[6],i},ec=ie(),Ns=(0,g.createContext)();const tc=t=>{const e=(0,ec.c)(4),{children:n}=t,s=nc;let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r={addToast:s},e[0]=r):r=e[0];let a;e[1]===Symbol.for("react.memo_cache_sentinel")?(a=(0,l.jsx)($l,{position:"bottom-center",toastOptions:{className:"rounded-full font-bold"}}),e[1]=a):a=e[1];let o;return e[2]!==n?(o=(0,l.jsxs)(Ns.Provider,{value:r,children:[n,a]}),e[2]=n,e[3]=o):o=e[3],o},jt=()=>{const t=(0,g.useContext)(Ns);if(!t)throw new Error("useToast must be used within a ToastProvider");return t};function nc(t,e){const n=e===void 0?"success":e;n==="error"?_n.error(t):n==="info"?_n.info(t):_n.success(t)}var zs=(0,g.createContext)();const rc=({children:t})=>{const[e,n]=(0,g.useState)([]),[s,r]=(0,g.useState)(!0),[a,o]=(0,g.useState)(!0),[i,d]=(0,g.useState)(!1),h=(0,g.useRef)(e);(0,g.useEffect)(()=>{h.current=e},[e]);const u=(0,g.useCallback)(async(v=!1)=>{v?d(!0):r(!0);try{const _=h.current,N=await Mi(v&&_.length>0?_[_.length-1].created_at:null,10);N.length<10?o(!1):o(!0),n(v?S=>[...S,...N]:N)}catch(_){console.error("Failed to load posts:",_)}finally{r(!1),d(!1)}},[]),c=()=>{!a||i||u(!0)};(0,g.useEffect)(()=>{u()},[u]);const f=async v=>{const _=await Di(v);return u(),_},m=async v=>{await Ti(v),n(_=>_.filter(N=>N.id!==v))},p=async(v,_)=>{await Pi(v,_),n(N=>N.map(S=>S.id===v?{...S,..._}:S))},b=v=>e.find(_=>_.id===v),x=(v,_="feed")=>{let N=e.filter(S=>!!(S.user?.handle===v||S.repostedBy&&S.repostedBy.handle===v));return _==="feed"?N.filter(S=>S.parent_id===null):_==="media"?N.filter(S=>S.parent_id===null&&(S.type==="video"||S.type==="image"||S.media?.length>0)):N};return(0,l.jsx)(zs.Provider,{value:{posts:e,setPosts:n,addPost:f,deletePost:m,updatePost:p,getPostById:b,getUserPosts:x,loading:s,hasMore:a,isFetchingNextPage:i,fetchNextPage:c,refreshPosts:()=>u(!1)},children:t})},sc=()=>{const t=(0,g.useContext)(zs);if(!t)throw new Error("usePosts must be used within a PostProvider");return t};var ac=ie(),As=(0,g.createContext)();const oc=t=>{const e=(0,ac.c)(9),{children:n}=t;let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s={isOpen:!1,images:[],currentIndex:0},e[0]=s):s=e[0];const[r,a]=(0,g.useState)(s);let o;e[1]===Symbol.for("react.memo_cache_sentinel")?(o=(p,b)=>{const x=b===void 0?0:b;a({isOpen:!0,images:Array.isArray(p)?p:[p],currentIndex:x})},e[1]=o):o=e[1];const i=o;let d;e[2]===Symbol.for("react.memo_cache_sentinel")?(d=()=>{a(lc)},e[2]=d):d=e[2];const h=d;let u;e[3]===Symbol.for("react.memo_cache_sentinel")?(u=p=>{a(b=>({...b,currentIndex:p}))},e[3]=u):u=e[3];const c=u;let f;e[4]!==r?(f={...r,openLightbox:i,closeLightbox:h,setIndex:c},e[4]=r,e[5]=f):f=e[5];let m;return e[6]!==n||e[7]!==f?(m=(0,l.jsx)(As.Provider,{value:f,children:n}),e[6]=n,e[7]=f,e[8]=m):m=e[8],m},ic=()=>{const t=(0,g.useContext)(As);if(!t)throw new Error("useLightbox must be used within a LightboxProvider");return t};function lc(t){return{...t,isOpen:!1}}var cc=ie(),Es=(0,g.createContext)();const dc=t=>{const e=(0,cc.c)(15),{children:n}=t,[s,r]=(0,g.useState)(null);let a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a=new Map,e[0]=a):a=e[0];const o=(0,g.useRef)(a);let i;e[1]!==s?(i=(b,x,v)=>{x===0?o.current.has(b)&&o.current.delete(b):o.current.set(b,{ratio:x,...v});let _=null,N=.5;for(const[S,M]of o.current.entries())M.ratio>N&&(N=M.ratio,_=S);_!==s&&r(_)},e[1]=s,e[2]=i):i=e[2];const d=i;let h,u;e[3]!==s?(h=()=>{o.current.forEach((b,x)=>{x===s?b.play():b.pause()})},u=[s],e[3]=s,e[4]=h,e[5]=u):(h=e[4],u=e[5]),(0,g.useEffect)(h,u);let c;e[6]!==s?(c=b=>{o.current.delete(b),s===b&&r(null)},e[6]=s,e[7]=c):c=e[7];const f=c;let m;e[8]!==s||e[9]!==d||e[10]!==f?(m={reportVisibility:d,unregister:f,activeVideoId:s},e[8]=s,e[9]=d,e[10]=f,e[11]=m):m=e[11];let p;return e[12]!==n||e[13]!==m?(p=(0,l.jsx)(Es.Provider,{value:m,children:n}),e[12]=n,e[13]=m,e[14]=p):p=e[14],p},wm=()=>{const t=(0,g.useContext)(Es);if(!t)throw new Error("useVideoPlayback must be used within a VideoPlaybackProvider");return t};var ht=ie();function ym(t){const e=(0,ht.c)(4);let n;e[0]!==t?({...n}=t,e[0]=t,e[1]=n):n=e[1];let s;return e[2]!==n?(s=(0,l.jsx)(jo,{"data-slot":"alert-dialog",...n}),e[2]=n,e[3]=s):s=e[3],s}function uc(t){const e=(0,ht.c)(4);let n;e[0]!==t?({...n}=t,e[0]=t,e[1]=n):n=e[1];let s;return e[2]!==n?(s=(0,l.jsx)(Do,{"data-slot":"alert-dialog-portal",...n}),e[2]=n,e[3]=s):s=e[3],s}function fc(t){const e=(0,ht.c)(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=oe("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",n),e[3]=n,e[4]=r):r=e[4];let a;return e[5]!==s||e[6]!==r?(a=(0,l.jsx)(Io,{"data-slot":"alert-dialog-overlay",className:r,...s}),e[5]=s,e[6]=r,e[7]=a):a=e[7],a}function jm(t){const e=(0,ht.c)(9);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]===Symbol.for("react.memo_cache_sentinel")?(r=(0,l.jsx)(fc,{}),e[3]=r):r=e[3];let a;e[4]!==n?(a=oe("bg-white dark:bg-zinc-950 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-2xl border border-zinc-100 dark:border-zinc-800 p-6 shadow-xl duration-200 sm:max-w-md",n),e[4]=n,e[5]=a):a=e[5];let o;return e[6]!==s||e[7]!==a?(o=(0,l.jsxs)(uc,{children:[r,(0,l.jsx)(uo,{"data-slot":"alert-dialog-content","aria-describedby":void 0,className:a,...s})]}),e[6]=s,e[7]=a,e[8]=o):o=e[8],o}function Cm(t){const e=(0,ht.c)(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=oe("flex flex-col gap-2 text-center sm:text-left",n),e[3]=n,e[4]=r):r=e[4];let a;return e[5]!==s||e[6]!==r?(a=(0,l.jsx)("div",{"data-slot":"alert-dialog-header",className:r,...s}),e[5]=s,e[6]=r,e[7]=a):a=e[7],a}function km(t){const e=(0,ht.c)(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=oe("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",n),e[3]=n,e[4]=r):r=e[4];let a;return e[5]!==s||e[6]!==r?(a=(0,l.jsx)("div",{"data-slot":"alert-dialog-footer",className:r,...s}),e[5]=s,e[6]=r,e[7]=a):a=e[7],a}function _m(t){const e=(0,ht.c)(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=oe("text-lg font-semibold",n),e[3]=n,e[4]=r):r=e[4];let a;return e[5]!==s||e[6]!==r?(a=(0,l.jsx)($a,{"data-slot":"alert-dialog-title",className:r,...s}),e[5]=s,e[6]=r,e[7]=a):a=e[7],a}function Sm(t){const e=(0,ht.c)(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=oe("text-muted-foreground text-sm",n),e[3]=n,e[4]=r):r=e[4];let a;return e[5]!==s||e[6]!==r?(a=(0,l.jsx)(Mo,{"data-slot":"alert-dialog-description",className:r,...s}),e[5]=s,e[6]=r,e[7]=a):a=e[7],a}function Nm(t){const e=(0,ht.c)(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=oe("inline-flex items-center justify-center rounded-full px-4 py-2 text-sm font-bold transition-all active:scale-95 bg-zinc-900 text-white hover:bg-zinc-800 dark:bg-white dark:text-black dark:hover:bg-zinc-200",n),e[3]=n,e[4]=r):r=e[4];let a;return e[5]!==s||e[6]!==r?(a=(0,l.jsx)(mo,{className:r,...s}),e[5]=s,e[6]=r,e[7]=a):a=e[7],a}function zm(t){const e=(0,ht.c)(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=oe("inline-flex items-center justify-center rounded-full px-4 py-2 text-sm font-bold border border-zinc-200 bg-white text-zinc-900 hover:bg-zinc-50 dark:border-zinc-800 dark:bg-zinc-950 dark:text-zinc-50 dark:hover:bg-zinc-900",n),e[3]=n,e[4]=r):r=e[4];let a;return e[5]!==s||e[6]!==r?(a=(0,l.jsx)(ni,{className:r,...s}),e[5]=s,e[6]=r,e[7]=a):a=e[7],a}var Wn=ie();function Nt(t){const e=(0,Wn.c)(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=oe("relative flex size-8 shrink-0 overflow-hidden rounded-full",n),e[3]=n,e[4]=r):r=e[4];let a;return e[5]!==s||e[6]!==r?(a=(0,l.jsx)(io,{"data-slot":"avatar",className:r,...s}),e[5]=s,e[6]=r,e[7]=a):a=e[7],a}function zt(t){const e=(0,Wn.c)(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=oe("aspect-square size-full",n),e[3]=n,e[4]=r):r=e[4];let a;return e[5]!==s||e[6]!==r?(a=(0,l.jsx)(Ro,{"data-slot":"avatar-image",className:r,...s}),e[5]=s,e[6]=r,e[7]=a):a=e[7],a}function At(t){const e=(0,Wn.c)(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=oe("bg-muted flex size-full items-center justify-center rounded-full",n),e[3]=n,e[4]=r):r=e[4];let a;return e[5]!==s||e[6]!==r?(a=(0,l.jsx)(Ao,{"data-slot":"avatar-fallback",className:r,...s}),e[5]=s,e[6]=r,e[7]=a):a=e[7],a}var mc=ie(),hc=t=>{const e=(0,mc.c)(12);let n,s,r,a;e[0]!==t?({children:n,variant:r,className:a,...s}=t,e[0]=t,e[1]=n,e[2]=s,e[3]=r,e[4]=a):(n=e[1],s=e[2],r=e[3],a=e[4]);const o=r===void 0?"primary":r,i=a===void 0?"":a;let d;e[5]===Symbol.for("react.memo_cache_sentinel")?(d={primary:"text-white hover:text-white bg-zinc-900 hover:bg-zinc-800 border border-zinc-900 dark:bg-white dark:text-black dark:border-white dark:hover:bg-zinc-200",secondary:"text-zinc-900 border border-zinc-300 hover:border-zinc-400 bg-transparent hover:bg-zinc-50 dark:text-white dark:border-zinc-700 dark:hover:border-zinc-600 dark:hover:bg-zinc-900",outline:"text-zinc-900 border border-zinc-300 hover:border-zinc-400 bg-white dark:bg-transparent dark:text-white dark:border-zinc-700 dark:hover:bg-zinc-900",danger:"text-white bg-red-500 hover:bg-red-600 border border-red-500",ghost:"text-zinc-500 hover:bg-zinc-100 dark:text-zinc-400 dark:hover:bg-zinc-800 border-transparent"},e[5]=d):d=e[5];const h=`rounded-full font-bold inline-flex items-center justify-center relative overflow-hidden px-4 py-1.5 transition-all duration-200 active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed disabled:active:scale-100 touch-manipulation ${d[o]} ${i}`;let u;e[6]!==n?(u=(0,l.jsx)("div",{className:"flex items-center gap-x-1.5",children:n}),e[6]=n,e[7]=u):u=e[7];let c;return e[8]!==s||e[9]!==h||e[10]!==u?(c=(0,l.jsx)("button",{className:h,...s,children:u}),e[8]=s,e[9]=h,e[10]=u,e[11]=c):c=e[11],c},Je=hc,Tt=ie();function Am(t){const e=(0,Tt.c)(4);let n;e[0]!==t?({...n}=t,e[0]=t,e[1]=n):n=e[1];let s;return e[2]!==n?(s=(0,l.jsx)(to,{"data-slot":"context-menu",...n}),e[2]=n,e[3]=s):s=e[3],s}function Em(t){const e=(0,Tt.c)(4);let n;e[0]!==t?({...n}=t,e[0]=t,e[1]=n):n=e[1];let s;return e[2]!==n?(s=(0,l.jsx)(lo,{"data-slot":"context-menu-trigger",...n}),e[2]=n,e[3]=s):s=e[3],s}function Rm(t){const e=(0,Tt.c)(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=oe("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-context-menu-content-available-height) min-w-[8rem] origin-(--radix-context-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",n),e[3]=n,e[4]=r):r=e[4];let a;return e[5]!==s||e[6]!==r?(a=(0,l.jsx)(vi,{children:(0,l.jsx)(co,{"data-slot":"context-menu-content",className:r,...s})}),e[5]=s,e[6]=r,e[7]=a):a=e[7],a}function Im(t){const e=(0,Tt.c)(12);let n,s,r,a;e[0]!==t?({className:n,inset:s,variant:a,...r}=t,e[0]=t,e[1]=n,e[2]=s,e[3]=r,e[4]=a):(n=e[1],s=e[2],r=e[3],a=e[4]);const o=a===void 0?"default":a;let i;e[5]!==n?(i=oe("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",n),e[5]=n,e[6]=i):i=e[6];let d;return e[7]!==s||e[8]!==r||e[9]!==i||e[10]!==o?(d=(0,l.jsx)(po,{"data-slot":"context-menu-item","data-inset":s,"data-variant":o,className:i,...r}),e[7]=s,e[8]=r,e[9]=i,e[10]=o,e[11]=d):d=e[11],d}function Mm(t){const e=(0,Tt.c)(10);let n,s,r;e[0]!==t?({className:n,inset:s,...r}=t,e[0]=t,e[1]=n,e[2]=s,e[3]=r):(n=e[1],s=e[2],r=e[3]);let a;e[4]!==n?(a=oe("text-foreground px-2 py-1.5 text-sm font-medium data-[inset]:pl-8",n),e[4]=n,e[5]=a):a=e[5];let o;return e[6]!==s||e[7]!==r||e[8]!==a?(o=(0,l.jsx)(Co,{"data-slot":"context-menu-label","data-inset":s,className:a,...r}),e[6]=s,e[7]=r,e[8]=a,e[9]=o):o=e[9],o}function Dm(t){const e=(0,Tt.c)(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=oe("bg-border -mx-1 my-1 h-px",n),e[3]=n,e[4]=r):r=e[4];let a;return e[5]!==s||e[6]!==r?(a=(0,l.jsx)(Eo,{"data-slot":"context-menu-separator",className:r,...s}),e[5]=s,e[6]=r,e[7]=a):a=e[7],a}var Ct=ie();function Rs(t){const e=(0,Ct.c)(4);let n;e[0]!==t?({...n}=t,e[0]=t,e[1]=n):n=e[1];let s;return e[2]!==n?(s=(0,l.jsx)(Po,{"data-slot":"dialog",...n}),e[2]=n,e[3]=s):s=e[3],s}function pc(t){const e=(0,Ct.c)(4);let n;e[0]!==t?({...n}=t,e[0]=t,e[1]=n):n=e[1];let s;return e[2]!==n?(s=(0,l.jsx)(Yo,{"data-slot":"dialog-portal",...n}),e[2]=n,e[3]=s):s=e[3],s}function gc(t){const e=(0,Ct.c)(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=oe("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",n),e[3]=n,e[4]=r):r=e[4];let a;return e[5]!==s||e[6]!==r?(a=(0,l.jsx)(ai,{"data-slot":"dialog-overlay",className:r,...s}),e[5]=s,e[6]=r,e[7]=a):a=e[7],a}function Is(t){const e=(0,Ct.c)(12);let n,s,r;e[0]!==t?({className:s,children:n,...r}=t,e[0]=t,e[1]=n,e[2]=s,e[3]=r):(n=e[1],s=e[2],r=e[3]);let a;e[4]===Symbol.for("react.memo_cache_sentinel")?(a=(0,l.jsx)(gc,{}),e[4]=a):a=e[4];let o;e[5]!==s?(o=oe("bg-white dark:bg-zinc-950 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-2xl border border-zinc-100 dark:border-zinc-800 p-6 shadow-xl duration-200 sm:max-w-md focus:outline-none",s),e[5]=s,e[6]=o):o=e[6];let i;e[7]===Symbol.for("react.memo_cache_sentinel")?(i=(0,l.jsxs)(qo,{className:"absolute right-4 top-4 rounded-full p-2.5 opacity-100 bg-zinc-100/50 hover:bg-zinc-200/80 dark:bg-zinc-800/50 dark:hover:bg-zinc-700/80 text-zinc-900 dark:text-zinc-100 transition-all focus:outline-none focus:ring-2 focus:ring-violet-500 disabled:pointer-events-none cursor-pointer z-[60] shadow-sm backdrop-blur-sm",children:[(0,l.jsx)(Et,{className:"size-5",strokeWidth:2.5}),(0,l.jsx)("span",{className:"sr-only",children:"Close"})]}),e[7]=i):i=e[7];let d;return e[8]!==n||e[9]!==r||e[10]!==o?(d=(0,l.jsxs)(pc,{children:[a,(0,l.jsxs)(li,{"data-slot":"alert-dialog-content","aria-describedby":void 0,className:o,...r,children:[n,i]})]}),e[8]=n,e[9]=r,e[10]=o,e[11]=d):d=e[11],d}function Ms(t){const e=(0,Ct.c)(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=oe("flex flex-col gap-2 text-center sm:text-left",n),e[3]=n,e[4]=r):r=e[4];let a;return e[5]!==s||e[6]!==r?(a=(0,l.jsx)("div",{"data-slot":"dialog-header",className:r,...s}),e[5]=s,e[6]=r,e[7]=a):a=e[7],a}function Ds(t){const e=(0,Ct.c)(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=oe("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",n),e[3]=n,e[4]=r):r=e[4];let a;return e[5]!==s||e[6]!==r?(a=(0,l.jsx)("div",{"data-slot":"dialog-footer",className:r,...s}),e[5]=s,e[6]=r,e[7]=a):a=e[7],a}function Ts(t){const e=(0,Ct.c)(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=oe("text-lg leading-none font-semibold",n),e[3]=n,e[4]=r):r=e[4];let a;return e[5]!==s||e[6]!==r?(a=(0,l.jsx)(ei,{"data-slot":"dialog-title",className:r,...s}),e[5]=s,e[6]=r,e[7]=a):a=e[7],a}function vc(t){const e=(0,Ct.c)(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=oe("text-muted-foreground text-sm",n),e[3]=n,e[4]=r):r=e[4];let a;return e[5]!==s||e[6]!==r?(a=(0,l.jsx)(Go,{"data-slot":"dialog-description",className:r,...s}),e[5]=s,e[6]=r,e[7]=a):a=e[7],a}var Jt=ie();function bc(t){const e=(0,Jt.c)(4);let n;e[0]!==t?({...n}=t,e[0]=t,e[1]=n):n=e[1];let s;return e[2]!==n?(s=(0,l.jsx)(bo,{"data-slot":"dropdown-menu",...n}),e[2]=n,e[3]=s):s=e[3],s}function xc(t){const e=(0,Jt.c)(4);let n;e[0]!==t?({...n}=t,e[0]=t,e[1]=n):n=e[1];let s;return e[2]!==n?(s=(0,l.jsx)(ao,{"data-slot":"dropdown-menu-trigger",...n}),e[2]=n,e[3]=s):s=e[3],s}function wc(t){const e=(0,Jt.c)(10);let n,s,r;e[0]!==t?({className:n,sideOffset:r,...s}=t,e[0]=t,e[1]=n,e[2]=s,e[3]=r):(n=e[1],s=e[2],r=e[3]);const a=r===void 0?4:r;let o;e[4]!==n?(o=oe("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",n),e[4]=n,e[5]=o):o=e[5];let i;return e[6]!==s||e[7]!==a||e[8]!==o?(i=(0,l.jsx)(vo,{children:(0,l.jsx)(eo,{"data-slot":"dropdown-menu-content",sideOffset:a,className:o,...s})}),e[6]=s,e[7]=a,e[8]=o,e[9]=i):i=e[9],i}function ur(t){const e=(0,Jt.c)(12);let n,s,r,a;e[0]!==t?({className:n,inset:s,variant:a,...r}=t,e[0]=t,e[1]=n,e[2]=s,e[3]=r,e[4]=a):(n=e[1],s=e[2],r=e[3],a=e[4]);const o=a===void 0?"default":a;let i;e[5]!==n?(i=oe("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",n),e[5]=n,e[6]=i):i=e[6];let d;return e[7]!==s||e[8]!==r||e[9]!==i||e[10]!==o?(d=(0,l.jsx)(Xo,{"data-slot":"dropdown-menu-item","data-inset":s,"data-variant":o,className:i,...r}),e[7]=s,e[8]=r,e[9]=i,e[10]=o,e[11]=d):d=e[11],d}function Tm(t){const e=(0,Jt.c)(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=oe("bg-border -mx-1 my-1 h-px",n),e[3]=n,e[4]=r):r=e[4];let a;return e[5]!==s||e[6]!==r?(a=(0,l.jsx)(yo,{"data-slot":"dropdown-menu-separator",className:r,...s}),e[5]=s,e[6]=r,e[7]=a):a=e[7],a}var yc=Object.defineProperty,jc=(t,e)=>{for(var n in e)yc(t,n,{get:e[n],enumerable:!0})},gt={};jc(gt,{ActiveEmoji:()=>ra,Empty:()=>na,List:()=>$s,Loading:()=>ta,Root:()=>Ys,Search:()=>Xs,SkinTone:()=>sa,SkinToneSelector:()=>ea,Viewport:()=>Qs});var Ps="'Apple Color Emoji', 'Noto Color Emoji', 'Twemoji Mozilla', 'Android Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', EmojiSymbols, sans-serif",Vn=["none","light","medium-light","medium","medium-dark","dark"];function Sn(t){return t.charAt(0).toUpperCase()+t.slice(1)}var st=2,Be=null;function fr(t){try{Be??=document.createElement("canvas").getContext("2d",{willReadFrequently:!0})}catch{}if(!Be||(queueMicrotask(()=>{Be&&(Be=null)}),Be.canvas.width=st,Be.canvas.height=st,Be.font=`2px ${Ps}`,Be.textBaseline="middle",Be.measureText(t).width>=st*2))return!1;Be.fillStyle="#00f",Be.fillText(t,0,0);let e=Be.getImageData(0,0,st,st).data;Be.clearRect(0,0,st,st),Be.fillStyle="#f00",Be.fillText(t,0,0);let n=Be.getImageData(0,0,st,st).data;for(let s=0;s<st*st*4;s+=4)if(e[s]!==n[s]||e[s+1]!==n[s+1]||e[s+2]!==n[s+2])return!1;return!0}function mr(t,e,n){try{let s=t.getItem(e);if(!s)throw new Error(`No value found for "${e}".`);return n(JSON.parse(s))}catch{return null}}function Ls(t,e,n){t.setItem(e,JSON.stringify(n))}function hr(t){return e=>e===void 0?void 0:t(e)}function pr(t){return e=>e===null?null:t(e)}function Ue(t){if(typeof t!="string")throw new Error;return t}function an(t){if(typeof t!="number")throw new Error;return t}function Fs(t){if(typeof t!="boolean")throw new Error;return t}function vt(t){return e=>{if(typeof e!="object"||e===null)throw new Error;let n={};for(let s in t){let r=e[s];r===void 0&&t[s](void 0),n[s]=t[s](r)}return n}}function Nn(t){return e=>{if(!Array.isArray(e))throw new Error;return e.length>0&&t(e[0]),e}}var Os=(t,e)=>`${t}/${e}/data.json`,Us=(t,e)=>`${t}/${e}/messages.json`,Cc=["bn","da","de","en-gb","en","es-mx","es","et","fi","fr","hi","hu","it","ja","ko","lt","ms","nb","nl","pl","pt","ru","sv","th","uk","vi","zh-hant","zh"],gr="en",Hs=t=>`frimousse/data/${t}`,vr="frimousse/metadata";async function br(t,e){try{return(await fetch(t,{method:"HEAD",signal:e})).headers.get("etag")}catch{return null}}async function kc(t,e,n){let[{emojis:s,emojisEtag:r},{messages:a,messagesEtag:o}]=await Promise.all([fetch(Os(t,e),{signal:n}).then(async i=>({emojis:await i.json(),emojisEtag:i.headers.get("etag")})),fetch(Us(t,e),{signal:n}).then(async i=>({messages:await i.json(),messagesEtag:i.headers.get("etag")}))]);return{emojis:s,messages:a,emojisEtag:r,messagesEtag:o}}async function _c(t,e,n){let[s,r]=await Promise.all([br(Os(t,e),n),br(Us(t,e),n)]);return{emojisEtag:s,messagesEtag:r}}function Sc(t){return t.skins?t.skins.filter(e=>typeof e.tone=="number").reduce((e,n)=>{let s=Vn[n.tone];return e[s]=n.emoji,e},{}):void 0}async function xr(t,e,n){let{emojis:s,emojisEtag:r,messages:a,messagesEtag:o}=await kc(t,e,n),i=a.subgroups.find(m=>m.key==="country-flag"||m.key==="subdivision-flag"),d=a.groups.filter(m=>m.key!=="component"),h=s.filter(m=>"group"in m),u=d.map(m=>({index:m.order,label:Sn(m.message)})),c=a.skinTones.reduce((m,p)=>(m[p.key]=Sn(p.message),m),{}),f={locale:e,emojis:h.map(m=>({emoji:m.emoji,category:m.group,version:m.version,label:Sn(m.label),tags:m.tags??[],countryFlag:i&&m.subgroup===i.order||void 0,skins:Sc(m)})),categories:u,skinTones:c};return Ls(localStorage,Hs(e),{data:f,metadata:{emojisEtag:r,messagesEtag:o}}),f}function Nc(t,e){let n=new Map;for(let o of t)n.has(o.version)||n.set(o.version,o.emoji);let s=[...n.keys()].sort((o,i)=>i-o),r=s[0]??0,a=fr("");if(typeof e=="number")return{emojiVersion:e,countryFlags:a};for(let o of s)if(fr(n.get(o)))return{emojiVersion:o,countryFlags:a};return{emojiVersion:r,countryFlags:a}}var zc=vt({emojiVersion:an,countryFlags:Fs}),Ac=vt({data:vt({locale:Ue,emojis:Nn(vt({emoji:Ue,category:an,label:Ue,version:an,tags:Nn(Ue),countryFlag:hr(Fs),skins:hr(vt({light:Ue,"medium-light":Ue,medium:Ue,"medium-dark":Ue,dark:Ue}))})),categories:Nn(vt({index:an,label:Ue})),skinTones:vt({light:Ue,"medium-light":Ue,medium:Ue,"medium-dark":Ue,dark:Ue})}),metadata:vt({emojisEtag:pr(Ue),messagesEtag:pr(Ue)})});async function Ec({locale:t,emojiVersion:e,emojibaseUrl:n,signal:s}){let r=typeof n=="string"?n:`https://cdn.jsdelivr.net/npm/emojibase-data@${typeof e=="number"?Math.floor(e):"latest"}`,a=mr(sessionStorage,vr,zc),o=mr(localStorage,Hs(t),Ac),i;if(!o)i=await xr(r,t,s);else if(a)i=o.data;else try{let{emojisEtag:d,messagesEtag:h}=await _c(r,t,s);i=!d||!h||d!==o.metadata.emojisEtag||h!==o.metadata.messagesEtag?await xr(r,t,s):o.data}catch{i=o.data}return a??=Nc(i.emojis,e),Ls(sessionStorage,vr,a),{locale:t,emojis:i.emojis.filter(d=>{let h=d.version<=a.emojiVersion;return d.countryFlag?h&&a.countryFlags:h}),categories:i.categories,skinTones:i.skinTones}}function wr(t){return Cc.includes(t)?t:(console.warn(`Locale "${t}" is not supported, using "${gr}" instead.`),gr)}function yr(t){return Vn.includes(t)?t:(console.warn(`Skin tone "${t}" is not valid, using "none" instead.`),"none")}function Rc(t,e){let n=[];if(e<=0)return n;for(let s=0,r=t.length;s<r;s+=e)n.push(t.slice(s,s+e));return n}function Ic(t,e){if(!e)return t;let n=e.toLowerCase().trim(),s=new WeakMap;return t.filter(r=>{let a=0;r.label.toLowerCase().includes(n)&&(a+=10);for(let o of r.tags)o.toLowerCase().includes(n)&&(a+=1);return a>0?(s.set(r,a),!0):!1}).sort((r,a)=>(s.get(a)??0)-(s.get(r)??0))}function Mc(t,e,n,s){let r=Ic(t.emojis,s),a=[],o=[],i=[],d={},h=0,u=0;for(let c of r)d[c.category]||(d[c.category]=[]),d[c.category].push({emoji:n&&n!=="none"&&c.skins?c.skins[n]:c.emoji,label:c.label});for(let c of t.categories){let f=d[c.index];if(!f||f.length===0)continue;let m=Rc(Array.from(f),e).map(p=>({categoryIndex:h,emojis:p}));a.push(...m),o.push({label:c.label,rowsCount:m.length,startRowIndex:u}),i.push(u),h++,u+=m.length}return{count:r.length,categories:o,categoriesStartRowIndices:i,rows:a,skinTones:t.skinTones}}function Dc(t){let e={},n=null,s=null,r=new Set,a=()=>{if(n){e=n,n=null;for(let h of r)h(e)}s=null},o=()=>n??e,i=h=>{n??=e,Object.assign(n,typeof h=="function"?h(o()):h),s||(s=requestAnimationFrame(a))},d=h=>(r.add(h),()=>r.delete(h));return e=t(i,o),{get:o,set:i,subscribe:d}}function Tc(t){let[e]=(0,g.useState)(t);return e}function Pc(t){let e=(0,g.createContext)(null);return{useStore:()=>{let n=(0,g.useContext)(e);if(!n)throw new Error(t);return n},Provider:({store:n,children:s})=>(0,l.jsx)(e.Provider,{value:n,children:s})}}function Ge(t,e,n=Object.is){let[s,r]=(0,g.useState)(()=>e(t.get()));return(0,g.useEffect)(()=>t.subscribe(()=>{let a=e(t.get());r(o=>n(o,a)?o:a)}),[t,e,n]),(0,g.useDebugValue)(s),s}function dt(t,e,n){return Ge(t,(0,g.useCallback)(s=>s[e],[e]),n)}var jr=2;function Lc(t,e,n,s,r){let a=0;return Dc((o,i)=>({locale:e,columns:n,sticky:s,skinTone:r,onEmojiSelect:t,data:null,search:"",interaction:"none",activeColumnIndex:0,activeRowIndex:0,rowHeight:null,categoryHeaderHeight:null,viewportWidth:null,viewportHeight:null,viewportCurrentCategoryIndex:null,viewportStartCategoryIndex:0,viewportStartRowIndex:0,viewportEndRowIndex:0,rootRef:null,searchRef:null,viewportRef:null,listRef:null,updateViewportState:d=>{let h=i(),u=d?.data??h.data,c=d?.categoryHeaderHeight??h.categoryHeaderHeight,f=d?.rowHeight??h.rowHeight,m=d?.viewportHeight??h.viewportHeight;if(!u||u.rows.length===0||!c||!f||!m)return o({...d,viewportStartCategoryIndex:0,viewportStartRowIndex:0,viewportEndRowIndex:0});let p=0,b=0;for(let y of u.categories)if(b++*c+y.startRowIndex*f<a)p+=c;else break;let x=u.categories.length*c+u.rows.length*f,v=Math.floor(jr*f/2),_=Math.ceil(jr*f/2),N=Math.min(a-p-v,x-m),S=N+m+_,M=Math.max(0,Math.floor(N/f)),k=Math.min(u.rows.length-1,Math.ceil(S/f)),D=u.rows[M]?.categoryIndex;return o(D===void 0&&d?d:{...d,viewportStartCategoryIndex:D,viewportStartRowIndex:M,viewportEndRowIndex:k})},onDataChange:d=>{i().updateViewportState({data:d,activeColumnIndex:0,activeRowIndex:0})},onSearchChange:d=>{o({search:d,interaction:d?"keyboard":"none"})},onActiveEmojiChange:(d,h,u)=>{if(o({interaction:d,activeColumnIndex:h,activeRowIndex:u}),d!=="keyboard")return;let{listRef:c,viewportRef:f,sticky:m,rowHeight:p,viewportHeight:b,categoryHeaderHeight:x}=i(),v=c?.current,_=f?.current;if(!v||!_||!p||!x||!b)return;let N=u;N===0&&_.scrollTo({top:0,behavior:"instant"});let S=v.querySelector(`[aria-rowindex="${N}"]`);if(!(S instanceof HTMLElement))return;let M=S.offsetTop,k=getComputedStyle(S),D=Number.parseFloat(k.scrollMarginTop),y=Number.parseFloat(k.scrollMarginBottom),w=a+D;m&&M<a+b/2&&(w+=x);let A=w+b-y;(M<w||M+p>A)&&_.scrollTo({top:Math.max(M<w+x?M-Math.max(m?x:0,D):M-b+p+y,0),behavior:"instant"})},onActiveEmojiReset:()=>{o({interaction:"none",activeColumnIndex:0,activeRowIndex:0})},onRowHeightChange:d=>{i().updateViewportState({rowHeight:d})},onCategoryHeaderHeightChange:d=>{i().updateViewportState({categoryHeaderHeight:d})},onViewportSizeChange:(d,h)=>{i().updateViewportState({viewportWidth:d,viewportHeight:h})},onViewportScroll:d=>{a=d,i().updateViewportState()}}))}var{useStore:Xe,Provider:Fc}=Pc("EmojiPicker.Root is missing.");function Oc(t){return t.search}function Yn(t){return t.interaction==="none"?void 0:t.data?.rows[t.activeRowIndex]?.emojis[t.activeColumnIndex]}function Uc(t){return t.data===void 0||typeof t.data?.count=="number"&&t.data.count===0}function Hc(t){return t.data===null||t.viewportHeight===null||t.rowHeight===null||t.categoryHeaderHeight===null}function Bs(t){return t.data?.rows.length}function Bc(t){return t.data?.categories.length}function qc(t){return t.data?.categoriesStartRowIndices}function Wc(t){return t.data?.skinTones}function qs(t,e){return t?.emoji===e?.emoji}function Vc(t,e){return t?.categoryIndex!==e?.categoryIndex||t?.emojis.length!==e?.emojis.length?!1:!!t?.emojis.every((n,s)=>qs(n,e?.emojis[s]))}var Ut="",Cr=/\p{Emoji_Modifier_Base}/u,Yc=/\uFE0F$/,Xc=/\u{1F3FB}|\u{1F3FC}|\u{1F3FD}|\u{1F3FE}|\u{1F3FF}/gu,Qc={light:"","medium-light":"",medium:"","medium-dark":"",dark:""};function Kc(t,e){if(!t.split(Ut).some(s=>Cr.test(s)))return t;let n=t.split(Ut).map(s=>s.replace(Xc,"")).join(Ut);return e==="none"?n:n.split(Ut).map((s,r,a)=>{let o=a.length>1;return!Cr.test(s)||o&&s===""?s:s.replace(Yc,"")+Qc[e]}).join(Ut)}function Zc(t){return Vn.map(e=>({skinTone:e,emoji:Kc(t,e)}))}function Ws(){return(0,g.useDeferredValue)(Ge(Xe(),Yn,qs))}function Vs(t=""){let e=Xe(),n=dt(e,"skinTone"),s=(0,g.useMemo)(()=>Zc(t),[t]);return[n,(0,g.useCallback)(r=>{e.set({skinTone:r})},[]),s]}function Xn(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||typeof e!="object"||t===null||e===null||Array.isArray(t)!==Array.isArray(e))return!1;let n=Object.keys(t),s=Object.keys(e);return n.length!==s.length?!1:n.every(r=>r in e&&t[r]===e[r])}function Jc(...t){}function Gc(t,e){let n=null;if(typeof window.requestIdleCallback=="function")n=window.requestIdleCallback(t,e);else{let s=Date.now();n=window.setTimeout(()=>{t({didTimeout:!1,timeRemaining:()=>Math.max(0,(e?.timeout??50)-(Date.now()-s))})},10)}return()=>{typeof window.cancelIdleCallback=="function"?window.cancelIdleCallback(n):window.clearTimeout(n)}}var ot=typeof window<"u"?g.useLayoutEffect:g.useEffect;function $c(t){let e=(0,g.useRef)(t);return ot(()=>{e.current=t}),(0,g.useCallback)((...n)=>e.current(...n),[])}function ed({emojiVersion:t,emojibaseUrl:e}){let[n,s]=(0,g.useState)(void 0),r=Xe(),a=dt(r,"locale"),o=dt(r,"columns"),i=dt(r,"skinTone"),d=dt(r,"search");return(0,g.useEffect)(()=>{let h=new AbortController,u=h.signal;return Ec({locale:a,emojiVersion:t,emojibaseUrl:e,signal:u}).then(c=>{s(c)}).catch(c=>{u.aborted||console.error(c)}),()=>{h.abort()}},[t,e,a]),(0,g.useEffect)(()=>{if(n)return Gc(()=>{r.get().onDataChange(Mc(n,o,i,d))},{timeout:100})},[n,o,i,d]),null}var Ys=(0,g.forwardRef)(({locale:t="en",columns:e=9,skinTone:n="none",onEmojiSelect:s=Jc,emojiVersion:r,emojibaseUrl:a,onFocusCapture:o,onBlurCapture:i,children:d,style:h,sticky:u=!0,...c},f)=>{let m=$c(s),p=Tc(()=>Lc(m,wr(t),e,u,yr(n))),[b,x]=(0,g.useState)(!1),v=(0,g.useRef)(null),_=(0,g.useCallback)(M=>{M&&(v.current=M,p.set({rootRef:v}))},[]);ot(()=>{p.set({locale:wr(t)})},[t]),ot(()=>{p.set({columns:e})},[e]),ot(()=>{p.set({sticky:u})},[u]),ot(()=>{p.set({skinTone:yr(n)})},[n]);let N=(0,g.useCallback)(M=>{o?.(M);let{searchRef:k,viewportRef:D}=p.get(),y=M.target===k?.current||M.target.hasAttribute("frimousse-search"),w=M.target===D?.current||M.target.hasAttribute("frimousse-viewport");M.isDefaultPrevented()||(x(y||w),M.isDefaultPrevented()||(x(y||w),w?p.get().onActiveEmojiChange("keyboard",0,0):y&&p.get().search===""&&p.set({interaction:"none"})))},[o]),S=(0,g.useCallback)(M=>{i?.(M),!M.isDefaultPrevented()&&!M.currentTarget.contains(M.relatedTarget)&&x(!1)},[i]);return ot(()=>{b||p.get().onActiveEmojiReset()},[b]),(0,g.useImperativeHandle)(f,()=>v.current),(0,g.useEffect)(()=>{if(!b)return;function M(k){if(k.defaultPrevented||!k.key.startsWith("Arrow")&&k.key!=="Enter")return;let{data:D,onEmojiSelect:y,onActiveEmojiChange:w,interaction:A,activeColumnIndex:R,activeRowIndex:E}=p.get();if(k.key==="Enter"){let I=Yn(p.get());I&&(k.preventDefault(),y(I))}if(k.key.startsWith("Arrow")){let I=R,z=E;if(k.preventDefault(),A!=="none"){if(D?.rows&&D.rows.length>0)switch(k.key){case"ArrowLeft":if(I===0){let L=z-1,j=D.rows[L];j&&(z=L,I=j.emojis.length-1)}else I-=1;break;case"ArrowRight":if(I===D.rows[z].emojis.length-1){let L=z+1;D.rows[L]&&(z=L,I=0)}else I+=1;break;case"ArrowUp":{let L=D.rows[z-1];L&&(z-=1,L.emojis[I]||(I=L.emojis.length-1));break}case"ArrowDown":{let L=D.rows[z+1];L&&(z+=1,L.emojis[I]||(I=L.emojis.length-1));break}}w("keyboard",I,z)}else w("keyboard",0,0)}}return document.addEventListener("keydown",M),()=>{document.removeEventListener("keydown",M)}},[b]),ot(()=>{let M=null,k=null,D=null,y=null,w=p.subscribe(z=>{v.current&&(M!==z.viewportWidth&&(M=z.viewportWidth,v.current.style.setProperty("--frimousse-viewport-width",`${z.viewportWidth}px`)),k!==z.viewportHeight&&(k=z.viewportHeight,v.current.style.setProperty("--frimousse-viewport-height",`${z.viewportHeight}px`)),D!==z.rowHeight&&(D=z.rowHeight,v.current.style.setProperty("--frimousse-row-height",`${z.rowHeight}px`)),y!==z.categoryHeaderHeight&&(y=z.categoryHeaderHeight,v.current.style.setProperty("--frimousse-category-header-height",`${z.categoryHeaderHeight}px`)))}),{viewportWidth:A,viewportHeight:R,rowHeight:E,categoryHeaderHeight:I}=p.get();return A&&v.current.style.setProperty("--frimousse-viewport-width",`${A}px`),R&&v.current.style.setProperty("--frimousse-viewport-height",`${R}px`),E&&v.current.style.setProperty("--frimousse-row-height",`${E}px`),I&&v.current.style.setProperty("--frimousse-category-header-height",`${I}px`),w},[]),(0,l.jsx)("div",{"data-focused":b?"":void 0,"frimousse-root":"",onBlurCapture:S,onFocusCapture:N,...c,ref:_,style:{"--frimousse-emoji-font":Ps,...h},children:(0,l.jsxs)(Fc,{store:p,children:[(0,l.jsx)(ed,{emojiVersion:r,emojibaseUrl:a}),d]})})}),Xs=(0,g.forwardRef)(({value:t,defaultValue:e,onChange:n,...s},r)=>{let a=Xe(),o=(0,g.useRef)(null),i=(0,g.useCallback)(c=>{c&&(o.current=c,a.set({searchRef:o}))},[]),d=typeof t=="string",h=(0,g.useRef)(d);(0,g.useEffect)(()=>{h.current=d},[d]),ot(()=>{a.set({search:typeof t=="string"?t:typeof e=="string"?e:""})},[]),ot(()=>{typeof t=="string"&&a.get().onSearchChange(t)},[t]);let u=(0,g.useCallback)(c=>{n?.(c),c.isDefaultPrevented()||a.get().onSearchChange(c.target.value)},[n]);return(0,g.useImperativeHandle)(r,()=>o.current),(0,l.jsx)("input",{autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",enterKeyHint:"done","frimousse-search":"",placeholder:"Search",spellCheck:!1,type:"search",...s,defaultValue:e,onChange:u,ref:i,value:t})}),td=(0,g.memo)(()=>{let t=Ws();return t?(0,l.jsx)("div",{"aria-live":"polite",style:{border:0,clip:"rect(0, 0, 0, 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:1,wordWrap:"normal"},children:t.label}):null}),Qs=(0,g.forwardRef)(({children:t,onScroll:e,onKeyDown:n,style:s,...r},a)=>{let o=Xe(),i=(0,g.useRef)(null),d=(0,g.useCallback)(f=>{f&&(i.current=f,o.set({viewportRef:i}))},[]),h=Ge(o,Bs),u=Ge(o,Bc),c=(0,g.useCallback)(f=>{e?.(f),o.get().onViewportScroll(f.currentTarget.scrollTop)},[e]);return ot(()=>{if(!i.current)return;let f=new ResizeObserver(([m])=>{let p=m?.borderBoxSize[0]?.inlineSize??0,b=m?.borderBoxSize[0]?.blockSize??0,{onViewportSizeChange:x,viewportHeight:v,viewportWidth:_}=o.get();(v!==b||_!==p)&&x(p,b)});return f.observe(i.current),o.get().onViewportSizeChange(i.current.offsetWidth,i.current.clientHeight),()=>{f.disconnect()}},[]),(0,g.useImperativeHandle)(a,()=>i.current),(0,l.jsxs)("div",{"frimousse-viewport":"",...r,onScroll:c,ref:d,style:{position:"relative",boxSizing:"border-box",contain:"layout paint",containIntrinsicSize:typeof h=="number"&&typeof u=="number"?`var(--frimousse-viewport-width, auto) calc(${h} * var(--frimousse-row-height) + ${u} * var(--frimousse-category-header-height))`:void 0,overflowY:"auto",overscrollBehavior:"contain",scrollbarGutter:"stable",willChange:"scroll-position",...s},children:[(0,l.jsx)(td,{}),t]})});function Ks(t,e,n){return{emoji:{...t,isActive:n},role:"gridcell","aria-colindex":e,"aria-selected":n||void 0,"aria-label":t.label,"data-active":n?"":void 0,"frimousse-emoji":"",style:{fontFamily:"var(--frimousse-emoji-font)"},tabIndex:-1}}function Zs(t,e=!1){return{role:e?void 0:"row","aria-rowindex":e?void 0:t,"frimousse-row":"",style:{contain:e?void 0:"content",height:e?void 0:"var(--frimousse-row-height)",display:"flex"}}}function Js(t,e){return{"frimousse-category":"",style:{contain:"content",top:e?`calc(${t} * var(--frimousse-category-header-height) + ${e.startRowIndex} * var(--frimousse-row-height))`:void 0,height:e?`calc(var(--frimousse-category-header-height) + ${e.rowsCount} * var(--frimousse-row-height))`:void 0,width:"100%",pointerEvents:"none",position:"absolute"}}}function Gs(t,e=!1,n=!0){return{category:t,"frimousse-category-header":"",style:{contain:e?void 0:"layout paint",height:e?void 0:"var(--frimousse-category-header-height)",pointerEvents:"auto",position:n?"sticky":void 0,top:0}}}function kr(t,e,n,s){return{"frimousse-list-sizer":"",style:{position:"relative",boxSizing:"border-box",height:`calc(${t} * var(--frimousse-row-height) + ${e} * var(--frimousse-category-header-height))`,paddingTop:`calc(${n} * var(--frimousse-row-height) + ${s} * var(--frimousse-category-header-height))`}}}function _r(t,e,n){return{"aria-colcount":t,"aria-rowcount":e,"frimousse-list":"",style:{"--frimousse-list-columns":t,...n},role:"grid"}}function nd(t){t.preventDefault()}var rd=(0,g.memo)(({Emoji:t,emoji:e,columnIndex:n,rowIndex:s})=>{let r=Xe(),a=Ge(r,h=>Yn(h)?.emoji===e.emoji),o=(0,g.useCallback)(()=>{r.get().onEmojiSelect(e)},[e]),i=(0,g.useCallback)(()=>{r.get().onActiveEmojiChange("pointer",n,s)},[n,s]),d=(0,g.useCallback)(()=>{r.get().onActiveEmojiReset()},[]);return(0,l.jsx)(t,{...Ks(e,n,a),onClick:o,onPointerDown:nd,onPointerEnter:i,onPointerLeave:d})}),sd=(0,g.memo)(({Row:t,Emoji:e,rowIndex:n})=>{let s=Ge(Xe(),r=>r.data?.rows[n],Vc);return s?(0,l.jsx)(t,{...Zs(n),children:s.emojis.map((r,a)=>(0,l.jsx)(rd,{Emoji:e,columnIndex:a,emoji:r,rowIndex:n},r.label))}):null}),ad=(0,g.memo)(({CategoryHeader:t,categoryIndex:e})=>{let n=Xe(),s=Ge(n,a=>a.data?.categories[e],Xn),r=dt(n,"sticky");return s?(0,l.jsx)("div",{...Js(e,s),children:(0,l.jsx)(t,{...Gs({label:s.label},!1,r)})}):null}),Sr=(0,g.memo)(({CategoryHeader:t,Row:e,Emoji:n})=>{let s=(0,g.useRef)(null),r=Xe(),a=dt(r,"columns"),o=(0,g.useMemo)(()=>Array(a).fill({emoji:"",label:""}),[a]),i=(0,g.useMemo)(()=>({label:"Category"}),[]),d=(0,g.useRef)(null),h=(0,g.useRef)(null);return ot(()=>{let u=s.current?.parentElement?.parentElement;if(!u||!d.current||!h.current)return;let c=new ResizeObserver(p=>{for(let b of p){let x=b.contentRect.height,{onRowHeightChange:v,onCategoryHeaderHeightChange:_,rowHeight:N,categoryHeaderHeight:S}=r.get();b.target===d.current&&N!==x&&v(x),b.target===h.current&&S!==x&&_(x)}});c.observe(u),c.observe(d.current),c.observe(h.current);let{onRowHeightChange:f,onCategoryHeaderHeightChange:m}=r.get();return f(d.current.clientHeight),m(h.current.clientHeight),()=>{c.disconnect()}},[]),(0,l.jsxs)("div",{"aria-hidden":!0,ref:s,style:{height:0,visibility:"hidden"},children:[(0,l.jsx)("div",{"frimousse-row-sizer":"",ref:d,children:(0,l.jsx)(e,{...Zs(-1,!0),children:o.map((u,c)=>(0,l.jsx)(n,{...Ks(u,c,!1)},c))})}),(0,l.jsx)("div",{...Js(-1),children:(0,l.jsx)("div",{"frimousse-category-header-sizer":"",ref:h,children:(0,l.jsx)(t,{...Gs(i,!0)})})})]})});function od({category:t,...e}){return(0,l.jsx)("div",{...e,children:t.label})}function id({emoji:t,...e}){return(0,l.jsx)("button",{type:"button",...e,children:t.emoji})}function ld({...t}){return(0,l.jsx)("div",{...t})}var $s=(0,g.forwardRef)(({style:t,components:e,...n},s)=>{let r=Xe(),a=(0,g.useRef)(null),o=(0,g.useCallback)(v=>{v&&(a.current=v,r.set({listRef:a}))},[]),i=e?.CategoryHeader??od,d=e?.Emoji??id,h=e?.Row??ld,u=dt(r,"columns"),c=dt(r,"viewportStartRowIndex"),f=dt(r,"viewportEndRowIndex"),m=Ge(r,Bs),p=Ge(r,qc,Xn),b=(0,g.useMemo)(()=>p?.filter(v=>v<c).length??0,[p,c]),x=p?.length??0;return(0,g.useImperativeHandle)(s,()=>a.current),!m||!p||x===0?(0,l.jsx)("div",{..._r(u,0,t),...n,children:(0,l.jsx)("div",{...kr(0,0,0,0),children:(0,l.jsx)(Sr,{CategoryHeader:i,Emoji:d,Row:h})})}):(0,l.jsx)("div",{..._r(u,m,t),...n,ref:o,children:(0,l.jsxs)("div",{...kr(m,x,c,b),children:[(0,l.jsx)(Sr,{CategoryHeader:i,Emoji:d,Row:h}),Array.from({length:f-c+1},(v,_)=>{let N=c+_;return(0,l.jsxs)(g.Fragment,{children:[p.indexOf(N)>=0&&(0,l.jsx)("div",{style:{height:"var(--frimousse-category-header-height)"}}),(0,l.jsx)(sd,{Emoji:d,Row:h,rowIndex:N})]},N)}),Array.from({length:x},(v,_)=>(0,l.jsx)(ad,{CategoryHeader:i,categoryIndex:_},_))]})})}),ea=(0,g.forwardRef)(({emoji:t,onClick:e,"aria-label":n="Change skin tone",...s},r)=>{let a=Ge(Xe(),Wc,Xn),[o,i,d]=Vs(t),h=(0,g.useMemo)(()=>Math.max(0,d.findIndex(b=>b.skinTone===o)),[o,d]),u=d[h],c=d[(h+1)%d.length].skinTone,f=o==="none"?void 0:a?.[o],m=c==="none"?void 0:a?.[c],p=(0,g.useCallback)(b=>{e?.(b),b.isDefaultPrevented()||i(c)},[e,i,c]);return(0,l.jsx)("button",{type:"button",...s,"aria-label":n+(m?` (${m})`:""),"aria-live":"polite","aria-valuetext":f,"frimousse-skin-tone-selector":"",onClick:p,ref:r,children:u.emoji})});function ta({children:t,...e}){return Ge(Xe(),Hc)?(0,l.jsx)("span",{"frimousse-loading":"",...e,children:t}):null}function cd({children:t}){return t({search:Ge(Xe(),Oc)})}function na({children:t,...e}){return Ge(Xe(),Uc)?(0,l.jsx)("span",{"frimousse-empty":"",...e,children:typeof t=="function"?(0,l.jsx)(cd,{children:t}):t}):null}function ra({children:t}){return t({emoji:Ws()})}function sa({children:t,emoji:e}){let[n,s,r]=Vs(e);return t({skinTone:n,setSkinTone:s,skinToneVariations:r})}Ys.displayName="EmojiPicker.Root";Xs.displayName="EmojiPicker.Search";Qs.displayName="EmojiPicker.Viewport";$s.displayName="EmojiPicker.List";ta.displayName="EmojiPicker.Loading";na.displayName="EmojiPicker.Empty";ea.displayName="EmojiPicker.SkinToneSelector";ra.displayName="EmojiPicker.ActiveEmoji";sa.displayName="EmojiPicker.SkinTone";var dd=ie(),ud=t=>{const e=(0,dd.c)(10),{onEmojiSelect:n,className:s}=t;let r;e[0]!==s?(r=oe("isolate flex h-[350px] w-[320px] flex-col overflow-hidden rounded-xl border border-zinc-200 bg-white shadow-xl dark:border-zinc-800 dark:bg-zinc-950",s),e[0]=s,e[1]=r):r=e[1];let a;e[2]===Symbol.for("react.memo_cache_sentinel")?(a=(0,l.jsx)(gt.Search,{className:"z-10 mx-3 mt-3 appearance-none rounded-lg border-none bg-zinc-100 px-3 py-2 text-sm outline-none placeholder:text-zinc-500 focus:ring-1 focus:ring-violet-500 dark:bg-zinc-900 dark:text-white",placeholder:"Search emojis..."}),e[2]=a):a=e[2];let o,i;e[3]===Symbol.for("react.memo_cache_sentinel")?(o=(0,l.jsx)(gt.Loading,{className:"absolute inset-0 flex items-center justify-center text-zinc-400 text-sm dark:text-zinc-500",children:"Loading"}),i=(0,l.jsx)(gt.Empty,{className:"absolute inset-0 flex items-center justify-center text-zinc-400 text-sm dark:text-zinc-500",children:"No emoji found."}),e[3]=o,e[4]=i):(o=e[3],i=e[4]);let d,h;e[5]===Symbol.for("react.memo_cache_sentinel")?(d=(0,l.jsxs)(gt.Viewport,{className:"relative flex-1 outline-none no-scrollbar",children:[o,i,(0,l.jsx)(gt.List,{className:"select-none pb-2",components:{CategoryHeader:fd,Row:md,Emoji:hd}})]}),h=(0,l.jsx)(gt.ActiveEmoji,{children:pd}),e[5]=d,e[6]=h):(d=e[5],h=e[6]);let u;return e[7]!==n||e[8]!==r?(u=(0,l.jsxs)(gt.Root,{onEmojiSelect:n,className:r,children:[a,d,h]}),e[7]=n,e[8]=r,e[9]=u):u=e[9],u},Pm=ud;function fd(t){const{category:e,...n}=t;return(0,l.jsx)("div",{className:"bg-white/80 px-4 pt-4 pb-1.5 font-bold text-zinc-500 text-[11px] uppercase tracking-wider backdrop-blur-sm dark:bg-zinc-950/80 dark:text-zinc-400",...n,children:e.label})}function md(t){const{children:e,...n}=t;return(0,l.jsx)("div",{className:"scroll-my-1 px-2",...n,children:e})}function hd(t){const{emoji:e,...n}=t;return(0,l.jsx)("button",{className:"flex aspect-square size-9 items-center justify-center rounded-lg text-xl transition-colors hover:bg-zinc-100 data-[active]:bg-violet-500/10 data-[active]:text-violet-500 dark:hover:bg-zinc-900 dark:data-[active]:bg-violet-500/20",...n,children:e.emoji})}function pd(t){const{emoji:e}=t;return(0,l.jsx)("div",{className:"flex items-center gap-3 border-t border-zinc-100 p-3 dark:border-zinc-800",children:e?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{className:"text-2xl",children:e.emoji}),(0,l.jsx)("span",{className:"text-xs font-bold text-zinc-600 dark:text-zinc-400 truncate",children:e.label.replace(/:/g,"").replace(/_/g," ")})]}):(0,l.jsx)("span",{className:"text-xs font-medium text-zinc-400",children:"Select an emoji..."})})}var gd=ie(),vd=t=>{const e=(0,gd.c)(33),{src:n,isOpen:s,onClose:r,onCropComplete:a,aspect:o,circular:i}=t,[d,h]=(0,g.useState)(),[u,c]=(0,g.useState)(null),f=(0,g.useRef)(null);let m;e[0]!==o?(m=E=>{const{width:I,height:z}=E.currentTarget;h(o?Va(Ya({unit:"%",width:100},o,I,z),I,z):{unit:"%",width:100,height:100,x:0,y:0})},e[0]=o,e[1]=m):m=e[1];const p=m;let b;e[2]!==u||e[3]!==r||e[4]!==a?(b=async()=>{if(u&&f.current)try{a(await Ci(f.current,u)),r()}catch(E){console.error("Error cropping image:",E)}},e[2]=u,e[3]=r,e[4]=a,e[5]=b):b=e[5];const x=b;let v;e[6]!==r?(v=E=>!E&&r(),e[6]=r,e[7]=v):v=e[7];let _;e[8]===Symbol.for("react.memo_cache_sentinel")?(_=(0,l.jsx)(Ms,{className:"p-4 shrink-0",children:(0,l.jsx)(Ts,{children:"Crop Image"})}),e[8]=_):_=e[8];let N,S;e[9]===Symbol.for("react.memo_cache_sentinel")?(N=E=>h(E),S=(E,I)=>c(I),e[9]=N,e[10]=S):(N=e[9],S=e[10]);let M;e[11]!==p||e[12]!==n?(M=(0,l.jsx)("img",{ref:f,src:n,alt:"Crop preview",onLoad:p,className:"max-h-[60vh] w-auto block"}),e[11]=p,e[12]=n,e[13]=M):M=e[13];let k;e[14]!==o||e[15]!==i||e[16]!==d||e[17]!==M?(k=(0,l.jsx)("div",{className:"p-6 flex items-center justify-center bg-zinc-100/50 dark:bg-zinc-950/50 min-h-[300px] max-h-[65vh] overflow-auto",children:(0,l.jsx)(Ba,{crop:d,onChange:N,onComplete:S,aspect:o,circularCrop:i,className:"max-w-full shadow-2xl",children:M})}),e[14]=o,e[15]=i,e[16]=d,e[17]=M,e[18]=k):k=e[18];let D;e[19]!==r?(D=(0,l.jsx)(Je,{variant:"outline",onClick:r,className:"!w-auto px-6",children:"Cancel"}),e[19]=r,e[20]=D):D=e[20];let y;e[21]!==x?(y=(0,l.jsx)(Je,{onClick:x,className:"!w-auto px-6",children:"Apply Crop"}),e[21]=x,e[22]=y):y=e[22];let w;e[23]!==y||e[24]!==D?(w=(0,l.jsxs)(Ds,{className:"p-4 bg-white dark:bg-zinc-900 shrink-0 flex flex-row justify-end gap-2",children:[D,y]}),e[23]=y,e[24]=D,e[25]=w):w=e[25];let A;e[26]!==w||e[27]!==k?(A=(0,l.jsxs)(Is,{className:"sm:max-w-2xl bg-white dark:bg-zinc-900 p-0 overflow-hidden",children:[_,k,w]}),e[26]=w,e[27]=k,e[28]=A):A=e[28];let R;return e[29]!==s||e[30]!==A||e[31]!==v?(R=(0,l.jsx)(Rs,{open:s,onOpenChange:v,children:A}),e[29]=s,e[30]=A,e[31]=v,e[32]=R):R=e[32],R},bd=vd,xd=ie(),wd=t=>{const e=(0,xd.c)(105),{images:n,currentIndex:s,onClose:r,onNavigate:a}=t,o=s===void 0?0:s,[i,d]=(0,g.useState)(1);let h;e[0]===Symbol.for("react.memo_cache_sentinel")?(h={x:0,y:0},e[0]=h):h=e[0];const[u,c]=(0,g.useState)(h),[f,m]=(0,g.useState)(!1);let p;e[1]===Symbol.for("react.memo_cache_sentinel")?(p={x:0,y:0},e[1]=p):p=e[1];const[b,x]=(0,g.useState)(p),[v,_]=(0,g.useState)(null),[N,S]=(0,g.useState)(null),M=(0,g.useRef)(null),k=(0,g.useRef)(null);let D;e[2]===Symbol.for("react.memo_cache_sentinel")?(D=()=>d(jd),e[2]=D):D=e[2];const y=D;let w;e[3]===Symbol.for("react.memo_cache_sentinel")?(w=()=>{d(se=>{const xe=Math.max(se-.5,1);return xe===1&&c({x:0,y:0}),xe})},e[3]=w):w=e[3];const A=w;let R;e[4]===Symbol.for("react.memo_cache_sentinel")?(R=()=>{d(1),c({x:0,y:0})},e[4]=R):R=e[4];const E=R;let I;e[5]!==o||e[6]!==a?(I=()=>{o>0&&(E(),a(o-1))},e[5]=o,e[6]=a,e[7]=I):I=e[7];const z=I;let L;e[8]!==o||e[9]!==n?.length||e[10]!==a?(L=()=>{o<(n?.length||0)-1&&(E(),a(o+1))},e[8]=o,e[9]=n?.length,e[10]=a,e[11]=L):L=e[11],n?.length;const j=L;let C;e[12]!==j||e[13]!==z||e[14]!==r?(C=()=>{const se=xe=>{xe.key==="Escape"&&r(),xe.key==="ArrowLeft"&&z(),xe.key==="ArrowRight"&&j()};return window.addEventListener("keydown",se),()=>window.removeEventListener("keydown",se)},e[12]=j,e[13]=z,e[14]=r,e[15]=C):C=e[15];let P;if(e[16]!==o||e[17]!==j||e[18]!==z||e[19]!==r?(P=[o,r,z,j],e[16]=o,e[17]=j,e[18]=z,e[19]=r,e[20]=P):P=e[20],(0,g.useEffect)(C,P),!n||n.length===0)return null;const T=n[o],F=n.length>1;let q;e[21]!==u.x||e[22]!==u.y||e[23]!==i?(q=se=>{i>1&&(m(!0),x({x:se.clientX-u.x,y:se.clientY-u.y}))},e[21]=u.x,e[22]=u.y,e[23]=i,e[24]=q):q=e[24];const H=q;let B;e[25]!==b||e[26]!==f||e[27]!==i?(B=se=>{f&&i>1&&c({x:se.clientX-b.x,y:se.clientY-b.y})},e[25]=b,e[26]=f,e[27]=i,e[28]=B):B=e[28];const U=B;let O;e[29]===Symbol.for("react.memo_cache_sentinel")?(O=()=>m(!1),e[29]=O):O=e[29];const V=O;let Z;e[30]!==u.x||e[31]!==u.y||e[32]!==i?(Z=se=>{se.touches.length===1?(_({x:se.touches[0].clientX,y:se.touches[0].clientY,time:Date.now()}),i>1&&(m(!0),x({x:se.touches[0].clientX-u.x,y:se.touches[0].clientY-u.y}))):se.touches.length===2&&S(Math.hypot(se.touches[0].clientX-se.touches[1].clientX,se.touches[0].clientY-se.touches[1].clientY))},e[30]=u.x,e[31]=u.y,e[32]=i,e[33]=Z):Z=e[33];const X=Z;let W;e[34]!==b||e[35]!==N||e[36]!==f||e[37]!==i?(W=se=>{if(se.touches.length===1)f&&i>1&&c({x:se.touches[0].clientX-b.x,y:se.touches[0].clientY-b.y});else if(se.touches.length===2&&N){const xe=Math.hypot(se.touches[0].clientX-se.touches[1].clientX,se.touches[0].clientY-se.touches[1].clientY);d(Math.min(Math.max(i*(xe/N),1),4)),S(xe)}},e[34]=b,e[35]=N,e[36]=f,e[37]=i,e[38]=W):W=e[38];const ee=W;let K;e[39]!==j||e[40]!==z||e[41]!==i||e[42]!==v?(K=se=>{if(se.touches.length<2&&S(null),m(!1),v&&i===1){const xe={x:se.changedTouches[0].clientX,y:se.changedTouches[0].clientY},je=xe.x-v.x,ze=xe.y-v.y,Te=Date.now()-v.time;Math.abs(je)>50&&Math.abs(ze)<50&&Te<300&&(je>0?z():j())}_(null)},e[39]=j,e[40]=z,e[41]=i,e[42]=v,e[43]=K):K=e[43];const Q=K;let te;e[44]!==T?(te=se=>{se.stopPropagation();const xe=document.createElement("a");xe.href=T,xe.download=`sysm-${Date.now()}.jpg`,document.body.appendChild(xe),xe.click(),document.body.removeChild(xe)},e[44]=T,e[45]=te):te=e[45];const J=te,G=F?`${o+1} / ${n.length}`:"Image View";let ne;e[46]!==G?(ne=(0,l.jsx)("div",{className:"flex flex-col",children:(0,l.jsx)("span",{className:"text-white font-bold text-lg drop-shadow-md",children:G})}),e[46]=G,e[47]=ne):ne=e[47];let re;e[48]===Symbol.for("react.memo_cache_sentinel")?(re=(0,l.jsx)("button",{onClick:A,className:"text-white p-2 hover:bg-white/10 rounded-full transition-colors hidden sm:block",children:(0,l.jsx)(oi,{size:20})}),e[48]=re):re=e[48];let le;e[49]===Symbol.for("react.memo_cache_sentinel")?(le=(0,l.jsx)("button",{onClick:y,className:"text-white p-2 hover:bg-white/10 rounded-full transition-colors hidden sm:block",children:(0,l.jsx)(Ho,{size:20})}),e[49]=le):le=e[49];let ae;e[50]===Symbol.for("react.memo_cache_sentinel")?(ae=(0,l.jsx)("button",{onClick:E,className:"text-white p-2 hover:bg-white/10 rounded-full transition-colors",children:(0,l.jsx)(wo,{size:20})}),e[50]=ae):ae=e[50];let be;e[51]===Symbol.for("react.memo_cache_sentinel")?(be=(0,l.jsx)($o,{size:20}),e[51]=be):be=e[51];let we;e[52]!==J?(we=(0,l.jsx)("button",{onClick:J,className:"text-white p-2 hover:bg-white/10 rounded-full transition-colors",children:be}),e[52]=J,e[53]=we):we=e[53];let ce;e[54]===Symbol.for("react.memo_cache_sentinel")?(ce=(0,l.jsx)("div",{className:"w-px h-6 bg-white/20 mx-1 hidden sm:block"}),e[54]=ce):ce=e[54];let ve;e[55]===Symbol.for("react.memo_cache_sentinel")?(ve=(0,l.jsx)(Et,{size:24}),e[55]=ve):ve=e[55];let me;e[56]!==r?(me=(0,l.jsx)("button",{onClick:r,className:"text-white p-2 bg-white/10 hover:bg-white/20 rounded-full transition-all",children:ve}),e[56]=r,e[57]=me):me=e[57];let ke;e[58]!==we||e[59]!==me?(ke=(0,l.jsxs)("div",{className:"flex items-center gap-1 sm:gap-3",onClick:Cd,children:[re,le,ae,we,ce,me]}),e[58]=we,e[59]=me,e[60]=ke):ke=e[60];let _e;e[61]!==ne||e[62]!==ke?(_e=(0,l.jsxs)("div",{className:"absolute top-0 left-0 right-0 p-4 z-20 flex items-center justify-between bg-gradient-to-b from-black/60 to-transparent",children:[ne,ke]}),e[61]=ne,e[62]=ke,e[63]=_e):_e=e[63];let ye;e[64]!==o||e[65]!==z||e[66]!==F||e[67]!==i?(ye=F&&o>0&&i===1&&(0,l.jsx)("button",{onClick:se=>{se.stopPropagation(),z()},className:"absolute left-6 z-10 p-4 bg-white/5 hover:bg-white/10 rounded-full text-white backdrop-blur-sm transition-all active:scale-90 hidden md:flex",children:(0,l.jsx)(es,{size:32})}),e[64]=o,e[65]=z,e[66]=F,e[67]=i,e[68]=ye):ye=e[68];const Re=`translate(${u.x}px, ${u.y}px) scale(${i})`;let Ie;e[69]!==Re?(Ie={transform:Re},e[69]=Re,e[70]=Ie):Ie=e[70];let de;e[71]!==T?(de=(0,l.jsx)("img",{ref:k,src:T,className:"max-w-[95vw] max-h-[85vh] object-contain select-none shadow-2xl rounded-sm",alt:"",draggable:!1}),e[71]=T,e[72]=de):de=e[72];let Se;e[73]!==H||e[74]!==Ie||e[75]!==de?(Se=(0,l.jsx)("div",{className:"relative transition-transform duration-200 ease-out cursor-grab active:cursor-grabbing",style:Ie,onMouseDown:H,onClick:kd,children:de}),e[73]=H,e[74]=Ie,e[75]=de,e[76]=Se):Se=e[76];let Ce;e[77]!==o||e[78]!==j||e[79]!==F||e[80]!==n.length||e[81]!==i?(Ce=F&&o<n.length-1&&i===1&&(0,l.jsx)("button",{onClick:se=>{se.stopPropagation(),j()},className:"absolute right-6 z-10 p-4 bg-white/5 hover:bg-white/10 rounded-full text-white backdrop-blur-sm transition-all active:scale-90 hidden md:flex",children:(0,l.jsx)(Gr,{size:32})}),e[77]=o,e[78]=j,e[79]=F,e[80]=n.length,e[81]=i,e[82]=Ce):Ce=e[82];let Ae;e[83]!==ye||e[84]!==Se||e[85]!==Ce?(Ae=(0,l.jsxs)("div",{className:"w-full h-full relative flex items-center justify-center",children:[ye,Se,Ce]}),e[83]=ye,e[84]=Se,e[85]=Ce,e[86]=Ae):Ae=e[86];let Ee;e[87]!==o||e[88]!==F||e[89]!==n||e[90]!==a?(Ee=F&&(0,l.jsx)("div",{className:"absolute bottom-8 flex gap-3 p-3 bg-black/40 backdrop-blur-xl rounded-2xl border border-white/10 overflow-x-auto max-w-[90%] hide-scrollbar",onClick:_d,children:n.map((se,xe)=>(0,l.jsx)("button",{onClick:()=>{E(),a(xe)},className:`size-14 rounded-xl overflow-hidden border-2 transition-all shrink-0 ${xe===o?"border-violet-500 scale-110 shadow-lg shadow-violet-500/20":"border-transparent opacity-40 hover:opacity-100"}`,children:(0,l.jsx)("img",{src:se,className:"size-full object-cover",alt:""})},xe))}),e[87]=o,e[88]=F,e[89]=n,e[90]=a,e[91]=Ee):Ee=e[91];let Me;e[92]!==F||e[93]!==i?(Me=i===1&&F&&(0,l.jsx)("div",{className:"absolute bottom-4 text-white/30 text-[10px] uppercase tracking-widest font-bold md:hidden",children:"Swipe to navigate"}),e[92]=F,e[93]=i,e[94]=Me):Me=e[94];let Ze;return e[95]!==U||e[96]!==Q||e[97]!==ee||e[98]!==X||e[99]!==r||e[100]!==_e||e[101]!==Ae||e[102]!==Ee||e[103]!==Me?(Ze=(0,l.jsxs)("div",{ref:M,className:"fixed inset-0 z-[100] bg-black/95 backdrop-blur-md flex flex-col items-center justify-center overflow-hidden touch-none",onMouseMove:U,onMouseUp:V,onMouseLeave:V,onTouchStart:X,onTouchMove:ee,onTouchEnd:Q,onClick:r,children:[_e,Ae,Ee,Me]}),e[95]=U,e[96]=Q,e[97]=ee,e[98]=X,e[99]=r,e[100]=_e,e[101]=Ae,e[102]=Ee,e[103]=Me,e[104]=Ze):Ze=e[104],Ze},yd=wd;function jd(t){return Math.min(t+.5,4)}function Cd(t){return t.stopPropagation()}function kd(t){return t.stopPropagation()}function _d(t){return t.stopPropagation()}var Sd=ie(),aa=g.forwardRef((t,e)=>{const n=(0,Sd.c)(20);let s,r,a,o,i;n[0]!==t?({className:s,label:r,type:i,textarea:o,...a}=t,n[0]=t,n[1]=s,n[2]=r,n[3]=a,n[4]=o,n[5]=i):(s=n[1],r=n[2],a=n[3],o=n[4],i=n[5]);const d=o?"textarea":"input";let h;n[6]!==r?(h=r&&(0,l.jsx)("label",{className:"text-sm font-bold text-zinc-500 dark:text-zinc-400 ml-1",children:r}),n[6]=r,n[7]=h):h=n[7];const u=o&&"min-h-[100px] resize-none";let c;n[8]!==s||n[9]!==u?(c=oe("flex w-full rounded-xl border border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-900 px-4 py-2.5 text-sm ring-offset-white file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-zinc-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-violet-500 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 dark:ring-offset-zinc-950 dark:text-white transition-all",u,s),n[8]=s,n[9]=u,n[10]=c):c=n[10];let f;n[11]!==d||n[12]!==a||n[13]!==e||n[14]!==c||n[15]!==i?(f=(0,l.jsx)(d,{type:i,className:c,ref:e,...a}),n[11]=d,n[12]=a,n[13]=e,n[14]=c,n[15]=i,n[16]=f):f=n[16];let m;return n[17]!==h||n[18]!==f?(m=(0,l.jsxs)("div",{className:"w-full space-y-1.5",children:[h,f]}),n[17]=h,n[18]=f,n[19]=m):m=n[19],m});aa.displayName="Input";var xt=aa,Nd=ie(),zd=t=>{const e=(0,Nd.c)(27),{isOpen:n,onClose:s,title:r,children:a,footer:o,description:i,className:d}=t;let h;e[0]!==s?(h=M=>{M||s()},e[0]=s,e[1]=h):h=e[1];const u=h;let c;e[2]!==d?(c=oe("sm:max-w-md max-h-[calc(100dvh-2rem)] flex flex-col p-0 gap-0 overflow-hidden bg-white dark:bg-zinc-900",d),e[2]=d,e[3]=c):c=e[3];const f=!r&&"sr-only";let m;e[4]!==f?(m=oe("px-5 py-4 shrink-0 border-b border-zinc-100 dark:border-zinc-800",f),e[4]=f,e[5]=m):m=e[5];let p;e[6]!==r?(p=(0,l.jsx)(Ts,{className:"text-lg font-bold text-center",children:r}),e[6]=r,e[7]=p):p=e[7];let b;e[8]!==i?(b=i&&(0,l.jsx)(vc,{className:"text-center",children:i}),e[8]=i,e[9]=b):b=e[9];let x;e[10]!==m||e[11]!==p||e[12]!==b?(x=(0,l.jsxs)(Ms,{className:m,children:[p,b]}),e[10]=m,e[11]=p,e[12]=b,e[13]=x):x=e[13];let v;e[14]!==a?(v=(0,l.jsx)("div",{className:"flex-1 min-h-0 overflow-hidden flex flex-col",children:a}),e[14]=a,e[15]=v):v=e[15];let _;e[16]!==o?(_=o&&(0,l.jsx)(Ds,{className:"px-5 py-4 shrink-0 border-t border-zinc-100 dark:border-zinc-800 bg-white dark:bg-zinc-900",children:o}),e[16]=o,e[17]=_):_=e[17];let N;e[18]!==c||e[19]!==x||e[20]!==v||e[21]!==_?(N=(0,l.jsxs)(Is,{className:c,children:[x,v,_]}),e[18]=c,e[19]=x,e[20]=v,e[21]=_,e[22]=N):N=e[22];let S;return e[23]!==u||e[24]!==n||e[25]!==N?(S=(0,l.jsx)(Rs,{open:n,onOpenChange:u,children:N}),e[23]=u,e[24]=n,e[25]=N,e[26]=S):S=e[26],S},Pt=zd,Ad=ie(),Ed=t=>{const e=(0,Ad.c)(20),{title:n,message:s,icon:r,showHome:a,showBack:o}=t,i=n===void 0?"Not Found":n,d=s===void 0?"The content you are looking for doesn't exist or has been removed.":s,h=r===void 0?ss:r,u=a===void 0?!0:a,c=o===void 0?!0:o,f=vn(),m=h;let p;e[0]!==m?(p=(0,l.jsx)("div",{className:"bg-zinc-100 dark:bg-zinc-900 p-6 rounded-full mb-6",children:(0,l.jsx)(m,{size:48,className:"text-zinc-400 dark:text-zinc-600"})}),e[0]=m,e[1]=p):p=e[1];let b;e[2]!==i?(b=(0,l.jsx)("h2",{className:"text-2xl font-black mb-2 dark:text-white",children:i}),e[2]=i,e[3]=b):b=e[3];let x;e[4]!==d?(x=(0,l.jsx)("p",{className:"text-zinc-500 dark:text-zinc-400 max-w-xs mb-8 leading-relaxed",children:d}),e[4]=d,e[5]=x):x=e[5];let v;e[6]!==f||e[7]!==c?(v=c&&(0,l.jsxs)(Je,{variant:"secondary",onClick:()=>f(-1),className:"rounded-full px-6",children:[(0,l.jsx)(Fo,{size:18,className:"mr-2"}),"Go Back"]}),e[6]=f,e[7]=c,e[8]=v):v=e[8];let _;e[9]!==f||e[10]!==u?(_=u&&(0,l.jsxs)(Je,{onClick:()=>f("/"),className:"bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-full px-6",children:[(0,l.jsx)(fo,{size:18,className:"mr-2"}),"Home"]}),e[9]=f,e[10]=u,e[11]=_):_=e[11];let N;e[12]!==_||e[13]!==v?(N=(0,l.jsxs)("div",{className:"flex flex-wrap items-center justify-center gap-3",children:[v,_]}),e[12]=_,e[13]=v,e[14]=N):N=e[14];let S;return e[15]!==N||e[16]!==p||e[17]!==b||e[18]!==x?(S=(0,l.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-[400px] p-8 text-center animate-in fade-in zoom-in-95 duration-300",children:[p,b,x,N]}),e[15]=N,e[16]=p,e[17]=b,e[18]=x,e[19]=S):S=e[19],S},Lm=Ed,Qn=ie();function Fm(t){const e=(0,Qn.c)(4);let n;e[0]!==t?({...n}=t,e[0]=t,e[1]=n):n=e[1];let s;return e[2]!==n?(s=(0,l.jsx)(xo,{"data-slot":"popover",...n}),e[2]=n,e[3]=s):s=e[3],s}function Om(t){const e=(0,Qn.c)(4);let n;e[0]!==t?({...n}=t,e[0]=t,e[1]=n):n=e[1];let s;return e[2]!==n?(s=(0,l.jsx)(Qo,{"data-slot":"popover-trigger",...n}),e[2]=n,e[3]=s):s=e[3],s}function Um(t){const e=(0,Qn.c)(12);let n,s,r,a;e[0]!==t?({className:n,align:r,sideOffset:a,...s}=t,e[0]=t,e[1]=n,e[2]=s,e[3]=r,e[4]=a):(n=e[1],s=e[2],r=e[3],a=e[4]);const o=r===void 0?"center":r,i=a===void 0?4:a;let d;e[5]!==n?(d=oe("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 rounded-md border p-4 shadow-md outline-hidden",n),e[5]=n,e[6]=d):d=e[6];let h;return e[7]!==o||e[8]!==s||e[9]!==i||e[10]!==d?(h=(0,l.jsx)(ro,{children:(0,l.jsx)(so,{"data-slot":"popover-content",align:o,sideOffset:i,className:d,...s})}),e[7]=o,e[8]=s,e[9]=i,e[10]=d,e[11]=h):h=e[11],h}const Rd=(t,e,n)=>{const s=t?.id,[r,a]=(0,g.useState)(!1),[o,i]=(0,g.useState)({followers:t?.followers||t?.follower_count||0,following:t?.following||t?.following_count||0}),[d,h]=(0,g.useState)(!1);return(0,g.useEffect)(()=>{t&&(i({followers:t.followers||t.follower_count||0,following:t.following||t.following_count||0}),s&&tn(s)&&(Ii(s).then(c=>{c&&i({followers:c.followers,following:c.following})}).catch(()=>{}),e&&tn(e)?Ri(e,s).then(a).catch(()=>a(!1)):a(!1)))},[t,s,e]),{isFollowing:r,stats:o,loading:d,handleFollow:async()=>{if(!e)return n("Please login to follow!","error");if(e===s)return n("You cannot follow yourself!","error");if(!s||!tn(s)||!tn(e)){const c=!r;a(c),i(f=>{const m=typeof f.followers=="string"?parseInt(f.followers.replace(/,/g,"")):f.followers||0;return{...f,followers:c?m+1:Math.max(0,m-1)}}),n(c?"Followed":"Unfollowed");return}h(!0);try{const c=await Ei(e,s);a(c),i(f=>({...f,followers:c?(f.followers||0)+1:Math.max(0,(f.followers||0)-1)})),n(c?"Followed":"Unfollowed")}catch(c){console.error("Failed to toggle follow:",c),n("Failed to update follow status","error")}finally{h(!1)}},setStats:i}};var Id=({profile:t,onUserClick:e,isCommunity:n=!1})=>{const{onlineUsers:s}=hl(),{currentUser:r}=$e(),{addToast:a}=jt(),o=s.has(t.id),[i,d]=(0,g.useState)(!1),[h,u]=(0,g.useState)(n),{isFollowing:c,loading:f,handleFollow:m}=Rd(n?null:t,r?.id,a);(0,g.useEffect)(()=>{n&&r&&t.id?Xi(t.id,r.id).then(d).finally(()=>u(!1)):u(!1)},[n,r,t.id]);const p=async v=>{if(v.stopPropagation(),!r)return a("Please login to join communities","error");u(!0);try{const _=await Yi(t.id,r.id);d(_),a(_?`Joined ${t.name}`:`Left ${t.name}`)}catch{a("Failed to update membership","error")}finally{u(!1)}},b=r?.id===t.id,x=n?h:f;return(0,l.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-zinc-100 dark:border-zinc-800 hover:bg-zinc-50 dark:hover:bg-zinc-900/40 transition-colors group cursor-pointer",onClick:()=>e(t.handle),children:[(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsxs)(Nt,{className:`size-12 border border-zinc-200 dark:border-zinc-800 shadow-sm ${n?"rounded-2xl":""}`,children:[(0,l.jsx)(zt,{src:t.avatar,alt:t.handle,className:"object-cover"}),(0,l.jsx)(At,{className:n?"rounded-2xl":"",children:t.handle?.[0]?.toUpperCase()})]}),o&&!n&&(0,l.jsx)("span",{className:"absolute bottom-0 right-0 size-3 bg-emerald-500 border-2 border-white dark:border-black rounded-full shadow-sm"})]}),(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsxs)("span",{className:"font-extrabold text-zinc-900 dark:text-zinc-100 truncate flex items-center gap-1",children:[t.name,t.verified&&(0,l.jsx)(ca,{size:16,className:"text-blue-500 shrink-0"})]}),(0,l.jsxs)("span",{className:"text-sm text-zinc-500 mt-0.5",children:["@",t.handle]}),n&&(0,l.jsxs)("span",{className:"text-xs text-zinc-400 mt-1",children:[t.membersCount||0," members"]}),!n&&t.followers&&(0,l.jsxs)("span",{className:"text-xs text-zinc-400 mt-1",children:[t.followers," followers"]})]})]}),!b&&(0,l.jsx)(Je,{variant:n?i?"secondary":"outline":c?"secondary":"outline",className:"!w-auto !py-1.5 !px-4 text-sm font-bold rounded-full border-zinc-200 dark:border-zinc-700 hover:bg-zinc-100 dark:hover:bg-zinc-800 flex items-center gap-1.5",onClick:n?p:v=>{v.stopPropagation(),m()},disabled:x,children:x?(0,l.jsx)(mt,{className:"size-4 animate-spin"}):n?i?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(Rr,{size:16}),(0,l.jsx)("span",{className:"hidden sm:inline",children:"Joined"})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(Er,{size:16}),(0,l.jsx)("span",{className:"hidden sm:inline",children:"Join"})]}):c?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(Rr,{size:16}),(0,l.jsx)("span",{className:"hidden sm:inline",children:"Following"})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(Er,{size:16}),(0,l.jsx)("span",{className:"hidden sm:inline",children:"Follow"})]})})]})},Hm=Id,oa=ie();function Bm(t){const e=(0,oa.c)(14);let n,s,r;e[0]!==t?({className:s,children:n,...r}=t,e[0]=t,e[1]=n,e[2]=s,e[3]=r):(n=e[1],s=e[2],r=e[3]);let a;e[4]!==s?(a=oe("relative",s),e[4]=s,e[5]=a):a=e[5];let o;e[6]!==n?(o=(0,l.jsx)(No,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:n}),e[6]=n,e[7]=o):o=e[7];let i,d;e[8]===Symbol.for("react.memo_cache_sentinel")?(i=(0,l.jsx)(Md,{}),d=(0,l.jsx)(fi,{}),e[8]=i,e[9]=d):(i=e[8],d=e[9]);let h;return e[10]!==r||e[11]!==a||e[12]!==o?(h=(0,l.jsxs)(ko,{"data-slot":"scroll-area",className:a,...r,children:[o,i,d]}),e[10]=r,e[11]=a,e[12]=o,e[13]=h):h=e[13],h}function Md(t){const e=(0,oa.c)(13);let n,s,r;e[0]!==t?({className:n,orientation:r,...s}=t,e[0]=t,e[1]=n,e[2]=s,e[3]=r):(n=e[1],s=e[2],r=e[3]);const a=r===void 0?"vertical":r,o=a==="vertical"&&"h-full w-2.5 border-l border-l-transparent",i=a==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent";let d;e[4]!==n||e[5]!==o||e[6]!==i?(d=oe("flex touch-none p-px transition-colors select-none",o,i,n),e[4]=n,e[5]=o,e[6]=i,e[7]=d):d=e[7];let h;e[8]===Symbol.for("react.memo_cache_sentinel")?(h=(0,l.jsx)(ui,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"}),e[8]=h):h=e[8];let u;return e[9]!==a||e[10]!==s||e[11]!==d?(u=(0,l.jsx)(no,{"data-slot":"scroll-area-scrollbar",orientation:a,className:d,...s,children:h}),e[9]=a,e[10]=s,e[11]=d,e[12]=u):u=e[12],u}var Dd=ie(),Td=t=>{const e=(0,Dd.c)(13),{value:n,onChange:s,onClear:r,placeholder:a}=t,o=a===void 0?"Search...":a;let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i=(0,l.jsx)(Zr,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 text-zinc-400 group-focus-within:text-violet-500 transition-colors"}),e[0]=i):i=e[0];let d;e[1]!==s?(d=f=>s(f.target.value),e[1]=s,e[2]=d):d=e[2];let h;e[3]!==o||e[4]!==d||e[5]!==n?(h=(0,l.jsx)("input",{className:"w-full rounded-full border border-zinc-100 dark:border-zinc-800 bg-zinc-50 dark:bg-zinc-900/50 text-zinc-900 dark:text-white px-11 py-2.5 text-sm outline-none focus:border-violet-500 focus:ring-1 focus:ring-violet-500 transition-all",placeholder:o,value:n,onChange:d}),e[3]=o,e[4]=d,e[5]=n,e[6]=h):h=e[6];let u;e[7]!==r||e[8]!==n?(u=n&&(0,l.jsx)("button",{onClick:r,className:"absolute right-4 top-1/2 -translate-y-1/2 text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-200 transition-colors",children:(0,l.jsx)(Et,{size:16})}),e[7]=r,e[8]=n,e[9]=u):u=e[9];let c;return e[10]!==h||e[11]!==u?(c=(0,l.jsxs)("div",{className:"relative group w-full",children:[i,h,u]}),e[10]=h,e[11]=u,e[12]=c):c=e[12],c},Nr=Td,Rt=ie(),qm=Ko;var Wm=pi,Pd=g.forwardRef((t,e)=>{const n=(0,Rt.c)(12);let s,r,a;n[0]!==t?({className:r,children:s,...a}=t,n[0]=t,n[1]=s,n[2]=r,n[3]=a):(s=n[1],r=n[2],a=n[3]);let o;n[4]!==r?(o=oe("flex h-9 w-full items-center justify-between rounded-md border border-zinc-200 bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-white placeholder:text-zinc-500 focus:outline-none focus:ring-1 focus:ring-zinc-950 disabled:cursor-not-allowed disabled:opacity-50 dark:border-zinc-800 dark:ring-offset-zinc-950 dark:focus:ring-zinc-300 [&>span]:line-clamp-1",r),n[4]=r,n[5]=o):o=n[5];let i;n[6]===Symbol.for("react.memo_cache_sentinel")?(i=(0,l.jsx)(Oo,{asChild:!0,children:(0,l.jsx)(os,{className:"h-4 w-4 opacity-50"})}),n[6]=i):i=n[6];let d;return n[7]!==s||n[8]!==a||n[9]!==e||n[10]!==o?(d=(0,l.jsxs)(ls,{ref:e,className:o,...a,children:[s,i]}),n[7]=s,n[8]=a,n[9]=e,n[10]=o,n[11]=d):d=n[11],d});Pd.displayName=ls.displayName;var ia=g.forwardRef((t,e)=>{const n=(0,Rt.c)(10);let s,r;n[0]!==t?({className:s,...r}=t,n[0]=t,n[1]=s,n[2]=r):(s=n[1],r=n[2]);let a;n[3]!==s?(a=oe("flex cursor-default items-center justify-center py-1",s),n[3]=s,n[4]=a):a=n[4];let o;n[5]===Symbol.for("react.memo_cache_sentinel")?(o=(0,l.jsx)(di,{className:"h-4 w-4"}),n[5]=o):o=n[5];let i;return n[6]!==r||n[7]!==e||n[8]!==a?(i=(0,l.jsx)(ts,{ref:e,className:a,...r,children:o}),n[6]=r,n[7]=e,n[8]=a,n[9]=i):i=n[9],i});ia.displayName=ts.displayName;var la=g.forwardRef((t,e)=>{const n=(0,Rt.c)(10);let s,r;n[0]!==t?({className:s,...r}=t,n[0]=t,n[1]=s,n[2]=r):(s=n[1],r=n[2]);let a;n[3]!==s?(a=oe("flex cursor-default items-center justify-center py-1",s),n[3]=s,n[4]=a):a=n[4];let o;n[5]===Symbol.for("react.memo_cache_sentinel")?(o=(0,l.jsx)(os,{className:"h-4 w-4"}),n[5]=o):o=n[5];let i;return n[6]!==r||n[7]!==e||n[8]!==a?(i=(0,l.jsx)(ns,{ref:e,className:a,...r,children:o}),n[6]=r,n[7]=e,n[8]=a,n[9]=i):i=n[9],i});la.displayName=ns.displayName;var Ld=g.forwardRef((t,e)=>{const n=(0,Rt.c)(21);let s,r,a,o;n[0]!==t?({className:r,children:s,position:o,...a}=t,n[0]=t,n[1]=s,n[2]=r,n[3]=a,n[4]=o):(s=n[1],r=n[2],a=n[3],o=n[4]);const i=o===void 0?"popper":o,d=i==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1";let h;n[5]!==r||n[6]!==d?(h=oe("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border border-zinc-200 bg-white text-zinc-950 shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 dark:border-zinc-800 dark:bg-zinc-950 dark:text-zinc-50",d,r),n[5]=r,n[6]=d,n[7]=h):h=n[7];let u;n[8]===Symbol.for("react.memo_cache_sentinel")?(u=(0,l.jsx)(ia,{}),n[8]=u):u=n[8];const c=i==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]";let f;n[9]!==c?(f=oe("p-1",c),n[9]=c,n[10]=f):f=n[10];let m;n[11]!==s||n[12]!==f?(m=(0,l.jsx)(Lo,{className:f,children:s}),n[11]=s,n[12]=f,n[13]=m):m=n[13];let p;n[14]===Symbol.for("react.memo_cache_sentinel")?(p=(0,l.jsx)(la,{}),n[14]=p):p=n[14];let b;return n[15]!==i||n[16]!==a||n[17]!==e||n[18]!==h||n[19]!==m?(b=(0,l.jsx)(ti,{children:(0,l.jsxs)(as,{ref:e,className:h,position:i,...a,children:[u,m,p]})}),n[15]=i,n[16]=a,n[17]=e,n[18]=h,n[19]=m,n[20]=b):b=n[20],b});Ld.displayName=as.displayName;var Fd=g.forwardRef((t,e)=>{const n=(0,Rt.c)(9);let s,r;n[0]!==t?({className:s,...r}=t,n[0]=t,n[1]=s,n[2]=r):(s=n[1],r=n[2]);let a;n[3]!==s?(a=oe("px-2 py-1.5 text-sm font-semibold",s),n[3]=s,n[4]=a):a=n[4];let o;return n[5]!==r||n[6]!==e||n[7]!==a?(o=(0,l.jsx)($r,{ref:e,className:a,...r}),n[5]=r,n[6]=e,n[7]=a,n[8]=o):o=n[8],o});Fd.displayName=$r.displayName;var Od=g.forwardRef((t,e)=>{const n=(0,Rt.c)(14);let s,r,a;n[0]!==t?({className:r,children:s,...a}=t,n[0]=t,n[1]=s,n[2]=r,n[3]=a):(s=n[1],r=n[2],a=n[3]);let o;n[4]!==r?(o=oe("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-zinc-100 focus:text-zinc-900 data-[disabled]:pointer-events-none data-[disabled]:opacity-50 dark:focus:bg-zinc-800 dark:focus:text-zinc-50",r),n[4]=r,n[5]=o):o=n[5];let i;n[6]===Symbol.for("react.memo_cache_sentinel")?(i=(0,l.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,l.jsx)(ci,{children:(0,l.jsx)(Zo,{className:"h-4 w-4"})})}),n[6]=i):i=n[6];let d;n[7]!==s?(d=(0,l.jsx)(Bo,{children:s}),n[7]=s,n[8]=d):d=n[8];let h;return n[9]!==a||n[10]!==e||n[11]!==o||n[12]!==d?(h=(0,l.jsxs)(rs,{ref:e,className:o,...a,children:[i,d]}),n[9]=a,n[10]=e,n[11]=o,n[12]=d,n[13]=h):h=n[13],h});Od.displayName=rs.displayName;var Ud=g.forwardRef((t,e)=>{const n=(0,Rt.c)(9);let s,r;n[0]!==t?({className:s,...r}=t,n[0]=t,n[1]=s,n[2]=r):(s=n[1],r=n[2]);let a;n[3]!==s?(a=oe("-mx-1 my-1 h-px bg-zinc-100 dark:bg-zinc-800",s),n[3]=s,n[4]=a):a=n[4];let o;return n[5]!==r||n[6]!==e||n[7]!==a?(o=(0,l.jsx)(Jr,{ref:e,className:a,...r}),n[5]=r,n[6]=e,n[7]=a,n[8]=o):o=n[8],o});Ud.displayName=Jr.displayName;var Hd=ie(),Bd=t=>{const e=(0,Hd.c)(9),{className:n}=t,{setAuthMode:s}=$e();let r;e[0]!==n?(r=oe("border border-[--border] rounded-2xl p-8 flex flex-col items-center text-center gap-4 bg-[--card] shadow-sm",n),e[0]=n,e[1]=r):r=e[1];let a,o;e[2]===Symbol.for("react.memo_cache_sentinel")?(a=(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("div",{className:"size-16 rounded-full border-4 border-amber-400 border-t-transparent animate-spin duration-[3000ms]"}),(0,l.jsx)("span",{className:"absolute inset-0 flex items-center justify-center text-2xl",children:""})]}),o=(0,l.jsx)("h2",{className:"font-extrabold text-lg text-[--foreground] mt-2 leading-tight",children:"Get your Sysm account now!"}),e[2]=a,e[3]=o):(a=e[2],o=e[3]);let i;e[4]!==s?(i=(0,l.jsx)("button",{onClick:()=>s("signup"),className:"w-full bg-zinc-950 dark:bg-white text-white dark:text-zinc-950 py-2.5 rounded-full font-black text-sm uppercase tracking-wider hover:opacity-90 active:scale-95 transition-all shadow-lg cursor-pointer",children:"Signup now"}),e[4]=s,e[5]=i):i=e[5];let d;return e[6]!==r||e[7]!==i?(d=(0,l.jsxs)("div",{className:r,children:[a,o,i]}),e[6]=r,e[7]=i,e[8]=d):d=e[8],d},qd=Bd,Wd=ie(),Vd=()=>{const t=(0,Wd.c)(3);let e;t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)("div",{className:"size-11 rounded-full bg-zinc-200 dark:bg-zinc-800 shrink-0"}),t[0]=e):e=t[0];let n;t[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,l.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,l.jsx)("div",{className:"h-4 bg-zinc-200 dark:bg-zinc-800 rounded w-1/3"}),(0,l.jsx)("div",{className:"h-4 bg-zinc-200 dark:bg-zinc-800 rounded w-16"})]}),t[1]=n):n=t[1];let s;return t[2]===Symbol.for("react.memo_cache_sentinel")?(s=(0,l.jsx)("div",{className:"px-5 pt-4 pb-3 border-b border-zinc-100 dark:border-zinc-800 animate-pulse",children:(0,l.jsxs)("div",{className:"flex items-start gap-x-3",children:[e,(0,l.jsxs)("div",{className:"flex-1 min-w-0",children:[n,(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("div",{className:"h-3 bg-zinc-200 dark:bg-zinc-800 rounded w-full"}),(0,l.jsx)("div",{className:"h-3 bg-zinc-200 dark:bg-zinc-800 rounded w-5/6"})]}),(0,l.jsx)("div",{className:"h-48 bg-zinc-200 dark:bg-zinc-800 rounded-xl w-full mt-3"})]})]})}),t[2]=s):s=t[2],s},Vm=Vd,xn=ie();function Yd(t){const e=(0,xn.c)(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=oe("flex flex-col gap-2",n),e[3]=n,e[4]=r):r=e[4];let a;return e[5]!==s||e[6]!==r?(a=(0,l.jsx)(Vo,{"data-slot":"tabs",className:r,...s}),e[5]=s,e[6]=r,e[7]=a):a=e[7],a}function Xd(t){const e=(0,xn.c)(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=oe("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",n),e[3]=n,e[4]=r):r=e[4];let a;return e[5]!==s||e[6]!==r?(a=(0,l.jsx)(si,{"data-slot":"tabs-list",className:r,...s}),e[5]=s,e[6]=r,e[7]=a):a=e[7],a}function zr(t){const e=(0,xn.c)(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=oe("inline-flex items-center justify-center gap-1.5 px-2 py-1 text-sm font-medium whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 outline-none focus:outline-none focus-visible:outline-none ring-0 focus:ring-0 focus-visible:ring-0 shadow-none data-[state=active]:shadow-none",n),e[3]=n,e[4]=r):r=e[4];let a;return e[5]!==s||e[6]!==r?(a=(0,l.jsx)(To,{"data-slot":"tabs-trigger",className:r,...s}),e[5]=s,e[6]=r,e[7]=a):a=e[7],a}function Ar(t){const e=(0,xn.c)(8);let n,s;e[0]!==t?({className:n,...s}=t,e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]!==n?(r=oe("flex-1 outline-none",n),e[3]=n,e[4]=r):r=e[4];let a;return e[5]!==s||e[6]!==r?(a=(0,l.jsx)(Jo,{"data-slot":"tabs-content",className:r,...s}),e[5]=s,e[6]=r,e[7]=a):a=e[7],a}var Qd=ie(),Kd=t=>{const e=(0,Qd.c)(18),{name:n,number:s}=t,r=n===void 0?"BRUCE WAYNE":n,a=s===void 0?"9759 2484 5269 6576":s;let o;e[0]===Symbol.for("react.memo_cache_sentinel")?(o=(0,l.jsx)("style",{children:`
        .credit-card-container {
          perspective: 1000px;
          width: 240px;
          height: 154px;
        }
        .credit-card-inner {
          position: relative;
          width: 100%;
          height: 100%;
          text-align: center;
          transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
          transform-style: preserve-3d;
          cursor: pointer;
        }
        .credit-card-container:hover .credit-card-inner {
          transform: rotateY(180deg);
        }
        .credit-card-front, .credit-card-back {
          position: absolute;
          width: 100%;
          height: 100%;
          -webkit-backface-visibility: hidden;
          backface-visibility: hidden;
          border-radius: 1rem;
          display: flex;
          flex-direction: column;
          justify-content: center;
          background-color: #171717;
          box-shadow: 0 2px 2px rgba(0,0,0,0.4), 0 7px 13px -3px rgba(0,0,0,0.3), inset 0 -1px 0 rgba(0,0,0,0.2);
          color: white;
          overflow: hidden;
        }
        .credit-card-back {
          transform: rotateY(180deg);
        }
      `}),e[0]=o):o=e[0];let i;e[1]===Symbol.for("react.memo_cache_sentinel")?(i=(0,l.jsx)("p",{className:"absolute text-[0.5em] font-bold tracking-[.2em] top-[2em] left-[18.6em]",children:"VICTIMCARD"}),e[1]=i):i=e[1];let d;e[2]===Symbol.for("react.memo_cache_sentinel")?(d=(0,l.jsxs)("svg",{className:"absolute top-[6.8em] left-[11.7em]",xmlns:"http://www.w3.org/2000/svg",width:"36",height:"36",viewBox:"0 0 48 48",children:[(0,l.jsx)("path",{fill:"#ff9800",d:"M32 10A14 14 0 1 0 32 38A14 14 0 1 0 32 10Z"}),(0,l.jsx)("path",{fill:"#d50000",d:"M16 10A14 14 0 1 0 16 38A14 14 0 1 0 16 10Z"}),(0,l.jsx)("path",{fill:"#ff3d00",d:"M18,24c0,4.755,2.376,8.95,6,11.48c3.624-2.53,6-6.725,6-11.48s-2.376-8.95-6-11.48 C20.376,15.05,18,19.245,18,24z"})]}),e[2]=d):d=e[2];let h;e[3]===Symbol.for("react.memo_cache_sentinel")?(h=(0,l.jsx)("svg",{version:"1.1",className:"absolute top-[2.3em] left-[1.5em]",width:"30px",height:"30px",viewBox:"0 0 50 50",children:(0,l.jsx)("image",{width:"50",height:"50",x:"0",y:"0",href:`data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAMAAAAp4XiDAAAABGdBTUEAALGPC/xhBQAAACBjSFJN
                AAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAB6VBMVEUAAACNcTiVeUKVeUOY
                fEaafEeUeUSYfEWZfEaykleyklaXe0SWekSZZjOYfEWYe0WXfUWXe0WcgEicfkiXe0SVekSXekSW
                ekKYe0a9nF67m12ZfUWUeEaXfESVekOdgEmVeUWWekSniU+VeUKVeUOrjFKYfEWliE6WeESZe0GS
                e0WYfES7ml2Xe0WXeESUeEOWfEWcf0eWfESXe0SXfEWYekSVeUKXfEWxklawkVaZfEWWekOUekOW
                ekSYfESZe0eXekWYfEWZe0WZe0eVeUSWeETAnmDCoWLJpmbxy4P1zoXwyoLIpWbjvXjivnjgu3bf
                u3beunWvkFWxkle/nmDivXiWekTnwXvkwHrCoWOuj1SXe0TEo2TDo2PlwHratnKZfEbQrWvPrWua
                fUfbt3PJp2agg0v0zYX0zYSfgkvKp2frxX7mwHrlv3rsxn/yzIPgvHfduXWXe0XuyIDzzISsjVO1
                lVm0lFitjVPzzIPqxX7duna0lVncuHTLqGjvyIHeuXXxyYGZfUayk1iyk1e2lln1zYTEomO2llrb
                tnOafkjFpGSbfkfZtXLhvHfkv3nqxH3mwXujhU3KqWizlFilh06khk2fgkqsjlPHpWXJp2erjVOh
                g0yWe0SliE+XekShhEvAn2D///+gx8TWAAAARnRSTlMACVCTtsRl7Pv7+vxkBab7pZv5+ZlL/UnU
                /f3SJCVe+Fx39naA9/75XSMh0/3SSkia+pil/KRj7Pr662JPkrbP7OLQ0JFOijI1MwAAAAFiS0dE
                orDd34wAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAHdElNRQfnAg0IDx2lsiuJAAACLElEQVRIx2Ng
                GAXkAUYmZhZWPICFmYkRVQcbOwenmzse4MbFzc6DpIGXj8PD04sA8PbhF+CFaxEU8iWkAQT8hEVg
                OkTF/InR4eUVICYO1SIhCRMLDAoKDvFDVhUaEhwUFAjjSUlDdMiEhcOEItzdI6OiYxA6YqODIt3d
                I2DcuDBZsBY5eVTr4xMSYcyk5BRUOXkFsBZFJTQnp6alQxgZmVloUkrKYC0qqmji2WE5EEZuWB6a
                lKoKdi35YQUQRkFYPpFaCouKIYzi6EDitJSUlsGY5RWVRGjJLyxNy4ZxqtIqqvOxaVELQwZFZdkI
                JVU1RSiSalAt6rUwUBdWG1CP6pT6gNqwOrgCdQyHNYR5YQFhDXj8MiK1IAeyN6aORiyBjByVTc0F
                qBoKWpqwRCVSgilOaY2OaUPw29qjOzqLvTAchpos47u6EZyYnngUSRwpuTe6D+6qaFQdOPNLRzOM
                1dzhRZyW+CZouHk3dWLXglFcFIflQhj9YWjJGlZcaKAVSvjyPrRQ0oQVKDAQHlYFYUwIm4gqExGm
                BSkutaVQJeomwViTJqPK6OhCy2Q9sQBk8cY0DxjTJw0lAQWK6cOKfgNhpKK7ZMpUeF3jPa28BCET
                amiEqJKM+X1gxvWXpoUjVIVPnwErw71nmpgiqiQGBjNzbgs3j1nus+fMndc+Cwm0T52/oNR9lsdC
              S24ra7Tq1cbWjpXV3sHRCb1idXZ0sGdltXNxRateRwHRAACYHutzk/2I5QAAACV0RVh0ZGF0ZTpj
              cmVhdGUAMjAyMy0wMi0xM1QwODoxNToyOSswMDowMEUnN7UAAAAldEVYdGRhdGU6bW9kaWZ5ADIw
              MjMtMDItMTNUMDg6MTU6MjkrMDA6MDA0eo8JAAAAKHRFWHRkYXRlOnRpbWVzdGFtcAAyMDIzLTAy
              LTEzVDA4OjE1OjI5KzAwOjAwY2+u1gAAAABJRU5ErkJggg==`})}),e[3]=h):h=e[3];let u;e[4]===Symbol.for("react.memo_cache_sentinel")?(u=(0,l.jsx)("svg",{version:"1.1",className:"absolute top-[3.5em] left-[12.4em]",width:"20px",height:"20px",viewBox:"0 0 50 50",children:(0,l.jsx)("image",{width:"50",height:"50",x:"0",y:"0",href:`data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAQAAAC0NkA6AAAABGdBTUEAALGPC/xhBQAAACBjSFJN
                AAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAAAJcEhZ
                cwAACxMAAAsTAQCanBgAAAAHdElNRQfnAg0IEzgIwaKTAAADDklEQVRYw+1XS0iUURQ+f5qPyjQf
                lGRFEEFK76koKGxRbWyVVLSOgsCgwjZBJJYuKogSIoOonUK4q3U0WVBWFPZYiIE6kuArG3VGzK/F
                fPeMM/MLt99/NuHdfPd888/57jn3nvsQWWj/VcMlvMMd5KRTogqx9iCdIjUUmcGR9ImUYowyP3xN
                GQJoRLVaZ2DaZf8kyjEJALhI28ELioyiwC+Rc3QZwRYyO/DH51hQgWm6DMIh10KmD4u9O16K49it
                VoPOAmcGAWWOepXIRScAoJZ2Frro8oN+EyTT6lWkkg6msZfMSR35QTJmjU0g15tIGSJ08ZZMJkJk
                HpNZgSkyXosS13TkJpZ62mPIJvOSzC1bp8vRhhCakEk7G9/o4gmZdbpsTcKu0m63FbnBP9Qrc15z
                bkbemfgNDtEOI8NO5L5O9VYyRYgmJayZ9nPaxZrSjW4+F6Uw9yQqIiIZwhp2huQTf6OIvCZyGM6g
                DJBZbyXifJXr7FZjGXsdxADxI7HUJFB6iWvsIhFpkoiIiGTJfjJfiCuJg2ZEspq9EHGVpYgzKqwJ
                qSAOEwuJQ/pxPvE3cYltJCLdxBLiSKKIE5HxJKcTRNeadxfhDiuYw44zVs1dxKwRk/uCxIiQkxKB
                sSctRVAge9g1E15EHE6yRUaJecRxcWlukdRIbGFOSZCMWQA/iWauIP3slREHXPyliqBcrrD71Amz
                Z+rD1Mt2Yr8TZc/UR4/YtFnbijnHi3UrN9vKQ9rPaJf867ZiaqDB+czeKYmd3pNa6fuI75MiC0uX
                XSR5aEMf7s7a6r/PudVXkjFb/SsrCRfROk0Fx6+H1i9kkTGn/E1vEmt1m089fh+RKdQ5O+xNJPUi
                cUIjO0Dm7HwvErEr0YxeibL1StSh37STafE4I7zcBdRq1DiOkdmlTJVnkQTBTS7X1FYyvfO4piaI
                nKbDCDaT2anLudYXCRFsQBgAcIF2/Okwgvz5+Z4tsw118dzruvIvjhTB+HOuWy8UvovEH6beitBK
                xDyxm9MmISKCWrzB7bSlaqGlsf0FC0gMjzTg6GgAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMDIt
                MTNUMDg6MTk6NTYrMDA6MDCjlq7LAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTAyLTEzVDA4OjE5
              OjU2KzAwOjAw0ssWdwAAACh0RVh0ZGF0ZTp0aW1lc3RhbXAAMjAyMy0wMi0xM1QwODoxOTo1Nisw
              MDowMIXeN6gAAAAASUVORK5CYII=`})}),e[4]=u):u=e[4];let c;e[5]!==a?(c=(0,l.jsx)("p",{className:"absolute text-[.6em] font-bold top-[8.3em] left-[1.6em] uppercase tracking-wider",children:a}),e[5]=a,e[6]=c):c=e[6];let f;e[7]===Symbol.for("react.memo_cache_sentinel")?(f=(0,l.jsx)("p",{className:"absolute text-[0.5em] font-bold top-[13.6em] left-[3.2em]",children:"1 2 / 2 4"}),e[7]=f):f=e[7];let m;e[8]!==r?(m=(0,l.jsx)("p",{className:"absolute text-[0.5em] font-bold top-[16.1em] left-[2em] uppercase tracking-tighter truncate w-[160px] text-left",children:r}),e[8]=r,e[9]=m):m=e[9];let p;e[10]!==m||e[11]!==c?(p=(0,l.jsxs)("div",{className:"credit-card-front",children:[i,d,h,u,c,f,m]}),e[10]=m,e[11]=c,e[12]=p):p=e[12];let b,x;e[13]===Symbol.for("react.memo_cache_sentinel")?(b=(0,l.jsx)("div",{className:"absolute w-full h-[1.5em] top-[2.4em] bg-black bg-[repeating-linear-gradient(45deg,#303030,#303030_10px,#202020_10px,#202020_20px)] left-0"}),x=(0,l.jsx)("div",{className:"absolute w-[8em] h-[0.8em] top-[5em] left-[0.8em] bg-white rounded-[2.5px]"}),e[13]=b,e[14]=x):(b=e[13],x=e[14]);let v;e[15]===Symbol.for("react.memo_cache_sentinel")?(v=(0,l.jsxs)("div",{className:"credit-card-back",children:[b,x,(0,l.jsx)("div",{className:"absolute w-[4.1em] h-[0.8em] top-[5em] left-[10em] bg-white rounded-[2.5px]",children:(0,l.jsx)("p",{className:"text-black font-bold text-center m-[.2em] text-[0.5em]",children:"***"})})]}),e[15]=v):v=e[15];let _;return e[16]!==p?(_=(0,l.jsxs)(l.Fragment,{children:[o,(0,l.jsx)("div",{className:"flex items-center justify-center p-8",children:(0,l.jsx)("div",{className:"credit-card-container",children:(0,l.jsxs)("div",{className:"credit-card-inner",children:[p,v]})})})]}),e[16]=p,e[17]=_):_=e[17],_},Ym=Kd,Xm=ie(),Zd=ie(),Jd=t=>{const e=(0,Zd.c)(7),{className:n}=t;let s;e[0]!==n?(s=oe("flex items-center gap-1 px-1 py-1.5",n),e[0]=n,e[1]=s):s=e[1];let r,a,o;e[2]===Symbol.for("react.memo_cache_sentinel")?(r=(0,l.jsx)("div",{className:"size-1.5 rounded-full bg-zinc-400 dark:bg-zinc-500 animate-dot-pulse"}),a=(0,l.jsx)("div",{className:"size-1.5 rounded-full bg-zinc-400 dark:bg-zinc-500 animate-dot-pulse [animation-delay:0.2s]"}),o=(0,l.jsx)("div",{className:"size-1.5 rounded-full bg-zinc-400 dark:bg-zinc-500 animate-dot-pulse [animation-delay:0.4s]"}),e[2]=r,e[3]=a,e[4]=o):(r=e[2],a=e[3],o=e[4]);let i;return e[5]!==s?(i=(0,l.jsxs)("div",{className:s,children:[r,a,o]}),e[5]=s,e[6]=i):i=e[6],i},Qm=Jd,Qe=ie();const Km=t=>{const e=(0,Qe.c)(10);let n,s,r;e[0]!==t?({size:s,className:r,...n}=t,e[0]=t,e[1]=n,e[2]=s,e[3]=r):(n=e[1],s=e[2],r=e[3]);const a=s===void 0?24:s,o=r===void 0?"":r;let i,d;e[4]===Symbol.for("react.memo_cache_sentinel")?(i=(0,l.jsx)("path",{d:"M13.6006 21.0761L19.0608 17.9236C19.6437 17.5871 19.9346 17.4188 20.1465 17.1834C20.3341 16.9751 20.4759 16.7297 20.5625 16.4632C20.6602 16.1626 20.6602 15.8267 20.6602 15.1568V8.84268C20.6602 8.17277 20.6602 7.83694 20.5625 7.53638C20.4759 7.26982 20.3341 7.02428 20.1465 6.816C19.9355 6.58161 19.6453 6.41405 19.0674 6.08043L13.5996 2.92359C13.0167 2.58706 12.7259 2.41913 12.416 2.35328C12.1419 2.295 11.8584 2.295 11.5843 2.35328C11.2744 2.41914 10.9826 2.58706 10.3997 2.92359L4.93843 6.07666C4.35623 6.41279 4.06535 6.58073 3.85352 6.816C3.66597 7.02428 3.52434 7.26982 3.43773 7.53638C3.33984 7.83765 3.33984 8.17436 3.33984 8.84742V15.1524C3.33984 15.8254 3.33984 16.1619 3.43773 16.4632C3.52434 16.7297 3.66597 16.9751 3.85352 17.1834C4.06548 17.4188 4.35657 17.5871 4.93945 17.9236L10.3997 21.0761C10.9826 21.4126 11.2744 21.5806 11.5843 21.6465C11.8584 21.7047 12.1419 21.7047 12.416 21.6465C12.7259 21.5806 13.0177 21.4126 13.6006 21.0761Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),d=(0,l.jsx)("path",{d:"M9 11.9998C9 13.6566 10.3431 14.9998 12 14.9998C13.6569 14.9998 15 13.6566 15 11.9998C15 10.3429 13.6569 8.99976 12 8.99976C10.3431 8.99976 9 10.3429 9 11.9998Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e[4]=i,e[5]=d):(i=e[4],d=e[5]);let h;return e[6]!==o||e[7]!==n||e[8]!==a?(h=(0,l.jsxs)("svg",{width:a,height:a,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:o,...n,children:[i,d]}),e[6]=o,e[7]=n,e[8]=a,e[9]=h):h=e[9],h},ca=t=>{const e=(0,Qe.c)(10);let n,s,r;e[0]!==t?({size:s,className:r,...n}=t,e[0]=t,e[1]=n,e[2]=s,e[3]=r):(n=e[1],s=e[2],r=e[3]);const a=s===void 0?24:s,o=r===void 0?"":r;let i,d;e[4]===Symbol.for("react.memo_cache_sentinel")?(i=(0,l.jsx)("path",{d:"M12 21C16.9706 21 21 16.9706 21 12C21 7.02944 16.9706 3 12 3C7.02944 3 3 7.02944 3 12C3 16.9706 7.02944 21 12 21Z",fill:"currentColor"}),d=(0,l.jsx)("path",{d:"M15 10L11 14L9 12",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e[4]=i,e[5]=d):(i=e[4],d=e[5]);let h;return e[6]!==o||e[7]!==n||e[8]!==a?(h=(0,l.jsxs)("svg",{width:a,height:a,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:o,...n,children:[i,d]}),e[6]=o,e[7]=n,e[8]=a,e[9]=h):h=e[9],h},Gd=t=>{const e=(0,Qe.c)(9);let n,s,r;e[0]!==t?({size:s,className:r,...n}=t,e[0]=t,e[1]=n,e[2]=s,e[3]=r):(n=e[1],s=e[2],r=e[3]);const a=s===void 0?24:s,o=r===void 0?"":r;let i;e[4]===Symbol.for("react.memo_cache_sentinel")?(i=(0,l.jsx)("path",{d:"M12 8.00012L4 16.0001V20.0001L8 20.0001L16 12.0001M12 8.00012L14.8686 5.13146L14.8704 5.12976C15.2652 4.73488 15.463 4.53709 15.691 4.46301C15.8919 4.39775 16.1082 4.39775 16.3091 4.46301C16.5369 4.53704 16.7345 4.7346 17.1288 5.12892L18.8686 6.86872C19.2646 7.26474 19.4627 7.46284 19.5369 7.69117C19.6022 7.89201 19.6021 8.10835 19.5369 8.3092C19.4628 8.53736 19.265 8.73516 18.8695 9.13061L18.8686 9.13146L16 12.0001M12 8.00012L16 12.0001",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e[4]=i):i=e[4];let d;return e[5]!==o||e[6]!==n||e[7]!==a?(d=(0,l.jsx)("svg",{width:a,height:a,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:o,...n,children:i}),e[5]=o,e[6]=n,e[7]=a,e[8]=d):d=e[8],d},Er=t=>{const e=(0,Qe.c)(9);let n,s,r;e[0]!==t?({size:s,className:r,...n}=t,e[0]=t,e[1]=n,e[2]=s,e[3]=r):(n=e[1],s=e[2],r=e[3]);const a=s===void 0?24:s,o=r===void 0?"":r;let i;e[4]===Symbol.for("react.memo_cache_sentinel")?(i=(0,l.jsx)("path",{d:"M15 19C15 16.7909 12.3137 15 9 15C5.68629 15 3 16.7909 3 19M19 16V13M19 13V10M19 13H16M19 13H22M9 12C6.79086 12 5 10.2091 5 8C5 5.79086 6.79086 4 9 4C11.2091 4 13 5.79086 13 8C13 10.2091 11.2091 12 9 12Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e[4]=i):i=e[4];let d;return e[5]!==o||e[6]!==n||e[7]!==a?(d=(0,l.jsx)("svg",{width:a,height:a,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:o,...n,children:i}),e[5]=o,e[6]=n,e[7]=a,e[8]=d):d=e[8],d},Rr=t=>{const e=(0,Qe.c)(9);let n,s,r;e[0]!==t?({size:s,className:r,...n}=t,e[0]=t,e[1]=n,e[2]=s,e[3]=r):(n=e[1],s=e[2],r=e[3]);const a=s===void 0?24:s,o=r===void 0?"":r;let i;e[4]===Symbol.for("react.memo_cache_sentinel")?(i=(0,l.jsx)("path",{d:"M15 19C15 16.7909 12.3137 15 9 15C5.68629 15 3 16.7909 3 19M21 10L17 14L15 12M9 12C6.79086 12 5 10.2091 5 8C5 5.79086 6.79086 4 9 4C11.2091 4 13 5.79086 13 8C13 10.2091 11.2091 12 9 12Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e[4]=i):i=e[4];let d;return e[5]!==o||e[6]!==n||e[7]!==a?(d=(0,l.jsx)("svg",{width:a,height:a,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:o,...n,children:i}),e[5]=o,e[6]=n,e[7]=a,e[8]=d):d=e[8],d},Zm=t=>{const e=(0,Qe.c)(10);let n,s,r;e[0]!==t?({size:s,className:r,...n}=t,e[0]=t,e[1]=n,e[2]=s,e[3]=r):(n=e[1],s=e[2],r=e[3]);const a=s===void 0?24:s,o=r===void 0?"":r;let i,d;e[4]===Symbol.for("react.memo_cache_sentinel")?(i=(0,l.jsx)("path",{d:"M5 9.92285C5 14.7747 9.24448 18.7869 11.1232 20.3252C11.3921 20.5454 11.5281 20.6568 11.7287 20.7132C11.8849 20.7572 12.1148 20.7572 12.271 20.7132C12.472 20.6567 12.6071 20.5463 12.877 20.3254C14.7557 18.7871 18.9999 14.7751 18.9999 9.9233C18.9999 8.08718 18.2625 6.32605 16.9497 5.02772C15.637 3.72939 13.8566 3 12.0001 3C10.1436 3 8.36301 3.7295 7.05025 5.02783C5.7375 6.32616 5 8.08674 5 9.92285Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),d=(0,l.jsx)("path",{d:"M10 9C10 10.1046 10.8954 11 12 11C13.1046 11 14 10.1046 14 9C14 7.89543 13.1046 7 12 7C10.8954 7 10 7.89543 10 9Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e[4]=i,e[5]=d):(i=e[4],d=e[5]);let h;return e[6]!==o||e[7]!==n||e[8]!==a?(h=(0,l.jsxs)("svg",{width:a,height:a,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:o,...n,children:[i,d]}),e[6]=o,e[7]=n,e[8]=a,e[9]=h):h=e[9],h},Jm=t=>{const e=(0,Qe.c)(9);let n,s,r;e[0]!==t?({size:s,className:r,...n}=t,e[0]=t,e[1]=n,e[2]=s,e[3]=r):(n=e[1],s=e[2],r=e[3]);const a=s===void 0?24:s,o=r===void 0?"":r;let i;e[4]===Symbol.for("react.memo_cache_sentinel")?(i=(0,l.jsx)("path",{d:"M10.0002 5H8.2002C7.08009 5 6.51962 5 6.0918 5.21799C5.71547 5.40973 5.40973 5.71547 5.21799 6.0918C5 6.51962 5 7.08009 5 8.2002V15.8002C5 16.9203 5 17.4801 5.21799 17.9079C5.40973 18.2842 5.71547 18.5905 6.0918 18.7822C6.5192 19 7.07899 19 8.19691 19H15.8031C16.921 19 17.48 19 17.9074 18.7822C18.2837 18.5905 18.5905 18.2839 18.7822 17.9076C19 17.4802 19 16.921 19 15.8031V14M20 9V4M20 4H15M20 4L13 11",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e[4]=i):i=e[4];let d;return e[5]!==o||e[6]!==n||e[7]!==a?(d=(0,l.jsx)("svg",{width:a,height:a,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:o,...n,children:i}),e[5]=o,e[6]=n,e[7]=a,e[8]=d):d=e[8],d},Gm=t=>{const e=(0,Qe.c)(9);let n,s,r;e[0]!==t?({size:s,className:r,...n}=t,e[0]=t,e[1]=n,e[2]=s,e[3]=r):(n=e[1],s=e[2],r=e[3]);const a=s===void 0?24:s,o=r===void 0?"":r;let i;e[4]===Symbol.for("react.memo_cache_sentinel")?(i=(0,l.jsx)("path",{d:"M10.3078 13.6923L15.1539 8.84619M20.1113 5.88867L16.0207 19.1833C15.6541 20.3747 15.4706 20.9707 15.1544 21.1683C14.8802 21.3396 14.5406 21.3683 14.2419 21.2443C13.8975 21.1014 13.618 20.5433 13.0603 19.428L10.4694 14.2461C10.3809 14.0691 10.3366 13.981 10.2775 13.9043C10.225 13.8363 10.1645 13.7749 10.0965 13.7225C10.0215 13.6647 9.93486 13.6214 9.76577 13.5369L4.57192 10.9399C3.45662 10.3823 2.89892 10.1032 2.75601 9.75879C2.63207 9.4601 2.66033 9.12023 2.83169 8.84597C3.02928 8.52974 3.62523 8.34603 4.81704 7.97932L18.1116 3.88867C19.0486 3.60038 19.5173 3.45635 19.8337 3.57253C20.1094 3.67373 20.3267 3.89084 20.4279 4.16651C20.544 4.48283 20.3999 4.95126 20.1119 5.88729L20.1113 5.88867Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e[4]=i):i=e[4];let d;return e[5]!==o||e[6]!==n||e[7]!==a?(d=(0,l.jsx)("svg",{width:a,height:a,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:o,...n,children:i}),e[5]=o,e[6]=n,e[7]=a,e[8]=d):d=e[8],d},da=t=>{const e=(0,Qe.c)(9);let n,s,r;e[0]!==t?({size:s,className:r,...n}=t,e[0]=t,e[1]=n,e[2]=s,e[3]=r):(n=e[1],s=e[2],r=e[3]);const a=s===void 0?24:s,o=r===void 0?"":r;let i;e[4]===Symbol.for("react.memo_cache_sentinel")?(i=(0,l.jsx)("path",{d:"M4 11.4522V16.8002C4 17.9203 4 18.4807 4.21799 18.9086C4.40973 19.2849 4.71547 19.5906 5.0918 19.7823C5.5192 20.0001 6.07899 20.0001 7.19691 20.0001H16.8031C17.921 20.0001 18.48 20.0001 18.9074 19.7823C19.2837 19.5906 19.5905 19.2849 19.7822 18.9086C20 18.4811 20 17.9216 20 16.8037V11.4522C20 10.9179 19.9995 10.6506 19.9346 10.4019C19.877 10.1816 19.7825 9.97307 19.6546 9.78464C19.5102 9.57201 19.3096 9.39569 18.9074 9.04383L14.1074 4.84383C13.3608 4.19054 12.9875 3.86406 12.5674 3.73982C12.1972 3.63035 11.8026 3.63035 11.4324 3.73982C11.0126 3.86397 10.6398 4.19014 9.89436 4.84244L5.09277 9.04383C4.69064 9.39569 4.49004 9.57201 4.3457 9.78464C4.21779 9.97307 4.12255 10.1816 4.06497 10.4019C4 10.6506 4 10.9179 4 11.4522Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e[4]=i):i=e[4];let d;return e[5]!==o||e[6]!==n||e[7]!==a?(d=(0,l.jsx)("svg",{width:a,height:a,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:o,...n,children:i}),e[5]=o,e[6]=n,e[7]=a,e[8]=d):d=e[8],d},ua=t=>{const e=(0,Qe.c)(9);let n,s,r;e[0]!==t?({size:s,className:r,...n}=t,e[0]=t,e[1]=n,e[2]=s,e[3]=r):(n=e[1],s=e[2],r=e[3]);const a=s===void 0?24:s,o=r===void 0?"":r;let i;e[4]===Symbol.for("react.memo_cache_sentinel")?(i=(0,l.jsx)("path",{d:"M5.59961 19.9203L7.12357 18.7012L7.13478 18.6926C7.45249 18.4384 7.61281 18.3101 7.79168 18.2188C7.95216 18.1368 8.12328 18.0771 8.2998 18.0408C8.49877 18 8.70603 18 9.12207 18H17.8031C18.921 18 19.4806 18 19.908 17.7822C20.2843 17.5905 20.5905 17.2842 20.7822 16.9079C21 16.4805 21 15.9215 21 14.8036V7.19691C21 6.07899 21 5.5192 20.7822 5.0918C20.5905 4.71547 20.2837 4.40973 19.9074 4.21799C19.4796 4 18.9203 4 17.8002 4H6.2002C5.08009 4 4.51962 4 4.0918 4.21799C3.71547 4.40973 3.40973 4.71547 3.21799 5.0918C3 5.51962 3 6.08009 3 7.2002V18.6712C3 19.7369 3 20.2696 3.21846 20.5433C3.40845 20.7813 3.69644 20.9198 4.00098 20.9195C4.35115 20.9191 4.76744 20.5861 5.59961 19.9203Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e[4]=i):i=e[4];let d;return e[5]!==o||e[6]!==n||e[7]!==a?(d=(0,l.jsx)("svg",{width:a,height:a,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:o,...n,children:i}),e[5]=o,e[6]=n,e[7]=a,e[8]=d):d=e[8],d},fa=t=>{const e=(0,Qe.c)(9);let n,s,r;e[0]!==t?({size:s,className:r,...n}=t,e[0]=t,e[1]=n,e[2]=s,e[3]=r):(n=e[1],s=e[2],r=e[3]);const a=s===void 0?24:s,o=r===void 0?"":r;let i;e[4]===Symbol.for("react.memo_cache_sentinel")?(i=(0,l.jsx)("path",{d:"M6.89761 18.1618C8.28247 19.3099 10.0607 20 12.0001 20C16.4184 20 20.0001 16.4183 20.0001 12C20.0001 11.431 19.9407 10.8758 19.8278 10.3404M6.89761 18.1618C5.12756 16.6944 4.00014 14.4789 4.00014 12C4.00014 7.58172 7.58186 4 12.0001 4C15.8494 4 19.0637 6.71853 19.8278 10.3404M6.89761 18.1618C8.85314 17.7147 11.1796 16.7828 13.526 15.4281C16.2564 13.8517 18.4773 12.0125 19.8278 10.3404M6.89761 18.1618C4.46844 18.7171 2.61159 18.5243 1.99965 17.4644C1.36934 16.3726 2.19631 14.5969 3.99999 12.709M19.8278 10.3404C21.0796 8.79041 21.5836 7.38405 21.0522 6.46374C20.5134 5.53051 19.0095 5.26939 16.9997 5.59929",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e[4]=i):i=e[4];let d;return e[5]!==o||e[6]!==n||e[7]!==a?(d=(0,l.jsx)("svg",{width:a,height:a,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:o,...n,children:i}),e[5]=o,e[6]=n,e[7]=a,e[8]=d):d=e[8],d},ma=t=>{const e=(0,Qe.c)(10);let n,s,r;e[0]!==t?({size:s,className:r,...n}=t,e[0]=t,e[1]=n,e[2]=s,e[3]=r):(n=e[1],s=e[2],r=e[3]);const a=s===void 0?24:s,o=r===void 0?"":r;let i,d;e[4]===Symbol.for("react.memo_cache_sentinel")?(i=(0,l.jsx)("path",{d:"M3 12C3 16.9706 7.02944 21 12 21C16.9706 21 21 16.9706 21 12C21 7.02944 16.9706 3 12 3C7.02944 3 3 7.02944 3 12Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),d=(0,l.jsx)("path",{d:"M10 15V9L15 12L10 15Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e[4]=i,e[5]=d):(i=e[4],d=e[5]);let h;return e[6]!==o||e[7]!==n||e[8]!==a?(h=(0,l.jsxs)("svg",{width:a,height:a,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:o,...n,children:[i,d]}),e[6]=o,e[7]=n,e[8]=a,e[9]=h):h=e[9],h},ha=t=>{const e=(0,Qe.c)(9);let n,s,r;e[0]!==t?({size:s,className:r,...n}=t,e[0]=t,e[1]=n,e[2]=s,e[3]=r):(n=e[1],s=e[2],r=e[3]);const a=s===void 0?24:s,o=r===void 0?"":r;let i;e[4]===Symbol.for("react.memo_cache_sentinel")?(i=(0,l.jsx)("path",{d:"M15 17V18C15 19.6569 13.6569 21 12 21C10.3431 21 9 19.6569 9 18V17M15 17H9M15 17H18.5905C18.973 17 19.1652 17 19.3201 16.9478C19.616 16.848 19.8475 16.6156 19.9473 16.3198C19.9997 16.1643 19.9997 15.9715 19.9997 15.5859C19.9997 15.4172 19.9995 15.3329 19.9863 15.2524C19.9614 15.1004 19.9024 14.9563 19.8126 14.8312C19.7651 14.7651 19.7047 14.7048 19.5858 14.5858L19.1963 14.1963C19.0706 14.0706 19 13.9001 19 13.7224V10C19 6.134 15.866 2.99999 12 3C8.13401 3.00001 5 6.13401 5 10V13.7224C5 13.9002 4.92924 14.0706 4.80357 14.1963L4.41406 14.5858C4.29477 14.7051 4.23504 14.765 4.1875 14.8312C4.09766 14.9564 4.03815 15.1004 4.0132 15.2524C4 15.3329 4 15.4172 4 15.586C4 15.9715 4 16.1642 4.05245 16.3197C4.15225 16.6156 4.3848 16.848 4.68066 16.9478C4.83556 17 5.02701 17 5.40956 17H9M18.0186 2.01367C19.3978 3.05299 20.4843 4.43177 21.1724 6.01574M5.98197 2.01367C4.60275 3.05299 3.5162 4.43177 2.82812 6.01574",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e[4]=i):i=e[4];let d;return e[5]!==o||e[6]!==n||e[7]!==a?(d=(0,l.jsx)("svg",{width:a,height:a,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:o,...n,children:i}),e[5]=o,e[6]=n,e[7]=a,e[8]=d):d=e[8],d},$m=t=>{const e=(0,Qe.c)(9);let n,s,r;e[0]!==t?({size:s,className:r,...n}=t,e[0]=t,e[1]=n,e[2]=s,e[3]=r):(n=e[1],s=e[2],r=e[3]);const a=s===void 0?24:s,o=r===void 0?"":r;let i;e[4]===Symbol.for("react.memo_cache_sentinel")?(i=(0,l.jsx)("path",{d:"M19.2933 9.95137L16.96 7.15137C16.6073 6.72814 16.43 6.51639 16.2139 6.36426C16.0223 6.22946 15.8084 6.12953 15.5822 6.06868C15.327 6 15.0523 6 14.5014 6H7.2002C6.08009 6 5.51962 6 5.0918 6.21799C4.71547 6.40973 4.40973 6.71547 4.21799 7.0918C4 7.51962 4 8.08009 4 9.2002V14.8002C4 15.9203 4 16.4801 4.21799 16.9079C4.40973 17.2842 4.71547 17.5905 5.0918 17.7822C5.5192 18 6.07899 18 7.19691 18H14.5014C15.0523 18 15.327 17.9998 15.5822 17.9312C15.8084 17.8703 16.0223 17.7702 16.2139 17.6354C16.43 17.4833 16.6073 17.2721 16.96 16.8488L19.2933 14.0488C19.9006 13.32 20.2036 12.9556 20.3197 12.5488C20.422 12.1902 20.422 11.8095 20.3197 11.4509C20.2036 11.0441 19.9006 10.6801 19.2933 9.95137Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e[4]=i):i=e[4];let d;return e[5]!==o||e[6]!==n||e[7]!==a?(d=(0,l.jsx)("svg",{width:a,height:a,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:o,...n,children:i}),e[5]=o,e[6]=n,e[7]=a,e[8]=d):d=e[8],d};var $d=ie();const pa=t=>{const e=(0,$d.c)(16),n=Un(),s=t?.id;let r;e[0]!==s?(r=["unread_notifications_count",s],e[0]=s,e[1]=r):r=e[1];let a;e[2]!==t?.id?(a=()=>Wi(t?.id),e[2]=t?.id,e[3]=a):a=e[3];const o=!!t?.id;let i;e[4]!==r||e[5]!==a||e[6]!==o?(i={queryKey:r,queryFn:a,enabled:o},e[4]=r,e[5]=a,e[6]=o,e[7]=i):i=e[7];const{data:d}=Mt(i),h=d===void 0?0:d;let u;e[8]!==t||e[9]!==n?(u=()=>{if(!t?.id)return;const p=Y.channel(`unread_count:${t.id}`).on("postgres_changes",{event:"*",schema:"public",table:"notifications",filter:`recipient_id=eq.${t.id}`},()=>{n.invalidateQueries({queryKey:["unread_notifications_count",t.id]}),n.invalidateQueries({queryKey:["notifications",t.id]})}).subscribe();return()=>Y.removeChannel(p)},e[8]=t,e[9]=n,e[10]=u):u=e[10];const c=t?.id;let f;e[11]!==n||e[12]!==c?(f=[c,n],e[11]=n,e[12]=c,e[13]=f):f=e[13],(0,g.useEffect)(u,f);let m;return e[14]!==h?(m={unreadCount:h},e[14]=h,e[15]=m):m=e[15],m};var eu=ie();const ga=t=>{const e=(0,eu.c)(65),n=Un();let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s={},e[0]=s):s=e[0];const[r,a]=(0,g.useState)(s),o=(0,g.useRef)(null),i=t?.id;let d;e[1]!==i?(d=["conversations",i],e[1]=i,e[2]=d):d=e[2];let h;e[3]!==t?.id?(h=()=>Oi(t?.id),e[3]=t?.id,e[4]=h):h=e[4];const u=!!t?.id;let c;e[5]!==d||e[6]!==h||e[7]!==u?(c={queryKey:d,queryFn:h,enabled:u},e[5]=d,e[6]=h,e[7]=u,e[8]=c):c=e[8];const{data:f,isLoading:m}=Mt(c);let p;e[9]!==f?(p=f===void 0?[]:f,e[9]=f,e[10]=p):p=e[10];const b=p,x=t?.id;let v;e[11]!==x?(v=["unread_messages_count",x],e[11]=x,e[12]=v):v=e[12];let _;e[13]!==t?.id?(_=()=>Li(t?.id),e[13]=t?.id,e[14]=_):_=e[14];const N=!!t?.id;let S;e[15]!==_||e[16]!==N||e[17]!==v?(S={queryKey:v,queryFn:_,enabled:N},e[15]=_,e[16]=N,e[17]=v,e[18]=S):S=e[18];const{data:M}=Mt(S),k=M===void 0?0:M;let D;e[19]===Symbol.for("react.memo_cache_sentinel")?(D=["reactions"],e[19]=D):D=e[19];const y=!!t?.id;let w;e[20]!==y?(w={queryKey:D,queryFn:Ui,enabled:y},e[20]=y,e[21]=w):w=e[21];const{data:A}=Mt(w);let R;e[22]!==A?(R=A===void 0?[]:A,e[22]=A,e[23]=R):R=e[23];const E=R;let I;e[24]!==t||e[25]!==n?(I=()=>{if(!t?.id)return;const Q=Y.channel(`user_messages:${t.id}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"messages"},J=>{const G=J.new;n.setQueryData(["messages",G.conversation_id],ne=>ne?ne.find(re=>re.id===G.id)?ne:[...ne,G]:[G]),G.sender_id!==t.id&&n.invalidateQueries({queryKey:["unread_messages_count",t.id]}),n.invalidateQueries(["conversations",t.id]),a(ne=>({...ne,[G.conversation_id]:!1}))}).on("postgres_changes",{event:"DELETE",schema:"public",table:"messages"},J=>{n.invalidateQueries({queryKey:["messages"]}),n.invalidateQueries({queryKey:["conversations",t.id]})}).on("postgres_changes",{event:"*",schema:"public",table:"message_reactions"},()=>{n.invalidateQueries({queryKey:["reactions"]})}).subscribe(),te=Y.channel("chat_typing_shared").on("broadcast",{event:"typing"},J=>{const{payload:G}=J,{conversationId:ne,isTyping:re,userId:le}=G;le!==t.id&&a(ae=>({...ae,[ne]:re}))}).subscribe();return o.current=te,()=>{Y.removeChannel(Q),Y.removeChannel(te)}},e[24]=t,e[25]=n,e[26]=I):I=e[26];const z=t?.id;let L;e[27]!==n||e[28]!==z?(L=[z,n],e[27]=n,e[28]=z,e[29]=L):L=e[29],(0,g.useEffect)(I,L);let j;e[30]!==t?(j=Q=>{const{convId:te,text:J,type:G,media:ne,replyToId:re}=Q,le=G===void 0?"text":G,ae=ne===void 0?[]:ne,be=re===void 0?null:re;return Bi(te,t.id,J,le,ae,be)},e[30]=t,e[31]=j):j=e[31];let C;e[32]!==t||e[33]!==n?(C=Q=>{n.setQueryData(["messages",Q.conversation_id],te=>te?te.find(J=>J.id===Q.id)?te:[...te,Q]:[Q]),n.invalidateQueries(["conversations",t.id])},e[32]=t,e[33]=n,e[34]=C):C=e[34];let P;e[35]!==j||e[36]!==C?(P={mutationFn:j,onSuccess:C},e[35]=j,e[36]=C,e[37]=P):P=e[37];const T=Ja(P);let F;e[38]!==t?(F=(Q,te)=>{o.current&&o.current.send({type:"broadcast",event:"typing",payload:{conversationId:Q,isTyping:te,userId:t.id}})},e[38]=t,e[39]=F):F=e[39];const q=F;let H;e[40]!==t||e[41]!==n?(H=async Q=>{!t?.id||!Q||(await Fi(Q,t.id),n.invalidateQueries({queryKey:["unread_messages_count",t.id]}),n.invalidateQueries({queryKey:["conversations",t.id]}))},e[40]=t,e[41]=n,e[42]=H):H=e[42];const B=H;let U;e[43]!==t||e[44]!==n?(U=async(Q,te)=>{if(t?.id)try{await Hi(Q,t.id,te),n.invalidateQueries({queryKey:["reactions"]})}catch(J){console.error("Failed to toggle reaction:",J)}},e[43]=t,e[44]=n,e[45]=U):U=e[45];const O=U;let V;e[46]!==n?(V=async Q=>{try{await qi(Q),n.invalidateQueries({queryKey:["messages"]})}catch(te){console.error("Failed to delete message:",te)}},e[46]=n,e[47]=V):V=e[47];const Z=V;let X;e[48]!==t?.id?(X=(Q,te)=>{const J=Q===void 0?[]:Q,G=te===void 0?[]:te;return J.map(ne=>({id:ne.id,sender:ne.sender_id===t?.id?"me":"them",text:ne.content,type:ne.type||"text",media:ne.media||[],isRead:ne.is_read,replyToId:ne.reply_to_id,reactions:G.filter(re=>re.message_id===ne.id),time:new Date(ne.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}))},e[48]=t?.id,e[49]=X):X=e[49];const W=X;let ee;e[50]!==T?(ee=(Q,te,J,G,ne)=>T.mutate({convId:Q,text:te,type:J,media:G,replyToId:ne}),e[50]=T,e[51]=ee):ee=e[51];let K;return e[52]!==E||e[53]!==b||e[54]!==W||e[55]!==m||e[56]!==B||e[57]!==Z||e[58]!==O||e[59]!==T.isPending||e[60]!==q||e[61]!==ee||e[62]!==r||e[63]!==k?(K={conversations:b,unreadCount:k,isConvLoading:m,sendMessage:ee,sendTypingStatus:q,typingStatus:r,markAsRead:B,formatMessages:W,onToggleReaction:O,onDeleteMessage:Z,allReactions:E,isSending:T.isPending},e[52]=E,e[53]=b,e[54]=W,e[55]=m,e[56]=B,e[57]=Z,e[58]=O,e[59]=T.isPending,e[60]=q,e[61]=ee,e[62]=r,e[63]=k,e[64]=K):K=e[64],K};var tu=ie(),nu=t=>{const e=(0,tu.c)(23),{handleProfileClick:n}=t,{currentUser:s}=$e(),{unreadCount:r}=pa(s),{unreadCount:a}=ga(s),o=gn();let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i=[{id:"home",icon:da,path:"/"},{id:"community",icon:fa,path:"/community"},{id:"reels",icon:ma,path:"/reels"},{id:"messages",icon:ua,path:"/messages"},{id:"notifications",icon:ha,path:"/notifications"}],e[0]=i):i=e[0];const d=i;let h;e[1]!==a||e[2]!==r?(h=d.map(N=>(0,l.jsx)(Kr,{to:N.path,"aria-label":N.id,className:su,children:S=>{const{isActive:M}=S;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(N.icon,{size:26,strokeWidth:M?2.5:2}),N.id==="notifications"&&r>0&&(0,l.jsx)("span",{className:"absolute top-3 right-[30%] size-2 bg-rose-500 rounded-full ring-2 ring-white dark:ring-black"}),N.id==="messages"&&a>0&&(0,l.jsx)("span",{className:"absolute top-3 right-[30%] size-2 bg-rose-500 rounded-full ring-2 ring-white dark:ring-black"})]})}},N.id)),e[1]=a,e[2]=r,e[3]=h):h=e[3];let u;e[4]!==s||e[5]!==n?(u=()=>{s&&n(s.handle)},e[4]=s,e[5]=n,e[6]=u):u=e[6];const c=`size-7 border-2 ${o.pathname.startsWith("/u/")?"border-black dark:border-white":"border-transparent opacity-70"}`,f=s?.avatar||"/default-avatar.webp";let m;e[7]!==f?(m=(0,l.jsx)(zt,{src:f,alt:"Profile",className:"object-cover"}),e[7]=f,e[8]=m):m=e[8];let p;e[9]!==s?.handle?.[0]?(p=s?.handle?.[0]?.toUpperCase(),e[9]=s?.handle?.[0],e[10]=p):p=e[10];let b;e[11]!==p?(b=(0,l.jsx)(At,{children:p}),e[11]=p,e[12]=b):b=e[12];let x;e[13]!==c||e[14]!==m||e[15]!==b?(x=(0,l.jsxs)(Nt,{className:c,children:[m,b]}),e[13]=c,e[14]=m,e[15]=b,e[16]=x):x=e[16];let v;e[17]!==u||e[18]!==x?(v=(0,l.jsx)("button",{onClick:u,"aria-label":"My Profile",className:"flex-1 flex flex-col items-center justify-center h-full",children:x}),e[17]=u,e[18]=x,e[19]=v):v=e[19];let _;return e[20]!==v||e[21]!==h?(_=(0,l.jsxs)("nav",{className:"fixed bottom-0 left-0 right-0 z-[40] flex h-16 items-center border-t border-zinc-100 bg-white/90 pb-safe backdrop-blur-md dark:border-zinc-800 dark:bg-black/90 md:hidden",children:[h,v]}),e[20]=v,e[21]=h,e[22]=_):_=e[22],_},ru=nu;function su(t){const{isActive:e}=t;return`flex flex-1 flex-col items-center justify-center h-full transition-all duration-200 relative ${e?"text-black dark:text-white":"text-zinc-400 opacity-70"}`}var au=ie(),ou=()=>{const t=(0,au.c)(5);let e,n;t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)("img",{src:"/welcome-banner.webp",alt:"Welcome Banner",fetchPriority:"high",loading:"eager",decoding:"async",className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-700"}),n=(0,l.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-black/20 to-transparent"}),t[0]=e,t[1]=n):(e=t[0],n=t[1]);let s;t[2]===Symbol.for("react.memo_cache_sentinel")?(s=(0,l.jsx)("h1",{className:"text-3xl sm:text-4xl font-black mb-1 drop-shadow-lg",children:"Welcome to Sysm"}),t[2]=s):s=t[2];let r;t[3]===Symbol.for("react.memo_cache_sentinel")?(r=(0,l.jsxs)("div",{className:"absolute bottom-6 left-8 text-white",children:[s,(0,l.jsxs)("p",{className:"text-sm sm:text-base font-medium opacity-90 tracking-wide drop-shadow-md",children:["a social network built by"," ",(0,l.jsx)("a",{href:"https://t.me/systemadminbd",target:"_blank",rel:"noopener noreferrer",className:"hover:underline",children:"@Systemadminbd"})]})]}),t[3]=r):r=t[3];let a;return t[4]===Symbol.for("react.memo_cache_sentinel")?(a=(0,l.jsxs)("div",{className:"relative w-full aspect-[21/9] sm:aspect-[2.5/1] rounded-3xl overflow-hidden mb-6 group cursor-pointer",children:[e,n,r,(0,l.jsx)("div",{className:"absolute bottom-4 right-8",children:(0,l.jsx)("img",{src:"/logo.webp",className:"size-12 animate-pulse opacity-80 rounded-xl",alt:"",loading:"lazy",decoding:"async"})})]}),t[4]=a):a=t[4],a},iu=ou,lu=ie(),cu=t=>{const e=(0,lu.c)(26),{onPostClick:n}=t,s=gn(),r=vn(),{darkMode:a}=qn(),o=s.pathname==="/";let i;e[0]!==s.pathname?(i=s.pathname.startsWith("/reels")||s.pathname.startsWith("/messages")&&s.pathname.split("/").length>2,e[0]=s.pathname,e[1]=i):i=e[1];const d=i;let h;e[2]!==r?(h=M=>{r(`/u/${M}`)},e[2]=r,e[3]=h):h=e[3];const u=h,c=`min-h-screen bg-[--background] text-[--foreground] font-sans selection:bg-violet-500 selection:text-white transition-colors duration-200 ${a?"dark":""}`;let f;e[4]!==n?(f=(0,l.jsx)(pu,{onPostClick:n}),e[4]=n,e[5]=f):f=e[5];let m;e[6]!==o?(m=o&&(0,l.jsx)("div",{className:"w-full max-w-full overflow-hidden",children:(0,l.jsx)(iu,{})}),e[6]=o,e[7]=m):m=e[7];let p;e[8]===Symbol.for("react.memo_cache_sentinel")?(p=(0,l.jsx)("div",{className:"w-full",children:(0,l.jsx)(Wa,{})}),e[8]=p):p=e[8];let b;e[9]!==m?(b=(0,l.jsxs)("div",{className:"flex flex-col flex-1 w-0 overflow-x-hidden",children:[m,p]}),e[9]=m,e[10]=b):b=e[10];let x;e[11]!==s.pathname?(x=!s.pathname.startsWith("/messages")&&(0,l.jsx)(xu,{}),e[11]=s.pathname,e[12]=x):x=e[12];let v;e[13]!==b||e[14]!==x?(v=(0,l.jsxs)("main",{className:"flex-1 flex justify-center gap-x-2 md:gap-x-8 py-0 md:py-5 px-0 md:px-4",children:[b,x]}),e[13]=b,e[14]=x,e[15]=v):v=e[15];let _;e[16]!==f||e[17]!==v?(_=(0,l.jsxs)("div",{className:"flex justify-center w-full max-w-[1300px] mx-auto min-h-screen px-0 sm:px-0",children:[f,v]}),e[16]=f,e[17]=v,e[18]=_):_=e[18];let N;e[19]!==u||e[20]!==d?(N=!d&&(0,l.jsx)(ru,{handleProfileClick:u}),e[19]=u,e[20]=d,e[21]=N):N=e[21];let S;return e[22]!==_||e[23]!==N||e[24]!==c?(S=(0,l.jsxs)("div",{className:c,children:[_,N]}),e[22]=_,e[23]=N,e[24]=c,e[25]=S):S=e[25],S},du=cu,uu=ie(),fu=t=>{const e=(0,uu.c)(2),{children:n}=t;let s;return e[0]!==n?(s=(0,l.jsx)("div",{className:"w-full animate-in fade-in slide-in-from-bottom-2 duration-300 ease-out",children:n}),e[0]=n,e[1]=s):s=e[1],s},tt=fu,mu=ie(),hu=t=>{const e=(0,mu.c)(18),{onPostClick:n}=t,{currentUser:s}=$e(),{unreadCount:r}=pa(s),{unreadCount:a}=ga(s);let o,i,d,h,u;e[0]===Symbol.for("react.memo_cache_sentinel")?(o={id:"home",icon:da,path:"/"},i={id:"community",icon:fa,path:"/community"},d={id:"reels",icon:ma,path:"/reels"},h={id:"messages",icon:ua,path:"/messages"},u={id:"notifications",icon:ha,path:"/notifications"},e[0]=o,e[1]=i,e[2]=d,e[3]=h,e[4]=u):(o=e[0],i=e[1],d=e[2],h=e[3],u=e[4]);const c=s?`/u/${s.handle}`:"/community";let f;e[5]!==c?(f=[o,i,d,h,u,{id:"profile",icon:In,path:c}],e[5]=c,e[6]=f):f=e[6];const m=f;let p;e[7]===Symbol.for("react.memo_cache_sentinel")?(p=(0,l.jsx)(Qr,{to:"/",className:"mb-8 hover:scale-110 transition-transform",children:(0,l.jsx)("img",{src:"/logo.webp",alt:"Logo",className:"size-8 rounded-lg"})}),e[7]=p):p=e[7];let b;e[8]!==a||e[9]!==m||e[10]!==r?(b=m.map(_=>(0,l.jsxs)(Kr,{to:_.path,"aria-label":_.id,className:gu,children:[(0,l.jsx)(_.icon,{size:26,strokeWidth:2.5}),_.id==="notifications"&&r>0&&(0,l.jsx)("span",{className:"absolute top-2 right-2 size-2 bg-rose-500 rounded-full ring-2 ring-white dark:ring-black"}),_.id==="messages"&&a>0&&(0,l.jsx)("span",{className:"absolute top-2 right-2 size-2 bg-rose-500 rounded-full ring-2 ring-white dark:ring-black"})]},_.id)),e[8]=a,e[9]=m,e[10]=r,e[11]=b):b=e[11];let x;e[12]!==s||e[13]!==n?(x=s&&(0,l.jsx)("button",{onClick:n,"aria-label":"Create Post",className:"p-2.5 mt-2 rounded-xl text-white bg-zinc-950 dark:bg-white dark:text-zinc-950 hover:scale-110 active:scale-95 transition-all duration-200 shadow-lg cursor-pointer",title:"Create Post",children:(0,l.jsx)(Vt,{size:26,strokeWidth:2.5})}),e[12]=s,e[13]=n,e[14]=x):x=e[14];let v;return e[15]!==x||e[16]!==b?(v=(0,l.jsxs)("aside",{className:"sticky top-0 hidden md:flex h-screen w-[68px] flex-col items-center py-5 border-r border-zinc-100 dark:border-zinc-800 shrink-0 bg-white dark:bg-black transition-colors duration-200",children:[p,(0,l.jsxs)("nav",{className:"flex flex-col gap-y-4 w-full items-center",children:[b,x]})]}),e[15]=x,e[16]=b,e[17]=v):v=e[17],v},pu=hu;function gu(t){const{isActive:e}=t;return`p-2.5 rounded-xl transition-all duration-200 border border-transparent relative ${e?"text-black dark:text-white bg-zinc-100 dark:bg-zinc-900 border-zinc-200 dark:border-zinc-800":"text-zinc-500 hover:bg-zinc-50 dark:hover:bg-zinc-900"}`}var vu=ie(),bu=()=>{const t=(0,vu.c)(48),{currentUser:e,setAuthMode:n}=$e(),{darkMode:s,toggleDarkMode:r}=qn(),[a,o]=(0,g.useState)(""),i=vn();let d;t[0]===Symbol.for("react.memo_cache_sentinel")?(d={queryKey:["trending-hashtags"],queryFn:wu,staleTime:3e5,refetchInterval:6e4},t[0]=d):d=t[0];const{data:h}=Mt(d);let u;t[1]!==h?(u=h===void 0?[]:h,t[1]=h,t[2]=u):u=t[2];const c=u;let f;t[3]===Symbol.for("react.memo_cache_sentinel")?(f=[" 2026 Sysm","Terms","Privacy","Guidelines","Discord","Sysm","GitHub","Support","Status"],t[3]=f):f=t[3];const m=f;let p;t[4]!==s?(p=s?(0,l.jsx)(So,{size:20}):(0,l.jsx)(go,{size:20}),t[4]=s,t[5]=p):p=t[5];let b;t[6]!==p||t[7]!==r?(b=(0,l.jsx)("button",{onClick:r,className:"p-3 rounded-full bg-zinc-50 dark:bg-zinc-900 text-zinc-500 dark:text-zinc-400 border border-zinc-100 dark:border-zinc-800 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-all cursor-pointer",title:"Toggle Theme",children:p}),t[6]=p,t[7]=r,t[8]=b):b=t[8];const x=b;if(e){let R;t[9]===Symbol.for("react.memo_cache_sentinel")?(R=()=>o(""),t[9]=R):R=t[9];let E;t[10]!==a?(E=(0,l.jsx)("div",{className:"flex-1",children:(0,l.jsx)(Nr,{value:a,onChange:o,onClear:R})}),t[10]=a,t[11]=E):E=t[11];let I;t[12]!==E||t[13]!==x?(I=(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[E,x]}),t[12]=E,t[13]=x,t[14]=I):I=t[14];let z;t[15]===Symbol.for("react.memo_cache_sentinel")?(z=(0,l.jsx)("h3",{className:"font-extrabold text-xl mb-4 px-2 text-[--foreground]",children:"What's happening"}),t[15]=z):z=t[15];let L;if(t[16]!==i||t[17]!==c){let F;t[19]!==i?(F=q=>(0,l.jsxs)("div",{onClick:()=>i(`/tags/${q.name.replace(/^#/,"")}`),className:"px-3 py-3 hover:bg-zinc-100 dark:hover:bg-zinc-800 rounded-xl cursor-pointer transition-colors group",children:[(0,l.jsx)("div",{className:"text-xs text-zinc-500 dark:text-zinc-400 font-medium",children:"Trending"}),(0,l.jsxs)("div",{className:"font-bold text-[--foreground]",children:["#",q.name.replace(/^#/,"")]}),(0,l.jsxs)("div",{className:"text-xs text-zinc-500 dark:text-zinc-400",children:[q.usage_count," posts"]})]},q.id),t[19]=i,t[20]=F):F=t[20],L=c.map(F),t[16]=i,t[17]=c,t[18]=L}else L=t[18];let j;t[21]!==c.length?(j=c.length===0&&(0,l.jsx)("p",{className:"text-sm text-zinc-500 px-2",children:"No trends yet"}),t[21]=c.length,t[22]=j):j=t[22];let C;t[23]!==L||t[24]!==j?(C=(0,l.jsxs)("div",{className:"bg-zinc-50 dark:bg-zinc-900 rounded-2xl p-4 border border-[--border]",children:[z,(0,l.jsxs)("div",{className:"flex flex-col gap-1",children:[L,j]})]}),t[23]=L,t[24]=j,t[25]=C):C=t[25];let P;t[26]===Symbol.for("react.memo_cache_sentinel")?(P=(0,l.jsx)("div",{className:"flex flex-wrap gap-x-4 gap-y-2 px-2 text-[13px] text-zinc-500 font-medium pb-5",children:m.map(yu)}),t[26]=P):P=t[26];let T;return t[27]!==C||t[28]!==I?(T=(0,l.jsxs)("aside",{className:"sticky top-5 hidden w-[320px] shrink-0 flex-col gap-y-6 lg:flex overflow-y-auto max-h-screen",children:[I,C,P]}),t[27]=C,t[28]=I,t[29]=T):T=t[29],T}let v,_;t[30]!==n?(v=(0,l.jsx)("button",{onClick:()=>n("signup"),className:"flex-1 bg-[--card] border border-[--border] py-2.5 rounded-full font-bold text-[--foreground] hover:bg-zinc-50 dark:hover:bg-zinc-900 transition-colors shadow-sm cursor-pointer",children:"Signup"}),_=()=>n("login"),t[30]=n,t[31]=v,t[32]=_):(v=t[31],_=t[32]);let N;t[33]===Symbol.for("react.memo_cache_sentinel")?(N=(0,l.jsx)("img",{src:"/logo.webp",alt:"",className:"size-4 rounded-sm"}),t[33]=N):N=t[33];let S;t[34]!==_?(S=(0,l.jsxs)("button",{onClick:_,className:"flex-1 bg-zinc-950 dark:bg-white text-white dark:text-zinc-950 py-2.5 rounded-full font-bold flex items-center justify-center gap-2 hover:opacity-90 transition-opacity cursor-pointer",children:[N,"Login"]}),t[34]=_,t[35]=S):S=t[35];let M;t[36]!==v||t[37]!==S||t[38]!==x?(M=(0,l.jsxs)("div",{className:"flex gap-3",children:[v,S,x]}),t[36]=v,t[37]=S,t[38]=x,t[39]=M):M=t[39];let k;t[40]===Symbol.for("react.memo_cache_sentinel")?(k=()=>o(""),t[40]=k):k=t[40];let D;t[41]!==a?(D=(0,l.jsx)(Nr,{value:a,onChange:o,onClear:k}),t[41]=a,t[42]=D):D=t[42];let y;t[43]===Symbol.for("react.memo_cache_sentinel")?(y=(0,l.jsx)(qd,{}),t[43]=y):y=t[43];let w;t[44]===Symbol.for("react.memo_cache_sentinel")?(w=(0,l.jsx)("div",{className:"flex flex-wrap gap-x-4 gap-y-2 px-2 text-[13px] text-zinc-500 font-medium pb-5",children:m.map(ju)}),t[44]=w):w=t[44];let A;return t[45]!==M||t[46]!==D?(A=(0,l.jsxs)("aside",{className:"sticky top-5 hidden w-[350px] shrink-0 flex-col gap-y-6 lg:flex pr-4",children:[M,D,y,w]}),t[45]=M,t[46]=D,t[47]=A):A=t[47],A},xu=bu;function wu(){return $i(5)}function yu(t){return(0,l.jsx)("a",{href:"#",className:"hover:underline",children:t},t)}function ju(t){return(0,l.jsx)("a",{href:"#",className:"hover:underline",children:t},t)}var eh=ie(),Cu=({isOpen:t,onClose:e})=>{const{currentUser:n}=$e(),{addToast:s}=jt(),r=vn(),[a,o]=(0,g.useState)({name:"",handle:"",description:"",isPrivate:!1}),[i,d]=(0,g.useState)(!1),h=async u=>{if(u.preventDefault(),!(!a.name||!a.handle||!n)){d(!0);try{const c=await Ki({name:a.name,handle:a.handle.toLowerCase().replace(/[^a-z0-9_]/g,""),description:a.description,is_private:a.isPrivate,creator_id:n.id}),{error:f}=await Y.from("community_members").insert([{community_id:c.id,user_id:n.id,role:"admin"}]);if(f)throw f;s(`Community "${c.name}" created!`),e(),r(`/c/${c.handle}`)}catch(c){console.error(c),s(c.message||"Failed to create community","error")}finally{d(!1)}}};return(0,l.jsx)(Pt,{isOpen:t,onClose:()=>!i&&e(),title:"Create Community",className:"sm:max-w-md",children:(0,l.jsxs)("form",{onSubmit:h,className:"space-y-5",children:[(0,l.jsxs)("div",{className:"flex flex-col items-center justify-center p-6 bg-zinc-50 dark:bg-zinc-900 rounded-2xl border-2 border-dashed border-zinc-200 dark:border-zinc-800",children:[(0,l.jsx)("div",{className:"size-20 rounded-2xl bg-white dark:bg-black flex items-center justify-center shadow-sm mb-3",children:(0,l.jsx)(is,{size:32,className:"text-violet-600"})}),(0,l.jsx)("p",{className:"text-xs font-medium text-zinc-500 text-center max-w-[200px]",children:"Communities are where people with shared interests connect."})]}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"space-y-1.5",children:[(0,l.jsx)("label",{className:"text-sm font-bold ml-1",children:"Community Name"}),(0,l.jsx)("input",{type:"text",required:!0,className:"w-full bg-zinc-50 dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-xl px-4 py-2.5 outline-none focus:ring-2 focus:ring-violet-500/20 focus:border-violet-500 transition-all",placeholder:"e.g. Photography Enthusiasts",value:a.name,onChange:u=>o({...a,name:u.target.value})})]}),(0,l.jsxs)("div",{className:"space-y-1.5",children:[(0,l.jsx)("label",{className:"text-sm font-bold ml-1",children:"Handle"}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-zinc-500 font-medium",children:"c/"}),(0,l.jsx)("input",{type:"text",required:!0,className:"w-full bg-zinc-50 dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-xl pl-8 pr-4 py-2.5 outline-none focus:ring-2 focus:ring-violet-500/20 focus:border-violet-500 transition-all",placeholder:"photography",value:a.handle,onChange:u=>o({...a,handle:u.target.value.toLowerCase().replace(/[^a-z0-9_]/g,"")})})]})]}),(0,l.jsxs)("div",{className:"space-y-1.5",children:[(0,l.jsx)("label",{className:"text-sm font-bold ml-1",children:"Description (Optional)"}),(0,l.jsx)("textarea",{className:"w-full bg-zinc-50 dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-xl px-4 py-2.5 outline-none focus:ring-2 focus:ring-violet-500/20 focus:border-violet-500 transition-all min-h-[100px] resize-none",placeholder:"What is this community about?",value:a.description,onChange:u=>o({...a,description:u.target.value})})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between p-4 bg-zinc-50 dark:bg-zinc-900 rounded-xl border border-zinc-200 dark:border-zinc-800",children:[(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)("span",{className:"text-sm font-bold",children:"Private Community"}),(0,l.jsx)("span",{className:"text-[10px] text-zinc-500",children:"Only Admins can post in private communities"})]}),(0,l.jsx)("input",{type:"checkbox",className:"size-5 rounded-md accent-violet-600 cursor-pointer",checked:a.isPrivate,onChange:u=>o({...a,isPrivate:u.target.checked})})]})]}),(0,l.jsxs)("div",{className:"flex gap-3 pt-2",children:[(0,l.jsx)(Je,{type:"button",variant:"outline",className:"flex-1",onClick:e,disabled:i,children:"Cancel"}),(0,l.jsx)(Je,{type:"submit",className:"flex-1",disabled:i||!a.name||!a.handle,children:i?(0,l.jsx)(mt,{size:18,className:"animate-spin"}):"Create"})]})]})})},th=Cu;function ku(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return(0,g.useMemo)(()=>s=>{e.forEach(r=>r(s))},e)}var wn=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Lt(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function Kn(t){return"nodeType"in t}function Ke(t){var e,n;return t?Lt(t)?t:Kn(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function Zn(t){const{Document:e}=Ke(t);return t instanceof e}function Gt(t){return Lt(t)?!1:t instanceof Ke(t).HTMLElement}function va(t){return t instanceof Ke(t).SVGElement}function Ft(t){return t?Lt(t)?t.document:Kn(t)?Zn(t)?t:Gt(t)||va(t)?t.ownerDocument:document:document:document}var ut=wn?g.useLayoutEffect:g.useEffect;function Jn(t){const e=(0,g.useRef)(t);return ut(()=>{e.current=t}),(0,g.useCallback)(function(){for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return e.current==null?void 0:e.current(...s)},[])}function _u(){const t=(0,g.useRef)(null);return[(0,g.useCallback)((e,n)=>{t.current=setInterval(e,n)},[]),(0,g.useCallback)(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[])]}function Yt(t,e){e===void 0&&(e=[t]);const n=(0,g.useRef)(t);return ut(()=>{n.current!==t&&(n.current=t)},e),n}function $t(t,e){const n=(0,g.useRef)();return(0,g.useMemo)(()=>{const s=t(n.current);return n.current=s,s},[...e])}function fn(t){const e=Jn(t),n=(0,g.useRef)(null);return[n,(0,g.useCallback)(s=>{s!==n.current&&e?.(s,n.current),n.current=s},[])]}function Dn(t){const e=(0,g.useRef)();return(0,g.useEffect)(()=>{e.current=t},[t]),e.current}var zn={};function en(t,e){return(0,g.useMemo)(()=>{if(e)return e;const n=zn[t]==null?0:zn[t]+1;return zn[t]=n,t+"-"+n},[t,e])}function ba(t){return function(e){for(var n=arguments.length,s=new Array(n>1?n-1:0),r=1;r<n;r++)s[r-1]=arguments[r];return s.reduce((a,o)=>{const i=Object.entries(o);for(const[d,h]of i){const u=a[d];u!=null&&(a[d]=u+t*h)}return a},{...e})}}var Dt=ba(1),Xt=ba(-1);function Su(t){return"clientX"in t&&"clientY"in t}function Gn(t){if(!t)return!1;const{KeyboardEvent:e}=Ke(t.target);return e&&t instanceof e}function Nu(t){if(!t)return!1;const{TouchEvent:e}=Ke(t.target);return e&&t instanceof e}function Tn(t){if(Nu(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return Su(t)?{x:t.clientX,y:t.clientY}:null}var Qt=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[Qt.Translate.toString(t),Qt.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:s}=t;return e+" "+n+"ms "+s}}}),Ir="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function zu(t){return t.matches(Ir)?t:t.querySelector(Ir)}var Au={display:"none"};function Eu(t){let{id:e,value:n}=t;return g.createElement("div",{id:e,style:Au},n)}function Ru(t){let{id:e,announcement:n,ariaLiveType:s="assertive"}=t;return g.createElement("div",{id:e,style:{position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"},role:"status","aria-live":s,"aria-atomic":!0},n)}function Iu(){const[t,e]=(0,g.useState)("");return{announce:(0,g.useCallback)(n=>{n!=null&&e(n)},[]),announcement:t}}var Ht=Xr(),xa=(0,g.createContext)(null);function Mu(t){const e=(0,g.useContext)(xa);(0,g.useEffect)(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function Du(){const[t]=(0,g.useState)(()=>new Set),e=(0,g.useCallback)(n=>(t.add(n),()=>t.delete(n)),[t]);return[(0,g.useCallback)(n=>{let{type:s,event:r}=n;t.forEach(a=>{var o;return(o=a[s])==null?void 0:o.call(a,r)})},[t]),e]}var Tu={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},Pu={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function Lu(t){let{announcements:e=Pu,container:n,hiddenTextDescribedById:s,screenReaderInstructions:r=Tu}=t;const{announce:a,announcement:o}=Iu(),i=en("DndLiveRegion"),[d,h]=(0,g.useState)(!1);if((0,g.useEffect)(()=>{h(!0)},[]),Mu((0,g.useMemo)(()=>({onDragStart(c){let{active:f}=c;a(e.onDragStart({active:f}))},onDragMove(c){let{active:f,over:m}=c;e.onDragMove&&a(e.onDragMove({active:f,over:m}))},onDragOver(c){let{active:f,over:m}=c;a(e.onDragOver({active:f,over:m}))},onDragEnd(c){let{active:f,over:m}=c;a(e.onDragEnd({active:f,over:m}))},onDragCancel(c){let{active:f,over:m}=c;a(e.onDragCancel({active:f,over:m}))}}),[a,e])),!d)return null;const u=g.createElement(g.Fragment,null,g.createElement(Eu,{id:s,value:r.draggable}),g.createElement(Ru,{id:i,announcement:o}));return n?(0,Ht.createPortal)(u,n):u}var Pe;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(Pe||(Pe={}));function mn(){}function Mr(t,e){return(0,g.useMemo)(()=>({sensor:t,options:e??{}}),[t,e])}function Fu(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return(0,g.useMemo)(()=>[...e].filter(s=>s!=null),[...e])}var it=Object.freeze({x:0,y:0});function wa(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function ya(t,e){let{data:{value:n}}=t,{data:{value:s}}=e;return n-s}function Ou(t,e){let{data:{value:n}}=t,{data:{value:s}}=e;return s-n}function Dr(t){let{left:e,top:n,height:s,width:r}=t;return[{x:e,y:n},{x:e+r,y:n},{x:e,y:n+s},{x:e+r,y:n+s}]}function ja(t,e){if(!t||t.length===0)return null;const[n]=t;return e?n[e]:n}function Tr(t,e,n){return e===void 0&&(e=t.left),n===void 0&&(n=t.top),{x:e+t.width*.5,y:n+t.height*.5}}var Uu=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:s}=t;const r=Tr(e,e.left,e.top),a=[];for(const o of s){const{id:i}=o,d=n.get(i);if(d){const h=wa(Tr(d),r);a.push({id:i,data:{droppableContainer:o,value:h}})}}return a.sort(ya)},Hu=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:s}=t;const r=Dr(e),a=[];for(const o of s){const{id:i}=o,d=n.get(i);if(d){const h=Dr(d),u=r.reduce((f,m,p)=>f+wa(h[p],m),0),c=Number((u/4).toFixed(4));a.push({id:i,data:{droppableContainer:o,value:c}})}}return a.sort(ya)};function Bu(t,e){const n=Math.max(e.top,t.top),s=Math.max(e.left,t.left),r=Math.min(e.left+e.width,t.left+t.width),a=Math.min(e.top+e.height,t.top+t.height),o=r-s,i=a-n;if(s<r&&n<a){const d=e.width*e.height,h=t.width*t.height,u=o*i,c=u/(d+h-u);return Number(c.toFixed(4))}return 0}var qu=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:s}=t;const r=[];for(const a of s){const{id:o}=a,i=n.get(o);if(i){const d=Bu(i,e);d>0&&r.push({id:o,data:{droppableContainer:a,value:d}})}}return r.sort(Ou)};function Wu(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function Ca(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:it}function Vu(t){return function(n){for(var s=arguments.length,r=new Array(s>1?s-1:0),a=1;a<s;a++)r[a-1]=arguments[a];return r.reduce((o,i)=>({...o,top:o.top+t*i.y,bottom:o.bottom+t*i.y,left:o.left+t*i.x,right:o.right+t*i.x}),{...n})}}var Yu=Vu(1);function Xu(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function Qu(t,e,n){const s=Xu(e);if(!s)return t;const{scaleX:r,scaleY:a,x:o,y:i}=s,d=t.left-o-(1-r)*parseFloat(n),h=t.top-i-(1-a)*parseFloat(n.slice(n.indexOf(" ")+1)),u=r?t.width/r:t.width,c=a?t.height/a:t.height;return{width:u,height:c,top:h,right:d+u,bottom:h+c,left:d}}var Ku={ignoreTransform:!1};function Ot(t,e){e===void 0&&(e=Ku);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:h,transformOrigin:u}=Ke(t).getComputedStyle(t);h&&(n=Qu(n,h,u))}const{top:s,left:r,width:a,height:o,bottom:i,right:d}=n;return{top:s,left:r,width:a,height:o,bottom:i,right:d}}function Pr(t){return Ot(t,{ignoreTransform:!0})}function Zu(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function Ju(t,e){return e===void 0&&(e=Ke(t).getComputedStyle(t)),e.position==="fixed"}function Gu(t,e){e===void 0&&(e=Ke(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const r=e[s];return typeof r=="string"?n.test(r):!1})}function yn(t,e){const n=[];function s(r){if(e!=null&&n.length>=e||!r)return n;if(Zn(r)&&r.scrollingElement!=null&&!n.includes(r.scrollingElement))return n.push(r.scrollingElement),n;if(!Gt(r)||va(r)||n.includes(r))return n;const a=Ke(t).getComputedStyle(r);return r!==t&&Gu(r,a)&&n.push(r),Ju(r,a)?n:s(r.parentNode)}return t?s(t):n}function ka(t){const[e]=yn(t,1);return e??null}function An(t){return!wn||!t?null:Lt(t)?t:Kn(t)?Zn(t)||t===Ft(t).scrollingElement?window:Gt(t)?t:null:null}function _a(t){return Lt(t)?t.scrollX:t.scrollLeft}function Sa(t){return Lt(t)?t.scrollY:t.scrollTop}function Pn(t){return{x:_a(t),y:Sa(t)}}var Le;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(Le||(Le={}));function Na(t){return!wn||!t?!1:t===document.scrollingElement}function za(t){const e={x:0,y:0},n=Na(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},s={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height};return{isTop:t.scrollTop<=e.y,isLeft:t.scrollLeft<=e.x,isBottom:t.scrollTop>=s.y,isRight:t.scrollLeft>=s.x,maxScroll:s,minScroll:e}}var $u={x:.2,y:.2};function e0(t,e,n,s,r){let{top:a,left:o,right:i,bottom:d}=n;s===void 0&&(s=10),r===void 0&&(r=$u);const{isTop:h,isBottom:u,isLeft:c,isRight:f}=za(t),m={x:0,y:0},p={x:0,y:0},b={height:e.height*r.y,width:e.width*r.x};return!h&&a<=e.top+b.height?(m.y=Le.Backward,p.y=s*Math.abs((e.top+b.height-a)/b.height)):!u&&d>=e.bottom-b.height&&(m.y=Le.Forward,p.y=s*Math.abs((e.bottom-b.height-d)/b.height)),!f&&i>=e.right-b.width?(m.x=Le.Forward,p.x=s*Math.abs((e.right-b.width-i)/b.width)):!c&&o<=e.left+b.width&&(m.x=Le.Backward,p.x=s*Math.abs((e.left+b.width-o)/b.width)),{direction:m,speed:p}}function t0(t){if(t===document.scrollingElement){const{innerWidth:a,innerHeight:o}=window;return{top:0,left:0,right:a,bottom:o,width:a,height:o}}const{top:e,left:n,right:s,bottom:r}=t.getBoundingClientRect();return{top:e,left:n,right:s,bottom:r,width:t.clientWidth,height:t.clientHeight}}function Aa(t){return t.reduce((e,n)=>Dt(e,Pn(n)),it)}function n0(t){return t.reduce((e,n)=>e+_a(n),0)}function r0(t){return t.reduce((e,n)=>e+Sa(n),0)}function s0(t,e){if(e===void 0&&(e=Ot),!t)return;const{top:n,left:s,bottom:r,right:a}=e(t);ka(t)&&(r<=0||a<=0||n>=window.innerHeight||s>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}var a0=[["x",["left","right"],n0],["y",["top","bottom"],r0]],$n=class{constructor(t,e){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const n=yn(e),s=Aa(n);this.rect={...t},this.width=t.width,this.height=t.height;for(const[r,a,o]of a0)for(const i of a)Object.defineProperty(this,i,{get:()=>{const d=o(n),h=s[r]-d;return this.rect[i]+h},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}},Bt=class{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(e=>{var n;return(n=this.target)==null?void 0:n.removeEventListener(...e)})},this.target=t}add(t,e,n){var s;(s=this.target)==null||s.addEventListener(t,e,n),this.listeners.push([t,e,n])}};function o0(t){const{EventTarget:e}=Ke(t);return t instanceof e?t:Ft(t)}function En(t,e){const n=Math.abs(t.x),s=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+s**2)>e:"x"in e&&"y"in e?n>e.x&&s>e.y:"x"in e?n>e.x:"y"in e?s>e.y:!1}var nt;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(nt||(nt={}));function Lr(t){t.preventDefault()}function i0(t){t.stopPropagation()}var pe;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(pe||(pe={}));var Ea={start:[pe.Space,pe.Enter],cancel:[pe.Esc],end:[pe.Space,pe.Enter,pe.Tab]},l0=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case pe.Right:return{...n,x:n.x+25};case pe.Left:return{...n,x:n.x-25};case pe.Down:return{...n,y:n.y+25};case pe.Up:return{...n,y:n.y-25}}},er=class{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:e}}=t;this.props=t,this.listeners=new Bt(Ft(e)),this.windowListeners=new Bt(Ke(e)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(nt.Resize,this.handleCancel),this.windowListeners.add(nt.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(nt.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:e}=this.props,n=t.node.current;n&&s0(n),e(it)}handleKeyDown(t){if(Gn(t)){const{active:e,context:n,options:s}=this.props,{keyboardCodes:r=Ea,coordinateGetter:a=l0,scrollBehavior:o="smooth"}=s,{code:i}=t;if(r.end.includes(i)){this.handleEnd(t);return}if(r.cancel.includes(i)){this.handleCancel(t);return}const{collisionRect:d}=n.current,h=d?{x:d.left,y:d.top}:it;this.referenceCoordinates||(this.referenceCoordinates=h);const u=a(t,{active:e,context:n.current,currentCoordinates:h});if(u){const c=Xt(u,h),f={x:0,y:0},{scrollableAncestors:m}=n.current;for(const p of m){const b=t.code,{isTop:x,isRight:v,isLeft:_,isBottom:N,maxScroll:S,minScroll:M}=za(p),k=t0(p),D={x:Math.min(b===pe.Right?k.right-k.width/2:k.right,Math.max(b===pe.Right?k.left:k.left+k.width/2,u.x)),y:Math.min(b===pe.Down?k.bottom-k.height/2:k.bottom,Math.max(b===pe.Down?k.top:k.top+k.height/2,u.y))},y=b===pe.Right&&!v||b===pe.Left&&!_,w=b===pe.Down&&!N||b===pe.Up&&!x;if(y&&D.x!==u.x){const A=p.scrollLeft+c.x,R=b===pe.Right&&A<=S.x||b===pe.Left&&A>=M.x;if(R&&!c.y){p.scrollTo({left:A,behavior:o});return}R?f.x=p.scrollLeft-A:f.x=b===pe.Right?p.scrollLeft-S.x:p.scrollLeft-M.x,f.x&&p.scrollBy({left:-f.x,behavior:o});break}else if(w&&D.y!==u.y){const A=p.scrollTop+c.y,R=b===pe.Down&&A<=S.y||b===pe.Up&&A>=M.y;if(R&&!c.x){p.scrollTo({top:A,behavior:o});return}R?f.y=p.scrollTop-A:f.y=b===pe.Down?p.scrollTop-S.y:p.scrollTop-M.y,f.y&&p.scrollBy({top:-f.y,behavior:o});break}}this.handleMove(t,Dt(Xt(u,this.referenceCoordinates),f))}}}handleMove(t,e){const{onMove:n}=this.props;t.preventDefault(),n(e)}handleEnd(t){const{onEnd:e}=this.props;t.preventDefault(),this.detach(),e()}handleCancel(t){const{onCancel:e}=this.props;t.preventDefault(),this.detach(),e()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}};er.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:s=Ea,onActivation:r}=e,{active:a}=n;const{code:o}=t.nativeEvent;if(s.start.includes(o)){const i=a.activatorNode.current;return i&&t.target!==i?!1:(t.preventDefault(),r?.({event:t.nativeEvent}),!0)}return!1}}];function Fr(t){return!!(t&&"distance"in t)}function Or(t){return!!(t&&"delay"in t)}var tr=class{constructor(t,e,n){var s;n===void 0&&(n=o0(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=e;const{event:r}=t,{target:a}=r;this.props=t,this.events=e,this.document=Ft(a),this.documentListeners=new Bt(this.document),this.listeners=new Bt(n),this.windowListeners=new Bt(Ke(a)),this.initialCoordinates=(s=Tn(r))!=null?s:it,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:e,bypassActivationConstraint:n}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(nt.Resize,this.handleCancel),this.windowListeners.add(nt.DragStart,Lr),this.windowListeners.add(nt.VisibilityChange,this.handleCancel),this.windowListeners.add(nt.ContextMenu,Lr),this.documentListeners.add(nt.Keydown,this.handleKeydown),e){if(n!=null&&n({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Or(e)){this.timeoutId=setTimeout(this.handleStart,e.delay),this.handlePending(e);return}if(Fr(e)){this.handlePending(e);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,e){const{active:n,onPending:s}=this.props;s(n,t,this.initialCoordinates,e)}handleStart(){const{initialCoordinates:t}=this,{onStart:e}=this.props;t&&(this.activated=!0,this.documentListeners.add(nt.Click,i0,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(nt.SelectionChange,this.removeTextSelection),e(t))}handleMove(t){var e;const{activated:n,initialCoordinates:s,props:r}=this,{onMove:a,options:{activationConstraint:o}}=r;if(!s)return;const i=(e=Tn(t))!=null?e:it,d=Xt(s,i);if(!n&&o){if(Fr(o)){if(o.tolerance!=null&&En(d,o.tolerance))return this.handleCancel();if(En(d,o.distance))return this.handleStart()}if(Or(o)&&En(d,o.tolerance))return this.handleCancel();this.handlePending(o,d);return}t.cancelable&&t.preventDefault(),a(i)}handleEnd(){const{onAbort:t,onEnd:e}=this.props;this.detach(),this.activated||t(this.props.active),e()}handleCancel(){const{onAbort:t,onCancel:e}=this.props;this.detach(),this.activated||t(this.props.active),e()}handleKeydown(t){t.code===pe.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}},c0={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}},nr=class extends tr{constructor(t){const{event:e}=t,n=Ft(e.target);super(t,c0,n)}};nr.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:s}=e;return!n.isPrimary||n.button!==0?!1:(s?.({event:n}),!0)}}];var d0={move:{name:"mousemove"},end:{name:"mouseup"}},Ln;(function(t){t[t.RightClick=2]="RightClick"})(Ln||(Ln={}));var u0=class extends tr{constructor(t){super(t,d0,Ft(t.event.target))}};u0.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:s}=e;return n.button===Ln.RightClick?!1:(s?.({event:n}),!0)}}];var Rn={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}},f0=class extends tr{constructor(t){super(t,Rn)}static setup(){return window.addEventListener(Rn.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(Rn.move.name,t)};function t(){}}};f0.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:s}=e;const{touches:r}=n;return r.length>1?!1:(s?.({event:n}),!0)}}];var qt;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(qt||(qt={}));var hn;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(hn||(hn={}));function m0(t){let{acceleration:e,activator:n=qt.Pointer,canScroll:s,draggingRect:r,enabled:a,interval:o=5,order:i=hn.TreeOrder,pointerCoordinates:d,scrollableAncestors:h,scrollableAncestorRects:u,delta:c,threshold:f}=t;const m=p0({delta:c,disabled:!a}),[p,b]=_u(),x=(0,g.useRef)({x:0,y:0}),v=(0,g.useRef)({x:0,y:0}),_=(0,g.useMemo)(()=>{switch(n){case qt.Pointer:return d?{top:d.y,bottom:d.y,left:d.x,right:d.x}:null;case qt.DraggableRect:return r}},[n,r,d]),N=(0,g.useRef)(null),S=(0,g.useCallback)(()=>{const k=N.current;if(!k)return;const D=x.current.x*v.current.x,y=x.current.y*v.current.y;k.scrollBy(D,y)},[]),M=(0,g.useMemo)(()=>i===hn.TreeOrder?[...h].reverse():h,[i,h]);(0,g.useEffect)(()=>{if(!a||!h.length||!_){b();return}for(const k of M){if(s?.(k)===!1)continue;const D=u[h.indexOf(k)];if(!D)continue;const{direction:y,speed:w}=e0(k,D,_,e,f);for(const A of["x","y"])m[A][y[A]]||(w[A]=0,y[A]=0);if(w.x>0||w.y>0){b(),N.current=k,p(S,o),x.current=w,v.current=y;return}}x.current={x:0,y:0},v.current={x:0,y:0},b()},[e,S,s,b,a,o,JSON.stringify(_),JSON.stringify(m),p,h,M,u,JSON.stringify(f)])}var h0={x:{[Le.Backward]:!1,[Le.Forward]:!1},y:{[Le.Backward]:!1,[Le.Forward]:!1}};function p0(t){let{delta:e,disabled:n}=t;const s=Dn(e);return $t(r=>{if(n||!s||!r)return h0;const a={x:Math.sign(e.x-s.x),y:Math.sign(e.y-s.y)};return{x:{[Le.Backward]:r.x[Le.Backward]||a.x===-1,[Le.Forward]:r.x[Le.Forward]||a.x===1},y:{[Le.Backward]:r.y[Le.Backward]||a.y===-1,[Le.Forward]:r.y[Le.Forward]||a.y===1}}},[n,e,s])}function g0(t,e){const n=e!=null?t.get(e):void 0,s=n?n.node.current:null;return $t(r=>{var a;return e==null?null:(a=s??r)!=null?a:null},[s,e])}function v0(t,e){return(0,g.useMemo)(()=>t.reduce((n,s)=>{const{sensor:r}=s,a=r.activators.map(o=>({eventName:o.eventName,handler:e(o.handler,s)}));return[...n,...a]},[]),[t,e])}var Kt;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(Kt||(Kt={}));var Fn;(function(t){t.Optimized="optimized"})(Fn||(Fn={}));var Ur=new Map;function b0(t,e){let{dragging:n,dependencies:s,config:r}=e;const[a,o]=(0,g.useState)(null),{frequency:i,measure:d,strategy:h}=r,u=(0,g.useRef)(t),c=x(),f=Yt(c),m=(0,g.useCallback)(function(v){v===void 0&&(v=[]),!f.current&&o(_=>_===null?v:_.concat(v.filter(N=>!_.includes(N))))},[f]),p=(0,g.useRef)(null),b=$t(v=>{if(c&&!n)return Ur;if(!v||v===Ur||u.current!==t||a!=null){const _=new Map;for(let N of t){if(!N)continue;if(a&&a.length>0&&!a.includes(N.id)&&N.rect.current){_.set(N.id,N.rect.current);continue}const S=N.node.current,M=S?new $n(d(S),S):null;N.rect.current=M,M&&_.set(N.id,M)}return _}return v},[t,a,n,c,d]);return(0,g.useEffect)(()=>{u.current=t},[t]),(0,g.useEffect)(()=>{c||m()},[n,c]),(0,g.useEffect)(()=>{a&&a.length>0&&o(null)},[JSON.stringify(a)]),(0,g.useEffect)(()=>{c||typeof i!="number"||p.current!==null||(p.current=setTimeout(()=>{m(),p.current=null},i))},[i,c,m,...s]),{droppableRects:b,measureDroppableContainers:m,measuringScheduled:a!=null};function x(){switch(h){case Kt.Always:return!1;case Kt.BeforeDragging:return n;default:return!n}}}function Ra(t,e){return $t(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function x0(t,e){return Ra(t,e)}function w0(t){let{callback:e,disabled:n}=t;const s=Jn(e),r=(0,g.useMemo)(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:a}=window;return new a(s)},[s,n]);return(0,g.useEffect)(()=>()=>r?.disconnect(),[r]),r}function jn(t){let{callback:e,disabled:n}=t;const s=Jn(e),r=(0,g.useMemo)(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:a}=window;return new a(s)},[n]);return(0,g.useEffect)(()=>()=>r?.disconnect(),[r]),r}function y0(t){return new $n(Ot(t),t)}function Hr(t,e,n){e===void 0&&(e=y0);const[s,r]=(0,g.useState)(null);function a(){r(d=>{if(!t)return null;if(t.isConnected===!1){var h;return(h=d??n)!=null?h:null}const u=e(t);return JSON.stringify(d)===JSON.stringify(u)?d:u})}const o=w0({callback(d){if(t)for(const h of d){const{type:u,target:c}=h;if(u==="childList"&&c instanceof HTMLElement&&c.contains(t)){a();break}}}}),i=jn({callback:a});return ut(()=>{a(),t?(i?.observe(t),o?.observe(document.body,{childList:!0,subtree:!0})):(i?.disconnect(),o?.disconnect())},[t]),s}function j0(t){return Ca(t,Ra(t))}var Br=[];function C0(t){const e=(0,g.useRef)(t),n=$t(s=>t?s&&s!==Br&&t&&e.current&&t.parentNode===e.current.parentNode?s:yn(t):Br,[t]);return(0,g.useEffect)(()=>{e.current=t},[t]),n}function k0(t){const[e,n]=(0,g.useState)(null),s=(0,g.useRef)(t),r=(0,g.useCallback)(a=>{const o=An(a.target);o&&n(i=>i?(i.set(o,Pn(o)),new Map(i)):null)},[]);return(0,g.useEffect)(()=>{const a=s.current;if(t!==a){o(a);const i=t.map(d=>{const h=An(d);return h?(h.addEventListener("scroll",r,{passive:!0}),[h,Pn(h)]):null}).filter(d=>d!=null);n(i.length?new Map(i):null),s.current=t}return()=>{o(t),o(a)};function o(i){i.forEach(d=>{An(d)?.removeEventListener("scroll",r)})}},[r,t]),(0,g.useMemo)(()=>t.length?e?Array.from(e.values()).reduce((a,o)=>Dt(a,o),it):Aa(t):it,[t,e])}function qr(t,e){e===void 0&&(e=[]);const n=(0,g.useRef)(null);return(0,g.useEffect)(()=>{n.current=null},e),(0,g.useEffect)(()=>{const s=t!==it;s&&!n.current&&(n.current=t),!s&&n.current&&(n.current=null)},[t]),n.current?Xt(t,n.current):it}function _0(t){(0,g.useEffect)(()=>{if(!wn)return;const e=t.map(n=>{let{sensor:s}=n;return s.setup==null?void 0:s.setup()});return()=>{for(const n of e)n?.()}},t.map(e=>{let{sensor:n}=e;return n}))}function S0(t,e){return(0,g.useMemo)(()=>t.reduce((n,s)=>{let{eventName:r,handler:a}=s;return n[r]=o=>{a(o,e)},n},{}),[t,e])}function Ia(t){return(0,g.useMemo)(()=>t?Zu(t):null,[t])}var Wr=[];function N0(t,e){e===void 0&&(e=Ot);const[n]=t,s=Ia(n?Ke(n):null),[r,a]=(0,g.useState)(Wr);function o(){a(()=>t.length?t.map(d=>Na(d)?s:new $n(e(d),d)):Wr)}const i=jn({callback:o});return ut(()=>{i?.disconnect(),o(),t.forEach(d=>i?.observe(d))},[t]),r}function z0(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return Gt(e)?e:t}function A0(t){let{measure:e}=t;const[n,s]=(0,g.useState)(null),r=jn({callback:(0,g.useCallback)(i=>{for(const{target:d}of i)if(Gt(d)){s(h=>{const u=e(d);return h?{...h,width:u.width,height:u.height}:u});break}},[e])}),[a,o]=fn((0,g.useCallback)(i=>{const d=z0(i);r?.disconnect(),d&&r?.observe(d),s(d?e(d):null)},[e,r]));return(0,g.useMemo)(()=>({nodeRef:a,rect:n,setRef:o}),[n,a,o])}var E0=[{sensor:nr,options:{}},{sensor:er,options:{}}],R0={current:{}},on={draggable:{measure:Pr},droppable:{measure:Pr,strategy:Kt.WhileDragging,frequency:Fn.Optimized},dragOverlay:{measure:Ot}},Wt=class extends Map{get(t){var e;return t!=null&&(e=super.get(t))!=null?e:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:e}=t;return!e})}getNodeFor(t){var e,n;return(e=(n=this.get(t))==null?void 0:n.node.current)!=null?e:void 0}},I0={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Wt,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:mn},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:on,measureDroppableContainers:mn,windowRect:null,measuringScheduled:!1},M0={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:mn,draggableNodes:new Map,over:null,measureDroppableContainers:mn},Cn=(0,g.createContext)(M0),Ma=(0,g.createContext)(I0);function D0(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Wt}}}function T0(t,e){switch(e.type){case Pe.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case Pe.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case Pe.DragEnd:case Pe.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Pe.RegisterDroppable:{const{element:n}=e,{id:s}=n,r=new Wt(t.droppable.containers);return r.set(s,n),{...t,droppable:{...t.droppable,containers:r}}}case Pe.SetDroppableDisabled:{const{id:n,key:s,disabled:r}=e,a=t.droppable.containers.get(n);if(!a||s!==a.key)return t;const o=new Wt(t.droppable.containers);return o.set(n,{...a,disabled:r}),{...t,droppable:{...t.droppable,containers:o}}}case Pe.UnregisterDroppable:{const{id:n,key:s}=e,r=t.droppable.containers.get(n);if(!r||s!==r.key)return t;const a=new Wt(t.droppable.containers);return a.delete(n),{...t,droppable:{...t.droppable,containers:a}}}default:return t}}function P0(t){let{disabled:e}=t;const{active:n,activatorEvent:s,draggableNodes:r}=(0,g.useContext)(Cn),a=Dn(s),o=Dn(n?.id);return(0,g.useEffect)(()=>{if(!e&&!s&&a&&o!=null){if(!Gn(a)||document.activeElement===a.target)return;const i=r.get(o);if(!i)return;const{activatorNode:d,node:h}=i;if(!d.current&&!h.current)return;requestAnimationFrame(()=>{for(const u of[d.current,h.current]){if(!u)continue;const c=zu(u);if(c){c.focus();break}}})}},[s,e,r,o,a]),null}function L0(t,e){let{transform:n,...s}=e;return t!=null&&t.length?t.reduce((r,a)=>a({transform:r,...s}),n):n}function F0(t){return(0,g.useMemo)(()=>({draggable:{...on.draggable,...t?.draggable},droppable:{...on.droppable,...t?.droppable},dragOverlay:{...on.dragOverlay,...t?.dragOverlay}}),[t?.draggable,t?.droppable,t?.dragOverlay])}function O0(t){let{activeNode:e,measure:n,initialRect:s,config:r=!0}=t;const a=(0,g.useRef)(!1),{x:o,y:i}=typeof r=="boolean"?{x:r,y:r}:r;ut(()=>{if(!o&&!i||!e){a.current=!1;return}if(a.current||!s)return;const d=e?.node.current;if(!d||d.isConnected===!1)return;const h=Ca(n(d),s);if(o||(h.x=0),i||(h.y=0),a.current=!0,Math.abs(h.x)>0||Math.abs(h.y)>0){const u=ka(d);u&&u.scrollBy({top:h.y,left:h.x})}},[e,o,i,s,n])}var Da=(0,g.createContext)({...it,scaleX:1,scaleY:1}),bt;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(bt||(bt={}));var U0=(0,g.memo)(function(e){var n,s,r,a;let{id:o,accessibility:i,autoScroll:d=!0,children:h,sensors:u=E0,collisionDetection:c=qu,measuring:f,modifiers:m,...p}=e;const[b,x]=(0,g.useReducer)(T0,void 0,D0),[v,_]=Du(),[N,S]=(0,g.useState)(bt.Uninitialized),M=N===bt.Initialized,{draggable:{active:k,nodes:D,translate:y},droppable:{containers:w}}=b,A=k!=null?D.get(k):null,R=(0,g.useRef)({initial:null,translated:null}),E=(0,g.useMemo)(()=>{var je;return k!=null?{id:k,data:(je=A?.data)!=null?je:R0,rect:R}:null},[k,A]),I=(0,g.useRef)(null),[z,L]=(0,g.useState)(null),[j,C]=(0,g.useState)(null),P=Yt(p,Object.values(p)),T=en("DndDescribedBy",o),F=(0,g.useMemo)(()=>w.getEnabled(),[w]),q=F0(f),{droppableRects:H,measureDroppableContainers:B,measuringScheduled:U}=b0(F,{dragging:M,dependencies:[y.x,y.y],config:q.droppable}),O=g0(D,k),V=(0,g.useMemo)(()=>j?Tn(j):null,[j]),Z=xe(),X=x0(O,q.draggable.measure);O0({activeNode:k!=null?D.get(k):null,config:Z.layoutShiftCompensation,initialRect:X,measure:q.draggable.measure});const W=Hr(O,q.draggable.measure,X),ee=Hr(O?O.parentElement:null),K=(0,g.useRef)({activatorEvent:null,active:null,activeNode:O,collisionRect:null,collisions:null,droppableRects:H,draggableNodes:D,draggingNode:null,draggingNodeRect:null,droppableContainers:w,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Q=w.getNodeFor((n=K.current.over)==null?void 0:n.id),te=A0({measure:q.dragOverlay.measure}),J=(s=te.nodeRef.current)!=null?s:O,G=M?(r=te.rect)!=null?r:W:null,ne=!!(te.nodeRef.current&&te.rect),re=j0(ne?null:W),le=Ia(J?Ke(J):null),ae=C0(M?Q??O:null),be=N0(ae),we=L0(m,{transform:{x:y.x-re.x,y:y.y-re.y,scaleX:1,scaleY:1},activatorEvent:j,active:E,activeNodeRect:W,containerNodeRect:ee,draggingNodeRect:G,over:K.current.over,overlayNodeRect:te.rect,scrollableAncestors:ae,scrollableAncestorRects:be,windowRect:le}),ce=V?Dt(V,y):null,ve=k0(ae),me=qr(ve),ke=qr(ve,[W]),_e=Dt(we,me),ye=G?Yu(G,we):null,Re=E&&ye?c({active:E,collisionRect:ye,droppableRects:H,droppableContainers:F,pointerCoordinates:ce}):null,Ie=ja(Re,"id"),[de,Se]=(0,g.useState)(null),Ce=Wu(ne?we:Dt(we,ke),(a=de?.rect)!=null?a:null,W),Ae=(0,g.useRef)(null),Ee=(0,g.useCallback)((je,ze)=>{let{sensor:Te,options:De}=ze;if(I.current==null)return;const Ne=D.get(I.current);if(!Ne)return;const $=je.nativeEvent;Ae.current=new Te({active:I.current,activeNode:Ne,event:$,options:De,context:K,onAbort(ue){if(!D.get(ue))return;const{onDragAbort:ge}=P.current,fe={id:ue};ge?.(fe),v({type:"onDragAbort",event:fe})},onPending(ue,ge,fe,Fe){if(!D.get(ue))return;const{onDragPending:et}=P.current,He={id:ue,constraint:ge,initialCoordinates:fe,offset:Fe};et?.(He),v({type:"onDragPending",event:He})},onStart(ue){const ge=I.current;if(ge==null)return;const fe=D.get(ge);if(!fe)return;const{onDragStart:Fe}=P.current,et={activatorEvent:$,active:{id:ge,data:fe.data,rect:R}};(0,Ht.unstable_batchedUpdates)(()=>{Fe?.(et),S(bt.Initializing),x({type:Pe.DragStart,initialCoordinates:ue,active:ge}),v({type:"onDragStart",event:et}),L(Ae.current),C($)})},onMove(ue){x({type:Pe.DragMove,coordinates:ue})},onEnd:he(Pe.DragEnd),onCancel:he(Pe.DragCancel)});function he(ue){return async function(){const{active:fe,collisions:Fe,over:et,scrollAdjustedTranslate:He}=K.current;let Oe=null;if(fe&&He){const{cancelDrop:rt}=P.current;Oe={activatorEvent:$,active:fe,collisions:Fe,delta:He,over:et},ue===Pe.DragEnd&&typeof rt=="function"&&await Promise.resolve(rt(Oe))&&(ue=Pe.DragCancel)}I.current=null,(0,Ht.unstable_batchedUpdates)(()=>{x({type:ue}),S(bt.Uninitialized),Se(null),L(null),C(null),Ae.current=null;const rt=ue===Pe.DragEnd?"onDragEnd":"onDragCancel";if(Oe){const pt=P.current[rt];pt?.(Oe),v({type:rt,event:Oe})}})}}},[D]),Me=v0(u,(0,g.useCallback)((je,ze)=>(Te,De)=>{const Ne=Te.nativeEvent,$=D.get(De);if(I.current!==null||!$||Ne.dndKit||Ne.defaultPrevented)return;const he={active:$};je(Te,ze.options,he)===!0&&(Ne.dndKit={capturedBy:ze.sensor},I.current=De,Ee(Te,ze))},[D,Ee]));_0(u),ut(()=>{W&&N===bt.Initializing&&S(bt.Initialized)},[W,N]),(0,g.useEffect)(()=>{const{onDragMove:je}=P.current,{active:ze,activatorEvent:Te,collisions:De,over:Ne}=K.current;if(!ze||!Te)return;const $={active:ze,activatorEvent:Te,collisions:De,delta:{x:_e.x,y:_e.y},over:Ne};(0,Ht.unstable_batchedUpdates)(()=>{je?.($),v({type:"onDragMove",event:$})})},[_e.x,_e.y]),(0,g.useEffect)(()=>{const{active:je,activatorEvent:ze,collisions:Te,droppableContainers:De,scrollAdjustedTranslate:Ne}=K.current;if(!je||I.current==null||!ze||!Ne)return;const{onDragOver:$}=P.current,he=De.get(Ie),ue=he&&he.rect.current?{id:he.id,rect:he.rect.current,data:he.data,disabled:he.disabled}:null,ge={active:je,activatorEvent:ze,collisions:Te,delta:{x:Ne.x,y:Ne.y},over:ue};(0,Ht.unstable_batchedUpdates)(()=>{Se(ue),$?.(ge),v({type:"onDragOver",event:ge})})},[Ie]),ut(()=>{K.current={activatorEvent:j,active:E,activeNode:O,collisionRect:ye,collisions:Re,droppableRects:H,draggableNodes:D,draggingNode:J,draggingNodeRect:G,droppableContainers:w,over:de,scrollableAncestors:ae,scrollAdjustedTranslate:_e},R.current={initial:G,translated:ye}},[E,O,Re,ye,D,J,G,H,w,de,ae,_e]),m0({...Z,delta:y,draggingRect:ye,pointerCoordinates:ce,scrollableAncestors:ae,scrollableAncestorRects:be});const Ze=(0,g.useMemo)(()=>({active:E,activeNode:O,activeNodeRect:W,activatorEvent:j,collisions:Re,containerNodeRect:ee,dragOverlay:te,draggableNodes:D,droppableContainers:w,droppableRects:H,over:de,measureDroppableContainers:B,scrollableAncestors:ae,scrollableAncestorRects:be,measuringConfiguration:q,measuringScheduled:U,windowRect:le}),[E,O,W,j,Re,ee,te,D,w,H,de,B,ae,be,q,U,le]),se=(0,g.useMemo)(()=>({activatorEvent:j,activators:Me,active:E,activeNodeRect:W,ariaDescribedById:{draggable:T},dispatch:x,draggableNodes:D,over:de,measureDroppableContainers:B}),[j,Me,E,W,x,T,D,de,B]);return g.createElement(xa.Provider,{value:_},g.createElement(Cn.Provider,{value:se},g.createElement(Ma.Provider,{value:Ze},g.createElement(Da.Provider,{value:Ce},h)),g.createElement(P0,{disabled:i?.restoreFocus===!1})),g.createElement(Lu,{...i,hiddenTextDescribedById:T}));function xe(){const je=z?.autoScrollEnabled===!1,ze=typeof d=="object"?d.enabled===!1:d===!1,Te=M&&!je&&!ze;return typeof d=="object"?{...d,enabled:Te}:{enabled:Te}}}),H0=(0,g.createContext)(null),Vr="button",B0="Draggable";function q0(t){let{id:e,data:n,disabled:s=!1,attributes:r}=t;const a=en(B0),{activators:o,activatorEvent:i,active:d,activeNodeRect:h,ariaDescribedById:u,draggableNodes:c,over:f}=(0,g.useContext)(Cn),{role:m=Vr,roleDescription:p="draggable",tabIndex:b=0}=r??{},x=d?.id===e,v=(0,g.useContext)(x?Da:H0),[_,N]=fn(),[S,M]=fn(),k=S0(o,e),D=Yt(n);return ut(()=>(c.set(e,{id:e,key:a,node:_,activatorNode:S,data:D}),()=>{const y=c.get(e);y&&y.key===a&&c.delete(e)}),[c,e]),{active:d,activatorEvent:i,activeNodeRect:h,attributes:(0,g.useMemo)(()=>({role:m,tabIndex:b,"aria-disabled":s,"aria-pressed":x&&m===Vr?!0:void 0,"aria-roledescription":p,"aria-describedby":u.draggable}),[s,m,b,x,p,u.draggable]),isDragging:x,listeners:s?void 0:k,node:_,over:f,setNodeRef:N,setActivatorNodeRef:M,transform:v}}function W0(){return(0,g.useContext)(Ma)}var V0="Droppable",Y0={timeout:25};function X0(t){let{data:e,disabled:n=!1,id:s,resizeObserverConfig:r}=t;const a=en(V0),{active:o,dispatch:i,over:d,measureDroppableContainers:h}=(0,g.useContext)(Cn),u=(0,g.useRef)({disabled:n}),c=(0,g.useRef)(!1),f=(0,g.useRef)(null),m=(0,g.useRef)(null),{disabled:p,updateMeasurementsFor:b,timeout:x}={...Y0,...r},v=Yt(b??s),_=jn({callback:(0,g.useCallback)(()=>{if(!c.current){c.current=!0;return}m.current!=null&&clearTimeout(m.current),m.current=setTimeout(()=>{h(Array.isArray(v.current)?v.current:[v.current]),m.current=null},x)},[x]),disabled:p||!o}),[N,S]=fn((0,g.useCallback)((k,D)=>{_&&(D&&(_.unobserve(D),c.current=!1),k&&_.observe(k))},[_])),M=Yt(e);return(0,g.useEffect)(()=>{!_||!N.current||(_.disconnect(),c.current=!1,_.observe(N.current))},[N,_]),(0,g.useEffect)(()=>(i({type:Pe.RegisterDroppable,element:{id:s,key:a,disabled:n,node:N,rect:f,data:M}}),()=>i({type:Pe.UnregisterDroppable,key:a,id:s})),[s]),(0,g.useEffect)(()=>{n!==u.current.disabled&&(i({type:Pe.SetDroppableDisabled,id:s,key:a,disabled:n}),u.current.disabled=n)},[s,a,n,i]),{active:o,rect:f,isOver:d?.id===s,node:N,over:d,setNodeRef:S}}function rr(t,e,n){const s=t.slice();return s.splice(n<0?s.length+n:n,0,s.splice(e,1)[0]),s}function Q0(t,e){return t.reduce((n,s,r)=>{const a=e.get(s);return a&&(n[r]=a),n},Array(t.length))}function rn(t){return t!==null&&t>=0}function K0(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function Z0(t){return typeof t=="boolean"?{draggable:t,droppable:t}:t}var sr=t=>{let{rects:e,activeIndex:n,overIndex:s,index:r}=t;const a=rr(e,s,n),o=e[r],i=a[r];return!i||!o?null:{x:i.left-o.left,y:i.top-o.top,scaleX:i.width/o.width,scaleY:i.height/o.height}},Ta="Sortable",Pa=g.createContext({activeIndex:-1,containerId:Ta,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:sr,disabled:{draggable:!1,droppable:!1}});function J0(t){let{children:e,id:n,items:s,strategy:r=sr,disabled:a=!1}=t;const{active:o,dragOverlay:i,droppableRects:d,over:h,measureDroppableContainers:u}=W0(),c=en(Ta,n),f=i.rect!==null,m=(0,g.useMemo)(()=>s.map(k=>typeof k=="object"&&"id"in k?k.id:k),[s]),p=o!=null,b=o?m.indexOf(o.id):-1,x=h?m.indexOf(h.id):-1,v=(0,g.useRef)(m),_=!K0(m,v.current),N=x!==-1&&b===-1||_,S=Z0(a);ut(()=>{_&&p&&u(m)},[_,m,p,u]),(0,g.useEffect)(()=>{v.current=m},[m]);const M=(0,g.useMemo)(()=>({activeIndex:b,containerId:c,disabled:S,disableTransforms:N,items:m,overIndex:x,useDragOverlay:f,sortedRects:Q0(m,d),strategy:r}),[b,c,S.draggable,S.droppable,N,m,x,d,f,r]);return g.createElement(Pa.Provider,{value:M},e)}var G0=t=>{let{id:e,items:n,activeIndex:s,overIndex:r}=t;return rr(n,s,r).indexOf(e)},$0=t=>{let{containerId:e,isSorting:n,wasDragging:s,index:r,items:a,newIndex:o,previousItems:i,previousContainerId:d,transition:h}=t;return!h||!s||i!==a&&r===o?!1:n?!0:o!==r&&e===d},ef={duration:200,easing:"ease"},La="transform",tf=Qt.Transition.toString({property:La,duration:0,easing:"linear"}),nf={roleDescription:"sortable"};function rf(t){let{disabled:e,index:n,node:s,rect:r}=t;const[a,o]=(0,g.useState)(null),i=(0,g.useRef)(n);return ut(()=>{if(!e&&n!==i.current&&s.current){const d=r.current;if(d){const h=Ot(s.current,{ignoreTransform:!0}),u={x:d.left-h.left,y:d.top-h.top,scaleX:d.width/h.width,scaleY:d.height/h.height};(u.x||u.y)&&o(u)}}n!==i.current&&(i.current=n)},[e,n,s,r]),(0,g.useEffect)(()=>{a&&o(null)},[a]),a}function sf(t){let{animateLayoutChanges:e=$0,attributes:n,disabled:s,data:r,getNewIndex:a=G0,id:o,strategy:i,resizeObserverConfig:d,transition:h=ef}=t;const{items:u,containerId:c,activeIndex:f,disabled:m,disableTransforms:p,sortedRects:b,overIndex:x,useDragOverlay:v,strategy:_}=(0,g.useContext)(Pa),N=af(s,m),S=u.indexOf(o),M=(0,g.useMemo)(()=>({sortable:{containerId:c,index:S,items:u},...r}),[c,r,S,u]),k=(0,g.useMemo)(()=>u.slice(u.indexOf(o)),[u,o]),{rect:D,node:y,isOver:w,setNodeRef:A}=X0({id:o,data:M,disabled:N.droppable,resizeObserverConfig:{updateMeasurementsFor:k,...d}}),{active:R,activatorEvent:E,activeNodeRect:I,attributes:z,setNodeRef:L,listeners:j,isDragging:C,over:P,setActivatorNodeRef:T,transform:F}=q0({id:o,data:M,attributes:{...nf,...n},disabled:N.draggable}),q=ku(A,L),H=!!R,B=H&&!p&&rn(f)&&rn(x),U=!v&&C,O=U&&B?F:null,V=B?O??(i??_)({rects:b,activeNodeRect:I,activeIndex:f,overIndex:x,index:S}):null,Z=rn(f)&&rn(x)?a({id:o,items:u,activeIndex:f,overIndex:x}):S,X=R?.id,W=(0,g.useRef)({activeId:X,items:u,newIndex:Z,containerId:c}),ee=u!==W.current.items,K=e({active:R,containerId:c,isDragging:C,isSorting:H,id:o,index:S,items:u,newIndex:W.current.newIndex,previousItems:W.current.items,previousContainerId:W.current.containerId,transition:h,wasDragging:W.current.activeId!=null}),Q=rf({disabled:!K,index:S,node:y,rect:D});return(0,g.useEffect)(()=>{H&&W.current.newIndex!==Z&&(W.current.newIndex=Z),c!==W.current.containerId&&(W.current.containerId=c),u!==W.current.items&&(W.current.items=u)},[H,Z,c,u]),(0,g.useEffect)(()=>{if(X===W.current.activeId)return;if(X!=null&&W.current.activeId==null){W.current.activeId=X;return}const J=setTimeout(()=>{W.current.activeId=X},50);return()=>clearTimeout(J)},[X]),{active:R,activeIndex:f,attributes:z,data:M,rect:D,index:S,newIndex:Z,items:u,isOver:w,isSorting:H,isDragging:C,listeners:j,node:y,overIndex:x,over:P,setNodeRef:q,setActivatorNodeRef:T,setDroppableNodeRef:A,setDraggableNodeRef:L,transform:Q??V,transition:te()};function te(){if(Q||ee&&W.current.newIndex===S)return tf;if(!(U&&!Gn(E)||!h)&&(H||K))return Qt.Transition.toString({...h,property:La})}}function af(t,e){var n,s;return typeof t=="boolean"?{draggable:t,droppable:!1}:{draggable:(n=t?.draggable)!=null?n:e.draggable,droppable:(s=t?.droppable)!=null?s:e.droppable}}function pn(t){if(!t)return!1;const e=t.data.current;return!!(e&&"sortable"in e&&typeof e.sortable=="object"&&"containerId"in e.sortable&&"items"in e.sortable&&"index"in e.sortable)}var of=[pe.Down,pe.Right,pe.Up,pe.Left],lf=(t,e)=>{let{context:{active:n,collisionRect:s,droppableRects:r,droppableContainers:a,over:o,scrollableAncestors:i}}=e;if(of.includes(t.code)){if(t.preventDefault(),!n||!s)return;const d=[];a.getEnabled().forEach(c=>{if(!c||c!=null&&c.disabled)return;const f=r.get(c.id);if(f)switch(t.code){case pe.Down:s.top<f.top&&d.push(c);break;case pe.Up:s.top>f.top&&d.push(c);break;case pe.Left:s.left>f.left&&d.push(c);break;case pe.Right:s.left<f.left&&d.push(c);break}});const h=Hu({active:n,collisionRect:s,droppableRects:r,droppableContainers:d,pointerCoordinates:null});let u=ja(h,"id");if(u===o?.id&&h.length>1&&(u=h[1].id),u!=null){const c=a.get(n.id),f=a.get(u),m=f?r.get(f.id):null,p=f?.node.current;if(p&&m&&c&&f){const b=yn(p).some((S,M)=>i[M]!==S),x=Fa(c,f),v=cf(c,f),_=b||!x?{x:0,y:0}:{x:v?s.width-m.width:0,y:v?s.height-m.height:0},N={x:m.left,y:m.top};return _.x&&_.y?N:Xt(N,_)}}}};function Fa(t,e){return!pn(t)||!pn(e)?!1:t.data.current.sortable.containerId===e.data.current.sortable.containerId}function cf(t,e){return!pn(t)||!pn(e)||!Fa(t,e)?!1:t.data.current.sortable.index<e.data.current.sortable.index}var df=ie(),uf=t=>{const e=(0,df.c)(33),{id:n,file:s,index:r,total:a,onRemove:o,onAddThumbnail:i,customThumbnail:d}=t;let h;e[0]!==n?(h={id:n},e[0]=n,e[1]=h):h=e[1];const{attributes:u,listeners:c,setNodeRef:f,transform:m,transition:p,isDragging:b}=sf(h);let x;e[2]!==m?(x=Qt.Transform.toString(m),e[2]=m,e[3]=x):x=e[3];const v=b?50:"auto",_=b?.5:1;let N;e[4]!==x||e[5]!==v||e[6]!==_||e[7]!==p?(N={transform:x,transition:p,zIndex:v,opacity:_},e[4]=x,e[5]=v,e[6]=_,e[7]=p,e[8]=N):N=e[8];const S=N,M=`relative group overflow-hidden bg-zinc-100 dark:bg-zinc-800 rounded-2xl border border-zinc-100 dark:border-zinc-800 shadow-sm transition-shadow ${a===3&&r===0?"row-span-2":""} ${b?"shadow-xl ring-2 ring-violet-500":""}`;let k;e[9]!==d||e[10]!==s?(k=s.type.startsWith("image/")?(0,l.jsx)("img",{src:URL.createObjectURL(s),className:"size-full object-cover pointer-events-none",alt:""}):(0,l.jsx)("div",{className:"size-full flex flex-col items-center justify-center text-zinc-500 gap-2 pointer-events-none",children:s.type.startsWith("video/")?(0,l.jsx)(l.Fragment,{children:d?(0,l.jsx)("img",{src:URL.createObjectURL(d),className:"size-full object-cover opacity-60",alt:"Custom thumbnail"}):(0,l.jsx)("div",{className:"size-10 rounded-full bg-black/20 flex items-center justify-center backdrop-blur-sm",children:(0,l.jsx)(Vt,{size:20,className:"text-zinc-400"})})}):(0,l.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,l.jsx)(ii,{size:24}),(0,l.jsx)("span",{className:"text-[10px] font-bold truncate max-w-[100px] px-2",children:s.name})]})}),e[9]=d,e[10]=s,e[11]=k):k=e[11];let D;e[12]!==u||e[13]!==c||e[14]!==k?(D=(0,l.jsx)("div",{...u,...c,className:"size-full cursor-grab active:cursor-grabbing",children:k}),e[12]=u,e[13]=c,e[14]=k,e[15]=D):D=e[15];let y;e[16]!==d||e[17]!==s.type||e[18]!==i?(y=s.type.startsWith("video/")&&(0,l.jsx)("button",{type:"button",onClick:i,className:"absolute inset-x-0 bottom-0 bg-black/60 text-white text-[10px] font-bold py-2 backdrop-blur-md hover:bg-black/80 transition-colors z-10",children:d?"Change Cover":"Add Cover"}),e[16]=d,e[17]=s.type,e[18]=i,e[19]=y):y=e[19];let w;e[20]!==n||e[21]!==o?(w=()=>o(n),e[20]=n,e[21]=o,e[22]=w):w=e[22];let A;e[23]===Symbol.for("react.memo_cache_sentinel")?(A=(0,l.jsx)(Et,{size:14,strokeWidth:2.5}),e[23]=A):A=e[23];let R;e[24]!==w?(R=(0,l.jsx)("button",{type:"button",onClick:w,className:"absolute top-2 right-2 p-1.5 rounded-full bg-black/50 text-white hover:bg-rose-500 transition-colors backdrop-blur-md z-20",children:A}),e[24]=w,e[25]=R):R=e[25];let E;return e[26]!==f||e[27]!==S||e[28]!==R||e[29]!==M||e[30]!==D||e[31]!==y?(E=(0,l.jsxs)("div",{ref:f,style:S,className:M,children:[D,y,R]}),e[26]=f,e[27]=S,e[28]=R,e[29]=M,e[30]=D,e[31]=y,e[32]=E):E=e[32],E},ff=({isOpen:t,onClose:e,initialCommunity:n})=>{const{currentUser:s}=$e(),{addPost:r}=sc(),{addToast:a}=jt(),[o,i]=(0,g.useState)(""),[d,h]=(0,g.useState)([]),[u,c]=(0,g.useState)({}),[f,m]=(0,g.useState)(!1),[p,b]=(0,g.useState)({options:["",""],duration:"1 day"}),[x,v]=(0,g.useState)(!1),[_,N]=(0,g.useState)(null),S=Fu(Mr(nr,{activationConstraint:{distance:8}}),Mr(er,{coordinateGetter:lf}));(0,g.useEffect)(()=>{N(n||null)},[n,t]);const{data:M=[]}=Mt({queryKey:["user-communities",s?.id],queryFn:()=>Qi(s?.id),enabled:!!s?.id}),k=(0,g.useRef)(null),D=(0,g.useRef)(null),[y,w]=(0,g.useState)(null),A=P=>{const T=Array.from(P.target.files).map(F=>({id:Math.random().toString(36).substring(2,11),file:F}));h(F=>[...F,...T])},R=P=>{const T=P.target.files[0];T&&y!==null&&c(F=>({...F,[y]:T})),w(null)},E=P=>{h(F=>F.filter(q=>q.id!==P));const T={...u};delete T[P],c(T)},I=P=>{const{active:T,over:F}=P;F&&T.id!==F.id&&h(q=>rr(q,q.findIndex(H=>H.id===T.id),q.findIndex(H=>H.id===F.id)))},z=()=>{p.options.length<4&&b(P=>({...P,options:[...P.options,""]}))},L=P=>{b(T=>({...T,options:T.options.filter((F,q)=>q!==P)}))},j=(P,T)=>{const F=[...p.options];F[P]=T,b(q=>({...q,options:F}))},C=async P=>{if(P.preventDefault(),!(!o.trim()&&d.length===0||!s)){v(!0);try{const T=[];for(let q=0;q<d.length;q++){const H=d[q],B=u[H.id]||null,U=await St(H.file,"media",B);T.push(U)}let F=null;f&&p.options.some(q=>q.trim())&&(F={options:p.options.filter(q=>q.trim()).map((q,H)=>({id:H+1,text:q,votes:0})),ends_at:new Date(Date.now()+1440*60*1e3).toISOString()}),await r({content:o,media:T,poll:F,type:T.length>0?T[0].type==="video"?"video":"image":F?"poll":"text",userId:s.id,communityId:_?.id||null}),i(""),h([]),m(!1),b({options:["",""],duration:"1 day"}),N(null),e(),a("Post published!")}catch(T){console.error("Failed to create post:",T),a("Failed to publish post.","error")}finally{v(!1)}}};return(0,l.jsx)(Pt,{isOpen:t,onClose:()=>!x&&e(),title:"Create Post",className:"sm:max-w-[600px] p-0 overflow-hidden gap-0",footer:(0,l.jsxs)("div",{className:"flex items-center justify-between w-full pt-2",children:[(0,l.jsxs)("div",{className:"flex gap-1",children:[(0,l.jsx)("button",{type:"button",onClick:()=>k.current?.click(),className:"p-2 text-violet-600 hover:bg-violet-50 dark:text-violet-400 dark:hover:bg-violet-900/20 rounded-full transition-all active:scale-95",title:"Attach media",children:(0,l.jsx)(ri,{size:20})}),(0,l.jsx)("button",{type:"button",onClick:()=>m(!f),className:`p-2 rounded-full transition-all active:scale-95 ${f?"bg-violet-50 text-violet-600 dark:bg-violet-900/20 dark:text-violet-400":"text-violet-600 hover:bg-violet-50 dark:text-violet-400 dark:hover:bg-violet-900/20"}`,title:"Add poll",children:(0,l.jsx)(Wo,{size:20})})]}),(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)("div",{className:"h-6 w-px bg-zinc-200 dark:bg-zinc-800"}),(0,l.jsx)(Je,{onClick:C,disabled:!o.trim()&&d.length===0||x,className:"rounded-full px-6 h-9 text-sm font-bold bg-zinc-900 dark:bg-white text-white dark:text-zinc-950 hover:opacity-90 disabled:opacity-50 transition-all shadow-md active:scale-95",children:x?(0,l.jsx)(mt,{size:16,className:"animate-spin"}):"Post"})]}),(0,l.jsx)("input",{type:"file",ref:k,onChange:A,multiple:!0,className:"hidden",accept:"image/*,video/*,application/pdf"}),(0,l.jsx)("input",{type:"file",ref:D,onChange:R,className:"hidden",accept:"image/*"})]}),children:(0,l.jsxs)("div",{className:"flex flex-col gap-4 p-1",children:[(0,l.jsxs)("div",{className:"flex items-start gap-3",children:[(0,l.jsxs)(Nt,{className:"size-10 border border-zinc-100 dark:border-zinc-800 shadow-sm shrink-0",children:[(0,l.jsx)(zt,{src:s?.avatar,className:"object-cover"}),(0,l.jsx)(At,{children:s?.handle?.[0]?.toUpperCase()})]}),(0,l.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,l.jsx)("span",{className:"font-bold text-sm text-zinc-900 dark:text-zinc-100 truncate",children:s?.name}),(0,l.jsxs)(bc,{children:[(0,l.jsx)(xc,{asChild:!0,children:(0,l.jsx)("button",{className:"flex items-center gap-1.5 px-2.5 py-1 rounded-full border border-zinc-200 dark:border-zinc-700 bg-white dark:bg-zinc-900 text-xs font-bold text-zinc-600 dark:text-zinc-300 hover:bg-zinc-50 dark:hover:bg-zinc-800 transition-all group",children:_?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(is,{size:12,className:"text-violet-500"}),(0,l.jsx)("span",{className:"max-w-[100px] truncate",children:_.name})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(or,{size:12,className:"text-zinc-400 group-hover:text-violet-500 transition-colors"}),(0,l.jsx)("span",{children:"Everyone"})]})})}),(0,l.jsxs)(wc,{align:"start",className:"w-60 p-1.5 rounded-xl shadow-xl border-zinc-100 dark:border-zinc-800",children:[(0,l.jsxs)(ur,{onClick:()=>N(null),className:"gap-3 py-2 px-3 rounded-lg cursor-pointer focus:bg-zinc-50 dark:focus:bg-zinc-800",children:[(0,l.jsx)("div",{className:"size-8 rounded-full bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center shrink-0",children:(0,l.jsx)(or,{size:16,className:"text-zinc-500"})}),(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)("span",{className:"font-bold text-sm",children:"Everyone"}),(0,l.jsx)("span",{className:"text-[11px] text-zinc-500",children:"Public feed"})]})]}),M.length>0&&(0,l.jsx)("div",{className:"h-px bg-zinc-100 dark:bg-zinc-800 my-1 mx-2"}),(0,l.jsx)("div",{className:"max-h-[200px] overflow-y-auto",children:M.filter(P=>!P.isPrivate||P.myRole==="admin").map(P=>(0,l.jsxs)(ur,{onClick:()=>N(P),className:"gap-3 py-2 px-3 rounded-lg cursor-pointer focus:bg-zinc-50 dark:focus:bg-zinc-800",children:[(0,l.jsxs)(Nt,{className:"size-8 border border-zinc-100 dark:border-zinc-700",children:[(0,l.jsx)(zt,{src:P.avatar}),(0,l.jsx)(At,{children:P.name[0]})]}),(0,l.jsxs)("div",{className:"flex flex-col min-w-0",children:[(0,l.jsx)("span",{className:"font-bold text-sm truncate",children:P.name}),(0,l.jsx)("span",{className:"text-[11px] text-zinc-500",children:"Community"})]})]},P.id))})]})]})]}),(0,l.jsx)("textarea",{className:"w-full bg-transparent border-none outline-none text-lg min-h-[100px] max-h-[400px] resize-none dark:text-zinc-100 placeholder:text-zinc-400 font-medium leading-relaxed",placeholder:"What's on your mind?",autoFocus:!0,value:o,onChange:P=>{i(P.target.value),P.target.style.height="auto",P.target.style.height=P.target.scrollHeight+"px"}})]})]}),(0,l.jsxs)("div",{className:"pl-[52px]",children:[d.length>0&&(0,l.jsx)("div",{className:"mb-4 animate-in fade-in zoom-in-95 duration-200",children:(0,l.jsx)(U0,{sensors:S,collisionDetection:Uu,onDragEnd:I,children:(0,l.jsx)(J0,{items:d.map(P=>P.id),strategy:sr,children:(0,l.jsx)("div",{className:`grid gap-2 rounded-2xl overflow-hidden border border-zinc-100 dark:border-zinc-800 shadow-sm ${d.length===1?"grid-cols-1":"grid-cols-2 aspect-[16/9]"}`,children:d.map((P,T)=>(0,l.jsx)(uf,{id:P.id,file:P.file,index:T,total:d.length,onRemove:E,customThumbnail:u[P.id],onAddThumbnail:()=>{w(P.id),D.current?.click()}},P.id))})})})}),f&&(0,l.jsxs)("div",{className:"mb-4 p-4 rounded-xl border border-violet-100 dark:border-violet-900/30 bg-violet-50/30 dark:bg-violet-900/10 space-y-3 animate-in slide-in-from-top-2 duration-200",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center px-1",children:[(0,l.jsx)("span",{className:"text-xs font-bold text-violet-600 dark:text-violet-400 uppercase tracking-wider",children:"Poll Options"}),(0,l.jsx)("button",{type:"button",onClick:()=>m(!1),className:"text-zinc-400 hover:text-rose-500 transition-colors",children:(0,l.jsx)(Et,{size:16})})]}),(0,l.jsx)("div",{className:"space-y-2",children:p.options.map((P,T)=>(0,l.jsxs)("div",{className:"flex gap-2 group",children:[(0,l.jsxs)("div",{className:"flex-1 relative",children:[(0,l.jsx)("input",{className:"w-full bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-700 rounded-lg pl-4 pr-10 py-2.5 text-sm outline-none focus:border-violet-500 focus:ring-2 focus:ring-violet-500/10 transition-all font-medium placeholder:font-normal",placeholder:`Option ${T+1}`,value:P,autoFocus:T===p.options.length-1,onChange:F=>j(T,F.target.value)}),(0,l.jsxs)("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-[10px] font-bold text-zinc-300 pointer-events-none",children:[P.length,"/25"]})]}),p.options.length>2&&(0,l.jsx)("button",{type:"button",onClick:()=>L(T),className:"p-2.5 text-zinc-400 hover:text-rose-500 hover:bg-rose-50 dark:hover:bg-rose-900/20 rounded-lg transition-colors",children:(0,l.jsx)(hi,{size:18})})]},T))}),p.options.length<4&&(0,l.jsx)("button",{type:"button",onClick:z,className:"w-full py-2.5 text-sm font-bold text-violet-600 dark:text-violet-400 hover:bg-violet-100 dark:hover:bg-violet-900/30 rounded-lg border border-dashed border-violet-200 dark:border-violet-800 transition-all",children:"+ Add option"}),(0,l.jsxs)("div",{className:"flex items-center gap-2 pt-1 px-1",children:[(0,l.jsx)("span",{className:"text-[10px] font-medium text-zinc-500",children:"Poll ends in"}),(0,l.jsxs)("select",{className:"bg-transparent text-[10px] font-bold text-zinc-700 dark:text-zinc-300 outline-none cursor-pointer hover:text-violet-600",value:p.duration,onChange:P=>b({...p,duration:P.target.value}),children:[(0,l.jsx)("option",{value:"1 day",children:"1 day"}),(0,l.jsx)("option",{value:"3 days",children:"3 days"}),(0,l.jsx)("option",{value:"7 days",children:"7 days"})]})]})]})]})]})})},mf=ff,hf=({isOpen:t,onClose:e})=>{const{currentUser:n}=$e(),{addToast:s}=jt(),r=Un(),[a,o]=(0,g.useState)(null),[i,d]=(0,g.useState)(!1),[h,u]=(0,g.useState)(null),c=(0,g.useRef)(null),f=x=>{const v=x.target.files[0];v&&o(v)},m=()=>{if(!a)return;const x=new FileReader;x.onload=()=>{u(x.result)},x.readAsDataURL(a)},p=x=>{o(new File([x],`story-cropped-${Date.now()}.jpg`,{type:"image/jpeg"})),u(null)},b=async()=>{if(!(!a||!n)){d(!0);try{const x=await St(a);await Vi(n.id,x.url,x.type),o(null),e(),s("Story shared!"),r.invalidateQueries(["stories"])}catch(x){console.error("Failed to create story:",x),s("Failed to share story.")}finally{d(!1)}}};return(0,l.jsxs)(Pt,{isOpen:t,onClose:()=>!i&&e(),title:"Add Story",children:[(0,l.jsxs)("div",{className:"space-y-6",children:[a?(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"relative aspect-[9/16] w-full max-w-[280px] mx-auto rounded-3xl overflow-hidden shadow-2xl",children:[(0,l.jsx)("img",{src:URL.createObjectURL(a),className:"w-full h-full object-cover",alt:"Preview"}),(0,l.jsx)("button",{onClick:()=>o(null),className:"absolute top-4 right-4 p-2 bg-black/50 text-white rounded-full hover:bg-rose-500 transition-colors",title:"Remove",children:(0,l.jsx)(Et,{size:20})})]}),(0,l.jsxs)("div",{className:"flex items-center justify-center gap-4 py-2 bg-zinc-50/50 dark:bg-zinc-900/50 rounded-2xl",children:[(0,l.jsxs)("button",{onClick:m,className:"flex flex-col items-center gap-1.5 p-3 rounded-xl hover:bg-white dark:hover:bg-zinc-800 transition-all text-zinc-600 dark:text-zinc-400 hover:text-violet-600 dark:hover:text-violet-400 group",children:[(0,l.jsx)("div",{className:"p-2 rounded-lg bg-white dark:bg-zinc-800 shadow-sm group-hover:shadow-md transition-all",children:(0,l.jsx)(Gd,{size:20})}),(0,l.jsx)("span",{className:"text-[10px] font-bold uppercase tracking-wider",children:"Crop / Edit"})]}),(0,l.jsxs)("button",{className:"flex flex-col items-center gap-1.5 p-3 rounded-xl opacity-40 cursor-not-allowed text-zinc-600 dark:text-zinc-400",children:[(0,l.jsx)("div",{className:"p-2 rounded-lg bg-white dark:bg-zinc-800 shadow-sm",children:(0,l.jsx)("svg",{size:20,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"w-5 h-5",children:(0,l.jsx)("path",{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 21 3 22l1-4.5L17 3z"})})}),(0,l.jsx)("span",{className:"text-[10px] font-bold uppercase tracking-wider",children:"Text"})]}),(0,l.jsxs)("button",{className:"flex flex-col items-center gap-1.5 p-3 rounded-xl opacity-40 cursor-not-allowed text-zinc-600 dark:text-zinc-400",children:[(0,l.jsx)("div",{className:"p-2 rounded-lg bg-white dark:bg-zinc-800 shadow-sm",children:(0,l.jsxs)("svg",{size:20,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"w-5 h-5",children:[(0,l.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,l.jsx)("path",{d:"M8 14s1.5 2 4 2 4-2 4-2"}),(0,l.jsx)("line",{x1:"9",y1:"9",x2:"9.01",y2:"9"}),(0,l.jsx)("line",{x1:"15",y1:"9",x2:"15.01",y2:"9"})]})}),(0,l.jsx)("span",{className:"text-[10px] font-bold uppercase tracking-wider",children:"Stickers"})]})]})]}):(0,l.jsxs)("div",{className:"py-10",children:[(0,l.jsxs)("div",{className:"relative w-full group",onClick:()=>c.current?.click(),children:[(0,l.jsx)("div",{className:"relative z-40 cursor-pointer group-hover:translate-x-8 group-hover:shadow-2xl group-hover:-translate-y-8 transition-all duration-500 bg-zinc-900 dark:bg-white flex items-center justify-center h-32 w-32 mx-auto rounded-xl border-4 border-white dark:border-zinc-900",children:(0,l.jsxs)("svg",{className:"h-8 w-8 text-white/60 dark:text-zinc-950/60",strokeLinejoin:"round",strokeLinecap:"round",strokeWidth:"2",stroke:"currentColor",fill:"none",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[(0,l.jsx)("path",{d:"M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2"}),(0,l.jsx)("path",{d:"M7 9l5 -5l5 5"}),(0,l.jsx)("path",{d:"M12 4l0 12"})]})}),(0,l.jsx)("div",{className:"absolute border-2 opacity-0 group-hover:opacity-80 transition-all duration-300 border-dashed border-violet-500 inset-0 z-30 bg-transparent flex items-center justify-center h-32 w-32 mx-auto rounded-xl"})]}),(0,l.jsxs)("div",{className:"text-center mt-8",children:[(0,l.jsx)("p",{className:"font-bold dark:text-white",children:"Choose a photo"}),(0,l.jsx)("p",{className:"text-sm text-zinc-500",children:"Stories last for 24 hours"})]})]}),(0,l.jsx)("input",{type:"file",ref:c,onChange:f,className:"hidden",accept:"image/*"}),(0,l.jsx)(Je,{className:"w-full py-3 text-lg",disabled:!a||i,onClick:b,children:i?(0,l.jsx)(mt,{size:24,className:"animate-spin mx-auto"}):"Share story"})]}),h&&(0,l.jsx)(bd,{src:h,isOpen:!!h,onClose:()=>u(null),onCropComplete:p,aspect:9/16})]})},pf=hf;function nh({isOpen:t,onClose:e,community:n,onUpdate:s}){const{addToast:r}=jt(),[a,o]=(0,g.useState)({name:"",handle:"",description:"",avatar:"",cover:"",isPrivate:!1}),[i,d]=(0,g.useState)(!1),h=(0,g.useRef)(null),u=(0,g.useRef)(null);(0,g.useEffect)(()=>{n&&t&&o({name:n.name||"",handle:n.handle||"",description:n.description||"",avatar:n.avatar||"",cover:n.cover||"",isPrivate:n.isPrivate||!1})},[n,t]);const c=(p,b)=>{const x=p.target.files[0];x&&f(x,b)},f=async(p,b)=>{d(!0);try{const x=await St(p);o(v=>({...v,[b]:x.url})),r(`${b.charAt(0).toUpperCase()+b.slice(1)} uploaded!`)}catch{r(`Failed to upload ${b}`,"error")}finally{d(!1)}},m=async p=>{if(p.preventDefault(),!(!a.name||!a.handle||!n)){d(!0);try{const b=await Zi(n.id,{name:a.name,handle:a.handle.toLowerCase().replace(/[^a-z0-9_]/g,""),description:a.description,avatar_url:a.avatar,cover_url:a.cover,is_private:a.isPrivate});r("Community updated successfully!"),s&&s(b),e()}catch(b){console.error(b),r(b.message||"Failed to update community","error")}finally{d(!1)}}};return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(Pt,{isOpen:t,onClose:()=>!i&&e(),title:"Edit Community",className:"sm:max-w-xl",children:[(0,l.jsxs)("div",{className:"space-y-6 max-h-[85vh] overflow-y-auto px-1",children:[(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsxs)("div",{className:"h-32 sm:h-40 bg-zinc-100 dark:bg-zinc-900 rounded-xl overflow-hidden relative group",children:[a.cover&&(0,l.jsx)("img",{src:a.cover,className:"w-full h-full object-cover",alt:""}),(0,l.jsx)("div",{className:"absolute inset-0 bg-black/20 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:(0,l.jsx)("button",{onClick:()=>u.current?.click(),className:"p-3 bg-black/60 text-white rounded-full hover:bg-black transition-all",children:(0,l.jsx)(ir,{size:20})})})]}),(0,l.jsx)("div",{className:"absolute -bottom-8 left-6",children:(0,l.jsxs)("div",{className:"relative group size-20 sm:size-24 rounded-2xl border-4 border-white dark:border-black bg-zinc-100 dark:bg-zinc-800 overflow-hidden shadow-lg",children:[(0,l.jsx)("img",{src:a.avatar,className:"size-full object-cover",alt:""}),(0,l.jsx)("div",{className:"absolute inset-0 bg-black/40 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:(0,l.jsx)("button",{onClick:()=>h.current?.click(),className:"text-white p-2",children:(0,l.jsx)(ir,{size:18})})})]})})]}),(0,l.jsx)("div",{className:"pt-6",children:(0,l.jsxs)("form",{onSubmit:m,className:"space-y-5",children:[(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"space-y-1.5",children:[(0,l.jsx)("label",{className:"text-sm font-bold ml-1",children:"Community Name"}),(0,l.jsx)("input",{type:"text",required:!0,className:"w-full bg-zinc-50 dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-xl px-4 py-2.5 outline-none focus:ring-2 focus:ring-violet-500/20 focus:border-violet-500 transition-all font-medium",value:a.name,onChange:p=>o({...a,name:p.target.value})})]}),(0,l.jsxs)("div",{className:"space-y-1.5",children:[(0,l.jsx)("label",{className:"text-sm font-bold ml-1",children:"Handle"}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-zinc-500 font-medium text-sm",children:"c/"}),(0,l.jsx)("input",{type:"text",required:!0,className:"w-full bg-zinc-50 dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-xl pl-8 pr-4 py-2.5 outline-none focus:ring-2 focus:ring-violet-500/20 focus:border-violet-500 transition-all font-medium text-sm",value:a.handle,onChange:p=>o({...a,handle:p.target.value.toLowerCase().replace(/[^a-z0-9_]/g,"")})})]})]}),(0,l.jsxs)("div",{className:"space-y-1.5",children:[(0,l.jsx)("label",{className:"text-sm font-bold ml-1",children:"Description"}),(0,l.jsx)("textarea",{className:"w-full bg-zinc-50 dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-xl px-4 py-2.5 outline-none focus:ring-2 focus:ring-violet-500/20 focus:border-violet-500 transition-all min-h-[100px] resize-none font-medium",placeholder:"What is this community about?",value:a.description,onChange:p=>o({...a,description:p.target.value})})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between p-4 bg-zinc-50 dark:bg-zinc-900 rounded-xl border border-zinc-200 dark:border-zinc-800",children:[(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)("span",{className:"text-sm font-bold",children:"Private Community"}),(0,l.jsx)("span",{className:"text-[10px] text-zinc-500",children:"Only Admins can post in private communities"})]}),(0,l.jsx)("input",{type:"checkbox",className:"size-5 rounded-md accent-violet-600 cursor-pointer",checked:a.isPrivate,onChange:p=>o({...a,isPrivate:p.target.checked})})]})]}),(0,l.jsxs)("div",{className:"flex gap-3 pt-6 py-2",children:[(0,l.jsx)(Je,{type:"button",variant:"outline",className:"flex-1 rounded-xl h-11 font-bold",onClick:e,disabled:i,children:"Cancel"}),(0,l.jsx)(Je,{type:"submit",className:"flex-1 rounded-xl h-11 font-bold bg-zinc-900 dark:bg-white text-white dark:text-black hover:bg-zinc-800 dark:hover:bg-zinc-200 transition-all active:scale-95",disabled:i||!a.name,children:i?(0,l.jsx)(mt,{size:18,className:"animate-spin"}):"Save Changes"})]})]})})]}),(0,l.jsx)("input",{type:"file",ref:h,className:"hidden",accept:"image/*",onChange:p=>c(p,"avatar")}),(0,l.jsx)("input",{type:"file",ref:u,className:"hidden",accept:"image/*",onChange:p=>c(p,"cover")})]})})}var gf=({isOpen:t,onClose:e,editProfileData:n,setEditProfileData:s})=>{const{updateProfile:r}=$e(),{addToast:a}=jt(),[o,i]=(0,g.useState)(!1),[d,h]=(0,g.useState)(null),[u,c]=(0,g.useState)(null),f=(0,g.useRef)(null),m=(0,g.useRef)(null),p=(x,v)=>{const _=x.target.files[0];_&&(v==="avatar"?h(_):c(_))},b=async()=>{i(!0);try{let x=n.avatar,v=n.cover;d&&(x=(await St(d)).url),u&&(v=(await St(u)).url),await r({...n,avatar:x,cover:v}),h(null),c(null),e(),a("Profile updated!")}catch(x){console.error("Failed to update profile:",x),a("Failed to update profile.","error")}finally{i(!1)}};return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(Pt,{isOpen:t,onClose:()=>!o&&e(),title:"Edit Profile",children:(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsx)("input",{type:"file",ref:m,className:"hidden",accept:"image/*",onChange:x=>p(x,"cover")}),(0,l.jsx)("input",{type:"file",ref:f,className:"hidden",accept:"image/*",onChange:x=>p(x,"avatar")}),(0,l.jsxs)("div",{className:"relative h-32 bg-zinc-100 dark:bg-zinc-800 rounded-xl overflow-hidden group cursor-pointer",onClick:()=>m.current?.click(),children:[(u||n?.cover)&&(0,l.jsx)("img",{src:u?URL.createObjectURL(u):n.cover,className:"w-full h-full object-cover opacity-60",alt:""}),(0,l.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,l.jsx)("div",{className:"bg-black/50 p-2 rounded-full text-white group-hover:scale-110 transition-transform",children:(0,l.jsx)(Vt,{size:20})})})]}),(0,l.jsx)("div",{className:"relative -mt-16 ml-4",children:(0,l.jsxs)("div",{className:"relative size-24 rounded-full border-4 border-white dark:border-black overflow-hidden group cursor-pointer shadow-lg bg-white dark:bg-black",onClick:()=>f.current?.click(),children:[(d||n?.avatar)&&(0,l.jsxs)(Nt,{className:"size-full opacity-60 rounded-none",children:[(0,l.jsx)(zt,{src:d?URL.createObjectURL(d):n.avatar,className:"object-cover"}),(0,l.jsx)(At,{children:n?.handle?.[0]?.toUpperCase()})]}),(0,l.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,l.jsx)("div",{className:"bg-black/50 p-2 rounded-full text-white group-hover:scale-110 transition-transform",children:(0,l.jsx)(Vt,{size:16})})})]})}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsx)(xt,{label:"Name",value:n?.name||"",onChange:x=>s({...n,name:x.target.value})}),(0,l.jsx)(xt,{label:"Bio",textarea:!0,value:n?.bio||"",onChange:x=>s({...n,bio:x.target.value})}),(0,l.jsx)(xt,{label:"Location",value:n?.location||"",onChange:x=>s({...n,location:x.target.value})}),(0,l.jsx)(xt,{label:"Website",value:n?.website||"",onChange:x=>s({...n,website:x.target.value})})]}),(0,l.jsx)(Je,{className:"w-full py-3",disabled:o,onClick:b,children:o?(0,l.jsx)(mt,{size:24,className:"animate-spin text-white mx-auto"}):"Save changes"})]})})})},vf=gf;function rh({isOpen:t,onClose:e,community:n}){const{addToast:s}=jt(),{currentUser:r}=$e(),[a,o]=(0,g.useState)([]),[i,d]=(0,g.useState)(!1),[h,u]=(0,g.useState)(""),[c,f]=(0,g.useState)("members"),[m,p]=(0,g.useState)(!1),b=r?.id===n?.creatorId,x=(0,g.useCallback)(async(M="")=>{if(n?.id){d(!0),p(!0);try{o(await Ji(n.id,M))}catch(k){console.error("Failed to load members:",k),s("Failed to load members","error")}finally{d(!1)}}},[n?.id,s]);(0,g.useEffect)(()=>{t&&n?.id?x(""):(u(""),o([]),p(!1))},[t,n?.id,x]),(0,g.useEffect)(()=>{if(h.length>=2){const M=setTimeout(()=>{x(h)},500);return()=>clearTimeout(M)}else h.length===0&&m&&x("")},[h,x,m]);const v=async(M,k)=>{try{const D=k==="admin"?"member":"admin";await Gi(n.id,M,D),o(y=>y.map(w=>w.userId===M?{...w,role:D}:w)),s(`Role updated to ${D}`)}catch{s("Failed to update role","error")}},_=(0,g.useMemo)(()=>a.filter(M=>M.role==="admin"||M.userId===n.creatorId),[a,n.creatorId]),N=(0,g.useMemo)(()=>a.filter(M=>M.role!=="admin"&&M.userId!==n.creatorId),[a,n.creatorId]),S=M=>i?(0,l.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,l.jsx)(mt,{className:"animate-spin text-violet-500",size:32})}):M.length>0?(0,l.jsx)("div",{className:"divide-y divide-zinc-100 dark:divide-zinc-800/50",children:M.map(k=>(0,l.jsxs)("div",{className:"p-4 flex items-center justify-between hover:bg-white dark:hover:bg-zinc-800/50 transition-colors",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsxs)(Nt,{className:"size-10 border border-zinc-200 dark:border-zinc-700 shadow-sm",children:[(0,l.jsx)(zt,{src:k.user.avatar_url}),(0,l.jsx)(At,{children:k.user.username?.[0]?.toUpperCase()})]}),(0,l.jsxs)("div",{className:"flex flex-col min-w-0",children:[(0,l.jsxs)("div",{className:"flex items-center gap-1",children:[(0,l.jsx)("span",{className:"font-bold dark:text-zinc-200",children:k.user.name}),k.user.is_verified&&(0,l.jsx)(ca,{size:14,className:"text-blue-500"})]}),(0,l.jsxs)("span",{className:"text-xs text-zinc-500 font-medium",children:["@",k.user.username]})]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[k.userId===n.creatorId?(0,l.jsx)("span",{className:"text-[10px] font-black px-3 py-1 bg-zinc-200 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 rounded-full tracking-wider",children:"OWNER"}):b&&(0,l.jsx)("button",{onClick:()=>v(k.userId,k.role),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-full text-[11px] font-bold transition-all ${k.role==="admin"?"bg-rose-50 text-rose-600 hover:bg-rose-100 dark:bg-rose-950/20 dark:text-rose-400":"bg-zinc-100 text-zinc-600 hover:bg-zinc-200 dark:bg-zinc-800 dark:text-zinc-400 dark:hover:bg-zinc-700"}`,children:k.role==="admin"?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(zo,{size:14}),"Admin"]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(In,{size:14}),"Make Admin"]})}),!b&&k.role==="admin"&&k.userId!==n.creatorId&&(0,l.jsx)("span",{className:"text-[10px] font-black px-3 py-1 bg-violet-50 dark:bg-violet-900/20 text-violet-600 dark:text-violet-400 rounded-full tracking-wider",children:"ADMIN"})]})]},k.userId))}):(0,l.jsxs)("div",{className:"flex flex-col items-center justify-center py-20 text-center px-6",children:[(0,l.jsx)("div",{className:"size-12 rounded-full bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center mb-3",children:(0,l.jsx)(In,{size:24,className:"text-zinc-400"})}),(0,l.jsxs)("p",{className:"text-sm font-bold dark:text-white",children:["No ",c," found"]}),(0,l.jsx)("p",{className:"text-xs text-zinc-500 mt-1",children:"Try a different search term"})]});return(0,l.jsx)(Pt,{isOpen:t,onClose:e,title:"Manage Members",className:"sm:max-w-md",children:(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)(Zr,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-zinc-400",size:18}),(0,l.jsx)("input",{type:"text",placeholder:"Search members...",className:"w-full bg-zinc-50 dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-xl pl-10 pr-4 py-2.5 text-sm outline-none focus:ring-2 focus:ring-violet-500/20 focus:border-violet-500 transition-all font-medium",value:h,onChange:M=>u(M.target.value)})]}),(0,l.jsxs)(Yd,{value:c,onValueChange:f,className:"w-full",children:[(0,l.jsxs)(Xd,{className:"w-full bg-zinc-100 dark:bg-zinc-900 p-1 rounded-xl h-11",children:[(0,l.jsxs)(zr,{value:"members",className:"flex-1 rounded-lg font-bold data-[state=active]:bg-white dark:data-[state=active]:bg-zinc-800 dark:text-zinc-400 dark:data-[state=active]:text-white",children:["Members (",N.length,")"]}),(0,l.jsxs)(zr,{value:"admins",className:"flex-1 rounded-lg font-bold data-[state=active]:bg-white dark:data-[state=active]:bg-zinc-800 dark:text-zinc-400 dark:data-[state=active]:text-white",children:["Admins (",_.length,")"]})]}),(0,l.jsxs)("div",{className:"mt-4 bg-zinc-50 dark:bg-zinc-900 rounded-2xl border border-zinc-100 dark:border-zinc-800 overflow-hidden min-h-[300px] max-h-[400px] overflow-y-auto",children:[(0,l.jsx)(Ar,{value:"members",className:"m-0",children:S(N)}),(0,l.jsx)(Ar,{value:"admins",className:"m-0",children:S(_)})]})]})]})})}var bf=ie(),xf=t=>{const e=(0,bf.c)(22),{isPostModalOpen:n,setIsPostModalOpen:s,isEditProfileOpen:r,setIsEditProfileOpen:a,isStoryModalOpen:o,setIsStoryModalOpen:i,editProfileData:d,setEditProfileData:h,postCommunity:u}=t;let c;e[0]!==s?(c=()=>s(!1),e[0]=s,e[1]=c):c=e[1];let f;e[2]!==n||e[3]!==u||e[4]!==c?(f=(0,l.jsx)(mf,{isOpen:n,onClose:c,initialCommunity:u}),e[2]=n,e[3]=u,e[4]=c,e[5]=f):f=e[5];let m;e[6]!==a?(m=()=>a(!1),e[6]=a,e[7]=m):m=e[7];let p;e[8]!==d||e[9]!==r||e[10]!==h||e[11]!==m?(p=(0,l.jsx)(vf,{isOpen:r,onClose:m,editProfileData:d,setEditProfileData:h}),e[8]=d,e[9]=r,e[10]=h,e[11]=m,e[12]=p):p=e[12];let b;e[13]!==i?(b=()=>i(!1),e[13]=i,e[14]=b):b=e[14];let x;e[15]!==o||e[16]!==b?(x=(0,l.jsx)(pf,{isOpen:o,onClose:b}),e[15]=o,e[16]=b,e[17]=x):x=e[17];let v;return e[18]!==f||e[19]!==p||e[20]!==x?(v=(0,l.jsxs)(l.Fragment,{children:[f,p,x]}),e[18]=f,e[19]=p,e[20]=x,e[21]=v):v=e[21],v},wf=xf,yf=ie(),jf=t=>{const e=(0,yf.c)(91),{story:n,onClose:s}=t,[r,a]=(0,g.useState)(0),[o,i]=(0,g.useState)(0),[d,h]=(0,g.useState)(!1),u=n.stories,c=u[r];let f;e[0]!==r||e[1]!==s||e[2]!==u.length||e[3]!==n.user.id?(f=()=>{r<u.length-1?(a(kf),i(0)):s(n.user.id)},e[0]=r,e[1]=s,e[2]=u.length,e[3]=n.user.id,e[4]=f):f=e[4];const m=f;let p;e[5]!==r?(p=()=>{r>0&&(a(_f),i(0))},e[5]=r,e[6]=p):p=e[6];const b=p;let x;e[7]===Symbol.for("react.memo_cache_sentinel")?(x=J=>{J.stopPropagation(),h(Sf)},e[7]=x):x=e[7];const v=x;let _;e[8]!==m||e[9]!==d?(_=()=>{if(d)return;const J=setInterval(()=>{i(G=>G>=100?(m(),100):G+1)},50);return()=>clearInterval(J)},e[8]=m,e[9]=d,e[10]=_):_=e[10];let N;e[11]!==r||e[12]!==m||e[13]!==d?(N=[m,r,d],e[11]=r,e[12]=m,e[13]=d,e[14]=N):N=e[14],(0,g.useEffect)(_,N);let S;if(e[15]!==r||e[16]!==o||e[17]!==u){let J;e[19]!==r||e[20]!==o?(J=(G,ne)=>(0,l.jsx)("div",{className:"flex-1 h-full bg-white/30 rounded-full overflow-hidden",children:(0,l.jsx)("div",{className:"h-full bg-white transition-all duration-100",style:{width:ne<r?"100%":ne===r?`${o}%`:"0%"}})},ne),e[19]=r,e[20]=o,e[21]=J):J=e[21],S=u.map(J),e[15]=r,e[16]=o,e[17]=u,e[18]=S}else S=e[18];let M;e[22]!==S?(M=(0,l.jsx)("div",{className:"flex gap-1.5 h-0.5 w-full bg-transparent",children:S}),e[22]=S,e[23]=M):M=e[23];const k=`/u/${n.user.handle}`;let D;e[24]!==n.user.avatar||e[25]!==n.user.handle?(D=(0,l.jsx)(zt,{src:n.user.avatar,alt:n.user.handle,className:"object-cover"}),e[24]=n.user.avatar,e[25]=n.user.handle,e[26]=D):D=e[26];let y;e[27]!==n.user.handle?.[0]?(y=n.user.handle?.[0]?.toUpperCase(),e[27]=n.user.handle?.[0],e[28]=y):y=e[28];let w;e[29]!==y?(w=(0,l.jsx)(At,{children:y}),e[29]=y,e[30]=w):w=e[30];let A;e[31]!==w||e[32]!==D?(A=(0,l.jsxs)(Nt,{className:"size-10 border border-white/20 shadow-sm",children:[D,w]}),e[31]=w,e[32]=D,e[33]=A):A=e[33];let R;e[34]!==n.user.handle?(R=(0,l.jsx)("span",{className:"text-white text-sm font-bold shadow-black drop-shadow-md",children:n.user.handle}),e[34]=n.user.handle,e[35]=R):R=e[35];let E;e[36]!==c.created_at?(E=new Date(c.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),e[36]=c.created_at,e[37]=E):E=e[37];let I;e[38]!==E?(I=(0,l.jsx)("span",{className:"text-white/60 text-[10px] shadow-black drop-shadow-md",children:E}),e[38]=E,e[39]=I):I=e[39];let z;e[40]!==R||e[41]!==I?(z=(0,l.jsxs)("div",{className:"flex flex-col",children:[R,I]}),e[40]=R,e[41]=I,e[42]=z):z=e[42];let L;e[43]!==A||e[44]!==z||e[45]!==k?(L=(0,l.jsxs)(Qr,{to:k,className:"flex items-center gap-3 hover:opacity-80 transition-opacity",onClick:Nf,children:[A,z]}),e[43]=A,e[44]=z,e[45]=k,e[46]=L):L=e[46];let j;e[47]!==s||e[48]!==n.user.id?(j=()=>s(n.user.id),e[47]=s,e[48]=n.user.id,e[49]=j):j=e[49];let C;e[50]===Symbol.for("react.memo_cache_sentinel")?(C=(0,l.jsx)(Et,{size:24}),e[50]=C):C=e[50];let P;e[51]!==j?(P=(0,l.jsx)("button",{onClick:j,className:"text-white p-2 hover:bg-white/10 rounded-full transition-colors",children:C}),e[51]=j,e[52]=P):P=e[52];let T;e[53]!==L||e[54]!==P?(T=(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[L,P]}),e[53]=L,e[54]=P,e[55]=T):T=e[55];let F;e[56]!==T||e[57]!==M?(F=(0,l.jsxs)("div",{className:"absolute top-0 left-0 right-0 p-4 z-20 flex flex-col gap-4",children:[M,T]}),e[56]=T,e[57]=M,e[58]=F):F=e[58];let q;e[59]!==r||e[60]!==b?(q=r>0&&(0,l.jsx)("button",{onClick:J=>{J.stopPropagation(),b()},className:"absolute left-4 z-30 p-2 bg-black/20 hover:bg-black/40 rounded-full text-white backdrop-blur-md transition-all active:scale-90",children:(0,l.jsx)(es,{size:32})}),e[59]=r,e[60]=b,e[61]=q):q=e[61];let H;e[62]!==c.id||e[63]!==c.media?(H=(0,l.jsx)("img",{src:c.media,className:"max-w-full max-h-full object-contain rounded-xl shadow-2xl animate-in fade-in zoom-in-95 duration-300",alt:""},c.id),e[62]=c.id,e[63]=c.media,e[64]=H):H=e[64];let B;e[65]!==d?(B=d&&(0,l.jsx)("div",{className:"absolute inset-0 z-10 flex items-center justify-center pointer-events-none",children:(0,l.jsx)("div",{className:"px-4 py-2 bg-black/40 rounded-full text-white text-xs font-bold backdrop-blur-md border border-white/10 animate-in fade-in zoom-in duration-200",children:"PAUSED"})}),e[65]=d,e[66]=B):B=e[66];let U;e[67]!==H||e[68]!==B?(U=(0,l.jsxs)("div",{className:"relative w-full h-full flex items-center justify-center",children:[H,B]}),e[67]=H,e[68]=B,e[69]=U):U=e[69];let O;e[70]!==m?(O=J=>{J.stopPropagation(),m()},e[70]=m,e[71]=O):O=e[71];let V;e[72]===Symbol.for("react.memo_cache_sentinel")?(V=(0,l.jsx)(Gr,{size:32}),e[72]=V):V=e[72];let Z;e[73]!==O?(Z=(0,l.jsx)("button",{onClick:O,className:"absolute right-4 z-30 p-2 bg-black/20 hover:bg-black/40 rounded-full text-white backdrop-blur-md transition-all active:scale-90",children:V}),e[73]=O,e[74]=Z):Z=e[74];let X;e[75]!==b?(X=(0,l.jsx)("div",{className:"w-[30%] cursor-w-resize",onClick:b}),e[75]=b,e[76]=X):X=e[76];let W;e[77]===Symbol.for("react.memo_cache_sentinel")?(W=(0,l.jsx)("div",{className:"w-[40%] cursor-pointer flex items-center justify-center",onClick:v}),e[77]=W):W=e[77];let ee;e[78]!==m?(ee=(0,l.jsx)("div",{className:"w-[30%] cursor-e-resize",onClick:m}),e[78]=m,e[79]=ee):ee=e[79];let K;e[80]!==X||e[81]!==ee?(K=(0,l.jsxs)("div",{className:"absolute inset-0 flex z-20",children:[X,W,ee]}),e[80]=X,e[81]=ee,e[82]=K):K=e[82];let Q;e[83]!==q||e[84]!==U||e[85]!==Z||e[86]!==K?(Q=(0,l.jsxs)("div",{className:"w-full h-full max-w-xl relative flex items-center justify-center p-2",children:[q,U,Z,K]}),e[83]=q,e[84]=U,e[85]=Z,e[86]=K,e[87]=Q):Q=e[87];let te;return e[88]!==F||e[89]!==Q?(te=(0,l.jsxs)("div",{className:"fixed inset-0 z-[100] bg-black flex flex-col items-center justify-center animate-in fade-in duration-300",children:[F,Q]}),e[88]=F,e[89]=Q,e[90]=te):te=e[90],te},Cf=jf;function kf(t){return t+1}function _f(t){return t-1}function Sf(t){return!t}function Nf(t){return t.stopPropagation()}var zf=({type:t,onComplete:e,onSwitch:n})=>{const{login:s,signup:r}=$e(),{addToast:a}=jt(),[o,i]=(0,g.useState)({name:"",email:"",username:"",password:""}),[d,h]=(0,g.useState)(!1),[u,c]=(0,g.useState)(null),f=async m=>{m.preventDefault(),h(!0),c(null);try{t==="login"?(await s({email:o.email,password:o.password}),a("Welcome back!"),e()):(await r({email:o.email,password:o.password,username:o.username,name:o.name}),a("Confirm Your Email","info"),n())}catch(p){console.error("Auth error:",p),c(p.message||"Authentication failed. Please check your credentials."),a("Authentication failed!")}finally{h(!1)}};return(0,l.jsxs)("div",{className:"max-w-md mx-auto p-8 w-full animate-in fade-in slide-in-from-bottom-5 duration-300",children:[(0,l.jsxs)("div",{className:"text-center mb-8",children:[(0,l.jsx)("div",{className:"flex justify-center mb-4",children:(0,l.jsx)("div",{className:"bg-black dark:bg-white dark:text-black text-white p-3 rounded-2xl shadow-lg",children:(0,l.jsx)("img",{src:"/logo.webp",alt:"Logo",className:"size-16 rounded-2xl shadow-xl border-2 border-zinc-100 dark:border-zinc-800"})})}),(0,l.jsx)("h2",{className:"text-3xl font-extrabold mb-2 dark:text-white tracking-tight",children:t==="login"?"Welcome back!":"Join Sysm today"}),(0,l.jsx)("p",{className:"text-zinc-500 font-medium",children:"The decentralized social network"})]}),u&&(0,l.jsxs)("div",{className:"mb-6 p-4 bg-rose-50 dark:bg-rose-900/20 border border-rose-100 dark:border-rose-800 rounded-xl flex items-center gap-3 text-rose-600 dark:text-rose-400 text-sm",children:[(0,l.jsx)(ss,{size:18}),(0,l.jsx)("span",{children:u})]}),(0,l.jsxs)("form",{onSubmit:f,className:"space-y-4",children:[(0,l.jsx)(xt,{label:"Email",type:"email",placeholder:"john@example.com",value:o.email,onChange:m=>i({...o,email:m.target.value}),required:!0}),t==="signup"&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(xt,{label:"Name",placeholder:"John Doe",value:o.name,onChange:m=>i({...o,name:m.target.value}),required:!0}),(0,l.jsx)(xt,{label:"Username",placeholder:"johndoe",value:o.username,onChange:m=>{const p=m.target.value.replace(/[^a-zA-Z0-9_]/g,"");i({...o,username:p})},required:!0})]}),(0,l.jsx)(xt,{label:"Password",type:"password",placeholder:"",value:o.password,onChange:m=>i({...o,password:m.target.value}),required:!0}),(0,l.jsx)(Je,{type:"submit",className:"w-full justify-center py-3 mt-6 text-lg",disabled:d,children:d?(0,l.jsx)(mt,{size:24,className:"animate-spin"}):t==="login"?"Log in":"Sign up"})]}),(0,l.jsxs)("div",{className:"mt-8 text-center text-sm",children:[(0,l.jsx)("span",{className:"text-zinc-500",children:t==="login"?"Don't have an account?":"Already have an account?"}),(0,l.jsx)("button",{onClick:n,className:"font-bold ml-1 hover:underline dark:text-white",children:t==="login"?"Sign up":"Log in"})]})]})},Af=zf,Oa=ie(),Ef=(0,g.lazy)(()=>ft(()=>import("./Home-BC20PAej.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10]))),Rf=(0,g.lazy)(()=>ft(()=>import("./Explore-OmjGMPlL.js"),__vite__mapDeps([11,1,2,3,4,5,6,7,8,9,10]))),If=(0,g.lazy)(()=>ft(()=>import("./Reels-CI2rRBEO.js"),__vite__mapDeps([12,1,2,3,4,5,6,7,8,9,10]))),Yr=(0,g.lazy)(()=>ft(()=>import("./Messages-Bozy05FM.js"),__vite__mapDeps([13,1,2,3,4,5,6,7,10,9]))),Mf=(0,g.lazy)(()=>ft(()=>import("./Notifications-DDh4AeOK.js"),__vite__mapDeps([14,1,2,3,4,5,6,10,9]))),Df=(0,g.lazy)(()=>ft(()=>import("./Profile-2ZGJx53v.js"),__vite__mapDeps([15,1,2,3,4,5,6,7,8,9,10]))),Tf=(0,g.lazy)(()=>ft(()=>import("./Community-DrF3Qlsh.js"),__vite__mapDeps([16,1,2,3,4,5,6,7,8,9,10]))),Pf=(0,g.lazy)(()=>ft(()=>import("./PostDetails-DR_6EaZU.js"),__vite__mapDeps([17,1,2,3,4,5,6,7,8,9,10]))),Lf=(0,g.lazy)(()=>ft(()=>import("./Settings-BS0XxYt6.js"),__vite__mapDeps([18,1,2,3,4,5,6,10,9]))),Ff=(0,g.lazy)(()=>ft(()=>import("./HashtagFeed-CmwsMY8o.js"),__vite__mapDeps([19,1,2,3,4,5,6,7,8,9,10]))),Of=()=>{const t=(0,Oa.c)(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)("div",{className:"flex h-screen w-full items-center justify-center",children:(0,l.jsx)(mt,{size:40,className:"animate-spin text-violet-500"})}),t[0]=e):e=t[0],e};function Uf(){const t=(0,Oa.c)(55),e=gn(),{currentUser:n,authMode:s,setAuthMode:r}=$e(),{darkMode:a}=qn(),{isOpen:o,images:i,currentIndex:d,closeLightbox:h,setIndex:u}=ic(),[c,f]=(0,g.useState)(!1),[m,p]=(0,g.useState)(!1),[b,x]=(0,g.useState)(!1);let v;t[0]===Symbol.for("react.memo_cache_sentinel")?(v={},t[0]=v):v=t[0];const[_,N]=(0,g.useState)(v),[S,M]=(0,g.useState)(null),[k,D]=(0,g.useState)(null);if(s){const K=a?"dark":"";let Q;t[1]!==r?(Q=()=>r(null),t[1]=r,t[2]=Q):Q=t[2];let te;t[3]!==s||t[4]!==r?(te=()=>r(s==="login"?"signup":"login"),t[3]=s,t[4]=r,t[5]=te):te=t[5];let J;t[6]!==s||t[7]!==Q||t[8]!==te?(J=(0,l.jsx)("div",{className:"min-h-screen bg-white dark:bg-black flex items-center justify-center p-4",children:(0,l.jsx)(tt,{children:(0,l.jsx)(Af,{type:s,onComplete:Q,onSwitch:te})})}),t[6]=s,t[7]=Q,t[8]=te,t[9]=J):J=t[9];let G;return t[10]!==K||t[11]!==J?(G=(0,l.jsx)("div",{className:K,children:J}),t[10]=K,t[11]=J,t[12]=G):G=t[12],G}let y;t[13]===Symbol.for("react.memo_cache_sentinel")?(y=(0,l.jsx)(ji,{}),t[13]=y):y=t[13];let w;t[14]===Symbol.for("react.memo_cache_sentinel")?(w=(0,l.jsx)(Of,{}),t[14]=w):w=t[14];let A;t[15]===Symbol.for("react.memo_cache_sentinel")?(A=(0,l.jsx)(du,{onPostClick:()=>f(!0)}),t[15]=A):A=t[15];let R;t[16]===Symbol.for("react.memo_cache_sentinel")?(R=(0,l.jsx)(We,{path:"/",element:(0,l.jsx)(tt,{children:(0,l.jsx)(Ef,{onStoryClick:D,onAddStory:()=>x(!0)})})}),t[16]=R):R=t[16];let E;t[17]===Symbol.for("react.memo_cache_sentinel")?(E=(0,l.jsx)(We,{path:"/home",element:(0,l.jsx)(ar,{to:"/",replace:!0})}),t[17]=E):E=t[17];let I;t[18]===Symbol.for("react.memo_cache_sentinel")?(I=(0,l.jsx)(We,{path:"/community",element:(0,l.jsx)(tt,{children:(0,l.jsx)(Rf,{})})}),t[18]=I):I=t[18];let z;t[19]===Symbol.for("react.memo_cache_sentinel")?(z=(0,l.jsx)(We,{path:"/reels",element:(0,l.jsx)(tt,{children:(0,l.jsx)(If,{})})}),t[19]=z):z=t[19];let L;t[20]===Symbol.for("react.memo_cache_sentinel")?(L=(0,l.jsx)(We,{path:"/messages",element:(0,l.jsx)(tt,{children:(0,l.jsx)(Yr,{})})}),t[20]=L):L=t[20];let j;t[21]===Symbol.for("react.memo_cache_sentinel")?(j=(0,l.jsx)(We,{path:"/settings",element:(0,l.jsx)(tt,{children:(0,l.jsx)(Lf,{})})}),t[21]=j):j=t[21];let C;t[22]===Symbol.for("react.memo_cache_sentinel")?(C=(0,l.jsx)(We,{path:"/messages/:id",element:(0,l.jsx)(tt,{children:(0,l.jsx)(Yr,{})})}),t[22]=C):C=t[22];let P;t[23]===Symbol.for("react.memo_cache_sentinel")?(P=(0,l.jsx)(We,{path:"/notifications",element:(0,l.jsx)(tt,{children:(0,l.jsx)(Mf,{})})}),t[23]=P):P=t[23];let T;t[24]===Symbol.for("react.memo_cache_sentinel")?(T=(0,l.jsx)(We,{path:"/post/:id",element:(0,l.jsx)(tt,{children:(0,l.jsx)(Pf,{})})}),t[24]=T):T=t[24];let F;t[25]===Symbol.for("react.memo_cache_sentinel")?(F=(0,l.jsx)(We,{path:"/c/:handle",element:(0,l.jsx)(tt,{children:(0,l.jsx)(Tf,{onPostInCommunity:K=>{M(K),f(!0)}})})}),t[25]=F):F=t[25];let q;t[26]===Symbol.for("react.memo_cache_sentinel")?(q=(0,l.jsx)(We,{path:"/tags/:tag",element:(0,l.jsx)(tt,{children:(0,l.jsx)(Ff,{})})}),t[26]=q):q=t[26];let H;t[27]===Symbol.for("react.memo_cache_sentinel")?(H=(0,l.jsx)(We,{path:"/u/:handle",element:(0,l.jsx)(tt,{children:(0,l.jsx)(Df,{onEditProfile:K=>{N(K),p(!0)}})})}),t[27]=H):H=t[27];let B;t[28]===Symbol.for("react.memo_cache_sentinel")?(B=(0,l.jsxs)(We,{element:A,children:[R,E,I,z,L,j,C,P,T,F,q,H,(0,l.jsx)(We,{path:"*",element:(0,l.jsx)(ar,{to:"/community"})})]}),t[28]=B):B=t[28];let U;t[29]!==e?(U=(0,l.jsx)(g.Suspense,{fallback:w,children:(0,l.jsx)(Ha,{location:e,children:B},e.pathname)}),t[29]=e,t[30]=U):U=t[30];let O;t[31]===Symbol.for("react.memo_cache_sentinel")?(O=K=>{f(K),K||M(null)},t[31]=O):O=t[31];let V;t[32]!==_||t[33]!==m||t[34]!==c||t[35]!==b||t[36]!==S?(V=(0,l.jsx)(wf,{isPostModalOpen:c,setIsPostModalOpen:O,isEditProfileOpen:m,setIsEditProfileOpen:p,isStoryModalOpen:b,setIsStoryModalOpen:x,editProfileData:_,setEditProfileData:N,postCommunity:S}),t[32]=_,t[33]=m,t[34]=c,t[35]=b,t[36]=S,t[37]=V):V=t[37];let Z;t[38]!==k?(Z=k&&(0,l.jsx)(Cf,{story:k,onClose:K=>{if(K){const Q=JSON.parse(localStorage.getItem("seenStories")||"[]");Q.includes(K)||localStorage.setItem("seenStories",JSON.stringify([...Q,K]))}D(null)}}),t[38]=k,t[39]=Z):Z=t[39];let X;t[40]!==h||t[41]!==d||t[42]!==i||t[43]!==o||t[44]!==u?(X=o&&(0,l.jsx)(yd,{images:i,currentIndex:d,onClose:h,onNavigate:u}),t[40]=h,t[41]=d,t[42]=i,t[43]=o,t[44]=u,t[45]=X):X=t[45];let W;t[46]!==n||t[47]!==e.pathname?(W=n&&e.pathname==="/"&&(0,l.jsx)("button",{onClick:()=>f(!0),className:"fixed bottom-20 right-5 md:hidden z-50 bg-zinc-950 dark:bg-white text-white dark:text-zinc-950 size-12 rounded-full flex items-center justify-center shadow-2xl hover:scale-110 active:scale-90 transition-all cursor-pointer group",title:"Create Post",children:(0,l.jsx)(Vt,{size:28,className:"group-hover:rotate-90 transition-transform duration-300"})}),t[46]=n,t[47]=e.pathname,t[48]=W):W=t[48];let ee;return t[49]!==U||t[50]!==V||t[51]!==Z||t[52]!==X||t[53]!==W?(ee=(0,l.jsxs)(dc,{children:[y,U,V,Z,X,W]}),t[49]=U,t[50]=V,t[51]=Z,t[52]=X,t[53]=W,t[54]=ee):ee=t[54],ee}var Hf=new Ka;(0,bi.createRoot)(document.getElementById("root")).render((0,l.jsx)(g.StrictMode,{children:(0,l.jsx)(Za,{client:Hf,children:(0,l.jsx)(qa,{children:(0,l.jsx)(gl,{children:(0,l.jsx)(ul,{children:(0,l.jsx)(ml,{children:(0,l.jsx)(rc,{children:(0,l.jsx)(tc,{children:(0,l.jsx)(oc,{children:(0,l.jsx)(Uf,{})})})})})})})})})}));export{At as $,Md as A,sm as At,bc as B,Ri as Bt,qm as C,hm as Ct,Wm as D,dm as Dt,Pd as E,um as Et,Om as F,em as Ft,Am as G,oe as Gt,ur as H,Gf as Ht,Lm as I,cm as It,Mm as J,Qf as Jt,Rm as K,Kf as Kt,Pt as L,im as Lt,Rd as M,tm as Mt,Fm as N,lm as Nt,Nr as O,Bi as Ot,Um as P,$f as Pt,Nt as Q,xt as R,rm as Rt,qd as S,Yi as St,Od as T,mm as Tt,Tm as U,Zf as Ut,wc as V,Jf as Vt,xc as W,Ei as Wt,Em as X,Y as Xt,Dm as Y,tn as Yt,Je as Z,Yd as _,bm as _t,ua as a,Sm as at,zr as b,gm as bt,Er as c,_m as ct,Zm as d,sc as dt,zt as et,Km as f,jt as ft,Ym as g,St as gt,Qm as h,$e as ht,ga as i,jm as it,Hm as j,om as jt,Bm as k,nm as kt,Rr as l,wm as lt,ca as m,hl as mt,nh as n,Nm as nt,$m as o,km as ot,Gm as p,qn as pt,Im as q,cs as qt,th as r,zm as rt,Gd as s,Cm as st,rh as t,ym as tt,Jm as u,ic as ut,Ar as v,Xi as vt,Ld as w,fm as wt,Vm as x,vm as xt,Xd as y,pm as yt,Pm as z,am as zt};

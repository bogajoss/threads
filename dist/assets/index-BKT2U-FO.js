const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Home-DxApmCbN.js","assets/framework-CsA6nn9m.js","assets/rolldown-runtime-BaZ8gS7u.js","assets/framework-sg0yWRLc.css","assets/ui-libs-Ba37rTFj.js","assets/ui-libs-CqCaMccn.css","assets/database-t9niRmCR.js","assets/linkify-CDs92yJ8.js","assets/post-D-xderVb.js","assets/query-QyXblnmD.js","assets/hooks-CiEixX9K.js","assets/Explore-di8DLh2c.js","assets/Reels-wH2JoQOA.js","assets/Messages-CS4uxxiG.js","assets/Notifications-DWpDJEfb.js","assets/Profile-DoxXdXhk.js","assets/Community-DI-AqQQi.js","assets/PostDetails-DRT9CfhL.js","assets/Settings-QH57BUFK.js","assets/HashtagFeed-CALDajbr.js"])))=>i.map(i=>d[i]);
import{a as Xr}from"./rolldown-runtime-BaZ8gS7u.js";import{C as xt,E as Hi,T as os,_ as Ke,a as Wi,b as Ot,c as ne,d as Vi,f as Qi,g as Ki,h as yn,i as Yi,m as ls,o as Xi,p as cs,v as Gi,w as Zi,y as wr}from"./framework-CsA6nn9m.js";import{a as jt,i as Ji,n as ht,o as $i,r as yt,t as ds}from"./query-QyXblnmD.js";import{t as eo}from"./database-t9niRmCR.js";import{$ as wh,$n as to,$t as ro,A as no,At as us,B as so,C as fs,Ct as jh,D as ms,Dn as ao,Dt as hs,E as kh,En as io,Et as ps,F as gs,Fn as oo,Ft as kt,G as lo,Gn as jr,H as Nh,Hn as co,I as vs,J as uo,Jn as kr,K as fo,Kn as xs,Kt as Gr,L as mo,Ln as wn,M as bs,Mt as ho,N as po,Nt as go,O as vo,On as xo,Ot as bo,P as ys,Q as ws,Qt as js,R as _h,Rt as Or,S as ks,Sn as Rt,St as Ns,T as yo,Tt as _s,U as Cs,Un as zs,V as Ss,Vn as As,Vt as wo,W as Es,Wn as jo,Wt as ko,Xn as No,Y as _o,Z as Rs,Zn as ur,_ as Ms,_t as Ds,a as Ts,at as Is,b as Co,bn as zo,bt as So,c as Ao,ct as Ch,d as Eo,dn as Ro,dt as Mo,et as Ps,f as Ls,ft as Fs,g as Os,gt as Us,h as qs,ht as Bs,i as Do,it as zh,j as Hs,jn,jt as Sh,k as To,kt as Io,l as Ws,lt as Vs,m as Po,mt as Qs,n as Ks,nn as Nr,nr as Lo,nt as Ys,o as Xs,on as Xt,ot as Fo,p as Oo,pn as Uo,pt as Gs,q as qo,qn as Zs,qt as Bo,r as Js,rn as Ho,rr as Wo,rt as Vo,s as Ah,st as $s,tr as Qo,tt as ea,u as Ko,ut as ta,v as ra,vn as Yo,vt as na,w as Xo,wn as Go,wt as Zo,x as Jo,xt as $o,y as el,yt as sa,z as aa,zn as tl,zt as fr}from"./ui-libs-Ba37rTFj.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}})();var rl=Zi(),g=Xr(Hi(),1),nl="https://dbkcedktqhueqnulnosq.supabase.co",sl="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRia2NlZGt0cWh1ZXFudWxub3NxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njg5NzE1NTQsImV4cCI6MjA4NDU0NzU1NH0.m_Tv-H7o5mL1Nac6TH-S1JkS1x7ZN1AK_4Mt1hZlkvU";const W=eo(nl,sl);var al=ne();function X(...r){return Lo(Wo(r))}const il=()=>{const r=(0,al.c)(2),{pathname:e}=wr();let t;return r[0]!==e?(t=[e],r[0]=e,r[1]=t):t=r[1],(0,g.useEffect)(ll,t),null},Er=r=>typeof r!="string"?!1:/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(r),ol=(r,e)=>{const t=document.createElement("canvas"),n=r.naturalWidth/r.width,s=r.naturalHeight/r.height;t.width=e.width*n,t.height=e.height*s;const a=t.getContext("2d");return a?(a.imageSmoothingEnabled=!0,a.imageSmoothingQuality="high",a.drawImage(r,e.x*n,e.y*s,e.width*n,e.height*s,0,0,e.width*n,e.height*s),new Promise((i,l)=>{t.toBlob(d=>{if(!d){l(new Error("Canvas is empty"));return}i(d)},"image/jpeg",.95)})):Promise.reject(new Error("No 2d context"))},ia=r=>{if(!r)return"";const e=typeof r=="string"?new Date(r):r,t=new Date().getTime()-e.getTime(),n=Math.floor(t/1e3),s=Math.floor(n/60),a=Math.floor(s/60),i=Math.floor(a/24);return n<60?"Just now":s<60?`${s}m ago`:a<24?`${a}h ago`:i<7?`${i}d ago`:e.toLocaleDateString(void 0,{day:"2-digit",month:"2-digit",year:"2-digit"})},Eh=r=>typeof r!="string"?!1:/[\u0980-\u09FF]/.test(r),Rh=r=>{if(!r)return null;const e=r.match(/(https?:\/\/[^\s]+)/g);return e?e[0]:null};function ll(){window.scrollTo(0,0)}const Nt=r=>r?{id:r.id,handle:r.username,name:r.display_name,avatar:r.avatar_url||"/default-avatar.webp",cover:r.cover_url||"/welcome-banner.webp",verified:r.is_verified,bio:r.bio,location:r.location,website:r.website,follower_count:r.follower_count||0,following_count:r.following_count||0,lastSeen:r.last_seen_at}:null,Mt=r=>{if(!r)return null;const e=r.reposter_id||r.reposter_data?.id||r.reposted_by?.id,t=new Date(r.sort_timestamp||r.created_at).getTime(),n=`${r.feed_id||(e?`${r.id}-${e}`:`${r.id}-orig`)}-${t}`,s=Nt(r.author_data||r.user);return s?{...r,feed_id:n,stats:{comments:r.comments_count||0,likes:r.likes_count||0,reposts:r.mirrors_count||0,views:r.views_count||0,shares:r.shares_count||0},user:s,community:r.community_data||r.communities?{...r.community_data||r.communities,avatar:(r.community_data||r.communities).avatar_url||(r.community_data||r.communities).avatar}:null,repostedBy:r.reposter_data?{handle:r.reposter_data.username,name:r.reposter_data.display_name,id:r.reposter_data.id}:r.reposted_by?{handle:r.reposted_by.username,name:r.reposted_by.display_name,id:r.reposted_by.id}:null,timeAgo:ia(r.created_at)}:null},oa=r=>{if(!r)return null;const e=Nt(r.user);return e?{...r,parent_id:r.parent_id,stats:{likes:r.likes_count||0,comments:r.replies_count||0},user:e,timeAgo:ia(r.created_at)}:null},cl=r=>r?{...r,user:r.actor?.username,avatar:r.actor?.avatar_url||"/default-avatar.webp"}:null,la=r=>{if(!r)return null;const e=Nt(r.user);return e?{...r,media:r.media_url,user:e}:null},rr=r=>r?{id:r.id,handle:r.handle,name:r.name,description:r.description,avatar:r.avatar_url||"/default-avatar.webp",cover:r.cover_url||"/welcome-banner.webp",membersCount:r.members_count||0,postsCount:r.posts_count||0,isPrivate:r.is_private,createdAt:r.created_at,type:"community",creatorId:r.creator_id}:null,ca=r=>r?{id:r.id,conversation_id:r.conversation_id,sender_id:r.sender_id,sender:Nt(r.sender),content:r.content,type:r.type||"text",media:r.media||[],reply_to_id:r.reply_to_id,is_read:r.is_read,created_at:r.created_at}:null,dl=(r,e)=>{if(!r||!r.conversation)return null;const t=r.conversation,n=t.is_group?null:t.participants?.find(a=>a.user?.id!==e)||t.participants?.[0],s=t.messages?.filter(a=>a.is_read?!1:a.sender_id&&e&&a.sender_id.toString().toLowerCase()!==e.toString().toLowerCase()).length||0;return{id:t.id,isGroup:t.is_group||!1,name:t.name||null,avatar:t.avatar_url||null,creatorId:t.creator_id||null,user:n?Nt(n.user):null,lastMessage:t.last_message_content||"No messages yet",lastMessageAt:t.last_message_at,time:t.last_message_at?new Date(t.last_message_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"",unread:s}};function ul(r,e){return e.forEach((function(t){t&&typeof t!="string"&&!Array.isArray(t)&&Object.keys(t).forEach((function(n){if(n!=="default"&&!(n in r)){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return t[n]}})}}))})),Object.freeze(r)}function da(r,e){return new Promise((function(t,n){let s;return fl(r).then((function(a){try{return s=a,t(new Blob([e.slice(0,2),s,e.slice(2)],{type:"image/jpeg"}))}catch(i){return n(i)}}),n)}))}var fl=r=>new Promise(((e,t)=>{const n=new FileReader;n.addEventListener("load",(({target:{result:s}})=>{const a=new DataView(s);let i=0;if(a.getUint16(i)!==65496)return t("not a valid JPEG");for(i+=2;;){const l=a.getUint16(i);if(l===65498)break;const d=a.getUint16(i+2);if(l===65505&&a.getUint32(i+4)===1165519206){const m=i+10;let u;switch(a.getUint16(m)){case 18761:u=!0;break;case 19789:u=!1;break;default:return t("TIFF header contains invalid endian")}if(a.getUint16(m+2,u)!==42)return t("TIFF header contains invalid version");const c=a.getUint32(m+4,u),f=m+c+2+12*a.getUint16(m+c,u);for(let h=m+c+2;h<f;h+=12)if(a.getUint16(h,u)==274){if(a.getUint16(h+2,u)!==3)return t("Orientation data type is invalid");if(a.getUint32(h+4,u)!==1)return t("Orientation data count is invalid");a.setUint16(h+8,1,u);break}return e(s.slice(i,i+2+d))}i+=2+d}return e(new Blob)})),n.readAsArrayBuffer(r)})),mr={},ml={get exports(){return mr},set exports(r){mr=r}};(function(r){var e,t,n={};ml.exports=n,n.parse=function(s,a){for(var i=n.bin.readUshort,l=n.bin.readUint,d=0,m={},u=new Uint8Array(s),c=u.length-4;l(u,c)!=101010256;)c--;d=c,d+=4;var f=i(u,d+=4);i(u,d+=2);var h=l(u,d+=2),p=l(u,d+=4);d+=4,d=p;for(var x=0;x<f;x++){l(u,d),d+=4,d+=4,d+=4,l(u,d+=4),h=l(u,d+=4);var j=l(u,d+=4),b=i(u,d+=4),C=i(u,d+2),E=i(u,d+4);d+=6;var A=l(u,d+=8);d+=4,d+=b+C+E,n._readLocal(u,A,m,h,j,a)}return m},n._readLocal=function(s,a,i,l,d,m){var u=n.bin.readUshort,c=n.bin.readUint;c(s,a),u(s,a+=4),u(s,a+=2);var f=u(s,a+=2);c(s,a+=2),c(s,a+=4),a+=4;var h=u(s,a+=8),p=u(s,a+=2);a+=2;var x=n.bin.readUTF8(s,a,h);if(a+=h,a+=p,m)i[x]={size:d,csize:l};else{var j=new Uint8Array(s.buffer,a);if(f==0)i[x]=new Uint8Array(j.buffer.slice(a,a+l));else{if(f!=8)throw"unknown compression method: "+f;var b=new Uint8Array(d);n.inflateRaw(j,b),i[x]=b}}},n.inflateRaw=function(s,a){return n.F.inflate(s,a)},n.inflate=function(s,a){return s[0],s[1],n.inflateRaw(new Uint8Array(s.buffer,s.byteOffset+2,s.length-6),a)},n.deflate=function(s,a){a??={level:6};var i=0,l=new Uint8Array(50+Math.floor(1.1*s.length));l[i]=120,l[i+1]=156,i+=2,i=n.F.deflateRaw(s,l,i,a.level);var d=n.adler(s,0,s.length);return l[i+0]=d>>>24&255,l[i+1]=d>>>16&255,l[i+2]=d>>>8&255,l[i+3]=d>>>0&255,new Uint8Array(l.buffer,0,i+4)},n.deflateRaw=function(s,a){a??={level:6};var i=new Uint8Array(50+Math.floor(1.1*s.length)),l=n.F.deflateRaw(s,i,l,a.level);return new Uint8Array(i.buffer,0,l)},n.encode=function(s,a){a??=!1;var i=0,l=n.bin.writeUint,d=n.bin.writeUshort,m={};for(var u in s){var c=!n._noNeed(u)&&!a,f=s[u],h=n.crc.crc(f,0,f.length);m[u]={cpr:c,usize:f.length,crc:h,file:c?n.deflateRaw(f):f}}for(var u in m)i+=m[u].file.length+30+46+2*n.bin.sizeUTF8(u);i+=22;var p=new Uint8Array(i),x=0,j=[];for(var u in m){var b=m[u];j.push(x),x=n._writeHeader(p,x,u,b,0)}var C=0,E=x;for(var u in m)b=m[u],j.push(x),x=n._writeHeader(p,x,u,b,1,j[C++]);var A=x-E;return l(p,x,101010256),x+=4,d(p,x+=4,C),d(p,x+=2,C),l(p,x+=2,A),l(p,x+=4,E),x+=4,x+=2,p.buffer},n._noNeed=function(s){var a=s.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(a)!=-1},n._writeHeader=function(s,a,i,l,d,m){var u=n.bin.writeUint,c=n.bin.writeUshort,f=l.file;return u(s,a,d==0?67324752:33639248),a+=4,d==1&&(a+=2),c(s,a,20),c(s,a+=2,0),c(s,a+=2,l.cpr?8:0),u(s,a+=2,0),u(s,a+=4,l.crc),u(s,a+=4,f.length),u(s,a+=4,l.usize),c(s,a+=4,n.bin.sizeUTF8(i)),c(s,a+=2,0),a+=2,d==1&&(a+=2,a+=2,u(s,a+=6,m),a+=4),a+=n.bin.writeUTF8(s,a,i),d==0&&(s.set(f,a),a+=f.length),a},n.crc={table:(function(){for(var s=new Uint32Array(256),a=0;a<256;a++){for(var i=a,l=0;l<8;l++)1&i?i=3988292384^i>>>1:i>>>=1;s[a]=i}return s})(),update:function(s,a,i,l){for(var d=0;d<l;d++)s=n.crc.table[255&(s^a[i+d])]^s>>>8;return s},crc:function(s,a,i){return 4294967295^n.crc.update(4294967295,s,a,i)}},n.adler=function(s,a,i){for(var l=1,d=0,m=a,u=a+i;m<u;){for(var c=Math.min(m+5552,u);m<c;)d+=l+=s[m++];l%=65521,d%=65521}return d<<16|l},n.bin={readUshort:function(s,a){return s[a]|s[a+1]<<8},writeUshort:function(s,a,i){s[a]=255&i,s[a+1]=i>>8&255},readUint:function(s,a){return 16777216*s[a+3]+(s[a+2]<<16|s[a+1]<<8|s[a])},writeUint:function(s,a,i){s[a]=255&i,s[a+1]=i>>8&255,s[a+2]=i>>16&255,s[a+3]=i>>24&255},readASCII:function(s,a,i){for(var l="",d=0;d<i;d++)l+=String.fromCharCode(s[a+d]);return l},writeASCII:function(s,a,i){for(var l=0;l<i.length;l++)s[a+l]=i.charCodeAt(l)},pad:function(s){return s.length<2?"0"+s:s},readUTF8:function(s,a,i){for(var l,d="",m=0;m<i;m++)d+="%"+n.bin.pad(s[a+m].toString(16));try{l=decodeURIComponent(d)}catch{return n.bin.readASCII(s,a,i)}return l},writeUTF8:function(s,a,i){for(var l=i.length,d=0,m=0;m<l;m++){var u=i.charCodeAt(m);if((4294967168&u)==0)s[a+d]=u,d++;else if((4294965248&u)==0)s[a+d]=192|u>>6,s[a+d+1]=128|u>>0&63,d+=2;else if((4294901760&u)==0)s[a+d]=224|u>>12,s[a+d+1]=128|u>>6&63,s[a+d+2]=128|u>>0&63,d+=3;else{if((4292870144&u)!=0)throw"e";s[a+d]=240|u>>18,s[a+d+1]=128|u>>12&63,s[a+d+2]=128|u>>6&63,s[a+d+3]=128|u>>0&63,d+=4}}return d},sizeUTF8:function(s){for(var a=s.length,i=0,l=0;l<a;l++){var d=s.charCodeAt(l);if((4294967168&d)==0)i++;else if((4294965248&d)==0)i+=2;else if((4294901760&d)==0)i+=3;else{if((4292870144&d)!=0)throw"e";i+=4}}return i}},n.F={},n.F.deflateRaw=function(s,a,i,l){var d=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][l],m=n.F.U,u=n.F._goodIndex;n.F._hash;var c=n.F._putsE,f=0,h=i<<3,p=0,x=s.length;if(l==0){for(;f<x;)c(a,h,f+(T=Math.min(65535,x-f))==x?1:0),h=n.F._copyExact(s,f,T,a,h+8),f+=T;return h>>>3}var j=m.lits,b=m.strt,C=m.prev,E=0,A=0,D=0,w=0,M=0,v=0;for(x>2&&(b[v=n.F._hash(s,0)]=0),f=0;f<x;f++){if(M=v,f+1<x-2){v=n.F._hash(s,f+1);var y=f+1&32767;C[y]=b[v],b[v]=y}if(p<=f){(E>14e3||A>26697)&&x-f>100&&(p<f&&(j[E]=f-p,E+=2,p=f),h=n.F._writeBlock(f==x-1||p==x?1:0,j,E,w,s,D,f-D,a,h),E=A=w=0,D=f);var z=0;f<x-2&&(z=n.F._bestMatch(s,f,C,M,Math.min(d[2],x-f),d[3]));var T=z>>>16,_=65535&z;if(z!=0){_=65535&z;var R=u(T=z>>>16,m.of0);m.lhst[257+R]++;var S=u(_,m.df0);m.dhst[S]++,w+=m.exb[R]+m.dxb[S],j[E]=T<<23|f-p,j[E+1]=_<<16|R<<8|S,E+=2,p=f+T}else m.lhst[s[f]]++;A++}}for(D==f&&s.length!=0||(p<f&&(j[E]=f-p,E+=2,p=f),h=n.F._writeBlock(1,j,E,w,s,D,f-D,a,h),E=0,A=0,E=A=w=0,D=f);(7&h)!=0;)h++;return h>>>3},n.F._bestMatch=function(s,a,i,l,d,m){var u=32767&a,c=i[u],f=u-c+32768&32767;if(c==u||l!=n.F._hash(s,a-f))return 0;for(var h=0,p=0,x=Math.min(32767,a);f<=x&&--m!=0&&c!=u;){if(h==0||s[a+h]==s[a+h-f]){var j=n.F._howLong(s,a,f);if(j>h){if(p=f,(h=j)>=d)break;f+2<j&&(j=f+2);for(var b=0,C=0;C<j-2;C++){var E=a-f+C+32768&32767,A=E-i[E]+32768&32767;A>b&&(b=A,c=E)}}}f+=(u=c)-(c=i[u])+32768&32767}return h<<16|p},n.F._howLong=function(s,a,i){if(s[a]!=s[a-i]||s[a+1]!=s[a+1-i]||s[a+2]!=s[a+2-i])return 0;var l=a,d=Math.min(s.length,a+258);for(a+=3;a<d&&s[a]==s[a-i];)a++;return a-l},n.F._hash=function(s,a){return(s[a]<<8|s[a+1])+(s[a+2]<<4)&65535},n.saved=0,n.F._writeBlock=function(s,a,i,l,d,m,u,c,f){var h,p,x,j,b,C,E,A,D,w=n.F.U,M=n.F._putsF,v=n.F._putsE;w.lhst[256]++,p=(h=n.F.getTrees())[0],x=h[1],j=h[2],b=h[3],C=h[4],E=h[5],A=h[6],D=h[7];var y=32+((f+3&7)==0?0:8-(f+3&7))+(u<<3),z=l+n.F.contSize(w.fltree,w.lhst)+n.F.contSize(w.fdtree,w.dhst),T=l+n.F.contSize(w.ltree,w.lhst)+n.F.contSize(w.dtree,w.dhst);T+=14+3*E+n.F.contSize(w.itree,w.ihst)+(2*w.ihst[16]+3*w.ihst[17]+7*w.ihst[18]);for(var _=0;_<286;_++)w.lhst[_]=0;for(_=0;_<30;_++)w.dhst[_]=0;for(_=0;_<19;_++)w.ihst[_]=0;var R=y<z&&y<T?0:z<T?1:2;if(M(c,f,s),M(c,f+1,R),f+=3,R==0){for(;(7&f)!=0;)f++;f=n.F._copyExact(d,m,u,c,f)}else{var S,I;if(R==1&&(S=w.fltree,I=w.fdtree),R==2){n.F.makeCodes(w.ltree,p),n.F.revCodes(w.ltree,p),n.F.makeCodes(w.dtree,x),n.F.revCodes(w.dtree,x),n.F.makeCodes(w.itree,j),n.F.revCodes(w.itree,j),S=w.ltree,I=w.dtree,v(c,f,b-257),v(c,f+=5,C-1),v(c,f+=5,E-4),f+=4;for(var k=0;k<E;k++)v(c,f+3*k,w.itree[1+(w.ordr[k]<<1)]);f+=3*E,f=n.F._codeTiny(A,w.itree,c,f),f=n.F._codeTiny(D,w.itree,c,f)}for(var N=m,F=0;F<i;F+=2){for(var P=a[F],O=P>>>23,H=N+(8388607&P);N<H;)f=n.F._writeLit(d[N++],S,c,f);if(O!=0){var q=a[F+1],B=q>>16,U=q>>8&255,L=255&q;v(c,f=n.F._writeLit(257+U,S,c,f),O-w.of0[U]),f+=w.exb[U],M(c,f=n.F._writeLit(L,I,c,f),B-w.df0[L]),f+=w.dxb[L],N+=O}}f=n.F._writeLit(256,S,c,f)}return f},n.F._copyExact=function(s,a,i,l,d){var m=d>>>3;return l[m]=i,l[m+1]=i>>>8,l[m+2]=255-l[m],l[m+3]=255-l[m+1],m+=4,l.set(new Uint8Array(s.buffer,a,i),m),d+(i+4<<3)},n.F.getTrees=function(){for(var s=n.F.U,a=n.F._hufTree(s.lhst,s.ltree,15),i=n.F._hufTree(s.dhst,s.dtree,15),l=[],d=n.F._lenCodes(s.ltree,l),m=[],u=n.F._lenCodes(s.dtree,m),c=0;c<l.length;c+=2)s.ihst[l[c]]++;for(c=0;c<m.length;c+=2)s.ihst[m[c]]++;for(var f=n.F._hufTree(s.ihst,s.itree,7),h=19;h>4&&s.itree[1+(s.ordr[h-1]<<1)]==0;)h--;return[a,i,f,d,u,h,l,m]},n.F.getSecond=function(s){for(var a=[],i=0;i<s.length;i+=2)a.push(s[i+1]);return a},n.F.nonZero=function(s){for(var a="",i=0;i<s.length;i+=2)s[i+1]!=0&&(a+=(i>>1)+",");return a},n.F.contSize=function(s,a){for(var i=0,l=0;l<a.length;l++)i+=a[l]*s[1+(l<<1)];return i},n.F._codeTiny=function(s,a,i,l){for(var d=0;d<s.length;d+=2){var m=s[d],u=s[d+1];l=n.F._writeLit(m,a,i,l);var c=m==16?2:m==17?3:7;m>15&&(n.F._putsE(i,l,u,c),l+=c)}return l},n.F._lenCodes=function(s,a){for(var i=s.length;i!=2&&s[i-1]==0;)i-=2;for(var l=0;l<i;l+=2){var d=s[l+1],m=l+3<i?s[l+3]:-1,u=l+5<i?s[l+5]:-1,c=l==0?-1:s[l-1];if(d==0&&m==d&&u==d){for(var f=l+5;f+2<i&&s[f+2]==d;)f+=2;(h=Math.min(f+1-l>>>1,138))<11?a.push(17,h-3):a.push(18,h-11),l+=2*h-2}else if(d==c&&m==d&&u==d){for(f=l+5;f+2<i&&s[f+2]==d;)f+=2;var h=Math.min(f+1-l>>>1,6);a.push(16,h-3),l+=2*h-2}else a.push(d,0)}return i>>>1},n.F._hufTree=function(s,a,i){var l=[],d=s.length,m=a.length,u=0;for(u=0;u<m;u+=2)a[u]=0,a[u+1]=0;for(u=0;u<d;u++)s[u]!=0&&l.push({lit:u,f:s[u]});var c=l.length,f=l.slice(0);if(c==0)return 0;if(c==1){var h=l[0].lit;return f=h==0?1:0,a[1+(h<<1)]=1,a[1+(f<<1)]=1,1}l.sort((function(A,D){return A.f-D.f}));var p=l[0],x=l[1],j=0,b=1,C=2;for(l[0]={lit:-1,f:p.f+x.f,l:p,r:x,d:0};b!=c-1;)p=j!=b&&(C==c||l[j].f<l[C].f)?l[j++]:l[C++],x=j!=b&&(C==c||l[j].f<l[C].f)?l[j++]:l[C++],l[b++]={lit:-1,f:p.f+x.f,l:p,r:x};var E=n.F.setDepth(l[b-1],0);for(E>i&&(n.F.restrictDepth(f,i,E),E=i),u=0;u<c;u++)a[1+(f[u].lit<<1)]=f[u].d;return E},n.F.setDepth=function(s,a){return s.lit!=-1?(s.d=a,a):Math.max(n.F.setDepth(s.l,a+1),n.F.setDepth(s.r,a+1))},n.F.restrictDepth=function(s,a,i){var l=0,d=1<<i-a,m=0;for(s.sort((function(c,f){return f.d==c.d?c.f-f.f:f.d-c.d})),l=0;l<s.length&&s[l].d>a;l++){var u=s[l].d;s[l].d=a,m+=d-(1<<i-u)}for(m>>>=i-a;m>0;)(u=s[l].d)<a?(s[l].d++,m-=1<<a-u-1):l++;for(;l>=0;l--)s[l].d==a&&m<0&&(s[l].d--,m++);m!=0&&console.log("debt left")},n.F._goodIndex=function(s,a){var i=0;return a[16|i]<=s&&(i|=16),a[8|i]<=s&&(i|=8),a[4|i]<=s&&(i|=4),a[2|i]<=s&&(i|=2),a[1|i]<=s&&(i|=1),i},n.F._writeLit=function(s,a,i,l){return n.F._putsF(i,l,a[s<<1]),l+a[1+(s<<1)]},n.F.inflate=function(s,a){var i=Uint8Array;if(s[0]==3&&s[1]==0)return a||new i(0);var l=n.F,d=l._bitsF,m=l._bitsE,u=l._decodeTiny,c=l.makeCodes,f=l.codes2map,h=l._get17,p=l.U,x=a==null;x&&(a=new i(s.length>>>2<<3));for(var j,b,C=0,E=0,A=0,D=0,w=0,M=0,v=0,y=0,z=0;C==0;)if(C=d(s,z,1),E=d(s,z+1,2),z+=3,E!=0){if(x&&(a=n.F._check(a,y+(1<<17))),E==1&&(j=p.flmap,b=p.fdmap,M=511,v=31),E==2){A=m(s,z,5)+257,D=m(s,z+5,5)+1,w=m(s,z+10,4)+4,z+=14;for(var T=0;T<38;T+=2)p.itree[T]=0,p.itree[T+1]=0;var _=1;for(T=0;T<w;T++){var R=m(s,z+3*T,3);p.itree[1+(p.ordr[T]<<1)]=R,R>_&&(_=R)}z+=3*w,c(p.itree,_),f(p.itree,_,p.imap),j=p.lmap,b=p.dmap,z=u(p.imap,(1<<_)-1,A+D,s,z,p.ttree);var S=l._copyOut(p.ttree,0,A,p.ltree);M=(1<<S)-1;var I=l._copyOut(p.ttree,A,D,p.dtree);v=(1<<I)-1,c(p.ltree,S),f(p.ltree,S,j),c(p.dtree,I),f(p.dtree,I,b)}for(;;){var k=j[h(s,z)&M];z+=15&k;var N=k>>>4;if(!(N>>>8))a[y++]=N;else{if(N==256)break;var F=y+N-254;if(N>264){var P=p.ldef[N-257];F=y+(P>>>3)+m(s,z,7&P),z+=7&P}var O=b[h(s,z)&v];z+=15&O;var H=O>>>4,q=p.ddef[H],B=(q>>>4)+d(s,z,15&q);for(z+=15&q,x&&(a=n.F._check(a,y+(1<<17)));y<F;)a[y]=a[y++-B],a[y]=a[y++-B],a[y]=a[y++-B],a[y]=a[y++-B];y=F}}}else{(7&z)!=0&&(z+=8-(7&z));var U=4+(z>>>3),L=s[U-4]|s[U-3]<<8;x&&(a=n.F._check(a,y+L)),a.set(new i(s.buffer,s.byteOffset+U,L),y),z=U+L<<3,y+=L}return a.length==y?a:a.slice(0,y)},n.F._check=function(s,a){var i=s.length;if(a<=i)return s;var l=new Uint8Array(Math.max(i<<1,a));return l.set(s,0),l},n.F._decodeTiny=function(s,a,i,l,d,m){for(var u=n.F._bitsE,c=n.F._get17,f=0;f<i;){var h=s[c(l,d)&a];d+=15&h;var p=h>>>4;if(p<=15)m[f]=p,f++;else{var x=0,j=0;p==16?(j=3+u(l,d,2),d+=2,x=m[f-1]):p==17?(j=3+u(l,d,3),d+=3):p==18&&(j=11+u(l,d,7),d+=7);for(var b=f+j;f<b;)m[f]=x,f++}}return d},n.F._copyOut=function(s,a,i,l){for(var d=0,m=0,u=l.length>>>1;m<i;){var c=s[m+a];l[m<<1]=0,l[1+(m<<1)]=c,c>d&&(d=c),m++}for(;m<u;)l[m<<1]=0,l[1+(m<<1)]=0,m++;return d},n.F.makeCodes=function(s,a){for(var i,l,d,m,u=n.F.U,c=s.length,f=u.bl_count,h=0;h<=a;h++)f[h]=0;for(h=1;h<c;h+=2)f[s[h]]++;var p=u.next_code;for(i=0,f[0]=0,l=1;l<=a;l++)i=i+f[l-1]<<1,p[l]=i;for(d=0;d<c;d+=2)(m=s[d+1])!=0&&(s[d]=p[m],p[m]++)},n.F.codes2map=function(s,a,i){for(var l=s.length,d=n.F.U.rev15,m=0;m<l;m+=2)if(s[m+1]!=0)for(var u=m>>1,c=s[m+1],f=u<<4|c,h=a-c,p=s[m]<<h,x=p+(1<<h);p!=x;)i[d[p]>>>15-a]=f,p++},n.F.revCodes=function(s,a){for(var i=n.F.U.rev15,l=15-a,d=0;d<s.length;d+=2)s[d]=i[s[d]<<a-s[d+1]]>>>l},n.F._putsE=function(s,a,i){i<<=7&a;var l=a>>>3;s[l]|=i,s[l+1]|=i>>>8},n.F._putsF=function(s,a,i){i<<=7&a;var l=a>>>3;s[l]|=i,s[l+1]|=i>>>8,s[l+2]|=i>>>16},n.F._bitsE=function(s,a,i){return(s[a>>>3]|s[1+(a>>>3)]<<8)>>>(7&a)&(1<<i)-1},n.F._bitsF=function(s,a,i){return(s[a>>>3]|s[1+(a>>>3)]<<8|s[2+(a>>>3)]<<16)>>>(7&a)&(1<<i)-1},n.F._get17=function(s,a){return(s[a>>>3]|s[1+(a>>>3)]<<8|s[2+(a>>>3)]<<16)>>>(7&a)},n.F._get25=function(s,a){return(s[a>>>3]|s[1+(a>>>3)]<<8|s[2+(a>>>3)]<<16|s[3+(a>>>3)]<<24)>>>(7&a)},n.F.U=(e=Uint16Array,t=Uint32Array,{next_code:new e(16),bl_count:new e(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new e(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new t(32),flmap:new e(512),fltree:[],fdmap:new e(32),fdtree:[],lmap:new e(32768),ltree:[],ttree:[],dmap:new e(32768),dtree:[],imap:new e(512),itree:[],rev15:new e(32768),lhst:new t(286),dhst:new t(30),ihst:new t(19),lits:new t(15e3),strt:new e(65536),prev:new e(32768)}),(function(){for(var s=n.F.U,a=0;a<32768;a++){var i=a;i=(4278255360&(i=(4042322160&(i=(3435973836&(i=(2863311530&i)>>>1|(1431655765&i)<<1))>>>2|(858993459&i)<<2))>>>4|(252645135&i)<<4))>>>8|(16711935&i)<<8,s.rev15[a]=(i>>>16|i<<16)>>>17}function l(d,m,u){for(;m--!=0;)d.push(0,u)}for(a=0;a<32;a++)s.ldef[a]=s.of0[a]<<3|s.exb[a],s.ddef[a]=s.df0[a]<<4|s.dxb[a];l(s.fltree,144,8),l(s.fltree,112,9),l(s.fltree,24,7),l(s.fltree,8,8),n.F.makeCodes(s.fltree,9),n.F.codes2map(s.fltree,9,s.flmap),n.F.revCodes(s.fltree,9),l(s.fdtree,32,5),n.F.makeCodes(s.fdtree,5),n.F.codes2map(s.fdtree,5,s.fdmap),n.F.revCodes(s.fdtree,5),l(s.itree,19,0),l(s.ltree,286,0),l(s.dtree,30,0),l(s.ttree,320,0)})()})();var hl=ul({__proto__:null,default:mr},[mr]),lt=(function(){var r={nextZero(u,c){for(;u[c]!=0;)c++;return c},readUshort:(u,c)=>u[c]<<8|u[c+1],writeUshort(u,c,f){u[c]=f>>8&255,u[c+1]=255&f},readUint:(u,c)=>16777216*u[c]+(u[c+1]<<16|u[c+2]<<8|u[c+3]),writeUint(u,c,f){u[c]=f>>24&255,u[c+1]=f>>16&255,u[c+2]=f>>8&255,u[c+3]=255&f},readASCII(u,c,f){let h="";for(let p=0;p<f;p++)h+=String.fromCharCode(u[c+p]);return h},writeASCII(u,c,f){for(let h=0;h<f.length;h++)u[c+h]=f.charCodeAt(h)},readBytes(u,c,f){const h=[];for(let p=0;p<f;p++)h.push(u[c+p]);return h},pad:u=>u.length<2?`0${u}`:u,readUTF8(u,c,f){let h,p="";for(let x=0;x<f;x++)p+=`%${r.pad(u[c+x].toString(16))}`;try{h=decodeURIComponent(p)}catch{return r.readASCII(u,c,f)}return h}};function e(u,c,f,h){const p=c*f,x=a(h),j=Math.ceil(c*x/8),b=new Uint8Array(4*p),C=new Uint32Array(b.buffer),{ctype:E}=h,{depth:A}=h,D=r.readUshort;if(E==6){const P=p<<2;if(A==8)for(var w=0;w<P;w+=4)b[w]=u[w],b[w+1]=u[w+1],b[w+2]=u[w+2],b[w+3]=u[w+3];if(A==16)for(w=0;w<P;w++)b[w]=u[w<<1]}else if(E==2){const P=h.tabs.tRNS;if(P==null){if(A==8)for(w=0;w<p;w++){var M=3*w;C[w]=255<<24|u[M+2]<<16|u[M+1]<<8|u[M]}if(A==16)for(w=0;w<p;w++)M=6*w,C[w]=255<<24|u[M+4]<<16|u[M+2]<<8|u[M]}else{var v=P[0];const O=P[1],H=P[2];if(A==8)for(w=0;w<p;w++){var y=w<<2;M=3*w,C[w]=255<<24|u[M+2]<<16|u[M+1]<<8|u[M],u[M]==v&&u[M+1]==O&&u[M+2]==H&&(b[y+3]=0)}if(A==16)for(w=0;w<p;w++)y=w<<2,M=6*w,C[w]=255<<24|u[M+4]<<16|u[M+2]<<8|u[M],D(u,M)==v&&D(u,M+2)==O&&D(u,M+4)==H&&(b[y+3]=0)}}else if(E==3){const P=h.tabs.PLTE,O=h.tabs.tRNS,H=O?O.length:0;if(A==1)for(var z=0;z<f;z++){var T=z*j,_=z*c;for(w=0;w<c;w++){y=_+w<<2;var R=3*(S=u[T+(w>>3)]>>7-((7&w)<<0)&1);b[y]=P[R],b[y+1]=P[R+1],b[y+2]=P[R+2],b[y+3]=S<H?O[S]:255}}if(A==2)for(z=0;z<f;z++)for(T=z*j,_=z*c,w=0;w<c;w++)y=_+w<<2,R=3*(S=u[T+(w>>2)]>>6-((3&w)<<1)&3),b[y]=P[R],b[y+1]=P[R+1],b[y+2]=P[R+2],b[y+3]=S<H?O[S]:255;if(A==4)for(z=0;z<f;z++)for(T=z*j,_=z*c,w=0;w<c;w++)y=_+w<<2,R=3*(S=u[T+(w>>1)]>>4-((1&w)<<2)&15),b[y]=P[R],b[y+1]=P[R+1],b[y+2]=P[R+2],b[y+3]=S<H?O[S]:255;if(A==8)for(w=0;w<p;w++){var S;y=w<<2,R=3*(S=u[w]),b[y]=P[R],b[y+1]=P[R+1],b[y+2]=P[R+2],b[y+3]=S<H?O[S]:255}}else if(E==4){if(A==8)for(w=0;w<p;w++){y=w<<2;var I=u[k=w<<1];b[y]=I,b[y+1]=I,b[y+2]=I,b[y+3]=u[k+1]}if(A==16)for(w=0;w<p;w++){var k;y=w<<2,I=u[k=w<<2],b[y]=I,b[y+1]=I,b[y+2]=I,b[y+3]=u[k+2]}}else if(E==0)for(v=h.tabs.tRNS?h.tabs.tRNS:-1,z=0;z<f;z++){const P=z*j,O=z*c;if(A==1)for(var N=0;N<c;N++){var F=(I=255*(u[P+(N>>>3)]>>>7-(7&N)&1))==255*v?0:255;C[O+N]=F<<24|I<<16|I<<8|I}else if(A==2)for(N=0;N<c;N++)F=(I=85*(u[P+(N>>>2)]>>>6-((3&N)<<1)&3))==85*v?0:255,C[O+N]=F<<24|I<<16|I<<8|I;else if(A==4)for(N=0;N<c;N++)F=(I=17*(u[P+(N>>>1)]>>>4-((1&N)<<2)&15))==17*v?0:255,C[O+N]=F<<24|I<<16|I<<8|I;else if(A==8)for(N=0;N<c;N++)F=(I=u[P+N])==v?0:255,C[O+N]=F<<24|I<<16|I<<8|I;else if(A==16)for(N=0;N<c;N++)I=u[P+(N<<1)],F=D(u,P+(N<<1))==v?0:255,C[O+N]=F<<24|I<<16|I<<8|I}return b}function t(u,c,f,h){const p=a(u),x=Math.ceil(f*p/8),j=new Uint8Array((x+1+u.interlace)*h);return c=u.tabs.CgBI?s(c,j):n(c,j),u.interlace==0?c=i(c,u,0,f,h):u.interlace==1&&(c=(function(C,E){const A=E.width,D=E.height,w=a(E),M=w>>3,v=Math.ceil(A*w/8),y=new Uint8Array(D*v);let z=0;const T=[0,0,4,0,2,0,1],_=[0,4,0,2,0,1,0],R=[8,8,8,4,4,2,2],S=[8,8,4,4,2,2,1];let I=0;for(;I<7;){const N=R[I],F=S[I];let P=0,O=0,H=T[I];for(;H<D;)H+=N,O++;let q=_[I];for(;q<A;)q+=F,P++;const B=Math.ceil(P*w/8);i(C,E,z,P,O);let U=0,L=T[I];for(;L<D;){let Q=_[I],G=z+U*B<<3;for(;Q<A;){var k;if(w==1&&(k=(k=C[G>>3])>>7-(7&G)&1,y[L*v+(Q>>3)]|=k<<7-((7&Q)<<0)),w==2&&(k=(k=C[G>>3])>>6-(7&G)&3,y[L*v+(Q>>2)]|=k<<6-((3&Q)<<1)),w==4&&(k=(k=C[G>>3])>>4-(7&G)&15,y[L*v+(Q>>1)]|=k<<4-((1&Q)<<2)),w>=8){const K=L*v+Q*M;for(let V=0;V<M;V++)y[K+V]=C[(G>>3)+V]}G+=w,Q+=F}U++,L+=N}P*O!=0&&(z+=O*(1+B)),I+=1}return y})(c,u)),c}function n(u,c){return s(new Uint8Array(u.buffer,2,u.length-6),c)}var s=(function(){const u={H:{}};return u.H.N=function(c,f){const h=Uint8Array;let p,x,j=0,b=0,C=0,E=0,A=0,D=0,w=0,M=0,v=0;if(c[0]==3&&c[1]==0)return f||new h(0);const y=u.H,z=y.b,T=y.e,_=y.R,R=y.n,S=y.A,I=y.Z,k=y.m,N=f==null;for(N&&(f=new h(c.length>>>2<<5));j==0;)if(j=z(c,v,1),b=z(c,v+1,2),v+=3,b!=0){if(N&&(f=u.H.W(f,M+(1<<17))),b==1&&(p=k.J,x=k.h,D=511,w=31),b==2){C=T(c,v,5)+257,E=T(c,v+5,5)+1,A=T(c,v+10,4)+4,v+=14;let P=1;for(var F=0;F<38;F+=2)k.Q[F]=0,k.Q[F+1]=0;for(F=0;F<A;F++){const q=T(c,v+3*F,3);k.Q[1+(k.X[F]<<1)]=q,q>P&&(P=q)}v+=3*A,R(k.Q,P),S(k.Q,P,k.u),p=k.w,x=k.d,v=_(k.u,(1<<P)-1,C+E,c,v,k.v);const O=y.V(k.v,0,C,k.C);D=(1<<O)-1;const H=y.V(k.v,C,E,k.D);w=(1<<H)-1,R(k.C,O),S(k.C,O,p),R(k.D,H),S(k.D,H,x)}for(;;){const P=p[I(c,v)&D];v+=15&P;const O=P>>>4;if(!(O>>>8))f[M++]=O;else{if(O==256)break;{let H=M+O-254;if(O>264){const Q=k.q[O-257];H=M+(Q>>>3)+T(c,v,7&Q),v+=7&Q}const q=x[I(c,v)&w];v+=15&q;const B=q>>>4,U=k.c[B],L=(U>>>4)+z(c,v,15&U);for(v+=15&U;M<H;)f[M]=f[M++-L],f[M]=f[M++-L],f[M]=f[M++-L],f[M]=f[M++-L];M=H}}}}else{(7&v)!=0&&(v+=8-(7&v));const P=4+(v>>>3),O=c[P-4]|c[P-3]<<8;N&&(f=u.H.W(f,M+O)),f.set(new h(c.buffer,c.byteOffset+P,O),M),v=P+O<<3,M+=O}return f.length==M?f:f.slice(0,M)},u.H.W=function(c,f){const h=c.length;if(f<=h)return c;const p=new Uint8Array(h<<1);return p.set(c,0),p},u.H.R=function(c,f,h,p,x,j){const b=u.H.e,C=u.H.Z;let E=0;for(;E<h;){const A=c[C(p,x)&f];x+=15&A;const D=A>>>4;if(D<=15)j[E]=D,E++;else{let w=0,M=0;D==16?(M=3+b(p,x,2),x+=2,w=j[E-1]):D==17?(M=3+b(p,x,3),x+=3):D==18&&(M=11+b(p,x,7),x+=7);const v=E+M;for(;E<v;)j[E]=w,E++}}return x},u.H.V=function(c,f,h,p){let x=0,j=0;const b=p.length>>>1;for(;j<h;){const C=c[j+f];p[j<<1]=0,p[1+(j<<1)]=C,C>x&&(x=C),j++}for(;j<b;)p[j<<1]=0,p[1+(j<<1)]=0,j++;return x},u.H.n=function(c,f){const h=u.H.m,p=c.length;let x,j,b,C;const E=h.j;for(var A=0;A<=f;A++)E[A]=0;for(A=1;A<p;A+=2)E[c[A]]++;const D=h.K;for(x=0,E[0]=0,j=1;j<=f;j++)x=x+E[j-1]<<1,D[j]=x;for(b=0;b<p;b+=2)C=c[b+1],C!=0&&(c[b]=D[C],D[C]++)},u.H.A=function(c,f,h){const p=c.length,x=u.H.m.r;for(let j=0;j<p;j+=2)if(c[j+1]!=0){const b=j>>1,C=c[j+1],E=b<<4|C,A=f-C;let D=c[j]<<A;const w=D+(1<<A);for(;D!=w;)h[x[D]>>>15-f]=E,D++}},u.H.l=function(c,f){const h=u.H.m.r,p=15-f;for(let x=0;x<c.length;x+=2)c[x]=h[c[x]<<f-c[x+1]]>>>p},u.H.M=function(c,f,h){h<<=7&f;const p=f>>>3;c[p]|=h,c[p+1]|=h>>>8},u.H.I=function(c,f,h){h<<=7&f;const p=f>>>3;c[p]|=h,c[p+1]|=h>>>8,c[p+2]|=h>>>16},u.H.e=function(c,f,h){return(c[f>>>3]|c[1+(f>>>3)]<<8)>>>(7&f)&(1<<h)-1},u.H.b=function(c,f,h){return(c[f>>>3]|c[1+(f>>>3)]<<8|c[2+(f>>>3)]<<16)>>>(7&f)&(1<<h)-1},u.H.Z=function(c,f){return(c[f>>>3]|c[1+(f>>>3)]<<8|c[2+(f>>>3)]<<16)>>>(7&f)},u.H.i=function(c,f){return(c[f>>>3]|c[1+(f>>>3)]<<8|c[2+(f>>>3)]<<16|c[3+(f>>>3)]<<24)>>>(7&f)},u.H.m=(function(){const c=Uint16Array,f=Uint32Array;return{K:new c(16),j:new c(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new c(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new f(32),J:new c(512),_:[],h:new c(32),$:[],w:new c(32768),C:[],v:[],d:new c(32768),D:[],u:new c(512),Q:[],r:new c(32768),s:new f(286),Y:new f(30),a:new f(19),t:new f(15e3),k:new c(65536),g:new c(32768)}})(),(function(){const c=u.H.m;for(var f=0;f<32768;f++){let p=f;p=(2863311530&p)>>>1|(1431655765&p)<<1,p=(3435973836&p)>>>2|(858993459&p)<<2,p=(4042322160&p)>>>4|(252645135&p)<<4,p=(4278255360&p)>>>8|(16711935&p)<<8,c.r[f]=(p>>>16|p<<16)>>>17}function h(p,x,j){for(;x--!=0;)p.push(0,j)}for(f=0;f<32;f++)c.q[f]=c.S[f]<<3|c.T[f],c.c[f]=c.p[f]<<4|c.z[f];h(c._,144,8),h(c._,112,9),h(c._,24,7),h(c._,8,8),u.H.n(c._,9),u.H.A(c._,9,c.J),u.H.l(c._,9),h(c.$,32,5),u.H.n(c.$,5),u.H.A(c.$,5,c.h),u.H.l(c.$,5),h(c.Q,19,0),h(c.C,286,0),h(c.D,30,0),h(c.v,320,0)})(),u.H.N})();function a(u){return[1,null,3,1,2,null,4][u.ctype]*u.depth}function i(u,c,f,h,p){let x=a(c);const j=Math.ceil(h*x/8);let b,C;x=Math.ceil(x/8);let E=u[f],A=0;if(E>1&&(u[f]=[0,0,1][E-2]),E==3)for(A=x;A<j;A++)u[A+1]=u[A+1]+(u[A+1-x]>>>1)&255;for(let D=0;D<p;D++)if(b=f+D*j,C=b+D+1,E=u[C-1],A=0,E==0)for(;A<j;A++)u[b+A]=u[C+A];else if(E==1){for(;A<x;A++)u[b+A]=u[C+A];for(;A<j;A++)u[b+A]=u[C+A]+u[b+A-x]}else if(E==2)for(;A<j;A++)u[b+A]=u[C+A]+u[b+A-j];else if(E==3){for(;A<x;A++)u[b+A]=u[C+A]+(u[b+A-j]>>>1);for(;A<j;A++)u[b+A]=u[C+A]+(u[b+A-j]+u[b+A-x]>>>1)}else{for(;A<x;A++)u[b+A]=u[C+A]+l(0,u[b+A-j],0);for(;A<j;A++)u[b+A]=u[C+A]+l(u[b+A-x],u[b+A-j],u[b+A-x-j])}return u}function l(u,c,f){const h=u+c-f,p=h-u,x=h-c,j=h-f;return p*p<=x*x&&p*p<=j*j?u:x*x<=j*j?c:f}function d(u,c,f){f.width=r.readUint(u,c),c+=4,f.height=r.readUint(u,c),c+=4,f.depth=u[c],c++,f.ctype=u[c],c++,f.compress=u[c],c++,f.filter=u[c],c++,f.interlace=u[c],c++}function m(u,c,f,h,p,x,j,b,C){const E=Math.min(c,p),A=Math.min(f,x);let D=0,w=0;for(let I=0;I<A;I++)for(let k=0;k<E;k++)if(j>=0&&b>=0?(D=I*c+k<<2,w=(b+I)*p+j+k<<2):(D=(-b+I)*c-j+k<<2,w=I*p+k<<2),C==0)h[w]=u[D],h[w+1]=u[D+1],h[w+2]=u[D+2],h[w+3]=u[D+3];else if(C==1){var M=u[D+3]*.00392156862745098,v=u[D]*M,y=u[D+1]*M,z=u[D+2]*M,T=h[w+3]*(1/255),_=h[w]*T,R=h[w+1]*T,S=h[w+2]*T;const N=1-M,F=M+T*N,P=F==0?0:1/F;h[w+3]=255*F,h[w+0]=(v+_*N)*P,h[w+1]=(y+R*N)*P,h[w+2]=(z+S*N)*P}else if(C==2)M=u[D+3],v=u[D],y=u[D+1],z=u[D+2],T=h[w+3],_=h[w],R=h[w+1],S=h[w+2],M==T&&v==_&&y==R&&z==S?(h[w]=0,h[w+1]=0,h[w+2]=0,h[w+3]=0):(h[w]=v,h[w+1]=y,h[w+2]=z,h[w+3]=M);else if(C==3){if(M=u[D+3],v=u[D],y=u[D+1],z=u[D+2],T=h[w+3],_=h[w],R=h[w+1],S=h[w+2],M==T&&v==_&&y==R&&z==S)continue;if(M<220&&T>20)return!1}return!0}return{decode:function(c){const f=new Uint8Array(c);let h=8;const p=r,x=p.readUshort,j=p.readUint,b={tabs:{},frames:[]},C=new Uint8Array(f.length);let E,A=0,D=0;const w=[137,80,78,71,13,10,26,10];for(var M=0;M<8;M++)if(f[M]!=w[M])throw"The input is not a PNG file!";for(;h<f.length;){const I=p.readUint(f,h);h+=4;const k=p.readASCII(f,h,4);if(h+=4,k=="IHDR")d(f,h,b);else if(k=="iCCP"){for(var v=h;f[v]!=0;)v++;p.readASCII(f,h,v-h),f[v+1];const N=f.slice(v+2,h+I);let F=null;try{F=n(N)}catch{F=s(N)}b.tabs[k]=F}else if(k=="CgBI")b.tabs[k]=f.slice(h,h+4);else if(k=="IDAT"){for(M=0;M<I;M++)C[A+M]=f[h+M];A+=I}else if(k=="acTL")b.tabs[k]={num_frames:j(f,h),num_plays:j(f,h+4)},E=new Uint8Array(f.length);else if(k=="fcTL"){D!=0&&((S=b.frames[b.frames.length-1]).data=t(b,E.slice(0,D),S.rect.width,S.rect.height),D=0);const N={x:j(f,h+12),y:j(f,h+16),width:j(f,h+4),height:j(f,h+8)};let F=x(f,h+22);F=x(f,h+20)/(F==0?100:F);const P={rect:N,delay:Math.round(1e3*F),dispose:f[h+24],blend:f[h+25]};b.frames.push(P)}else if(k=="fdAT"){for(M=0;M<I-4;M++)E[D+M]=f[h+M+4];D+=I-4}else if(k=="pHYs")b.tabs[k]=[p.readUint(f,h),p.readUint(f,h+4),f[h+8]];else if(k=="cHRM")for(b.tabs[k]=[],M=0;M<8;M++)b.tabs[k].push(p.readUint(f,h+4*M));else if(k=="tEXt"||k=="zTXt"){b.tabs[k]??(b.tabs[k]={});var y=p.nextZero(f,h),z=p.readASCII(f,h,y-h),T=h+I-y-1;if(k=="tEXt")R=p.readASCII(f,y+1,T);else{var _=n(f.slice(y+2,y+2+T));R=p.readUTF8(_,0,_.length)}b.tabs[k][z]=R}else if(k=="iTXt"){b.tabs[k]??(b.tabs[k]={}),y=0,v=h,y=p.nextZero(f,v),z=p.readASCII(f,v,y-v);const N=f[v=y+1];var R;f[v+1],v+=2,y=p.nextZero(f,v),p.readASCII(f,v,y-v),v=y+1,y=p.nextZero(f,v),p.readUTF8(f,v,y-v),T=I-((v=y+1)-h),N==0?R=p.readUTF8(f,v,T):(_=n(f.slice(v,v+T)),R=p.readUTF8(_,0,_.length)),b.tabs[k][z]=R}else if(k=="PLTE")b.tabs[k]=p.readBytes(f,h,I);else if(k=="hIST"){const N=b.tabs.PLTE.length/3;for(b.tabs[k]=[],M=0;M<N;M++)b.tabs[k].push(x(f,h+2*M))}else if(k=="tRNS")b.ctype==3?b.tabs[k]=p.readBytes(f,h,I):b.ctype==0?b.tabs[k]=x(f,h):b.ctype==2&&(b.tabs[k]=[x(f,h),x(f,h+2),x(f,h+4)]);else if(k=="gAMA")b.tabs[k]=p.readUint(f,h)/1e5;else if(k=="sRGB")b.tabs[k]=f[h];else if(k=="bKGD")b.ctype==0||b.ctype==4?b.tabs[k]=[x(f,h)]:b.ctype==2||b.ctype==6?b.tabs[k]=[x(f,h),x(f,h+2),x(f,h+4)]:b.ctype==3&&(b.tabs[k]=f[h]);else if(k=="IEND")break;h+=I,p.readUint(f,h),h+=4}var S;return D!=0&&((S=b.frames[b.frames.length-1]).data=t(b,E.slice(0,D),S.rect.width,S.rect.height)),b.data=t(b,C,b.width,b.height),delete b.compress,delete b.interlace,delete b.filter,b},toRGBA8:function(c){const f=c.width,h=c.height;if(c.tabs.acTL==null)return[e(c.data,f,h,c).buffer];const p=[];c.frames[0].data??(c.frames[0].data=c.data);const x=f*h*4,j=new Uint8Array(x),b=new Uint8Array(x),C=new Uint8Array(x);for(let A=0;A<c.frames.length;A++){const D=c.frames[A],w=D.rect.x,M=D.rect.y,v=D.rect.width,y=D.rect.height,z=e(D.data,v,y,c);if(A!=0)for(var E=0;E<x;E++)C[E]=j[E];if(D.blend==0?m(z,v,y,j,f,h,w,M,0):D.blend==1&&m(z,v,y,j,f,h,w,M,1),p.push(j.buffer.slice(0)),D.dispose!=0){if(D.dispose==1)m(b,v,y,j,f,h,w,M,0);else if(D.dispose==2)for(E=0;E<x;E++)j[E]=C[E]}}return p},_paeth:l,_copyTile:m,_bin:r}})();(function(){const{_copyTile:r}=lt,{_bin:e}=lt,t=lt._paeth;var n={table:(function(){const v=new Uint32Array(256);for(let y=0;y<256;y++){let z=y;for(let T=0;T<8;T++)1&z?z=3988292384^z>>>1:z>>>=1;v[y]=z}return v})(),update(v,y,z,T){for(let _=0;_<T;_++)v=n.table[255&(v^y[z+_])]^v>>>8;return v},crc:(v,y,z)=>4294967295^n.update(4294967295,v,y,z)};function s(v,y,z,T){y[z]+=v[0]*T>>4,y[z+1]+=v[1]*T>>4,y[z+2]+=v[2]*T>>4,y[z+3]+=v[3]*T>>4}function a(v){return Math.max(0,Math.min(255,v))}function i(v,y){const z=v[0]-y[0],T=v[1]-y[1],_=v[2]-y[2],R=v[3]-y[3];return z*z+T*T+_*_+R*R}function l(v,y,z,T,_,R,S){S??=1;const I=T.length,k=[];for(var N=0;N<I;N++){const L=T[N];k.push([L>>>0&255,L>>>8&255,L>>>16&255,L>>>24&255])}for(N=0;N<I;N++){let L=4294967295;for(var F=0,P=0;P<I;P++){var O=i(k[N],k[P]);P!=N&&O<L&&(L=O,F=P)}}const H=new Uint32Array(_.buffer),q=new Int16Array(y*z*4),B=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(N=0;N<B.length;N++)B[N]=255*((B[N]+.5)/16-.5);for(let L=0;L<z;L++)for(let Q=0;Q<y;Q++){var U;N=4*(L*y+Q),S!=2?U=[a(v[N]+q[N]),a(v[N+1]+q[N+1]),a(v[N+2]+q[N+2]),a(v[N+3]+q[N+3])]:(O=B[4*(3&L)+(3&Q)],U=[a(v[N]+O),a(v[N+1]+O),a(v[N+2]+O),a(v[N+3]+O)]),F=0;let G=16777215;for(P=0;P<I;P++){const J=i(U,k[P]);J<G&&(G=J,F=P)}const K=k[F],V=[U[0]-K[0],U[1]-K[1],U[2]-K[2],U[3]-K[3]];S==1&&(Q!=y-1&&s(V,q,N+4,7),L!=z-1&&(Q!=0&&s(V,q,N+4*y-4,3),s(V,q,N+4*y,5),Q!=y-1&&s(V,q,N+4*y+4,1))),R[N>>2]=F,H[N>>2]=T[F]}}function d(v,y,z,T,_){_??={};const{crc:R}=n,S=e.writeUint,I=e.writeUshort,k=e.writeASCII;let N=8;const F=v.frames.length>1;let P,O=!1,H=33+(F?20:0);if(_.sRGB!=null&&(H+=13),_.pHYs!=null&&(H+=21),_.iCCP!=null&&(P=pako.deflate(_.iCCP),H+=21+P.length+4),v.ctype==3){for(var q=v.plte.length,B=0;B<q;B++)v.plte[B]>>>24!=255&&(O=!0);H+=8+3*q+4+(O?8+1*q+4:0)}for(var U=0;U<v.frames.length;U++)F&&(H+=38),H+=(K=v.frames[U]).cimg.length+12,U!=0&&(H+=4);H+=12;const L=new Uint8Array(H),Q=[137,80,78,71,13,10,26,10];for(B=0;B<8;B++)L[B]=Q[B];if(S(L,N,13),N+=4,k(L,N,"IHDR"),N+=4,S(L,N,y),N+=4,S(L,N,z),N+=4,L[N]=v.depth,N++,L[N]=v.ctype,N++,L[N]=0,N++,L[N]=0,N++,L[N]=0,N++,S(L,N,R(L,N-17,17)),N+=4,_.sRGB!=null&&(S(L,N,1),N+=4,k(L,N,"sRGB"),N+=4,L[N]=_.sRGB,N++,S(L,N,R(L,N-5,5)),N+=4),_.iCCP!=null){const V=13+P.length;S(L,N,V),N+=4,k(L,N,"iCCP"),N+=4,k(L,N,"ICC profile"),N+=11,N+=2,L.set(P,N),N+=P.length,S(L,N,R(L,N-(V+4),V+4)),N+=4}if(_.pHYs!=null&&(S(L,N,9),N+=4,k(L,N,"pHYs"),N+=4,S(L,N,_.pHYs[0]),N+=4,S(L,N,_.pHYs[1]),N+=4,L[N]=_.pHYs[2],N++,S(L,N,R(L,N-13,13)),N+=4),F&&(S(L,N,8),N+=4,k(L,N,"acTL"),N+=4,S(L,N,v.frames.length),N+=4,S(L,N,_.loop!=null?_.loop:0),N+=4,S(L,N,R(L,N-12,12)),N+=4),v.ctype==3){for(S(L,N,3*(q=v.plte.length)),N+=4,k(L,N,"PLTE"),N+=4,B=0;B<q;B++){const V=3*B,J=v.plte[B],$=255&J,Z=J>>>8&255,oe=J>>>16&255;L[N+V+0]=$,L[N+V+1]=Z,L[N+V+2]=oe}if(N+=3*q,S(L,N,R(L,N-3*q-4,3*q+4)),N+=4,O){for(S(L,N,q),N+=4,k(L,N,"tRNS"),N+=4,B=0;B<q;B++)L[N+B]=v.plte[B]>>>24&255;N+=q,S(L,N,R(L,N-q-4,q+4)),N+=4}}let G=0;for(U=0;U<v.frames.length;U++){var K=v.frames[U];F&&(S(L,N,26),N+=4,k(L,N,"fcTL"),N+=4,S(L,N,G++),N+=4,S(L,N,K.rect.width),N+=4,S(L,N,K.rect.height),N+=4,S(L,N,K.rect.x),N+=4,S(L,N,K.rect.y),N+=4,I(L,N,T[U]),N+=2,I(L,N,1e3),N+=2,L[N]=K.dispose,N++,L[N]=K.blend,N++,S(L,N,R(L,N-30,30)),N+=4);const V=K.cimg;S(L,N,(q=V.length)+(U==0?0:4)),N+=4;const J=N;k(L,N,U==0?"IDAT":"fdAT"),N+=4,U!=0&&(S(L,N,G++),N+=4),L.set(V,N),N+=q,S(L,N,R(L,J,N-J)),N+=4}return S(L,N,0),N+=4,k(L,N,"IEND"),N+=4,S(L,N,R(L,N-4,4)),N+=4,L.buffer}function m(v,y,z){for(let T=0;T<v.frames.length;T++){const _=v.frames[T];_.rect.width;const R=_.rect.height,S=new Uint8Array(R*_.bpl+R);_.cimg=h(_.img,R,_.bpp,_.bpl,S,y,z)}}function u(v,y,z,T,_){const R=_[0],S=_[1],I=_[2],k=_[3],N=_[4],F=_[5];let P=6,O=8,H=255;for(var q=0;q<v.length;q++){const le=new Uint8Array(v[q]);for(var B=le.length,U=0;U<B;U+=4)H&=le[U+3]}const L=H!=255,Q=(function(ae,fe,se,be,ye,ie){const ve=[];for(var me=0;me<ae.length;me++){const ce=new Uint8Array(ae[me]),Ce=new Uint32Array(ce.buffer);var Ne;let ke=0,Ae=0,Ee=fe,De=se,tt=be?1:0;if(me!=0){const ee=ie||be||me==1||ve[me-2].dispose!=0?1:2;let xe=0,je=1e9;for(let Se=0;Se<ee;Se++){var _e=new Uint8Array(ae[me-1-Se]);const Pe=new Uint32Array(ae[me-1-Se]);let Te=fe,ze=se,Y=-1,he=-1;for(let ge=0;ge<se;ge++)for(let ue=0;ue<fe;ue++)Ce[Re=ge*fe+ue]!=Pe[Re]&&(ue<Te&&(Te=ue),ue>Y&&(Y=ue),ge<ze&&(ze=ge),ge>he&&(he=ge));Y==-1&&(Te=ze=Y=he=0),ye&&((1&Te)==1&&Te--,(1&ze)==1&&ze--);const de=(Y-Te+1)*(he-ze+1);de<je&&(je=de,xe=Se,ke=Te,Ae=ze,Ee=Y-Te+1,De=he-ze+1)}_e=new Uint8Array(ae[me-1-xe]),xe==1&&(ve[me-1].dispose=2),Ne=new Uint8Array(Ee*De*4),r(_e,fe,se,Ne,Ee,De,-ke,-Ae,0),tt=r(ce,fe,se,Ne,Ee,De,-ke,-Ae,3)?1:0,tt==1?f(ce,fe,se,Ne,{x:ke,y:Ae,width:Ee,height:De}):r(ce,fe,se,Ne,Ee,De,-ke,-Ae,0)}else Ne=ce.slice(0);ve.push({rect:{x:ke,y:Ae,width:Ee,height:De},img:Ne,blend:tt,dispose:0})}if(be)for(me=0;me<ve.length;me++){if((Me=ve[me]).blend==1)continue;const ce=Me.rect,Ce=ve[me-1].rect,ke=Math.min(ce.x,Ce.x),Ae=Math.min(ce.y,Ce.y),Ee={x:ke,y:Ae,width:Math.max(ce.x+ce.width,Ce.x+Ce.width)-ke,height:Math.max(ce.y+ce.height,Ce.y+Ce.height)-Ae};ve[me-1].dispose=1,me-1!=0&&c(ae,fe,se,ve,me-1,Ee,ye),c(ae,fe,se,ve,me,Ee,ye)}let we=0;if(ae.length!=1)for(var Re=0;Re<ve.length;Re++){var Me;we+=(Me=ve[Re]).rect.width*Me.rect.height}return ve})(v,y,z,R,S,I),G={},K=[],V=[];if(T!=0){const le=[];for(U=0;U<Q.length;U++)le.push(Q[U].img.buffer);const ae=x((function(be){let ye=0;for(var ie=0;ie<be.length;ie++)ye+=be[ie].byteLength;const ve=new Uint8Array(ye);let me=0;for(ie=0;ie<be.length;ie++){const Ne=new Uint8Array(be[ie]),_e=Ne.length;for(let we=0;we<_e;we+=4){let Re=Ne[we],Me=Ne[we+1],ce=Ne[we+2];const Ce=Ne[we+3];Ce==0&&(Re=Me=ce=0),ve[me+we]=Re,ve[me+we+1]=Me,ve[me+we+2]=ce,ve[me+we+3]=Ce}me+=_e}return ve.buffer})(le),T);for(U=0;U<ae.plte.length;U++)K.push(ae.plte[U].est.rgba);let fe=0;for(U=0;U<Q.length;U++){const se=($=Q[U]).img.length;var J=new Uint8Array(ae.inds.buffer,fe>>2,se>>2);V.push(J);const be=new Uint8Array(ae.abuf,fe,se);F&&l($.img,$.rect.width,$.rect.height,K,be,J),$.img.set(be),fe+=se}}else for(q=0;q<Q.length;q++){var $=Q[q];const le=new Uint32Array($.img.buffer);var Z=$.rect.width;for(B=le.length,J=new Uint8Array(B),V.push(J),U=0;U<B;U++){const ae=le[U];if(U!=0&&ae==le[U-1])J[U]=J[U-1];else if(U>Z&&ae==le[U-Z])J[U]=J[U-Z];else{let fe=G[ae];if(fe==null&&(G[ae]=fe=K.length,K.push(ae),K.length>=300))break;J[U]=fe}}}const oe=K.length;for(oe<=256&&N==0&&(O=oe<=2?1:oe<=4?2:oe<=16?4:8,O=Math.max(O,k)),q=0;q<Q.length;q++){($=Q[q]).rect.x,$.rect.y,Z=$.rect.width;const le=$.rect.height;let ae=$.img;new Uint32Array(ae.buffer);let fe=4*Z,se=4;if(oe<=256&&N==0){fe=Math.ceil(O*Z/8);var re=new Uint8Array(fe*le);const be=V[q];for(let ye=0;ye<le;ye++){U=ye*fe;const ie=ye*Z;if(O==8)for(var te=0;te<Z;te++)re[U+te]=be[ie+te];else if(O==4)for(te=0;te<Z;te++)re[U+(te>>1)]|=be[ie+te]<<4-4*(1&te);else if(O==2)for(te=0;te<Z;te++)re[U+(te>>2)]|=be[ie+te]<<6-2*(3&te);else if(O==1)for(te=0;te<Z;te++)re[U+(te>>3)]|=be[ie+te]<<7-1*(7&te)}ae=re,P=3,se=1}else if(L==0&&Q.length==1){re=new Uint8Array(Z*le*3);const be=Z*le;for(U=0;U<be;U++){const ye=3*U,ie=4*U;re[ye]=ae[ie],re[ye+1]=ae[ie+1],re[ye+2]=ae[ie+2]}ae=re,P=2,se=3,fe=3*Z}$.img=ae,$.bpl=fe,$.bpp=se}return{ctype:P,depth:O,plte:K,frames:Q}}function c(v,y,z,T,_,R,S){const I=Uint8Array,k=Uint32Array,N=new I(v[_-1]),F=new k(v[_-1]),P=_+1<v.length?new I(v[_+1]):null,O=new I(v[_]),H=new k(O.buffer);let q=y,B=z,U=-1,L=-1;for(let G=0;G<R.height;G++)for(let K=0;K<R.width;K++){const V=R.x+K,J=R.y+G,$=J*y+V,Z=H[$];Z==0||T[_-1].dispose==0&&F[$]==Z&&(P==null||P[4*$+3]!=0)||(V<q&&(q=V),V>U&&(U=V),J<B&&(B=J),J>L&&(L=J))}U==-1&&(q=B=U=L=0),S&&((1&q)==1&&q--,(1&B)==1&&B--),R={x:q,y:B,width:U-q+1,height:L-B+1};const Q=T[_];Q.rect=R,Q.blend=1,Q.img=new Uint8Array(R.width*R.height*4),T[_-1].dispose==0?(r(N,y,z,Q.img,R.width,R.height,-R.x,-R.y,0),f(O,y,z,Q.img,R)):r(O,y,z,Q.img,R.width,R.height,-R.x,-R.y,0)}function f(v,y,z,T,_){r(v,y,z,T,_.width,_.height,-_.x,-_.y,2)}function h(v,y,z,T,_,R,S){const I=[];let k,N=[0,1,2,3,4];R!=-1?N=[R]:(y*T>5e5||z==1)&&(N=[0]),S&&(k={level:0});const F=hl;for(var P=0;P<N.length;P++){for(let q=0;q<y;q++)p(_,v,q,T,z,N[P]);I.push(F.deflate(_,k))}let O,H=1e9;for(P=0;P<I.length;P++)I[P].length<H&&(O=P,H=I[P].length);return I[O]}function p(v,y,z,T,_,R){const S=z*T;let I=S+z;if(v[I]=R,I++,R==0)if(T<500)for(var k=0;k<T;k++)v[I+k]=y[S+k];else v.set(new Uint8Array(y.buffer,S,T),I);else if(R==1){for(k=0;k<_;k++)v[I+k]=y[S+k];for(k=_;k<T;k++)v[I+k]=y[S+k]-y[S+k-_]+256&255}else if(z==0){for(k=0;k<_;k++)v[I+k]=y[S+k];if(R==2)for(k=_;k<T;k++)v[I+k]=y[S+k];if(R==3)for(k=_;k<T;k++)v[I+k]=y[S+k]-(y[S+k-_]>>1)+256&255;if(R==4)for(k=_;k<T;k++)v[I+k]=y[S+k]-t(y[S+k-_],0,0)+256&255}else{if(R==2)for(k=0;k<T;k++)v[I+k]=y[S+k]+256-y[S+k-T]&255;if(R==3){for(k=0;k<_;k++)v[I+k]=y[S+k]+256-(y[S+k-T]>>1)&255;for(k=_;k<T;k++)v[I+k]=y[S+k]+256-(y[S+k-T]+y[S+k-_]>>1)&255}if(R==4){for(k=0;k<_;k++)v[I+k]=y[S+k]+256-t(0,y[S+k-T],0)&255;for(k=_;k<T;k++)v[I+k]=y[S+k]+256-t(y[S+k-_],y[S+k-T],y[S+k-_-T])&255}}}function x(v,y){const z=new Uint8Array(v),T=z.slice(0),_=new Uint32Array(T.buffer),R=j(T,y),S=R[0],I=R[1],k=z.length,N=new Uint8Array(k>>2);let F;if(z.length<2e7)for(var P=0;P<k;P+=4)F=b(S,O=z[P]*(1/255),H=z[P+1]*(1/255),q=z[P+2]*(1/255),B=z[P+3]*(1/255)),N[P>>2]=F.ind,_[P>>2]=F.est.rgba;else for(P=0;P<k;P+=4){var O=z[P]*.00392156862745098,H=z[P+1]*(1/255),q=z[P+2]*(1/255),B=z[P+3]*(1/255);for(F=S;F.left;)F=C(F.est,O,H,q,B)<=0?F.left:F.right;N[P>>2]=F.ind,_[P>>2]=F.est.rgba}return{abuf:T.buffer,inds:N,plte:I}}function j(v,y,z){z??=1e-4;const T=new Uint32Array(v.buffer),_={i0:0,i1:v.length,bst:null,est:null,tdst:0,left:null,right:null};_.bst=D(v,_.i0,_.i1),_.est=w(_.bst);const R=[_];for(;R.length<y;){let I=0,k=0;for(var S=0;S<R.length;S++)R[S].est.L>I&&(I=R[S].est.L,k=S);if(I<z)break;const N=R[k],F=E(v,T,N.i0,N.i1,N.est.e,N.est.eMq255);if(N.i0>=F||N.i1<=F){N.est.L=0;continue}const P={i0:N.i0,i1:F,bst:null,est:null,tdst:0,left:null,right:null};P.bst=D(v,P.i0,P.i1),P.est=w(P.bst);const O={i0:F,i1:N.i1,bst:null,est:null,tdst:0,left:null,right:null};for(O.bst={R:[],m:[],N:N.bst.N-P.bst.N},S=0;S<16;S++)O.bst.R[S]=N.bst.R[S]-P.bst.R[S];for(S=0;S<4;S++)O.bst.m[S]=N.bst.m[S]-P.bst.m[S];O.est=w(O.bst),N.left=P,N.right=O,R[k]=P,R.push(O)}for(R.sort(((I,k)=>k.bst.N-I.bst.N)),S=0;S<R.length;S++)R[S].ind=S;return[_,R]}function b(v,y,z,T,_){if(v.left==null)return v.tdst=(function(P,O,H,q,B){const U=O-P[0],L=H-P[1],Q=q-P[2],G=B-P[3];return U*U+L*L+Q*Q+G*G})(v.est.q,y,z,T,_),v;const R=C(v.est,y,z,T,_);let S=v.left,I=v.right;R>0&&(S=v.right,I=v.left);const k=b(S,y,z,T,_);if(k.tdst<=R*R)return k;const N=b(I,y,z,T,_);return N.tdst<k.tdst?N:k}function C(v,y,z,T,_){const{e:R}=v;return R[0]*y+R[1]*z+R[2]*T+R[3]*_-v.eMq}function E(v,y,z,T,_,R){for(T-=4;z<T;){for(;A(v,z,_)<=R;)z+=4;for(;A(v,T,_)>R;)T-=4;if(z>=T)break;const S=y[z>>2];y[z>>2]=y[T>>2],y[T>>2]=S,z+=4,T-=4}for(;A(v,z,_)>R;)z-=4;return z+4}function A(v,y,z){return v[y]*z[0]+v[y+1]*z[1]+v[y+2]*z[2]+v[y+3]*z[3]}function D(v,y,z){const T=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],_=[0,0,0,0],R=z-y>>2;for(let S=y;S<z;S+=4){const I=v[S]*.00392156862745098,k=v[S+1]*(1/255),N=v[S+2]*(1/255),F=v[S+3]*(1/255);_[0]+=I,_[1]+=k,_[2]+=N,_[3]+=F,T[0]+=I*I,T[1]+=I*k,T[2]+=I*N,T[3]+=I*F,T[5]+=k*k,T[6]+=k*N,T[7]+=k*F,T[10]+=N*N,T[11]+=N*F,T[15]+=F*F}return T[4]=T[1],T[8]=T[2],T[9]=T[6],T[12]=T[3],T[13]=T[7],T[14]=T[11],{R:T,m:_,N:R}}function w(v){const{R:y}=v,{m:z}=v,{N:T}=v,_=z[0],R=z[1],S=z[2],I=z[3],k=T==0?0:1/T,N=[y[0]-_*_*k,y[1]-_*R*k,y[2]-_*S*k,y[3]-_*I*k,y[4]-R*_*k,y[5]-R*R*k,y[6]-R*S*k,y[7]-R*I*k,y[8]-S*_*k,y[9]-S*R*k,y[10]-S*S*k,y[11]-S*I*k,y[12]-I*_*k,y[13]-I*R*k,y[14]-I*S*k,y[15]-I*I*k],F=N,P=M;let O=[Math.random(),Math.random(),Math.random(),Math.random()],H=0,q=0;if(T!=0)for(let U=0;U<16&&(O=P.multVec(F,O),q=Math.sqrt(P.dot(O,O)),O=P.sml(1/q,O),!(U!=0&&Math.abs(q-H)<1e-9));U++)H=q;const B=[_*k,R*k,S*k,I*k];return{Cov:N,q:B,e:O,L:H,eMq255:P.dot(P.sml(255,B),O),eMq:P.dot(O,B),rgba:(Math.round(255*B[3])<<24|Math.round(255*B[2])<<16|Math.round(255*B[1])<<8|Math.round(255*B[0])<<0)>>>0}}var M={multVec:(v,y)=>[v[0]*y[0]+v[1]*y[1]+v[2]*y[2]+v[3]*y[3],v[4]*y[0]+v[5]*y[1]+v[6]*y[2]+v[7]*y[3],v[8]*y[0]+v[9]*y[1]+v[10]*y[2]+v[11]*y[3],v[12]*y[0]+v[13]*y[1]+v[14]*y[2]+v[15]*y[3]],dot:(v,y)=>v[0]*y[0]+v[1]*y[1]+v[2]*y[2]+v[3]*y[3],sml:(v,y)=>[v*y[0],v*y[1],v*y[2],v*y[3]]};lt.encode=function(y,z,T,_,R,S,I){_??=0,I??=!1;const k=u(y,z,T,_,[!1,!1,!1,0,I,!1]);return m(k,-1),d(k,z,T,R,S)},lt.encodeLL=function(y,z,T,_,R,S,I,k){const N={ctype:0+(_==1?0:2)+(R==0?0:4),depth:S,frames:[]},F=(_+R)*S,P=F*z;for(let O=0;O<y.length;O++)N.frames.push({rect:{x:0,y:0,width:z,height:T},img:new Uint8Array(y[O]),blend:0,dispose:1,bpp:Math.ceil(F/8),bpl:Math.ceil(P/8)});return m(N,0,!0),d(N,z,T,I,k)},lt.encode.compress=u,lt.encode.dither=l,lt.quantize=x,lt.quantize.getKDtree=j,lt.quantize.getNearest=b})();var ua={toArrayBuffer(r,e){const t=r.width,n=r.height,s=t<<2,a=r.getContext("2d").getImageData(0,0,t,n),i=new Uint32Array(a.data.buffer),l=(32*t+31)/32<<2,d=l*n,m=122+d,u=new ArrayBuffer(m),c=new DataView(u),f=1<<20;let h,p,x,j,b=f,C=0,E=0,A=0;function D(v){c.setUint16(E,v,!0),E+=2}function w(v){c.setUint32(E,v,!0),E+=4}function M(v){E+=v}D(19778),w(m),M(4),w(122),w(108),w(t),w(-n>>>0),D(1),D(32),w(3),w(d),w(2835),w(2835),M(8),w(16711680),w(65280),w(255),w(4278190080),w(1466527264),(function v(){for(;C<n&&b>0;){for(j=122+C*l,h=0;h<s;)b--,p=i[A++],x=p>>>24,c.setUint32(j+h,p<<8|x),h+=4;C++}A<i.length?(b=f,setTimeout(v,ua._dly)):e(u)})()},toBlob(r,e){this.toArrayBuffer(r,(t=>{e(new Blob([t],{type:"image/bmp"}))}))},_dly:9},Ze={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},pl={[Ze.CHROME]:16384,[Ze.FIREFOX]:11180,[Ze.DESKTOP_SAFARI]:16384,[Ze.IE]:8192,[Ze.IOS]:4096,[Ze.ETC]:8192},Zr=typeof window<"u",fa=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,hr=Zr&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),gl=(Zr||fa)&&(hr&&hr.getOriginalSymbol(window,"File")||typeof File<"u"&&File),ma=(Zr||fa)&&(hr&&hr.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function Jr(r,e,t=Date.now()){return new Promise((n=>{const s=r.split(","),a=s[0].match(/:(.*?);/)[1],i=globalThis.atob(s[1]);let l=i.length;const d=new Uint8Array(l);for(;l--;)d[l]=i.charCodeAt(l);const m=new Blob([d],{type:a});m.name=e,m.lastModified=t,n(m)}))}function ha(r){return new Promise(((e,t)=>{const n=new ma;n.onload=()=>e(n.result),n.onerror=s=>t(s),n.readAsDataURL(r)}))}function pa(r){return new Promise(((e,t)=>{const n=new Image;n.onload=()=>e(n),n.onerror=s=>t(s),n.src=r}))}function It(){if(It.cachedResult!==void 0)return It.cachedResult;let r=Ze.ETC;const{userAgent:e}=navigator;return/Chrom(e|ium)/i.test(e)?r=Ze.CHROME:/iP(ad|od|hone)/i.test(e)&&/WebKit/i.test(e)?r=Ze.IOS:/Safari/i.test(e)?r=Ze.DESKTOP_SAFARI:/Firefox/i.test(e)?r=Ze.FIREFOX:(/MSIE/i.test(e)||document.documentMode)&&(r=Ze.IE),It.cachedResult=r,It.cachedResult}function ga(r,e){const t=pl[It()];let n=r,s=e,a=n*s;const i=n>s?s/n:n/s;for(;a>t*t;){const l=(t+n)/2,d=(t+s)/2;l<d?(s=d,n=d*i):(s=l*i,n=l),a=n*s}return{width:n,height:s}}function _r(r,e){let t,n;try{if(t=new OffscreenCanvas(r,e),n=t.getContext("2d"),n===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{t=document.createElement("canvas"),n=t.getContext("2d")}return t.width=r,t.height=e,[t,n]}function va(r,e){const{width:t,height:n}=ga(r.width,r.height),[s,a]=_r(t,n);return e&&/jpe?g/.test(e)&&(a.fillStyle="white",a.fillRect(0,0,s.width,s.height)),a.drawImage(r,0,0,s.width,s.height),s}function lr(){return lr.cachedResult!==void 0||(lr.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),lr.cachedResult}function pr(r,e={}){return new Promise((function(t,n){let s,a;var i=function(){try{return a=va(s,e.fileType||r.type),t([s,a])}catch(d){return n(d)}},l=function(d){try{var m=function(u){try{throw u}catch(c){return n(c)}};try{let u;return ha(r).then((function(c){try{return u=c,pa(u).then((function(f){try{return s=f,(function(){try{return i()}catch(h){return n(h)}})()}catch(h){return m(h)}}),m)}catch(f){return m(f)}}),m)}catch(u){m(u)}}catch(u){return n(u)}};try{if(lr()||[Ze.DESKTOP_SAFARI,Ze.MOBILE_SAFARI].includes(It()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(r).then((function(d){try{return s=d,i()}catch{return l()}}),l)}catch{l()}}))}function gr(r,e,t,n,s=1){return new Promise((function(a,i){let l;if(e==="image/png"){let m,u,c;return m=r.getContext("2d"),{data:u}=m.getImageData(0,0,r.width,r.height),c=lt.encode([u.buffer],r.width,r.height,4096*s),l=new Blob([c],{type:e}),l.name=t,l.lastModified=n,d.call(this)}{let m=function(){return d.call(this)};if(e==="image/bmp")return new Promise((u=>ua.toBlob(r,u))).then(function(u){try{return l=u,l.name=t,l.lastModified=n,m.call(this)}catch(c){return i(c)}}.bind(this),i);{let u=function(){return m.call(this)};if(typeof OffscreenCanvas=="function"&&r instanceof OffscreenCanvas)return r.convertToBlob({type:e,quality:s}).then(function(c){try{return l=c,l.name=t,l.lastModified=n,u.call(this)}catch(f){return i(f)}}.bind(this),i);{let c;return c=r.toDataURL(e,s),Jr(c,t,n).then(function(f){try{return l=f,u.call(this)}catch(h){return i(h)}}.bind(this),i)}}}function d(){return a(l)}}))}function mt(r){r.width=0,r.height=0}function Lt(){return new Promise((function(r,e){let t,n,s,a;return Lt.cachedResult!==void 0?r(Lt.cachedResult):Jr("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then((function(i){try{return t=i,pr(t).then((function(l){try{return n=l[1],gr(n,t.type,t.name,t.lastModified).then((function(d){try{return s=d,mt(n),pr(s).then((function(m){try{return a=m[0],Lt.cachedResult=a.width===1&&a.height===2,r(Lt.cachedResult)}catch(u){return e(u)}}),e)}catch(m){return e(m)}}),e)}catch(d){return e(d)}}),e)}catch(l){return e(l)}}),e)}))}function xa(r){return new Promise(((e,t)=>{const n=new ma;n.onload=s=>{const a=new DataView(s.target.result);if(a.getUint16(0,!1)!=65496)return e(-2);const i=a.byteLength;let l=2;for(;l<i;){if(a.getUint16(l+2,!1)<=8)return e(-1);const d=a.getUint16(l,!1);if(l+=2,d==65505){if(a.getUint32(l+=2,!1)!=1165519206)return e(-1);const m=a.getUint16(l+=6,!1)==18761;l+=a.getUint32(l+4,m);const u=a.getUint16(l,m);l+=2;for(let c=0;c<u;c++)if(a.getUint16(l+12*c,m)==274)return e(a.getUint16(l+12*c+8,m))}else{if((65280&d)!=65280)break;l+=a.getUint16(l,!1)}}return e(-1)},n.onerror=s=>t(s),n.readAsArrayBuffer(r)}))}function ba(r,e){const{width:t}=r,{height:n}=r,{maxWidthOrHeight:s}=e;let a,i=r;return isFinite(s)&&(t>s||n>s)&&([i,a]=_r(t,n),t>n?(i.width=s,i.height=n/t*s):(i.width=t/n*s,i.height=s),a.drawImage(r,0,0,i.width,i.height),mt(r)),i}function ya(r,e){const{width:t}=r,{height:n}=r,[s,a]=_r(t,n);switch(e>4&&e<9?(s.width=n,s.height=t):(s.width=t,s.height=n),e){case 2:a.transform(-1,0,0,1,t,0);break;case 3:a.transform(-1,0,0,-1,t,n);break;case 4:a.transform(1,0,0,-1,0,n);break;case 5:a.transform(0,1,1,0,0,0);break;case 6:a.transform(0,1,-1,0,n,0);break;case 7:a.transform(0,-1,-1,0,n,t);break;case 8:a.transform(0,-1,1,0,0,t)}return a.drawImage(r,0,0,t,n),mt(r),s}function kn(r,e,t=0){return new Promise((function(n,s){let a,i,l,d,m,u,c,f,h,p,x,j,b,C,E,A,D,w,M,v;function y(T=5){if(e.signal&&e.signal.aborted)throw e.signal.reason;a+=T,e.onProgress(Math.min(a,100))}function z(T){if(e.signal&&e.signal.aborted)throw e.signal.reason;a=Math.min(Math.max(T,a),100),e.onProgress(a)}return a=t,i=e.maxIteration||10,l=1024*e.maxSizeMB*1024,y(),pr(r,e).then(function(T){try{return[,d]=T,y(),m=ba(d,e),y(),new Promise((function(_,R){var S;if(!(S=e.exifOrientation))return xa(r).then(function(k){try{return S=k,I.call(this)}catch(N){return R(N)}}.bind(this),R);function I(){return _(S)}return I.call(this)})).then(function(_){try{return u=_,y(),Lt().then(function(R){try{return c=R?m:ya(m,u),y(),f=e.initialQuality||1,h=e.fileType||r.type,gr(c,h,r.name,r.lastModified,f).then(function(S){try{{let k=function(){if(i--&&(E>l||E>b)){let F,P;return F=v?.95*M.width:M.width,P=v?.95*M.height:M.height,[D,w]=_r(F,P),w.drawImage(M,0,0,F,P),f*=h==="image/png"?.85:.95,gr(D,h,r.name,r.lastModified,f).then((function(O){try{return A=O,mt(M),M=D,E=A.size,z(Math.min(99,Math.floor((C-E)/(C-l)*100))),k}catch(H){return s(H)}}),s)}return[1]},N=function(){return mt(M),mt(D),mt(m),mt(c),mt(d),z(100),n(A)};if(p=S,y(),x=p.size>l,j=p.size>r.size,!x&&!j)return z(100),n(p);var I;return b=r.size,C=p.size,E=C,M=c,v=!e.alwaysKeepResolution&&x,(I=function(F){for(;F;){if(F.then)return void F.then(I,s);try{if(F.pop){if(F.length)return F.pop()?N.call(this):F;F=k}else F=F.call(this)}catch(P){return s(P)}}}.bind(this))(k)}}catch(k){return s(k)}}.bind(this),s)}catch(S){return s(S)}}.bind(this),s)}catch(R){return s(R)}}.bind(this),s)}catch(_){return s(_)}}.bind(this),s)}))}var vl=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`,Rr;function xl(r,e){return new Promise(((t,n)=>{Rr||(Rr=(function(i){const l=[];return typeof i=="function"?l.push(`(${i})()`):l.push(i),URL.createObjectURL(new Blob(l))})(vl));const s=new Worker(Rr);s.addEventListener("message",(function(i){if(e.signal&&e.signal.aborted)s.terminate();else if(i.data.progress===void 0){if(i.data.error)return n(new Error(i.data.error)),void s.terminate();t(i.data.file),s.terminate()}else e.onProgress(i.data.progress)})),s.addEventListener("error",n),e.signal&&e.signal.addEventListener("abort",(()=>{n(e.signal.reason),s.terminate()})),s.postMessage({file:r,imageCompressionLibUrl:e.libURL,options:{...e,onProgress:void 0,signal:void 0}})}))}function We(r,e){return new Promise((function(t,n){let s,a,i,l,d,m;if(s={...e},i=0,{onProgress:l}=s,s.maxSizeMB=s.maxSizeMB||Number.POSITIVE_INFINITY,d=typeof s.useWebWorker!="boolean"||s.useWebWorker,delete s.useWebWorker,s.onProgress=h=>{i=h,typeof l=="function"&&l(i)},!(r instanceof Blob||r instanceof gl))return n(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(r.type))return n(new Error("The file given is not an image"));if(m=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!d||typeof Worker!="function"||m)return kn(r,s).then(function(h){try{return a=h,f.call(this)}catch(p){return n(p)}}.bind(this),n);var u=function(){try{return f.call(this)}catch(h){return n(h)}}.bind(this),c=function(h){try{return kn(r,s).then((function(p){try{return a=p,u()}catch(x){return n(x)}}),n)}catch(p){return n(p)}};try{return s.libURL=s.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",xl(r,s).then((function(h){try{return a=h,u()}catch{return c()}}),c)}catch{c()}function f(){try{a.name=r.name,a.lastModified=r.lastModified}catch{}try{s.preserveExif&&r.type==="image/jpeg"&&(!s.fileType||s.fileType&&s.fileType===r.type)&&(a=da(r,a))}catch{}return t(a)}}))}We.getDataUrlFromFile=ha,We.getFilefromDataUrl=Jr,We.loadImage=pa,We.drawImageInCanvas=va,We.drawFileInCanvas=pr,We.canvasToFile=gr,We.getExifOrientation=xa,We.handleMaxWidthOrHeight=ba,We.followExifOrientation=ya,We.cleanupCanvasMemory=mt,We.isAutoOrientationInBrowser=Lt,We.approximateBelowMaximumCanvasSizeOfBrowser=ga,We.copyExifWithoutOrientation=da,We.getBrowserName=It,We.version="2.0.2";const bl=async(r,e={})=>{if(!r.type.startsWith("image/"))return r;const t={maxSizeMB:1,maxWidthOrHeight:1920,useWebWorker:!0,initialQuality:.8,fileType:"image/webp",...e};try{const n=await We(r,t);return console.log(`Original size: ${(r.size/1024/1024).toFixed(2)} MB`),console.log(`Compressed size: ${(n.size/1024/1024).toFixed(2)} MB`),n}catch(n){return console.error("Image compression failed:",n),r}},yl=(r,e=1)=>new Promise((t,n)=>{const s=document.createElement("video");s.preload="metadata",s.src=URL.createObjectURL(r),s.muted=!0,s.playsInline=!0,s.onloadedmetadata=()=>{s.currentTime=e},s.onseeked=()=>{const a=document.createElement("canvas");a.width=s.videoWidth,a.height=s.videoHeight;const i=a.getContext("2d");if(!i){URL.revokeObjectURL(s.src),n(new Error("Could not get canvas context"));return}i.drawImage(s,0,0,a.width,a.height),a.toBlob(l=>{if(!l){URL.revokeObjectURL(s.src),n(new Error("Could not create blob"));return}const d=new File([l],"thumbnail.webp",{type:"image/webp"});URL.revokeObjectURL(s.src),t(d)},"image/webp",.7)},s.onerror=a=>n(a)}),wt=async(r,e="media",t=null)=>{let n=r,s=r.name.split(".").pop(),a=null;if(r.type.startsWith("image/"))try{n=await bl(r),s="webp"}catch(u){console.error("Image compression failed, uploading original:",u)}if(r.type.startsWith("video/"))try{t?a=(await wt(t,e)).url:a=(await wt(await yl(r),e)).url}catch(u){console.error("Failed to handle video poster:",u)}const i=`${`${crypto.randomUUID()}.${s}`}`,{data:l,error:d}=await W.storage.from(e).upload(i,n);if(d)throw d;const{data:{publicUrl:m}}=W.storage.from(e).getPublicUrl(l.path);return{url:m,poster:a,name:r.name,type:r.type.startsWith("image/")?"image":r.type.startsWith("video/")?"video":r.type.startsWith("audio/")?"audio":"file",size:n.size}},Gt=async(r,e="media")=>{try{if(!r)return;const t=r.split(`/public/${e}/`);if(t.length<2)return;const n=t[1],{error:s}=await W.storage.from(e).remove([n]);s&&console.error(`Failed to delete file from storage: ${n}`,s)}catch(t){console.error("Error in deleteFileFromUrl:",t)}},Zt=async(r,e="media")=>{const t=r.filter(n=>!!n);t.length!==0&&await Promise.all(t.map(n=>Gt(n,e)))},wa=async(r,e=10)=>{const{data:t,error:n}=await W.from("users").select("*").or(`username.ilike.%${r}%,display_name.ilike.%${r}%`).limit(e);if(n)throw n;return(t||[]).map(Nt).filter(s=>s!==null)},ja=async(r,e="id")=>{let t=W.from("users").select("*");e==="id"?t=t.eq("id",r):t=t.ilike("username",r);const{data:n,error:s}=await t.maybeSingle();if(s)throw s;return n?Nt(n):null},Mh=r=>ja(r,"username"),Tt=async r=>{if(!r)return;const{error:e}=await W.from("users").update({last_seen_at:new Date().toISOString()}).eq("id",r);if(e)throw e},wl=async(r,e)=>{if(e.avatar||e.cover){const{data:s}=await W.from("users").select("avatar_url, cover_url").eq("id",r).single();s&&(e.avatar&&s.avatar_url&&s.avatar_url!==e.avatar&&s.avatar_url.includes(W.storage.from("media").getPublicUrl("").data.publicUrl)&&await Gt(s.avatar_url),e.cover&&s.cover_url&&s.cover_url!==e.cover&&s.cover_url.includes(W.storage.from("media").getPublicUrl("").data.publicUrl)&&await Gt(s.cover_url))}const t={display_name:e.name,username:e.handle,avatar_url:e.avatar,bio:e.bio,cover_url:e.cover,website:e.website,location:e.location};Object.keys(t).forEach(s=>t[s]===void 0&&delete t[s]);const{error:n}=await W.from("users").update(t).eq("id",r);if(n)throw n},jl=async(r,e)=>{const{data:t}=await W.from("follows").select("*").eq("follower_id",r).eq("following_id",e).maybeSingle();return t?(await W.from("follows").delete().eq("follower_id",r).eq("following_id",e),!1):(await W.from("follows").insert([{follower_id:r,following_id:e}]),!0)},kl=async(r,e)=>{if(!r)return!1;const{data:t}=await W.from("follows").select("*").eq("follower_id",r).eq("following_id",e).maybeSingle();return!!t},Dh=async(r,e=null,t=10)=>{let n=W.from("follows").select(`
      created_at,
      user:users!follower_id (
        id,
        username,
        display_name,
        avatar_url,
        is_verified,
        bio
      )
    `).eq("following_id",r).order("created_at",{ascending:!1}).limit(t);e&&(n=n.lt("created_at",e));const{data:s,error:a}=await n;if(a)throw a;return(s||[]).map(i=>({...Nt(i.user),followed_at:i.created_at}))},Th=async(r,e=null,t=10)=>{let n=W.from("follows").select(`
      created_at,
      user:users!following_id (
        id,
        username,
        display_name,
        avatar_url,
        is_verified,
        bio
      )
    `).eq("follower_id",r).order("created_at",{ascending:!1}).limit(t);e&&(n=n.lt("created_at",e));const{data:s,error:a}=await n;if(a)throw a;return(s||[]).map(i=>({...Nt(i.user),followed_at:i.created_at}))},Nl=async r=>{const{data:e,error:t}=await W.from("users").select("follower_count, following_count").eq("id",r).maybeSingle();return t||!e?{followers:0,following:0}:{followers:e.follower_count||0,following:e.following_count||0}};const _l=async(r=null,e=10)=>{let t=W.from("unified_posts").select("*").order("sort_timestamp",{ascending:!1}).limit(e);r&&(t=t.lt("sort_timestamp",r));const{data:n,error:s}=await t;if(s)throw s;return(n||[]).map(Mt).filter(a=>a!==null)},Ih=async r=>{const{data:e,error:t}=await W.from("posts").select(`
            *,
            user:users!user_id (
                id,
                username,
                display_name,
                avatar_url,
                is_verified,
                bio,
                location,
                website,
                follower_count,
                following_count
            ),
            communities (
                id,
                handle,
                name,
                avatar_url
            ),
            quoted_post:posts!quoted_post_id (
                *,
                user:users!user_id (
                    id,
                    username,
                    display_name,
                    avatar_url,
                    is_verified
                )
            )
        `).eq("id",r).single();if(t)throw t;return Mt(e)},Ph=async(r,e=null,t=10)=>{let n=W.from("unified_posts").select("*").or(`user_id.eq.${r},reposter_id.eq.${r}`).order("sort_timestamp",{ascending:!1}).limit(t);e&&(n=n.lt("sort_timestamp",e));const{data:s,error:a}=await n;if(a)throw a;return(s||[]).map(Mt).filter(i=>i!==null)},Lh=async r=>{const{error:e}=await W.rpc("increment_post_views",{post_id:r});e&&console.error("RPC increment_post_views failed, make sure to run the SQL migration:",e)},Cl=async({content:r,media:e=[],type:t="text",userId:n,poll:s=null,parentId:a=null,communityId:i=null})=>{const{data:l,error:d}=await W.from("posts").insert([{user_id:n,content:r,media:e,type:t,poll:s,parent_id:a,community_id:i}]).select(`
            *,
            user:users!user_id (
                id,
                username,
                display_name,
                avatar_url,
                is_verified
            ),
            communities:community_id (
                id,
                handle,
                name,
                avatar_url
            )
        `);if(d)throw d;return Mt(l?.[0])},zl=async r=>{const{data:e}=await W.from("posts").select("media").eq("id",r).single();if(e?.media&&Array.isArray(e.media)){const n=[];e.media.forEach(s=>{s.url&&n.push(s.url),s.poster&&n.push(s.poster)}),n.length>0&&await Zt(n)}const{error:t}=await W.from("posts").delete().eq("id",r);if(t)throw t},Fh=async r=>{const{data:e}=await W.from("comments").select("media").eq("id",r).single();if(e?.media&&Array.isArray(e.media)){const n=[];e.media.forEach(s=>{s.url&&n.push(s.url),s.poster&&n.push(s.poster)}),n.length>0&&await Zt(n)}const{error:t}=await W.from("comments").delete().eq("id",r);if(t)throw t},Sl=async(r,e)=>{const{error:t}=await W.from("posts").update(e).eq("id",r);if(t)throw t},Oh=async(r,e)=>{const{error:t}=await W.from("comments").update(e).eq("id",r);if(t)throw t},Uh=async(r,e=null,t=10,n=null)=>{let s=W.from("comments").select(`
            *,
            user:users!user_id (
                id,
                username,
                display_name,
                avatar_url,
                is_verified
            )
        `).eq("post_id",r).order("created_at",{ascending:!0}).limit(t);n?s=s.eq("parent_id",n):s=s.is("parent_id",null),e&&(s=s.gt("created_at",e));const{data:a,error:i}=await s;if(i)throw i;return(a||[]).map(oa).filter(l=>l!==null)},qh=async(r,e,t,n=[],s=null)=>{const{data:a,error:i}=await W.from("comments").insert([{post_id:r,user_id:e,content:t,media:n,parent_id:s}]).select(`
            *,
            user:users!user_id (
                id,
                username,
                display_name,
                avatar_url,
                is_verified
            )
        `);if(i)throw i;return oa(a?.[0])},Bh=async(r,e)=>{if(!r||!e)return!1;const{data:t}=await W.from("likes").select("post_id").eq("post_id",r).eq("user_id",e).limit(1);return t&&t.length>0?(await W.from("likes").delete().eq("post_id",r).eq("user_id",e),!1):(await W.from("likes").insert([{post_id:r,user_id:e}]),!0)},Hh=async(r,e)=>{if(!e||!r)return!1;const{data:t,error:n}=await W.from("likes").select("post_id").eq("post_id",r).eq("user_id",e).limit(1);return n?(console.error("Error checking like status:",n),!1):t&&t.length>0},Wh=async(r,e)=>{if(!r||!e)return!1;const{data:t}=await W.from("reposts").select("post_id").eq("post_id",r).eq("user_id",e).limit(1);return t&&t.length>0?(await W.from("reposts").delete().eq("post_id",r).eq("user_id",e),!1):(await W.from("reposts").insert([{post_id:r,user_id:e}]),!0)},Vh=async(r,e)=>{if(!e||!r)return!1;const{data:t,error:n}=await W.from("reposts").select("post_id").eq("post_id",r).eq("user_id",e).limit(1);return n?(console.error("Error checking repost status:",n),!1):t&&t.length>0},Qh=async(r,e=null,t=10,n=!1)=>{let s=W.from("unified_posts").select("*").ilike("content",`%${r}%`);n&&(s=s.not("community_id","is",null).is("reposter_id",null)),s=s.order("sort_timestamp",{ascending:!1}).limit(t),e&&(s=s.lt("sort_timestamp",e));const{data:a,error:i}=await s;if(i)throw i;return(a||[]).map(Mt).filter(l=>l!==null)},Kh=async(r=null,e=10)=>{let t=W.from("unified_posts").select("*").not("community_id","is",null).is("reposter_id",null).order("sort_timestamp",{ascending:!1}).limit(e);r&&(t=t.lt("sort_timestamp",r));const{data:n,error:s}=await t;if(s)throw s;return(n||[]).map(Mt).filter(a=>a!==null)},Yh=async(r=null,e=10)=>{let t=W.from("unified_posts").select("*").eq("type","video").order("sort_timestamp",{ascending:!1}).limit(e);r&&(t=t.lt("sort_timestamp",r));const{data:n,error:s}=await t;if(s)throw s;return(n||[]).map(Mt).filter(a=>a!==null)},Xh=async(r,e)=>{const{data:t}=await W.from("conversation_participants").select("conversation_id, conversation:conversations!inner(is_group)").eq("user_id",r).eq("conversation.is_group",!1),n=(t||[]).map(l=>l.conversation_id),{data:s}=await W.from("conversation_participants").select("conversation_id").eq("user_id",e).in("conversation_id",n).maybeSingle();if(s)return s.conversation_id;const{data:a,error:i}=await W.from("conversations").insert({is_group:!1}).select().single();if(i)throw i;return await W.from("conversation_participants").insert([{conversation_id:a.id,user_id:r},{conversation_id:a.id,user_id:e}]),a.id},Al=async(r,e,t,n=null)=>{const{data:s,error:a}=await W.from("conversations").insert({is_group:!0,name:e,avatar_url:n,creator_id:r}).select().single();if(a)throw a;const i=s.id,l=Array.from(new Set([r,...t])).map(m=>({conversation_id:i,user_id:m})),{error:d}=await W.from("conversation_participants").insert(l);if(d)throw d;return i},El=async(r,e)=>{const t=e.map(s=>({conversation_id:r,user_id:s})),{error:n}=await W.from("conversation_participants").insert(t);if(n)throw n},Rl=async r=>{if(!r)return 0;const{data:e}=await W.from("conversation_participants").select("conversation_id").eq("user_id",r),t=e?.map(a=>a.conversation_id)||[];if(t.length===0)return 0;const{count:n,error:s}=await W.from("messages").select("*",{count:"exact",head:!0}).eq("is_read",!1).neq("sender_id",r).in("conversation_id",t);if(s)throw s;return n||0},Ml=async(r,e)=>{if(!r)return;const{error:t}=await W.rpc("mark_messages_read",{p_conversation_id:r});if(t)throw t},Dl=async r=>{if(!r)return[];const{data:e,error:t}=await W.from("conversation_participants").select(`
            conversation:conversations (
                id,
                is_group,
                name,
                avatar_url,
                creator_id,
                last_message_at,
                last_message_content,
                participants:conversation_participants (
                    user:users (
                        id,
                        username,
                        display_name,
                        avatar_url,
                        last_seen_at
                    )
                ),
                messages (
                    id,
                    is_read,
                    sender_id
                )
            )
        `).eq("user_id",r);if(t)throw t;return(e||[]).map(n=>dl(n,r)).filter(n=>n!==null).sort((n,s)=>n.lastMessageAt?s.lastMessageAt?new Date(s.lastMessageAt).getTime()-new Date(n.lastMessageAt).getTime():-1:1)},Tl=async(r,e=null,t=20)=>{let n=W.from("messages").select(`
            *,
            sender:users!sender_id (
                id,
                username,
                display_name,
                avatar_url
            )
        `).eq("conversation_id",r).order("created_at",{ascending:!1}).limit(t);e&&(n=n.lt("created_at",e));const{data:s,error:a}=await n;if(a)throw a;return(s||[]).map(ca).filter(i=>i!==null)},Il=async r=>{const{data:e,error:t}=await W.from("message_reactions").select("*, message:messages!inner(conversation_id)").eq("message.conversation_id",r);if(t)throw t;return(e||[]).map(n=>({id:n.id,message_id:n.message_id,user_id:n.user_id,emoji:n.emoji,created_at:n.created_at}))},Pl=async(r,e,t)=>{const{data:n}=await W.from("message_reactions").select("*").eq("message_id",r).eq("user_id",e).maybeSingle();return n?n.emoji===t?(await W.from("message_reactions").delete().eq("id",n.id),{action:"removed",emoji:t}):(await W.from("message_reactions").update({emoji:t}).eq("id",n.id),{action:"updated",emoji:t}):(await W.from("message_reactions").insert([{message_id:r,user_id:e,emoji:t}]),{action:"added",emoji:t})},Ll=async(r,e,t,n="text",s=[],a=null)=>{const{data:i,error:l}=await W.from("messages").insert([{conversation_id:r,sender_id:e,content:t,type:n,media:s,reply_to_id:a}]).select();if(l)throw l;return await W.from("conversations").update({last_message_at:new Date().toISOString(),last_message_content:n==="image"||s&&s.length>0?"Sent an image":t}).eq("id",r),ca(i?.[0])},ka=async r=>{const{data:e}=await W.from("messages").select("media").eq("conversation_id",r);if(e&&e.length>0){const n=[];e.forEach(s=>{s.media&&(Array.isArray(s.media)?n.push(...s.media):n.push(s.media))}),n.length>0&&await Zt(n)}const{error:t}=await W.from("conversations").delete().eq("id",r);if(t)throw t},Fl=async(r,e)=>{const{error:t}=await W.from("conversation_participants").delete().eq("conversation_id",r).eq("user_id",e);if(t)throw t},Ol=async r=>{const{data:e}=await W.from("messages").select("media").eq("id",r).single();e?.media&&Array.isArray(e.media)?await Zt(e.media):e?.media&&typeof e.media=="string"&&await Zt([e.media]);const{error:t}=await W.from("messages").delete().eq("id",r);if(t)throw t},Ul=async r=>{const{data:e,error:t}=await W.from("conversation_participants").select(`
            user:users (
                id,
                username,
                display_name,
                avatar_url
            )
        `).eq("conversation_id",r);if(t)throw t;return(e||[]).map(n=>n.user)},ql=async(r,e)=>{const{data:t,error:n}=await W.from("conversations").update(e).eq("id",r).select().single();if(n)throw n;return t},Gh=async(r,e=null,t=10)=>{if(!r)return[];let n=W.from("notifications").select(`
            *,
            actor:users!actor_id (
                username,
                avatar_url
            )
        `).eq("recipient_id",r).order("created_at",{ascending:!1}).limit(t);e&&(n=n.lt("created_at",e));const{data:s,error:a}=await n;if(a)throw a;return(s||[]).map(cl).filter(i=>i!==null)},Zh=async r=>{const{error:e}=await W.from("notifications").update({is_read:!0}).eq("recipient_id",r).eq("is_read",!1);if(e)throw e},Bl=async r=>{if(!r)return 0;const{count:e,error:t}=await W.from("notifications").select("*",{count:"exact",head:!0}).eq("recipient_id",r).eq("is_read",!1);if(t)throw t;return e||0},Jh=async(r=null,e=10)=>{let t=W.from("stories").select(`
            *,
            user:users!user_id (
                id,
                username,
                display_name,
                avatar_url,
                is_verified
            )
        `).gt("expires_at",new Date().toISOString()).order("created_at",{ascending:!1}).limit(e);r&&(t=t.lt("created_at",r));const{data:n,error:s}=await t;if(s)throw s;return(n||[]).map(la).filter(a=>a!==null)},Hl=async(r,e,t="image")=>{const{data:n,error:s}=await W.from("stories").insert([{user_id:r,media_url:e,type:t}]).select(`
            *,
            user:users!user_id (
                id,
                username,
                display_name,
                avatar_url,
                is_verified
            )
        `);if(s)throw s;return la(n?.[0])},$h=async(r=null,e=10)=>{let t=W.from("communities").select("*").order("created_at",{ascending:!1}).limit(e);r&&(t=t.lt("created_at",r));const{data:n,error:s}=await t;if(s)throw s;return(n||[]).map(rr).filter(a=>a!==null)},ep=async r=>{const{data:e,error:t}=await W.from("communities").select("*").eq("handle",r).single();if(t)throw t;return rr(e)},tp=async(r,e=null,t=10)=>{let n=W.from("unified_posts").select("*").eq("community_id",r).is("reposter_id",null).order("sort_timestamp",{ascending:!1}).limit(t);e&&(n=n.lt("sort_timestamp",e));const{data:s,error:a}=await n;if(a)throw a;return(s||[]).map(Mt).filter(i=>i!==null)},Wl=async(r,e)=>{const{data:t}=await W.from("community_members").select("*").eq("community_id",r).eq("user_id",e).maybeSingle();if(t){const{error:n}=await W.from("community_members").delete().eq("community_id",r).eq("user_id",e);if(n)throw n;return!1}else{const{error:n}=await W.from("community_members").insert([{community_id:r,user_id:e}]);if(n)throw n;return!0}},Vl=async(r,e)=>{if(!e)return null;const{data:t}=await W.from("community_members").select("*").eq("community_id",r).eq("user_id",e).maybeSingle();return t},Ql=async r=>{if(!r)return[];const{data:e,error:t}=await W.from("community_members").select(`
      role,
      communities (*)
    `).eq("user_id",r);if(t)throw t;return(e||[]).map(n=>({...rr(n.communities),myRole:n.role}))},Kl=async r=>{const{data:e,error:t}=await W.from("communities").insert([r]).select().single();if(t)throw t;const{error:n}=await W.from("community_members").insert([{community_id:e.id,user_id:r.creator_id,role:"admin"}]);if(n)throw n;return rr(e)},Yl=async(r,e)=>{if(e.avatar_url||e.cover_url){const{data:s}=await W.from("communities").select("avatar_url, cover_url").eq("id",r).single();s&&(e.avatar_url&&s.avatar_url&&s.avatar_url!==e.avatar_url&&s.avatar_url.includes(W.storage.from("media").getPublicUrl("").data.publicUrl)&&await Gt(s.avatar_url),e.cover_url&&s.cover_url&&s.cover_url!==e.cover_url&&s.cover_url.includes(W.storage.from("media").getPublicUrl("").data.publicUrl)&&await Gt(s.cover_url))}const{data:t,error:n}=await W.from("communities").update(e).eq("id",r).select().single();if(n)throw n;return rr(t)},Xl=async(r,e="")=>{let t=W.from("community_members").select(`
      role,
      user_id,
      users:user_id!inner (
        id,
        username,
        display_name,
        avatar_url,
        is_verified
      )
    `).eq("community_id",r);e&&(t=t.or(`username.ilike.%${e}%,display_name.ilike.%${e}%`,{foreignTable:"users"}));const{data:n,error:s}=await t.limit(20);if(s)throw s;return(n||[]).map(a=>({role:a.role,userId:a.user_id,user:a.users}))},Gl=async(r,e,t)=>{const{data:n,error:s}=await W.from("community_members").update({role:t}).eq("community_id",r).eq("user_id",e).select().single();if(s)throw s;return n},Zl=async(r=5)=>{const{data:e,error:t}=await W.from("hashtags").select("*").order("usage_count",{ascending:!1}).limit(r);if(t)throw t;return e||[]},Jl=async r=>{try{const e=`https://api.allorigins.win/raw?url=${encodeURIComponent(r)}`,t=await fetch(e);if(!t.ok)throw new Error("Failed to fetch preview");const n=await t.text(),s=new DOMParser().parseFromString(n,"text/html"),a=i=>s.querySelector(`meta[property="${i}"]`)?.getAttribute("content")||s.querySelector(`meta[name="${i}"]`)?.getAttribute("content");return{title:a("og:title")||s.title||r,description:a("og:description")||a("description")||"",image:a("og:image")||a("twitter:image")||"",siteName:a("og:site_name")||new URL(r).hostname,url:r}}catch(e){return console.error("Link preview error:",e),null}},rp=async r=>{if(!r)return null;try{const{data:e}=await W.from("link_previews").select("*").eq("url",r).maybeSingle();if(e)return W.from("link_previews").update({last_used_at:new Date().toISOString()}).eq("url",r).then(()=>{}),{title:e.title,description:e.description,image:e.image,siteName:e.site_name,url:e.url};const t=await Jl(r);return t?(W.from("link_previews").insert([{url:t.url,title:t.title,description:t.description,image:t.image,site_name:t.siteName}]).then(({error:n})=>{n&&console.error("Cache save error:",n)}),t):null}catch(e){return console.error("Link preview cache error:",e),null}};var o=Xr(Vi(),1),Na=(0,g.createContext)(void 0);const $l=({children:r})=>{const[e,t]=(0,g.useState)(null),[n,s]=(0,g.useState)(null),[a,i]=(0,g.useState)(!0),l=(0,g.useCallback)(async h=>{try{const p=await ja(h.id);t(p||{id:h.id,name:h.email?.split("@")[0]||"User",handle:h.email?.split("@")[0]||"user",avatar:"/default-avatar.webp",verified:!1,cover:"/welcome-banner.webp",bio:null,location:null,website:null,follower_count:0,following_count:0,lastSeen:new Date().toISOString()})}catch(p){console.error("Error fetching user profile:",p)}finally{i(!1)}},[]);(0,g.useEffect)(()=>{if(!e?.id)return;Tt(e.id);const h=setInterval(()=>Tt(e.id),3e4),p=()=>{document.visibilityState==="visible"&&Tt(e.id)};return window.addEventListener("visibilitychange",p),window.addEventListener("beforeunload",()=>Tt(e.id)),()=>{clearInterval(h),window.removeEventListener("visibilitychange",p),window.removeEventListener("beforeunload",()=>Tt(e.id))}},[e?.id]),(0,g.useEffect)(()=>{W.auth.getSession().then(({data:{session:p}})=>{p?l(p.user):i(!1)});const{data:{subscription:h}}=W.auth.onAuthStateChange((p,x)=>{x?l(x.user):(t(null),i(!1))});return()=>h.unsubscribe()},[l]);const d=(0,g.useCallback)(async({email:h,password:p})=>{const{data:x,error:j}=await W.auth.signInWithPassword({email:h,password:p});if(j)throw j;return s(null),x},[]),m=(0,g.useCallback)(async({email:h,password:p,username:x,name:j})=>{const{data:{user:b},error:C}=await W.auth.signUp({email:h,password:p,options:{data:{username:x.toLowerCase(),name:j}}});if(C)throw C;return s(null),b},[]),u=(0,g.useCallback)(async()=>{await W.auth.signOut(),t(null),s(null)},[]),c=(0,g.useCallback)(async h=>{e&&(await wl(e.id,h),await l(e))},[e,l]),f=(0,g.useMemo)(()=>({currentUser:e,authMode:n,setAuthMode:s,login:d,signup:m,logout:u,updateProfile:c,loading:a}),[e,n,d,m,u,c,a]);return(0,o.jsx)(Na.Provider,{value:f,children:!a&&r})},Xe=()=>{const r=(0,g.useContext)(Na);if(!r)throw new Error("useAuth must be used within an AuthProvider");return r};var ec=ne(),_a=(0,g.createContext)(void 0);const tc=r=>{const e=(0,ec.c)(10),{children:t}=r,{currentUser:n}=Xe();let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s=new Set,e[0]=s):s=e[0];const[a,i]=(0,g.useState)(s);let l;e[1]!==n?(l=()=>{if(!n?.id)return;const f=W.channel("global_presence",{config:{presence:{key:n.id}}});return f.on("presence",{event:"sync"},()=>{const h=f.presenceState(),p=new Set;Object.keys(h).forEach(x=>p.add(x)),i(p)}).subscribe(async h=>{h==="SUBSCRIBED"&&(await f.track({userId:n.id,online_at:new Date().toISOString()}),Tt(n.id))}),()=>{n?.id&&Tt(n.id),W.removeChannel(f),i(new Set)}},e[1]=n,e[2]=l):l=e[2];const d=n?.id;let m;e[3]!==d?(m=[d],e[3]=d,e[4]=m):m=e[4],(0,g.useEffect)(l,m);let u;e[5]!==a?(u={onlineUsers:a},e[5]=a,e[6]=u):u=e[6];let c;return e[7]!==t||e[8]!==u?(c=(0,o.jsx)(_a.Provider,{value:u,children:t}),e[7]=t,e[8]=u,e[9]=c):c=e[9],c},rc=()=>{const r=(0,g.useContext)(_a);if(!r)throw new Error("usePresence must be used within a PresenceProvider");return r};var nc=ne(),Ca=(0,g.createContext)(void 0);const sc=r=>{const e=(0,nc.c)(17),{children:t}=r,[n,s]=(0,g.useState)(ac),[a,i]=(0,g.useState)(ic),[l,d]=(0,g.useState)(oc);let m,u;e[0]!==n?(m=()=>{localStorage.setItem("theme",n?"dark":"light"),n?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},u=[n],e[0]=n,e[1]=m,e[2]=u):(m=e[1],u=e[2]),(0,g.useEffect)(m,u);let c,f;e[3]!==a?(c=()=>{localStorage.setItem("font-size",a),document.documentElement.style.setProperty("--app-font-size",{small:"14px",base:"16px",large:"18px"}[a])},f=[a],e[3]=a,e[4]=c,e[5]=f):(c=e[4],f=e[5]),(0,g.useEffect)(c,f);let h,p;e[6]!==l?(h=()=>{localStorage.setItem("data-saver",String(l))},p=[l],e[6]=l,e[7]=h,e[8]=p):(h=e[7],p=e[8]),(0,g.useEffect)(h,p);let x;e[9]===Symbol.for("react.memo_cache_sentinel")?(x=()=>s(lc),e[9]=x):x=e[9];const j=x;let b;e[10]!==n||e[11]!==l||e[12]!==a?(b={darkMode:n,setDarkMode:s,toggleDarkMode:j,fontSize:a,setFontSize:i,dataSaver:l,setDataSaver:d},e[10]=n,e[11]=l,e[12]=a,e[13]=b):b=e[13];const C=b;let E;return e[14]!==t||e[15]!==C?(E=(0,o.jsx)(Ca.Provider,{value:C,children:t}),e[14]=t,e[15]=C,e[16]=E):E=e[16],E},$r=()=>{const r=(0,g.useContext)(Ca);if(!r)throw new Error("useTheme must be used within a ThemeProvider");return r};function ac(){const r=localStorage.getItem("theme");return r==="dark"||!r&&window.matchMedia("(prefers-color-scheme: dark)").matches}function ic(){return localStorage.getItem("font-size")||"base"}function oc(){return localStorage.getItem("data-saver")==="true"}function lc(r){return!r}var cc=Xr(os(),1);function dc(r){if(!r||typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",e.appendChild(t),t.styleSheet?t.styleSheet.cssText=r:t.appendChild(document.createTextNode(r))}var uc=r=>{switch(r){case"success":return hc;case"info":return gc;case"warning":return pc;case"error":return vc;default:return null}},fc=Array(12).fill(0),mc=({visible:r,className:e})=>g.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":r},g.createElement("div",{className:"sonner-spinner"},fc.map((t,n)=>g.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),hc=g.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},g.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),pc=g.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},g.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),gc=g.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},g.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),vc=g.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},g.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),xc=g.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},g.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),g.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),bc=()=>{const[r,e]=g.useState(document.hidden);return g.useEffect(()=>{const t=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",t),()=>window.removeEventListener("visibilitychange",t)},[]),r},Ur=1,yc=class{constructor(){this.subscribe=r=>(this.subscribers.push(r),()=>{const e=this.subscribers.indexOf(r);this.subscribers.splice(e,1)}),this.publish=r=>{this.subscribers.forEach(e=>e(r))},this.addToast=r=>{this.publish(r),this.toasts=[...this.toasts,r]},this.create=r=>{var e;const{message:t,...n}=r,s=typeof r?.id=="number"||((e=r.id)==null?void 0:e.length)>0?r.id:Ur++,a=this.toasts.find(l=>l.id===s),i=r.dismissible===void 0?!0:r.dismissible;return this.dismissedToasts.has(s)&&this.dismissedToasts.delete(s),a?this.toasts=this.toasts.map(l=>l.id===s?(this.publish({...l,...r,id:s,title:t}),{...l,...r,id:s,dismissible:i,title:t}):l):this.addToast({title:t,...n,dismissible:i,id:s}),s},this.dismiss=r=>(r?(this.dismissedToasts.add(r),requestAnimationFrame(()=>this.subscribers.forEach(e=>e({id:r,dismiss:!0})))):this.toasts.forEach(e=>{this.subscribers.forEach(t=>t({id:e.id,dismiss:!0}))}),r),this.message=(r,e)=>this.create({...e,message:r}),this.error=(r,e)=>this.create({...e,message:r,type:"error"}),this.success=(r,e)=>this.create({...e,type:"success",message:r}),this.info=(r,e)=>this.create({...e,type:"info",message:r}),this.warning=(r,e)=>this.create({...e,type:"warning",message:r}),this.loading=(r,e)=>this.create({...e,type:"loading",message:r}),this.promise=(r,e)=>{if(!e)return;let t;e.loading!==void 0&&(t=this.create({...e,promise:r,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));const n=Promise.resolve(r instanceof Function?r():r);let s=t!==void 0,a;const i=n.then(async d=>{if(a=["resolve",d],g.isValidElement(d))s=!1,this.create({id:t,type:"default",message:d});else if(jc(d)&&!d.ok){s=!1;const m=typeof e.error=="function"?await e.error(`HTTP error! status: ${d.status}`):e.error,u=typeof e.description=="function"?await e.description(`HTTP error! status: ${d.status}`):e.description,c=typeof m=="object"&&!g.isValidElement(m)?m:{message:m};this.create({id:t,type:"error",description:u,...c})}else if(d instanceof Error){s=!1;const m=typeof e.error=="function"?await e.error(d):e.error,u=typeof e.description=="function"?await e.description(d):e.description,c=typeof m=="object"&&!g.isValidElement(m)?m:{message:m};this.create({id:t,type:"error",description:u,...c})}else if(e.success!==void 0){s=!1;const m=typeof e.success=="function"?await e.success(d):e.success,u=typeof e.description=="function"?await e.description(d):e.description,c=typeof m=="object"&&!g.isValidElement(m)?m:{message:m};this.create({id:t,type:"success",description:u,...c})}}).catch(async d=>{if(a=["reject",d],e.error!==void 0){s=!1;const m=typeof e.error=="function"?await e.error(d):e.error,u=typeof e.description=="function"?await e.description(d):e.description,c=typeof m=="object"&&!g.isValidElement(m)?m:{message:m};this.create({id:t,type:"error",description:u,...c})}}).finally(()=>{s&&(this.dismiss(t),t=void 0),e.finally==null||e.finally.call(e)}),l=()=>new Promise((d,m)=>i.then(()=>a[0]==="reject"?m(a[1]):d(a[1])).catch(m));return typeof t!="string"&&typeof t!="number"?{unwrap:l}:Object.assign(t,{unwrap:l})},this.custom=(r,e)=>{const t=e?.id||Ur++;return this.create({jsx:r(t),id:t,...e}),t},this.getActiveToasts=()=>this.toasts.filter(r=>!this.dismissedToasts.has(r.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Ge=new yc,wc=(r,e)=>{const t=e?.id||Ur++;return Ge.addToast({title:r,...e,id:t}),t},jc=r=>r&&typeof r=="object"&&"ok"in r&&typeof r.ok=="boolean"&&"status"in r&&typeof r.status=="number",kc=wc,Nc=()=>Ge.toasts,_c=()=>Ge.getActiveToasts(),Mr=Object.assign(kc,{success:Ge.success,info:Ge.info,warning:Ge.warning,error:Ge.error,custom:Ge.custom,message:Ge.message,promise:Ge.promise,dismiss:Ge.dismiss,loading:Ge.loading},{getHistory:Nc,getToasts:_c});dc("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function ir(r){return r.label!==void 0}var Cc=3,zc="24px",Sc="16px",Nn=4e3,Ac=356,Ec=14,Rc=45,Mc=200;function ft(...r){return r.filter(Boolean).join(" ")}function Dc(r){const[e,t]=r.split("-"),n=[];return e&&n.push(e),t&&n.push(t),n}var Tc=r=>{var e,t,n,s,a,i,l,d,m;const{invert:u,toast:c,unstyled:f,interacting:h,setHeights:p,visibleToasts:x,heights:j,index:b,toasts:C,expanded:E,removeToast:A,defaultRichColors:D,closeButton:w,style:M,cancelButtonStyle:v,actionButtonStyle:y,className:z="",descriptionClassName:T="",duration:_,position:R,gap:S,expandByDefault:I,classNames:k,icons:N,closeButtonAriaLabel:F="Close toast"}=r,[P,O]=g.useState(null),[H,q]=g.useState(null),[B,U]=g.useState(!1),[L,Q]=g.useState(!1),[G,K]=g.useState(!1),[V,J]=g.useState(!1),[$,Z]=g.useState(!1),[oe,re]=g.useState(0),[te,le]=g.useState(0),ae=g.useRef(c.duration||_||Nn),fe=g.useRef(null),se=g.useRef(null),be=b===0,ye=b+1<=x,ie=c.type,ve=c.dismissible!==!1,me=c.className||"",Ne=c.descriptionClassName||"",_e=g.useMemo(()=>j.findIndex(Y=>Y.toastId===c.id)||0,[j,c.id]),we=g.useMemo(()=>{var Y;return(Y=c.closeButton)!=null?Y:w},[c.closeButton,w]),Re=g.useMemo(()=>c.duration||_||Nn,[c.duration,_]),Me=g.useRef(0),ce=g.useRef(0),Ce=g.useRef(0),ke=g.useRef(null),[Ae,Ee]=R.split("-"),De=g.useMemo(()=>j.reduce((Y,he,de)=>de>=_e?Y:Y+he.height,0),[j,_e]),tt=bc(),ee=c.invert||u,xe=ie==="loading";ce.current=g.useMemo(()=>_e*S+De,[_e,De]),g.useEffect(()=>{ae.current=Re},[Re]),g.useEffect(()=>{U(!0)},[]),g.useEffect(()=>{const Y=se.current;if(Y){const he=Y.getBoundingClientRect().height;return le(he),p(de=>[{toastId:c.id,height:he,position:c.position},...de]),()=>p(de=>de.filter(ge=>ge.toastId!==c.id))}},[p,c.id]),g.useLayoutEffect(()=>{if(!B)return;const Y=se.current,he=Y.style.height;Y.style.height="auto";const de=Y.getBoundingClientRect().height;Y.style.height=he,le(de),p(ge=>ge.find(ue=>ue.toastId===c.id)?ge.map(ue=>ue.toastId===c.id?{...ue,height:de}:ue):[{toastId:c.id,height:de,position:c.position},...ge])},[B,c.title,c.description,p,c.id,c.jsx,c.action,c.cancel]);const je=g.useCallback(()=>{Q(!0),re(ce.current),p(Y=>Y.filter(he=>he.toastId!==c.id)),setTimeout(()=>{A(c)},Mc)},[c,A,p,ce]);g.useEffect(()=>{if(c.promise&&ie==="loading"||c.duration===1/0||c.type==="loading")return;let Y;return E||h||tt?(()=>{if(Ce.current<Me.current){const ge=new Date().getTime()-Me.current;ae.current=ae.current-ge}Ce.current=new Date().getTime()})():ae.current!==1/0&&(Me.current=new Date().getTime(),Y=setTimeout(()=>{c.onAutoClose==null||c.onAutoClose.call(c,c),je()},ae.current)),()=>clearTimeout(Y)},[E,h,c,ie,tt,je]),g.useEffect(()=>{c.delete&&(je(),c.onDismiss==null||c.onDismiss.call(c,c))},[je,c.delete]);function Se(){var Y;if(N?.loading){var he;return g.createElement("div",{className:ft(k?.loader,c==null||(he=c.classNames)==null?void 0:he.loader,"sonner-loader"),"data-visible":ie==="loading"},N.loading)}return g.createElement(mc,{className:ft(k?.loader,c==null||(Y=c.classNames)==null?void 0:Y.loader),visible:ie==="loading"})}const Pe=c.icon||N?.[ie]||uc(ie);var Te,ze;return g.createElement("li",{tabIndex:0,ref:se,className:ft(z,me,k?.toast,c==null||(e=c.classNames)==null?void 0:e.toast,k?.default,k?.[ie],c==null||(t=c.classNames)==null?void 0:t[ie]),"data-sonner-toast":"","data-rich-colors":(Te=c.richColors)!=null?Te:D,"data-styled":!(c.jsx||c.unstyled||f),"data-mounted":B,"data-promise":!!c.promise,"data-swiped":$,"data-removed":L,"data-visible":ye,"data-y-position":Ae,"data-x-position":Ee,"data-index":b,"data-front":be,"data-swiping":G,"data-dismissible":ve,"data-type":ie,"data-invert":ee,"data-swipe-out":V,"data-swipe-direction":H,"data-expanded":!!(E||I&&B),"data-testid":c.testId,style:{"--index":b,"--toasts-before":b,"--z-index":C.length-b,"--offset":`${L?oe:ce.current}px`,"--initial-height":I?"auto":`${te}px`,...M,...c.style},onDragEnd:()=>{K(!1),O(null),ke.current=null},onPointerDown:Y=>{Y.button!==2&&(xe||!ve||(fe.current=new Date,re(ce.current),Y.target.setPointerCapture(Y.pointerId),Y.target.tagName!=="BUTTON"&&(K(!0),ke.current={x:Y.clientX,y:Y.clientY})))},onPointerUp:()=>{var Y,he,de;if(V||!ve)return;ke.current=null;const ge=Number(((Y=se.current)==null?void 0:Y.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),ue=Number(((he=se.current)==null?void 0:he.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Oe=new Date().getTime()-((de=fe.current)==null?void 0:de.getTime()),st=P==="x"?ge:ue,Be=Math.abs(st)/Oe;if(Math.abs(st)>=Rc||Be>.11){re(ce.current),c.onDismiss==null||c.onDismiss.call(c,c),q(P==="x"?ge>0?"right":"left":ue>0?"down":"up"),je(),J(!0);return}else{var Ue,it;(Ue=se.current)==null||Ue.style.setProperty("--swipe-amount-x","0px"),(it=se.current)==null||it.style.setProperty("--swipe-amount-y","0px")}Z(!1),K(!1),O(null)},onPointerMove:Y=>{var he,de,ge;if(!ke.current||!ve||((he=window.getSelection())==null?void 0:he.toString().length)>0)return;const ue=Y.clientY-ke.current.y,Oe=Y.clientX-ke.current.x;var st;const Be=(st=r.swipeDirections)!=null?st:Dc(R);!P&&(Math.abs(Oe)>1||Math.abs(ue)>1)&&O(Math.abs(Oe)>Math.abs(ue)?"x":"y");let Ue={x:0,y:0};const it=bt=>1/(1.5+Math.abs(bt)/20);if(P==="y"){if(Be.includes("top")||Be.includes("bottom"))if(Be.includes("top")&&ue<0||Be.includes("bottom")&&ue>0)Ue.y=ue;else{const bt=ue*it(ue);Ue.y=Math.abs(bt)<Math.abs(ue)?bt:ue}}else if(P==="x"&&(Be.includes("left")||Be.includes("right")))if(Be.includes("left")&&Oe<0||Be.includes("right")&&Oe>0)Ue.x=Oe;else{const bt=Oe*it(Oe);Ue.x=Math.abs(bt)<Math.abs(Oe)?bt:Oe}(Math.abs(Ue.x)>0||Math.abs(Ue.y)>0)&&Z(!0),(de=se.current)==null||de.style.setProperty("--swipe-amount-x",`${Ue.x}px`),(ge=se.current)==null||ge.style.setProperty("--swipe-amount-y",`${Ue.y}px`)}},we&&!c.jsx&&ie!=="loading"?g.createElement("button",{"aria-label":F,"data-disabled":xe,"data-close-button":!0,onClick:xe||!ve?()=>{}:()=>{je(),c.onDismiss==null||c.onDismiss.call(c,c)},className:ft(k?.closeButton,c==null||(n=c.classNames)==null?void 0:n.closeButton)},(ze=N?.close)!=null?ze:xc):null,(ie||c.icon||c.promise)&&c.icon!==null&&(N?.[ie]!==null||c.icon)?g.createElement("div",{"data-icon":"",className:ft(k?.icon,c==null||(s=c.classNames)==null?void 0:s.icon)},c.promise||c.type==="loading"&&!c.icon?c.icon||Se():null,c.type!=="loading"?Pe:null):null,g.createElement("div",{"data-content":"",className:ft(k?.content,c==null||(a=c.classNames)==null?void 0:a.content)},g.createElement("div",{"data-title":"",className:ft(k?.title,c==null||(i=c.classNames)==null?void 0:i.title)},c.jsx?c.jsx:typeof c.title=="function"?c.title():c.title),c.description?g.createElement("div",{"data-description":"",className:ft(T,Ne,k?.description,c==null||(l=c.classNames)==null?void 0:l.description)},typeof c.description=="function"?c.description():c.description):null),g.isValidElement(c.cancel)?c.cancel:c.cancel&&ir(c.cancel)?g.createElement("button",{"data-button":!0,"data-cancel":!0,style:c.cancelButtonStyle||v,onClick:Y=>{ir(c.cancel)&&ve&&(c.cancel.onClick==null||c.cancel.onClick.call(c.cancel,Y),je())},className:ft(k?.cancelButton,c==null||(d=c.classNames)==null?void 0:d.cancelButton)},c.cancel.label):null,g.isValidElement(c.action)?c.action:c.action&&ir(c.action)?g.createElement("button",{"data-button":!0,"data-action":!0,style:c.actionButtonStyle||y,onClick:Y=>{ir(c.action)&&(c.action.onClick==null||c.action.onClick.call(c.action,Y),!Y.defaultPrevented&&je())},className:ft(k?.actionButton,c==null||(m=c.classNames)==null?void 0:m.actionButton)},c.action.label):null)};function _n(){if(typeof window>"u"||typeof document>"u")return"ltr";const r=document.documentElement.getAttribute("dir");return r==="auto"||!r?window.getComputedStyle(document.documentElement).direction:r}function Ic(r,e){const t={};return[r,e].forEach((n,s)=>{const a=s===1,i=a?"--mobile-offset":"--offset",l=a?Sc:zc;function d(m){["top","right","bottom","left"].forEach(u=>{t[`${i}-${u}`]=typeof m=="number"?`${m}px`:m})}typeof n=="number"||typeof n=="string"?d(n):typeof n=="object"?["top","right","bottom","left"].forEach(m=>{n[m]===void 0?t[`${i}-${m}`]=l:t[`${i}-${m}`]=typeof n[m]=="number"?`${n[m]}px`:n[m]}):d(l)}),t}var Pc=g.forwardRef(function(e,t){const{id:n,invert:s,position:a="bottom-right",hotkey:i=["altKey","KeyT"],expand:l,closeButton:d,className:m,offset:u,mobileOffset:c,theme:f="light",richColors:h,duration:p,style:x,visibleToasts:j=Cc,toastOptions:b,dir:C=_n(),gap:E=Ec,icons:A,containerAriaLabel:D="Notifications"}=e,[w,M]=g.useState([]),v=g.useMemo(()=>n?w.filter(B=>B.toasterId===n):w.filter(B=>!B.toasterId),[w,n]),y=g.useMemo(()=>Array.from(new Set([a].concat(v.filter(B=>B.position).map(B=>B.position)))),[v,a]),[z,T]=g.useState([]),[_,R]=g.useState(!1),[S,I]=g.useState(!1),[k,N]=g.useState(f!=="system"?f:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),F=g.useRef(null),P=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),O=g.useRef(null),H=g.useRef(!1),q=g.useCallback(B=>{M(U=>{var L;return(L=U.find(Q=>Q.id===B.id))!=null&&L.delete||Ge.dismiss(B.id),U.filter(({id:Q})=>Q!==B.id)})},[]);return g.useEffect(()=>Ge.subscribe(B=>{if(B.dismiss){requestAnimationFrame(()=>{M(U=>U.map(L=>L.id===B.id?{...L,delete:!0}:L))});return}setTimeout(()=>{cc.flushSync(()=>{M(U=>{const L=U.findIndex(Q=>Q.id===B.id);return L!==-1?[...U.slice(0,L),{...U[L],...B},...U.slice(L+1)]:[B,...U]})})})}),[w]),g.useEffect(()=>{if(f!=="system"){N(f);return}if(f==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?N("dark"):N("light")),typeof window>"u")return;const B=window.matchMedia("(prefers-color-scheme: dark)");try{B.addEventListener("change",({matches:U})=>{N(U?"dark":"light")})}catch{B.addListener(({matches:L})=>{try{N(L?"dark":"light")}catch(Q){console.error(Q)}})}},[f]),g.useEffect(()=>{w.length<=1&&R(!1)},[w]),g.useEffect(()=>{const B=U=>{var L;if(i.every(G=>U[G]||U.code===G)){var Q;R(!0),(Q=F.current)==null||Q.focus()}U.code==="Escape"&&(document.activeElement===F.current||(L=F.current)!=null&&L.contains(document.activeElement))&&R(!1)};return document.addEventListener("keydown",B),()=>document.removeEventListener("keydown",B)},[i]),g.useEffect(()=>{if(F.current)return()=>{O.current&&(O.current.focus({preventScroll:!0}),O.current=null,H.current=!1)}},[F.current]),g.createElement("section",{ref:t,"aria-label":`${D} ${P}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},y.map((B,U)=>{var L;const[Q,G]=B.split("-");return v.length?g.createElement("ol",{key:B,dir:C==="auto"?_n():C,tabIndex:-1,ref:F,className:m,"data-sonner-toaster":!0,"data-sonner-theme":k,"data-y-position":Q,"data-x-position":G,style:{"--front-toast-height":`${((L=z[0])==null?void 0:L.height)||0}px`,"--width":`${Ac}px`,"--gap":`${E}px`,...x,...Ic(u,c)},onBlur:K=>{H.current&&!K.currentTarget.contains(K.relatedTarget)&&(H.current=!1,O.current&&(O.current.focus({preventScroll:!0}),O.current=null))},onFocus:K=>{K.target instanceof HTMLElement&&K.target.dataset.dismissible==="false"||H.current||(H.current=!0,O.current=K.relatedTarget)},onMouseEnter:()=>R(!0),onMouseMove:()=>R(!0),onMouseLeave:()=>{S||R(!1)},onDragEnd:()=>R(!1),onPointerDown:K=>{K.target instanceof HTMLElement&&K.target.dataset.dismissible==="false"||I(!0)},onPointerUp:()=>I(!1)},v.filter(K=>!K.position&&U===0||K.position===B).map((K,V)=>{var J,$;return g.createElement(Tc,{key:K.id,icons:A,index:V,toast:K,defaultRichColors:h,duration:(J=b?.duration)!=null?J:p,className:b?.className,descriptionClassName:b?.descriptionClassName,invert:s,visibleToasts:j,closeButton:($=b?.closeButton)!=null?$:d,interacting:S,position:B,style:b?.style,unstyled:b?.unstyled,classNames:b?.classNames,cancelButtonStyle:b?.cancelButtonStyle,actionButtonStyle:b?.actionButtonStyle,closeButtonAriaLabel:b?.closeButtonAriaLabel,removeToast:q,toasts:v.filter(Z=>Z.position==K.position),heights:z.filter(Z=>Z.position==K.position),setHeights:T,expandByDefault:l,gap:E,expanded:_,swipeDirections:e.swipeDirections})})):null}))}),Lc=(r,e,t,n,s,a,i,l)=>{let d=document.documentElement,m=["light","dark"];function u(h){(Array.isArray(r)?r:[r]).forEach(p=>{let x=p==="class",j=x&&a?s.map(b=>a[b]||b):s;x?(d.classList.remove(...j),d.classList.add(a&&a[h]?a[h]:h)):d.setAttribute(p,h)}),c(h)}function c(h){l&&m.includes(h)&&(d.style.colorScheme=h)}function f(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(n)u(n);else try{let h=localStorage.getItem(e)||t;u(i&&h==="system"?f():h)}catch{}};var Fc=g.createContext(void 0),Oc={setTheme:r=>{},themes:[]},Uc=()=>{var r;return(r=g.useContext(Fc))!=null?r:Oc};var np=g.memo(({forcedTheme:r,storageKey:e,attribute:t,enableSystem:n,enableColorScheme:s,defaultTheme:a,value:i,themes:l,nonce:d,scriptProps:m})=>{let u=JSON.stringify([t,e,a,r,l,i,n,s]).slice(1,-1);return g.createElement("script",{...m,suppressHydrationWarning:!0,nonce:typeof window>"u"?d:"",dangerouslySetInnerHTML:{__html:`(${Lc.toString()})(${u})`}})});var qc=ne(),Bc=r=>{const e=(0,qc.c)(8);let t;e[0]!==r?({...t}=r,e[0]=r,e[1]=t):t=e[1];const{theme:n}=Uc(),s=n===void 0?"system":n;let a,i,l;e[2]===Symbol.for("react.memo_cache_sentinel")?(a={classNames:{toast:"group toast group-[.toaster]:bg-white group-[.toaster]:text-zinc-950 group-[.toaster]:border-zinc-200 group-[.toaster]:shadow-lg dark:group-[.toaster]:bg-zinc-950 dark:group-[.toaster]:text-zinc-50 dark:group-[.toaster]:border-zinc-800",description:"group-[.toast]:text-zinc-500 dark:group-[.toast]:text-zinc-400",actionButton:"group-[.toast]:bg-zinc-900 group-[.toast]:text-zinc-50 dark:group-[.toast]:bg-zinc-50 dark:group-[.toast]:text-zinc-900",cancelButton:"group-[.toast]:bg-zinc-100 group-[.toast]:text-zinc-500 dark:group-[.toast]:bg-zinc-800 dark:group-[.toast]:text-zinc-400"}},i={success:(0,o.jsx)(co,{className:"size-4"}),info:(0,o.jsx)(io,{className:"size-4"}),warning:(0,o.jsx)(ko,{className:"size-4"}),error:(0,o.jsx)(Ro,{className:"size-4"}),loading:(0,o.jsx)(Rt,{className:"size-4 animate-spin"})},l={"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)","--border-radius":"var(--radius)"},e[2]=a,e[3]=i,e[4]=l):(a=e[2],i=e[3],l=e[4]);let d;return e[5]!==t||e[6]!==s?(d=(0,o.jsx)(Pc,{theme:s,className:"toaster group",toastOptions:a,icons:i,style:l,...t}),e[5]=t,e[6]=s,e[7]=d):d=e[7],d},Hc=ne(),za=(0,g.createContext)(void 0);const Wc=r=>{const e=(0,Hc.c)(4),{children:t}=r,n=Vc;let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s={addToast:n},e[0]=s):s=e[0];let a;e[1]===Symbol.for("react.memo_cache_sentinel")?(a=(0,o.jsx)(Bc,{position:"bottom-center",toastOptions:{className:"rounded-full font-bold"}}),e[1]=a):a=e[1];let i;return e[2]!==t?(i=(0,o.jsxs)(za.Provider,{value:s,children:[t,a]}),e[2]=t,e[3]=i):i=e[3],i},ut=()=>{const r=(0,g.useContext)(za);if(!r)throw new Error("useToast must be used within a ToastProvider");return r};function Vc(r,e){const t=e===void 0?"success":e;t==="error"?Mr.error(r):t==="info"?Mr.info(r):Mr.success(r)}var Qc=ne(),Sa=(0,g.createContext)(void 0);const Kc=r=>{const e=(0,Qc.c)(37),{children:t}=r,n=jt();let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s=["posts","feed"],e[0]=s):s=e[0];let a;e[1]===Symbol.for("react.memo_cache_sentinel")?(a={queryKey:s,queryFn:Xc,initialPageParam:null,getNextPageParam:Gc},e[1]=a):a=e[1];const{data:i,fetchNextPage:l,hasNextPage:d,isFetchingNextPage:m,isLoading:u,refetch:c}=ds(a);let f;e[2]!==i?.pages?(f=i?.pages.flatMap(Zc)||[],e[2]=i?.pages,e[3]=f):f=e[3];const h=f;let p;e[4]!==n?(p={mutationFn:Cl,onSuccess:()=>{n.invalidateQueries({queryKey:["posts","feed"]})}},e[4]=n,e[5]=p):p=e[5];const x=ht(p);let j;e[6]!==n?(j={mutationFn:zl,onMutate:async H=>{await n.cancelQueries({queryKey:["posts","feed"]});const q=n.getQueryData(["posts","feed"]);return n.setQueryData(["posts","feed"],B=>B&&{...B,pages:B.pages.map(U=>U.filter(L=>L.id!==H))}),{previousPosts:q}},onError:(H,q,B)=>{B?.previousPosts&&n.setQueryData(["posts","feed"],B.previousPosts)},onSuccess:()=>{n.invalidateQueries({queryKey:["posts","feed"]})}},e[6]=n,e[7]=j):j=e[7];const b=ht(j);let C;e[8]!==n?(C={mutationFn:Jc,onSuccess:()=>{n.invalidateQueries({queryKey:["posts","feed"]})}},e[8]=n,e[9]=C):C=e[9];const E=ht(C);let A;e[10]!==x?(A=async H=>await x.mutateAsync(H),e[10]=x,e[11]=A):A=e[11];const D=A;let w;e[12]!==b?(w=async H=>{await b.mutateAsync(H)},e[12]=b,e[13]=w):w=e[13];const M=w;let v;e[14]!==E?(v=async(H,q)=>{await E.mutateAsync({postId:H,data:q})},e[14]=E,e[15]=v):v=e[15];const y=v,z=$c;let T;e[16]!==h?(T=H=>h.find(q=>q.id===H),e[16]=h,e[17]=T):T=e[17];const _=T;let R;e[18]!==h?(R=(H,q)=>{const B=q===void 0?"feed":q,U=h.filter(L=>!!(L.user?.handle===H||L.repostedBy&&L.repostedBy.handle===H));return B==="feed"?U.filter(ed):B==="media"?U.filter(td):U},e[18]=h,e[19]=R):R=e[19];const S=R;let I;e[20]!==c?(I=()=>c(),e[20]=c,e[21]=I):I=e[21];const k=I,N=d||!1;let F;e[22]!==D||e[23]!==M||e[24]!==l||e[25]!==_||e[26]!==S||e[27]!==m||e[28]!==u||e[29]!==h||e[30]!==k||e[31]!==N||e[32]!==y?(F={posts:h,setPosts:z,addPost:D,deletePost:M,updatePost:y,getPostById:_,getUserPosts:S,loading:u,hasMore:N,isFetchingNextPage:m,fetchNextPage:l,refreshPosts:k},e[22]=D,e[23]=M,e[24]=l,e[25]=_,e[26]=S,e[27]=m,e[28]=u,e[29]=h,e[30]=k,e[31]=N,e[32]=y,e[33]=F):F=e[33];const P=F;let O;return e[34]!==t||e[35]!==P?(O=(0,o.jsx)(Sa.Provider,{value:P,children:t}),e[34]=t,e[35]=P,e[36]=O):O=e[36],O},Yc=()=>{const r=(0,g.useContext)(Sa);if(!r)throw new Error("usePosts must be used within a PostProvider");return r};function Xc(r){const{pageParam:e}=r;return _l(e,10)}function Gc(r){if(!(!r||r.length<10))return r[r.length-1].sort_timestamp||r[r.length-1].created_at}function Zc(r){return r}function Jc(r){const{postId:e,data:t}=r;return Sl(e,t)}function $c(r){console.warn("setPosts is deprecated in favor of React Query cache updates")}function ed(r){return r.parent_id===null}function td(r){return r.parent_id===null&&(r.type==="video"||r.type==="image"||(r.media?.length||0)>0)}var rd=ne(),Aa=(0,g.createContext)(void 0);const nd=r=>{const e=(0,rd.c)(9),{children:t}=r;let n;e[0]===Symbol.for("react.memo_cache_sentinel")?(n={isOpen:!1,images:[],currentIndex:0},e[0]=n):n=e[0];const[s,a]=(0,g.useState)(n);let i;e[1]===Symbol.for("react.memo_cache_sentinel")?(i=(p,x)=>{const j=x===void 0?0:x;a({isOpen:!0,images:Array.isArray(p)?p:[p],currentIndex:j})},e[1]=i):i=e[1];const l=i;let d;e[2]===Symbol.for("react.memo_cache_sentinel")?(d=()=>{a(ad)},e[2]=d):d=e[2];const m=d;let u;e[3]===Symbol.for("react.memo_cache_sentinel")?(u=p=>{a(x=>({...x,currentIndex:p}))},e[3]=u):u=e[3];const c=u;let f;e[4]!==s?(f={...s,openLightbox:l,closeLightbox:m,setIndex:c},e[4]=s,e[5]=f):f=e[5];let h;return e[6]!==t||e[7]!==f?(h=(0,o.jsx)(Aa.Provider,{value:f,children:t}),e[6]=t,e[7]=f,e[8]=h):h=e[8],h},sd=()=>{const r=(0,g.useContext)(Aa);if(!r)throw new Error("useLightbox must be used within a LightboxProvider");return r};function ad(r){return{...r,isOpen:!1}}var id=ne(),od=r=>{const e=(0,id.c)(26);let t,n,s,a,i,l,d;e[0]!==r?({children:t,variant:a,size:i,loading:l,className:d,disabled:n,...s}=r,e[0]=r,e[1]=t,e[2]=n,e[3]=s,e[4]=a,e[5]=i,e[6]=l,e[7]=d):(t=e[1],n=e[2],s=e[3],a=e[4],i=e[5],l=e[6],d=e[7]);const m=a===void 0?"primary":a,u=i===void 0?"md":i,c=l===void 0?!1:l,f=d===void 0?"":d;let h;e[8]!==f||e[9]!==u||e[10]!==m?(h=X("rounded-full font-bold inline-flex items-center justify-center relative overflow-hidden transition-all duration-200 active:scale-[0.97] disabled:opacity-50 disabled:cursor-not-allowed disabled:active:scale-100 touch-manipulation shadow-sm hover:shadow-md",{primary:"text-white bg-zinc-900 hover:bg-zinc-800 border border-zinc-900 dark:bg-white dark:text-black dark:border-white dark:hover:bg-zinc-200",secondary:"text-zinc-900 border border-zinc-200 bg-white hover:bg-zinc-50 dark:text-white dark:border-zinc-800 dark:bg-zinc-900 dark:hover:bg-zinc-800",outline:"text-zinc-900 border border-zinc-200 bg-transparent hover:bg-zinc-50 dark:text-white dark:border-zinc-800 dark:hover:bg-zinc-900",danger:"text-white bg-rose-500 hover:bg-rose-600 border border-rose-500 shadow-rose-500/10 hover:shadow-rose-500/20",ghost:"text-zinc-500 hover:bg-zinc-100 dark:text-zinc-400 dark:hover:bg-zinc-800 border-transparent shadow-none hover:shadow-none",violet:"text-white bg-violet-600 hover:bg-violet-700 border border-violet-600 shadow-violet-600/20 hover:shadow-violet-600/30"}[m],{sm:"px-3 py-1 text-xs",md:"px-5 py-2 text-sm",lg:"px-8 py-3 text-base",icon:"p-2 aspect-square"}[u],f),e[8]=f,e[9]=u,e[10]=m,e[11]=h):h=e[11];const p=n||c;let x;e[12]!==c?(x=c&&(0,o.jsx)(Rt,{className:"mr-2 h-4 w-4 animate-spin shrink-0"}),e[12]=c,e[13]=x):x=e[13];const j=c&&"opacity-80";let b;e[14]!==j?(b=X("flex items-center gap-x-1.5",j),e[14]=j,e[15]=b):b=e[15];let C;e[16]!==t||e[17]!==b?(C=(0,o.jsx)("div",{className:b,children:t}),e[16]=t,e[17]=b,e[18]=C):C=e[18];let E;e[19]===Symbol.for("react.memo_cache_sentinel")?(E=(0,o.jsx)("div",{className:"absolute inset-0 bg-black/0 active:bg-black/5 transition-colors pointer-events-none"}),e[19]=E):E=e[19];let A;return e[20]!==s||e[21]!==C||e[22]!==h||e[23]!==p||e[24]!==x?(A=(0,o.jsxs)("button",{className:h,disabled:p,...s,children:[x,C,E]}),e[20]=s,e[21]=C,e[22]=h,e[23]=p,e[24]=x,e[25]=A):A=e[25],A},Ie=od,ld=class extends g.Component{state={hasError:!1,error:null};static getDerivedStateFromError(r){return{hasError:!0,error:r}}componentDidCatch(r,e){console.error("Uncaught error:",r,e)}render(){return this.state.hasError?(0,o.jsxs)("div",{className:"flex h-screen w-full flex-col items-center justify-center bg-white p-4 text-center dark:bg-black",children:[(0,o.jsx)("h2",{className:"mb-2 text-2xl font-bold text-zinc-900 dark:text-white",children:"Something went wrong"}),(0,o.jsx)("p",{className:"mb-6 max-w-md text-zinc-500 dark:text-zinc-400",children:this.state.error?.message||"An unexpected error occurred."}),(0,o.jsx)(Ie,{onClick:()=>window.location.reload(),className:"rounded-full bg-violet-600 px-6 py-2 font-bold text-white hover:bg-violet-700",children:"Reload Page"})]}):this.props.children}},cd=ld,dd=ne(),Ea=(0,g.createContext)(void 0);const ud=r=>{const e=(0,dd.c)(15),{children:t}=r,[n,s]=(0,g.useState)(null);let a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a=new Map,e[0]=a):a=e[0];const i=(0,g.useRef)(a);let l;e[1]!==n?(l=(x,j,b)=>{j===0?i.current.has(x)&&i.current.delete(x):i.current.set(x,{ratio:j,...b});let C=null,E=.5;for(const[A,D]of i.current.entries())D.ratio>E&&(E=D.ratio,C=A);C!==n&&s(C)},e[1]=n,e[2]=l):l=e[2];const d=l;let m,u;e[3]!==n?(m=()=>{i.current.forEach((x,j)=>{j===n?x.play():x.pause()})},u=[n],e[3]=n,e[4]=m,e[5]=u):(m=e[4],u=e[5]),(0,g.useEffect)(m,u);let c;e[6]!==n?(c=x=>{i.current.delete(x),n===x&&s(null)},e[6]=n,e[7]=c):c=e[7];const f=c;let h;e[8]!==n||e[9]!==d||e[10]!==f?(h={reportVisibility:d,unregister:f,activeVideoId:n},e[8]=n,e[9]=d,e[10]=f,e[11]=h):h=e[11];let p;return e[12]!==t||e[13]!==h?(p=(0,o.jsx)(Ea.Provider,{value:h,children:t}),e[12]=t,e[13]=h,e[14]=p):p=e[14],p},sp=()=>{const r=(0,g.useContext)(Ea);if(!r)throw new Error("useVideoPlayback must be used within a VideoPlaybackProvider");return r};var Dt=ne(),ap=$o;var fd=So,Ra=g.forwardRef((r,e)=>{const t=(0,Dt.c)(9);let n,s;t[0]!==r?({className:n,...s}=r,t[0]=r,t[1]=n,t[2]=s):(n=t[1],s=t[2]);let a;t[3]!==n?(a=X("fixed inset-0 z-50 bg-black/50 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),t[3]=n,t[4]=a):a=t[4];let i;return t[5]!==s||t[6]!==e||t[7]!==a?(i=(0,o.jsx)(sa,{className:a,...s,ref:e}),t[5]=s,t[6]=e,t[7]=a,t[8]=i):i=t[8],i});Ra.displayName=sa.displayName;var md=g.forwardRef((r,e)=>{const t=(0,Dt.c)(10);let n,s;t[0]!==r?({className:n,...s}=r,t[0]=r,t[1]=n,t[2]=s):(n=t[1],s=t[2]);let a;t[3]===Symbol.for("react.memo_cache_sentinel")?(a=(0,o.jsx)(Ra,{}),t[3]=a):a=t[3];let i;t[4]!==n?(i=X("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border border-zinc-200 bg-white p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg dark:border-zinc-800 dark:bg-zinc-950",n),t[4]=n,t[5]=i):i=t[5];let l;return t[6]!==s||t[7]!==e||t[8]!==i?(l=(0,o.jsxs)(fd,{children:[a,(0,o.jsx)(Ds,{ref:e,className:i,...s})]}),t[6]=s,t[7]=e,t[8]=i,t[9]=l):l=t[9],l});md.displayName=Ds.displayName;var hd=r=>{const e=(0,Dt.c)(8);let t,n;e[0]!==r?({className:t,...n}=r,e[0]=r,e[1]=t,e[2]=n):(t=e[1],n=e[2]);let s;e[3]!==t?(s=X("flex flex-col space-y-2 text-center sm:text-left",t),e[3]=t,e[4]=s):s=e[4];let a;return e[5]!==n||e[6]!==s?(a=(0,o.jsx)("div",{className:s,...n}),e[5]=n,e[6]=s,e[7]=a):a=e[7],a};hd.displayName="AlertDialogHeader";var pd=r=>{const e=(0,Dt.c)(8);let t,n;e[0]!==r?({className:t,...n}=r,e[0]=r,e[1]=t,e[2]=n):(t=e[1],n=e[2]);let s;e[3]!==t?(s=X("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),e[3]=t,e[4]=s):s=e[4];let a;return e[5]!==n||e[6]!==s?(a=(0,o.jsx)("div",{className:s,...n}),e[5]=n,e[6]=s,e[7]=a):a=e[7],a};pd.displayName="AlertDialogFooter";var gd=g.forwardRef((r,e)=>{const t=(0,Dt.c)(9);let n,s;t[0]!==r?({className:n,...s}=r,t[0]=r,t[1]=n,t[2]=s):(n=t[1],s=t[2]);let a;t[3]!==n?(a=X("text-lg font-semibold",n),t[3]=n,t[4]=a):a=t[4];let i;return t[5]!==s||t[6]!==e||t[7]!==a?(i=(0,o.jsx)(Ns,{ref:e,className:a,...s}),t[5]=s,t[6]=e,t[7]=a,t[8]=i):i=t[8],i});gd.displayName=Ns.displayName;var vd=g.forwardRef((r,e)=>{const t=(0,Dt.c)(9);let n,s;t[0]!==r?({className:n,...s}=r,t[0]=r,t[1]=n,t[2]=s):(n=t[1],s=t[2]);let a;t[3]!==n?(a=X("text-sm text-zinc-500 dark:text-zinc-400",n),t[3]=n,t[4]=a):a=t[4];let i;return t[5]!==s||t[6]!==e||t[7]!==a?(i=(0,o.jsx)(na,{ref:e,className:a,...s}),t[5]=s,t[6]=e,t[7]=a,t[8]=i):i=t[8],i});vd.displayName=na.displayName;var xd=g.forwardRef((r,e)=>{const t=(0,Dt.c)(9);let n,s;t[0]!==r?({className:n,...s}=r,t[0]=r,t[1]=n,t[2]=s):(n=t[1],s=t[2]);let a;t[3]!==n?(a=X("inline-flex items-center justify-center rounded-md bg-zinc-900 px-4 py-2 text-sm font-medium text-zinc-50 shadow transition-colors hover:bg-zinc-900/90 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-zinc-950 disabled:pointer-events-none disabled:opacity-50 dark:bg-zinc-50 dark:text-zinc-900 dark:hover:bg-zinc-50/90 dark:focus-visible:ring-zinc-300",n),t[3]=n,t[4]=a):a=t[4];let i;return t[5]!==s||t[6]!==e||t[7]!==a?(i=(0,o.jsx)(Bs,{ref:e,className:a,...s}),t[5]=s,t[6]=e,t[7]=a,t[8]=i):i=t[8],i});xd.displayName=Bs.displayName;var bd=g.forwardRef((r,e)=>{const t=(0,Dt.c)(9);let n,s;t[0]!==r?({className:n,...s}=r,t[0]=r,t[1]=n,t[2]=s):(n=t[1],s=t[2]);let a;t[3]!==n?(a=X("inline-flex items-center justify-center rounded-md border border-zinc-200 bg-white px-4 py-2 text-sm font-medium shadow-sm transition-colors hover:bg-zinc-100 hover:text-zinc-900 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-zinc-950 disabled:pointer-events-none disabled:opacity-50 dark:border-zinc-800 dark:bg-zinc-950 dark:hover:bg-zinc-800 dark:hover:text-zinc-50 dark:focus-visible:ring-zinc-300",n),t[3]=n,t[4]=a):a=t[4];let i;return t[5]!==s||t[6]!==e||t[7]!==a?(i=(0,o.jsx)(Us,{ref:e,className:a,...s}),t[5]=s,t[6]=e,t[7]=a,t[8]=i):i=t[8],i});bd.displayName=Us.displayName;var en=ne(),Ve=g.forwardRef((r,e)=>{const t=(0,en.c)(9);let n,s;t[0]!==r?({className:n,...s}=r,t[0]=r,t[1]=n,t[2]=s):(n=t[1],s=t[2]);let a;t[3]!==n?(a=X("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",n),t[3]=n,t[4]=a):a=t[4];let i;return t[5]!==s||t[6]!==e||t[7]!==a?(i=(0,o.jsx)(Qs,{ref:e,className:a,...s}),t[5]=s,t[6]=e,t[7]=a,t[8]=i):i=t[8],i});Ve.displayName=Qs.displayName;var Qe=g.forwardRef((r,e)=>{const t=(0,en.c)(9);let n,s;t[0]!==r?({className:n,...s}=r,t[0]=r,t[1]=n,t[2]=s):(n=t[1],s=t[2]);let a;t[3]!==n?(a=X("aspect-square h-full w-full",n),t[3]=n,t[4]=a):a=t[4];let i;return t[5]!==s||t[6]!==e||t[7]!==a?(i=(0,o.jsx)(Gs,{ref:e,className:a,...s}),t[5]=s,t[6]=e,t[7]=a,t[8]=i):i=t[8],i});Qe.displayName=Gs.displayName;var Ye=g.forwardRef((r,e)=>{const t=(0,en.c)(9);let n,s;t[0]!==r?({className:n,...s}=r,t[0]=r,t[1]=n,t[2]=s):(n=t[1],s=t[2]);let a;t[3]!==n?(a=X("flex h-full w-full items-center justify-center rounded-full bg-zinc-100 dark:bg-zinc-800",n),t[3]=n,t[4]=a):a=t[4];let i;return t[5]!==s||t[6]!==e||t[7]!==a?(i=(0,o.jsx)(Fs,{ref:e,className:a,...s}),t[5]=s,t[6]=e,t[7]=a,t[8]=i):i=t[8],i});Ye.displayName=Fs.displayName;var _t=ne(),ip=Fo,op=Mo;var yd=g.forwardRef((r,e)=>{const t=(0,_t.c)(14);let n,s,a,i;t[0]!==r?({className:s,inset:a,children:n,...i}=r,t[0]=r,t[1]=n,t[2]=s,t[3]=a,t[4]=i):(n=t[1],s=t[2],a=t[3],i=t[4]);const l=a&&"pl-8";let d;t[5]!==s||t[6]!==l?(d=X("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-zinc-100 focus:text-zinc-900 data-[state=open]:bg-zinc-100 data-[state=open]:text-zinc-900 dark:focus:bg-zinc-800 dark:focus:text-zinc-50 dark:data-[state=open]:bg-zinc-800 dark:data-[state=open]:text-zinc-50",l,s),t[5]=s,t[6]=l,t[7]=d):d=t[7];let m;t[8]===Symbol.for("react.memo_cache_sentinel")?(m=(0,o.jsx)(jr,{className:"ml-auto h-4 w-4"}),t[8]=m):m=t[8];let u;return t[9]!==n||t[10]!==i||t[11]!==e||t[12]!==d?(u=(0,o.jsxs)(ta,{ref:e,className:d,...i,children:[n,m]}),t[9]=n,t[10]=i,t[11]=e,t[12]=d,t[13]=u):u=t[13],u});yd.displayName=ta.displayName;var wd=g.forwardRef((r,e)=>{const t=(0,_t.c)(9);let n,s;t[0]!==r?({className:n,...s}=r,t[0]=r,t[1]=n,t[2]=s):(n=t[1],s=t[2]);let a;t[3]!==n?(a=X("z-50 min-w-[8rem] overflow-hidden rounded-md border border-zinc-200 bg-white p-1 text-zinc-950 shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 dark:border-zinc-800 dark:bg-zinc-950 dark:text-zinc-50",n),t[3]=n,t[4]=a):a=t[4];let i;return t[5]!==s||t[6]!==e||t[7]!==a?(i=(0,o.jsx)(Vs,{ref:e,className:a,...s}),t[5]=s,t[6]=e,t[7]=a,t[8]=i):i=t[8],i});wd.displayName=Vs.displayName;var jd=g.forwardRef((r,e)=>{const t=(0,_t.c)(9);let n,s;t[0]!==r?({className:n,...s}=r,t[0]=r,t[1]=n,t[2]=s):(n=t[1],s=t[2]);let a;t[3]!==n?(a=X("z-50 min-w-[8rem] overflow-hidden rounded-md border border-zinc-200 bg-white p-1 text-zinc-950 shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 dark:border-zinc-800 dark:bg-zinc-950 dark:text-zinc-50",n),t[3]=n,t[4]=a):a=t[4];let i;return t[5]!==s||t[6]!==e||t[7]!==a?(i=(0,o.jsx)(Vo,{children:(0,o.jsx)(ws,{ref:e,className:a,...s})}),t[5]=s,t[6]=e,t[7]=a,t[8]=i):i=t[8],i});jd.displayName=ws.displayName;var kd=g.forwardRef((r,e)=>{const t=(0,_t.c)(11);let n,s,a;t[0]!==r?({className:n,inset:s,...a}=r,t[0]=r,t[1]=n,t[2]=s,t[3]=a):(n=t[1],s=t[2],a=t[3]);const i=s&&"pl-8";let l;t[4]!==n||t[5]!==i?(l=X("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-zinc-100 focus:text-zinc-900 data-[disabled]:pointer-events-none data-[disabled]:opacity-50 dark:focus:bg-zinc-800 dark:focus:text-zinc-50",i,n),t[4]=n,t[5]=i,t[6]=l):l=t[6];let d;return t[7]!==a||t[8]!==e||t[9]!==l?(d=(0,o.jsx)(Ps,{ref:e,className:l,...a}),t[7]=a,t[8]=e,t[9]=l,t[10]=d):d=t[10],d});kd.displayName=Ps.displayName;var Nd=g.forwardRef((r,e)=>{const t=(0,_t.c)(14);let n,s,a,i;t[0]!==r?({className:a,children:s,checked:n,...i}=r,t[0]=r,t[1]=n,t[2]=s,t[3]=a,t[4]=i):(n=t[1],s=t[2],a=t[3],i=t[4]);let l;t[5]!==a?(l=X("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-zinc-100 focus:text-zinc-900 data-[disabled]:pointer-events-none data-[disabled]:opacity-50 dark:focus:bg-zinc-800 dark:focus:text-zinc-50",a),t[5]=a,t[6]=l):l=t[6];let d;t[7]===Symbol.for("react.memo_cache_sentinel")?(d=(0,o.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,o.jsx)(ea,{children:(0,o.jsx)(kr,{className:"h-4 w-4"})})}),t[7]=d):d=t[7];let m;return t[8]!==n||t[9]!==s||t[10]!==i||t[11]!==e||t[12]!==l?(m=(0,o.jsxs)(Rs,{ref:e,className:l,checked:n,...i,children:[d,s]}),t[8]=n,t[9]=s,t[10]=i,t[11]=e,t[12]=l,t[13]=m):m=t[13],m});Nd.displayName=Rs.displayName;var _d=g.forwardRef((r,e)=>{const t=(0,_t.c)(12);let n,s,a;t[0]!==r?({className:s,children:n,...a}=r,t[0]=r,t[1]=n,t[2]=s,t[3]=a):(n=t[1],s=t[2],a=t[3]);let i;t[4]!==s?(i=X("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-zinc-100 focus:text-zinc-900 data-[disabled]:pointer-events-none data-[disabled]:opacity-50 dark:focus:bg-zinc-800 dark:focus:text-zinc-50",s),t[4]=s,t[5]=i):i=t[5];let l;t[6]===Symbol.for("react.memo_cache_sentinel")?(l=(0,o.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,o.jsx)(ea,{children:(0,o.jsx)(As,{className:"h-2 w-2 fill-current"})})}),t[6]=l):l=t[6];let d;return t[7]!==n||t[8]!==a||t[9]!==e||t[10]!==i?(d=(0,o.jsxs)(Is,{ref:e,className:i,...a,children:[l,n]}),t[7]=n,t[8]=a,t[9]=e,t[10]=i,t[11]=d):d=t[11],d});_d.displayName=Is.displayName;var Cd=g.forwardRef((r,e)=>{const t=(0,_t.c)(11);let n,s,a;t[0]!==r?({className:n,inset:s,...a}=r,t[0]=r,t[1]=n,t[2]=s,t[3]=a):(n=t[1],s=t[2],a=t[3]);const i=s&&"pl-8";let l;t[4]!==n||t[5]!==i?(l=X("px-2 py-1.5 text-sm font-semibold text-zinc-950 dark:text-zinc-50",i,n),t[4]=n,t[5]=i,t[6]=l):l=t[6];let d;return t[7]!==a||t[8]!==e||t[9]!==l?(d=(0,o.jsx)(Ys,{ref:e,className:l,...a}),t[7]=a,t[8]=e,t[9]=l,t[10]=d):d=t[10],d});Cd.displayName=Ys.displayName;var zd=g.forwardRef((r,e)=>{const t=(0,_t.c)(9);let n,s;t[0]!==r?({className:n,...s}=r,t[0]=r,t[1]=n,t[2]=s):(n=t[1],s=t[2]);let a;t[3]!==n?(a=X("-mx-1 my-1 h-px bg-zinc-200 dark:bg-zinc-800",n),t[3]=n,t[4]=a):a=t[4];let i;return t[5]!==s||t[6]!==e||t[7]!==a?(i=(0,o.jsx)($s,{ref:e,className:a,...s}),t[5]=s,t[6]=e,t[7]=a,t[8]=i):i=t[8],i});zd.displayName=$s.displayName;var Sd=r=>{const e=(0,_t.c)(8);let t,n;e[0]!==r?({className:t,...n}=r,e[0]=r,e[1]=t,e[2]=n):(t=e[1],n=e[2]);let s;e[3]!==t?(s=X("ml-auto text-xs tracking-widest text-zinc-500 dark:text-zinc-400",t),e[3]=t,e[4]=s):s=e[4];let a;return e[5]!==n||e[6]!==s?(a=(0,o.jsx)("span",{className:s,...n}),e[5]=n,e[6]=s,e[7]=a):a=e[7],a};Sd.displayName="ContextMenuShortcut";var Ut=ne(),Ma=Io;var Ad=bo;var Da=g.forwardRef((r,e)=>{const t=(0,Ut.c)(9);let n,s;t[0]!==r?({className:n,...s}=r,t[0]=r,t[1]=n,t[2]=s):(n=t[1],s=t[2]);let a;t[3]!==n?(a=X("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),t[3]=n,t[4]=a):a=t[4];let i;return t[5]!==s||t[6]!==e||t[7]!==a?(i=(0,o.jsx)(hs,{ref:e,className:a,...s}),t[5]=s,t[6]=e,t[7]=a,t[8]=i):i=t[8],i});Da.displayName=hs.displayName;var tn=g.forwardRef((r,e)=>{const t=(0,Ut.c)(30);let n,s,a,i;t[0]!==r?({className:s,children:n,onDragClose:a,...i}=r,t[0]=r,t[1]=n,t[2]=s,t[3]=a,t[4]=i):(n=t[1],s=t[2],a=t[3],i=t[4]);const l=fo(),d=uo(0);let m,u;t[5]===Symbol.for("react.memo_cache_sentinel")?(m=[0,200],u=[1,.5],t[5]=m,t[6]=u):(m=t[5],u=t[6]);const c=qo(d,m,u);let f;t[7]!==l||t[8]!==a?(f=async(M,v)=>{v.offset.y>150||v.velocity.y>500?a?a():document.querySelector("[data-dialog-close]")?.click():l.start({y:0,transition:{type:"spring",stiffness:300,damping:30}})},t[7]=l,t[8]=a,t[9]=f):f=t[9];const h=f;let p;t[10]===Symbol.for("react.memo_cache_sentinel")?(p=(0,o.jsx)(Da,{}),t[10]=p):p=t[10];let x,j;t[11]===Symbol.for("react.memo_cache_sentinel")?(x={top:0,bottom:0},j={top:0,bottom:.8},t[11]=x,t[12]=j):(x=t[11],j=t[12]);let b;t[13]!==c||t[14]!==d?(b={y:d,opacity:c},t[13]=c,t[14]=d,t[15]=b):b=t[15];let C;t[16]!==s?(C=X("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border border-zinc-200 bg-white p-6 shadow-lg duration-700 ease-[cubic-bezier(0.32,0.72,0,1)] data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:slide-out-to-bottom-full data-[state=open]:slide-in-from-bottom-full rounded-3xl dark:border-zinc-800 dark:bg-zinc-950",s),t[16]=s,t[17]=C):C=t[17];let E;t[18]===Symbol.for("react.memo_cache_sentinel")?(E=(0,o.jsx)("div",{className:"flex w-full items-center justify-center pt-2 pb-1 shrink-0",children:(0,o.jsx)("div",{className:"h-1.5 w-12 rounded-full bg-zinc-200 dark:bg-zinc-800"})}),t[18]=E):E=t[18];let A;t[19]===Symbol.for("react.memo_cache_sentinel")?(A=(0,o.jsxs)(Zo,{"data-dialog-close":!0,className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-white transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-zinc-950 focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-zinc-100 data-[state=open]:text-zinc-500 dark:ring-offset-zinc-950 dark:focus:ring-zinc-300 dark:data-[state=open]:bg-zinc-800 dark:data-[state=open]:text-zinc-400",children:[(0,o.jsx)(kt,{className:"h-4 w-4"}),(0,o.jsx)("span",{className:"sr-only",children:"Close"})]}),t[19]=A):A=t[19];let D;t[20]!==n||t[21]!==l||t[22]!==h||t[23]!==b||t[24]!==C?(D=(0,o.jsxs)(_o.div,{drag:"y",dragConstraints:x,dragElastic:j,onDragEnd:h,animate:l,style:b,className:C,children:[E,n,A]}),t[20]=n,t[21]=l,t[22]=h,t[23]=b,t[24]=C,t[25]=D):D=t[25];let w;return t[26]!==i||t[27]!==e||t[28]!==D?(w=(0,o.jsxs)(Ad,{children:[p,(0,o.jsx)(_s,{ref:e,asChild:!0,...i,children:D})]}),t[26]=i,t[27]=e,t[28]=D,t[29]=w):w=t[29],w});tn.displayName=_s.displayName;var rn=r=>{const e=(0,Ut.c)(8);let t,n;e[0]!==r?({className:t,...n}=r,e[0]=r,e[1]=t,e[2]=n):(t=e[1],n=e[2]);let s;e[3]!==t?(s=X("flex flex-col space-y-1.5 text-center sm:text-left",t),e[3]=t,e[4]=s):s=e[4];let a;return e[5]!==n||e[6]!==s?(a=(0,o.jsx)("div",{className:s,...n}),e[5]=n,e[6]=s,e[7]=a):a=e[7],a};rn.displayName="DialogHeader";var nn=r=>{const e=(0,Ut.c)(8);let t,n;e[0]!==r?({className:t,...n}=r,e[0]=r,e[1]=t,e[2]=n):(t=e[1],n=e[2]);let s;e[3]!==t?(s=X("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),e[3]=t,e[4]=s):s=e[4];let a;return e[5]!==n||e[6]!==s?(a=(0,o.jsx)("div",{className:s,...n}),e[5]=n,e[6]=s,e[7]=a):a=e[7],a};nn.displayName="DialogFooter";var sn=g.forwardRef((r,e)=>{const t=(0,Ut.c)(9);let n,s;t[0]!==r?({className:n,...s}=r,t[0]=r,t[1]=n,t[2]=s):(n=t[1],s=t[2]);let a;t[3]!==n?(a=X("text-lg font-semibold leading-none tracking-tight",n),t[3]=n,t[4]=a):a=t[4];let i;return t[5]!==s||t[6]!==e||t[7]!==a?(i=(0,o.jsx)(us,{ref:e,className:a,...s}),t[5]=s,t[6]=e,t[7]=a,t[8]=i):i=t[8],i});sn.displayName=us.displayName;var Ta=g.forwardRef((r,e)=>{const t=(0,Ut.c)(9);let n,s;t[0]!==r?({className:n,...s}=r,t[0]=r,t[1]=n,t[2]=s):(n=t[1],s=t[2]);let a;t[3]!==n?(a=X("text-sm text-zinc-500 dark:text-zinc-400",n),t[3]=n,t[4]=a):a=t[4];let i;return t[5]!==s||t[6]!==e||t[7]!==a?(i=(0,o.jsx)(ps,{ref:e,className:a,...s}),t[5]=s,t[6]=e,t[7]=a,t[8]=i):i=t[8],i});Ta.displayName=ps.displayName;var Ct=ne(),Ed=so,Rd=lo,lp=po;var Md=g.forwardRef((r,e)=>{const t=(0,Ct.c)(14);let n,s,a,i;t[0]!==r?({className:s,inset:a,children:n,...i}=r,t[0]=r,t[1]=n,t[2]=s,t[3]=a,t[4]=i):(n=t[1],s=t[2],a=t[3],i=t[4]);const l=a&&"pl-8";let d;t[5]!==s||t[6]!==l?(d=X("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-zinc-100 data-[state=open]:bg-zinc-100 dark:focus:bg-zinc-800 dark:data-[state=open]:bg-zinc-800",l,s),t[5]=s,t[6]=l,t[7]=d):d=t[7];let m;t[8]===Symbol.for("react.memo_cache_sentinel")?(m=(0,o.jsx)(jr,{className:"ml-auto h-4 w-4"}),t[8]=m):m=t[8];let u;return t[9]!==n||t[10]!==i||t[11]!==e||t[12]!==d?(u=(0,o.jsxs)(Es,{ref:e,className:d,...i,children:[n,m]}),t[9]=n,t[10]=i,t[11]=e,t[12]=d,t[13]=u):u=t[13],u});Md.displayName=Es.displayName;var Dd=g.forwardRef((r,e)=>{const t=(0,Ct.c)(9);let n,s;t[0]!==r?({className:n,...s}=r,t[0]=r,t[1]=n,t[2]=s):(n=t[1],s=t[2]);let a;t[3]!==n?(a=X("z-50 min-w-[8rem] overflow-hidden rounded-md border border-zinc-200 bg-white p-1 text-zinc-950 shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 dark:border-zinc-800 dark:bg-zinc-950 dark:text-zinc-50",n),t[3]=n,t[4]=a):a=t[4];let i;return t[5]!==s||t[6]!==e||t[7]!==a?(i=(0,o.jsx)(Cs,{ref:e,className:a,...s}),t[5]=s,t[6]=e,t[7]=a,t[8]=i):i=t[8],i});Dd.displayName=Cs.displayName;var Ia=g.forwardRef((r,e)=>{const t=(0,Ct.c)(11);let n,s,a;t[0]!==r?({className:n,sideOffset:a,...s}=r,t[0]=r,t[1]=n,t[2]=s,t[3]=a):(n=t[1],s=t[2],a=t[3]);const i=a===void 0?4:a;let l;t[4]!==n?(l=X("z-50 min-w-[8rem] overflow-hidden rounded-md border border-zinc-200 bg-white p-1 text-zinc-950 shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 dark:border-zinc-800 dark:bg-zinc-950 dark:text-zinc-50",n),t[4]=n,t[5]=l):l=t[5];let d;return t[6]!==s||t[7]!==e||t[8]!==i||t[9]!==l?(d=(0,o.jsx)(mo,{children:(0,o.jsx)(bs,{ref:e,sideOffset:i,className:l,...s})}),t[6]=s,t[7]=e,t[8]=i,t[9]=l,t[10]=d):d=t[10],d});Ia.displayName=bs.displayName;var qr=g.forwardRef((r,e)=>{const t=(0,Ct.c)(13);let n,s,a,i;t[0]!==r?({className:n,inset:s,variant:i,...a}=r,t[0]=r,t[1]=n,t[2]=s,t[3]=a,t[4]=i):(n=t[1],s=t[2],a=t[3],i=t[4]);const l=i==="destructive"&&"text-rose-600 focus:bg-rose-50 focus:text-rose-600 dark:text-rose-500 dark:focus:bg-rose-950",d=s&&"pl-8";let m;t[5]!==n||t[6]!==l||t[7]!==d?(m=X("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-zinc-100 focus:text-zinc-900 data-[disabled]:pointer-events-none data-[disabled]:opacity-50 dark:focus:bg-zinc-800 dark:focus:text-zinc-50",l,d,n),t[5]=n,t[6]=l,t[7]=d,t[8]=m):m=t[8];let u;return t[9]!==a||t[10]!==e||t[11]!==m?(u=(0,o.jsx)(ys,{ref:e,className:m,...a}),t[9]=a,t[10]=e,t[11]=m,t[12]=u):u=t[12],u});qr.displayName=ys.displayName;var Td=g.forwardRef((r,e)=>{const t=(0,Ct.c)(14);let n,s,a,i;t[0]!==r?({className:a,children:s,checked:n,...i}=r,t[0]=r,t[1]=n,t[2]=s,t[3]=a,t[4]=i):(n=t[1],s=t[2],a=t[3],i=t[4]);let l;t[5]!==a?(l=X("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-zinc-100 focus:text-zinc-900 data-[disabled]:pointer-events-none data-[disabled]:opacity-50 dark:focus:bg-zinc-800 dark:focus:text-zinc-50",a),t[5]=a,t[6]=l):l=t[6];let d;t[7]===Symbol.for("react.memo_cache_sentinel")?(d=(0,o.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,o.jsx)(gs,{children:(0,o.jsx)(kr,{className:"h-4 w-4"})})}),t[7]=d):d=t[7];let m;return t[8]!==n||t[9]!==s||t[10]!==i||t[11]!==e||t[12]!==l?(m=(0,o.jsxs)(Hs,{ref:e,className:l,checked:n,...i,children:[d,s]}),t[8]=n,t[9]=s,t[10]=i,t[11]=e,t[12]=l,t[13]=m):m=t[13],m});Td.displayName=Hs.displayName;var Id=g.forwardRef((r,e)=>{const t=(0,Ct.c)(12);let n,s,a;t[0]!==r?({className:s,children:n,...a}=r,t[0]=r,t[1]=n,t[2]=s,t[3]=a):(n=t[1],s=t[2],a=t[3]);let i;t[4]!==s?(i=X("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-zinc-100 focus:text-zinc-900 data-[disabled]:pointer-events-none data-[disabled]:opacity-50 dark:focus:bg-zinc-800 dark:focus:text-zinc-50",s),t[4]=s,t[5]=i):i=t[5];let l;t[6]===Symbol.for("react.memo_cache_sentinel")?(l=(0,o.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,o.jsx)(gs,{children:(0,o.jsx)(As,{className:"h-2 w-2 fill-current"})})}),t[6]=l):l=t[6];let d;return t[7]!==n||t[8]!==a||t[9]!==e||t[10]!==i?(d=(0,o.jsxs)(aa,{ref:e,className:i,...a,children:[l,n]}),t[7]=n,t[8]=a,t[9]=e,t[10]=i,t[11]=d):d=t[11],d});Id.displayName=aa.displayName;var Pd=g.forwardRef((r,e)=>{const t=(0,Ct.c)(11);let n,s,a;t[0]!==r?({className:n,inset:s,...a}=r,t[0]=r,t[1]=n,t[2]=s,t[3]=a):(n=t[1],s=t[2],a=t[3]);const i=s&&"pl-8";let l;t[4]!==n||t[5]!==i?(l=X("px-2 py-1.5 text-sm font-semibold",i,n),t[4]=n,t[5]=i,t[6]=l):l=t[6];let d;return t[7]!==a||t[8]!==e||t[9]!==l?(d=(0,o.jsx)(vs,{ref:e,className:l,...a}),t[7]=a,t[8]=e,t[9]=l,t[10]=d):d=t[10],d});Pd.displayName=vs.displayName;var Ld=g.forwardRef((r,e)=>{const t=(0,Ct.c)(9);let n,s;t[0]!==r?({className:n,...s}=r,t[0]=r,t[1]=n,t[2]=s):(n=t[1],s=t[2]);let a;t[3]!==n?(a=X("-mx-1 my-1 h-px bg-zinc-100 dark:bg-zinc-800",n),t[3]=n,t[4]=a):a=t[4];let i;return t[5]!==s||t[6]!==e||t[7]!==a?(i=(0,o.jsx)(Ss,{ref:e,className:a,...s}),t[5]=s,t[6]=e,t[7]=a,t[8]=i):i=t[8],i});Ld.displayName=Ss.displayName;var Fd=r=>{const e=(0,Ct.c)(8);let t,n;e[0]!==r?({className:t,...n}=r,e[0]=r,e[1]=t,e[2]=n):(t=e[1],n=e[2]);let s;e[3]!==t?(s=X("ml-auto text-xs tracking-widest opacity-60",t),e[3]=t,e[4]=s):s=e[4];let a;return e[5]!==n||e[6]!==s?(a=(0,o.jsx)("span",{className:s,...n}),e[5]=n,e[6]=s,e[7]=a):a=e[7],a};Fd.displayName="DropdownMenuShortcut";var Od=Object.defineProperty,Ud=(r,e)=>{for(var t in e)Od(r,t,{get:e[t],enumerable:!0})},St={};Ud(St,{ActiveEmoji:()=>ni,Empty:()=>ri,List:()=>$a,Loading:()=>ti,Root:()=>Qa,Search:()=>Ka,SkinTone:()=>si,SkinToneSelector:()=>ei,Viewport:()=>Ya});var Pa="'Apple Color Emoji', 'Noto Color Emoji', 'Twemoji Mozilla', 'Android Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', EmojiSymbols, sans-serif",an=["none","light","medium-light","medium","medium-dark","dark"];function Dr(r){return r.charAt(0).toUpperCase()+r.slice(1)}var ot=2,He=null;function Cn(r){try{He??=document.createElement("canvas").getContext("2d",{willReadFrequently:!0})}catch{}if(!He||(queueMicrotask(()=>{He&&(He=null)}),He.canvas.width=ot,He.canvas.height=ot,He.font=`2px ${Pa}`,He.textBaseline="middle",He.measureText(r).width>=ot*2))return!1;He.fillStyle="#00f",He.fillText(r,0,0);let e=He.getImageData(0,0,ot,ot).data;He.clearRect(0,0,ot,ot),He.fillStyle="#f00",He.fillText(r,0,0);let t=He.getImageData(0,0,ot,ot).data;for(let n=0;n<ot*ot*4;n+=4)if(e[n]!==t[n]||e[n+1]!==t[n+1]||e[n+2]!==t[n+2])return!1;return!0}function zn(r,e,t){try{let n=r.getItem(e);if(!n)throw new Error(`No value found for "${e}".`);return t(JSON.parse(n))}catch{return null}}function La(r,e,t){r.setItem(e,JSON.stringify(t))}function Sn(r){return e=>e===void 0?void 0:r(e)}function An(r){return e=>e===null?null:r(e)}function qe(r){if(typeof r!="string")throw new Error;return r}function cr(r){if(typeof r!="number")throw new Error;return r}function Fa(r){if(typeof r!="boolean")throw new Error;return r}function At(r){return e=>{if(typeof e!="object"||e===null)throw new Error;let t={};for(let n in r){let s=e[n];s===void 0&&r[n](void 0),t[n]=r[n](s)}return t}}function Tr(r){return e=>{if(!Array.isArray(e))throw new Error;return e.length>0&&r(e[0]),e}}var Oa=(r,e)=>`${r}/${e}/data.json`,Ua=(r,e)=>`${r}/${e}/messages.json`,qd=["bn","da","de","en-gb","en","es-mx","es","et","fi","fr","hi","hu","it","ja","ko","lt","ms","nb","nl","pl","pt","ru","sv","th","uk","vi","zh-hant","zh"],En="en",qa=r=>`frimousse/data/${r}`,Rn="frimousse/metadata";async function Mn(r,e){try{return(await fetch(r,{method:"HEAD",signal:e})).headers.get("etag")}catch{return null}}async function Bd(r,e,t){let[{emojis:n,emojisEtag:s},{messages:a,messagesEtag:i}]=await Promise.all([fetch(Oa(r,e),{signal:t}).then(async l=>({emojis:await l.json(),emojisEtag:l.headers.get("etag")})),fetch(Ua(r,e),{signal:t}).then(async l=>({messages:await l.json(),messagesEtag:l.headers.get("etag")}))]);return{emojis:n,messages:a,emojisEtag:s,messagesEtag:i}}async function Hd(r,e,t){let[n,s]=await Promise.all([Mn(Oa(r,e),t),Mn(Ua(r,e),t)]);return{emojisEtag:n,messagesEtag:s}}function Wd(r){return r.skins?r.skins.filter(e=>typeof e.tone=="number").reduce((e,t)=>{let n=an[t.tone];return e[n]=t.emoji,e},{}):void 0}async function Dn(r,e,t){let{emojis:n,emojisEtag:s,messages:a,messagesEtag:i}=await Bd(r,e,t),l=a.subgroups.find(h=>h.key==="country-flag"||h.key==="subdivision-flag"),d=a.groups.filter(h=>h.key!=="component"),m=n.filter(h=>"group"in h),u=d.map(h=>({index:h.order,label:Dr(h.message)})),c=a.skinTones.reduce((h,p)=>(h[p.key]=Dr(p.message),h),{}),f={locale:e,emojis:m.map(h=>({emoji:h.emoji,category:h.group,version:h.version,label:Dr(h.label),tags:h.tags??[],countryFlag:l&&h.subgroup===l.order||void 0,skins:Wd(h)})),categories:u,skinTones:c};return La(localStorage,qa(e),{data:f,metadata:{emojisEtag:s,messagesEtag:i}}),f}function Vd(r,e){let t=new Map;for(let i of r)t.has(i.version)||t.set(i.version,i.emoji);let n=[...t.keys()].sort((i,l)=>l-i),s=n[0]??0,a=Cn("");if(typeof e=="number")return{emojiVersion:e,countryFlags:a};for(let i of n)if(Cn(t.get(i)))return{emojiVersion:i,countryFlags:a};return{emojiVersion:s,countryFlags:a}}var Qd=At({emojiVersion:cr,countryFlags:Fa}),Kd=At({data:At({locale:qe,emojis:Tr(At({emoji:qe,category:cr,label:qe,version:cr,tags:Tr(qe),countryFlag:Sn(Fa),skins:Sn(At({light:qe,"medium-light":qe,medium:qe,"medium-dark":qe,dark:qe}))})),categories:Tr(At({index:cr,label:qe})),skinTones:At({light:qe,"medium-light":qe,medium:qe,"medium-dark":qe,dark:qe})}),metadata:At({emojisEtag:An(qe),messagesEtag:An(qe)})});async function Yd({locale:r,emojiVersion:e,emojibaseUrl:t,signal:n}){let s=typeof t=="string"?t:`https://cdn.jsdelivr.net/npm/emojibase-data@${typeof e=="number"?Math.floor(e):"latest"}`,a=zn(sessionStorage,Rn,Qd),i=zn(localStorage,qa(r),Kd),l;if(!i)l=await Dn(s,r,n);else if(a)l=i.data;else try{let{emojisEtag:d,messagesEtag:m}=await Hd(s,r,n);l=!d||!m||d!==i.metadata.emojisEtag||m!==i.metadata.messagesEtag?await Dn(s,r,n):i.data}catch{l=i.data}return a??=Vd(l.emojis,e),La(sessionStorage,Rn,a),{locale:r,emojis:l.emojis.filter(d=>{let m=d.version<=a.emojiVersion;return d.countryFlag?m&&a.countryFlags:m}),categories:l.categories,skinTones:l.skinTones}}function Tn(r){return qd.includes(r)?r:(console.warn(`Locale "${r}" is not supported, using "${En}" instead.`),En)}function In(r){return an.includes(r)?r:(console.warn(`Skin tone "${r}" is not valid, using "none" instead.`),"none")}function Xd(r,e){let t=[];if(e<=0)return t;for(let n=0,s=r.length;n<s;n+=e)t.push(r.slice(n,n+e));return t}function Gd(r,e){if(!e)return r;let t=e.toLowerCase().trim(),n=new WeakMap;return r.filter(s=>{let a=0;s.label.toLowerCase().includes(t)&&(a+=10);for(let i of s.tags)i.toLowerCase().includes(t)&&(a+=1);return a>0?(n.set(s,a),!0):!1}).sort((s,a)=>(n.get(a)??0)-(n.get(s)??0))}function Zd(r,e,t,n){let s=Gd(r.emojis,n),a=[],i=[],l=[],d={},m=0,u=0;for(let c of s)d[c.category]||(d[c.category]=[]),d[c.category].push({emoji:t&&t!=="none"&&c.skins?c.skins[t]:c.emoji,label:c.label});for(let c of r.categories){let f=d[c.index];if(!f||f.length===0)continue;let h=Xd(Array.from(f),e).map(p=>({categoryIndex:m,emojis:p}));a.push(...h),i.push({label:c.label,rowsCount:h.length,startRowIndex:u}),l.push(u),m++,u+=h.length}return{count:s.length,categories:i,categoriesStartRowIndices:l,rows:a,skinTones:r.skinTones}}function Jd(r){let e={},t=null,n=null,s=new Set,a=()=>{if(t){e=t,t=null;for(let m of s)m(e)}n=null},i=()=>t??e,l=m=>{t??=e,Object.assign(t,typeof m=="function"?m(i()):m),n||(n=requestAnimationFrame(a))},d=m=>(s.add(m),()=>s.delete(m));return e=r(l,i),{get:i,set:l,subscribe:d}}function $d(r){let[e]=(0,g.useState)(r);return e}function eu(r){let e=(0,g.createContext)(null);return{useStore:()=>{let t=(0,g.useContext)(e);if(!t)throw new Error(r);return t},Provider:({store:t,children:n})=>(0,o.jsx)(e.Provider,{value:t,children:n})}}function nt(r,e,t=Object.is){let[n,s]=(0,g.useState)(()=>e(r.get()));return(0,g.useEffect)(()=>r.subscribe(()=>{let a=e(r.get());s(i=>t(i,a)?i:a)}),[r,e,t]),(0,g.useDebugValue)(n),n}function pt(r,e,t){return nt(r,(0,g.useCallback)(n=>n[e],[e]),t)}var Pn=2;function tu(r,e,t,n,s){let a=0;return Jd((i,l)=>({locale:e,columns:t,sticky:n,skinTone:s,onEmojiSelect:r,data:null,search:"",interaction:"none",activeColumnIndex:0,activeRowIndex:0,rowHeight:null,categoryHeaderHeight:null,viewportWidth:null,viewportHeight:null,viewportCurrentCategoryIndex:null,viewportStartCategoryIndex:0,viewportStartRowIndex:0,viewportEndRowIndex:0,rootRef:null,searchRef:null,viewportRef:null,listRef:null,updateViewportState:d=>{let m=l(),u=d?.data??m.data,c=d?.categoryHeaderHeight??m.categoryHeaderHeight,f=d?.rowHeight??m.rowHeight,h=d?.viewportHeight??m.viewportHeight;if(!u||u.rows.length===0||!c||!f||!h)return i({...d,viewportStartCategoryIndex:0,viewportStartRowIndex:0,viewportEndRowIndex:0});let p=0,x=0;for(let v of u.categories)if(x++*c+v.startRowIndex*f<a)p+=c;else break;let j=u.categories.length*c+u.rows.length*f,b=Math.floor(Pn*f/2),C=Math.ceil(Pn*f/2),E=Math.min(a-p-b,j-h),A=E+h+C,D=Math.max(0,Math.floor(E/f)),w=Math.min(u.rows.length-1,Math.ceil(A/f)),M=u.rows[D]?.categoryIndex;return i(M===void 0&&d?d:{...d,viewportStartCategoryIndex:M,viewportStartRowIndex:D,viewportEndRowIndex:w})},onDataChange:d=>{l().updateViewportState({data:d,activeColumnIndex:0,activeRowIndex:0})},onSearchChange:d=>{i({search:d,interaction:d?"keyboard":"none"})},onActiveEmojiChange:(d,m,u)=>{if(i({interaction:d,activeColumnIndex:m,activeRowIndex:u}),d!=="keyboard")return;let{listRef:c,viewportRef:f,sticky:h,rowHeight:p,viewportHeight:x,categoryHeaderHeight:j}=l(),b=c?.current,C=f?.current;if(!b||!C||!p||!j||!x)return;let E=u;E===0&&C.scrollTo({top:0,behavior:"instant"});let A=b.querySelector(`[aria-rowindex="${E}"]`);if(!(A instanceof HTMLElement))return;let D=A.offsetTop,w=getComputedStyle(A),M=Number.parseFloat(w.scrollMarginTop),v=Number.parseFloat(w.scrollMarginBottom),y=a+M;h&&D<a+x/2&&(y+=j);let z=y+x-v;(D<y||D+p>z)&&C.scrollTo({top:Math.max(D<y+j?D-Math.max(h?j:0,M):D-x+p+v,0),behavior:"instant"})},onActiveEmojiReset:()=>{i({interaction:"none",activeColumnIndex:0,activeRowIndex:0})},onRowHeightChange:d=>{l().updateViewportState({rowHeight:d})},onCategoryHeaderHeightChange:d=>{l().updateViewportState({categoryHeaderHeight:d})},onViewportSizeChange:(d,m)=>{l().updateViewportState({viewportWidth:d,viewportHeight:m})},onViewportScroll:d=>{a=d,l().updateViewportState()}}))}var{useStore:Je,Provider:ru}=eu("EmojiPicker.Root is missing.");function nu(r){return r.search}function on(r){return r.interaction==="none"?void 0:r.data?.rows[r.activeRowIndex]?.emojis[r.activeColumnIndex]}function su(r){return r.data===void 0||typeof r.data?.count=="number"&&r.data.count===0}function au(r){return r.data===null||r.viewportHeight===null||r.rowHeight===null||r.categoryHeaderHeight===null}function Ba(r){return r.data?.rows.length}function iu(r){return r.data?.categories.length}function ou(r){return r.data?.categoriesStartRowIndices}function lu(r){return r.data?.skinTones}function Ha(r,e){return r?.emoji===e?.emoji}function cu(r,e){return r?.categoryIndex!==e?.categoryIndex||r?.emojis.length!==e?.emojis.length?!1:!!r?.emojis.every((t,n)=>Ha(t,e?.emojis[n]))}var Wt="",Ln=/\p{Emoji_Modifier_Base}/u,du=/\uFE0F$/,uu=/\u{1F3FB}|\u{1F3FC}|\u{1F3FD}|\u{1F3FE}|\u{1F3FF}/gu,fu={light:"","medium-light":"",medium:"","medium-dark":"",dark:""};function mu(r,e){if(!r.split(Wt).some(n=>Ln.test(n)))return r;let t=r.split(Wt).map(n=>n.replace(uu,"")).join(Wt);return e==="none"?t:t.split(Wt).map((n,s,a)=>{let i=a.length>1;return!Ln.test(n)||i&&n===""?n:n.replace(du,"")+fu[e]}).join(Wt)}function hu(r){return an.map(e=>({skinTone:e,emoji:mu(r,e)}))}function Wa(){return(0,g.useDeferredValue)(nt(Je(),on,Ha))}function Va(r=""){let e=Je(),t=pt(e,"skinTone"),n=(0,g.useMemo)(()=>hu(r),[r]);return[t,(0,g.useCallback)(s=>{e.set({skinTone:s})},[]),n]}function ln(r,e){if(Object.is(r,e))return!0;if(typeof r!="object"||typeof e!="object"||r===null||e===null||Array.isArray(r)!==Array.isArray(e))return!1;let t=Object.keys(r),n=Object.keys(e);return t.length!==n.length?!1:t.every(s=>s in e&&r[s]===e[s])}function pu(...r){}function gu(r,e){let t=null;if(typeof window.requestIdleCallback=="function")t=window.requestIdleCallback(r,e);else{let n=Date.now();t=window.setTimeout(()=>{r({didTimeout:!1,timeRemaining:()=>Math.max(0,(e?.timeout??50)-(Date.now()-n))})},10)}return()=>{typeof window.cancelIdleCallback=="function"?window.cancelIdleCallback(t):window.clearTimeout(t)}}var ct=typeof window<"u"?g.useLayoutEffect:g.useEffect;function vu(r){let e=(0,g.useRef)(r);return ct(()=>{e.current=r}),(0,g.useCallback)((...t)=>e.current(...t),[])}function xu({emojiVersion:r,emojibaseUrl:e}){let[t,n]=(0,g.useState)(void 0),s=Je(),a=pt(s,"locale"),i=pt(s,"columns"),l=pt(s,"skinTone"),d=pt(s,"search");return(0,g.useEffect)(()=>{let m=new AbortController,u=m.signal;return Yd({locale:a,emojiVersion:r,emojibaseUrl:e,signal:u}).then(c=>{n(c)}).catch(c=>{u.aborted||console.error(c)}),()=>{m.abort()}},[r,e,a]),(0,g.useEffect)(()=>{if(t)return gu(()=>{s.get().onDataChange(Zd(t,i,l,d))},{timeout:100})},[t,i,l,d]),null}var Qa=(0,g.forwardRef)(({locale:r="en",columns:e=9,skinTone:t="none",onEmojiSelect:n=pu,emojiVersion:s,emojibaseUrl:a,onFocusCapture:i,onBlurCapture:l,children:d,style:m,sticky:u=!0,...c},f)=>{let h=vu(n),p=$d(()=>tu(h,Tn(r),e,u,In(t))),[x,j]=(0,g.useState)(!1),b=(0,g.useRef)(null),C=(0,g.useCallback)(D=>{D&&(b.current=D,p.set({rootRef:b}))},[]);ct(()=>{p.set({locale:Tn(r)})},[r]),ct(()=>{p.set({columns:e})},[e]),ct(()=>{p.set({sticky:u})},[u]),ct(()=>{p.set({skinTone:In(t)})},[t]);let E=(0,g.useCallback)(D=>{i?.(D);let{searchRef:w,viewportRef:M}=p.get(),v=D.target===w?.current||D.target.hasAttribute("frimousse-search"),y=D.target===M?.current||D.target.hasAttribute("frimousse-viewport");D.isDefaultPrevented()||(j(v||y),D.isDefaultPrevented()||(j(v||y),y?p.get().onActiveEmojiChange("keyboard",0,0):v&&p.get().search===""&&p.set({interaction:"none"})))},[i]),A=(0,g.useCallback)(D=>{l?.(D),!D.isDefaultPrevented()&&!D.currentTarget.contains(D.relatedTarget)&&j(!1)},[l]);return ct(()=>{x||p.get().onActiveEmojiReset()},[x]),(0,g.useImperativeHandle)(f,()=>b.current),(0,g.useEffect)(()=>{if(!x)return;function D(w){if(w.defaultPrevented||!w.key.startsWith("Arrow")&&w.key!=="Enter")return;let{data:M,onEmojiSelect:v,onActiveEmojiChange:y,interaction:z,activeColumnIndex:T,activeRowIndex:_}=p.get();if(w.key==="Enter"){let R=on(p.get());R&&(w.preventDefault(),v(R))}if(w.key.startsWith("Arrow")){let R=T,S=_;if(w.preventDefault(),z!=="none"){if(M?.rows&&M.rows.length>0)switch(w.key){case"ArrowLeft":if(R===0){let I=S-1,k=M.rows[I];k&&(S=I,R=k.emojis.length-1)}else R-=1;break;case"ArrowRight":if(R===M.rows[S].emojis.length-1){let I=S+1;M.rows[I]&&(S=I,R=0)}else R+=1;break;case"ArrowUp":{let I=M.rows[S-1];I&&(S-=1,I.emojis[R]||(R=I.emojis.length-1));break}case"ArrowDown":{let I=M.rows[S+1];I&&(S+=1,I.emojis[R]||(R=I.emojis.length-1));break}}y("keyboard",R,S)}else y("keyboard",0,0)}}return document.addEventListener("keydown",D),()=>{document.removeEventListener("keydown",D)}},[x]),ct(()=>{let D=null,w=null,M=null,v=null,y=p.subscribe(S=>{b.current&&(D!==S.viewportWidth&&(D=S.viewportWidth,b.current.style.setProperty("--frimousse-viewport-width",`${S.viewportWidth}px`)),w!==S.viewportHeight&&(w=S.viewportHeight,b.current.style.setProperty("--frimousse-viewport-height",`${S.viewportHeight}px`)),M!==S.rowHeight&&(M=S.rowHeight,b.current.style.setProperty("--frimousse-row-height",`${S.rowHeight}px`)),v!==S.categoryHeaderHeight&&(v=S.categoryHeaderHeight,b.current.style.setProperty("--frimousse-category-header-height",`${S.categoryHeaderHeight}px`)))}),{viewportWidth:z,viewportHeight:T,rowHeight:_,categoryHeaderHeight:R}=p.get();return z&&b.current.style.setProperty("--frimousse-viewport-width",`${z}px`),T&&b.current.style.setProperty("--frimousse-viewport-height",`${T}px`),_&&b.current.style.setProperty("--frimousse-row-height",`${_}px`),R&&b.current.style.setProperty("--frimousse-category-header-height",`${R}px`),y},[]),(0,o.jsx)("div",{"data-focused":x?"":void 0,"frimousse-root":"",onBlurCapture:A,onFocusCapture:E,...c,ref:C,style:{"--frimousse-emoji-font":Pa,...m},children:(0,o.jsxs)(ru,{store:p,children:[(0,o.jsx)(xu,{emojiVersion:s,emojibaseUrl:a}),d]})})}),Ka=(0,g.forwardRef)(({value:r,defaultValue:e,onChange:t,...n},s)=>{let a=Je(),i=(0,g.useRef)(null),l=(0,g.useCallback)(c=>{c&&(i.current=c,a.set({searchRef:i}))},[]),d=typeof r=="string",m=(0,g.useRef)(d);(0,g.useEffect)(()=>{m.current=d},[d]),ct(()=>{a.set({search:typeof r=="string"?r:typeof e=="string"?e:""})},[]),ct(()=>{typeof r=="string"&&a.get().onSearchChange(r)},[r]);let u=(0,g.useCallback)(c=>{t?.(c),c.isDefaultPrevented()||a.get().onSearchChange(c.target.value)},[t]);return(0,g.useImperativeHandle)(s,()=>i.current),(0,o.jsx)("input",{autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",enterKeyHint:"done","frimousse-search":"",placeholder:"Search",spellCheck:!1,type:"search",...n,defaultValue:e,onChange:u,ref:l,value:r})}),bu=(0,g.memo)(()=>{let r=Wa();return r?(0,o.jsx)("div",{"aria-live":"polite",style:{border:0,clip:"rect(0, 0, 0, 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:1,wordWrap:"normal"},children:r.label}):null}),Ya=(0,g.forwardRef)(({children:r,onScroll:e,onKeyDown:t,style:n,...s},a)=>{let i=Je(),l=(0,g.useRef)(null),d=(0,g.useCallback)(f=>{f&&(l.current=f,i.set({viewportRef:l}))},[]),m=nt(i,Ba),u=nt(i,iu),c=(0,g.useCallback)(f=>{e?.(f),i.get().onViewportScroll(f.currentTarget.scrollTop)},[e]);return ct(()=>{if(!l.current)return;let f=new ResizeObserver(([h])=>{let p=h?.borderBoxSize[0]?.inlineSize??0,x=h?.borderBoxSize[0]?.blockSize??0,{onViewportSizeChange:j,viewportHeight:b,viewportWidth:C}=i.get();(b!==x||C!==p)&&j(p,x)});return f.observe(l.current),i.get().onViewportSizeChange(l.current.offsetWidth,l.current.clientHeight),()=>{f.disconnect()}},[]),(0,g.useImperativeHandle)(a,()=>l.current),(0,o.jsxs)("div",{"frimousse-viewport":"",...s,onScroll:c,ref:d,style:{position:"relative",boxSizing:"border-box",contain:"layout paint",containIntrinsicSize:typeof m=="number"&&typeof u=="number"?`var(--frimousse-viewport-width, auto) calc(${m} * var(--frimousse-row-height) + ${u} * var(--frimousse-category-header-height))`:void 0,overflowY:"auto",overscrollBehavior:"contain",scrollbarGutter:"stable",willChange:"scroll-position",...n},children:[(0,o.jsx)(bu,{}),r]})});function Xa(r,e,t){return{emoji:{...r,isActive:t},role:"gridcell","aria-colindex":e,"aria-selected":t||void 0,"aria-label":r.label,"data-active":t?"":void 0,"frimousse-emoji":"",style:{fontFamily:"var(--frimousse-emoji-font)"},tabIndex:-1}}function Ga(r,e=!1){return{role:e?void 0:"row","aria-rowindex":e?void 0:r,"frimousse-row":"",style:{contain:e?void 0:"content",height:e?void 0:"var(--frimousse-row-height)",display:"flex"}}}function Za(r,e){return{"frimousse-category":"",style:{contain:"content",top:e?`calc(${r} * var(--frimousse-category-header-height) + ${e.startRowIndex} * var(--frimousse-row-height))`:void 0,height:e?`calc(var(--frimousse-category-header-height) + ${e.rowsCount} * var(--frimousse-row-height))`:void 0,width:"100%",pointerEvents:"none",position:"absolute"}}}function Ja(r,e=!1,t=!0){return{category:r,"frimousse-category-header":"",style:{contain:e?void 0:"layout paint",height:e?void 0:"var(--frimousse-category-header-height)",pointerEvents:"auto",position:t?"sticky":void 0,top:0}}}function Fn(r,e,t,n){return{"frimousse-list-sizer":"",style:{position:"relative",boxSizing:"border-box",height:`calc(${r} * var(--frimousse-row-height) + ${e} * var(--frimousse-category-header-height))`,paddingTop:`calc(${t} * var(--frimousse-row-height) + ${n} * var(--frimousse-category-header-height))`}}}function On(r,e,t){return{"aria-colcount":r,"aria-rowcount":e,"frimousse-list":"",style:{"--frimousse-list-columns":r,...t},role:"grid"}}function yu(r){r.preventDefault()}var wu=(0,g.memo)(({Emoji:r,emoji:e,columnIndex:t,rowIndex:n})=>{let s=Je(),a=nt(s,m=>on(m)?.emoji===e.emoji),i=(0,g.useCallback)(()=>{s.get().onEmojiSelect(e)},[e]),l=(0,g.useCallback)(()=>{s.get().onActiveEmojiChange("pointer",t,n)},[t,n]),d=(0,g.useCallback)(()=>{s.get().onActiveEmojiReset()},[]);return(0,o.jsx)(r,{...Xa(e,t,a),onClick:i,onPointerDown:yu,onPointerEnter:l,onPointerLeave:d})}),ju=(0,g.memo)(({Row:r,Emoji:e,rowIndex:t})=>{let n=nt(Je(),s=>s.data?.rows[t],cu);return n?(0,o.jsx)(r,{...Ga(t),children:n.emojis.map((s,a)=>(0,o.jsx)(wu,{Emoji:e,columnIndex:a,emoji:s,rowIndex:t},s.label))}):null}),ku=(0,g.memo)(({CategoryHeader:r,categoryIndex:e})=>{let t=Je(),n=nt(t,a=>a.data?.categories[e],ln),s=pt(t,"sticky");return n?(0,o.jsx)("div",{...Za(e,n),children:(0,o.jsx)(r,{...Ja({label:n.label},!1,s)})}):null}),Un=(0,g.memo)(({CategoryHeader:r,Row:e,Emoji:t})=>{let n=(0,g.useRef)(null),s=Je(),a=pt(s,"columns"),i=(0,g.useMemo)(()=>Array(a).fill({emoji:"",label:""}),[a]),l=(0,g.useMemo)(()=>({label:"Category"}),[]),d=(0,g.useRef)(null),m=(0,g.useRef)(null);return ct(()=>{let u=n.current?.parentElement?.parentElement;if(!u||!d.current||!m.current)return;let c=new ResizeObserver(p=>{for(let x of p){let j=x.contentRect.height,{onRowHeightChange:b,onCategoryHeaderHeightChange:C,rowHeight:E,categoryHeaderHeight:A}=s.get();x.target===d.current&&E!==j&&b(j),x.target===m.current&&A!==j&&C(j)}});c.observe(u),c.observe(d.current),c.observe(m.current);let{onRowHeightChange:f,onCategoryHeaderHeightChange:h}=s.get();return f(d.current.clientHeight),h(m.current.clientHeight),()=>{c.disconnect()}},[]),(0,o.jsxs)("div",{"aria-hidden":!0,ref:n,style:{height:0,visibility:"hidden"},children:[(0,o.jsx)("div",{"frimousse-row-sizer":"",ref:d,children:(0,o.jsx)(e,{...Ga(-1,!0),children:i.map((u,c)=>(0,o.jsx)(t,{...Xa(u,c,!1)},c))})}),(0,o.jsx)("div",{...Za(-1),children:(0,o.jsx)("div",{"frimousse-category-header-sizer":"",ref:m,children:(0,o.jsx)(r,{...Ja(l,!0)})})})]})});function Nu({category:r,...e}){return(0,o.jsx)("div",{...e,children:r.label})}function _u({emoji:r,...e}){return(0,o.jsx)("button",{type:"button",...e,children:r.emoji})}function Cu({...r}){return(0,o.jsx)("div",{...r})}var $a=(0,g.forwardRef)(({style:r,components:e,...t},n)=>{let s=Je(),a=(0,g.useRef)(null),i=(0,g.useCallback)(b=>{b&&(a.current=b,s.set({listRef:a}))},[]),l=e?.CategoryHeader??Nu,d=e?.Emoji??_u,m=e?.Row??Cu,u=pt(s,"columns"),c=pt(s,"viewportStartRowIndex"),f=pt(s,"viewportEndRowIndex"),h=nt(s,Ba),p=nt(s,ou,ln),x=(0,g.useMemo)(()=>p?.filter(b=>b<c).length??0,[p,c]),j=p?.length??0;return(0,g.useImperativeHandle)(n,()=>a.current),!h||!p||j===0?(0,o.jsx)("div",{...On(u,0,r),...t,children:(0,o.jsx)("div",{...Fn(0,0,0,0),children:(0,o.jsx)(Un,{CategoryHeader:l,Emoji:d,Row:m})})}):(0,o.jsx)("div",{...On(u,h,r),...t,ref:i,children:(0,o.jsxs)("div",{...Fn(h,j,c,x),children:[(0,o.jsx)(Un,{CategoryHeader:l,Emoji:d,Row:m}),Array.from({length:f-c+1},(b,C)=>{let E=c+C;return(0,o.jsxs)(g.Fragment,{children:[p.indexOf(E)>=0&&(0,o.jsx)("div",{style:{height:"var(--frimousse-category-header-height)"}}),(0,o.jsx)(ju,{Emoji:d,Row:m,rowIndex:E})]},E)}),Array.from({length:j},(b,C)=>(0,o.jsx)(ku,{CategoryHeader:l,categoryIndex:C},C))]})})}),ei=(0,g.forwardRef)(({emoji:r,onClick:e,"aria-label":t="Change skin tone",...n},s)=>{let a=nt(Je(),lu,ln),[i,l,d]=Va(r),m=(0,g.useMemo)(()=>Math.max(0,d.findIndex(x=>x.skinTone===i)),[i,d]),u=d[m],c=d[(m+1)%d.length].skinTone,f=i==="none"?void 0:a?.[i],h=c==="none"?void 0:a?.[c],p=(0,g.useCallback)(x=>{e?.(x),x.isDefaultPrevented()||l(c)},[e,l,c]);return(0,o.jsx)("button",{type:"button",...n,"aria-label":t+(h?` (${h})`:""),"aria-live":"polite","aria-valuetext":f,"frimousse-skin-tone-selector":"",onClick:p,ref:s,children:u.emoji})});function ti({children:r,...e}){return nt(Je(),au)?(0,o.jsx)("span",{"frimousse-loading":"",...e,children:r}):null}function zu({children:r}){return r({search:nt(Je(),nu)})}function ri({children:r,...e}){return nt(Je(),su)?(0,o.jsx)("span",{"frimousse-empty":"",...e,children:typeof r=="function"?(0,o.jsx)(zu,{children:r}):r}):null}function ni({children:r}){return r({emoji:Wa()})}function si({children:r,emoji:e}){let[t,n,s]=Va(e);return r({skinTone:t,setSkinTone:n,skinToneVariations:s})}Qa.displayName="EmojiPicker.Root";Ka.displayName="EmojiPicker.Search";Ya.displayName="EmojiPicker.Viewport";$a.displayName="EmojiPicker.List";ti.displayName="EmojiPicker.Loading";ri.displayName="EmojiPicker.Empty";ei.displayName="EmojiPicker.SkinToneSelector";ni.displayName="EmojiPicker.ActiveEmoji";si.displayName="EmojiPicker.SkinTone";var Su=ne(),Au=r=>{const e=(0,Su.c)(10),{onEmojiSelect:t,className:n}=r;let s;e[0]!==n?(s=X("isolate flex h-[350px] w-[320px] flex-col overflow-hidden rounded-xl border border-zinc-200 bg-white shadow-xl dark:border-zinc-800 dark:bg-zinc-950",n),e[0]=n,e[1]=s):s=e[1];let a;e[2]===Symbol.for("react.memo_cache_sentinel")?(a=(0,o.jsx)(St.Search,{className:"z-10 mx-3 mt-3 appearance-none rounded-lg border-none bg-zinc-100 px-3 py-2 text-sm outline-none placeholder:text-zinc-500 focus:ring-1 focus:ring-violet-500 dark:bg-zinc-900 dark:text-white",placeholder:"Search emojis..."}),e[2]=a):a=e[2];let i,l;e[3]===Symbol.for("react.memo_cache_sentinel")?(i=(0,o.jsx)(St.Loading,{className:"absolute inset-0 flex items-center justify-center text-sm text-zinc-400 dark:text-zinc-500",children:"Loading"}),l=(0,o.jsx)(St.Empty,{className:"absolute inset-0 flex items-center justify-center text-sm text-zinc-400 dark:text-zinc-500",children:"No emoji found."}),e[3]=i,e[4]=l):(i=e[3],l=e[4]);let d,m;e[5]===Symbol.for("react.memo_cache_sentinel")?(d=(0,o.jsxs)(St.Viewport,{className:"relative flex-1 outline-none no-scrollbar",children:[i,l,(0,o.jsx)(St.List,{className:"select-none pb-2",components:{CategoryHeader:Eu,Row:Ru,Emoji:Mu}})]}),m=(0,o.jsx)(St.ActiveEmoji,{children:Du}),e[5]=d,e[6]=m):(d=e[5],m=e[6]);let u;return e[7]!==t||e[8]!==s?(u=(0,o.jsxs)(St.Root,{onEmojiSelect:t,className:s,children:[a,d,m]}),e[7]=t,e[8]=s,e[9]=u):u=e[9],u},cp=Au;function Eu(r){const{category:e,...t}=r;return(0,o.jsx)("div",{className:"bg-white/80 px-4 pb-1.5 pt-4 text-[11px] font-bold uppercase tracking-wider text-zinc-500 backdrop-blur-sm dark:bg-zinc-950/80 dark:text-zinc-400",...t,children:e.label})}function Ru(r){const{children:e,...t}=r;return(0,o.jsx)("div",{className:"scroll-my-1 px-2",...t,children:e})}function Mu(r){const{emoji:e,...t}=r;return(0,o.jsx)("button",{className:"flex aspect-square size-9 items-center justify-center rounded-lg text-xl transition-colors hover:bg-zinc-100 data-[active]:bg-violet-500/10 data-[active]:text-violet-500 dark:hover:bg-zinc-900 dark:data-[active]:bg-violet-500/20",...t,children:e.emoji})}function Du(r){const{emoji:e}=r;return(0,o.jsx)("div",{className:"flex items-center gap-3 border-t border-zinc-100 p-3 dark:border-zinc-800",children:e?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("span",{className:"text-2xl",children:e.emoji}),(0,o.jsx)("span",{className:"truncate text-xs font-bold text-zinc-600 dark:text-zinc-400",children:e.label.replace(/:/g,"").replace(/_/g," ")})]}):(0,o.jsx)("span",{className:"text-xs font-medium text-zinc-400",children:"Select an emoji..."})})}var Tu=ne(),Iu=r=>{const e=(0,Tu.c)(33),{src:t,isOpen:n,onClose:s,onCropComplete:a,aspect:i,circular:l}=r,[d,m]=(0,g.useState)(),[u,c]=(0,g.useState)(null),f=(0,g.useRef)(null);let h;e[0]!==i?(h=_=>{const{width:R,height:S}=_.currentTarget;m(i?Wi(Yi({unit:"%",width:100},i,R,S),R,S):{unit:"%",width:100,height:100,x:0,y:0})},e[0]=i,e[1]=h):h=e[1];const p=h;let x;e[2]!==u||e[3]!==s||e[4]!==a?(x=async()=>{if(u&&f.current)try{a(await ol(f.current,u)),s()}catch(_){console.error("Error cropping image:",_)}},e[2]=u,e[3]=s,e[4]=a,e[5]=x):x=e[5];const j=x;let b;e[6]!==s?(b=_=>!_&&s(),e[6]=s,e[7]=b):b=e[7];let C;e[8]===Symbol.for("react.memo_cache_sentinel")?(C=(0,o.jsx)(rn,{className:"shrink-0 p-4",children:(0,o.jsx)(sn,{children:"Crop Image"})}),e[8]=C):C=e[8];let E,A;e[9]===Symbol.for("react.memo_cache_sentinel")?(E=_=>m(_),A=_=>c(_),e[9]=E,e[10]=A):(E=e[9],A=e[10]);let D;e[11]!==p||e[12]!==t?(D=(0,o.jsx)("img",{ref:f,src:t,alt:"Crop preview",onLoad:p,className:"block max-h-[60vh] w-auto"}),e[11]=p,e[12]=t,e[13]=D):D=e[13];let w;e[14]!==i||e[15]!==l||e[16]!==d||e[17]!==D?(w=(0,o.jsx)("div",{className:"flex max-h-[65vh] min-h-[300px] items-center justify-center overflow-auto bg-zinc-100/50 p-6 dark:bg-zinc-950/50",children:(0,o.jsx)(Xi,{crop:d,onChange:E,onComplete:A,aspect:i,circularCrop:l,className:"max-w-full shadow-2xl",children:D})}),e[14]=i,e[15]=l,e[16]=d,e[17]=D,e[18]=w):w=e[18];let M;e[19]!==s?(M=(0,o.jsx)(Ie,{variant:"outline",onClick:s,className:"!w-auto px-6",children:"Cancel"}),e[19]=s,e[20]=M):M=e[20];let v;e[21]!==j?(v=(0,o.jsx)(Ie,{onClick:j,className:"!w-auto px-6",children:"Apply Crop"}),e[21]=j,e[22]=v):v=e[22];let y;e[23]!==v||e[24]!==M?(y=(0,o.jsxs)(nn,{className:"flex shrink-0 flex-row justify-end gap-2 bg-white p-4 dark:bg-zinc-900",children:[M,v]}),e[23]=v,e[24]=M,e[25]=y):y=e[25];let z;e[26]!==y||e[27]!==w?(z=(0,o.jsxs)(tn,{className:"overflow-hidden bg-white p-0 sm:max-w-2xl dark:bg-zinc-900",children:[C,w,y]}),e[26]=y,e[27]=w,e[28]=z):z=e[28];let T;return e[29]!==n||e[30]!==z||e[31]!==b?(T=(0,o.jsx)(Ma,{open:n,onOpenChange:b,children:z}),e[29]=n,e[30]=z,e[31]=b,e[32]=T):T=e[32],T},Pu=Iu,Lu=ne(),Fu=r=>{const e=(0,Lu.c)(105),{images:t,currentIndex:n,onClose:s,onNavigate:a}=r,i=n===void 0?0:n,[l,d]=(0,g.useState)(1);let m;e[0]===Symbol.for("react.memo_cache_sentinel")?(m={x:0,y:0},e[0]=m):m=e[0];const[u,c]=(0,g.useState)(m),[f,h]=(0,g.useState)(!1);let p;e[1]===Symbol.for("react.memo_cache_sentinel")?(p={x:0,y:0},e[1]=p):p=e[1];const[x,j]=(0,g.useState)(p),[b,C]=(0,g.useState)(null),[E,A]=(0,g.useState)(null),D=(0,g.useRef)(null),w=(0,g.useRef)(null);let M;e[2]===Symbol.for("react.memo_cache_sentinel")?(M=()=>d(Uu),e[2]=M):M=e[2];const v=M;let y;e[3]===Symbol.for("react.memo_cache_sentinel")?(y=()=>{d(ee=>{const xe=Math.max(ee-.5,1);return xe===1&&c({x:0,y:0}),xe})},e[3]=y):y=e[3];const z=y;let T;e[4]===Symbol.for("react.memo_cache_sentinel")?(T=()=>{d(1),c({x:0,y:0})},e[4]=T):T=e[4];const _=T;let R;e[5]!==i||e[6]!==a?(R=()=>{i>0&&(_(),a(i-1))},e[5]=i,e[6]=a,e[7]=R):R=e[7];const S=R;let I;e[8]!==i||e[9]!==t?.length||e[10]!==a?(I=()=>{i<(t?.length||0)-1&&(_(),a(i+1))},e[8]=i,e[9]=t?.length,e[10]=a,e[11]=I):I=e[11],t?.length;const k=I;let N;e[12]!==k||e[13]!==S||e[14]!==s?(N=()=>{const ee=xe=>{xe.key==="Escape"&&s(),xe.key==="ArrowLeft"&&S(),xe.key==="ArrowRight"&&k()};return window.addEventListener("keydown",ee),()=>window.removeEventListener("keydown",ee)},e[12]=k,e[13]=S,e[14]=s,e[15]=N):N=e[15];let F;if(e[16]!==i||e[17]!==k||e[18]!==S||e[19]!==s?(F=[i,s,S,k],e[16]=i,e[17]=k,e[18]=S,e[19]=s,e[20]=F):F=e[20],(0,g.useEffect)(N,F),!t||t.length===0)return null;const P=t[i],O=t.length>1;let H;e[21]!==u.x||e[22]!==u.y||e[23]!==l?(H=ee=>{l>1&&(h(!0),j({x:ee.clientX-u.x,y:ee.clientY-u.y}))},e[21]=u.x,e[22]=u.y,e[23]=l,e[24]=H):H=e[24];const q=H;let B;e[25]!==x||e[26]!==f||e[27]!==l?(B=ee=>{f&&l>1&&c({x:ee.clientX-x.x,y:ee.clientY-x.y})},e[25]=x,e[26]=f,e[27]=l,e[28]=B):B=e[28];const U=B;let L;e[29]===Symbol.for("react.memo_cache_sentinel")?(L=()=>h(!1),e[29]=L):L=e[29];const Q=L;let G;e[30]!==u.x||e[31]!==u.y||e[32]!==l?(G=ee=>{ee.touches.length===1?(C({x:ee.touches[0].clientX,y:ee.touches[0].clientY,time:Date.now()}),l>1&&(h(!0),j({x:ee.touches[0].clientX-u.x,y:ee.touches[0].clientY-u.y}))):ee.touches.length===2&&A(Math.hypot(ee.touches[0].clientX-ee.touches[1].clientX,ee.touches[0].clientY-ee.touches[1].clientY))},e[30]=u.x,e[31]=u.y,e[32]=l,e[33]=G):G=e[33];const K=G;let V;e[34]!==x||e[35]!==E||e[36]!==f||e[37]!==l?(V=ee=>{if(ee.touches.length===1)f&&l>1&&c({x:ee.touches[0].clientX-x.x,y:ee.touches[0].clientY-x.y});else if(ee.touches.length===2&&E){const xe=Math.hypot(ee.touches[0].clientX-ee.touches[1].clientX,ee.touches[0].clientY-ee.touches[1].clientY);d(Math.min(Math.max(l*(xe/E),1),4)),A(xe)}},e[34]=x,e[35]=E,e[36]=f,e[37]=l,e[38]=V):V=e[38];const J=V;let $;e[39]!==k||e[40]!==S||e[41]!==l||e[42]!==b?($=ee=>{if(ee.touches.length<2&&A(null),h(!1),b&&l===1){const xe={x:ee.changedTouches[0].clientX,y:ee.changedTouches[0].clientY},je=xe.x-b.x,Se=xe.y-b.y,Pe=Date.now()-b.time;Math.abs(je)>50&&Math.abs(Se)<50&&Pe<300&&(je>0?S():k())}C(null)},e[39]=k,e[40]=S,e[41]=l,e[42]=b,e[43]=$):$=e[43];const Z=$;let oe;e[44]!==P?(oe=ee=>{ee.stopPropagation();const xe=document.createElement("a");xe.href=P,xe.download=`sysm-${Date.now()}.jpg`,document.body.appendChild(xe),xe.click(),document.body.removeChild(xe)},e[44]=P,e[45]=oe):oe=e[45];const re=oe,te=O?`${i+1} / ${t.length}`:"Image View";let le;e[46]!==te?(le=(0,o.jsx)("div",{className:"flex flex-col",children:(0,o.jsx)("span",{className:"text-lg font-bold text-white drop-shadow-md",children:te})}),e[46]=te,e[47]=le):le=e[47];let ae;e[48]===Symbol.for("react.memo_cache_sentinel")?(ae=(0,o.jsx)("button",{onClick:z,className:"hidden rounded-full p-2 text-white transition-colors hover:bg-white/10 sm:block",children:(0,o.jsx)(ho,{size:20})}),e[48]=ae):ae=e[48];let fe;e[49]===Symbol.for("react.memo_cache_sentinel")?(fe=(0,o.jsx)("button",{onClick:v,className:"hidden rounded-full p-2 text-white transition-colors hover:bg-white/10 sm:block",children:(0,o.jsx)(go,{size:20})}),e[49]=fe):fe=e[49];let se;e[50]===Symbol.for("react.memo_cache_sentinel")?(se=(0,o.jsx)("button",{onClick:_,className:"rounded-full p-2 text-white transition-colors hover:bg-white/10",children:(0,o.jsx)(Ho,{size:20})}),e[50]=se):se=e[50];let be;e[51]===Symbol.for("react.memo_cache_sentinel")?(be=(0,o.jsx)(tl,{size:20}),e[51]=be):be=e[51];let ye;e[52]!==re?(ye=(0,o.jsx)("button",{onClick:re,className:"rounded-full p-2 text-white transition-colors hover:bg-white/10",children:be}),e[52]=re,e[53]=ye):ye=e[53];let ie;e[54]===Symbol.for("react.memo_cache_sentinel")?(ie=(0,o.jsx)("div",{className:"mx-1 hidden h-6 w-px bg-white/20 sm:block"}),e[54]=ie):ie=e[54];let ve;e[55]===Symbol.for("react.memo_cache_sentinel")?(ve=(0,o.jsx)(kt,{size:24}),e[55]=ve):ve=e[55];let me;e[56]!==s?(me=(0,o.jsx)("button",{onClick:s,className:"rounded-full bg-white/10 p-2 text-white transition-all hover:bg-white/20",children:ve}),e[56]=s,e[57]=me):me=e[57];let Ne;e[58]!==ye||e[59]!==me?(Ne=(0,o.jsxs)("div",{className:"flex items-center gap-1 sm:gap-3",onClick:qu,children:[ae,fe,se,ye,ie,me]}),e[58]=ye,e[59]=me,e[60]=Ne):Ne=e[60];let _e;e[61]!==le||e[62]!==Ne?(_e=(0,o.jsxs)("div",{className:"absolute left-0 right-0 top-0 z-20 flex items-center justify-between bg-gradient-to-b from-black/60 to-transparent p-4",children:[le,Ne]}),e[61]=le,e[62]=Ne,e[63]=_e):_e=e[63];let we;e[64]!==i||e[65]!==S||e[66]!==O||e[67]!==l?(we=O&&i>0&&l===1&&(0,o.jsx)("button",{onClick:ee=>{ee.stopPropagation(),S()},className:"absolute left-6 z-10 hidden rounded-full bg-white/5 p-4 text-white backdrop-blur-sm transition-all hover:bg-white/10 active:scale-90 md:flex",children:(0,o.jsx)(xs,{size:32})}),e[64]=i,e[65]=S,e[66]=O,e[67]=l,e[68]=we):we=e[68];const Re=`translate(${u.x}px, ${u.y}px) scale(${l})`;let Me;e[69]!==Re?(Me={transform:Re},e[69]=Re,e[70]=Me):Me=e[70];let ce;e[71]!==P?(ce=(0,o.jsx)("img",{ref:w,src:P,className:"max-h-[85vh] max-w-[95vw] select-none rounded-sm object-contain shadow-2xl",alt:"",draggable:!1}),e[71]=P,e[72]=ce):ce=e[72];let Ce;e[73]!==q||e[74]!==Me||e[75]!==ce?(Ce=(0,o.jsx)("div",{className:"relative cursor-grab transition-transform duration-200 ease-out active:cursor-grabbing",style:Me,onMouseDown:q,onClick:Bu,children:ce}),e[73]=q,e[74]=Me,e[75]=ce,e[76]=Ce):Ce=e[76];let ke;e[77]!==i||e[78]!==k||e[79]!==O||e[80]!==t.length||e[81]!==l?(ke=O&&i<t.length-1&&l===1&&(0,o.jsx)("button",{onClick:ee=>{ee.stopPropagation(),k()},className:"absolute right-6 z-10 hidden rounded-full bg-white/5 p-4 text-white backdrop-blur-sm transition-all hover:bg-white/10 active:scale-90 md:flex",children:(0,o.jsx)(jr,{size:32})}),e[77]=i,e[78]=k,e[79]=O,e[80]=t.length,e[81]=l,e[82]=ke):ke=e[82];let Ae;e[83]!==we||e[84]!==Ce||e[85]!==ke?(Ae=(0,o.jsxs)("div",{className:"relative flex h-full w-full items-center justify-center",children:[we,Ce,ke]}),e[83]=we,e[84]=Ce,e[85]=ke,e[86]=Ae):Ae=e[86];let Ee;e[87]!==i||e[88]!==O||e[89]!==t||e[90]!==a?(Ee=O&&(0,o.jsx)("div",{className:"hide-scrollbar absolute bottom-8 flex max-w-[90%] gap-3 overflow-x-auto rounded-2xl border border-white/10 bg-black/40 p-3 backdrop-blur-xl",onClick:Hu,children:t.map((ee,xe)=>(0,o.jsx)("button",{onClick:()=>{_(),a(xe)},className:`size-14 shrink-0 overflow-hidden rounded-xl border-2 transition-all ${xe===i?"scale-110 border-violet-500 shadow-lg shadow-violet-500/20":"border-transparent opacity-40 hover:opacity-100"}`,children:(0,o.jsx)("img",{src:ee,className:"size-full object-cover",alt:""})},xe))}),e[87]=i,e[88]=O,e[89]=t,e[90]=a,e[91]=Ee):Ee=e[91];let De;e[92]!==O||e[93]!==l?(De=l===1&&O&&(0,o.jsx)("div",{className:"absolute bottom-4 text-[10px] font-bold uppercase tracking-widest text-white/30 md:hidden",children:"Swipe to navigate"}),e[92]=O,e[93]=l,e[94]=De):De=e[94];let tt;return e[95]!==U||e[96]!==Z||e[97]!==J||e[98]!==K||e[99]!==s||e[100]!==_e||e[101]!==Ae||e[102]!==Ee||e[103]!==De?(tt=(0,o.jsxs)("div",{ref:D,className:"fixed inset-0 z-[100] flex touch-none flex-col items-center justify-center overflow-hidden bg-black/95 backdrop-blur-md",onMouseMove:U,onMouseUp:Q,onMouseLeave:Q,onTouchStart:K,onTouchMove:J,onTouchEnd:Z,onClick:s,children:[_e,Ae,Ee,De]}),e[95]=U,e[96]=Z,e[97]=J,e[98]=K,e[99]=s,e[100]=_e,e[101]=Ae,e[102]=Ee,e[103]=De,e[104]=tt):tt=e[104],tt},Ou=Fu;function Uu(r){return Math.min(r+.5,4)}function qu(r){return r.stopPropagation()}function Bu(r){return r.stopPropagation()}function Hu(r){return r.stopPropagation()}var Wu=ne(),ai=g.forwardRef((r,e)=>{const t=(0,Wu.c)(20);let n,s,a,i,l;t[0]!==r?({className:n,label:s,type:l,textarea:i,...a}=r,t[0]=r,t[1]=n,t[2]=s,t[3]=a,t[4]=i,t[5]=l):(n=t[1],s=t[2],a=t[3],i=t[4],l=t[5]);const d=i?"textarea":"input";let m;t[6]!==s?(m=s&&(0,o.jsx)("label",{className:"text-sm font-bold text-zinc-500 dark:text-zinc-400 ml-1",children:s}),t[6]=s,t[7]=m):m=t[7];const u=i&&"min-h-[120px] resize-none";let c;t[8]!==n||t[9]!==u?(c=X("flex w-full rounded-2xl border border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-950 px-4 py-3 text-[15px] ring-offset-white file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-zinc-400 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-violet-500/20 focus-visible:border-violet-500 disabled:cursor-not-allowed disabled:opacity-50 dark:ring-offset-zinc-950 dark:text-white transition-all shadow-sm",u,n),t[8]=n,t[9]=u,t[10]=c):c=t[10];const f=e;let h;t[11]!==d||t[12]!==a||t[13]!==c||t[14]!==f||t[15]!==l?(h=(0,o.jsx)(d,{type:l,className:c,ref:f,...a}),t[11]=d,t[12]=a,t[13]=c,t[14]=f,t[15]=l,t[16]=h):h=t[16];let p;return t[17]!==m||t[18]!==h?(p=(0,o.jsxs)("div",{className:"w-full space-y-1.5",children:[m,h]}),t[17]=m,t[18]=h,t[19]=p):p=t[19],p});ai.displayName="Input";var gt=ai,Vu=ne(),Qu=r=>{const e=(0,Vu.c)(28),{isOpen:t,onClose:n,title:s,children:a,footer:i,description:l,className:d}=r;let m;e[0]!==n?(m=D=>{D||n()},e[0]=n,e[1]=m):m=e[1];const u=m;let c;e[2]!==d?(c=X("flex max-h-[calc(100dvh-1rem)] flex-col gap-0 overflow-hidden bg-white p-0 sm:max-w-md dark:bg-zinc-900",d),e[2]=d,e[3]=c):c=e[3];const f=!s&&"sr-only";let h;e[4]!==f?(h=X("shrink-0 border-b border-zinc-100 px-5 py-4 dark:border-zinc-800",f),e[4]=f,e[5]=h):h=e[5];let p;e[6]!==s?(p=(0,o.jsx)(sn,{className:"text-center text-lg font-bold",children:s}),e[6]=s,e[7]=p):p=e[7];let x;e[8]!==l?(x=l&&(0,o.jsx)(Ta,{className:"text-center",children:l}),e[8]=l,e[9]=x):x=e[9];let j;e[10]!==h||e[11]!==p||e[12]!==x?(j=(0,o.jsxs)(rn,{className:h,children:[p,x]}),e[10]=h,e[11]=p,e[12]=x,e[13]=j):j=e[13];let b;e[14]!==a?(b=(0,o.jsx)("div",{className:"flex min-h-0 flex-1 flex-col overflow-hidden",children:a}),e[14]=a,e[15]=b):b=e[15];let C;e[16]!==i?(C=i&&(0,o.jsx)(nn,{className:"shrink-0 border-t border-zinc-100 bg-white px-5 py-4 dark:border-zinc-800 dark:bg-zinc-900",children:i}),e[16]=i,e[17]=C):C=e[17];let E;e[18]!==n||e[19]!==c||e[20]!==j||e[21]!==b||e[22]!==C?(E=(0,o.jsxs)(tn,{onDragClose:n,className:c,children:[j,b,C]}),e[18]=n,e[19]=c,e[20]=j,e[21]=b,e[22]=C,e[23]=E):E=e[23];let A;return e[24]!==u||e[25]!==t||e[26]!==E?(A=(0,o.jsx)(Ma,{open:t,onOpenChange:u,children:E}),e[24]=u,e[25]=t,e[26]=E,e[27]=A):A=e[27],A},zt=Qu,Ku=ne(),Yu=r=>{const e=(0,Ku.c)(20),{title:t,message:n,icon:s,showHome:a,showBack:i}=r,l=t===void 0?"Not Found":t,d=n===void 0?"The content you are looking for doesn't exist or has been removed.":n,m=s===void 0?zs:s,u=a===void 0?!0:a,c=i===void 0?!0:i,f=Ot();let h;e[0]!==m?(h=(0,o.jsx)("div",{className:"mb-6 rounded-full bg-zinc-100 p-6 dark:bg-zinc-900",children:(0,o.jsx)(m,{size:48,className:"text-zinc-400 dark:text-zinc-600"})}),e[0]=m,e[1]=h):h=e[1];let p;e[2]!==l?(p=(0,o.jsx)("h2",{className:"mb-2 text-2xl font-black dark:text-white",children:l}),e[2]=l,e[3]=p):p=e[3];let x;e[4]!==d?(x=(0,o.jsx)("p",{className:"mb-8 max-w-xs leading-relaxed text-zinc-500 dark:text-zinc-400",children:d}),e[4]=d,e[5]=x):x=e[5];let j;e[6]!==f||e[7]!==c?(j=c&&(0,o.jsxs)(Ie,{variant:"secondary",onClick:()=>f(-1),className:"rounded-full px-6",children:[(0,o.jsx)(Qo,{size:18,className:"mr-2"}),"Go Back"]}),e[6]=f,e[7]=c,e[8]=j):j=e[8];let b;e[9]!==f||e[10]!==u?(b=u&&(0,o.jsxs)(Ie,{onClick:()=>f("/"),className:"rounded-full bg-zinc-900 px-6 text-white dark:bg-white dark:text-zinc-900",children:[(0,o.jsx)(xo,{size:18,className:"mr-2"}),"Home"]}),e[9]=f,e[10]=u,e[11]=b):b=e[11];let C;e[12]!==b||e[13]!==j?(C=(0,o.jsxs)("div",{className:"flex flex-wrap items-center justify-center gap-3",children:[j,b]}),e[12]=b,e[13]=j,e[14]=C):C=e[14];let E;return e[15]!==C||e[16]!==h||e[17]!==p||e[18]!==x?(E=(0,o.jsxs)("div",{className:"animate-in fade-in zoom-in-95 flex min-h-[400px] flex-col items-center justify-center p-8 text-center duration-300",children:[h,p,x,C]}),e[15]=C,e[16]=h,e[17]=p,e[18]=x,e[19]=E):E=e[19],E},dp=Yu,Xu=ne(),up=To,fp=no;var Gu=g.forwardRef((r,e)=>{const t=(0,Xu.c)(13);let n,s,a,i;t[0]!==r?({className:n,align:a,sideOffset:i,...s}=r,t[0]=r,t[1]=n,t[2]=s,t[3]=a,t[4]=i):(n=t[1],s=t[2],a=t[3],i=t[4]);const l=a===void 0?"center":a,d=i===void 0?4:i;let m;t[5]!==n?(m=X("z-50 w-72 rounded-md border border-zinc-200 bg-white p-4 text-zinc-950 shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 dark:border-zinc-800 dark:bg-zinc-950 dark:text-zinc-50",n),t[5]=n,t[6]=m):m=t[6];let u;return t[7]!==l||t[8]!==s||t[9]!==e||t[10]!==d||t[11]!==m?(u=(0,o.jsx)(vo,{children:(0,o.jsx)(ms,{ref:e,align:l,sideOffset:d,className:m,...s})}),t[7]=l,t[8]=s,t[9]=e,t[10]=d,t[11]=m,t[12]=u):u=t[12],u});Gu.displayName=ms.displayName;var Zu=ne();const Ju=(r,e,t)=>{const n=(0,Zu.c)(61),s=r?.id,a=jt(),i=r?.follower_count||0,l=r?.following_count||0;let d;n[0]!==i||n[1]!==l?(d={followers:i,following:l},n[0]=i,n[1]=l,n[2]=d):d=n[2];const[m,u]=(0,g.useState)(d);let c,f;n[3]!==r?(c=()=>{r&&u({followers:r.follower_count||0,following:r.following_count||0})},f=[r],n[3]=r,n[4]=c,n[5]=f):(c=n[4],f=n[5]),(0,g.useEffect)(c,f);let h;n[6]!==e||n[7]!==s?(h=s&&Er(s)&&e&&Er(e),n[6]=e,n[7]=s,n[8]=h):h=n[8];const p=h;let x,j;n[9]!==e||n[10]!==s?(x=["isFollowing",e,s],j=()=>kl(e,s),n[9]=e,n[10]=s,n[11]=x,n[12]=j):(x=n[11],j=n[12]);const b=!!p;let C;n[13]!==x||n[14]!==j||n[15]!==b?(C={queryKey:x,queryFn:j,enabled:b,staleTime:1/0},n[13]=x,n[14]=j,n[15]=b,n[16]=C):C=n[16];const{data:E}=yt(C),A=E===void 0?!1:E;let D,w,M;n[17]!==s?(D=["followStats",s],w=async()=>{const P=await Nl(s);return u(P),P},M=!!s&&Er(s),n[17]=s,n[18]=D,n[19]=w,n[20]=M):(D=n[18],w=n[19],M=n[20]);let v;n[21]!==D||n[22]!==w||n[23]!==M?(v={queryKey:D,queryFn:w,enabled:M,staleTime:6e4},n[21]=D,n[22]=w,n[23]=M,n[24]=v):v=n[24],yt(v);let y;n[25]!==e||n[26]!==s?(y=()=>jl(e,s),n[25]=e,n[26]=s,n[27]=y):y=n[27];let z;n[28]!==e||n[29]!==A||n[30]!==a||n[31]!==s?(z=async()=>{await a.cancelQueries({queryKey:["isFollowing",e,s]});const P=a.getQueryData(["isFollowing",e,s]);return a.setQueryData(["isFollowing",e,s],!A),u(O=>({...O,followers:A?Math.max(0,O.followers-1):O.followers+1})),{previousFollowing:P}},n[28]=e,n[29]=A,n[30]=a,n[31]=s,n[32]=z):z=n[32];let T;n[33]!==e||n[34]!==a||n[35]!==t||n[36]!==s?(T=(P,O,H)=>{H?.previousFollowing!==void 0&&(a.setQueryData(["isFollowing",e,s],H.previousFollowing),u(q=>({...q,followers:H.previousFollowing?q.followers+1:Math.max(0,q.followers-1)}))),t("Failed to update follow status","error")},n[33]=e,n[34]=a,n[35]=t,n[36]=s,n[37]=T):T=n[37];let _;n[38]!==e||n[39]!==a||n[40]!==s?(_=()=>{a.invalidateQueries({queryKey:["isFollowing",e,s]}),a.invalidateQueries({queryKey:["followStats",s]})},n[38]=e,n[39]=a,n[40]=s,n[41]=_):_=n[41];let R;n[42]!==t?(R=P=>{t(P?"Followed":"Unfollowed")},n[42]=t,n[43]=R):R=n[43];let S;n[44]!==y||n[45]!==z||n[46]!==T||n[47]!==_||n[48]!==R?(S={mutationFn:y,onMutate:z,onError:T,onSettled:_,onSuccess:R},n[44]=y,n[45]=z,n[46]=T,n[47]=_,n[48]=R,n[49]=S):S=n[49];const I=ht(S);let k;n[50]!==e||n[51]!==I||n[52]!==p||n[53]!==t||n[54]!==s?(k=async()=>{if(!e)return t("Please login to follow!","error");if(e===s)return t("You cannot follow yourself!","error");p&&I.mutate()},n[50]=e,n[51]=I,n[52]=p,n[53]=t,n[54]=s,n[55]=k):k=n[55];const N=k;let F;return n[56]!==I.isPending||n[57]!==N||n[58]!==A||n[59]!==m?(F={isFollowing:A,stats:m,loading:I.isPending,handleFollow:N,setStats:u},n[56]=I.isPending,n[57]=N,n[58]=A,n[59]=m,n[60]=F):F=n[60],F};var $u=({profile:r,onUserClick:e,isCommunity:t=!1})=>{const{onlineUsers:n}=rc(),{currentUser:s}=Xe(),{addToast:a}=ut(),i=n.has(r.id),[l,d]=(0,g.useState)(!1),[m,u]=(0,g.useState)(t),{isFollowing:c,loading:f,handleFollow:h}=Ju(t?null:r,s?.id,a);(0,g.useEffect)(()=>{t&&s&&r.id?Vl(r.id,s.id).then(d).finally(()=>u(!1)):u(!1)},[t,s,r.id]);const p=async M=>{if(M.stopPropagation(),!s)return a("Please login to join communities","error");u(!0);try{const v=await Wl(r.id,s.id);d(v),a(v?`Joined ${"name"in r?r.name:""}`:`Left ${"name"in r?r.name:""}`)}catch{a("Failed to update membership","error")}finally{u(!1)}},x=s?.id===r.id,j=t?m:f,b=r.handle,C=r.avatar,E=r.name,A="follower_count"in r?r.follower_count:0,D="membersCount"in r?r.membersCount:0,w="verified"in r?r.verified:!1;return(0,o.jsxs)("div",{className:"group flex cursor-pointer items-center justify-between border-b border-zinc-100 p-4 transition-colors hover:bg-zinc-50 dark:border-zinc-800 dark:hover:bg-zinc-900/40",onClick:()=>e(b),children:[(0,o.jsxs)("div",{className:"flex items-center gap-3",children:[(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsxs)(Ve,{className:`size-12 border border-zinc-200 shadow-sm dark:border-zinc-800 ${t?"rounded-2xl":""}`,children:[(0,o.jsx)(Qe,{src:C||void 0,alt:b,className:"object-cover"}),(0,o.jsx)(Ye,{className:t?"rounded-2xl":"",children:b?.[0]?.toUpperCase()})]}),i&&!t&&(0,o.jsx)("span",{className:"absolute bottom-0 right-0 size-3 rounded-full border-2 border-white bg-emerald-500 shadow-sm dark:border-black"})]}),(0,o.jsxs)("div",{className:"flex flex-col",children:[(0,o.jsxs)("span",{className:"flex items-center gap-1 truncate font-extrabold text-zinc-900 dark:text-zinc-100",children:[E,w&&(0,o.jsx)(ui,{size:16,className:"shrink-0 text-blue-500"})]}),(0,o.jsxs)("span",{className:"mt-0.5 text-sm text-zinc-500",children:["@",b]}),t&&(0,o.jsxs)("span",{className:"mt-1 text-xs text-zinc-400",children:[D||0," members"]}),!t&&A!==void 0&&(0,o.jsxs)("span",{className:"mt-1 text-xs text-zinc-400",children:[A," followers"]})]})]}),!x&&(0,o.jsx)(Ie,{variant:t?l?"secondary":"outline":c?"secondary":"outline",className:"flex !w-auto items-center gap-1.5 rounded-full border-zinc-200 !px-4 !py-1.5 text-sm font-bold hover:bg-zinc-100 dark:border-zinc-700 dark:hover:bg-zinc-800",onClick:t?p:M=>{M.stopPropagation(),h()},disabled:j,children:j?(0,o.jsx)(Rt,{className:"size-4 animate-spin"}):t?l?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Hn,{size:16}),(0,o.jsx)("span",{className:"hidden sm:inline",children:"Joined"})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Bn,{size:16}),(0,o.jsx)("span",{className:"hidden sm:inline",children:"Join"})]}):c?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Hn,{size:16}),(0,o.jsx)("span",{className:"hidden sm:inline",children:"Following"})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Bn,{size:16}),(0,o.jsx)("span",{className:"hidden sm:inline",children:"Follow"})]})})]})},mp=$u,ii=ne(),e0=g.forwardRef((r,e)=>{const t=(0,ii.c)(15);let n,s,a;t[0]!==r?({className:s,children:n,...a}=r,t[0]=r,t[1]=n,t[2]=s,t[3]=a):(n=t[1],s=t[2],a=t[3]);let i;t[4]!==s?(i=X("relative overflow-hidden",s),t[4]=s,t[5]=i):i=t[5];let l;t[6]!==n?(l=(0,o.jsx)(yo,{className:"h-full w-full rounded-[inherit]",children:n}),t[6]=n,t[7]=l):l=t[7];let d,m;t[8]===Symbol.for("react.memo_cache_sentinel")?(d=(0,o.jsx)(oi,{}),m=(0,o.jsx)(Jo,{}),t[8]=d,t[9]=m):(d=t[8],m=t[9]);let u;return t[10]!==a||t[11]!==e||t[12]!==i||t[13]!==l?(u=(0,o.jsxs)(ks,{ref:e,className:i,...a,children:[l,d,m]}),t[10]=a,t[11]=e,t[12]=i,t[13]=l,t[14]=u):u=t[14],u});e0.displayName=ks.displayName;var oi=g.forwardRef((r,e)=>{const t=(0,ii.c)(14);let n,s,a;t[0]!==r?({className:n,orientation:a,...s}=r,t[0]=r,t[1]=n,t[2]=s,t[3]=a):(n=t[1],s=t[2],a=t[3]);const i=a===void 0?"vertical":a,l=i==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",d=i==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]";let m;t[4]!==n||t[5]!==l||t[6]!==d?(m=X("flex touch-none select-none transition-colors",l,d,n),t[4]=n,t[5]=l,t[6]=d,t[7]=m):m=t[7];let u;t[8]===Symbol.for("react.memo_cache_sentinel")?(u=(0,o.jsx)(Xo,{className:"relative flex-1 rounded-full bg-zinc-200 dark:bg-zinc-800"}),t[8]=u):u=t[8];let c;return t[9]!==i||t[10]!==s||t[11]!==e||t[12]!==m?(c=(0,o.jsx)(fs,{ref:e,orientation:i,className:m,...s,children:u}),t[9]=i,t[10]=s,t[11]=e,t[12]=m,t[13]=c):c=t[13],c});oi.displayName=fs.displayName;var t0=ne(),r0=r=>{const e=(0,t0.c)(14),{value:t,onChange:n,onClear:s,placeholder:a,className:i}=r,l=a===void 0?"Search...":a,d=`relative group w-full ${i===void 0?"":i}`;let m;e[0]===Symbol.for("react.memo_cache_sentinel")?(m=(0,o.jsx)(Nr,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 text-zinc-400 group-focus-within:text-violet-500 transition-colors"}),e[0]=m):m=e[0];let u;e[1]!==n?(u=p=>n(p.target.value),e[1]=n,e[2]=u):u=e[2];let c;e[3]!==l||e[4]!==u||e[5]!==t?(c=(0,o.jsx)("input",{className:"w-full rounded-full border border-zinc-100 dark:border-zinc-800 bg-zinc-50 dark:bg-zinc-900/50 text-zinc-900 dark:text-white px-11 py-2.5 text-sm outline-none focus:border-violet-500 focus:ring-1 focus:ring-violet-500 transition-all",placeholder:l,value:t,onChange:u}),e[3]=l,e[4]=u,e[5]=t,e[6]=c):c=e[6];let f;e[7]!==s||e[8]!==t?(f=t&&(0,o.jsx)("button",{onClick:s,className:"absolute right-4 top-1/2 -translate-y-1/2 text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-200 transition-colors",children:(0,o.jsx)(kt,{size:16})}),e[7]=s,e[8]=t,e[9]=f):f=e[9];let h;return e[10]!==d||e[11]!==c||e[12]!==f?(h=(0,o.jsxs)("div",{className:d,children:[m,c,f]}),e[10]=d,e[11]=c,e[12]=f,e[13]=h):h=e[13],h},qn=r0,Pt=ne(),hp=Po;var pp=el,n0=g.forwardRef((r,e)=>{const t=(0,Pt.c)(12);let n,s,a;t[0]!==r?({className:s,children:n,...a}=r,t[0]=r,t[1]=n,t[2]=s,t[3]=a):(n=t[1],s=t[2],a=t[3]);let i;t[4]!==s?(i=X("flex h-9 w-full items-center justify-between rounded-md border border-zinc-200 bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-white placeholder:text-zinc-500 focus:outline-none focus:ring-1 focus:ring-zinc-950 disabled:cursor-not-allowed disabled:opacity-50 dark:border-zinc-800 dark:ring-offset-zinc-950 dark:focus:ring-zinc-300 [&>span]:line-clamp-1",s),t[4]=s,t[5]=i):i=t[5];let l;t[6]===Symbol.for("react.memo_cache_sentinel")?(l=(0,o.jsx)(Ao,{asChild:!0,children:(0,o.jsx)(Zs,{className:"h-4 w-4 opacity-50"})}),t[6]=l):l=t[6];let d;return t[7]!==n||t[8]!==a||t[9]!==e||t[10]!==i?(d=(0,o.jsxs)(ra,{ref:e,className:i,...a,children:[n,l]}),t[7]=n,t[8]=a,t[9]=e,t[10]=i,t[11]=d):d=t[11],d});n0.displayName=ra.displayName;var li=g.forwardRef((r,e)=>{const t=(0,Pt.c)(10);let n,s;t[0]!==r?({className:n,...s}=r,t[0]=r,t[1]=n,t[2]=s):(n=t[1],s=t[2]);let a;t[3]!==n?(a=X("flex cursor-default items-center justify-center py-1",n),t[3]=n,t[4]=a):a=t[4];let i;t[5]===Symbol.for("react.memo_cache_sentinel")?(i=(0,o.jsx)(jo,{className:"h-4 w-4"}),t[5]=i):i=t[5];let l;return t[6]!==s||t[7]!==e||t[8]!==a?(l=(0,o.jsx)(Os,{ref:e,className:a,...s,children:i}),t[6]=s,t[7]=e,t[8]=a,t[9]=l):l=t[9],l});li.displayName=Os.displayName;var ci=g.forwardRef((r,e)=>{const t=(0,Pt.c)(10);let n,s;t[0]!==r?({className:n,...s}=r,t[0]=r,t[1]=n,t[2]=s):(n=t[1],s=t[2]);let a;t[3]!==n?(a=X("flex cursor-default items-center justify-center py-1",n),t[3]=n,t[4]=a):a=t[4];let i;t[5]===Symbol.for("react.memo_cache_sentinel")?(i=(0,o.jsx)(Zs,{className:"h-4 w-4"}),t[5]=i):i=t[5];let l;return t[6]!==s||t[7]!==e||t[8]!==a?(l=(0,o.jsx)(qs,{ref:e,className:a,...s,children:i}),t[6]=s,t[7]=e,t[8]=a,t[9]=l):l=t[9],l});ci.displayName=qs.displayName;var s0=g.forwardRef((r,e)=>{const t=(0,Pt.c)(21);let n,s,a,i;t[0]!==r?({className:s,children:n,position:i,...a}=r,t[0]=r,t[1]=n,t[2]=s,t[3]=a,t[4]=i):(n=t[1],s=t[2],a=t[3],i=t[4]);const l=i===void 0?"popper":i,d=l==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1";let m;t[5]!==s||t[6]!==d?(m=X("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border border-zinc-200 bg-white text-zinc-950 shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 dark:border-zinc-800 dark:bg-zinc-950 dark:text-zinc-50",d,s),t[5]=s,t[6]=d,t[7]=m):m=t[7];let u;t[8]===Symbol.for("react.memo_cache_sentinel")?(u=(0,o.jsx)(li,{}),t[8]=u):u=t[8];const c=l==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]";let f;t[9]!==c?(f=X("p-1",c),t[9]=c,t[10]=f):f=t[10];let h;t[11]!==n||t[12]!==f?(h=(0,o.jsx)(Co,{className:f,children:n}),t[11]=n,t[12]=f,t[13]=h):h=t[13];let p;t[14]===Symbol.for("react.memo_cache_sentinel")?(p=(0,o.jsx)(ci,{}),t[14]=p):p=t[14];let x;return t[15]!==l||t[16]!==a||t[17]!==e||t[18]!==m||t[19]!==h?(x=(0,o.jsx)(Oo,{children:(0,o.jsxs)(Xs,{ref:e,className:m,position:l,...a,children:[u,h,p]})}),t[15]=l,t[16]=a,t[17]=e,t[18]=m,t[19]=h,t[20]=x):x=t[20],x});s0.displayName=Xs.displayName;var a0=g.forwardRef((r,e)=>{const t=(0,Pt.c)(9);let n,s;t[0]!==r?({className:n,...s}=r,t[0]=r,t[1]=n,t[2]=s):(n=t[1],s=t[2]);let a;t[3]!==n?(a=X("px-2 py-1.5 text-sm font-semibold",n),t[3]=n,t[4]=a):a=t[4];let i;return t[5]!==s||t[6]!==e||t[7]!==a?(i=(0,o.jsx)(Ls,{ref:e,className:a,...s}),t[5]=s,t[6]=e,t[7]=a,t[8]=i):i=t[8],i});a0.displayName=Ls.displayName;var i0=g.forwardRef((r,e)=>{const t=(0,Pt.c)(14);let n,s,a;t[0]!==r?({className:s,children:n,...a}=r,t[0]=r,t[1]=n,t[2]=s,t[3]=a):(n=t[1],s=t[2],a=t[3]);let i;t[4]!==s?(i=X("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-zinc-100 focus:text-zinc-900 data-[disabled]:pointer-events-none data-[disabled]:opacity-50 dark:focus:bg-zinc-800 dark:focus:text-zinc-50",s),t[4]=s,t[5]=i):i=t[5];let l;t[6]===Symbol.for("react.memo_cache_sentinel")?(l=(0,o.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,o.jsx)(Ko,{children:(0,o.jsx)(kr,{className:"h-4 w-4"})})}),t[6]=l):l=t[6];let d;t[7]!==n?(d=(0,o.jsx)(Eo,{children:n}),t[7]=n,t[8]=d):d=t[8];let m;return t[9]!==a||t[10]!==e||t[11]!==i||t[12]!==d?(m=(0,o.jsxs)(Ws,{ref:e,className:i,...a,children:[l,d]}),t[9]=a,t[10]=e,t[11]=i,t[12]=d,t[13]=m):m=t[13],m});i0.displayName=Ws.displayName;var o0=g.forwardRef((r,e)=>{const t=(0,Pt.c)(9);let n,s;t[0]!==r?({className:n,...s}=r,t[0]=r,t[1]=n,t[2]=s):(n=t[1],s=t[2]);let a;t[3]!==n?(a=X("-mx-1 my-1 h-px bg-zinc-100 dark:bg-zinc-800",n),t[3]=n,t[4]=a):a=t[4];let i;return t[5]!==s||t[6]!==e||t[7]!==a?(i=(0,o.jsx)(Ms,{ref:e,className:a,...s}),t[5]=s,t[6]=e,t[7]=a,t[8]=i):i=t[8],i});o0.displayName=Ms.displayName;var l0=ne(),c0=r=>{const e=(0,l0.c)(9),{className:t}=r,{setAuthMode:n}=Xe();let s;e[0]!==t?(s=X("bg-[--card] border border-[--border] rounded-2xl p-8 flex flex-col items-center text-center gap-4 shadow-sm",t),e[0]=t,e[1]=s):s=e[1];let a,i;e[2]===Symbol.for("react.memo_cache_sentinel")?(a=(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsx)("div",{className:"size-16 animate-spin rounded-full border-4 border-t-transparent border-amber-400 duration-[3000ms]"}),(0,o.jsx)("span",{className:"absolute inset-0 flex items-center justify-center text-2xl",children:""})]}),i=(0,o.jsx)("h2",{className:"mt-2 text-lg font-extrabold leading-tight text-[--foreground]",children:"Get your Sysm account now!"}),e[2]=a,e[3]=i):(a=e[2],i=e[3]);let l;e[4]!==n?(l=(0,o.jsx)("button",{onClick:()=>n("signup"),className:"w-full cursor-pointer rounded-full bg-zinc-950 py-2.5 text-sm font-black uppercase tracking-wider text-white shadow-lg transition-all hover:opacity-90 active:scale-95 dark:bg-white dark:text-zinc-950",children:"Signup now"}),e[4]=n,e[5]=l):l=e[5];let d;return e[6]!==s||e[7]!==l?(d=(0,o.jsxs)("div",{className:s,children:[a,i,l]}),e[6]=s,e[7]=l,e[8]=d):d=e[8],d},d0=c0,u0=ne(),f0=()=>{const r=(0,u0.c)(3);let e;r[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)("div",{className:"size-11 rounded-full bg-zinc-200 dark:bg-zinc-800 shrink-0"}),r[0]=e):e=r[0];let t;r[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,o.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,o.jsx)("div",{className:"h-4 bg-zinc-200 dark:bg-zinc-800 rounded w-1/3"}),(0,o.jsx)("div",{className:"h-4 bg-zinc-200 dark:bg-zinc-800 rounded w-16"})]}),r[1]=t):t=r[1];let n;return r[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,o.jsx)("div",{className:"px-5 pt-4 pb-3 border-b border-zinc-100 dark:border-zinc-800 animate-pulse",children:(0,o.jsxs)("div",{className:"flex items-start gap-x-3",children:[e,(0,o.jsxs)("div",{className:"flex-1 min-w-0",children:[t,(0,o.jsxs)("div",{className:"space-y-2",children:[(0,o.jsx)("div",{className:"h-3 bg-zinc-200 dark:bg-zinc-800 rounded w-full"}),(0,o.jsx)("div",{className:"h-3 bg-zinc-200 dark:bg-zinc-800 rounded w-5/6"})]}),(0,o.jsx)("div",{className:"h-48 bg-zinc-200 dark:bg-zinc-800 rounded-xl w-full mt-3"})]})]})}),r[2]=n):n=r[2],n},gp=f0,cn=ne(),m0=Do,di=g.forwardRef((r,e)=>{const t=(0,cn.c)(9);let n,s;t[0]!==r?({className:n,...s}=r,t[0]=r,t[1]=n,t[2]=s):(n=t[1],s=t[2]);let a;t[3]!==n?(a=X("inline-flex h-10 items-center justify-center rounded-md text-zinc-500 dark:text-zinc-400",n),t[3]=n,t[4]=a):a=t[4];let i;return t[5]!==s||t[6]!==e||t[7]!==a?(i=(0,o.jsx)(Js,{ref:e,className:a,...s}),t[5]=s,t[6]=e,t[7]=a,t[8]=i):i=t[8],i});di.displayName=Js.displayName;var Br=g.forwardRef((r,e)=>{const t=(0,cn.c)(9);let n,s;t[0]!==r?({className:n,...s}=r,t[0]=r,t[1]=n,t[2]=s):(n=t[1],s=t[2]);let a;t[3]!==n?(a=X("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-white transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-zinc-950 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:text-zinc-950 dark:ring-offset-zinc-950 dark:focus-visible:ring-zinc-300 dark:data-[state=active]:text-zinc-50",n),t[3]=n,t[4]=a):a=t[4];let i;return t[5]!==s||t[6]!==e||t[7]!==a?(i=(0,o.jsx)(Ts,{ref:e,className:a,...s}),t[5]=s,t[6]=e,t[7]=a,t[8]=i):i=t[8],i});Br.displayName=Ts.displayName;var Hr=g.forwardRef((r,e)=>{const t=(0,cn.c)(9);let n,s;t[0]!==r?({className:n,...s}=r,t[0]=r,t[1]=n,t[2]=s):(n=t[1],s=t[2]);let a;t[3]!==n?(a=X("mt-2 ring-offset-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-zinc-950 focus-visible:ring-offset-2 dark:ring-offset-zinc-950 dark:focus-visible:ring-zinc-300",n),t[3]=n,t[4]=a):a=t[4];let i;return t[5]!==s||t[6]!==e||t[7]!==a?(i=(0,o.jsx)(Ks,{ref:e,className:a,...s}),t[5]=s,t[6]=e,t[7]=a,t[8]=i):i=t[8],i});Hr.displayName=Ks.displayName;var h0=ne(),p0=r=>{const e=(0,h0.c)(18),{name:t,number:n}=r,s=t===void 0?"BRUCE WAYNE":t,a=n===void 0?"9759 2484 5269 6576":n;let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i=(0,o.jsx)("style",{children:`
        .credit-card-container {
          perspective: 1000px;
          width: 240px;
          height: 154px;
        }
        .credit-card-inner {
          position: relative;
          width: 100%;
          height: 100%;
          text-align: center;
          transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
          transform-style: preserve-3d;
          cursor: pointer;
        }
        .credit-card-container:hover .credit-card-inner {
          transform: rotateY(180deg);
        }
        .credit-card-front, .credit-card-back {
          position: absolute;
          width: 100%;
          height: 100%;
          -webkit-backface-visibility: hidden;
          backface-visibility: hidden;
          border-radius: 1rem;
          display: flex;
          flex-direction: column;
          justify-content: center;
          background-color: #171717;
          box-shadow: 0 2px 2px rgba(0,0,0,0.4), 0 7px 13px -3px rgba(0,0,0,0.3), inset 0 -1px 0 rgba(0,0,0,0.2);
          color: white;
          overflow: hidden;
        }
        .credit-card-back {
          transform: rotateY(180deg);
        }
      `}),e[0]=i):i=e[0];let l;e[1]===Symbol.for("react.memo_cache_sentinel")?(l=(0,o.jsx)("p",{className:"absolute left-[18.6em] top-[2em] text-[0.5em] font-bold tracking-[.2em]",children:"VICTIMCARD"}),e[1]=l):l=e[1];let d;e[2]===Symbol.for("react.memo_cache_sentinel")?(d=(0,o.jsxs)("svg",{className:"absolute left-[11.7em] top-[6.8em]",xmlns:"http://www.w3.org/2000/svg",width:"36",height:"36",viewBox:"0 0 48 48",children:[(0,o.jsx)("path",{fill:"#ff9800",d:"M32 10A14 14 0 1 0 32 38A14 14 0 1 0 32 10Z"}),(0,o.jsx)("path",{fill:"#d50000",d:"M16 10A14 14 0 1 0 16 38A14 14 0 1 0 16 10Z"}),(0,o.jsx)("path",{fill:"#ff3d00",d:"M18,24c0,4.755,2.376,8.95,6,11.48c3.624-2.53,6-6.725,6-11.48s-2.376-8.95-6-11.48 C20.376,15.05,18,19.245,18,24z"})]}),e[2]=d):d=e[2];let m;e[3]===Symbol.for("react.memo_cache_sentinel")?(m=(0,o.jsx)("svg",{version:"1.1",className:"absolute left-[1.5em] top-[2.3em]",width:"30px",height:"30px",viewBox:"0 0 50 50",children:(0,o.jsx)("image",{width:"50",height:"50",x:"0",y:"0",href:`data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAMAAAAp4XiDAAAABGdBTUEAALGPC/xhBQAAACBjSFJN
                AAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAB6VBMVEUAAACNcTiVeUKVeUOY
                fEaafEeUeUSYfEWZfEaykleyklaXe0SWekSZZjOYfEWYe0WXfUWXe0WcgEicfkiXe0SVekSXekSW
                ekKYe0a9nF67m12ZfUWUeEaXfESVekOdgEmVeUWWekSniU+VeUKVeUOrjFKYfEWliE6WeESZe0GS
                e0WYfES7ml2Xe0WXeESUeEOWfEWcf0eWfESXe0SXfEWYekSVeUKXfEWxklawkVaZfEWWekOUekOW
                ekSYfESZe0eXekWYfEWZe0WZe0eVeUSWeETAnmDCoWLJpmbxy4P1zoXwyoLIpWbjvXjivnjgu3bf
                u3beunWvkFWxkle/nmDivXiWekTnwXvkwHrCoWOuj1SXe0TEo2TDo2PlwHratnKZfEbQrWvPrWua
                fUfbt3PJp2agg0v0zYX0zYSfgkvKp2frxX7mwHrlv3rsxn/yzIPgvHfduXWXe0XuyIDzzISsjVO1
                lVm0lFitjVPzzIPqxX7duna0lVncuHTLqGjvyIHeuXXxyYGZfUayk1iyk1e2lln1zYTEomO2llrb
                tnOafkjFpGSbfkfZtXLhvHfkv3nqxH3mwXujhU3KqWizlFilh06khk2fgkqsjlPHpWXJp2erjVOh
                g0yWe0SliE+XekShhEvAn2D///+gx8TWAAAARnRSTlMACVCTtsRl7Pv7+vxkBab7pZv5+ZlL/UnU
                /f3SJCVe+Fx39naA9/75XSMh0/3SSkia+pil/KRj7Pr662JPkrbP7OLQ0JFOijI1MwAAAAFiS0dE
                orDd34wAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAHdElNRQfnAg0IDx2lsiuJAAACLElEQVRIx2Ng
                GAXkAUYmZhZWPICFmYkRVQcbOwenmzse4MbFzc6DpIGXj8PD04sA8PbhF+CFaxEU8iWkAQT8hEVg
                OkTF/InR4eUVICYO1SIhCRMLDAoKDvFDVhUaEhwUFAjjSUlDdMiEhcOEItzdI6OiYxA6YqODIt3d
                I2DcuDBZsBY5eVTr4xMSYcyk5BRUOXkFsBZFJTQnp6alQxgZmVloUkrKYC0qqmji2WE5EEZuWB6a
                lKoKdi35YQUQRkFYPpFaCouKIYzi6EDitJSUlsGY5RWVRGjJLyxNy4ZxqtIqqvOxaVELQwZFZdkI
                JVU1RSiSalAt6rUwUBdWG1CP6pT6gNqwOrgCdQyHNYR5YQFhDXj8MiK1IAeyN6aORiyBjByVTc0F
                qBoKWpqwRCVSgilOaY2OaUPw29qjOzqLvTAchpos47u6EZyYnngUSRwpuTe6D+6qaFQdOPNLRzOM
                1dzhRZyW+CZouHk3dWLXglFcFIflQhj9YWjJGlZcaKAVSvjyPrRQ0oQVKDAQHlYFYUwIm4gqExGm
                BSkutaVQJeomwViTJqPK6OhCy2Q9sQBk8cY0DxjTJw0lAQWK6cOKfgNhpKK7ZMpUeF3jPa28BCET
                amiEqJKM+X1gxvWXpoUjVIVPnwErw71nmpgiqiQGBjNzbgs3j1nus+fMndc+Cwm0T52/oNR9lsdC
                S24ra7Tq1cbWjpXV3sHRCb1idXZ0sGdltXNxRateRwHRAACYHutzk/2I5QAAACV0RVh0ZGF0ZTpj
                cmVhdGUAMjAyMy0wMi0xM1QwODoxNToyOSswMDowMEUnN7UAAAAldEVYdGRhdGU6bW9kaWZ5ADIw
                MjMtMDItMTNUMDg6MTU6MjkrMDA6MDA0eo8JAAAAKHRFWHRkYXRlOnRpbWVzdGFtcAAyMDIzLTAy
                LTEzVDA4OjE1OjI5KzAwOjAwY2+u1gAAAABJRU5ErkJggg==`})}),e[3]=m):m=e[3];let u;e[4]===Symbol.for("react.memo_cache_sentinel")?(u=(0,o.jsx)("svg",{version:"1.1",className:"absolute left-[12.4em] top-[3.5em]",width:"20px",height:"20px",viewBox:"0 0 50 50",children:(0,o.jsx)("image",{width:"50",height:"50",x:"0",y:"0",href:`data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAQAAAC0NkA6AAAABGdBTUEAALGPC/xhBQAAACBjSFJN
                AAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAAAJcEhZ
                cwAACxMAAAsTAQCanBgAAAAHdElNRQfnAg0IEzgIwaKTAAADDklEQVRYw+1XS0iUURQ+f5qPyjQf
                lGRFEEFK76koKGxRbWyVVLSOgsCgwjZBJJYuKogSIoOonUK4q3U0WVBWFPZYiIE6kuArG3VGzK/F
                fPeMM/MLt99/NuHdfPd888/57jn3nvsQWWj/VcMlvMMd5KRTogqx9iCdIjUUmcGR9ImUYowyP3xN
                GQJoRLVaZ2DaZf8kyjEJALhI28ELioyiwC+Rc3QZwRYyO/DH51hQgWm6DMIh10KmD4u9O16K49it
                VoPOAmcGAWWOepXIRScAoJZ2Frro8oN+EyTT6lWkkg6msZfMSR35QTJmjU0g15tIGSJ08ZZMJkJk
                HpNZgSkyXosS13TkJpZ62mPIJvOSzC1bp8vRhhCakEk7G9/o4gmZdbpsTcKu0m63FbnBP9Qrc15z
                bkbemfgNDtEOI8NO5L5O9VYyRYgmJayZ9nPaxZrSjW4+F6Uw9yQqIiIZwhp2huQTf6OIvCZyGM6g
                DJBZbyXifJXr7FZjGXsdxADxI7HUJFB6iWvsIhFpkoiIiGTJfjJfiCuJg2ZEspq9EHGVpYgzKqwJ
                qSAOEwuJQ/pxPvE3cYltJCLdxBLiSKKIE5HxJKcTRNeadxfhDiuYw44zVs1dxKwRk/uCxIiQkxKB
                sSctRVAge9g1E15EHE6yRUaJecRxcWlukdRIbGFOSZCMWQA/iWauIP3slREHXPyliqBcrrD71Amz
                Z+rD1Mt2Yr8TZc/UR4/YtFnbijnHi3UrN9vKQ9rPaJf867ZiaqDB+czeKYmd3pNa6fuI75MiC0uX
                XSR5aEMf7s7a6r/PudVXkjFb/SsrCRfROk0Fx6+H1i9kkTGn/E1vEmt1m089fh+RKdQ5O+xNJPUi
                cUIjO0Dm7HwvErEr0YxeibL1StSh37STafE4I7zcBdRq1DiOkdmlTJVnkQTBTS7X1FYyvfO4piaI
                nKbDCDaT2anLudYXCRFsQBgAcIF2/Okwgvz5+Z4tsw118dzruvIvjhTB+HOuWy8UvovEH6beitBK
                xDyxm9MmISKCWrzB7bSlaqGlsf0FC0gMjzTg6GgAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMDIt
                MTNUMDg6MTk6NTYrMDA6MDCjlq7LAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTAyLTEzVDA4OjE5
                OjU2KzAwOjAw0ssWdwAAACh0RVh0ZGF0ZTp0aW1lc3RhbXAAMjAyMy0wMi0xM1QwODoxOTo1Nisw
                MDowMIXeN6gAAAAASUVORK5CYII=`})}),e[4]=u):u=e[4];let c;e[5]!==a?(c=(0,o.jsx)("p",{className:"absolute left-[1.6em] top-[8.3em] text-[.6em] font-bold uppercase tracking-wider",children:a}),e[5]=a,e[6]=c):c=e[6];let f;e[7]===Symbol.for("react.memo_cache_sentinel")?(f=(0,o.jsx)("p",{className:"absolute left-[3.2em] top-[13.6em] text-[0.5em] font-bold",children:"1 2 / 2 4"}),e[7]=f):f=e[7];let h;e[8]!==s?(h=(0,o.jsx)("p",{className:"absolute left-[2em] top-[16.1em] w-[160px] truncate text-left text-[0.5em] font-bold uppercase tracking-tighter",children:s}),e[8]=s,e[9]=h):h=e[9];let p;e[10]!==h||e[11]!==c?(p=(0,o.jsxs)("div",{className:"credit-card-front",children:[l,d,m,u,c,f,h]}),e[10]=h,e[11]=c,e[12]=p):p=e[12];let x,j;e[13]===Symbol.for("react.memo_cache_sentinel")?(x=(0,o.jsx)("div",{className:"absolute left-0 top-[2.4em] h-[1.5em] w-full bg-black bg-[repeating-linear-gradient(45deg,#303030,#303030_10px,#202020_10px,#202020_20px)]"}),j=(0,o.jsx)("div",{className:"absolute left-[0.8em] top-[5em] h-[0.8em] w-[8em] rounded-[2.5px] bg-white"}),e[13]=x,e[14]=j):(x=e[13],j=e[14]);let b;e[15]===Symbol.for("react.memo_cache_sentinel")?(b=(0,o.jsxs)("div",{className:"credit-card-back",children:[x,j,(0,o.jsx)("div",{className:"absolute left-[10em] top-[5em] h-[0.8em] w-[4.1em] rounded-[2.5px] bg-white",children:(0,o.jsx)("p",{className:"m-[.2em] text-center text-[0.5em] font-bold text-black",children:"***"})})]}),e[15]=b):b=e[15];let C;return e[16]!==p?(C=(0,o.jsxs)(o.Fragment,{children:[i,(0,o.jsx)("div",{className:"flex items-center justify-center p-8",children:(0,o.jsx)("div",{className:"credit-card-container",children:(0,o.jsxs)("div",{className:"credit-card-inner",children:[p,b]})})})]}),e[16]=p,e[17]=C):C=e[17],C},vp=p0,g0=ne(),v0=g.forwardRef((r,e)=>{const t=(0,g0.c)(9);let n,s;t[0]!==r?({className:n,...s}=r,t[0]=r,t[1]=n,t[2]=s):(n=t[1],s=t[2]);let a;t[3]!==n?(a=X("flex min-h-[80px] w-full rounded-md border border-zinc-200 bg-white px-3 py-2 text-sm ring-offset-white placeholder:text-zinc-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-zinc-950 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 dark:border-zinc-800 dark:bg-zinc-950 dark:ring-offset-zinc-950 dark:placeholder:text-zinc-400 dark:focus-visible:ring-zinc-300",n),t[3]=n,t[4]=a):a=t[4];let i;return t[5]!==s||t[6]!==e||t[7]!==a?(i=(0,o.jsx)("textarea",{className:a,ref:e,...s}),t[5]=s,t[6]=e,t[7]=a,t[8]=i):i=t[8],i});v0.displayName="Textarea";var x0=ne(),b0=r=>{const e=(0,x0.c)(7),{className:t}=r;let n;e[0]!==t?(n=X("flex items-center gap-1 px-1 py-1.5",t),e[0]=t,e[1]=n):n=e[1];let s,a,i;e[2]===Symbol.for("react.memo_cache_sentinel")?(s=(0,o.jsx)("div",{className:"size-1.5 rounded-full bg-zinc-400 dark:bg-zinc-500 animate-dot-pulse"}),a=(0,o.jsx)("div",{className:"size-1.5 rounded-full bg-zinc-400 dark:bg-zinc-500 animate-dot-pulse [animation-delay:0.2s]"}),i=(0,o.jsx)("div",{className:"size-1.5 rounded-full bg-zinc-400 dark:bg-zinc-500 animate-dot-pulse [animation-delay:0.4s]"}),e[2]=s,e[3]=a,e[4]=i):(s=e[2],a=e[3],i=e[4]);let l;return e[5]!==n?(l=(0,o.jsxs)("div",{className:n,children:[s,a,i]}),e[5]=n,e[6]=l):l=e[6],l},xp=b0,$e=ne();const bp=r=>{const e=(0,$e.c)(10);let t,n,s;e[0]!==r?({size:n,className:s,...t}=r,e[0]=r,e[1]=t,e[2]=n,e[3]=s):(t=e[1],n=e[2],s=e[3]);const a=n===void 0?24:n,i=s===void 0?"":s;let l,d;e[4]===Symbol.for("react.memo_cache_sentinel")?(l=(0,o.jsx)("path",{d:"M13.6006 21.0761L19.0608 17.9236C19.6437 17.5871 19.9346 17.4188 20.1465 17.1834C20.3341 16.9751 20.4759 16.7297 20.5625 16.4632C20.6602 16.1626 20.6602 15.8267 20.6602 15.1568V8.84268C20.6602 8.17277 20.6602 7.83694 20.5625 7.53638C20.4759 7.26982 20.3341 7.02428 20.1465 6.816C19.9355 6.58161 19.6453 6.41405 19.0674 6.08043L13.5996 2.92359C13.0167 2.58706 12.7259 2.41913 12.416 2.35328C12.1419 2.295 11.8584 2.295 11.5843 2.35328C11.2744 2.41914 10.9826 2.58706 10.3997 2.92359L4.93843 6.07666C4.35623 6.41279 4.06535 6.58073 3.85352 6.816C3.66597 7.02428 3.52434 7.26982 3.43773 7.53638C3.33984 7.83765 3.33984 8.17436 3.33984 8.84742V15.1524C3.33984 15.8254 3.33984 16.1619 3.43773 16.4632C3.52434 16.7297 3.66597 16.9751 3.85352 17.1834C4.06548 17.4188 4.35657 17.5871 4.93945 17.9236L10.3997 21.0761C10.9826 21.4126 11.2744 21.5806 11.5843 21.6465C11.8584 21.7047 12.1419 21.7047 12.416 21.6465C12.7259 21.5806 13.0177 21.4126 13.6006 21.0761Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),d=(0,o.jsx)("path",{d:"M9 11.9998C9 13.6566 10.3431 14.9998 12 14.9998C13.6569 14.9998 15 13.6566 15 11.9998C15 10.3429 13.6569 8.99976 12 8.99976C10.3431 8.99976 9 10.3429 9 11.9998Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e[4]=l,e[5]=d):(l=e[4],d=e[5]);let m;return e[6]!==i||e[7]!==t||e[8]!==a?(m=(0,o.jsxs)("svg",{width:a,height:a,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:i,...t,children:[l,d]}),e[6]=i,e[7]=t,e[8]=a,e[9]=m):m=e[9],m},ui=r=>{const e=(0,$e.c)(10);let t,n,s;e[0]!==r?({size:n,className:s,...t}=r,e[0]=r,e[1]=t,e[2]=n,e[3]=s):(t=e[1],n=e[2],s=e[3]);const a=n===void 0?24:n,i=s===void 0?"":s;let l,d;e[4]===Symbol.for("react.memo_cache_sentinel")?(l=(0,o.jsx)("path",{d:"M12 21C16.9706 21 21 16.9706 21 12C21 7.02944 16.9706 3 12 3C7.02944 3 3 7.02944 3 12C3 16.9706 7.02944 21 12 21Z",fill:"currentColor"}),d=(0,o.jsx)("path",{d:"M15 10L11 14L9 12",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e[4]=l,e[5]=d):(l=e[4],d=e[5]);let m;return e[6]!==i||e[7]!==t||e[8]!==a?(m=(0,o.jsxs)("svg",{width:a,height:a,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:i,...t,children:[l,d]}),e[6]=i,e[7]=t,e[8]=a,e[9]=m):m=e[9],m},y0=r=>{const e=(0,$e.c)(9);let t,n,s;e[0]!==r?({size:n,className:s,...t}=r,e[0]=r,e[1]=t,e[2]=n,e[3]=s):(t=e[1],n=e[2],s=e[3]);const a=n===void 0?24:n,i=s===void 0?"":s;let l;e[4]===Symbol.for("react.memo_cache_sentinel")?(l=(0,o.jsx)("path",{d:"M12 8.00012L4 16.0001V20.0001L8 20.0001L16 12.0001M12 8.00012L14.8686 5.13146L14.8704 5.12976C15.2652 4.73488 15.463 4.53709 15.691 4.46301C15.8919 4.39775 16.1082 4.39775 16.3091 4.46301C16.5369 4.53704 16.7345 4.7346 17.1288 5.12892L18.8686 6.86872C19.2646 7.26474 19.4627 7.46284 19.5369 7.69117C19.6022 7.89201 19.6021 8.10835 19.5369 8.3092C19.4628 8.53736 19.265 8.73516 18.8695 9.13061L18.8686 9.13146L16 12.0001M12 8.00012L16 12.0001",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e[4]=l):l=e[4];let d;return e[5]!==i||e[6]!==t||e[7]!==a?(d=(0,o.jsx)("svg",{width:a,height:a,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:i,...t,children:l}),e[5]=i,e[6]=t,e[7]=a,e[8]=d):d=e[8],d},Bn=r=>{const e=(0,$e.c)(9);let t,n,s;e[0]!==r?({size:n,className:s,...t}=r,e[0]=r,e[1]=t,e[2]=n,e[3]=s):(t=e[1],n=e[2],s=e[3]);const a=n===void 0?24:n,i=s===void 0?"":s;let l;e[4]===Symbol.for("react.memo_cache_sentinel")?(l=(0,o.jsx)("path",{d:"M15 19C15 16.7909 12.3137 15 9 15C5.68629 15 3 16.7909 3 19M19 16V13M19 13V10M19 13H16M19 13H22M9 12C6.79086 12 5 10.2091 5 8C5 5.79086 6.79086 4 9 4C11.2091 4 13 5.79086 13 8C13 10.2091 11.2091 12 9 12Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e[4]=l):l=e[4];let d;return e[5]!==i||e[6]!==t||e[7]!==a?(d=(0,o.jsx)("svg",{width:a,height:a,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:i,...t,children:l}),e[5]=i,e[6]=t,e[7]=a,e[8]=d):d=e[8],d},Hn=r=>{const e=(0,$e.c)(9);let t,n,s;e[0]!==r?({size:n,className:s,...t}=r,e[0]=r,e[1]=t,e[2]=n,e[3]=s):(t=e[1],n=e[2],s=e[3]);const a=n===void 0?24:n,i=s===void 0?"":s;let l;e[4]===Symbol.for("react.memo_cache_sentinel")?(l=(0,o.jsx)("path",{d:"M15 19C15 16.7909 12.3137 15 9 15C5.68629 15 3 16.7909 3 19M21 10L17 14L15 12M9 12C6.79086 12 5 10.2091 5 8C5 5.79086 6.79086 4 9 4C11.2091 4 13 5.79086 13 8C13 10.2091 11.2091 12 9 12Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e[4]=l):l=e[4];let d;return e[5]!==i||e[6]!==t||e[7]!==a?(d=(0,o.jsx)("svg",{width:a,height:a,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:i,...t,children:l}),e[5]=i,e[6]=t,e[7]=a,e[8]=d):d=e[8],d},yp=r=>{const e=(0,$e.c)(10);let t,n,s;e[0]!==r?({size:n,className:s,...t}=r,e[0]=r,e[1]=t,e[2]=n,e[3]=s):(t=e[1],n=e[2],s=e[3]);const a=n===void 0?24:n,i=s===void 0?"":s;let l,d;e[4]===Symbol.for("react.memo_cache_sentinel")?(l=(0,o.jsx)("path",{d:"M5 9.92285C5 14.7747 9.24448 18.7869 11.1232 20.3252C11.3921 20.5454 11.5281 20.6568 11.7287 20.7132C11.8849 20.7572 12.1148 20.7572 12.271 20.7132C12.472 20.6567 12.6071 20.5463 12.877 20.3254C14.7557 18.7871 18.9999 14.7751 18.9999 9.9233C18.9999 8.08718 18.2625 6.32605 16.9497 5.02772C15.637 3.72939 13.8566 3 12.0001 3C10.1436 3 8.36301 3.7295 7.05025 5.02783C5.7375 6.32616 5 8.08674 5 9.92285Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),d=(0,o.jsx)("path",{d:"M10 9C10 10.1046 10.8954 11 12 11C13.1046 11 14 10.1046 14 9C14 7.89543 13.1046 7 12 7C10.8954 7 10 7.89543 10 9Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e[4]=l,e[5]=d):(l=e[4],d=e[5]);let m;return e[6]!==i||e[7]!==t||e[8]!==a?(m=(0,o.jsxs)("svg",{width:a,height:a,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:i,...t,children:[l,d]}),e[6]=i,e[7]=t,e[8]=a,e[9]=m):m=e[9],m},wp=r=>{const e=(0,$e.c)(9);let t,n,s;e[0]!==r?({size:n,className:s,...t}=r,e[0]=r,e[1]=t,e[2]=n,e[3]=s):(t=e[1],n=e[2],s=e[3]);const a=n===void 0?24:n,i=s===void 0?"":s;let l;e[4]===Symbol.for("react.memo_cache_sentinel")?(l=(0,o.jsx)("path",{d:"M10.0002 5H8.2002C7.08009 5 6.51962 5 6.0918 5.21799C5.71547 5.40973 5.40973 5.71547 5.21799 6.0918C5 6.51962 5 7.08009 5 8.2002V15.8002C5 16.9203 5 17.4801 5.21799 17.9079C5.40973 18.2842 5.71547 18.5905 6.0918 18.7822C6.5192 19 7.07899 19 8.19691 19H15.8031C16.921 19 17.48 19 17.9074 18.7822C18.2837 18.5905 18.5905 18.2839 18.7822 17.9076C19 17.4802 19 16.921 19 15.8031V14M20 9V4M20 4H15M20 4L13 11",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e[4]=l):l=e[4];let d;return e[5]!==i||e[6]!==t||e[7]!==a?(d=(0,o.jsx)("svg",{width:a,height:a,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:i,...t,children:l}),e[5]=i,e[6]=t,e[7]=a,e[8]=d):d=e[8],d},jp=r=>{const e=(0,$e.c)(9);let t,n,s;e[0]!==r?({size:n,className:s,...t}=r,e[0]=r,e[1]=t,e[2]=n,e[3]=s):(t=e[1],n=e[2],s=e[3]);const a=n===void 0?24:n,i=s===void 0?"":s;let l;e[4]===Symbol.for("react.memo_cache_sentinel")?(l=(0,o.jsx)("path",{d:"M10.3078 13.6923L15.1539 8.84619M20.1113 5.88867L16.0207 19.1833C15.6541 20.3747 15.4706 20.9707 15.1544 21.1683C14.8802 21.3396 14.5406 21.3683 14.2419 21.2443C13.8975 21.1014 13.618 20.5433 13.0603 19.428L10.4694 14.2461C10.3809 14.0691 10.3366 13.981 10.2775 13.9043C10.225 13.8363 10.1645 13.7749 10.0965 13.7225C10.0215 13.6647 9.93486 13.6214 9.76577 13.5369L4.57192 10.9399C3.45662 10.3823 2.89892 10.1032 2.75601 9.75879C2.63207 9.4601 2.66033 9.12023 2.83169 8.84597C3.02928 8.52974 3.62523 8.34603 4.81704 7.97932L18.1116 3.88867C19.0486 3.60038 19.5173 3.45635 19.8337 3.57253C20.1094 3.67373 20.3267 3.89084 20.4279 4.16651C20.544 4.48283 20.3999 4.95126 20.1119 5.88729L20.1113 5.88867Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e[4]=l):l=e[4];let d;return e[5]!==i||e[6]!==t||e[7]!==a?(d=(0,o.jsx)("svg",{width:a,height:a,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:i,...t,children:l}),e[5]=i,e[6]=t,e[7]=a,e[8]=d):d=e[8],d},fi=r=>{const e=(0,$e.c)(9);let t,n,s;e[0]!==r?({size:n,className:s,...t}=r,e[0]=r,e[1]=t,e[2]=n,e[3]=s):(t=e[1],n=e[2],s=e[3]);const a=n===void 0?24:n,i=s===void 0?"":s;let l;e[4]===Symbol.for("react.memo_cache_sentinel")?(l=(0,o.jsx)("path",{d:"M4 11.4522V16.8002C4 17.9203 4 18.4807 4.21799 18.9086C4.40973 19.2849 4.71547 19.5906 5.0918 19.7823C5.5192 20.0001 6.07899 20.0001 7.19691 20.0001H16.8031C17.921 20.0001 18.48 20.0001 18.9074 19.7823C19.2837 19.5906 19.5905 19.2849 19.7822 18.9086C20 18.4811 20 17.9216 20 16.8037V11.4522C20 10.9179 19.9995 10.6506 19.9346 10.4019C19.877 10.1816 19.7825 9.97307 19.6546 9.78464C19.5102 9.57201 19.3096 9.39569 18.9074 9.04383L14.1074 4.84383C13.3608 4.19054 12.9875 3.86406 12.5674 3.73982C12.1972 3.63035 11.8026 3.63035 11.4324 3.73982C11.0126 3.86397 10.6398 4.19014 9.89436 4.84244L5.09277 9.04383C4.69064 9.39569 4.49004 9.57201 4.3457 9.78464C4.21779 9.97307 4.12255 10.1816 4.06497 10.4019C4 10.6506 4 10.9179 4 11.4522Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e[4]=l):l=e[4];let d;return e[5]!==i||e[6]!==t||e[7]!==a?(d=(0,o.jsx)("svg",{width:a,height:a,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:i,...t,children:l}),e[5]=i,e[6]=t,e[7]=a,e[8]=d):d=e[8],d},mi=r=>{const e=(0,$e.c)(9);let t,n,s;e[0]!==r?({size:n,className:s,...t}=r,e[0]=r,e[1]=t,e[2]=n,e[3]=s):(t=e[1],n=e[2],s=e[3]);const a=n===void 0?24:n,i=s===void 0?"":s;let l;e[4]===Symbol.for("react.memo_cache_sentinel")?(l=(0,o.jsx)("path",{d:"M5.59961 19.9203L7.12357 18.7012L7.13478 18.6926C7.45249 18.4384 7.61281 18.3101 7.79168 18.2188C7.95216 18.1368 8.12328 18.0771 8.2998 18.0408C8.49877 18 8.70603 18 9.12207 18H17.8031C18.921 18 19.4806 18 19.908 17.7822C20.2843 17.5905 20.5905 17.2842 20.7822 16.9079C21 16.4805 21 15.9215 21 14.8036V7.19691C21 6.07899 21 5.5192 20.7822 5.0918C20.5905 4.71547 20.2837 4.40973 19.9074 4.21799C19.4796 4 18.9203 4 17.8002 4H6.2002C5.08009 4 4.51962 4 4.0918 4.21799C3.71547 4.40973 3.40973 4.71547 3.21799 5.0918C3 5.51962 3 6.08009 3 7.2002V18.6712C3 19.7369 3 20.2696 3.21846 20.5433C3.40845 20.7813 3.69644 20.9198 4.00098 20.9195C4.35115 20.9191 4.76744 20.5861 5.59961 19.9203Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e[4]=l):l=e[4];let d;return e[5]!==i||e[6]!==t||e[7]!==a?(d=(0,o.jsx)("svg",{width:a,height:a,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:i,...t,children:l}),e[5]=i,e[6]=t,e[7]=a,e[8]=d):d=e[8],d},hi=r=>{const e=(0,$e.c)(9);let t,n,s;e[0]!==r?({size:n,className:s,...t}=r,e[0]=r,e[1]=t,e[2]=n,e[3]=s):(t=e[1],n=e[2],s=e[3]);const a=n===void 0?24:n,i=s===void 0?"":s;let l;e[4]===Symbol.for("react.memo_cache_sentinel")?(l=(0,o.jsx)("path",{d:"M6.89761 18.1618C8.28247 19.3099 10.0607 20 12.0001 20C16.4184 20 20.0001 16.4183 20.0001 12C20.0001 11.431 19.9407 10.8758 19.8278 10.3404M6.89761 18.1618C5.12756 16.6944 4.00014 14.4789 4.00014 12C4.00014 7.58172 7.58186 4 12.0001 4C15.8494 4 19.0637 6.71853 19.8278 10.3404M6.89761 18.1618C8.85314 17.7147 11.1796 16.7828 13.526 15.4281C16.2564 13.8517 18.4773 12.0125 19.8278 10.3404M6.89761 18.1618C4.46844 18.7171 2.61159 18.5243 1.99965 17.4644C1.36934 16.3726 2.19631 14.5969 3.99999 12.709M19.8278 10.3404C21.0796 8.79041 21.5836 7.38405 21.0522 6.46374C20.5134 5.53051 19.0095 5.26939 16.9997 5.59929",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e[4]=l):l=e[4];let d;return e[5]!==i||e[6]!==t||e[7]!==a?(d=(0,o.jsx)("svg",{width:a,height:a,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:i,...t,children:l}),e[5]=i,e[6]=t,e[7]=a,e[8]=d):d=e[8],d},pi=r=>{const e=(0,$e.c)(10);let t,n,s;e[0]!==r?({size:n,className:s,...t}=r,e[0]=r,e[1]=t,e[2]=n,e[3]=s):(t=e[1],n=e[2],s=e[3]);const a=n===void 0?24:n,i=s===void 0?"":s;let l,d;e[4]===Symbol.for("react.memo_cache_sentinel")?(l=(0,o.jsx)("path",{d:"M3 12C3 16.9706 7.02944 21 12 21C16.9706 21 21 16.9706 21 12C21 7.02944 16.9706 3 12 3C7.02944 3 3 7.02944 3 12Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),d=(0,o.jsx)("path",{d:"M10 15V9L15 12L10 15Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e[4]=l,e[5]=d):(l=e[4],d=e[5]);let m;return e[6]!==i||e[7]!==t||e[8]!==a?(m=(0,o.jsxs)("svg",{width:a,height:a,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:i,...t,children:[l,d]}),e[6]=i,e[7]=t,e[8]=a,e[9]=m):m=e[9],m},gi=r=>{const e=(0,$e.c)(9);let t,n,s;e[0]!==r?({size:n,className:s,...t}=r,e[0]=r,e[1]=t,e[2]=n,e[3]=s):(t=e[1],n=e[2],s=e[3]);const a=n===void 0?24:n,i=s===void 0?"":s;let l;e[4]===Symbol.for("react.memo_cache_sentinel")?(l=(0,o.jsx)("path",{d:"M15 17V18C15 19.6569 13.6569 21 12 21C10.3431 21 9 19.6569 9 18V17M15 17H9M15 17H18.5905C18.973 17 19.1652 17 19.3201 16.9478C19.616 16.848 19.8475 16.6156 19.9473 16.3198C19.9997 16.1643 19.9997 15.9715 19.9997 15.5859C19.9997 15.4172 19.9995 15.3329 19.9863 15.2524C19.9614 15.1004 19.9024 14.9563 19.8126 14.8312C19.7651 14.7651 19.7047 14.7048 19.5858 14.5858L19.1963 14.1963C19.0706 14.0706 19 13.9001 19 13.7224V10C19 6.134 15.866 2.99999 12 3C8.13401 3.00001 5 6.13401 5 10V13.7224C5 13.9002 4.92924 14.0706 4.80357 14.1963L4.41406 14.5858C4.29477 14.7051 4.23504 14.765 4.1875 14.8312C4.09766 14.9564 4.03815 15.1004 4.0132 15.2524C4 15.3329 4 15.4172 4 15.586C4 15.9715 4 16.1642 4.05245 16.3197C4.15225 16.6156 4.3848 16.848 4.68066 16.9478C4.83556 17 5.02701 17 5.40956 17H9M18.0186 2.01367C19.3978 3.05299 20.4843 4.43177 21.1724 6.01574M5.98197 2.01367C4.60275 3.05299 3.5162 4.43177 2.82812 6.01574",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e[4]=l):l=e[4];let d;return e[5]!==i||e[6]!==t||e[7]!==a?(d=(0,o.jsx)("svg",{width:a,height:a,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:i,...t,children:l}),e[5]=i,e[6]=t,e[7]=a,e[8]=d):d=e[8],d},kp=r=>{const e=(0,$e.c)(9);let t,n,s;e[0]!==r?({size:n,className:s,...t}=r,e[0]=r,e[1]=t,e[2]=n,e[3]=s):(t=e[1],n=e[2],s=e[3]);const a=n===void 0?24:n,i=s===void 0?"":s;let l;e[4]===Symbol.for("react.memo_cache_sentinel")?(l=(0,o.jsx)("path",{d:"M17 20C17 18.3431 14.7614 17 12 17C9.23858 17 7 18.3431 7 20M21 17.0004C21 15.7702 19.7659 14.7129 18 14.25M3 17.0004C3 15.7702 4.2341 14.7129 6 14.25M18 10.2361C18.6137 9.68679 19 8.8885 19 8C19 6.34315 17.6569 5 16 5C15.2316 5 14.5308 5.28885 14 5.76389M6 10.2361C5.38625 9.68679 5 8.8885 5 8C5 6.34315 6.34315 5 8 5C8.76835 5 9.46924 5.28885 10 5.76389M12 14C10.3431 14 9 12.6569 9 11C9 9.34315 10.3431 8 12 8C13.6569 8 15 9.34315 15 11C15 12.6569 13.6569 14 12 14Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e[4]=l):l=e[4];let d;return e[5]!==i||e[6]!==t||e[7]!==a?(d=(0,o.jsx)("svg",{width:a,height:a,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:i,...t,children:l}),e[5]=i,e[6]=t,e[7]=a,e[8]=d):d=e[8],d};var w0=ne();const vi=r=>{const e=(0,w0.c)(16),t=jt(),n=r?.id;let s;e[0]!==n?(s=["unread_notifications_count",n],e[0]=n,e[1]=s):s=e[1];let a;e[2]!==r?.id?(a=()=>Bl(r?.id||""),e[2]=r?.id,e[3]=a):a=e[3];const i=!!r?.id;let l;e[4]!==s||e[5]!==a||e[6]!==i?(l={queryKey:s,queryFn:a,enabled:i},e[4]=s,e[5]=a,e[6]=i,e[7]=l):l=e[7];const{data:d}=yt(l),m=d===void 0?0:d;let u;e[8]!==r||e[9]!==t?(u=()=>{if(!r?.id)return;const p=W.channel(`unread_count:${r.id}`).on("postgres_changes",{event:"*",schema:"public",table:"notifications",filter:`recipient_id=eq.${r.id}`},()=>{t.invalidateQueries({queryKey:["unread_notifications_count",r.id]}),t.invalidateQueries({queryKey:["notifications",r.id]})}).subscribe();return()=>{W.removeChannel(p)}},e[8]=r,e[9]=t,e[10]=u):u=e[10];const c=r?.id;let f;e[11]!==t||e[12]!==c?(f=[c,t],e[11]=t,e[12]=c,e[13]=f):f=e[13],(0,g.useEffect)(u,f);let h;return e[14]!==m?(h={unreadCount:m},e[14]=m,e[15]=h):h=e[15],h},xi=(r,e)=>{const t=jt(),[n,s]=(0,g.useState)({}),a=(0,g.useRef)(null),i=(0,g.useCallback)(async w=>{if(!(!r?.id||!w))try{await Ml(w,r.id),t.invalidateQueries({queryKey:["unread_messages_count",r.id]}),t.invalidateQueries({queryKey:["conversations",r.id]})}catch(M){console.error("Failed to mark as read:",M)}},[r?.id,t]),l=(0,g.useCallback)((w=[],M=[])=>w.map(v=>({id:v.id,sender:v.sender_id===r?.id?"me":"them",senderAvatar:v.sender?.avatar,senderName:v.sender?.name,text:v.content,type:v.type||"text",media:v.media?Array.isArray(v.media)?v.media:[v.media]:[],isRead:v.is_read,replyToId:v.reply_to_id,reactions:M.filter(y=>y.message_id===v.id),time:new Date(v.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})),[r?.id]),{data:d=[],isLoading:m}=yt({queryKey:["conversations",r?.id],queryFn:()=>Dl(r?.id||""),enabled:!!r?.id,staleTime:1e3*60}),{data:u=0}=yt({queryKey:["unread_messages_count",r?.id],queryFn:()=>Rl(r?.id||""),enabled:!!r?.id,staleTime:1e3*60}),{data:c,fetchNextPage:f,hasNextPage:h,isFetchingNextPage:p,isLoading:x}=ds({queryKey:["messages",e],queryFn:({pageParam:w})=>Tl(e,w,20),initialPageParam:null,getNextPageParam:w=>{if(!(!w||w.length<20))return w[w.length-1].created_at},enabled:!!e,refetchOnWindowFocus:!1}),{data:j=[]}=yt({queryKey:["reactions",e],queryFn:()=>Il(e),enabled:!!e,staleTime:1e3*60*5});(0,g.useEffect)(()=>{if(!r?.id)return;const w=W.channel(`messages_realtime:${e||"global"}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"messages"},v=>{const y=v.new;console.log("Realtime INSERT received:",y),e&&y.conversation_id===e&&(t.invalidateQueries({queryKey:["messages",e]}),y.sender_id!==r.id&&i(e)),t.invalidateQueries({queryKey:["conversations",r.id]}),y.sender_id!==r.id&&t.invalidateQueries({queryKey:["unread_messages_count",r.id]}),s(z=>({...z,[y.conversation_id]:!1}))}).on("postgres_changes",{event:"DELETE",schema:"public",table:"messages"},v=>{console.log("Realtime DELETE received:",v.old.id),t.invalidateQueries({queryKey:["messages"]}),t.invalidateQueries({queryKey:["conversations",r.id]})}).on("postgres_changes",{event:"*",schema:"public",table:"message_reactions"},()=>{e&&t.invalidateQueries({queryKey:["reactions",e]})}).subscribe(v=>{console.log(`Supabase Realtime Status (${e||"global"}):`,v)}),M=W.channel("chat_typing_shared").on("broadcast",{event:"typing"},({payload:v})=>{const{conversationId:y,isTyping:z,userId:T}=v;T!==r.id&&s(_=>({..._,[y]:z}))}).subscribe();return a.current=M,()=>{W.removeChannel(w),W.removeChannel(M)}},[r?.id,t,e,i]);const b=ht({mutationFn:({convId:w,text:M,type:v="text",media:y=[],replyToId:z=null})=>Ll(w,r.id,M,v,y,z),onSuccess:w=>{w&&(t.invalidateQueries({queryKey:["messages",w.conversation_id]}),t.invalidateQueries({queryKey:["conversations",r.id]}))}}),C=(w,M)=>{a.current&&r&&a.current.send({type:"broadcast",event:"typing",payload:{conversationId:w,isTyping:M,userId:r.id}})},E=async(w,M)=>{if(r?.id)try{await Pl(w,r.id,M),t.invalidateQueries({queryKey:["reactions",e]})}catch(v){console.error("Failed to toggle reaction:",v)}},A=async w=>{try{await Ol(w),t.invalidateQueries({queryKey:["messages",e]})}catch(M){console.error("Failed to delete message:",M)}},D=(0,g.useMemo)(()=>[...c?.pages.flatMap(w=>w)||[]].reverse(),[c]);return{conversations:d,unreadCount:u,isConvLoading:m,sendMessage:(w,M,v,y,z)=>b.mutate({convId:w,text:M,type:v,media:y,replyToId:z}),sendTypingStatus:C,typingStatus:n,markAsRead:i,formatMessages:l,onToggleReaction:E,onDeleteMessage:A,conversationReactions:j,isSending:b.isPending,messages:D,isMsgLoading:x,fetchNextMessages:f,hasMoreMessages:h,isFetchingMoreMessages:p}};var j0=ne(),k0=r=>{const e=(0,j0.c)(23),{handleProfileClick:t}=r,{currentUser:n}=Xe(),{unreadCount:s}=vi(n),{unreadCount:a}=xi(n),i=wr();let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l=[{id:"home",icon:fi,path:"/"},{id:"community",icon:hi,path:"/community"},{id:"reels",icon:pi,path:"/reels"},{id:"messages",icon:mi,path:"/messages"},{id:"notifications",icon:gi,path:"/notifications"}],e[0]=l):l=e[0];const d=l;let m;e[1]!==a||e[2]!==s?(m=d.map(E=>(0,o.jsx)(ls,{to:E.path,"aria-label":E.id,className:_0,children:A=>{const{isActive:D}=A;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(E.icon,{size:26,strokeWidth:D?2.5:2}),E.id==="notifications"&&s>0&&(0,o.jsx)("span",{className:"absolute right-[30%] top-3 size-2 rounded-full bg-rose-500 ring-2 ring-white dark:ring-black"}),E.id==="messages"&&a>0&&(0,o.jsx)("span",{className:"absolute right-[30%] top-3 size-2 rounded-full bg-rose-500 ring-2 ring-white dark:ring-black"})]})}},E.id)),e[1]=a,e[2]=s,e[3]=m):m=e[3];let u;e[4]!==n||e[5]!==t?(u=()=>{n&&t(n.handle)},e[4]=n,e[5]=t,e[6]=u):u=e[6];const c=`size-7 border-2 ${i.pathname.startsWith("/u/")?"border-black dark:border-white":"border-transparent opacity-70"}`,f=n?.avatar||"/default-avatar.webp";let h;e[7]!==f?(h=(0,o.jsx)(Qe,{src:f,alt:"Profile",className:"object-cover"}),e[7]=f,e[8]=h):h=e[8];let p;e[9]!==n?.handle?.[0]?(p=n?.handle?.[0]?.toUpperCase(),e[9]=n?.handle?.[0],e[10]=p):p=e[10];let x;e[11]!==p?(x=(0,o.jsx)(Ye,{children:p}),e[11]=p,e[12]=x):x=e[12];let j;e[13]!==c||e[14]!==h||e[15]!==x?(j=(0,o.jsxs)(Ve,{className:c,children:[h,x]}),e[13]=c,e[14]=h,e[15]=x,e[16]=j):j=e[16];let b;e[17]!==u||e[18]!==j?(b=(0,o.jsx)("button",{onClick:u,"aria-label":"My Profile",className:"flex h-full flex-1 flex-col items-center justify-center",children:j}),e[17]=u,e[18]=j,e[19]=b):b=e[19];let C;return e[20]!==b||e[21]!==m?(C=(0,o.jsxs)("nav",{className:"pb-safe fixed bottom-0 left-0 right-0 z-[40] flex h-16 items-center border-t border-zinc-100 bg-white/90 backdrop-blur-md dark:border-zinc-800 dark:bg-black/90 md:hidden",children:[m,b]}),e[20]=b,e[21]=m,e[22]=C):C=e[22],C},N0=k0;function _0(r){const{isActive:e}=r;return`relative flex h-full flex-1 flex-col items-center justify-center transition-all duration-200 ${e?"text-black dark:text-white":"text-zinc-400 opacity-70"}`}var C0=ne(),z0=()=>{const r=(0,C0.c)(5);let e,t;r[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)("img",{src:"/welcome-banner.webp",alt:"Welcome Banner",fetchPriority:"high",loading:"eager",decoding:"async",className:"h-full w-full object-cover duration-700 group-hover:scale-105"}),t=(0,o.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-black/20 to-transparent"}),r[0]=e,r[1]=t):(e=r[0],t=r[1]);let n;r[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,o.jsx)("h1",{className:"mb-1 text-3xl font-black drop-shadow-lg sm:text-4xl",children:"Welcome to Sysm"}),r[2]=n):n=r[2];let s;r[3]===Symbol.for("react.memo_cache_sentinel")?(s=(0,o.jsxs)("div",{className:"absolute bottom-6 left-8 text-white",children:[n,(0,o.jsxs)("p",{className:"tracking-wide text-sm font-medium opacity-90 drop-shadow-md sm:text-base",children:["a social network built by"," ",(0,o.jsx)("a",{href:"https://t.me/systemadminbd",target:"_blank",rel:"noopener noreferrer",className:"hover:underline",children:"@Systemadminbd"})]})]}),r[3]=s):s=r[3];let a;return r[4]===Symbol.for("react.memo_cache_sentinel")?(a=(0,o.jsxs)("div",{className:"group relative mb-6 aspect-[21/9] w-full cursor-pointer overflow-hidden rounded-3xl sm:aspect-[2.5/1]",children:[e,t,s,(0,o.jsx)("div",{className:"absolute bottom-4 right-8",children:(0,o.jsx)("img",{src:"/logo.webp",className:"size-12 animate-pulse rounded-xl opacity-80",alt:"",loading:"lazy",decoding:"async"})})]}),r[4]=a):a=r[4],a},S0=z0,A0=ne(),E0=r=>{const e=(0,A0.c)(18),{onPostClick:t}=r,{currentUser:n}=Xe(),{unreadCount:s}=vi(n),{unreadCount:a}=xi(n);let i,l,d,m,u;e[0]===Symbol.for("react.memo_cache_sentinel")?(i={id:"home",icon:fi,path:"/"},l={id:"community",icon:hi,path:"/community"},d={id:"reels",icon:pi,path:"/reels"},m={id:"messages",icon:mi,path:"/messages"},u={id:"notifications",icon:gi,path:"/notifications"},e[0]=i,e[1]=l,e[2]=d,e[3]=m,e[4]=u):(i=e[0],l=e[1],d=e[2],m=e[3],u=e[4]);const c=n?`/u/${n.handle}`:"/community";let f;e[5]!==c?(f=[i,l,d,m,u,{id:"profile",icon:fr,path:c}],e[5]=c,e[6]=f):f=e[6];const h=f;let p;e[7]===Symbol.for("react.memo_cache_sentinel")?(p=(0,o.jsx)(cs,{to:"/",className:"mb-8 transition-transform hover:scale-110",children:(0,o.jsx)("img",{src:"/logo.webp",alt:"Logo",className:"size-8 rounded-lg"})}),e[7]=p):p=e[7];let x;e[8]!==a||e[9]!==h||e[10]!==s?(x=h.map(C=>(0,o.jsxs)(ls,{to:C.path,"aria-label":C.id,className:M0,children:[(0,o.jsx)(C.icon,{size:26,strokeWidth:2.5}),C.id==="notifications"&&s>0&&(0,o.jsx)("span",{className:"absolute right-2 top-2 size-2 rounded-full bg-rose-500 ring-2 ring-white dark:ring-black"}),C.id==="messages"&&a>0&&(0,o.jsx)("span",{className:"absolute right-2 top-2 size-2 rounded-full bg-rose-500 ring-2 ring-white dark:ring-black"})]},C.id)),e[8]=a,e[9]=h,e[10]=s,e[11]=x):x=e[11];let j;e[12]!==n||e[13]!==t?(j=n&&(0,o.jsx)("button",{onClick:t,"aria-label":"Create Post",className:"mt-2 cursor-pointer rounded-xl bg-zinc-950 p-2.5 text-white shadow-lg transition-all duration-200 hover:scale-110 active:scale-95 dark:bg-white dark:text-zinc-950",title:"Create Post",children:(0,o.jsx)(Xt,{size:26,strokeWidth:2.5})}),e[12]=n,e[13]=t,e[14]=j):j=e[14];let b;return e[15]!==j||e[16]!==x?(b=(0,o.jsxs)("aside",{className:"sticky top-0 hidden h-screen w-[68px] shrink-0 flex-col items-center border-r border-zinc-100 bg-white py-5 transition-colors duration-200 dark:border-zinc-800 dark:bg-black md:flex",children:[p,(0,o.jsxs)("nav",{className:"flex w-full flex-col items-center gap-y-4",children:[x,j]})]}),e[15]=j,e[16]=x,e[17]=b):b=e[17],b},R0=E0;function M0(r){const{isActive:e}=r;return`relative rounded-xl border border-transparent p-2.5 transition-all duration-200 ${e?"border-zinc-200 bg-zinc-100 text-black dark:border-zinc-800 dark:bg-zinc-900 dark:text-white":"text-zinc-500 hover:bg-zinc-50 dark:hover:bg-zinc-900"}`}var D0=ne(),T0=()=>{const r=(0,D0.c)(49),{currentUser:e,setAuthMode:t}=Xe(),{darkMode:n,toggleDarkMode:s}=$r(),[a,i]=(0,g.useState)(""),l=Ot();let d;r[0]===Symbol.for("react.memo_cache_sentinel")?(d={queryKey:["trending-hashtags"],queryFn:P0,staleTime:3e5,refetchInterval:6e4},r[0]=d):d=r[0];const{data:m}=yt(d);let u;r[1]!==m?(u=m===void 0?[]:m,r[1]=m,r[2]=u):u=r[2];const c=u;let f;r[3]===Symbol.for("react.memo_cache_sentinel")?(f=[" 2026 Sysm","Terms","Privacy","Guidelines","Discord","Sysm","GitHub","Support","Status"],r[3]=f):f=r[3];const h=f;let p;r[4]!==n?(p=n?(0,o.jsx)(Bo,{size:20}):(0,o.jsx)(Uo,{size:20}),r[4]=n,r[5]=p):p=r[5];let x;r[6]!==p||r[7]!==s?(x=(0,o.jsx)("button",{onClick:s,className:"cursor-pointer rounded-full border border-zinc-100 bg-zinc-50 p-3 text-zinc-500 transition-all hover:bg-zinc-100 dark:border-zinc-800 dark:bg-zinc-900 dark:text-zinc-400 dark:hover:bg-zinc-800",title:"Toggle Theme",children:p}),r[6]=p,r[7]=s,r[8]=x):x=r[8];const j=x;if(e){let T;r[9]===Symbol.for("react.memo_cache_sentinel")?(T=()=>i(""),r[9]=T):T=r[9];let _;r[10]!==a?(_=(0,o.jsx)("div",{className:"flex-1",children:(0,o.jsx)(qn,{value:a,onChange:i,onClear:T})}),r[10]=a,r[11]=_):_=r[11];let R;r[12]!==_||r[13]!==j?(R=(0,o.jsxs)("div",{className:"flex items-center gap-3",children:[_,j]}),r[12]=_,r[13]=j,r[14]=R):R=r[14];let S;r[15]===Symbol.for("react.memo_cache_sentinel")?(S=(0,o.jsx)("h3",{className:"px-4 pt-4 pb-2 text-xl font-black text-[--foreground]",children:"What's happening"}),r[15]=S):S=r[15];let I;if(r[16]!==l||r[17]!==c){let H;r[19]!==l?(H=q=>(0,o.jsxs)("div",{onClick:()=>l(`/tags/${q.name.replace(/^#/,"")}`),className:"group cursor-pointer px-4 py-3 transition-colors hover:bg-zinc-50 dark:hover:bg-zinc-900/50",children:[(0,o.jsx)("div",{className:"text-[13px] font-medium text-zinc-500 dark:text-zinc-400",children:"Trending"}),(0,o.jsxs)("div",{className:"text-[15px] font-bold text-[--foreground] group-hover:text-violet-500 transition-colors",children:["#",q.name.replace(/^#/,"")]}),(0,o.jsxs)("div",{className:"text-[13px] text-zinc-500 dark:text-zinc-400",children:[q.usage_count," posts"]})]},q.id),r[19]=l,r[20]=H):H=r[20],I=c.map(H),r[16]=l,r[17]=c,r[18]=I}else I=r[18];let k;r[21]!==c.length?(k=c.length===0&&(0,o.jsx)("p",{className:"px-4 py-6 text-sm text-zinc-500 text-center",children:"No trends yet"}),r[21]=c.length,r[22]=k):k=r[22];let N;r[23]===Symbol.for("react.memo_cache_sentinel")?(N=(0,o.jsx)("button",{className:"w-full px-4 py-4 text-left text-violet-500 hover:bg-zinc-50 dark:hover:bg-zinc-900/50 transition-colors text-sm font-medium",children:"Show more"}),r[23]=N):N=r[23];let F;r[24]!==I||r[25]!==k?(F=(0,o.jsxs)("div",{className:"rounded-2xl border border-[--border] bg-[--card] overflow-hidden",children:[S,(0,o.jsxs)("div",{className:"flex flex-col",children:[I,k,N]})]}),r[24]=I,r[25]=k,r[26]=F):F=r[26];let P;r[27]===Symbol.for("react.memo_cache_sentinel")?(P=(0,o.jsx)("div",{className:"flex flex-wrap gap-x-4 gap-y-2 px-2 pb-5 text-[13px] font-medium text-zinc-500",children:h.map(L0)}),r[27]=P):P=r[27];let O;return r[28]!==F||r[29]!==R?(O=(0,o.jsxs)("aside",{className:"sticky top-5 hidden max-h-screen w-[350px] shrink-0 flex-col gap-y-6 overflow-y-auto lg:flex",children:[R,F,P]}),r[28]=F,r[29]=R,r[30]=O):O=r[30],O}let b,C;r[31]!==t?(b=(0,o.jsx)("button",{onClick:()=>t("signup"),className:"cursor-pointer flex-1 rounded-full border border-[--border] bg-[--card] py-2.5 font-bold text-[--foreground] shadow-sm transition-colors hover:bg-zinc-50 dark:hover:bg-zinc-900",children:"Signup"}),C=()=>t("login"),r[31]=t,r[32]=b,r[33]=C):(b=r[32],C=r[33]);let E;r[34]===Symbol.for("react.memo_cache_sentinel")?(E=(0,o.jsx)("img",{src:"/logo.webp",alt:"",className:"size-4 rounded-sm"}),r[34]=E):E=r[34];let A;r[35]!==C?(A=(0,o.jsxs)("button",{onClick:C,className:"cursor-pointer flex flex-1 items-center justify-center gap-2 rounded-full bg-zinc-950 py-2.5 font-bold text-white transition-opacity hover:opacity-90 dark:bg-white dark:text-zinc-950",children:[E,"Login"]}),r[35]=C,r[36]=A):A=r[36];let D;r[37]!==b||r[38]!==A||r[39]!==j?(D=(0,o.jsxs)("div",{className:"flex gap-3",children:[b,A,j]}),r[37]=b,r[38]=A,r[39]=j,r[40]=D):D=r[40];let w;r[41]===Symbol.for("react.memo_cache_sentinel")?(w=()=>i(""),r[41]=w):w=r[41];let M;r[42]!==a?(M=(0,o.jsx)(qn,{value:a,onChange:i,onClear:w}),r[42]=a,r[43]=M):M=r[43];let v;r[44]===Symbol.for("react.memo_cache_sentinel")?(v=(0,o.jsx)(d0,{}),r[44]=v):v=r[44];let y;r[45]===Symbol.for("react.memo_cache_sentinel")?(y=(0,o.jsx)("div",{className:"flex flex-wrap gap-x-4 gap-y-2 px-2 pb-5 text-[13px] font-medium text-zinc-500",children:h.map(F0)}),r[45]=y):y=r[45];let z;return r[46]!==D||r[47]!==M?(z=(0,o.jsxs)("aside",{className:"sticky top-5 hidden w-[400px] shrink-0 flex-col gap-y-6 pr-4 lg:flex",children:[D,M,v,y]}),r[46]=D,r[47]=M,r[48]=z):z=r[48],z},I0=T0;function P0(){return Zl(5)}function L0(r){return(0,o.jsx)("a",{href:"#",className:"hover:underline",children:r},r)}function F0(r){return(0,o.jsx)("a",{href:"#",className:"hover:underline",children:r},r)}var O0=ne(),U0=r=>{const e=(0,O0.c)(26),{onPostClick:t}=r,n=wr(),s=Ot(),{darkMode:a}=$r(),i=n.pathname==="/";let l;e[0]!==n.pathname?(l=n.pathname.startsWith("/reels")||n.pathname.startsWith("/messages")&&n.pathname.split("/").length>2,e[0]=n.pathname,e[1]=l):l=e[1];const d=l;let m;e[2]!==s?(m=D=>{s(`/u/${D}`)},e[2]=s,e[3]=m):m=e[3];const u=m,c=`min-h-screen overflow-x-hidden bg-[--background] text-[--foreground] font-sans selection:bg-violet-500 selection:text-white transition-colors duration-200 ${a?"dark":""}`;let f;e[4]!==t?(f=(0,o.jsx)(R0,{onPostClick:t}),e[4]=t,e[5]=f):f=e[5];let h;e[6]!==i?(h=i&&(0,o.jsx)("div",{className:"w-full max-w-full overflow-hidden",children:(0,o.jsx)(S0,{})}),e[6]=i,e[7]=h):h=e[7];let p;e[8]===Symbol.for("react.memo_cache_sentinel")?(p=(0,o.jsx)("div",{className:"w-full min-w-0",children:(0,o.jsx)(Ki,{})}),e[8]=p):p=e[8];let x;e[9]!==h?(x=(0,o.jsxs)("div",{className:"flex w-full min-w-0 flex-1 flex-col overflow-x-hidden",children:[h,p]}),e[9]=h,e[10]=x):x=e[10];let j;e[11]!==n.pathname?(j=!n.pathname.startsWith("/messages")&&(0,o.jsx)(I0,{}),e[11]=n.pathname,e[12]=j):j=e[12];let b;e[13]!==x||e[14]!==j?(b=(0,o.jsxs)("main",{className:"flex w-full flex-1 justify-center px-0 gap-x-0 md:px-2 md:py-3 md:gap-x-4 lg:gap-x-8",children:[x,j]}),e[13]=x,e[14]=j,e[15]=b):b=e[15];let C;e[16]!==f||e[17]!==b?(C=(0,o.jsxs)("div",{className:"mx-auto flex min-h-screen w-full max-w-[1500px] justify-center px-0 sm:px-0",children:[f,b]}),e[16]=f,e[17]=b,e[18]=C):C=e[18];let E;e[19]!==u||e[20]!==d?(E=!d&&(0,o.jsx)(N0,{handleProfileClick:u}),e[19]=u,e[20]=d,e[21]=E):E=e[21];let A;return e[22]!==C||e[23]!==E||e[24]!==c?(A=(0,o.jsxs)("div",{className:c,children:[C,E]}),e[22]=C,e[23]=E,e[24]=c,e[25]=A):A=e[25],A},q0=U0,B0=ne(),H0=r=>{const e=(0,B0.c)(2),{children:t}=r;let n;return e[0]!==t?(n=(0,o.jsx)("div",{className:"w-full animate-in fade-in slide-in-from-bottom-2 duration-700 ease-[cubic-bezier(0.22,1,0.36,1)] fill-mode-forwards",children:t}),e[0]=t,e[1]=n):n=e[1],n},rt=H0,Np=ne(),W0=ne(),V0=r=>{const e=(0,W0.c)(72),{isOpen:t,onClose:n}=r,{currentUser:s}=Xe(),{addToast:a}=ut(),i=Ot(),l=jt();let d;e[0]===Symbol.for("react.memo_cache_sentinel")?(d={name:"",handle:"",description:"",isPrivate:!1},e[0]=d):d=e[0];const[m,u]=(0,g.useState)(d);let c;e[1]!==a||e[2]!==s?.id||e[3]!==i||e[4]!==n||e[5]!==l?(c=U=>{U&&(a(`Community "${U.name}" created!`),l.invalidateQueries({queryKey:["user-communities",s?.id]}),n(),i(`/c/${U.handle}`))},e[1]=a,e[2]=s?.id,e[3]=i,e[4]=n,e[5]=l,e[6]=c):c=e[6];let f;e[7]!==a?(f=U=>{console.error(U),a(U.message||"Failed to create community","error")},e[7]=a,e[8]=f):f=e[8];let h;e[9]!==c||e[10]!==f?(h={mutationFn:Q0,onSuccess:c,onError:f},e[9]=c,e[10]=f,e[11]=h):h=e[11];const p=ht(h);let x;e[12]!==p||e[13]!==s||e[14]!==m.description||e[15]!==m.handle||e[16]!==m.isPrivate||e[17]!==m.name?(x=U=>{U.preventDefault(),!(!m.name||!m.handle||!s)&&p.mutate({name:m.name,handle:m.handle.toLowerCase().replace(/[^a-z0-9_]/g,""),description:m.description,is_private:m.isPrivate,creator_id:s.id})},e[12]=p,e[13]=s,e[14]=m.description,e[15]=m.handle,e[16]=m.isPrivate,e[17]=m.name,e[18]=x):x=e[18];const j=x;let b;e[19]!==p.isPending||e[20]!==n?(b=()=>!p.isPending&&n(),e[19]=p.isPending,e[20]=n,e[21]=b):b=e[21];let C;e[22]===Symbol.for("react.memo_cache_sentinel")?(C=(0,o.jsxs)("div",{className:"flex flex-col items-center justify-center rounded-2xl border-2 border-dashed border-zinc-200 bg-zinc-50 p-6 dark:border-zinc-800 dark:bg-zinc-900",children:[(0,o.jsx)("div",{className:"mb-3 flex size-20 items-center justify-center rounded-2xl bg-white shadow-sm dark:bg-black",children:(0,o.jsx)(Or,{size:32,className:"text-violet-600"})}),(0,o.jsx)("p",{className:"max-w-[200px] text-center text-xs font-medium text-zinc-500",children:"Communities are where people with shared interests connect."})]}),e[22]=C):C=e[22];let E;e[23]===Symbol.for("react.memo_cache_sentinel")?(E=(0,o.jsx)("label",{className:"ml-1 text-sm font-bold",children:"Community Name"}),e[23]=E):E=e[23];let A;e[24]!==m?(A=U=>u({...m,name:U.target.value}),e[24]=m,e[25]=A):A=e[25];let D;e[26]!==m.name||e[27]!==A?(D=(0,o.jsxs)("div",{className:"space-y-1.5",children:[E,(0,o.jsx)("input",{type:"text",required:!0,className:"w-full rounded-xl border border-zinc-200 bg-zinc-50 px-4 py-2.5 outline-none transition-all focus:border-violet-500 focus:ring-2 focus:ring-violet-500/20 dark:border-zinc-800 dark:bg-zinc-900",placeholder:"e.g. Photography Enthusiasts",value:m.name,onChange:A})]}),e[26]=m.name,e[27]=A,e[28]=D):D=e[28];let w;e[29]===Symbol.for("react.memo_cache_sentinel")?(w=(0,o.jsx)("label",{className:"ml-1 text-sm font-bold",children:"Handle"}),e[29]=w):w=e[29];let M;e[30]===Symbol.for("react.memo_cache_sentinel")?(M=(0,o.jsx)("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 font-medium text-zinc-500",children:"c/"}),e[30]=M):M=e[30];let v;e[31]!==m?(v=U=>u({...m,handle:U.target.value.toLowerCase().replace(/[^a-z0-9_]/g,"")}),e[31]=m,e[32]=v):v=e[32];let y;e[33]!==m.handle||e[34]!==v?(y=(0,o.jsxs)("div",{className:"space-y-1.5",children:[w,(0,o.jsxs)("div",{className:"relative",children:[M,(0,o.jsx)("input",{type:"text",required:!0,className:"w-full rounded-xl border border-zinc-200 bg-zinc-50 pl-8 pr-4 py-2.5 outline-none transition-all focus:border-violet-500 focus:ring-2 focus:ring-violet-500/20 dark:border-zinc-800 dark:bg-zinc-900",placeholder:"photography",value:m.handle,onChange:v})]})]}),e[33]=m.handle,e[34]=v,e[35]=y):y=e[35];let z;e[36]===Symbol.for("react.memo_cache_sentinel")?(z=(0,o.jsx)("label",{className:"ml-1 text-sm font-bold",children:"Description (Optional)"}),e[36]=z):z=e[36];let T;e[37]!==m?(T=U=>u({...m,description:U.target.value}),e[37]=m,e[38]=T):T=e[38];let _;e[39]!==m.description||e[40]!==T?(_=(0,o.jsxs)("div",{className:"space-y-1.5",children:[z,(0,o.jsx)("textarea",{className:"min-h-[100px] w-full resize-none rounded-xl border border-zinc-200 bg-zinc-50 px-4 py-2.5 outline-none transition-all focus:border-violet-500 focus:ring-2 focus:ring-violet-500/20 dark:border-zinc-800 dark:bg-zinc-900",placeholder:"What is this community about?",value:m.description,onChange:T})]}),e[39]=m.description,e[40]=T,e[41]=_):_=e[41];let R;e[42]===Symbol.for("react.memo_cache_sentinel")?(R=(0,o.jsxs)("div",{className:"flex flex-col",children:[(0,o.jsx)("span",{className:"text-sm font-bold",children:"Private Community"}),(0,o.jsx)("span",{className:"text-[10px] text-zinc-500",children:"Only Admins can post in private communities"})]}),e[42]=R):R=e[42];let S;e[43]!==m?(S=U=>u({...m,isPrivate:U.target.checked}),e[43]=m,e[44]=S):S=e[44];let I;e[45]!==m.isPrivate||e[46]!==S?(I=(0,o.jsxs)("div",{className:"flex items-center justify-between rounded-xl border border-zinc-200 bg-zinc-50 p-4 dark:border-zinc-800 dark:bg-zinc-900",children:[R,(0,o.jsx)("input",{type:"checkbox",className:"size-5 cursor-pointer rounded-md accent-violet-600",checked:m.isPrivate,onChange:S})]}),e[45]=m.isPrivate,e[46]=S,e[47]=I):I=e[47];let k;e[48]!==D||e[49]!==y||e[50]!==_||e[51]!==I?(k=(0,o.jsxs)("div",{className:"space-y-4",children:[D,y,_,I]}),e[48]=D,e[49]=y,e[50]=_,e[51]=I,e[52]=k):k=e[52];let N;e[53]!==p.isPending||e[54]!==n?(N=(0,o.jsx)(Ie,{type:"button",variant:"outline",className:"flex-1",onClick:n,disabled:p.isPending,children:"Cancel"}),e[53]=p.isPending,e[54]=n,e[55]=N):N=e[55];const F=p.isPending||!m.name||!m.handle;let P;e[56]!==p.isPending?(P=p.isPending?(0,o.jsx)(Rt,{size:18,className:"animate-spin"}):"Create",e[56]=p.isPending,e[57]=P):P=e[57];let O;e[58]!==F||e[59]!==P?(O=(0,o.jsx)(Ie,{type:"submit",className:"flex-1",disabled:F,children:P}),e[58]=F,e[59]=P,e[60]=O):O=e[60];let H;e[61]!==N||e[62]!==O?(H=(0,o.jsxs)("div",{className:"flex gap-3 pt-2",children:[N,O]}),e[61]=N,e[62]=O,e[63]=H):H=e[63];let q;e[64]!==j||e[65]!==k||e[66]!==H?(q=(0,o.jsxs)("form",{onSubmit:j,className:"space-y-5",children:[C,k,H]}),e[64]=j,e[65]=k,e[66]=H,e[67]=q):q=e[67];let B;return e[68]!==t||e[69]!==q||e[70]!==b?(B=(0,o.jsx)(zt,{isOpen:t,onClose:b,title:"Create Community",className:"sm:max-w-md",children:q}),e[68]=t,e[69]=q,e[70]=b,e[71]=B):B=e[71],B},_p=V0;function Q0(r){return Kl(r)}function Cp({isOpen:r,onClose:e,community:t,onUpdate:n}){const{addToast:s}=ut(),[a,i]=(0,g.useState)({name:"",handle:"",description:"",avatar:"",cover:"",isPrivate:!1}),[l,d]=(0,g.useState)(!1),m=(0,g.useRef)(null),u=(0,g.useRef)(null);(0,g.useEffect)(()=>{t&&r&&i({name:t.name||"",handle:t.handle||"",description:t.description||"",avatar:t.avatar||"",cover:t.cover||"",isPrivate:t.isPrivate||!1})},[t,r]);const c=(p,x)=>{const j=p.target.files?.[0];j&&f(j,x)},f=async(p,x)=>{d(!0);try{const j=await wt(p);i(b=>({...b,[x]:j.url})),s(`${x.charAt(0).toUpperCase()+x.slice(1)} uploaded!`)}catch{s(`Failed to upload ${x}`,"error")}finally{d(!1)}},h=async p=>{if(p.preventDefault(),!(!a.name||!a.handle||!t)){d(!0);try{const x=await Yl(t.id,{name:a.name,handle:a.handle.toLowerCase().replace(/[^a-z0-9_]/g,""),description:a.description,avatar_url:a.avatar,cover_url:a.cover,is_private:a.isPrivate});s("Community updated successfully!"),n&&n(x),e()}catch(x){console.error(x),s(x.message||"Failed to update community","error")}finally{d(!1)}}};return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)(zt,{isOpen:r,onClose:()=>!l&&e(),title:"Edit Community",className:"sm:max-w-xl",children:[(0,o.jsxs)("div",{className:"max-h-[85vh] space-y-6 overflow-y-auto px-1",children:[(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsxs)("div",{className:"group relative h-32 overflow-hidden rounded-xl bg-zinc-100 dark:bg-zinc-900 sm:h-40",children:[a.cover&&(0,o.jsx)("img",{src:a.cover,className:"h-full w-full object-cover",alt:""}),(0,o.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black/20 opacity-0 transition-opacity group-hover:opacity-100",children:(0,o.jsx)("button",{onClick:()=>u.current?.click(),className:"rounded-full bg-black/60 p-3 text-white transition-all hover:bg-black",children:(0,o.jsx)(ur,{size:20})})})]}),(0,o.jsx)("div",{className:"absolute -bottom-8 left-6",children:(0,o.jsxs)("div",{className:"group relative size-20 overflow-hidden rounded-2xl border-4 border-white bg-zinc-100 shadow-lg dark:border-black dark:bg-zinc-800 sm:size-24",children:[(0,o.jsx)("img",{src:a.avatar,className:"size-full object-cover",alt:""}),(0,o.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black/40 opacity-0 transition-opacity group-hover:opacity-100",children:(0,o.jsx)("button",{onClick:()=>m.current?.click(),className:"p-2 text-white",children:(0,o.jsx)(ur,{size:18})})})]})})]}),(0,o.jsx)("div",{className:"pt-6",children:(0,o.jsxs)("form",{onSubmit:h,className:"space-y-5",children:[(0,o.jsxs)("div",{className:"space-y-4",children:[(0,o.jsxs)("div",{className:"space-y-1.5",children:[(0,o.jsx)("label",{className:"ml-1 text-sm font-bold",children:"Community Name"}),(0,o.jsx)("input",{type:"text",required:!0,className:"w-full rounded-xl border border-zinc-200 bg-zinc-50 px-4 py-2.5 font-medium outline-none transition-all focus:border-violet-500 focus:ring-2 focus:ring-violet-500/20 dark:border-zinc-800 dark:bg-zinc-900",value:a.name,onChange:p=>i({...a,name:p.target.value})})]}),(0,o.jsxs)("div",{className:"space-y-1.5",children:[(0,o.jsx)("label",{className:"ml-1 text-sm font-bold",children:"Handle"}),(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsx)("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-sm font-medium text-zinc-500",children:"c/"}),(0,o.jsx)("input",{type:"text",required:!0,className:"w-full rounded-xl border border-zinc-200 bg-zinc-50 pl-8 pr-4 py-2.5 text-sm font-medium outline-none transition-all focus:border-violet-500 focus:ring-2 focus:ring-violet-500/20 dark:border-zinc-800 dark:bg-zinc-900",value:a.handle,onChange:p=>i({...a,handle:p.target.value.toLowerCase().replace(/[^a-z0-9_]/g,"")})})]})]}),(0,o.jsxs)("div",{className:"space-y-1.5",children:[(0,o.jsx)("label",{className:"ml-1 text-sm font-bold",children:"Description"}),(0,o.jsx)("textarea",{className:"min-h-[100px] w-full resize-none rounded-xl border border-zinc-200 bg-zinc-50 px-4 py-2.5 font-medium outline-none transition-all focus:border-violet-500 focus:ring-2 focus:ring-violet-500/20 dark:border-zinc-800 dark:bg-zinc-900",placeholder:"What is this community about?",value:a.description,onChange:p=>i({...a,description:p.target.value})})]}),(0,o.jsxs)("div",{className:"flex items-center justify-between rounded-xl border border-zinc-200 bg-zinc-50 p-4 dark:border-zinc-800 dark:bg-zinc-900",children:[(0,o.jsxs)("div",{className:"flex flex-col",children:[(0,o.jsx)("span",{className:"text-sm font-bold",children:"Private Community"}),(0,o.jsx)("span",{className:"text-[10px] text-zinc-500",children:"Only Admins can post in private communities"})]}),(0,o.jsx)("input",{type:"checkbox",className:"size-5 cursor-pointer rounded-md accent-violet-600",checked:a.isPrivate,onChange:p=>i({...a,isPrivate:p.target.checked})})]})]}),(0,o.jsxs)("div",{className:"flex gap-3 py-2 pt-6",children:[(0,o.jsx)(Ie,{type:"button",variant:"outline",className:"h-11 flex-1 rounded-xl font-bold",onClick:e,disabled:l,children:"Cancel"}),(0,o.jsx)(Ie,{type:"submit",className:"h-11 flex-1 rounded-xl bg-zinc-900 font-bold text-white transition-all hover:bg-zinc-800 active:scale-95 dark:bg-white dark:text-black dark:hover:bg-zinc-200",disabled:l||!a.name,children:l?(0,o.jsx)(Rt,{size:18,className:"animate-spin"}):"Save Changes"})]})]})})]}),(0,o.jsx)("input",{type:"file",ref:m,className:"hidden",accept:"image/*",onChange:p=>c(p,"avatar")}),(0,o.jsx)("input",{type:"file",ref:u,className:"hidden",accept:"image/*",onChange:p=>c(p,"cover")})]})})}function zp({isOpen:r,onClose:e,community:t}){const{addToast:n}=ut(),{currentUser:s}=Xe(),[a,i]=(0,g.useState)([]),[l,d]=(0,g.useState)(!1),[m,u]=(0,g.useState)(""),[c,f]=(0,g.useState)("members"),[h,p]=(0,g.useState)(!1),x=s?.id===t?.creatorId,j=(0,g.useCallback)(async(D="")=>{if(t?.id){d(!0),p(!0);try{i(await Xl(t.id,D))}catch(w){console.error("Failed to load members:",w),n("Failed to load members","error")}finally{d(!1)}}},[t?.id,n]);(0,g.useEffect)(()=>{r&&t?.id?j(""):(u(""),i([]),p(!1))},[r,t?.id,j]),(0,g.useEffect)(()=>{if(m.length>=2){const D=setTimeout(()=>{j(m)},500);return()=>clearTimeout(D)}else m.length===0&&h&&j("")},[m,j,h]);const b=async(D,w)=>{try{const M=w==="admin"?"member":"admin";await Gl(t.id,D,M),i(v=>v.map(y=>y.userId===D?{...y,role:M}:y)),n(`Role updated to ${M}`)}catch{n("Failed to update role","error")}},C=(0,g.useMemo)(()=>a.filter(D=>D.role==="admin"||D.userId===t.creatorId),[a,t.creatorId]),E=(0,g.useMemo)(()=>a.filter(D=>D.role!=="admin"&&D.userId!==t.creatorId),[a,t.creatorId]),A=D=>l?(0,o.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,o.jsx)(Rt,{className:"animate-spin text-violet-500",size:32})}):D.length>0?(0,o.jsx)("div",{className:"divide-y divide-zinc-100 dark:divide-zinc-800/50",children:D.map(w=>(0,o.jsxs)("div",{className:"flex items-center justify-between p-4 transition-colors hover:bg-white dark:hover:bg-zinc-800/50",children:[(0,o.jsxs)("div",{className:"flex items-center gap-3",children:[(0,o.jsxs)(Ve,{className:"size-10 border border-zinc-200 shadow-sm dark:border-zinc-700",children:[(0,o.jsx)(Qe,{src:w.user.avatar_url}),(0,o.jsx)(Ye,{children:w.user.username?.[0]?.toUpperCase()})]}),(0,o.jsxs)("div",{className:"min-w-0 flex flex-col",children:[(0,o.jsxs)("div",{className:"flex items-center gap-1",children:[(0,o.jsx)("span",{className:"font-bold dark:text-zinc-200",children:w.user.name}),w.user.is_verified&&(0,o.jsx)(ui,{size:14,className:"text-blue-500"})]}),(0,o.jsxs)("span",{className:"text-xs font-medium text-zinc-500",children:["@",w.user.username]})]})]}),(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[w.userId===t.creatorId?(0,o.jsx)("span",{className:"rounded-full bg-zinc-200 px-3 py-1 text-[10px] font-black tracking-wider text-zinc-600 dark:bg-zinc-800 dark:text-zinc-400",children:"OWNER"}):x&&(0,o.jsx)("button",{onClick:()=>b(w.userId,w.role),className:`flex items-center gap-1.5 rounded-full px-3 py-1.5 text-[11px] font-bold transition-all ${w.role==="admin"?"bg-rose-50 text-rose-600 hover:bg-rose-100 dark:bg-rose-950/20 dark:text-rose-400":"bg-zinc-100 text-zinc-600 hover:bg-zinc-200 dark:bg-zinc-800 dark:text-zinc-400 dark:hover:bg-zinc-700"}`,children:w.role==="admin"?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(js,{size:14}),"Admin"]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(fr,{size:14}),"Make Admin"]})}),!x&&w.role==="admin"&&w.userId!==t.creatorId&&(0,o.jsx)("span",{className:"rounded-full bg-violet-50 px-3 py-1 text-[10px] font-black tracking-wider text-violet-600 dark:bg-violet-900/20 dark:text-violet-400",children:"ADMIN"})]})]},w.userId))}):(0,o.jsxs)("div",{className:"flex flex-col items-center justify-center px-6 py-20 text-center",children:[(0,o.jsx)("div",{className:"mb-3 flex size-12 items-center justify-center rounded-full bg-zinc-100 dark:bg-zinc-800",children:(0,o.jsx)(fr,{size:24,className:"text-zinc-400"})}),(0,o.jsxs)("p",{className:"text-sm font-bold dark:text-white",children:["No ",c," found"]}),(0,o.jsx)("p",{className:"mt-1 text-xs text-zinc-500",children:"Try a different search term"})]});return(0,o.jsx)(zt,{isOpen:r,onClose:e,title:"Manage Members",className:"sm:max-w-md",children:(0,o.jsxs)("div",{className:"space-y-4",children:[(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsx)(Nr,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-zinc-400",size:18}),(0,o.jsx)("input",{type:"text",placeholder:"Search members...",className:"w-full rounded-xl border border-zinc-200 bg-zinc-50 pl-10 pr-4 py-2.5 text-sm font-medium outline-none transition-all focus:border-violet-500 focus:ring-2 focus:ring-violet-500/20 dark:border-zinc-800 dark:bg-zinc-900",value:m,onChange:D=>u(D.target.value)})]}),(0,o.jsxs)(m0,{value:c,onValueChange:f,className:"w-full",children:[(0,o.jsxs)(di,{className:"h-11 w-full rounded-xl bg-zinc-100 p-1 dark:bg-zinc-900",children:[(0,o.jsxs)(Br,{value:"members",className:"flex-1 rounded-lg font-bold data-[state=active]:bg-white dark:text-zinc-400 dark:data-[state=active]:bg-zinc-800 dark:data-[state=active]:text-white",children:["Members (",E.length,")"]}),(0,o.jsxs)(Br,{value:"admins",className:"flex-1 rounded-lg font-bold data-[state=active]:bg-white dark:text-zinc-400 dark:data-[state=active]:bg-zinc-800 dark:data-[state=active]:text-white",children:["Admins (",C.length,")"]})]}),(0,o.jsxs)("div",{className:"max-h-[400px] min-h-[300px] mt-4 overflow-y-auto overflow-hidden rounded-2xl border border-zinc-100 bg-zinc-50 dark:border-zinc-800 dark:bg-zinc-900",children:[(0,o.jsx)(Hr,{value:"members",className:"m-0",children:A(E)}),(0,o.jsx)(Hr,{value:"admins",className:"m-0",children:A(C)})]})]})]})})}var K0=({isOpen:r,onClose:e})=>{const{currentUser:t}=Xe(),{addToast:n}=ut(),s=jt(),[a,i]=(0,g.useState)(null),[l,d]=(0,g.useState)(!1),[m,u]=(0,g.useState)(null),c=(0,g.useRef)(null),f=j=>{const b=j.target.files?.[0];b&&i(b)},h=()=>{if(!a)return;const j=new FileReader;j.onload=()=>{u(j.result)},j.readAsDataURL(a)},p=j=>{i(new File([j],`story-cropped-${Date.now()}.jpg`,{type:"image/jpeg"})),u(null)},x=async()=>{if(!(!a||!t)){d(!0);try{const j=await wt(a);await Hl(t.id,j.url,j.type),i(null),e(),n("Story shared!"),s.invalidateQueries({queryKey:["stories"]})}catch(j){console.error("Failed to create story:",j),n("Failed to share story.","error")}finally{d(!1)}}};return(0,o.jsxs)(zt,{isOpen:r,onClose:()=>!l&&e(),title:"Add Story",children:[(0,o.jsxs)("div",{className:"space-y-6",children:[a?(0,o.jsxs)("div",{className:"space-y-6",children:[(0,o.jsxs)("div",{className:"relative mx-auto aspect-[9/16] w-full max-w-[280px] overflow-hidden rounded-3xl shadow-2xl",children:[(0,o.jsx)("img",{src:URL.createObjectURL(a),className:"h-full w-full object-cover",alt:"Preview"}),(0,o.jsx)("button",{onClick:()=>i(null),className:"absolute right-4 top-4 rounded-full bg-black/50 p-2 text-white transition-colors hover:bg-rose-500",title:"Remove",children:(0,o.jsx)(kt,{size:20})})]}),(0,o.jsxs)("div",{className:"flex items-center justify-center gap-4 rounded-2xl bg-zinc-50/50 py-2 dark:bg-zinc-900/50",children:[(0,o.jsxs)("button",{onClick:h,className:"group flex flex-col items-center gap-1.5 rounded-xl p-3 text-zinc-600 transition-all hover:bg-white hover:text-violet-600 dark:text-zinc-400 dark:hover:bg-zinc-800 dark:hover:text-violet-400",children:[(0,o.jsx)("div",{className:"rounded-lg bg-white p-2 shadow-sm transition-all group-hover:shadow-md dark:bg-zinc-800",children:(0,o.jsx)(y0,{size:20})}),(0,o.jsx)("span",{className:"text-[10px] font-bold uppercase tracking-wider",children:"Crop / Edit"})]}),(0,o.jsxs)("button",{className:"flex cursor-not-allowed flex-col items-center gap-1.5 rounded-xl p-3 opacity-40 text-zinc-600 dark:text-zinc-400",children:[(0,o.jsx)("div",{className:"rounded-lg bg-white p-2 shadow-sm dark:bg-zinc-800",children:(0,o.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"h-5 w-5",children:(0,o.jsx)("path",{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 21 3 22l1-4.5L17 3z"})})}),(0,o.jsx)("span",{className:"text-[10px] font-bold uppercase tracking-wider",children:"Text"})]}),(0,o.jsxs)("button",{className:"flex cursor-not-allowed flex-col items-center gap-1.5 rounded-xl p-3 opacity-40 text-zinc-600 dark:text-zinc-400",children:[(0,o.jsx)("div",{className:"rounded-lg bg-white p-2 shadow-sm dark:bg-zinc-800",children:(0,o.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"h-5 w-5",children:[(0,o.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,o.jsx)("path",{d:"M8 14s1.5 2 4 2 4-2 4-2"}),(0,o.jsx)("line",{x1:"9",y1:"9",x2:"9.01",y2:"9"}),(0,o.jsx)("line",{x1:"15",y1:"9",x2:"15.01",y2:"9"})]})}),(0,o.jsx)("span",{className:"text-[10px] font-bold uppercase tracking-wider",children:"Stickers"})]})]})]}):(0,o.jsxs)("div",{className:"py-10",children:[(0,o.jsxs)("div",{className:"group relative w-full",onClick:()=>c.current?.click(),children:[(0,o.jsx)("div",{className:"relative z-40 mx-auto flex h-32 w-32 cursor-pointer items-center justify-center rounded-xl border-4 border-white bg-zinc-900 transition-all duration-500 group-hover:-translate-y-8 group-hover:translate-x-8 group-hover:shadow-2xl dark:border-zinc-900 dark:bg-white",children:(0,o.jsxs)("svg",{className:"h-8 w-8 text-white/60 dark:text-zinc-950/60",strokeLinejoin:"round",strokeLinecap:"round",strokeWidth:"2",stroke:"currentColor",fill:"none",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[(0,o.jsx)("path",{d:"M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2"}),(0,o.jsx)("path",{d:"M7 9l5 -5l5 5"}),(0,o.jsx)("path",{d:"M12 4l0 12"})]})}),(0,o.jsx)("div",{className:"absolute inset-0 z-30 mx-auto flex h-32 w-32 items-center justify-center rounded-xl border-2 border-dashed border-violet-500 bg-transparent opacity-0 transition-all duration-300 group-hover:opacity-80"})]}),(0,o.jsxs)("div",{className:"mt-8 text-center",children:[(0,o.jsx)("p",{className:"font-bold dark:text-white",children:"Choose a photo"}),(0,o.jsx)("p",{className:"text-sm text-zinc-500",children:"Stories last for 24 hours"})]})]}),(0,o.jsx)("input",{type:"file",ref:c,onChange:f,className:"hidden",accept:"image/*"}),(0,o.jsx)(Ie,{className:"w-full py-3 text-lg",disabled:!a||l,onClick:x,children:l?(0,o.jsx)(Rt,{size:24,className:"mx-auto animate-spin"}):"Share story"})]}),m&&(0,o.jsx)(Pu,{src:m,isOpen:!!m,onClose:()=>u(null),onCropComplete:p,aspect:9/16})]})},Y0=K0,X0=({isOpen:r,onClose:e,onCreated:t})=>{const{currentUser:n}=Xe(),{addToast:s}=ut(),a=jt(),[i,l]=(0,g.useState)(""),[d,m]=(0,g.useState)(null),[u,c]=(0,g.useState)(""),[f,h]=(0,g.useState)([]),[p,x]=(0,g.useState)([]),[j,b]=(0,g.useState)(!1),[C,E]=(0,g.useState)(!1),A=(0,g.useRef)(null),D=async v=>{if(c(v),v.length<2){h([]);return}E(!0);try{h((await wa(v)).filter(y=>y.id!==n?.id))}catch(y){console.error("Search failed:",y)}finally{E(!1)}},w=v=>{p.find(y=>y.id===v.id)?x(y=>y.filter(z=>z.id!==v.id)):x(y=>[...y,v])},M=async()=>{if(!(!n||!i.trim()||p.length===0)){b(!0);try{let v=null;d&&(v=(await wt(d)).url);const y=p.map(T=>T.id),z=await Al(n.id,i,y,v);a.invalidateQueries({queryKey:["conversations",n.id]}),s("Group created successfully!"),t(z),e(),l(""),x([]),m(null),c("")}catch(v){console.error("Failed to create group:",v),s("Failed to create group","error")}finally{b(!1)}}};return(0,o.jsx)(zt,{isOpen:r,onClose:e,title:"Create New Group",className:"sm:max-w-md",children:(0,o.jsxs)("div",{className:"px-6 pb-6 pt-8 space-y-8",children:[(0,o.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,o.jsxs)("div",{className:"group relative cursor-pointer",onClick:()=>A.current?.click(),children:[(0,o.jsx)(Ve,{className:"size-20 border-2 border-zinc-100 dark:border-zinc-800 shadow-md",children:d?(0,o.jsx)(Qe,{src:URL.createObjectURL(d),className:"object-cover"}):(0,o.jsx)("div",{className:"flex size-full items-center justify-center bg-zinc-50 dark:bg-zinc-900",children:(0,o.jsx)(Or,{size:32,className:"text-zinc-300"})})}),(0,o.jsx)("div",{className:"absolute inset-0 flex items-center justify-center rounded-full bg-black/40 opacity-0 transition-opacity group-hover:opacity-100",children:(0,o.jsx)(ur,{size:20,className:"text-white"})}),(0,o.jsx)("input",{type:"file",ref:A,className:"hidden",accept:"image/*",onChange:v=>m(v.target.files?.[0]||null)})]}),(0,o.jsx)("span",{className:"text-xs font-bold text-zinc-400 uppercase tracking-widest",children:"Group Avatar"})]}),(0,o.jsxs)("div",{className:"space-y-6",children:[(0,o.jsx)(gt,{label:"Group Name",placeholder:"Team Discussion, Weekend Plans...",value:i,onChange:v=>l(v.target.value)}),(0,o.jsxs)("div",{className:"space-y-2",children:[(0,o.jsx)("label",{className:"text-sm font-bold text-zinc-500 ml-1",children:"Add Members"}),(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsx)(Nr,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-zinc-400",size:16}),(0,o.jsx)("input",{type:"text",value:u,onChange:v=>D(v.target.value),placeholder:"Search people...",className:"w-full rounded-xl border border-zinc-200 bg-white py-2 pl-10 pr-4 text-sm outline-none focus:ring-2 focus:ring-violet-500/20 dark:border-zinc-800 dark:bg-zinc-950"})]})]}),p.length>0&&(0,o.jsx)("div",{className:"flex flex-wrap gap-2 py-1",children:p.map(v=>(0,o.jsxs)("div",{className:"flex items-center gap-1.5 rounded-full bg-violet-500/10 px-2.5 py-1 text-xs font-bold text-violet-600 dark:bg-violet-500/20",children:[(0,o.jsxs)(Ve,{className:"size-4",children:[(0,o.jsx)(Qe,{src:v.avatar}),(0,o.jsx)(Ye,{children:v.name[0]})]}),(0,o.jsx)("span",{children:v.name}),(0,o.jsx)("button",{onClick:()=>w(v),className:"hover:text-violet-800",children:(0,o.jsx)(kt,{size:12})})]},v.id))}),(0,o.jsx)("div",{className:"max-h-[240px] space-y-1 overflow-y-auto pr-1",children:C?(0,o.jsx)("div",{className:"py-4 text-center text-xs text-zinc-500",children:"Searching..."}):u.length>=2&&f.length===0?(0,o.jsx)("div",{className:"py-4 text-center text-xs text-zinc-500",children:"No users found"}):f.map(v=>{const y=p.find(z=>z.id===v.id);return(0,o.jsxs)("div",{onClick:()=>w(v),className:X("flex cursor-pointer items-center gap-3 rounded-xl p-2 transition-colors",y?"bg-violet-50 dark:bg-violet-900/20":"hover:bg-zinc-50 dark:hover:bg-zinc-900"),children:[(0,o.jsxs)(Ve,{className:"size-9",children:[(0,o.jsx)(Qe,{src:v.avatar}),(0,o.jsx)(Ye,{children:v.name[0]})]}),(0,o.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,o.jsx)("div",{className:"truncate text-sm font-bold",children:v.name}),(0,o.jsxs)("div",{className:"truncate text-xs text-zinc-500",children:["@",v.handle]})]}),(0,o.jsx)("div",{className:X("flex size-5 items-center justify-center rounded-full border-2 transition-all",y?"border-violet-500 bg-violet-500 text-white":"border-zinc-200 dark:border-zinc-700"),children:y&&(0,o.jsx)(kr,{size:12,strokeWidth:3})})]},v.id)})})]}),(0,o.jsxs)(Ie,{className:"w-full py-3",onClick:M,loading:j,disabled:!i.trim()||p.length===0,children:[(0,o.jsx)(Or,{className:"mr-2",size:18}),"Create Group"]})]})})},Sp=X0,G0=({isOpen:r,onClose:e,conversation:t,onUpdate:n})=>{const{currentUser:s}=Xe(),{addToast:a}=ut(),i=jt(),l=Ot(),[d,m]=(0,g.useState)(t.name||""),[u,c]=(0,g.useState)(!1),[f,h]=(0,g.useState)(""),[p,x]=(0,g.useState)([]),[j,b]=(0,g.useState)(!1),C=(0,g.useRef)(null),E=s?.id===t.creatorId,{data:A=[],isLoading:D}=yt({queryKey:["conversation-participants",t.id],queryFn:()=>Ul(t.id),enabled:r&&!!t.id,staleTime:1e3*60}),w=ht({mutationFn:I=>ql(t.id,I),onSuccess:I=>{n(I),i.invalidateQueries({queryKey:["conversations",s?.id]}),a("Group updated!")},onError:I=>{a(I.message||"Update failed","error")}}),M=ht({mutationFn:I=>El(t.id,[I]),onSuccess:()=>{i.invalidateQueries({queryKey:["conversation-participants",t.id]}),a("Member added!"),h(""),x([])},onError:()=>a("Failed to add member","error")}),v=ht({mutationFn:()=>Fl(t.id,s.id),onSuccess:()=>{i.invalidateQueries({queryKey:["conversations",s?.id]}),e(),a("You left the group."),l("/messages")},onError:()=>a("Failed to leave group","error")}),y=ht({mutationFn:()=>ka(t.id),onSuccess:()=>{i.invalidateQueries({queryKey:["conversations",s?.id]}),e(),a("Group deleted."),l("/messages")},onError:()=>a("Failed to delete group","error")});g.useEffect(()=>{r&&(m(t.name||""),c(!1),h(""),x([]))},[r,t.id,t.name]);const z=async I=>{if(h(I),I.length<2){x([]);return}b(!0);try{const k=await wa(I),N=A.map(F=>F.id);x(k.filter(F=>!N.includes(F.id)))}catch(k){console.error("Search failed:",k)}finally{b(!1)}},T=async I=>{const k=I.target.files?.[0];if(!(!k||!E))try{const N=await wt(k);w.mutate({avatar_url:N.url})}catch(N){console.error("Upload failed:",N),a("Failed to update avatar","error")}},_=()=>{!d.trim()||d===t.name||!E||w.mutate({name:d.trim()})},R=()=>{!window.confirm("Are you sure you want to leave this group?")||!s||v.mutate()},S=()=>{E&&window.confirm("Are you sure you want to delete this group? All messages and media will be removed forever.")&&y.mutate()};return(0,o.jsx)(zt,{isOpen:r,onClose:e,title:"Group Info",className:"sm:max-w-md",children:(0,o.jsx)("div",{className:"flex-1 overflow-y-auto p-6 scrollbar-none",children:(0,o.jsxs)("div",{className:"space-y-6",children:[(0,o.jsxs)("div",{className:"flex flex-col items-center gap-4 border-b border-zinc-100 pb-6 dark:border-zinc-800",children:[(0,o.jsxs)("div",{className:"group relative",children:[(0,o.jsxs)(Ve,{className:"size-24 border-4 border-white shadow-xl dark:border-zinc-900",children:[(0,o.jsx)(Qe,{src:t.avatar,className:"object-cover"}),(0,o.jsx)(Ye,{className:"text-2xl font-black bg-zinc-100 text-zinc-400 dark:bg-zinc-800",children:t.name?.[0]?.toUpperCase()||"?"})]}),E&&(0,o.jsx)("button",{onClick:()=>C.current?.click(),className:"absolute bottom-0 right-0 rounded-full bg-violet-600 p-2 text-white shadow-lg transition-transform hover:scale-110 active:scale-95",children:(0,o.jsx)(ur,{size:16})}),(0,o.jsx)("input",{type:"file",ref:C,className:"hidden",accept:"image/*",onChange:T})]}),(0,o.jsx)("div",{className:"w-full space-y-3 text-center",children:E?(0,o.jsxs)("div",{className:"flex gap-2",children:[(0,o.jsx)(gt,{value:d,onChange:I=>m(I.target.value),placeholder:"Group name",className:"h-10"}),(0,o.jsx)(Ie,{size:"sm",onClick:_,loading:w.isPending,disabled:d===t.name,children:"Save"})]}):(0,o.jsx)("h3",{className:"text-xl font-black dark:text-white",children:t.name})})]}),(0,o.jsxs)("div",{className:"space-y-4",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between px-1",children:[(0,o.jsxs)("h4",{className:"text-sm font-bold uppercase tracking-wider text-zinc-500",children:["Members  ",A.length]}),E&&(0,o.jsx)("button",{onClick:()=>c(!u),className:X("flex items-center gap-1.5 text-xs font-bold transition-colors",u?"text-rose-500":"text-violet-600 hover:text-violet-700"),children:u?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(kt,{size:14}),"Cancel"]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(wo,{size:14}),"Add Member"]})})]}),u&&E&&(0,o.jsxs)("div",{className:"space-y-3 animate-in slide-in-from-top-2 duration-200",children:[(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsx)(Nr,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-zinc-400",size:16}),(0,o.jsx)("input",{type:"text",value:f,onChange:I=>z(I.target.value),placeholder:"Search people to add...",className:"w-full rounded-xl border border-zinc-200 bg-white py-2 pl-10 pr-4 text-sm outline-none focus:ring-2 focus:ring-violet-500/20 dark:border-zinc-800 dark:bg-zinc-950"})]}),p.length>0&&(0,o.jsx)("div",{className:"max-h-[200px] overflow-y-auto rounded-xl border border-zinc-100 bg-zinc-50/50 p-1 dark:border-zinc-800 dark:bg-zinc-900/50",children:p.map(I=>(0,o.jsxs)("div",{className:"flex items-center justify-between p-2 rounded-lg hover:bg-white dark:hover:bg-zinc-800 transition-colors",children:[(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[(0,o.jsxs)(Ve,{className:"size-8",children:[(0,o.jsx)(Qe,{src:I.avatar}),(0,o.jsx)(Ye,{children:I.name[0]})]}),(0,o.jsxs)("div",{className:"min-w-0",children:[(0,o.jsx)("div",{className:"truncate text-xs font-bold",children:I.name}),(0,o.jsxs)("div",{className:"truncate text-[10px] text-zinc-500",children:["@",I.handle]})]})]}),(0,o.jsx)("button",{disabled:M.isPending,onClick:()=>M.mutate(I.id),className:"rounded-full bg-violet-600 px-3 py-1 text-[10px] font-bold text-white transition-all hover:bg-violet-700 active:scale-95 disabled:opacity-50",children:M.isPending?"Adding...":"Add"})]},I.id))}),j&&(0,o.jsx)("div",{className:"py-2 text-center text-xs text-zinc-400",children:"Searching..."})]}),(0,o.jsx)("div",{className:"space-y-1",children:D?(0,o.jsx)("div",{className:"py-8 text-center text-zinc-400",children:"Loading members..."}):A.map(I=>(0,o.jsxs)("div",{className:"flex items-center gap-3 rounded-xl p-2 transition-colors hover:bg-zinc-50 dark:hover:bg-zinc-900",children:[(0,o.jsxs)(Ve,{className:"size-10",children:[(0,o.jsx)(Qe,{src:I.avatar_url,className:"object-cover"}),(0,o.jsx)(Ye,{children:I.display_name?.[0]})]}),(0,o.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,o.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,o.jsx)("span",{className:"truncate text-sm font-bold",children:I.display_name}),I.id===t.creatorId&&(0,o.jsx)(js,{size:12,className:"text-violet-500"})]}),(0,o.jsxs)("div",{className:"truncate text-xs text-zinc-500",children:["@",I.username]})]}),I.id===s?.id&&(0,o.jsx)("span",{className:"rounded-full bg-zinc-100 px-2 py-0.5 text-[10px] font-bold text-zinc-500 dark:bg-zinc-800",children:"You"})]},I.id))})]}),(0,o.jsxs)("div",{className:"flex flex-col gap-2 pt-2 pb-2",children:[(0,o.jsxs)(Ie,{variant:"outline",className:"w-full justify-start text-zinc-600 dark:text-zinc-400",onClick:R,loading:v.isPending,children:[(0,o.jsx)(zo,{size:18,className:"mr-2"}),"Leave Group"]}),E&&(0,o.jsxs)(Ie,{variant:"ghost",className:"w-full justify-start text-rose-500 hover:bg-rose-50 hover:text-rose-600 dark:hover:bg-rose-900/20",onClick:S,loading:y.isPending,children:[(0,o.jsx)(Gr,{size:18,className:"mr-2"}),"Delete Group"]}),"                    "]})]})})})},Ap=G0,Z0=({isOpen:r,onClose:e,user:t,conversationId:n})=>{const s=Ot(),{addToast:a}=ut(),i=jt(),[l,d]=g.useState(!1);if(!t)return null;const m=()=>{e(),s(`/u/${t.handle}`)},u=async()=>{if(window.confirm("Are you sure you want to delete this entire conversation? This cannot be undone.")){d(!0);try{await ka(n),i.invalidateQueries({queryKey:["conversations"]}),a("Conversation deleted."),e(),s("/messages")}catch(c){console.error("Delete failed:",c),a("Failed to delete conversation","error")}finally{d(!1)}}};return(0,o.jsx)(zt,{isOpen:r,onClose:e,title:"Chat Details",className:"sm:max-w-md",children:(0,o.jsx)("div",{className:"flex-1 overflow-y-auto p-6 scrollbar-none",children:(0,o.jsxs)("div",{className:"space-y-6",children:[(0,o.jsxs)("div",{className:"flex flex-col items-center gap-4 border-b border-zinc-100 pb-6 dark:border-zinc-800",children:[(0,o.jsxs)(Ve,{className:"size-24 border-4 border-white shadow-xl dark:border-zinc-900",children:[(0,o.jsx)(Qe,{src:t.avatar,className:"object-cover"}),(0,o.jsx)(Ye,{className:"text-2xl font-black bg-zinc-100 text-zinc-400 dark:bg-zinc-800",children:t.name?.[0]?.toUpperCase()})]}),(0,o.jsxs)("div",{className:"text-center space-y-1",children:[(0,o.jsx)("h3",{className:"text-xl font-black dark:text-white",children:t.name}),(0,o.jsxs)("p",{className:"text-sm font-medium text-zinc-500",children:["@",t.handle]})]}),(0,o.jsxs)(Ie,{variant:"secondary",size:"sm",className:"rounded-full",onClick:m,children:[(0,o.jsx)(fr,{size:16,className:"mr-2"}),"View Profile"]})]}),(t.bio||t.location||t.website)&&(0,o.jsxs)("div",{className:"space-y-3 px-1",children:[(0,o.jsx)("h4",{className:"text-xs font-bold uppercase tracking-wider text-zinc-400",children:"About"}),(0,o.jsxs)("div",{className:"space-y-2",children:[t.bio&&(0,o.jsx)("p",{className:"text-sm text-zinc-600 dark:text-zinc-300",children:t.bio}),(0,o.jsxs)("div",{className:"flex flex-wrap gap-x-4 gap-y-2",children:[t.location&&(0,o.jsxs)("div",{className:"flex items-center gap-1 text-xs text-zinc-500",children:[(0,o.jsx)(Yo,{size:14}),t.location]}),t.website&&(0,o.jsxs)("a",{href:t.website.startsWith("http")?t.website:`https://${t.website}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-xs text-violet-600 hover:underline",children:[(0,o.jsx)(Go,{size:14}),t.website.replace(/^https?:\/\//,"")]})]})]})]}),(0,o.jsxs)("div",{className:"space-y-2 pt-2",children:[(0,o.jsx)("h4",{className:"text-xs font-bold uppercase tracking-wider text-zinc-400 px-1 mb-2",children:"Privacy & Support"}),(0,o.jsxs)("button",{className:"flex w-full items-center justify-between rounded-xl p-3 text-sm font-bold text-zinc-700 transition-colors hover:bg-zinc-50 dark:text-zinc-200 dark:hover:bg-zinc-900",children:[(0,o.jsxs)("div",{className:"flex items-center gap-3",children:[(0,o.jsx)("div",{className:"rounded-full bg-zinc-100 p-2 dark:bg-zinc-800 text-zinc-500",children:(0,o.jsx)(to,{size:18})}),(0,o.jsxs)("span",{children:["Block @",t.handle]})]}),(0,o.jsx)(wn,{size:14,className:"text-zinc-400"})]}),(0,o.jsxs)("button",{className:"flex w-full items-center justify-between rounded-xl p-3 text-sm font-bold text-zinc-700 transition-colors hover:bg-zinc-50 dark:text-zinc-200 dark:hover:bg-zinc-900",children:[(0,o.jsxs)("div",{className:"flex items-center gap-3",children:[(0,o.jsx)("div",{className:"rounded-full bg-zinc-100 p-2 dark:bg-zinc-800 text-zinc-500",children:(0,o.jsx)(ro,{size:18})}),(0,o.jsx)("span",{children:"Report User"})]}),(0,o.jsx)(wn,{size:14,className:"text-zinc-400"})]}),(0,o.jsx)("div",{className:"pt-4 border-t border-zinc-100 dark:border-zinc-800 mt-2 pb-2",children:(0,o.jsxs)(Ie,{variant:"ghost",className:"w-full justify-start text-rose-500 hover:bg-rose-50 hover:text-rose-600 dark:hover:bg-rose-900/20",onClick:u,loading:l,children:[(0,o.jsx)(Gr,{size:18,className:"mr-2"}),"Delete Chat"]})})]})]})})})},Ep=Z0;function J0(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];return(0,g.useMemo)(()=>n=>{e.forEach(s=>s(n))},e)}var Cr=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function qt(r){const e=Object.prototype.toString.call(r);return e==="[object Window]"||e==="[object global]"}function dn(r){return"nodeType"in r}function et(r){var e,t;return r?qt(r)?r:dn(r)&&(e=(t=r.ownerDocument)==null?void 0:t.defaultView)!=null?e:window:window}function un(r){const{Document:e}=et(r);return r instanceof e}function nr(r){return qt(r)?!1:r instanceof et(r).HTMLElement}function bi(r){return r instanceof et(r).SVGElement}function Bt(r){return r?qt(r)?r.document:dn(r)?un(r)?r:nr(r)||bi(r)?r.ownerDocument:document:document:document}var vt=Cr?g.useLayoutEffect:g.useEffect;function fn(r){const e=(0,g.useRef)(r);return vt(()=>{e.current=r}),(0,g.useCallback)(function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return e.current==null?void 0:e.current(...n)},[])}function $0(){const r=(0,g.useRef)(null);return[(0,g.useCallback)((e,t)=>{r.current=setInterval(e,t)},[]),(0,g.useCallback)(()=>{r.current!==null&&(clearInterval(r.current),r.current=null)},[])]}function Jt(r,e){e===void 0&&(e=[r]);const t=(0,g.useRef)(r);return vt(()=>{t.current!==r&&(t.current=r)},e),t}function sr(r,e){const t=(0,g.useRef)();return(0,g.useMemo)(()=>{const n=r(t.current);return t.current=n,n},[...e])}function vr(r){const e=fn(r),t=(0,g.useRef)(null);return[t,(0,g.useCallback)(n=>{n!==t.current&&e?.(n,t.current),t.current=n},[])]}function Wr(r){const e=(0,g.useRef)();return(0,g.useEffect)(()=>{e.current=r},[r]),e.current}var Ir={};function ar(r,e){return(0,g.useMemo)(()=>{if(e)return e;const t=Ir[r]==null?0:Ir[r]+1;return Ir[r]=t,r+"-"+t},[r,e])}function yi(r){return function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];return n.reduce((a,i)=>{const l=Object.entries(i);for(const[d,m]of l){const u=a[d];u!=null&&(a[d]=u+r*m)}return a},{...e})}}var Ft=yi(1),$t=yi(-1);function ef(r){return"clientX"in r&&"clientY"in r}function mn(r){if(!r)return!1;const{KeyboardEvent:e}=et(r.target);return e&&r instanceof e}function tf(r){if(!r)return!1;const{TouchEvent:e}=et(r.target);return e&&r instanceof e}function Vr(r){if(tf(r)){if(r.touches&&r.touches.length){const{clientX:e,clientY:t}=r.touches[0];return{x:e,y:t}}else if(r.changedTouches&&r.changedTouches.length){const{clientX:e,clientY:t}=r.changedTouches[0];return{x:e,y:t}}}return ef(r)?{x:r.clientX,y:r.clientY}:null}var er=Object.freeze({Translate:{toString(r){if(!r)return;const{x:e,y:t}=r;return"translate3d("+(e?Math.round(e):0)+"px, "+(t?Math.round(t):0)+"px, 0)"}},Scale:{toString(r){if(!r)return;const{scaleX:e,scaleY:t}=r;return"scaleX("+e+") scaleY("+t+")"}},Transform:{toString(r){if(r)return[er.Translate.toString(r),er.Scale.toString(r)].join(" ")}},Transition:{toString(r){let{property:e,duration:t,easing:n}=r;return e+" "+t+"ms "+n}}}),Wn="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function rf(r){return r.matches(Wn)?r:r.querySelector(Wn)}var nf={display:"none"};function sf(r){let{id:e,value:t}=r;return g.createElement("div",{id:e,style:nf},t)}function af(r){let{id:e,announcement:t,ariaLiveType:n="assertive"}=r;return g.createElement("div",{id:e,style:{position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"},role:"status","aria-live":n,"aria-atomic":!0},t)}function of(){const[r,e]=(0,g.useState)("");return{announce:(0,g.useCallback)(t=>{t!=null&&e(t)},[]),announcement:r}}var Vt=os(),wi=(0,g.createContext)(null);function lf(r){const e=(0,g.useContext)(wi);(0,g.useEffect)(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(r)},[r,e])}function cf(){const[r]=(0,g.useState)(()=>new Set),e=(0,g.useCallback)(t=>(r.add(t),()=>r.delete(t)),[r]);return[(0,g.useCallback)(t=>{let{type:n,event:s}=t;r.forEach(a=>{var i;return(i=a[n])==null?void 0:i.call(a,s)})},[r]),e]}var df={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},uf={onDragStart(r){let{active:e}=r;return"Picked up draggable item "+e.id+"."},onDragOver(r){let{active:e,over:t}=r;return t?"Draggable item "+e.id+" was moved over droppable area "+t.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(r){let{active:e,over:t}=r;return t?"Draggable item "+e.id+" was dropped over droppable area "+t.id:"Draggable item "+e.id+" was dropped."},onDragCancel(r){let{active:e}=r;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function ff(r){let{announcements:e=uf,container:t,hiddenTextDescribedById:n,screenReaderInstructions:s=df}=r;const{announce:a,announcement:i}=of(),l=ar("DndLiveRegion"),[d,m]=(0,g.useState)(!1);if((0,g.useEffect)(()=>{m(!0)},[]),lf((0,g.useMemo)(()=>({onDragStart(c){let{active:f}=c;a(e.onDragStart({active:f}))},onDragMove(c){let{active:f,over:h}=c;e.onDragMove&&a(e.onDragMove({active:f,over:h}))},onDragOver(c){let{active:f,over:h}=c;a(e.onDragOver({active:f,over:h}))},onDragEnd(c){let{active:f,over:h}=c;a(e.onDragEnd({active:f,over:h}))},onDragCancel(c){let{active:f,over:h}=c;a(e.onDragCancel({active:f,over:h}))}}),[a,e])),!d)return null;const u=g.createElement(g.Fragment,null,g.createElement(sf,{id:n,value:s.draggable}),g.createElement(af,{id:l,announcement:i}));return t?(0,Vt.createPortal)(u,t):u}var Le;(function(r){r.DragStart="dragStart",r.DragMove="dragMove",r.DragEnd="dragEnd",r.DragCancel="dragCancel",r.DragOver="dragOver",r.RegisterDroppable="registerDroppable",r.SetDroppableDisabled="setDroppableDisabled",r.UnregisterDroppable="unregisterDroppable"})(Le||(Le={}));function xr(){}function Vn(r,e){return(0,g.useMemo)(()=>({sensor:r,options:e??{}}),[r,e])}function mf(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];return(0,g.useMemo)(()=>[...e].filter(n=>n!=null),[...e])}var dt=Object.freeze({x:0,y:0});function ji(r,e){return Math.sqrt(Math.pow(r.x-e.x,2)+Math.pow(r.y-e.y,2))}function ki(r,e){let{data:{value:t}}=r,{data:{value:n}}=e;return t-n}function hf(r,e){let{data:{value:t}}=r,{data:{value:n}}=e;return n-t}function Qn(r){let{left:e,top:t,height:n,width:s}=r;return[{x:e,y:t},{x:e+s,y:t},{x:e,y:t+n},{x:e+s,y:t+n}]}function Ni(r,e){if(!r||r.length===0)return null;const[t]=r;return e?t[e]:t}function Kn(r,e,t){return e===void 0&&(e=r.left),t===void 0&&(t=r.top),{x:e+r.width*.5,y:t+r.height*.5}}var pf=r=>{let{collisionRect:e,droppableRects:t,droppableContainers:n}=r;const s=Kn(e,e.left,e.top),a=[];for(const i of n){const{id:l}=i,d=t.get(l);if(d){const m=ji(Kn(d),s);a.push({id:l,data:{droppableContainer:i,value:m}})}}return a.sort(ki)},gf=r=>{let{collisionRect:e,droppableRects:t,droppableContainers:n}=r;const s=Qn(e),a=[];for(const i of n){const{id:l}=i,d=t.get(l);if(d){const m=Qn(d),u=s.reduce((f,h,p)=>f+ji(m[p],h),0),c=Number((u/4).toFixed(4));a.push({id:l,data:{droppableContainer:i,value:c}})}}return a.sort(ki)};function vf(r,e){const t=Math.max(e.top,r.top),n=Math.max(e.left,r.left),s=Math.min(e.left+e.width,r.left+r.width),a=Math.min(e.top+e.height,r.top+r.height),i=s-n,l=a-t;if(n<s&&t<a){const d=e.width*e.height,m=r.width*r.height,u=i*l,c=u/(d+m-u);return Number(c.toFixed(4))}return 0}var xf=r=>{let{collisionRect:e,droppableRects:t,droppableContainers:n}=r;const s=[];for(const a of n){const{id:i}=a,l=t.get(i);if(l){const d=vf(l,e);d>0&&s.push({id:i,data:{droppableContainer:a,value:d}})}}return s.sort(hf)};function bf(r,e,t){return{...r,scaleX:e&&t?e.width/t.width:1,scaleY:e&&t?e.height/t.height:1}}function _i(r,e){return r&&e?{x:r.left-e.left,y:r.top-e.top}:dt}function yf(r){return function(t){for(var n=arguments.length,s=new Array(n>1?n-1:0),a=1;a<n;a++)s[a-1]=arguments[a];return s.reduce((i,l)=>({...i,top:i.top+r*l.y,bottom:i.bottom+r*l.y,left:i.left+r*l.x,right:i.right+r*l.x}),{...t})}}var wf=yf(1);function jf(r){if(r.startsWith("matrix3d(")){const e=r.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(r.startsWith("matrix(")){const e=r.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function kf(r,e,t){const n=jf(e);if(!n)return r;const{scaleX:s,scaleY:a,x:i,y:l}=n,d=r.left-i-(1-s)*parseFloat(t),m=r.top-l-(1-a)*parseFloat(t.slice(t.indexOf(" ")+1)),u=s?r.width/s:r.width,c=a?r.height/a:r.height;return{width:u,height:c,top:m,right:d+u,bottom:m+c,left:d}}var Nf={ignoreTransform:!1};function Ht(r,e){e===void 0&&(e=Nf);let t=r.getBoundingClientRect();if(e.ignoreTransform){const{transform:m,transformOrigin:u}=et(r).getComputedStyle(r);m&&(t=kf(t,m,u))}const{top:n,left:s,width:a,height:i,bottom:l,right:d}=t;return{top:n,left:s,width:a,height:i,bottom:l,right:d}}function Yn(r){return Ht(r,{ignoreTransform:!0})}function _f(r){const e=r.innerWidth,t=r.innerHeight;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}function Cf(r,e){return e===void 0&&(e=et(r).getComputedStyle(r)),e.position==="fixed"}function zf(r,e){e===void 0&&(e=et(r).getComputedStyle(r));const t=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(n=>{const s=e[n];return typeof s=="string"?t.test(s):!1})}function zr(r,e){const t=[];function n(s){if(e!=null&&t.length>=e||!s)return t;if(un(s)&&s.scrollingElement!=null&&!t.includes(s.scrollingElement))return t.push(s.scrollingElement),t;if(!nr(s)||bi(s)||t.includes(s))return t;const a=et(r).getComputedStyle(s);return s!==r&&zf(s,a)&&t.push(s),Cf(s,a)?t:n(s.parentNode)}return r?n(r):t}function Ci(r){const[e]=zr(r,1);return e??null}function Pr(r){return!Cr||!r?null:qt(r)?r:dn(r)?un(r)||r===Bt(r).scrollingElement?window:nr(r)?r:null:null}function zi(r){return qt(r)?r.scrollX:r.scrollLeft}function Si(r){return qt(r)?r.scrollY:r.scrollTop}function Qr(r){return{x:zi(r),y:Si(r)}}var Fe;(function(r){r[r.Forward=1]="Forward",r[r.Backward=-1]="Backward"})(Fe||(Fe={}));function Ai(r){return!Cr||!r?!1:r===document.scrollingElement}function Ei(r){const e={x:0,y:0},t=Ai(r)?{height:window.innerHeight,width:window.innerWidth}:{height:r.clientHeight,width:r.clientWidth},n={x:r.scrollWidth-t.width,y:r.scrollHeight-t.height};return{isTop:r.scrollTop<=e.y,isLeft:r.scrollLeft<=e.x,isBottom:r.scrollTop>=n.y,isRight:r.scrollLeft>=n.x,maxScroll:n,minScroll:e}}var Sf={x:.2,y:.2};function Af(r,e,t,n,s){let{top:a,left:i,right:l,bottom:d}=t;n===void 0&&(n=10),s===void 0&&(s=Sf);const{isTop:m,isBottom:u,isLeft:c,isRight:f}=Ei(r),h={x:0,y:0},p={x:0,y:0},x={height:e.height*s.y,width:e.width*s.x};return!m&&a<=e.top+x.height?(h.y=Fe.Backward,p.y=n*Math.abs((e.top+x.height-a)/x.height)):!u&&d>=e.bottom-x.height&&(h.y=Fe.Forward,p.y=n*Math.abs((e.bottom-x.height-d)/x.height)),!f&&l>=e.right-x.width?(h.x=Fe.Forward,p.x=n*Math.abs((e.right-x.width-l)/x.width)):!c&&i<=e.left+x.width&&(h.x=Fe.Backward,p.x=n*Math.abs((e.left+x.width-i)/x.width)),{direction:h,speed:p}}function Ef(r){if(r===document.scrollingElement){const{innerWidth:a,innerHeight:i}=window;return{top:0,left:0,right:a,bottom:i,width:a,height:i}}const{top:e,left:t,right:n,bottom:s}=r.getBoundingClientRect();return{top:e,left:t,right:n,bottom:s,width:r.clientWidth,height:r.clientHeight}}function Ri(r){return r.reduce((e,t)=>Ft(e,Qr(t)),dt)}function Rf(r){return r.reduce((e,t)=>e+zi(t),0)}function Mf(r){return r.reduce((e,t)=>e+Si(t),0)}function Df(r,e){if(e===void 0&&(e=Ht),!r)return;const{top:t,left:n,bottom:s,right:a}=e(r);Ci(r)&&(s<=0||a<=0||t>=window.innerHeight||n>=window.innerWidth)&&r.scrollIntoView({block:"center",inline:"center"})}var Tf=[["x",["left","right"],Rf],["y",["top","bottom"],Mf]],hn=class{constructor(r,e){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const t=zr(e),n=Ri(t);this.rect={...r},this.width=r.width,this.height=r.height;for(const[s,a,i]of Tf)for(const l of a)Object.defineProperty(this,l,{get:()=>{const d=i(t),m=n[s]-d;return this.rect[l]+m},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}},Qt=class{constructor(r){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(e=>{var t;return(t=this.target)==null?void 0:t.removeEventListener(...e)})},this.target=r}add(r,e,t){var n;(n=this.target)==null||n.addEventListener(r,e,t),this.listeners.push([r,e,t])}};function If(r){const{EventTarget:e}=et(r);return r instanceof e?r:Bt(r)}function Lr(r,e){const t=Math.abs(r.x),n=Math.abs(r.y);return typeof e=="number"?Math.sqrt(t**2+n**2)>e:"x"in e&&"y"in e?t>e.x&&n>e.y:"x"in e?t>e.x:"y"in e?n>e.y:!1}var at;(function(r){r.Click="click",r.DragStart="dragstart",r.Keydown="keydown",r.ContextMenu="contextmenu",r.Resize="resize",r.SelectionChange="selectionchange",r.VisibilityChange="visibilitychange"})(at||(at={}));function Xn(r){r.preventDefault()}function Pf(r){r.stopPropagation()}var pe;(function(r){r.Space="Space",r.Down="ArrowDown",r.Right="ArrowRight",r.Left="ArrowLeft",r.Up="ArrowUp",r.Esc="Escape",r.Enter="Enter",r.Tab="Tab"})(pe||(pe={}));var Mi={start:[pe.Space,pe.Enter],cancel:[pe.Esc],end:[pe.Space,pe.Enter,pe.Tab]},Lf=(r,e)=>{let{currentCoordinates:t}=e;switch(r.code){case pe.Right:return{...t,x:t.x+25};case pe.Left:return{...t,x:t.x-25};case pe.Down:return{...t,y:t.y+25};case pe.Up:return{...t,y:t.y-25}}},pn=class{constructor(r){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=r;const{event:{target:e}}=r;this.props=r,this.listeners=new Qt(Bt(e)),this.windowListeners=new Qt(et(e)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(at.Resize,this.handleCancel),this.windowListeners.add(at.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(at.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:r,onStart:e}=this.props,t=r.node.current;t&&Df(t),e(dt)}handleKeyDown(r){if(mn(r)){const{active:e,context:t,options:n}=this.props,{keyboardCodes:s=Mi,coordinateGetter:a=Lf,scrollBehavior:i="smooth"}=n,{code:l}=r;if(s.end.includes(l)){this.handleEnd(r);return}if(s.cancel.includes(l)){this.handleCancel(r);return}const{collisionRect:d}=t.current,m=d?{x:d.left,y:d.top}:dt;this.referenceCoordinates||(this.referenceCoordinates=m);const u=a(r,{active:e,context:t.current,currentCoordinates:m});if(u){const c=$t(u,m),f={x:0,y:0},{scrollableAncestors:h}=t.current;for(const p of h){const x=r.code,{isTop:j,isRight:b,isLeft:C,isBottom:E,maxScroll:A,minScroll:D}=Ei(p),w=Ef(p),M={x:Math.min(x===pe.Right?w.right-w.width/2:w.right,Math.max(x===pe.Right?w.left:w.left+w.width/2,u.x)),y:Math.min(x===pe.Down?w.bottom-w.height/2:w.bottom,Math.max(x===pe.Down?w.top:w.top+w.height/2,u.y))},v=x===pe.Right&&!b||x===pe.Left&&!C,y=x===pe.Down&&!E||x===pe.Up&&!j;if(v&&M.x!==u.x){const z=p.scrollLeft+c.x,T=x===pe.Right&&z<=A.x||x===pe.Left&&z>=D.x;if(T&&!c.y){p.scrollTo({left:z,behavior:i});return}T?f.x=p.scrollLeft-z:f.x=x===pe.Right?p.scrollLeft-A.x:p.scrollLeft-D.x,f.x&&p.scrollBy({left:-f.x,behavior:i});break}else if(y&&M.y!==u.y){const z=p.scrollTop+c.y,T=x===pe.Down&&z<=A.y||x===pe.Up&&z>=D.y;if(T&&!c.x){p.scrollTo({top:z,behavior:i});return}T?f.y=p.scrollTop-z:f.y=x===pe.Down?p.scrollTop-A.y:p.scrollTop-D.y,f.y&&p.scrollBy({top:-f.y,behavior:i});break}}this.handleMove(r,Ft($t(u,this.referenceCoordinates),f))}}}handleMove(r,e){const{onMove:t}=this.props;r.preventDefault(),t(e)}handleEnd(r){const{onEnd:e}=this.props;r.preventDefault(),this.detach(),e()}handleCancel(r){const{onCancel:e}=this.props;r.preventDefault(),this.detach(),e()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}};pn.activators=[{eventName:"onKeyDown",handler:(r,e,t)=>{let{keyboardCodes:n=Mi,onActivation:s}=e,{active:a}=t;const{code:i}=r.nativeEvent;if(n.start.includes(i)){const l=a.activatorNode.current;return l&&r.target!==l?!1:(r.preventDefault(),s?.({event:r.nativeEvent}),!0)}return!1}}];function Gn(r){return!!(r&&"distance"in r)}function Zn(r){return!!(r&&"delay"in r)}var gn=class{constructor(r,e,t){var n;t===void 0&&(t=If(r.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=r,this.events=e;const{event:s}=r,{target:a}=s;this.props=r,this.events=e,this.document=Bt(a),this.documentListeners=new Qt(this.document),this.listeners=new Qt(t),this.windowListeners=new Qt(et(a)),this.initialCoordinates=(n=Vr(s))!=null?n:dt,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:r,props:{options:{activationConstraint:e,bypassActivationConstraint:t}}}=this;if(this.listeners.add(r.move.name,this.handleMove,{passive:!1}),this.listeners.add(r.end.name,this.handleEnd),r.cancel&&this.listeners.add(r.cancel.name,this.handleCancel),this.windowListeners.add(at.Resize,this.handleCancel),this.windowListeners.add(at.DragStart,Xn),this.windowListeners.add(at.VisibilityChange,this.handleCancel),this.windowListeners.add(at.ContextMenu,Xn),this.documentListeners.add(at.Keydown,this.handleKeydown),e){if(t!=null&&t({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Zn(e)){this.timeoutId=setTimeout(this.handleStart,e.delay),this.handlePending(e);return}if(Gn(e)){this.handlePending(e);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(r,e){const{active:t,onPending:n}=this.props;n(t,r,this.initialCoordinates,e)}handleStart(){const{initialCoordinates:r}=this,{onStart:e}=this.props;r&&(this.activated=!0,this.documentListeners.add(at.Click,Pf,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(at.SelectionChange,this.removeTextSelection),e(r))}handleMove(r){var e;const{activated:t,initialCoordinates:n,props:s}=this,{onMove:a,options:{activationConstraint:i}}=s;if(!n)return;const l=(e=Vr(r))!=null?e:dt,d=$t(n,l);if(!t&&i){if(Gn(i)){if(i.tolerance!=null&&Lr(d,i.tolerance))return this.handleCancel();if(Lr(d,i.distance))return this.handleStart()}if(Zn(i)&&Lr(d,i.tolerance))return this.handleCancel();this.handlePending(i,d);return}r.cancelable&&r.preventDefault(),a(l)}handleEnd(){const{onAbort:r,onEnd:e}=this.props;this.detach(),this.activated||r(this.props.active),e()}handleCancel(){const{onAbort:r,onCancel:e}=this.props;this.detach(),this.activated||r(this.props.active),e()}handleKeydown(r){r.code===pe.Esc&&this.handleCancel()}removeTextSelection(){var r;(r=this.document.getSelection())==null||r.removeAllRanges()}},Ff={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}},vn=class extends gn{constructor(r){const{event:e}=r,t=Bt(e.target);super(r,Ff,t)}};vn.activators=[{eventName:"onPointerDown",handler:(r,e)=>{let{nativeEvent:t}=r,{onActivation:n}=e;return!t.isPrimary||t.button!==0?!1:(n?.({event:t}),!0)}}];var Of={move:{name:"mousemove"},end:{name:"mouseup"}},Kr;(function(r){r[r.RightClick=2]="RightClick"})(Kr||(Kr={}));var Uf=class extends gn{constructor(r){super(r,Of,Bt(r.event.target))}};Uf.activators=[{eventName:"onMouseDown",handler:(r,e)=>{let{nativeEvent:t}=r,{onActivation:n}=e;return t.button===Kr.RightClick?!1:(n?.({event:t}),!0)}}];var Fr={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}},qf=class extends gn{constructor(r){super(r,Fr)}static setup(){return window.addEventListener(Fr.move.name,r,{capture:!1,passive:!1}),function(){window.removeEventListener(Fr.move.name,r)};function r(){}}};qf.activators=[{eventName:"onTouchStart",handler:(r,e)=>{let{nativeEvent:t}=r,{onActivation:n}=e;const{touches:s}=t;return s.length>1?!1:(n?.({event:t}),!0)}}];var Kt;(function(r){r[r.Pointer=0]="Pointer",r[r.DraggableRect=1]="DraggableRect"})(Kt||(Kt={}));var br;(function(r){r[r.TreeOrder=0]="TreeOrder",r[r.ReversedTreeOrder=1]="ReversedTreeOrder"})(br||(br={}));function Bf(r){let{acceleration:e,activator:t=Kt.Pointer,canScroll:n,draggingRect:s,enabled:a,interval:i=5,order:l=br.TreeOrder,pointerCoordinates:d,scrollableAncestors:m,scrollableAncestorRects:u,delta:c,threshold:f}=r;const h=Wf({delta:c,disabled:!a}),[p,x]=$0(),j=(0,g.useRef)({x:0,y:0}),b=(0,g.useRef)({x:0,y:0}),C=(0,g.useMemo)(()=>{switch(t){case Kt.Pointer:return d?{top:d.y,bottom:d.y,left:d.x,right:d.x}:null;case Kt.DraggableRect:return s}},[t,s,d]),E=(0,g.useRef)(null),A=(0,g.useCallback)(()=>{const w=E.current;if(!w)return;const M=j.current.x*b.current.x,v=j.current.y*b.current.y;w.scrollBy(M,v)},[]),D=(0,g.useMemo)(()=>l===br.TreeOrder?[...m].reverse():m,[l,m]);(0,g.useEffect)(()=>{if(!a||!m.length||!C){x();return}for(const w of D){if(n?.(w)===!1)continue;const M=u[m.indexOf(w)];if(!M)continue;const{direction:v,speed:y}=Af(w,M,C,e,f);for(const z of["x","y"])h[z][v[z]]||(y[z]=0,v[z]=0);if(y.x>0||y.y>0){x(),E.current=w,p(A,i),j.current=y,b.current=v;return}}j.current={x:0,y:0},b.current={x:0,y:0},x()},[e,A,n,x,a,i,JSON.stringify(C),JSON.stringify(h),p,m,D,u,JSON.stringify(f)])}var Hf={x:{[Fe.Backward]:!1,[Fe.Forward]:!1},y:{[Fe.Backward]:!1,[Fe.Forward]:!1}};function Wf(r){let{delta:e,disabled:t}=r;const n=Wr(e);return sr(s=>{if(t||!n||!s)return Hf;const a={x:Math.sign(e.x-n.x),y:Math.sign(e.y-n.y)};return{x:{[Fe.Backward]:s.x[Fe.Backward]||a.x===-1,[Fe.Forward]:s.x[Fe.Forward]||a.x===1},y:{[Fe.Backward]:s.y[Fe.Backward]||a.y===-1,[Fe.Forward]:s.y[Fe.Forward]||a.y===1}}},[t,e,n])}function Vf(r,e){const t=e!=null?r.get(e):void 0,n=t?t.node.current:null;return sr(s=>{var a;return e==null?null:(a=n??s)!=null?a:null},[n,e])}function Qf(r,e){return(0,g.useMemo)(()=>r.reduce((t,n)=>{const{sensor:s}=n,a=s.activators.map(i=>({eventName:i.eventName,handler:e(i.handler,n)}));return[...t,...a]},[]),[r,e])}var tr;(function(r){r[r.Always=0]="Always",r[r.BeforeDragging=1]="BeforeDragging",r[r.WhileDragging=2]="WhileDragging"})(tr||(tr={}));var Yr;(function(r){r.Optimized="optimized"})(Yr||(Yr={}));var Jn=new Map;function Kf(r,e){let{dragging:t,dependencies:n,config:s}=e;const[a,i]=(0,g.useState)(null),{frequency:l,measure:d,strategy:m}=s,u=(0,g.useRef)(r),c=j(),f=Jt(c),h=(0,g.useCallback)(function(b){b===void 0&&(b=[]),!f.current&&i(C=>C===null?b:C.concat(b.filter(E=>!C.includes(E))))},[f]),p=(0,g.useRef)(null),x=sr(b=>{if(c&&!t)return Jn;if(!b||b===Jn||u.current!==r||a!=null){const C=new Map;for(let E of r){if(!E)continue;if(a&&a.length>0&&!a.includes(E.id)&&E.rect.current){C.set(E.id,E.rect.current);continue}const A=E.node.current,D=A?new hn(d(A),A):null;E.rect.current=D,D&&C.set(E.id,D)}return C}return b},[r,a,t,c,d]);return(0,g.useEffect)(()=>{u.current=r},[r]),(0,g.useEffect)(()=>{c||h()},[t,c]),(0,g.useEffect)(()=>{a&&a.length>0&&i(null)},[JSON.stringify(a)]),(0,g.useEffect)(()=>{c||typeof l!="number"||p.current!==null||(p.current=setTimeout(()=>{h(),p.current=null},l))},[l,c,h,...n]),{droppableRects:x,measureDroppableContainers:h,measuringScheduled:a!=null};function j(){switch(m){case tr.Always:return!1;case tr.BeforeDragging:return t;default:return!t}}}function Di(r,e){return sr(t=>r?t||(typeof e=="function"?e(r):r):null,[e,r])}function Yf(r,e){return Di(r,e)}function Xf(r){let{callback:e,disabled:t}=r;const n=fn(e),s=(0,g.useMemo)(()=>{if(t||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:a}=window;return new a(n)},[n,t]);return(0,g.useEffect)(()=>()=>s?.disconnect(),[s]),s}function Sr(r){let{callback:e,disabled:t}=r;const n=fn(e),s=(0,g.useMemo)(()=>{if(t||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:a}=window;return new a(n)},[t]);return(0,g.useEffect)(()=>()=>s?.disconnect(),[s]),s}function Gf(r){return new hn(Ht(r),r)}function $n(r,e,t){e===void 0&&(e=Gf);const[n,s]=(0,g.useState)(null);function a(){s(d=>{if(!r)return null;if(r.isConnected===!1){var m;return(m=d??t)!=null?m:null}const u=e(r);return JSON.stringify(d)===JSON.stringify(u)?d:u})}const i=Xf({callback(d){if(r)for(const m of d){const{type:u,target:c}=m;if(u==="childList"&&c instanceof HTMLElement&&c.contains(r)){a();break}}}}),l=Sr({callback:a});return vt(()=>{a(),r?(l?.observe(r),i?.observe(document.body,{childList:!0,subtree:!0})):(l?.disconnect(),i?.disconnect())},[r]),n}function Zf(r){return _i(r,Di(r))}var es=[];function Jf(r){const e=(0,g.useRef)(r),t=sr(n=>r?n&&n!==es&&r&&e.current&&r.parentNode===e.current.parentNode?n:zr(r):es,[r]);return(0,g.useEffect)(()=>{e.current=r},[r]),t}function $f(r){const[e,t]=(0,g.useState)(null),n=(0,g.useRef)(r),s=(0,g.useCallback)(a=>{const i=Pr(a.target);i&&t(l=>l?(l.set(i,Qr(i)),new Map(l)):null)},[]);return(0,g.useEffect)(()=>{const a=n.current;if(r!==a){i(a);const l=r.map(d=>{const m=Pr(d);return m?(m.addEventListener("scroll",s,{passive:!0}),[m,Qr(m)]):null}).filter(d=>d!=null);t(l.length?new Map(l):null),n.current=r}return()=>{i(r),i(a)};function i(l){l.forEach(d=>{Pr(d)?.removeEventListener("scroll",s)})}},[s,r]),(0,g.useMemo)(()=>r.length?e?Array.from(e.values()).reduce((a,i)=>Ft(a,i),dt):Ri(r):dt,[r,e])}function ts(r,e){e===void 0&&(e=[]);const t=(0,g.useRef)(null);return(0,g.useEffect)(()=>{t.current=null},e),(0,g.useEffect)(()=>{const n=r!==dt;n&&!t.current&&(t.current=r),!n&&t.current&&(t.current=null)},[r]),t.current?$t(r,t.current):dt}function em(r){(0,g.useEffect)(()=>{if(!Cr)return;const e=r.map(t=>{let{sensor:n}=t;return n.setup==null?void 0:n.setup()});return()=>{for(const t of e)t?.()}},r.map(e=>{let{sensor:t}=e;return t}))}function tm(r,e){return(0,g.useMemo)(()=>r.reduce((t,n)=>{let{eventName:s,handler:a}=n;return t[s]=i=>{a(i,e)},t},{}),[r,e])}function Ti(r){return(0,g.useMemo)(()=>r?_f(r):null,[r])}var rs=[];function rm(r,e){e===void 0&&(e=Ht);const[t]=r,n=Ti(t?et(t):null),[s,a]=(0,g.useState)(rs);function i(){a(()=>r.length?r.map(d=>Ai(d)?n:new hn(e(d),d)):rs)}const l=Sr({callback:i});return vt(()=>{l?.disconnect(),i(),r.forEach(d=>l?.observe(d))},[r]),s}function nm(r){if(!r)return null;if(r.children.length>1)return r;const e=r.children[0];return nr(e)?e:r}function sm(r){let{measure:e}=r;const[t,n]=(0,g.useState)(null),s=Sr({callback:(0,g.useCallback)(l=>{for(const{target:d}of l)if(nr(d)){n(m=>{const u=e(d);return m?{...m,width:u.width,height:u.height}:u});break}},[e])}),[a,i]=vr((0,g.useCallback)(l=>{const d=nm(l);s?.disconnect(),d&&s?.observe(d),n(d?e(d):null)},[e,s]));return(0,g.useMemo)(()=>({nodeRef:a,rect:t,setRef:i}),[t,a,i])}var am=[{sensor:vn,options:{}},{sensor:pn,options:{}}],im={current:{}},dr={draggable:{measure:Yn},droppable:{measure:Yn,strategy:tr.WhileDragging,frequency:Yr.Optimized},dragOverlay:{measure:Ht}},Yt=class extends Map{get(r){var e;return r!=null&&(e=super.get(r))!=null?e:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(r=>{let{disabled:e}=r;return!e})}getNodeFor(r){var e,t;return(e=(t=this.get(r))==null?void 0:t.node.current)!=null?e:void 0}},om={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Yt,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:xr},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:dr,measureDroppableContainers:xr,windowRect:null,measuringScheduled:!1},lm={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:xr,draggableNodes:new Map,over:null,measureDroppableContainers:xr},Ar=(0,g.createContext)(lm),Ii=(0,g.createContext)(om);function cm(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Yt}}}function dm(r,e){switch(e.type){case Le.DragStart:return{...r,draggable:{...r.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case Le.DragMove:return r.draggable.active==null?r:{...r,draggable:{...r.draggable,translate:{x:e.coordinates.x-r.draggable.initialCoordinates.x,y:e.coordinates.y-r.draggable.initialCoordinates.y}}};case Le.DragEnd:case Le.DragCancel:return{...r,draggable:{...r.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Le.RegisterDroppable:{const{element:t}=e,{id:n}=t,s=new Yt(r.droppable.containers);return s.set(n,t),{...r,droppable:{...r.droppable,containers:s}}}case Le.SetDroppableDisabled:{const{id:t,key:n,disabled:s}=e,a=r.droppable.containers.get(t);if(!a||n!==a.key)return r;const i=new Yt(r.droppable.containers);return i.set(t,{...a,disabled:s}),{...r,droppable:{...r.droppable,containers:i}}}case Le.UnregisterDroppable:{const{id:t,key:n}=e,s=r.droppable.containers.get(t);if(!s||n!==s.key)return r;const a=new Yt(r.droppable.containers);return a.delete(t),{...r,droppable:{...r.droppable,containers:a}}}default:return r}}function um(r){let{disabled:e}=r;const{active:t,activatorEvent:n,draggableNodes:s}=(0,g.useContext)(Ar),a=Wr(n),i=Wr(t?.id);return(0,g.useEffect)(()=>{if(!e&&!n&&a&&i!=null){if(!mn(a)||document.activeElement===a.target)return;const l=s.get(i);if(!l)return;const{activatorNode:d,node:m}=l;if(!d.current&&!m.current)return;requestAnimationFrame(()=>{for(const u of[d.current,m.current]){if(!u)continue;const c=rf(u);if(c){c.focus();break}}})}},[n,e,s,i,a]),null}function fm(r,e){let{transform:t,...n}=e;return r!=null&&r.length?r.reduce((s,a)=>a({transform:s,...n}),t):t}function mm(r){return(0,g.useMemo)(()=>({draggable:{...dr.draggable,...r?.draggable},droppable:{...dr.droppable,...r?.droppable},dragOverlay:{...dr.dragOverlay,...r?.dragOverlay}}),[r?.draggable,r?.droppable,r?.dragOverlay])}function hm(r){let{activeNode:e,measure:t,initialRect:n,config:s=!0}=r;const a=(0,g.useRef)(!1),{x:i,y:l}=typeof s=="boolean"?{x:s,y:s}:s;vt(()=>{if(!i&&!l||!e){a.current=!1;return}if(a.current||!n)return;const d=e?.node.current;if(!d||d.isConnected===!1)return;const m=_i(t(d),n);if(i||(m.x=0),l||(m.y=0),a.current=!0,Math.abs(m.x)>0||Math.abs(m.y)>0){const u=Ci(d);u&&u.scrollBy({top:m.y,left:m.x})}},[e,i,l,n,t])}var Pi=(0,g.createContext)({...dt,scaleX:1,scaleY:1}),Et;(function(r){r[r.Uninitialized=0]="Uninitialized",r[r.Initializing=1]="Initializing",r[r.Initialized=2]="Initialized"})(Et||(Et={}));var pm=(0,g.memo)(function(e){var t,n,s,a;let{id:i,accessibility:l,autoScroll:d=!0,children:m,sensors:u=am,collisionDetection:c=xf,measuring:f,modifiers:h,...p}=e;const[x,j]=(0,g.useReducer)(dm,void 0,cm),[b,C]=cf(),[E,A]=(0,g.useState)(Et.Uninitialized),D=E===Et.Initialized,{draggable:{active:w,nodes:M,translate:v},droppable:{containers:y}}=x,z=w!=null?M.get(w):null,T=(0,g.useRef)({initial:null,translated:null}),_=(0,g.useMemo)(()=>{var je;return w!=null?{id:w,data:(je=z?.data)!=null?je:im,rect:T}:null},[w,z]),R=(0,g.useRef)(null),[S,I]=(0,g.useState)(null),[k,N]=(0,g.useState)(null),F=Jt(p,Object.values(p)),P=ar("DndDescribedBy",i),O=(0,g.useMemo)(()=>y.getEnabled(),[y]),H=mm(f),{droppableRects:q,measureDroppableContainers:B,measuringScheduled:U}=Kf(O,{dragging:D,dependencies:[v.x,v.y],config:H.droppable}),L=Vf(M,w),Q=(0,g.useMemo)(()=>k?Vr(k):null,[k]),G=xe(),K=Yf(L,H.draggable.measure);hm({activeNode:w!=null?M.get(w):null,config:G.layoutShiftCompensation,initialRect:K,measure:H.draggable.measure});const V=$n(L,H.draggable.measure,K),J=$n(L?L.parentElement:null),$=(0,g.useRef)({activatorEvent:null,active:null,activeNode:L,collisionRect:null,collisions:null,droppableRects:q,draggableNodes:M,draggingNode:null,draggingNodeRect:null,droppableContainers:y,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Z=y.getNodeFor((t=$.current.over)==null?void 0:t.id),oe=sm({measure:H.dragOverlay.measure}),re=(n=oe.nodeRef.current)!=null?n:L,te=D?(s=oe.rect)!=null?s:V:null,le=!!(oe.nodeRef.current&&oe.rect),ae=Zf(le?null:V),fe=Ti(re?et(re):null),se=Jf(D?Z??L:null),be=rm(se),ye=fm(h,{transform:{x:v.x-ae.x,y:v.y-ae.y,scaleX:1,scaleY:1},activatorEvent:k,active:_,activeNodeRect:V,containerNodeRect:J,draggingNodeRect:te,over:$.current.over,overlayNodeRect:oe.rect,scrollableAncestors:se,scrollableAncestorRects:be,windowRect:fe}),ie=Q?Ft(Q,v):null,ve=$f(se),me=ts(ve),Ne=ts(ve,[V]),_e=Ft(ye,me),we=te?wf(te,ye):null,Re=_&&we?c({active:_,collisionRect:we,droppableRects:q,droppableContainers:O,pointerCoordinates:ie}):null,Me=Ni(Re,"id"),[ce,Ce]=(0,g.useState)(null),ke=bf(le?ye:Ft(ye,Ne),(a=ce?.rect)!=null?a:null,V),Ae=(0,g.useRef)(null),Ee=(0,g.useCallback)((je,Se)=>{let{sensor:Pe,options:Te}=Se;if(R.current==null)return;const ze=M.get(R.current);if(!ze)return;const Y=je.nativeEvent;Ae.current=new Pe({active:R.current,activeNode:ze,event:Y,options:Te,context:$,onAbort(de){if(!M.get(de))return;const{onDragAbort:ge}=F.current,ue={id:de};ge?.(ue),b({type:"onDragAbort",event:ue})},onPending(de,ge,ue,Oe){if(!M.get(de))return;const{onDragPending:st}=F.current,Be={id:de,constraint:ge,initialCoordinates:ue,offset:Oe};st?.(Be),b({type:"onDragPending",event:Be})},onStart(de){const ge=R.current;if(ge==null)return;const ue=M.get(ge);if(!ue)return;const{onDragStart:Oe}=F.current,st={activatorEvent:Y,active:{id:ge,data:ue.data,rect:T}};(0,Vt.unstable_batchedUpdates)(()=>{Oe?.(st),A(Et.Initializing),j({type:Le.DragStart,initialCoordinates:de,active:ge}),b({type:"onDragStart",event:st}),I(Ae.current),N(Y)})},onMove(de){j({type:Le.DragMove,coordinates:de})},onEnd:he(Le.DragEnd),onCancel:he(Le.DragCancel)});function he(de){return async function(){const{active:ue,collisions:Oe,over:st,scrollAdjustedTranslate:Be}=$.current;let Ue=null;if(ue&&Be){const{cancelDrop:it}=F.current;Ue={activatorEvent:Y,active:ue,collisions:Oe,delta:Be,over:st},de===Le.DragEnd&&typeof it=="function"&&await Promise.resolve(it(Ue))&&(de=Le.DragCancel)}R.current=null,(0,Vt.unstable_batchedUpdates)(()=>{j({type:de}),A(Et.Uninitialized),Ce(null),I(null),N(null),Ae.current=null;const it=de===Le.DragEnd?"onDragEnd":"onDragCancel";if(Ue){const bt=F.current[it];bt?.(Ue),b({type:it,event:Ue})}})}}},[M]),De=Qf(u,(0,g.useCallback)((je,Se)=>(Pe,Te)=>{const ze=Pe.nativeEvent,Y=M.get(Te);if(R.current!==null||!Y||ze.dndKit||ze.defaultPrevented)return;const he={active:Y};je(Pe,Se.options,he)===!0&&(ze.dndKit={capturedBy:Se.sensor},R.current=Te,Ee(Pe,Se))},[M,Ee]));em(u),vt(()=>{V&&E===Et.Initializing&&A(Et.Initialized)},[V,E]),(0,g.useEffect)(()=>{const{onDragMove:je}=F.current,{active:Se,activatorEvent:Pe,collisions:Te,over:ze}=$.current;if(!Se||!Pe)return;const Y={active:Se,activatorEvent:Pe,collisions:Te,delta:{x:_e.x,y:_e.y},over:ze};(0,Vt.unstable_batchedUpdates)(()=>{je?.(Y),b({type:"onDragMove",event:Y})})},[_e.x,_e.y]),(0,g.useEffect)(()=>{const{active:je,activatorEvent:Se,collisions:Pe,droppableContainers:Te,scrollAdjustedTranslate:ze}=$.current;if(!je||R.current==null||!Se||!ze)return;const{onDragOver:Y}=F.current,he=Te.get(Me),de=he&&he.rect.current?{id:he.id,rect:he.rect.current,data:he.data,disabled:he.disabled}:null,ge={active:je,activatorEvent:Se,collisions:Pe,delta:{x:ze.x,y:ze.y},over:de};(0,Vt.unstable_batchedUpdates)(()=>{Ce(de),Y?.(ge),b({type:"onDragOver",event:ge})})},[Me]),vt(()=>{$.current={activatorEvent:k,active:_,activeNode:L,collisionRect:we,collisions:Re,droppableRects:q,draggableNodes:M,draggingNode:re,draggingNodeRect:te,droppableContainers:y,over:ce,scrollableAncestors:se,scrollAdjustedTranslate:_e},T.current={initial:te,translated:we}},[_,L,Re,we,M,re,te,q,y,ce,se,_e]),Bf({...G,delta:v,draggingRect:we,pointerCoordinates:ie,scrollableAncestors:se,scrollableAncestorRects:be});const tt=(0,g.useMemo)(()=>({active:_,activeNode:L,activeNodeRect:V,activatorEvent:k,collisions:Re,containerNodeRect:J,dragOverlay:oe,draggableNodes:M,droppableContainers:y,droppableRects:q,over:ce,measureDroppableContainers:B,scrollableAncestors:se,scrollableAncestorRects:be,measuringConfiguration:H,measuringScheduled:U,windowRect:fe}),[_,L,V,k,Re,J,oe,M,y,q,ce,B,se,be,H,U,fe]),ee=(0,g.useMemo)(()=>({activatorEvent:k,activators:De,active:_,activeNodeRect:V,ariaDescribedById:{draggable:P},dispatch:j,draggableNodes:M,over:ce,measureDroppableContainers:B}),[k,De,_,V,j,P,M,ce,B]);return g.createElement(wi.Provider,{value:C},g.createElement(Ar.Provider,{value:ee},g.createElement(Ii.Provider,{value:tt},g.createElement(Pi.Provider,{value:ke},m)),g.createElement(um,{disabled:l?.restoreFocus===!1})),g.createElement(ff,{...l,hiddenTextDescribedById:P}));function xe(){const je=S?.autoScrollEnabled===!1,Se=typeof d=="object"?d.enabled===!1:d===!1,Pe=D&&!je&&!Se;return typeof d=="object"?{...d,enabled:Pe}:{enabled:Pe}}}),gm=(0,g.createContext)(null),ns="button",vm="Draggable";function xm(r){let{id:e,data:t,disabled:n=!1,attributes:s}=r;const a=ar(vm),{activators:i,activatorEvent:l,active:d,activeNodeRect:m,ariaDescribedById:u,draggableNodes:c,over:f}=(0,g.useContext)(Ar),{role:h=ns,roleDescription:p="draggable",tabIndex:x=0}=s??{},j=d?.id===e,b=(0,g.useContext)(j?Pi:gm),[C,E]=vr(),[A,D]=vr(),w=tm(i,e),M=Jt(t);return vt(()=>(c.set(e,{id:e,key:a,node:C,activatorNode:A,data:M}),()=>{const v=c.get(e);v&&v.key===a&&c.delete(e)}),[c,e]),{active:d,activatorEvent:l,activeNodeRect:m,attributes:(0,g.useMemo)(()=>({role:h,tabIndex:x,"aria-disabled":n,"aria-pressed":j&&h===ns?!0:void 0,"aria-roledescription":p,"aria-describedby":u.draggable}),[n,h,x,j,p,u.draggable]),isDragging:j,listeners:n?void 0:w,node:C,over:f,setNodeRef:E,setActivatorNodeRef:D,transform:b}}function bm(){return(0,g.useContext)(Ii)}var ym="Droppable",wm={timeout:25};function jm(r){let{data:e,disabled:t=!1,id:n,resizeObserverConfig:s}=r;const a=ar(ym),{active:i,dispatch:l,over:d,measureDroppableContainers:m}=(0,g.useContext)(Ar),u=(0,g.useRef)({disabled:t}),c=(0,g.useRef)(!1),f=(0,g.useRef)(null),h=(0,g.useRef)(null),{disabled:p,updateMeasurementsFor:x,timeout:j}={...wm,...s},b=Jt(x??n),C=Sr({callback:(0,g.useCallback)(()=>{if(!c.current){c.current=!0;return}h.current!=null&&clearTimeout(h.current),h.current=setTimeout(()=>{m(Array.isArray(b.current)?b.current:[b.current]),h.current=null},j)},[j]),disabled:p||!i}),[E,A]=vr((0,g.useCallback)((w,M)=>{C&&(M&&(C.unobserve(M),c.current=!1),w&&C.observe(w))},[C])),D=Jt(e);return(0,g.useEffect)(()=>{!C||!E.current||(C.disconnect(),c.current=!1,C.observe(E.current))},[E,C]),(0,g.useEffect)(()=>(l({type:Le.RegisterDroppable,element:{id:n,key:a,disabled:t,node:E,rect:f,data:D}}),()=>l({type:Le.UnregisterDroppable,key:a,id:n})),[n]),(0,g.useEffect)(()=>{t!==u.current.disabled&&(l({type:Le.SetDroppableDisabled,id:n,key:a,disabled:t}),u.current.disabled=t)},[n,a,t,l]),{active:i,rect:f,isOver:d?.id===n,node:E,over:d,setNodeRef:A}}function xn(r,e,t){const n=r.slice();return n.splice(t<0?n.length+t:t,0,n.splice(e,1)[0]),n}function km(r,e){return r.reduce((t,n,s)=>{const a=e.get(n);return a&&(t[s]=a),t},Array(r.length))}function or(r){return r!==null&&r>=0}function Nm(r,e){if(r===e)return!0;if(r.length!==e.length)return!1;for(let t=0;t<r.length;t++)if(r[t]!==e[t])return!1;return!0}function _m(r){return typeof r=="boolean"?{draggable:r,droppable:r}:r}var bn=r=>{let{rects:e,activeIndex:t,overIndex:n,index:s}=r;const a=xn(e,n,t),i=e[s],l=a[s];return!l||!i?null:{x:l.left-i.left,y:l.top-i.top,scaleX:l.width/i.width,scaleY:l.height/i.height}},Li="Sortable",Fi=g.createContext({activeIndex:-1,containerId:Li,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:bn,disabled:{draggable:!1,droppable:!1}});function Cm(r){let{children:e,id:t,items:n,strategy:s=bn,disabled:a=!1}=r;const{active:i,dragOverlay:l,droppableRects:d,over:m,measureDroppableContainers:u}=bm(),c=ar(Li,t),f=l.rect!==null,h=(0,g.useMemo)(()=>n.map(w=>typeof w=="object"&&"id"in w?w.id:w),[n]),p=i!=null,x=i?h.indexOf(i.id):-1,j=m?h.indexOf(m.id):-1,b=(0,g.useRef)(h),C=!Nm(h,b.current),E=j!==-1&&x===-1||C,A=_m(a);vt(()=>{C&&p&&u(h)},[C,h,p,u]),(0,g.useEffect)(()=>{b.current=h},[h]);const D=(0,g.useMemo)(()=>({activeIndex:x,containerId:c,disabled:A,disableTransforms:E,items:h,overIndex:j,useDragOverlay:f,sortedRects:km(h,d),strategy:s}),[x,c,A.draggable,A.droppable,E,h,j,d,f,s]);return g.createElement(Fi.Provider,{value:D},e)}var zm=r=>{let{id:e,items:t,activeIndex:n,overIndex:s}=r;return xn(t,n,s).indexOf(e)},Sm=r=>{let{containerId:e,isSorting:t,wasDragging:n,index:s,items:a,newIndex:i,previousItems:l,previousContainerId:d,transition:m}=r;return!m||!n||l!==a&&s===i?!1:t?!0:i!==s&&e===d},Am={duration:200,easing:"ease"},Oi="transform",Em=er.Transition.toString({property:Oi,duration:0,easing:"linear"}),Rm={roleDescription:"sortable"};function Mm(r){let{disabled:e,index:t,node:n,rect:s}=r;const[a,i]=(0,g.useState)(null),l=(0,g.useRef)(t);return vt(()=>{if(!e&&t!==l.current&&n.current){const d=s.current;if(d){const m=Ht(n.current,{ignoreTransform:!0}),u={x:d.left-m.left,y:d.top-m.top,scaleX:d.width/m.width,scaleY:d.height/m.height};(u.x||u.y)&&i(u)}}t!==l.current&&(l.current=t)},[e,t,n,s]),(0,g.useEffect)(()=>{a&&i(null)},[a]),a}function Dm(r){let{animateLayoutChanges:e=Sm,attributes:t,disabled:n,data:s,getNewIndex:a=zm,id:i,strategy:l,resizeObserverConfig:d,transition:m=Am}=r;const{items:u,containerId:c,activeIndex:f,disabled:h,disableTransforms:p,sortedRects:x,overIndex:j,useDragOverlay:b,strategy:C}=(0,g.useContext)(Fi),E=Tm(n,h),A=u.indexOf(i),D=(0,g.useMemo)(()=>({sortable:{containerId:c,index:A,items:u},...s}),[c,s,A,u]),w=(0,g.useMemo)(()=>u.slice(u.indexOf(i)),[u,i]),{rect:M,node:v,isOver:y,setNodeRef:z}=jm({id:i,data:D,disabled:E.droppable,resizeObserverConfig:{updateMeasurementsFor:w,...d}}),{active:T,activatorEvent:_,activeNodeRect:R,attributes:S,setNodeRef:I,listeners:k,isDragging:N,over:F,setActivatorNodeRef:P,transform:O}=xm({id:i,data:D,attributes:{...Rm,...t},disabled:E.draggable}),H=J0(z,I),q=!!T,B=q&&!p&&or(f)&&or(j),U=!b&&N,L=U&&B?O:null,Q=B?L??(l??C)({rects:x,activeNodeRect:R,activeIndex:f,overIndex:j,index:A}):null,G=or(f)&&or(j)?a({id:i,items:u,activeIndex:f,overIndex:j}):A,K=T?.id,V=(0,g.useRef)({activeId:K,items:u,newIndex:G,containerId:c}),J=u!==V.current.items,$=e({active:T,containerId:c,isDragging:N,isSorting:q,id:i,index:A,items:u,newIndex:V.current.newIndex,previousItems:V.current.items,previousContainerId:V.current.containerId,transition:m,wasDragging:V.current.activeId!=null}),Z=Mm({disabled:!$,index:A,node:v,rect:M});return(0,g.useEffect)(()=>{q&&V.current.newIndex!==G&&(V.current.newIndex=G),c!==V.current.containerId&&(V.current.containerId=c),u!==V.current.items&&(V.current.items=u)},[q,G,c,u]),(0,g.useEffect)(()=>{if(K===V.current.activeId)return;if(K!=null&&V.current.activeId==null){V.current.activeId=K;return}const re=setTimeout(()=>{V.current.activeId=K},50);return()=>clearTimeout(re)},[K]),{active:T,activeIndex:f,attributes:S,data:D,rect:M,index:A,newIndex:G,items:u,isOver:y,isSorting:q,isDragging:N,listeners:k,node:v,overIndex:j,over:F,setNodeRef:H,setActivatorNodeRef:P,setDroppableNodeRef:z,setDraggableNodeRef:I,transform:Z??Q,transition:oe()};function oe(){if(Z||J&&V.current.newIndex===A)return Em;if(!(U&&!mn(_)||!m)&&(q||$))return er.Transition.toString({...m,property:Oi})}}function Tm(r,e){var t,n;return typeof r=="boolean"?{draggable:r,droppable:!1}:{draggable:(t=r?.draggable)!=null?t:e.draggable,droppable:(n=r?.droppable)!=null?n:e.droppable}}function yr(r){if(!r)return!1;const e=r.data.current;return!!(e&&"sortable"in e&&typeof e.sortable=="object"&&"containerId"in e.sortable&&"items"in e.sortable&&"index"in e.sortable)}var Im=[pe.Down,pe.Right,pe.Up,pe.Left],Pm=(r,e)=>{let{context:{active:t,collisionRect:n,droppableRects:s,droppableContainers:a,over:i,scrollableAncestors:l}}=e;if(Im.includes(r.code)){if(r.preventDefault(),!t||!n)return;const d=[];a.getEnabled().forEach(c=>{if(!c||c!=null&&c.disabled)return;const f=s.get(c.id);if(f)switch(r.code){case pe.Down:n.top<f.top&&d.push(c);break;case pe.Up:n.top>f.top&&d.push(c);break;case pe.Left:n.left>f.left&&d.push(c);break;case pe.Right:n.left<f.left&&d.push(c);break}});const m=gf({active:t,collisionRect:n,droppableRects:s,droppableContainers:d,pointerCoordinates:null});let u=Ni(m,"id");if(u===i?.id&&m.length>1&&(u=m[1].id),u!=null){const c=a.get(t.id),f=a.get(u),h=f?s.get(f.id):null,p=f?.node.current;if(p&&h&&c&&f){const x=zr(p).some((A,D)=>l[D]!==A),j=Ui(c,f),b=Lm(c,f),C=x||!j?{x:0,y:0}:{x:b?n.width-h.width:0,y:b?n.height-h.height:0},E={x:h.left,y:h.top};return C.x&&C.y?E:$t(E,C)}}}};function Ui(r,e){return!yr(r)||!yr(e)?!1:r.data.current.sortable.containerId===e.data.current.sortable.containerId}function Lm(r,e){return!yr(r)||!yr(e)||!Ui(r,e)?!1:r.data.current.sortable.index<e.data.current.sortable.index}var qi=ne(),Fm=r=>{const e=(0,qi.c)(33),{id:t,file:n,index:s,total:a,onRemove:i,onAddThumbnail:l,customThumbnail:d}=r;let m;e[0]!==t?(m={id:t},e[0]=t,e[1]=m):m=e[1];const{attributes:u,listeners:c,setNodeRef:f,transform:h,transition:p,isDragging:x}=Dm(m);let j;e[2]!==h?(j=er.Transform.toString(h),e[2]=h,e[3]=j):j=e[3];const b=x?50:"auto",C=x?.5:1;let E;e[4]!==j||e[5]!==b||e[6]!==C||e[7]!==p?(E={transform:j,transition:p,zIndex:b,opacity:C},e[4]=j,e[5]=b,e[6]=C,e[7]=p,e[8]=E):E=e[8];const A=E,D=`group relative overflow-hidden rounded-2xl border border-zinc-100 bg-zinc-100 shadow-sm transition-shadow dark:border-zinc-800 dark:bg-zinc-800 ${a===3&&s===0?"row-span-2":""} ${x?"ring-2 ring-violet-500 shadow-xl":""}`;let w;e[9]!==d||e[10]!==n?(w=n.type.startsWith("image/")?(0,o.jsx)("img",{src:URL.createObjectURL(n),className:"size-full pointer-events-none object-cover",alt:""}):(0,o.jsx)("div",{className:"pointer-events-none flex size-full flex-col items-center justify-center gap-2 text-zinc-500",children:n.type.startsWith("video/")?(0,o.jsx)(o.Fragment,{children:d?(0,o.jsx)("img",{src:URL.createObjectURL(d),className:"size-full opacity-60 object-cover",alt:"Custom thumbnail"}):(0,o.jsx)("div",{className:"flex size-10 items-center justify-center rounded-full bg-black/20 backdrop-blur-sm",children:(0,o.jsx)(Xt,{size:20,className:"text-zinc-400"})})}):(0,o.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,o.jsx)(oo,{size:24}),(0,o.jsx)("span",{className:"max-w-[100px] truncate px-2 text-[10px] font-bold",children:n.name})]})}),e[9]=d,e[10]=n,e[11]=w):w=e[11];let M;e[12]!==u||e[13]!==c||e[14]!==w?(M=(0,o.jsx)("div",{...u,...c,className:"size-full cursor-grab active:cursor-grabbing",children:w}),e[12]=u,e[13]=c,e[14]=w,e[15]=M):M=e[15];let v;e[16]!==d||e[17]!==n.type||e[18]!==l?(v=n.type.startsWith("video/")&&(0,o.jsx)("button",{type:"button",onClick:l,className:"absolute inset-x-0 bottom-0 z-10 bg-black/60 py-2 text-[10px] font-bold text-white backdrop-blur-md transition-colors hover:bg-black/80",children:d?"Change Cover":"Add Cover"}),e[16]=d,e[17]=n.type,e[18]=l,e[19]=v):v=e[19];let y;e[20]!==t||e[21]!==i?(y=()=>i(t),e[20]=t,e[21]=i,e[22]=y):y=e[22];let z;e[23]===Symbol.for("react.memo_cache_sentinel")?(z=(0,o.jsx)(kt,{size:14,strokeWidth:2.5}),e[23]=z):z=e[23];let T;e[24]!==y?(T=(0,o.jsx)("button",{type:"button",onClick:y,className:"absolute right-2 top-2 z-20 rounded-full bg-black/50 p-1.5 text-white backdrop-blur-md transition-colors hover:bg-rose-500",children:z}),e[24]=y,e[25]=T):T=e[25];let _;return e[26]!==f||e[27]!==A||e[28]!==T||e[29]!==D||e[30]!==M||e[31]!==v?(_=(0,o.jsxs)("div",{ref:f,style:A,className:D,children:[M,v,T]}),e[26]=f,e[27]=A,e[28]=T,e[29]=D,e[30]=M,e[31]=v,e[32]=_):_=e[32],_},Om=r=>{const e=(0,qi.c)(32),{selectedFiles:t,setSelectedFiles:n,customThumbnails:s,setCustomThumbnails:a}=r,i=(0,g.useRef)(null),[l,d]=g.useState(null);let m;e[0]===Symbol.for("react.memo_cache_sentinel")?(m={activationConstraint:{distance:8}},e[0]=m):m=e[0];let u;e[1]===Symbol.for("react.memo_cache_sentinel")?(u={coordinateGetter:Pm},e[1]=u):u=e[1];const c=mf(Vn(vn,m),Vn(pn,u));let f;e[2]!==n?(f=z=>{const{active:T,over:_}=z;_&&T.id!==_.id&&n(R=>xn(R,R.findIndex(S=>S.id===T.id),R.findIndex(S=>S.id===_.id)))},e[2]=n,e[3]=f):f=e[3];const h=f;let p;e[4]!==s||e[5]!==a||e[6]!==n?(p=z=>{n(_=>_.filter(R=>R.id!==z));const T={...s};delete T[z],a(T)},e[4]=s,e[5]=a,e[6]=n,e[7]=p):p=e[7];const x=p;let j;e[8]!==l||e[9]!==a?(j=z=>{const T=z.target.files?.[0];T&&l!==null&&a(_=>({..._,[l]:T})),d(null)},e[8]=l,e[9]=a,e[10]=j):j=e[10];const b=j;if(t.length===0)return null;let C;e[11]!==t?(C=t.map(qm),e[11]=t,e[12]=C):C=e[12];const E=`grid gap-2 overflow-hidden rounded-2xl border border-zinc-100 shadow-sm dark:border-zinc-800 ${t.length===1?"grid-cols-1":"aspect-[16/9] grid-cols-2"}`;let A;e[13]!==s||e[14]!==x||e[15]!==t?(A=t.map((z,T)=>(0,o.jsx)(Fm,{id:z.id,file:z.file,index:T,total:t.length,onRemove:x,customThumbnail:s[z.id],onAddThumbnail:()=>{d(z.id),i.current?.click()}},z.id)),e[13]=s,e[14]=x,e[15]=t,e[16]=A):A=e[16];let D;e[17]!==E||e[18]!==A?(D=(0,o.jsx)("div",{className:E,children:A}),e[17]=E,e[18]=A,e[19]=D):D=e[19];let w;e[20]!==C||e[21]!==D?(w=(0,o.jsx)(Cm,{items:C,strategy:bn,children:D}),e[20]=C,e[21]=D,e[22]=w):w=e[22];let M;e[23]!==h||e[24]!==c||e[25]!==w?(M=(0,o.jsx)(pm,{sensors:c,collisionDetection:pf,onDragEnd:h,children:w}),e[23]=h,e[24]=c,e[25]=w,e[26]=M):M=e[26];let v;e[27]!==b?(v=(0,o.jsx)("input",{type:"file",ref:i,onChange:b,className:"hidden",accept:"image/*"}),e[27]=b,e[28]=v):v=e[28];let y;return e[29]!==M||e[30]!==v?(y=(0,o.jsxs)("div",{className:"mb-4 animate-in fade-in zoom-in-95 duration-200",children:[M,v]}),e[29]=M,e[30]=v,e[31]=y):y=e[31],y},Um=Om;function qm(r){return r.id}var Bm=({isOpen:r,onClose:e,initialCommunity:t})=>{const{currentUser:n}=Xe(),{addPost:s}=Yc(),{addToast:a}=ut(),[i,l]=(0,g.useState)(""),[d,m]=(0,g.useState)([]),[u,c]=(0,g.useState)({}),[f,h]=(0,g.useState)(!1),[p,x]=(0,g.useState)({options:["",""],duration:"1 day"}),[j,b]=(0,g.useState)(!1),[C,E]=(0,g.useState)(null);(0,g.useEffect)(()=>{r&&E(t||null)},[r,t]);const{data:A=[]}=yt({queryKey:["user-communities",n?.id],queryFn:()=>Ql(n.id),enabled:!!n?.id}),D=(0,g.useRef)(null),w=_=>{if(!_.target.files)return;const R=Array.from(_.target.files).map(S=>({id:Math.random().toString(36).substring(2,11),file:S}));m(S=>[...S,...R])},M=_=>{const R=_.clipboardData.files;if(R&&R.length>0){const S=Array.from(R).filter(I=>I.type.startsWith("image/"));if(S.length>0){_.preventDefault();const I=S.map(k=>({id:Math.random().toString(36).substring(2,11),file:k}));m(k=>[...k,...I])}}},v=()=>{p.options.length<4&&x(_=>({..._,options:[..._.options,""]}))},y=_=>{x(R=>({...R,options:R.options.filter((S,I)=>I!==_)}))},z=(_,R)=>{const S=[...p.options];S[_]=R,x(I=>({...I,options:S}))},T=async _=>{if(_.preventDefault(),!(!i.trim()&&d.length===0||!n)){b(!0);try{const R=[];for(let I=0;I<d.length;I++){const k=d[I],N=u[k.id]||null,F=await wt(k.file,"media",N);R.push(F)}let S=null;f&&p.options.some(I=>I.trim())&&(S={options:p.options.filter(I=>I.trim()).map((I,k)=>({id:k+1,text:I,votes:0})),ends_at:new Date(Date.now()+1440*60*1e3).toISOString()}),await s({content:i,media:R,poll:S,type:R.length>0?R[0].type==="video"?"video":"image":S?"poll":"text",userId:n.id,communityId:C?.id||null}),l(""),m([]),h(!1),x({options:["",""],duration:"1 day"}),E(null),e(),a("Post published!")}catch(R){console.error("Failed to create post:",R),a("Failed to publish post.","error")}finally{b(!1)}}};return(0,o.jsx)(zt,{isOpen:r,onClose:()=>!j&&e(),title:"Create Post",className:"gap-0 overflow-hidden p-0 sm:max-w-[620px] max-h-[89dvh]",footer:(0,o.jsxs)("div",{className:"flex w-full items-center justify-between pt-2",children:[(0,o.jsxs)("div",{className:"flex gap-1",children:[(0,o.jsx)("button",{type:"button",onClick:()=>D.current?.click(),className:"rounded-full p-2 text-violet-600 transition-all hover:bg-violet-50 active:scale-95 dark:text-violet-400 dark:hover:bg-violet-900/20",title:"Attach media",children:(0,o.jsx)(ao,{size:20})}),(0,o.jsx)("button",{type:"button",onClick:()=>h(!f),className:`rounded-full p-2 transition-all active:scale-95 ${f?"bg-violet-50 text-violet-600 dark:bg-violet-900/20 dark:text-violet-400":"text-violet-600 hover:bg-violet-50 dark:text-violet-400 dark:hover:bg-violet-900/20"}`,title:"Add poll",children:(0,o.jsx)(No,{size:20})})]}),(0,o.jsxs)("div",{className:"flex items-center gap-3",children:[(0,o.jsx)("div",{className:"h-6 w-px bg-zinc-200 dark:bg-zinc-800"}),(0,o.jsx)(Ie,{onClick:T,disabled:!i.trim()&&d.length===0,loading:j,className:"h-9 rounded-full bg-zinc-900 px-6 text-sm font-bold text-white shadow-md transition-all hover:opacity-90 disabled:opacity-50 active:scale-95 dark:bg-white dark:text-zinc-950",children:"Post"})]}),(0,o.jsx)("input",{type:"file",ref:D,onChange:w,multiple:!0,className:"hidden",accept:"image/*,video/*,application/pdf"})]}),children:(0,o.jsxs)("div",{className:"flex flex-col gap-4 p-4 h-full overflow-y-auto",children:[(0,o.jsxs)("div",{className:"flex items-start gap-3 px-1",children:[(0,o.jsxs)(Ve,{className:"size-10 shrink-0 border border-zinc-100 shadow-sm dark:border-zinc-800",children:[(0,o.jsx)(Qe,{src:n?.avatar,className:"object-cover"}),(0,o.jsx)(Ye,{children:n?.handle?.[0]?.toUpperCase()})]}),(0,o.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,o.jsxs)("div",{className:"mb-3 flex items-center gap-2",children:[(0,o.jsx)("span",{className:"truncate text-sm font-bold text-zinc-900 dark:text-zinc-100",children:n?.name}),(0,o.jsxs)(Ed,{children:[(0,o.jsx)(Rd,{asChild:!0,children:(0,o.jsx)("button",{type:"button",onPointerDown:_=>_.stopPropagation(),onClick:_=>_.stopPropagation(),className:"group flex items-center gap-1.5 rounded-full border border-zinc-200 bg-white px-2.5 py-1 text-xs font-bold text-zinc-600 transition-all hover:bg-zinc-50 dark:border-zinc-700 dark:bg-zinc-900 dark:text-zinc-300 dark:hover:bg-zinc-800",children:C?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(Ve,{className:"size-4 shrink-0 overflow-hidden rounded-full border border-zinc-100 dark:border-zinc-800",children:[(0,o.jsx)(Qe,{src:C.avatar,className:"object-cover"}),(0,o.jsx)(Ye,{className:"text-[6px]",children:C.name?.[0]?.toUpperCase()})]}),(0,o.jsx)("span",{className:"max-w-[100px] truncate",children:C.name})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(jn,{size:12,className:"text-zinc-400 transition-colors group-hover:text-violet-500"}),(0,o.jsx)("span",{children:"Everyone"})]})})}),(0,o.jsxs)(Ia,{align:"start",onCloseAutoFocus:_=>_.preventDefault(),className:"w-60 rounded-xl border-zinc-100 p-1.5 shadow-xl dark:border-zinc-800",children:[(0,o.jsxs)(qr,{onClick:()=>E(null),className:"cursor-pointer gap-3 rounded-lg px-3 py-2 focus:bg-zinc-50 dark:focus:bg-zinc-800",children:[(0,o.jsx)("div",{className:"flex size-8 shrink-0 items-center justify-center rounded-full bg-zinc-100 dark:bg-zinc-800",children:(0,o.jsx)(jn,{size:16,className:"text-zinc-500"})}),(0,o.jsxs)("div",{className:"flex flex-col",children:[(0,o.jsx)("span",{className:"text-sm font-bold",children:"Everyone"}),(0,o.jsx)("span",{className:"text-[11px] text-zinc-500",children:"Public feed"})]})]}),A.length>0&&(0,o.jsx)("div",{className:"mx-2 my-1 h-px bg-zinc-100 dark:bg-zinc-800"}),(0,o.jsx)("div",{className:"max-h-[200px] overflow-y-auto",children:A.filter(_=>!_.isPrivate||_.myRole==="admin").map(_=>(0,o.jsxs)(qr,{onClick:()=>E(_),className:"cursor-pointer gap-3 rounded-lg px-3 py-2 focus:bg-zinc-50 dark:focus:bg-zinc-800",children:[(0,o.jsxs)(Ve,{className:"size-8 border border-zinc-100 dark:border-zinc-700",children:[(0,o.jsx)(Qe,{src:_.avatar}),(0,o.jsx)(Ye,{children:_.name[0]})]}),(0,o.jsxs)("div",{className:"min-w-0 flex flex-col",children:[(0,o.jsx)("span",{className:"truncate text-sm font-bold",children:_.name}),(0,o.jsx)("span",{className:"text-[11px] text-zinc-500",children:"Community"})]})]},_.id))})]})]})]}),(0,o.jsx)("textarea",{className:"min-h-[120px] max-h-[650px] w-full resize-none border-none bg-transparent text-lg font-medium leading-relaxed outline-none placeholder:text-zinc-400 dark:text-zinc-100 px-1",placeholder:"What's on your mind?",autoFocus:!0,value:i,onPaste:M,onChange:_=>{l(_.target.value),_.target.style.height="auto",_.target.style.height=_.target.scrollHeight+"px"}})]})]}),(0,o.jsxs)("div",{className:"px-1 mt-2",children:[(0,o.jsx)(Um,{selectedFiles:d,setSelectedFiles:m,customThumbnails:u,setCustomThumbnails:c}),f&&(0,o.jsxs)("div",{className:"mb-4 space-y-3 animate-in slide-in-from-top-2 duration-200 rounded-xl border border-violet-100 bg-violet-50/30 p-4 dark:border-violet-900/30 dark:bg-violet-900/10",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between px-1",children:[(0,o.jsx)("span",{className:"text-xs font-bold uppercase tracking-wider text-violet-600 dark:text-violet-400",children:"Poll Options"}),(0,o.jsx)("button",{type:"button",onClick:()=>h(!1),className:"text-zinc-400 transition-colors hover:text-rose-500",children:(0,o.jsx)(kt,{size:16})})]}),(0,o.jsx)("div",{className:"space-y-2",children:p.options.map((_,R)=>(0,o.jsxs)("div",{className:"group flex gap-2",children:[(0,o.jsxs)("div",{className:"relative flex-1",children:[(0,o.jsx)("input",{className:"w-full rounded-lg border border-zinc-200 bg-white pl-4 pr-10 py-2.5 text-sm font-medium outline-none transition-all placeholder:font-normal focus:border-violet-500 focus:ring-2 focus:ring-violet-500/10 dark:border-zinc-700 dark:bg-zinc-900",placeholder:`Option ${R+1}`,value:_,autoFocus:R===p.options.length-1,onChange:S=>z(R,S.target.value)}),(0,o.jsxs)("span",{className:"pointer-events-none absolute right-3 top-1/2 -translate-y-1/2 text-[10px] font-bold text-zinc-300",children:[_.length,"/25"]})]}),p.options.length>2&&(0,o.jsx)("button",{type:"button",onClick:()=>y(R),className:"rounded-lg p-2.5 text-zinc-400 transition-colors hover:bg-rose-50 hover:text-rose-500 dark:hover:bg-rose-900/20",children:(0,o.jsx)(Gr,{size:18})})]},R))}),p.options.length<4&&(0,o.jsx)("button",{type:"button",onClick:v,className:"w-full rounded-lg border border-dashed border-violet-200 py-2.5 text-sm font-bold text-violet-600 transition-all hover:bg-violet-100 dark:border-violet-800 dark:text-violet-400 dark:hover:bg-violet-900/30",children:"+ Add option"}),(0,o.jsxs)("div",{className:"flex items-center gap-2 px-1 pt-1",children:[(0,o.jsx)("span",{className:"text-[10px] font-medium text-zinc-500",children:"Poll ends in"}),(0,o.jsxs)("select",{className:"cursor-pointer bg-transparent text-[10px] font-bold text-zinc-700 outline-none hover:text-violet-600 dark:text-zinc-300",value:p.duration,onChange:_=>x({...p,duration:_.target.value}),children:[(0,o.jsx)("option",{value:"1 day",children:"1 day"}),(0,o.jsx)("option",{value:"3 days",children:"3 days"}),(0,o.jsx)("option",{value:"7 days",children:"7 days"})]})]})]})]})]})})},Hm=Bm,Wm=({isOpen:r,onClose:e,editProfileData:t,setEditProfileData:n})=>{const{updateProfile:s}=Xe(),{addToast:a}=ut(),[i,l]=(0,g.useState)(!1),[d,m]=(0,g.useState)(null),[u,c]=(0,g.useState)(null),f=(0,g.useRef)(null),h=(0,g.useRef)(null),p=(j,b)=>{const C=j.target.files?.[0];C&&(b==="avatar"?m(C):c(C))},x=async()=>{l(!0);try{let j=t.avatar,b=t.cover;d&&(j=(await wt(d)).url),u&&(b=(await wt(u)).url),await s({...t,avatar:j,cover:b}),m(null),c(null),e(),a("Profile updated!")}catch(j){console.error("Failed to update profile:",j),a("Failed to update profile.","error")}finally{l(!1)}};return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(zt,{isOpen:r,onClose:()=>!i&&e(),title:"Edit Profile",children:(0,o.jsxs)("div",{className:"space-y-6",children:[(0,o.jsx)("input",{type:"file",ref:h,className:"hidden",accept:"image/*",onChange:j=>p(j,"cover")}),(0,o.jsx)("input",{type:"file",ref:f,className:"hidden",accept:"image/*",onChange:j=>p(j,"avatar")}),(0,o.jsxs)("div",{className:"group relative h-32 cursor-pointer overflow-hidden rounded-xl bg-zinc-100 dark:bg-zinc-800",onClick:()=>h.current?.click(),children:[(u||t?.cover)&&(0,o.jsx)("img",{src:u?URL.createObjectURL(u):t.cover,className:"h-full w-full object-cover opacity-60",alt:""}),(0,o.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,o.jsx)("div",{className:"rounded-full bg-black/50 p-2 text-white transition-transform group-hover:scale-110",children:(0,o.jsx)(Xt,{size:20})})})]}),(0,o.jsx)("div",{className:"relative -mt-16 ml-4",children:(0,o.jsxs)("div",{className:"group relative size-24 cursor-pointer overflow-hidden rounded-full border-4 border-white bg-white shadow-lg dark:border-black dark:bg-black",onClick:()=>f.current?.click(),children:[(d||t?.avatar)&&(0,o.jsxs)(Ve,{className:"size-full rounded-none opacity-60",children:[(0,o.jsx)(Qe,{src:d?URL.createObjectURL(d):t.avatar,className:"object-cover"}),(0,o.jsx)(Ye,{children:t?.handle?.[0]?.toUpperCase()})]}),(0,o.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,o.jsx)("div",{className:"rounded-full bg-black/50 p-2 text-white transition-transform group-hover:scale-110",children:(0,o.jsx)(Xt,{size:16})})})]})}),(0,o.jsxs)("div",{className:"space-y-4",children:[(0,o.jsx)(gt,{label:"Name",value:t?.name||"",onChange:j=>n({...t,name:j.target.value})}),(0,o.jsx)(gt,{label:"Bio",textarea:!0,value:t?.bio||"",onChange:j=>n({...t,bio:j.target.value})}),(0,o.jsx)(gt,{label:"Location",value:t?.location||"",onChange:j=>n({...t,location:j.target.value})}),(0,o.jsx)(gt,{label:"Website",value:t?.website||"",onChange:j=>n({...t,website:j.target.value})})]}),(0,o.jsx)(Ie,{className:"w-full py-3",loading:i,onClick:x,children:"Save changes"})]})})})},Vm=Wm,Qm=ne(),Km=r=>{const e=(0,Qm.c)(22),{isPostModalOpen:t,setIsPostModalOpen:n,isEditProfileOpen:s,setIsEditProfileOpen:a,isStoryModalOpen:i,setIsStoryModalOpen:l,editProfileData:d,setEditProfileData:m,postCommunity:u}=r;let c;e[0]!==n?(c=()=>n(!1),e[0]=n,e[1]=c):c=e[1];let f;e[2]!==t||e[3]!==u||e[4]!==c?(f=(0,o.jsx)(Hm,{isOpen:t,onClose:c,initialCommunity:u}),e[2]=t,e[3]=u,e[4]=c,e[5]=f):f=e[5];let h;e[6]!==a?(h=()=>a(!1),e[6]=a,e[7]=h):h=e[7];let p;e[8]!==d||e[9]!==s||e[10]!==m||e[11]!==h?(p=(0,o.jsx)(Vm,{isOpen:s,onClose:h,editProfileData:d,setEditProfileData:m}),e[8]=d,e[9]=s,e[10]=m,e[11]=h,e[12]=p):p=e[12];let x;e[13]!==l?(x=()=>l(!1),e[13]=l,e[14]=x):x=e[14];let j;e[15]!==i||e[16]!==x?(j=(0,o.jsx)(Y0,{isOpen:i,onClose:x}),e[15]=i,e[16]=x,e[17]=j):j=e[17];let b;return e[18]!==f||e[19]!==p||e[20]!==j?(b=(0,o.jsxs)(o.Fragment,{children:[f,p,j]}),e[18]=f,e[19]=p,e[20]=j,e[21]=b):b=e[21],b},Ym=Km,Xm=ne(),Gm=r=>{const e=(0,Xm.c)(91),{story:t,onClose:n}=r,[s,a]=(0,g.useState)(0),[i,l]=(0,g.useState)(0),[d,m]=(0,g.useState)(!1),u=t.stories,c=u[s];let f;e[0]!==s||e[1]!==n||e[2]!==u.length||e[3]!==t.user.id?(f=()=>{s<u.length-1?(a(Jm),l(0)):n(t.user.id)},e[0]=s,e[1]=n,e[2]=u.length,e[3]=t.user.id,e[4]=f):f=e[4];const h=f;let p;e[5]!==s?(p=()=>{s>0&&(a($m),l(0))},e[5]=s,e[6]=p):p=e[6];const x=p;let j;e[7]===Symbol.for("react.memo_cache_sentinel")?(j=re=>{re.stopPropagation(),m(eh)},e[7]=j):j=e[7];const b=j;let C;e[8]!==h||e[9]!==d?(C=()=>{if(d)return;const re=setInterval(()=>{l(te=>te>=100?(h(),100):te+1)},50);return()=>clearInterval(re)},e[8]=h,e[9]=d,e[10]=C):C=e[10];let E;e[11]!==s||e[12]!==h||e[13]!==d?(E=[h,s,d],e[11]=s,e[12]=h,e[13]=d,e[14]=E):E=e[14],(0,g.useEffect)(C,E);let A;if(e[15]!==s||e[16]!==i||e[17]!==u){let re;e[19]!==s||e[20]!==i?(re=(te,le)=>(0,o.jsx)("div",{className:"h-full flex-1 overflow-hidden rounded-full bg-white/30",children:(0,o.jsx)("div",{className:"h-full bg-white transition-all duration-100",style:{width:le<s?"100%":le===s?`${i}%`:"0%"}})},le),e[19]=s,e[20]=i,e[21]=re):re=e[21],A=u.map(re),e[15]=s,e[16]=i,e[17]=u,e[18]=A}else A=e[18];let D;e[22]!==A?(D=(0,o.jsx)("div",{className:"flex h-0.5 w-full gap-1.5 bg-transparent",children:A}),e[22]=A,e[23]=D):D=e[23];const w=`/u/${t.user.handle}`;let M;e[24]!==t.user.avatar||e[25]!==t.user.handle?(M=(0,o.jsx)(Qe,{src:t.user.avatar,alt:t.user.handle,className:"object-cover"}),e[24]=t.user.avatar,e[25]=t.user.handle,e[26]=M):M=e[26];let v;e[27]!==t.user.handle?.[0]?(v=t.user.handle?.[0]?.toUpperCase(),e[27]=t.user.handle?.[0],e[28]=v):v=e[28];let y;e[29]!==v?(y=(0,o.jsx)(Ye,{children:v}),e[29]=v,e[30]=y):y=e[30];let z;e[31]!==y||e[32]!==M?(z=(0,o.jsxs)(Ve,{className:"size-10 border border-white/20 shadow-sm",children:[M,y]}),e[31]=y,e[32]=M,e[33]=z):z=e[33];let T;e[34]!==t.user.handle?(T=(0,o.jsx)("span",{className:"text-sm font-bold text-white shadow-black drop-shadow-md",children:t.user.handle}),e[34]=t.user.handle,e[35]=T):T=e[35];let _;e[36]!==c.created_at?(_=new Date(c.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),e[36]=c.created_at,e[37]=_):_=e[37];let R;e[38]!==_?(R=(0,o.jsx)("span",{className:"text-[10px] text-white/60 shadow-black drop-shadow-md",children:_}),e[38]=_,e[39]=R):R=e[39];let S;e[40]!==T||e[41]!==R?(S=(0,o.jsxs)("div",{className:"flex flex-col",children:[T,R]}),e[40]=T,e[41]=R,e[42]=S):S=e[42];let I;e[43]!==z||e[44]!==S||e[45]!==w?(I=(0,o.jsxs)(cs,{to:w,className:"flex items-center gap-3 transition-opacity hover:opacity-80",onClick:th,children:[z,S]}),e[43]=z,e[44]=S,e[45]=w,e[46]=I):I=e[46];let k;e[47]!==n||e[48]!==t.user.id?(k=()=>n(t.user.id),e[47]=n,e[48]=t.user.id,e[49]=k):k=e[49];let N;e[50]===Symbol.for("react.memo_cache_sentinel")?(N=(0,o.jsx)(kt,{size:24}),e[50]=N):N=e[50];let F;e[51]!==k?(F=(0,o.jsx)("button",{onClick:k,className:"rounded-full p-2 text-white transition-colors hover:bg-white/10",children:N}),e[51]=k,e[52]=F):F=e[52];let P;e[53]!==I||e[54]!==F?(P=(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[I,F]}),e[53]=I,e[54]=F,e[55]=P):P=e[55];let O;e[56]!==P||e[57]!==D?(O=(0,o.jsxs)("div",{className:"absolute left-0 right-0 top-0 z-20 flex flex-col gap-4 p-4",children:[D,P]}),e[56]=P,e[57]=D,e[58]=O):O=e[58];let H;e[59]!==s||e[60]!==x?(H=s>0&&(0,o.jsx)("button",{onClick:re=>{re.stopPropagation(),x()},className:"absolute left-4 z-30 rounded-full bg-black/20 p-2 text-white backdrop-blur-md transition-all hover:bg-black/40 active:scale-90",children:(0,o.jsx)(xs,{size:32})}),e[59]=s,e[60]=x,e[61]=H):H=e[61];let q;e[62]!==c.id||e[63]!==c.media?(q=(0,o.jsx)("img",{src:c.media,className:"h-full max-h-full w-full animate-in fade-in zoom-in-95 object-contain rounded-xl shadow-2xl duration-300",alt:""},c.id),e[62]=c.id,e[63]=c.media,e[64]=q):q=e[64];let B;e[65]!==d?(B=d&&(0,o.jsx)("div",{className:"pointer-events-none absolute inset-0 z-10 flex items-center justify-center",children:(0,o.jsx)("div",{className:"animate-in fade-in zoom-in rounded-full border border-white/10 bg-black/40 px-4 py-2 text-xs font-bold text-white backdrop-blur-md duration-200",children:"PAUSED"})}),e[65]=d,e[66]=B):B=e[66];let U;e[67]!==q||e[68]!==B?(U=(0,o.jsxs)("div",{className:"relative flex h-full w-full items-center justify-center",children:[q,B]}),e[67]=q,e[68]=B,e[69]=U):U=e[69];let L;e[70]!==h?(L=re=>{re.stopPropagation(),h()},e[70]=h,e[71]=L):L=e[71];let Q;e[72]===Symbol.for("react.memo_cache_sentinel")?(Q=(0,o.jsx)(jr,{size:32}),e[72]=Q):Q=e[72];let G;e[73]!==L?(G=(0,o.jsx)("button",{onClick:L,className:"absolute right-4 z-30 rounded-full bg-black/20 p-2 text-white backdrop-blur-md transition-all hover:bg-black/40 active:scale-90",children:Q}),e[73]=L,e[74]=G):G=e[74];let K;e[75]!==x?(K=(0,o.jsx)("div",{className:"w-[30%] cursor-w-resize",onClick:x}),e[75]=x,e[76]=K):K=e[76];let V;e[77]===Symbol.for("react.memo_cache_sentinel")?(V=(0,o.jsx)("div",{className:"flex w-[40%] cursor-pointer items-center justify-center",onClick:b}),e[77]=V):V=e[77];let J;e[78]!==h?(J=(0,o.jsx)("div",{className:"w-[30%] cursor-e-resize",onClick:h}),e[78]=h,e[79]=J):J=e[79];let $;e[80]!==K||e[81]!==J?($=(0,o.jsxs)("div",{className:"absolute inset-0 z-20 flex",children:[K,V,J]}),e[80]=K,e[81]=J,e[82]=$):$=e[82];let Z;e[83]!==H||e[84]!==U||e[85]!==G||e[86]!==$?(Z=(0,o.jsxs)("div",{className:"relative flex h-full w-full max-w-xl items-center justify-center p-2",children:[H,U,G,$]}),e[83]=H,e[84]=U,e[85]=G,e[86]=$,e[87]=Z):Z=e[87];let oe;return e[88]!==O||e[89]!==Z?(oe=(0,o.jsxs)("div",{className:"fixed inset-0 z-[100] flex animate-in fade-in flex-col items-center justify-center bg-black duration-300",children:[O,Z]}),e[88]=O,e[89]=Z,e[90]=oe):oe=e[90],oe},Zm=Gm;function Jm(r){return r+1}function $m(r){return r-1}function eh(r){return!r}function th(r){return r.stopPropagation()}var rh=({type:r,onComplete:e,onSwitch:t})=>{const{login:n,signup:s}=Xe(),{addToast:a}=ut(),[i,l]=(0,g.useState)({name:"",email:"",username:"",password:""}),[d,m]=(0,g.useState)(!1),[u,c]=(0,g.useState)(null),f=async h=>{h.preventDefault(),m(!0),c(null);try{r==="login"?(await n({email:i.email,password:i.password}),a("Welcome back!"),e()):(await s({email:i.email,password:i.password,username:i.username,name:i.name}),a("Confirm Your Email","info"),t())}catch(p){console.error("Auth error:",p),c(p.message||"Authentication failed. Please check your credentials."),a("Authentication failed!","error")}finally{m(!1)}};return(0,o.jsxs)("div",{className:"mx-auto w-full max-w-md animate-in fade-in slide-in-from-bottom-5 duration-300 p-8",children:[(0,o.jsxs)("div",{className:"mb-8 text-center",children:[(0,o.jsx)("div",{className:"mb-4 flex justify-center",children:(0,o.jsx)("div",{className:"rounded-2xl bg-black p-3 shadow-lg text-white dark:bg-white dark:text-black",children:(0,o.jsx)("img",{src:"/logo.webp",alt:"Logo",className:"size-16 rounded-2xl border-2 border-zinc-100 shadow-xl dark:border-zinc-800"})})}),(0,o.jsx)("h2",{className:"mb-2 text-3xl font-extrabold tracking-tight dark:text-white",children:r==="login"?"Welcome back!":"Join Sysm today"}),(0,o.jsx)("p",{className:"font-medium text-zinc-500",children:"The decentralized social network"})]}),u&&(0,o.jsxs)("div",{className:"mb-6 flex items-center gap-3 rounded-xl border border-rose-100 bg-rose-50 p-4 text-sm text-rose-600 dark:border-rose-800 dark:bg-rose-900/20 dark:text-rose-400",children:[(0,o.jsx)(zs,{size:18}),(0,o.jsx)("span",{children:u})]}),(0,o.jsxs)("form",{onSubmit:f,className:"space-y-4",children:[(0,o.jsx)(gt,{label:"Email",type:"email",placeholder:"john@example.com",value:i.email,onChange:h=>l({...i,email:h.target.value}),required:!0}),r==="signup"&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(gt,{label:"Name",placeholder:"John Doe",value:i.name,onChange:h=>l({...i,name:h.target.value}),required:!0}),(0,o.jsx)(gt,{label:"Username",placeholder:"johndoe",value:i.username,onChange:h=>{const p=h.target.value.replace(/[^a-zA-Z0-9_]/g,"");l({...i,username:p})},required:!0})]}),(0,o.jsx)(gt,{label:"Password",type:"password",placeholder:"",value:i.password,onChange:h=>l({...i,password:h.target.value}),required:!0}),(0,o.jsx)(Ie,{type:"submit",className:"mt-6 w-full justify-center py-3 text-lg",loading:d,children:r==="login"?"Log in":"Sign up"})]}),(0,o.jsxs)("div",{className:"mt-8 text-center text-sm",children:[(0,o.jsx)("span",{className:"text-zinc-500",children:r==="login"?"Don't have an account?":"Already have an account?"}),(0,o.jsx)("button",{onClick:t,className:"ml-1 font-bold hover:underline dark:text-white",children:r==="login"?"Sign up":"Log in"})]})]})},nh=rh,Bi=ne(),sh=(0,g.lazy)(()=>xt(()=>import("./Home-DxApmCbN.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10]))),ah=(0,g.lazy)(()=>xt(()=>import("./Explore-di8DLh2c.js"),__vite__mapDeps([11,1,2,3,4,5,6,7,8,9,10]))),ss=(0,g.lazy)(()=>xt(()=>import("./Reels-wH2JoQOA.js"),__vite__mapDeps([12,1,2,3,4,5,6,7,8,9,10]))),as=(0,g.lazy)(()=>xt(()=>import("./Messages-CS4uxxiG.js"),__vite__mapDeps([13,1,2,3,4,5,6,7,10,9]))),ih=(0,g.lazy)(()=>xt(()=>import("./Notifications-DWpDJEfb.js"),__vite__mapDeps([14,1,2,3,4,5,6,10,9]))),oh=(0,g.lazy)(()=>xt(()=>import("./Profile-DoxXdXhk.js"),__vite__mapDeps([15,1,2,3,4,5,6,7,8,9,10]))),lh=(0,g.lazy)(()=>xt(()=>import("./Community-DI-AqQQi.js"),__vite__mapDeps([16,1,2,3,4,5,6,7,8,9,10]))),ch=(0,g.lazy)(()=>xt(()=>import("./PostDetails-DRT9CfhL.js"),__vite__mapDeps([17,1,2,3,4,5,6,7,8,9,10]))),dh=(0,g.lazy)(()=>xt(()=>import("./Settings-QH57BUFK.js"),__vite__mapDeps([18,1,2,3,4,5,6,10,9]))),uh=(0,g.lazy)(()=>xt(()=>import("./HashtagFeed-CALDajbr.js"),__vite__mapDeps([19,1,2,3,4,5,6,9,7,8,10]))),fh=()=>{const r=(0,Bi.c)(1);let e;return r[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)("div",{className:"flex h-screen w-full items-center justify-center",children:(0,o.jsx)(Rt,{size:40,className:"animate-spin text-violet-500"})}),r[0]=e):e=r[0],e};function mh(){const r=(0,Bi.c)(56),e=wr(),{currentUser:t,authMode:n,setAuthMode:s}=Xe(),{darkMode:a}=$r(),{isOpen:i,images:l,currentIndex:d,closeLightbox:m,setIndex:u}=sd(),[c,f]=(0,g.useState)(!1),[h,p]=(0,g.useState)(!1),[x,j]=(0,g.useState)(!1);let b;r[0]===Symbol.for("react.memo_cache_sentinel")?(b={},r[0]=b):b=r[0];const[C,E]=(0,g.useState)(b),[A,D]=(0,g.useState)(null),[w,M]=(0,g.useState)(null);if(n){const Z=a?"dark":"";let oe;r[1]!==s?(oe=()=>s(null),r[1]=s,r[2]=oe):oe=r[2];let re;r[3]!==n||r[4]!==s?(re=()=>s(n==="login"?"signup":"login"),r[3]=n,r[4]=s,r[5]=re):re=r[5];let te;r[6]!==n||r[7]!==oe||r[8]!==re?(te=(0,o.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-white p-4 dark:bg-black",children:(0,o.jsx)(rt,{children:(0,o.jsx)(nh,{type:n,onComplete:oe,onSwitch:re})})}),r[6]=n,r[7]=oe,r[8]=re,r[9]=te):te=r[9];let le;return r[10]!==Z||r[11]!==te?(le=(0,o.jsx)("div",{className:Z,children:te}),r[10]=Z,r[11]=te,r[12]=le):le=r[12],le}let v;r[13]===Symbol.for("react.memo_cache_sentinel")?(v=(0,o.jsx)(il,{}),r[13]=v):v=r[13];let y;r[14]===Symbol.for("react.memo_cache_sentinel")?(y=(0,o.jsx)(fh,{}),r[14]=y):y=r[14];let z;r[15]===Symbol.for("react.memo_cache_sentinel")?(z=(0,o.jsx)(q0,{onPostClick:()=>f(!0)}),r[15]=z):z=r[15];let T;r[16]===Symbol.for("react.memo_cache_sentinel")?(T=(0,o.jsx)(Ke,{path:"/",element:(0,o.jsx)(rt,{children:(0,o.jsx)(sh,{onStoryClick:M,onAddStory:()=>j(!0)})})}),r[16]=T):T=r[16];let _;r[17]===Symbol.for("react.memo_cache_sentinel")?(_=(0,o.jsx)(Ke,{path:"/home",element:(0,o.jsx)(yn,{to:"/",replace:!0})}),r[17]=_):_=r[17];let R;r[18]===Symbol.for("react.memo_cache_sentinel")?(R=(0,o.jsx)(Ke,{path:"/community",element:(0,o.jsx)(rt,{children:(0,o.jsx)(ah,{})})}),r[18]=R):R=r[18];let S;r[19]===Symbol.for("react.memo_cache_sentinel")?(S=(0,o.jsx)(Ke,{path:"/reels",element:(0,o.jsx)(rt,{children:(0,o.jsx)(ss,{})})}),r[19]=S):S=r[19];let I;r[20]===Symbol.for("react.memo_cache_sentinel")?(I=(0,o.jsx)(Ke,{path:"/reels/:id",element:(0,o.jsx)(rt,{children:(0,o.jsx)(ss,{})})}),r[20]=I):I=r[20];let k;r[21]===Symbol.for("react.memo_cache_sentinel")?(k=(0,o.jsx)(Ke,{path:"/messages",element:(0,o.jsx)(rt,{children:(0,o.jsx)(as,{})})}),r[21]=k):k=r[21];let N;r[22]===Symbol.for("react.memo_cache_sentinel")?(N=(0,o.jsx)(Ke,{path:"/settings",element:(0,o.jsx)(rt,{children:(0,o.jsx)(dh,{})})}),r[22]=N):N=r[22];let F;r[23]===Symbol.for("react.memo_cache_sentinel")?(F=(0,o.jsx)(Ke,{path:"/messages/:id",element:(0,o.jsx)(rt,{children:(0,o.jsx)(as,{})})}),r[23]=F):F=r[23];let P;r[24]===Symbol.for("react.memo_cache_sentinel")?(P=(0,o.jsx)(Ke,{path:"/notifications",element:(0,o.jsx)(rt,{children:(0,o.jsx)(ih,{})})}),r[24]=P):P=r[24];let O;r[25]===Symbol.for("react.memo_cache_sentinel")?(O=(0,o.jsx)(Ke,{path:"/post/:id",element:(0,o.jsx)(rt,{children:(0,o.jsx)(ch,{})})}),r[25]=O):O=r[25];let H;r[26]===Symbol.for("react.memo_cache_sentinel")?(H=(0,o.jsx)(Ke,{path:"/c/:handle",element:(0,o.jsx)(rt,{children:(0,o.jsx)(lh,{onPostInCommunity:Z=>{D(Z),f(!0)}})})}),r[26]=H):H=r[26];let q;r[27]===Symbol.for("react.memo_cache_sentinel")?(q=(0,o.jsx)(Ke,{path:"/tags/:tag",element:(0,o.jsx)(rt,{children:(0,o.jsx)(uh,{})})}),r[27]=q):q=r[27];let B;r[28]===Symbol.for("react.memo_cache_sentinel")?(B=(0,o.jsx)(Ke,{path:"/u/:handle",element:(0,o.jsx)(rt,{children:(0,o.jsx)(oh,{onEditProfile:Z=>{E(Z),p(!0)}})})}),r[28]=B):B=r[28];let U;r[29]===Symbol.for("react.memo_cache_sentinel")?(U=(0,o.jsxs)(Ke,{element:z,children:[T,_,R,S,I,k,N,F,P,O,H,q,B,(0,o.jsx)(Ke,{path:"*",element:(0,o.jsx)(yn,{to:"/community"})})]}),r[29]=U):U=r[29];let L;r[30]!==e?(L=(0,o.jsx)(g.Suspense,{fallback:y,children:(0,o.jsx)(Gi,{location:e,children:U},e.pathname)}),r[30]=e,r[31]=L):L=r[31];let Q;r[32]===Symbol.for("react.memo_cache_sentinel")?(Q=Z=>{f(Z),Z||D(null)},r[32]=Q):Q=r[32];let G;r[33]!==C||r[34]!==h||r[35]!==c||r[36]!==x||r[37]!==A?(G=(0,o.jsx)(Ym,{isPostModalOpen:c,setIsPostModalOpen:Q,isEditProfileOpen:h,setIsEditProfileOpen:p,isStoryModalOpen:x,setIsStoryModalOpen:j,editProfileData:C,setEditProfileData:E,postCommunity:A}),r[33]=C,r[34]=h,r[35]=c,r[36]=x,r[37]=A,r[38]=G):G=r[38];let K;r[39]!==w?(K=w&&(0,o.jsx)(Zm,{story:w,onClose:Z=>{if(Z){const oe=JSON.parse(localStorage.getItem("seenStories")||"[]");oe.includes(Z)||localStorage.setItem("seenStories",JSON.stringify([...oe,Z]))}M(null)}}),r[39]=w,r[40]=K):K=r[40];let V;r[41]!==m||r[42]!==d||r[43]!==l||r[44]!==i||r[45]!==u?(V=i&&(0,o.jsx)(Ou,{images:l.map(hh),currentIndex:d,onClose:m,onNavigate:u}),r[41]=m,r[42]=d,r[43]=l,r[44]=i,r[45]=u,r[46]=V):V=r[46];let J;r[47]!==t||r[48]!==e.pathname?(J=t&&e.pathname==="/"&&(0,o.jsx)("button",{onClick:()=>f(!0),className:"group fixed bottom-20 right-5 z-50 flex size-12 cursor-pointer items-center justify-center rounded-full bg-zinc-950 text-white shadow-2xl transition-all hover:scale-110 active:scale-90 dark:bg-white dark:text-zinc-950 md:hidden",title:"Create Post",children:(0,o.jsx)(Xt,{size:28,className:"duration-300 transition-transform group-hover:rotate-90"})}),r[47]=t,r[48]=e.pathname,r[49]=J):J=r[49];let $;return r[50]!==L||r[51]!==G||r[52]!==K||r[53]!==V||r[54]!==J?($=(0,o.jsxs)(ud,{children:[v,L,G,K,V,J]}),r[50]=L,r[51]=G,r[52]=K,r[53]=V,r[54]=J,r[55]=$):$=r[55],$}function hh(r){return typeof r=="string"?r:r.url}var ph=new $i({defaultOptions:{queries:{staleTime:1e3*60*5,gcTime:1e3*60*30,retry:1,refetchOnWindowFocus:!1}}}),is=document.getElementById("root");is&&(0,rl.createRoot)(is).render((0,o.jsx)(g.StrictMode,{children:(0,o.jsx)(cd,{children:(0,o.jsx)(Ji,{client:ph,children:(0,o.jsx)(Qi,{children:(0,o.jsx)(sc,{children:(0,o.jsx)($l,{children:(0,o.jsx)(tc,{children:(0,o.jsx)(Kc,{children:(0,o.jsx)(Wc,{children:(0,o.jsx)(nd,{children:(0,o.jsx)(mh,{})})})})})})})})})})}));export{zd as $,X as $t,n0 as A,Xh as At,dp as B,Yh as Bt,di as C,ep as Ct,hp as D,Gh as Dt,d0 as E,Jh as Et,mp as F,Fh as Ft,Ia as G,Oh as Gt,gt as H,Qh as Ht,Ju as I,Uh as It,Ld as J,Th as Jt,lp as K,kl as Kt,up as L,Kh as Lt,qn as M,qh as Mt,e0 as N,Hh as Nt,s0 as O,Zh as Ot,oi as P,Vh as Pt,kd as Q,wt as Qt,Gu as R,Ih as Rt,Hr as S,$h as St,gp as T,Wl as Tt,cp as U,Bh as Ut,zt as V,Lh as Vt,Ed as W,Wh as Wt,ip as X,wa as Xt,Rd as Y,Mh as Yt,jd as Z,jl as Zt,ui as _,$r as _t,Cp as a,xd as at,vp as b,rp as bt,mi as c,vd as ct,Bn as d,gd as dt,Rh as en,op as et,Hn as f,sp as ft,jp as g,ut as gt,bp as h,Yc as ht,zp as i,W as in,ap as it,pp as j,Ll as jt,i0 as k,Dl as kt,kp as l,pd as lt,yp as m,sd as mt,Ap as n,Eh as nn,Ye as nt,_p as o,bd as ot,wp as p,Ie as pt,qr as q,Dh as qt,Sp as r,Er as rn,Qe as rt,xi as s,md as st,Ep as t,ia as tn,Ve as tt,y0 as u,hd as ut,xp as v,rc as vt,Br as w,tp as wt,m0 as x,Vl as xt,v0 as y,Xe as yt,fp as z,Ph as zt};

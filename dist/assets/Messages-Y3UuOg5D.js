import{a as Ce}from"./rolldown-runtime-BaZ8gS7u.js";import{a as Ee,c as Ae,i as ce,n as ye,r as De,s as Pe}from"./animations-Kp4r2r5F.js";import{_ as Me,c as de}from"./framework-BjssErrK.js";import"./database-CdmW3A7f.js";import{$t as Te,At as Ie,Bn as Ve,Dt as ze,Et as Ge,Hn as Le,Ht as Ne,In as Ue,Ut as Oe,Vn as He,Xt as Fe,an as qe,cr as We,dn as Be,mn as Ke,nn as be,nr as Qe,on as Xe,pn as ke,rn as Ye,rr as Je,sn as Ze,zt as Se}from"./ui-libs-EpJdbQFE.js";import{t as et}from"./media-libs-DyQ6Lt1T.js";import{At as tt,Bt as ve,Dt as st,Et as it,I as rt,Ot as fe,P as at,Tt as lt,Ut as oe,Vt as je,_t as ge,at as nt,c as ct,h as ot,ht as dt,kt as xt,mt,ot as ut,pt as ft,q as he,st as ht,tt as Re,vn as _e,xn as $e,yn as P,yt as pt,zt as we}from"./index-BgPgaeYB.js";import{t as gt}from"./VideoPlayer-f0zRuUo8.js";import"./text-processing-C3-PA5LD.js";import{t as bt}from"./rich-text-c1NgX5yM.js";import{t as vt}from"./useAutoResizeTextArea-9iOznvUv.js";var jt=de(),_=Ce(Ae(),1),t=Ce(Pe(),1),wt=_.memo(s=>{const e=(0,jt.c)(52),{conv:i,isSelected:r,isOnline:g,isTyping:v,onClick:n}=s,w=i.isGroup?i.name:i.user?.name||"Unknown User",c=i.isGroup?i.avatar:i.user?.avatar;let o="";try{if(i.created_at){let u;e[0]!==i.created_at?(u=$e(i.created_at),e[0]=i.created_at,e[1]=u):u=e[1],o=u}}catch{o=""}const C=r?"bg-violet-600/10 dark:bg-violet-500/10":"hover:bg-zinc-100 dark:hover:bg-zinc-800/50";let a;e[2]!==C?(a=P("group relative flex w-full cursor-pointer items-center gap-3 rounded-xl p-3 transition-all",C),e[2]=C,e[3]=a):a=e[3];let j;e[4]!==c?(j=(0,t.jsx)(je,{src:c,className:"object-cover"}),e[4]=c,e[5]=j):j=e[5];let k;e[6]!==w[0]?(k=w[0]?.toUpperCase(),e[6]=w[0],e[7]=k):k=e[7];let E;e[8]!==k?(E=(0,t.jsx)(ve,{className:"bg-gradient-to-br from-violet-500 to-fuchsia-600 text-white text-lg font-bold",children:k}),e[8]=k,e[9]=E):E=e[9];let M;e[10]!==j||e[11]!==E?(M=(0,t.jsxs)(we,{className:"h-12 w-12 border border-zinc-200 dark:border-zinc-800",children:[j,E]}),e[10]=j,e[11]=E,e[12]=M):M=e[12];let N;e[13]!==i.isGroup||e[14]!==g?(N=g&&!i.isGroup&&(0,t.jsx)("span",{className:"absolute bottom-0 right-0 h-3.5 w-3.5 rounded-full border-[2px] border-white bg-emerald-500 ring-0 dark:border-zinc-950"}),e[13]=i.isGroup,e[14]=g,e[15]=N):N=e[15];let d;e[16]!==M||e[17]!==N?(d=(0,t.jsxs)("div",{className:"relative shrink-0",children:[M,N]}),e[16]=M,e[17]=N,e[18]=d):d=e[18];const A=r?"text-violet-900 dark:text-violet-100":"text-zinc-900 dark:text-zinc-100";let R;e[19]!==A?(R=P("truncate text-[15px] font-semibold",A),e[19]=A,e[20]=R):R=e[20];let T;e[21]!==w||e[22]!==R?(T=(0,t.jsx)("h4",{className:R,children:w}),e[21]=w,e[22]=R,e[23]=T):T=e[23];let y;e[24]!==o?(y=(0,t.jsx)("span",{className:"text-[11px] font-medium text-zinc-400 dark:text-zinc-500 shrink-0",children:o}),e[24]=o,e[25]=y):y=e[25];let x;e[26]!==T||e[27]!==y?(x=(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[T,y]}),e[26]=T,e[27]=y,e[28]=x):x=e[28];let S;e[29]!==i.currentUserSent||e[30]!==i.isGroup||e[31]!==i.lastMessage||e[32]!==i.lastMessageSender||e[33]!==i.unread||e[34]!==v?(S=(0,t.jsx)("div",{className:"flex-1 min-w-0 flex items-center gap-1",children:v?(0,t.jsx)("p",{className:"truncate text-[13px] leading-relaxed text-violet-600 dark:text-violet-400 font-medium italic",children:"Typing..."}):(0,t.jsxs)("p",{className:P("truncate text-[13px] leading-relaxed",i.unread>0?"font-semibold text-zinc-900 dark:text-zinc-100":"text-zinc-500 dark:text-zinc-400"),children:[i.lastMessageSender&&i.isGroup&&(0,t.jsxs)("span",{className:"mr-1 font-medium",children:[i.lastMessageSender,":"]}),i.currentUserSent&&(0,t.jsx)("span",{className:"mr-1",children:"You:"}),i.lastMessage||"Start a conversation"]})}),e[29]=i.currentUserSent,e[30]=i.isGroup,e[31]=i.lastMessage,e[32]=i.lastMessageSender,e[33]=i.unread,e[34]=v,e[35]=S):S=e[35];let m;e[36]!==i.unread?(m=i.unread>0&&(0,t.jsx)("span",{className:"flex h-5 w-auto min-w-[20px] items-center justify-center rounded-full bg-violet-600 px-1.5 text-[10px] font-bold text-white shadow-sm ring-1 ring-violet-500 dark:bg-violet-500",children:i.unread}),e[36]=i.unread,e[37]=m):m=e[37];let z;e[38]!==S||e[39]!==m?(z=(0,t.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[S,m]}),e[38]=S,e[39]=m,e[40]=z):z=e[40];let l;e[41]!==x||e[42]!==z?(l=(0,t.jsxs)("div",{className:"flex min-w-0 flex-1 flex-col justify-center gap-0.5",children:[x,z]}),e[41]=x,e[42]=z,e[43]=l):l=e[43];let f;e[44]!==r?(f=r&&(0,t.jsx)("div",{className:"absolute left-0 top-1/2 h-8 w-1 -translate-y-1/2 rounded-r-full bg-violet-600 dark:bg-violet-500"}),e[44]=r,e[45]=f):f=e[45];let b;return e[46]!==n||e[47]!==l||e[48]!==f||e[49]!==a||e[50]!==d?(b=(0,t.jsxs)("div",{onClick:n,className:a,children:[d,l,f]}),e[46]=n,e[47]=l,e[48]=f,e[49]=a,e[50]=d,e[51]=b):b=e[51],b}),yt=({conversations:s,onSelect:e,selectedId:i,searchQuery:r,onSearchChange:g,onlineUsers:v=new Set,typingStatus:n={}})=>{const w=Me(),[c,o]=(0,_.useState)("all"),C=(0,_.useMemo)(()=>{let a=s;return c==="unread"&&(a=a.filter(j=>j.unread>0)),c==="groups"&&(a=a.filter(j=>j.isGroup)),a},[s,c]);return(0,t.jsxs)("div",{className:"flex h-full w-full flex-col bg-white dark:bg-[#09090b] overflow-hidden",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-4 border-b border-zinc-100 p-4 dark:border-zinc-800/50 shrink-0",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h2",{className:"text-xl font-bold tracking-tight text-zinc-900 dark:text-white",children:"Messages"}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(oe,{variant:"ghost",size:"icon",className:"rounded-full text-zinc-500 dark:text-zinc-400 hover:bg-zinc-100 dark:hover:bg-zinc-800",onClick:()=>w("/create-group"),title:"New Group",children:(0,t.jsx)(ke,{size:20})}),(0,t.jsxs)(mt,{children:[(0,t.jsx)(pt,{asChild:!0,children:(0,t.jsx)(oe,{variant:"ghost",size:"icon",className:"rounded-full text-zinc-500 dark:text-zinc-400 hover:bg-zinc-100 dark:hover:bg-zinc-800",children:(0,t.jsx)(He,{size:20})})}),(0,t.jsxs)(dt,{align:"end",className:"w-48",children:[(0,t.jsxs)(ge,{onClick:()=>o("all"),children:[(0,t.jsx)("span",{children:"All Chats"}),c==="all"&&(0,t.jsx)("span",{className:"ml-auto text-violet-500",children:"✓"})]}),(0,t.jsxs)(ge,{onClick:()=>o("unread"),children:[(0,t.jsx)("span",{children:"Unread"}),c==="unread"&&(0,t.jsx)("span",{className:"ml-auto text-violet-500",children:"✓"})]}),(0,t.jsxs)(ge,{onClick:()=>o("groups"),children:[(0,t.jsx)("span",{children:"Groups"}),c==="groups"&&(0,t.jsx)("span",{className:"ml-auto text-violet-500",children:"✓"})]})]})]})]})]}),(0,t.jsxs)("div",{className:"relative group",children:[(0,t.jsx)(Fe,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-zinc-400 transition-colors group-focus-within:text-violet-500"}),(0,t.jsx)("input",{type:"text",placeholder:"Search messages...",value:r,onChange:a=>g(a.target.value),className:"w-full rounded-2xl border-none bg-zinc-100 py-2.5 pl-9 pr-4 text-sm font-medium text-zinc-900 outline-none placeholder:text-zinc-500 transition-all focus:ring-2 focus:ring-violet-500/20 dark:bg-zinc-900 dark:text-white dark:focus:bg-zinc-800"})]})]}),(0,t.jsx)(Re,{className:"flex-1",children:(0,t.jsxs)("div",{className:"flex flex-col gap-1 p-2",children:[s.length===0&&!r&&(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center gap-2 py-12 text-center",children:[(0,t.jsx)("div",{className:"rounded-full bg-zinc-100 p-4 dark:bg-zinc-800",children:(0,t.jsx)(ke,{size:24,className:"text-zinc-400"})}),(0,t.jsx)("h3",{className:"text-sm font-semibold text-zinc-900 dark:text-white",children:"No messages yet"}),(0,t.jsx)("p",{className:"max-w-[180px] text-xs text-zinc-500",children:"Start a conversation with a friend or create a group."}),(0,t.jsx)(oe,{size:"sm",className:"mt-2 rounded-full bg-violet-600 hover:bg-violet-700 text-white",onClick:()=>w("/explore"),children:"Start New Chat"})]}),s.length>0&&C.length===0&&(0,t.jsx)("div",{className:"py-8 text-center text-sm text-zinc-500",children:"No messages found"}),C.map(a=>(0,t.jsx)(wt,{conv:a,isSelected:i===a.id,isOnline:!a.isGroup&&a.user&&v.has(a.user.id),isTyping:!!n[a.id],onClick:()=>e(a)},a.id))]})})]})},zt=yt,Nt=de(),kt=s=>{const e=(0,Nt.c)(68),{onSendMessage:i,onTyping:r,replyingTo:g,setReplyingTo:v,editingMessage:n,setEditingMessage:w}=s,[c,o]=(0,_.useState)("");let C;e[0]===Symbol.for("react.memo_cache_sentinel")?(C=[],e[0]=C):C=e[0];const[a,j]=(0,_.useState)(C),[k,E]=(0,_.useState)(!1),M=(0,_.useRef)(null),N=(0,_.useRef)(null),d=vt(c),A=lt("(min-width: 768px)");let R,T;e[1]!==n||e[2]!==v||e[3]!==d?(R=()=>{n&&(o(n.text),v(null),d.current&&d.current.focus())},T=[n,v,d],e[1]=n,e[2]=v,e[3]=d,e[4]=R,e[5]=T):(R=e[4],T=e[5]),_.useEffect(R,T);const{isRecording:y,recordingTime:x,startRecording:S,stopRecording:m,cancelRecording:z,audioBlob:l,audioUrl:f,clearAudio:b}=ot(),[u,h]=(0,_.useState)(!1),p=(0,_.useRef)(null),ie=_t,Y=(0,_.useRef)(0);let re;e[6]!==r?(re=$=>{const I=$.target.value;if(o(I),r){const q=Date.now();q-Y.current>3e3&&(r(!0),Y.current=q),N.current&&clearTimeout(N.current),N.current=setTimeout(()=>{r(!1),Y.current=0},2e3)}},e[6]=r,e[7]=re):re=e[7];const J=re;let W;e[8]!==a||e[9]!==l||e[10]!==b||e[11]!==A||e[12]!==i||e[13]!==r||e[14]!==x||e[15]!==c||e[16]!==d?(W=$=>{if($&&$.preventDefault(),l){i("",[],l,x),b();return}!c.trim()&&a.length===0||(r&&(N.current&&clearTimeout(N.current),r(!1)),i(c,a),o(""),j([]),setTimeout(()=>{A?d.current?.focus():d.current?.blur()},10))},e[8]=a,e[9]=l,e[10]=b,e[11]=A,e[12]=i,e[13]=r,e[14]=x,e[15]=c,e[16]=d,e[17]=W):W=e[17];const Z=W;let ae;e[18]!==f||e[19]!==u?(ae=()=>{f&&(p.current||(p.current=new Audio(f),p.current.onended=()=>h(!1)),u?p.current.pause():p.current.play(),h(!u))},e[18]=f,e[19]=u,e[20]=ae):ae=e[20];const ee=ae;let B,K;e[21]!==l?(B=()=>{!l&&p.current&&(p.current.pause(),p.current=null,h(!1))},K=[l],e[21]=l,e[22]=B,e[23]=K):(B=e[22],K=e[23]),_.useEffect(B,K);let xe;e[24]===Symbol.for("react.memo_cache_sentinel")?(xe=$=>{if(!$.target.files)return;const I=Array.from($.target.files);j(q=>[...q,...I])},e[24]=xe):xe=e[24];const me=xe;let V;e[25]!==a?(V=a.length>0&&(0,t.jsx)(ce.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},exit:{y:20,opacity:0},className:"flex gap-2 overflow-x-auto mx-auto mb-2 px-2 py-2 bg-white dark:bg-[#212121] rounded-2xl shadow-lg border border-zinc-100 dark:border-zinc-800 w-full max-w-3xl no-scrollbar",children:a.map(($,I)=>(0,t.jsxs)("div",{className:"relative size-20 shrink-0 rounded-xl overflow-hidden border border-zinc-200 dark:border-zinc-700 group",children:[$.type.startsWith("video/")?(0,t.jsx)("div",{className:"size-full bg-black flex items-center justify-center",children:(0,t.jsx)(be,{size:20,className:"text-white opacity-50"})}):(0,t.jsx)("img",{src:URL.createObjectURL($),className:"size-full object-cover"}),(0,t.jsx)("button",{type:"button",onClick:()=>j(q=>q.filter((ne,le)=>le!==I)),className:"absolute top-1 right-1 size-6 flex items-center justify-center rounded-full bg-black/50 text-white hover:bg-black/70 transition-colors",children:(0,t.jsx)(ze,{size:14})})]},I))}),e[25]=a,e[26]=V):V=e[26];let G;e[27]!==n||e[28]!==g||e[29]!==w||e[30]!==v?(G=(g||n)&&(0,t.jsxs)(ce.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},exit:{y:20,opacity:0},className:"flex items-center justify-between mx-auto mb-1.5 px-4 py-2 bg-white dark:bg-[#212121] rounded-2xl shadow-lg border border-zinc-100 dark:border-zinc-800 w-full max-w-3xl",children:[(0,t.jsxs)("div",{className:"text-sm flex items-center gap-3 min-w-0",children:[(0,t.jsx)("div",{className:"size-8 flex items-center justify-center rounded-full bg-violet-500/10 text-violet-500",children:n?(0,t.jsx)(qe,{size:16}):(0,t.jsx)(Te,{size:16})}),(0,t.jsxs)("div",{className:"min-w-0",children:[(0,t.jsx)("span",{className:"text-[13px] font-bold text-violet-500 block leading-tight",children:n?"Edit Message":`Reply to ${g.sender==="me"?"yourself":g.senderName}`}),(0,t.jsx)("p",{className:"truncate text-xs text-zinc-500 dark:text-[#aaaaaa]",children:n?n.text:g.text})]})]}),(0,t.jsx)("button",{onClick:()=>{v(null),w(null),n&&o("")},className:"p-1 rounded-full hover:bg-zinc-100 dark:hover:bg-white/10",children:(0,t.jsx)(ze,{size:18,className:"text-zinc-400"})})]}),e[27]=n,e[28]=g,e[29]=w,e[30]=v,e[31]=G):G=e[31];let te;e[32]!==V||e[33]!==G?(te=(0,t.jsxs)(Ee,{children:[V,G]}),e[32]=V,e[33]=G,e[34]=te):te=e[34];const se=(y||l)&&"bg-zinc-900 ring-red-500/50";let L;e[35]!==se?(L=P("flex-1 min-w-0 flex items-center gap-1 rounded-[24px] px-1.5 py-1.5 transition-all bg-white dark:bg-[#212121] shadow-md border-0 ring-1 ring-zinc-200 dark:ring-zinc-800 focus-within:ring-violet-500/30",se),e[35]=se,e[36]=L):L=e[36];let U;e[37]!==l||e[38]!==z||e[39]!==b||e[40]!==Z||e[41]!==J||e[42]!==k||e[43]!==u||e[44]!==y||e[45]!==x||e[46]!==c||e[47]!==d||e[48]!==ee?(U=y?(0,t.jsxs)("div",{className:"flex-1 flex items-center gap-4 px-3 py-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(ce.div,{animate:{scale:[1,1.2,1]},transition:{repeat:1/0},className:"size-2 rounded-full bg-red-500"}),(0,t.jsx)("span",{className:"text-[15px] font-medium tabular-nums text-red-500",children:ie(x)})]}),(0,t.jsx)("div",{className:"flex-1 text-center text-sm text-zinc-500",children:"Recording..."}),(0,t.jsx)("button",{type:"button",onClick:z,className:"p-2 text-zinc-400 hover:text-red-500",children:(0,t.jsx)(Se,{size:20})})]}):l?(0,t.jsxs)("div",{className:"flex-1 flex items-center gap-3 px-3 py-1",children:[(0,t.jsx)("button",{type:"button",onClick:ee,className:"size-10 flex items-center justify-center rounded-full bg-[#8774e1] text-white",children:u?(0,t.jsx)(Ne,{size:16,fill:"currentColor"}):(0,t.jsx)(be,{size:20,fill:"currentColor",className:"ml-0.5"})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("div",{className:"h-1 bg-zinc-800 rounded-full overflow-hidden",children:(0,t.jsx)(ce.div,{initial:{width:0},animate:{width:u?"100%":"0%"},transition:{duration:x,ease:"linear"},className:"h-full bg-[#8774e1]"})}),(0,t.jsxs)("div",{className:"flex justify-between mt-1",children:[(0,t.jsx)("span",{className:"text-[10px] text-zinc-500",children:"Voice message"}),(0,t.jsx)("span",{className:"text-[10px] text-zinc-500 tabular-nums",children:ie(x)})]})]}),(0,t.jsx)("button",{type:"button",onClick:b,className:"p-2 text-zinc-400 hover:text-red-500",children:(0,t.jsx)(Se,{size:20})})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(nt,{open:k,onOpenChange:E,children:[(0,t.jsx)(ht,{asChild:!0,children:(0,t.jsx)("button",{type:"button",className:"p-2 text-zinc-400 hover:text-violet-500 dark:text-[#aaaaaa] dark:hover:text-[#8774e1] transition-colors",children:(0,t.jsx)(Oe,{size:24})})}),(0,t.jsx)(ut,{className:"p-0 border-none bg-transparent",side:"top",align:"start",children:(0,t.jsx)(ft,{onEmojiSelect:$=>o(I=>I+$.emoji)})})]}),(0,t.jsx)("textarea",{ref:d,value:c,onChange:J,onKeyDown:$=>{$.key==="Enter"&&!$.shiftKey&&($.preventDefault(),Z())},placeholder:"Message",className:"flex-1 bg-transparent border-none outline-none text-[16px] resize-none py-2 px-1 text-zinc-900 dark:text-white placeholder:text-zinc-500 dark:placeholder:text-[#aaaaaa] min-h-[40px] max-h-[200px]",rows:1}),(0,t.jsx)("button",{type:"button",onClick:()=>M.current?.click(),className:"p-2 text-zinc-400 hover:text-violet-500 dark:text-[#aaaaaa] dark:hover:text-[#8774e1] transition-colors",children:(0,t.jsx)(Ze,{size:24,className:"-rotate-45"})})]}),e[37]=l,e[38]=z,e[39]=b,e[40]=Z,e[41]=J,e[42]=k,e[43]=u,e[44]=y,e[45]=x,e[46]=c,e[47]=d,e[48]=ee,e[49]=U):U=e[49];let O;e[50]!==L||e[51]!==U?(O=(0,t.jsx)("div",{className:L,children:U}),e[50]=L,e[51]=U,e[52]=O):O=e[52];let H;e[53]!==a.length||e[54]!==l||e[55]!==Z||e[56]!==y||e[57]!==S||e[58]!==m||e[59]!==c?(H=c.trim()||a.length>0||l?(0,t.jsx)("button",{onClick:Z,className:"size-[50px] shrink-0 flex items-center justify-center rounded-full bg-[#8774e1] text-white shadow-md hover:scale-105 transition-transform",children:(0,t.jsx)(at,{size:24})}):y?(0,t.jsx)("button",{onClick:m,className:"size-[50px] shrink-0 flex items-center justify-center rounded-full bg-red-500 text-white shadow-md hover:scale-105 transition-transform",children:(0,t.jsx)(Ne,{size:20,fill:"currentColor"})}):(0,t.jsx)("button",{onClick:S,className:"size-[50px] shrink-0 flex items-center justify-center rounded-full bg-zinc-200 dark:bg-[#212121] text-zinc-500 dark:text-[#aaaaaa] shadow-md hover:scale-105 transition-transform",children:(0,t.jsx)(Be,{size:24})}),e[53]=a.length,e[54]=l,e[55]=Z,e[56]=y,e[57]=S,e[58]=m,e[59]=c,e[60]=H):H=e[60];let F;e[61]!==O||e[62]!==H?(F=(0,t.jsxs)("div",{className:"flex items-end gap-2 w-full max-w-3xl mx-auto",children:[O,H]}),e[61]=O,e[62]=H,e[63]=F):F=e[63];let Q;e[64]===Symbol.for("react.memo_cache_sentinel")?(Q=(0,t.jsx)("input",{type:"file",ref:M,onChange:me,className:"hidden",multiple:!0,accept:"image/*,video/*"}),e[64]=Q):Q=e[64];let X;return e[65]!==te||e[66]!==F?(X=(0,t.jsxs)("div",{className:"shrink-0 p-2 md:p-3 relative z-50 bg-white dark:bg-[#09090b]",children:[te,F,Q]}),e[65]=te,e[66]=F,e[67]=X):X=e[67],X},St=kt;function _t(s){return`${Math.floor(s/60)}:${(s%60).toString().padStart(2,"0")}`}var Ct=de(),Mt=s=>{const e=(0,Ct.c)(24),{url:i,duration:r,isMe:g}=s,v=(0,_.useRef)(null),n=(0,_.useRef)(null),[w,c]=(0,_.useState)(!1),[o,C]=(0,_.useState)(!1),[a,j]=(0,_.useState)(0),[k,E]=(0,_.useState)(r||0);let M,N;e[0]!==r||e[1]!==g||e[2]!==i?(M=()=>{if(!v.current)return;const p=et.create({container:v.current,waveColor:g?"rgba(255, 255, 255, 0.35)":"rgba(135, 116, 225, 0.25)",progressColor:g?"#ffffff":"#8774e1",cursorColor:"transparent",barWidth:2,barGap:3,barRadius:2,height:28,normalize:!0,url:i});return n.current=p,p.on("ready",()=>{C(!0),r||E(p.getDuration())}),p.on("play",()=>c(!0)),p.on("pause",()=>c(!1)),p.on("finish",()=>{c(!1),p.setTime(0),j(0)}),p.on("audioprocess",()=>j(p.getCurrentTime())),p.on("interaction",()=>j(p.getCurrentTime())),()=>p.destroy()},N=[i,g,r],e[0]=r,e[1]=g,e[2]=i,e[3]=M,e[4]=N):(M=e[3],N=e[4]),(0,_.useEffect)(M,N);let d;e[5]===Symbol.for("react.memo_cache_sentinel")?(d=p=>{p.stopPropagation(),n.current?.playPause()},e[5]=d):d=e[5];const A=d,R=Rt,T=!o,y=g?"bg-white/20 text-white":"bg-[#8774e1] text-white";let x;e[6]!==y?(x=P("size-10 flex shrink-0 items-center justify-center rounded-full transition-all active:scale-90",y),e[6]=y,e[7]=x):x=e[7];let S;e[8]!==w||e[9]!==o?(S=o?w?(0,t.jsx)(Xe,{size:20,fill:"currentColor"}):(0,t.jsx)(be,{size:20,fill:"currentColor",className:"ml-0.5"}):(0,t.jsx)("span",{className:"animate-pulse font-bold",children:"..."}),e[8]=w,e[9]=o,e[10]=S):S=e[10];let m;e[11]!==T||e[12]!==x||e[13]!==S?(m=(0,t.jsx)("button",{type:"button",onClick:A,disabled:T,className:x,children:S}),e[11]=T,e[12]=x,e[13]=S,e[14]=m):m=e[14];let z;e[15]===Symbol.for("react.memo_cache_sentinel")?(z=(0,t.jsx)("div",{className:"h-7 w-full overflow-hidden",children:(0,t.jsx)("div",{ref:v,className:"w-full cursor-pointer"})}),e[15]=z):z=e[15];const l=g?"text-white/80":"text-[#8774e1]";let f;e[16]!==l?(f=P("text-[11px] font-medium mt-0.5 select-none tabular-nums",l),e[16]=l,e[17]=f):f=e[17];const b=w||a>0?R(a):R(k);let u;e[18]!==f||e[19]!==b?(u=(0,t.jsxs)("div",{className:"flex-1 flex flex-col justify-center min-w-0",children:[z,(0,t.jsx)("div",{className:f,children:b})]}),e[18]=f,e[19]=b,e[20]=u):u=e[20];let h;return e[21]!==u||e[22]!==m?(h=(0,t.jsxs)("div",{className:"flex items-center gap-3 py-1 min-w-[220px] md:min-w-[280px]",children:[m,u]}),e[21]=u,e[22]=m,e[23]=h):h=e[23],h},Tt=Mt;function Rt(s){return`${Math.floor(s/60)}:${Math.floor(s%60).toString().padStart(2,"0")}`}var $t=de(),Et=s=>{const e=(0,$t.c)(103),{message:i,isMe:r,isLastInGroup:g,showAvatar:v,onReply:n,onEdit:w,onDelete:c}=s,o=De(0);let C,a;e[0]===Symbol.for("react.memo_cache_sentinel")?(C=[0,-50],a=[0,1],e[0]=C,e[1]=a):(C=e[0],a=e[1]);const j=ye(o,C,a);let k,E;e[2]===Symbol.for("react.memo_cache_sentinel")?(k=[0,-50],E=[.5,1],e[2]=k,e[3]=E):(k=e[2],E=e[3]);const M=ye(o,k,E);let N;e[4]!==i||e[5]!==n?(N=(D,pe)=>{pe.offset.x<-50&&(n(i),window.navigator.vibrate&&window.navigator.vibrate(10))},e[4]=i,e[5]=n,e[6]=N):N=e[6];const d=N;let A;e[7]!==i.updatedAt?(A=new Intl.DateTimeFormat("en-US",{hour:"numeric",minute:"numeric",hour12:!0}).format(new Date(i.updatedAt||Date.now())),e[7]=i.updatedAt,e[8]=A):A=e[8];const R=A,T=r?"justify-end":"justify-start",y=g?"mb-4":"mb-1";let x;e[9]!==T||e[10]!==y?(x=P("group relative flex w-full items-end gap-2 mb-1",T,y),e[9]=T,e[10]=y,e[11]=x):x=e[11];let S,m,z;e[12]===Symbol.for("react.memo_cache_sentinel")?(S={opacity:0,y:10},m={opacity:1,y:0},z={duration:.2},e[12]=S,e[13]=m,e[14]=z):(S=e[12],m=e[13],z=e[14]);let l;e[15]!==j||e[16]!==M?(l={opacity:j,scale:M,right:10},e[15]=j,e[16]=M,e[17]=l):l=e[17];let f;e[18]===Symbol.for("react.memo_cache_sentinel")?(f=(0,t.jsx)(Te,{size:16}),e[18]=f):f=e[18];let b;e[19]!==l?(b=(0,t.jsx)(ce.div,{style:l,className:"absolute top-1/2 -translate-y-1/2 flex items-center justify-center size-8 rounded-full bg-violet-500/20 text-violet-600 dark:text-violet-400 z-0 pointer-events-none",children:f}),e[19]=l,e[20]=b):b=e[20];let u;e[21]===Symbol.for("react.memo_cache_sentinel")?(u={left:-50,right:0},e[21]=u):u=e[21];let h;e[22]!==o?(h={x:o},e[22]=o,e[23]=h):h=e[23];const p=r?"flex-row-reverse":"flex-row";let ie;e[24]!==p?(ie=P("flex max-w-[75%] items-end gap-2 relative z-10",p),e[24]=p,e[25]=ie):ie=e[25];let Y;e[26]!==r||e[27]!==i.senderAvatar||e[28]!==i.senderName||e[29]!==v?(Y=!r&&(0,t.jsx)("div",{className:"w-8 flex-shrink-0",children:v?(0,t.jsx)("img",{src:i.senderAvatar||"/placeholder-avatar.png",alt:i.senderName,className:"size-8 rounded-full object-cover bg-zinc-200 dark:bg-zinc-800"}):(0,t.jsx)("div",{className:"w-8"})}),e[26]=r,e[27]=i.senderAvatar,e[28]=i.senderName,e[29]=v,e[30]=Y):Y=e[30];const re=r?"items-end":"items-start";let J;e[31]!==re?(J=P("flex flex-col min-w-0",re),e[31]=re,e[32]=J):J=e[32];let W;e[33]!==r||e[34]!==i.replyTo?(W=i.replyTo&&(0,t.jsxs)("div",{className:P("mb-1 flex items-center gap-2 rounded-lg bg-zinc-100 px-3 py-2 text-xs text-zinc-500 dark:bg-zinc-800 dark:text-zinc-400 max-w-full truncate opacity-80 hover:opacity-100 cursor-pointer transition-opacity",r?"self-end":"self-start"),children:[(0,t.jsx)("div",{className:"w-0.5 h-full bg-zinc-300 dark:bg-zinc-600 rounded-full"}),(0,t.jsxs)("span",{className:"font-semibold",children:[i.replyTo.senderName,":"]}),(0,t.jsx)("span",{className:"truncate max-w-[150px]",children:i.replyTo.text})]}),e[33]=r,e[34]=i.replyTo,e[35]=W):W=e[35];const Z=r?"rounded-2xl rounded-tr-sm bg-violet-600 text-white dark:bg-violet-600":"rounded-2xl rounded-tl-sm bg-zinc-100 text-zinc-900 dark:bg-zinc-800 dark:text-zinc-100",ae=i.isOptimistic&&"opacity-70";let ee;e[36]!==Z||e[37]!==ae?(ee=P("relative px-4 py-2 text-[15px] leading-relaxed break-words",Z,ae),e[36]=Z,e[37]=ae,e[38]=ee):ee=e[38];let B;e[39]!==r||e[40]!==i.media||e[41]!==i.text?(B=i.media&&i.media.length>0&&(0,t.jsx)("div",{className:P("mb-2 -mx-2 -mt-2 overflow-hidden rounded-xl",i.text?"mb-2":"-mb-2"),children:i.media.map((D,pe)=>(0,t.jsx)("div",{className:"relative",children:D.type==="video"||typeof D.url=="string"&&D.url.endsWith(".mp4")?(0,t.jsx)(gt,{src:D.url}):D.type==="audio"||D.type==="voice"||typeof D.url=="string"&&(D.url.endsWith(".webm")||D.url.endsWith(".mp3"))?(0,t.jsx)("div",{className:"px-2 py-1",children:(0,t.jsx)(Tt,{url:D.url,isMe:r,duration:D.duration})}):D.type==="image"||typeof D.url=="string"&&D.url.match(/\.(jpeg|jpg|gif|png|webp)$/i)?(0,t.jsx)("img",{src:D.url,className:"w-full h-auto object-cover max-h-[300px]",alt:"Attachment"}):(0,t.jsxs)("a",{href:D.url,target:"_blank",rel:"noopener noreferrer",className:P("flex items-center gap-3 p-3 rounded-lg border hover:bg-black/5 transition-colors",r?"border-white/20 bg-white/10":"border-zinc-200 bg-white dark:border-zinc-700 dark:bg-zinc-900"),children:[(0,t.jsx)("div",{className:P("p-2 rounded-full",r?"bg-white/20":"bg-zinc-100 dark:bg-zinc-800"),children:(0,t.jsx)(Ue,{size:20})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("p",{className:"text-sm font-medium truncate",children:D.name||"Attachment"}),(0,t.jsx)("p",{className:"text-xs opacity-70",children:D.size?`${(D.size/1024).toFixed(0)} KB`:"File"})]}),(0,t.jsx)(Le,{size:16,className:"opacity-70"})]})},pe))}),e[39]=r,e[40]=i.media,e[41]=i.text,e[42]=B):B=e[42];let K;e[43]!==i.media||e[44]!==i.type?(K=i.type==="voice"&&(!i.media||i.media.length===0)&&(0,t.jsx)("div",{className:"py-1",children:(0,t.jsx)("p",{className:"text-xs opacity-70 italic",children:"Voice message unavailable"})}),e[43]=i.media,e[44]=i.type,e[45]=K):K=e[45];const xe=i.text,me=r?"text-white":"text-zinc-900 dark:text-zinc-100";let V;e[46]!==me?(V=P(me),e[46]=me,e[47]=V):V=e[47];let G;e[48]!==i.text||e[49]!==V?(G=(0,t.jsx)(bt,{content:xe,className:V}),e[48]=i.text,e[49]=V,e[50]=G):G=e[50];const te=r?"text-white/80":"text-zinc-500 dark:text-zinc-400";let se;e[51]!==te?(se=P("mt-1 flex items-center justify-end gap-1 text-[10px] opacity-70",te),e[51]=te,e[52]=se):se=e[52];let L;e[53]!==R?(L=(0,t.jsx)("span",{children:R}),e[53]=R,e[54]=L):L=e[54];let U;e[55]!==r||e[56]!==i.isRead?(U=r&&(0,t.jsx)("span",{children:i.isRead?(0,t.jsx)(Je,{size:12}):(0,t.jsx)(Qe,{size:12})}),e[55]=r,e[56]=i.isRead,e[57]=U):U=e[57];let O;e[58]!==se||e[59]!==L||e[60]!==U?(O=(0,t.jsxs)("div",{className:se,children:[L,U]}),e[58]=se,e[59]=L,e[60]=U,e[61]=O):O=e[61];let H;e[62]!==ee||e[63]!==B||e[64]!==K||e[65]!==G||e[66]!==O?(H=(0,t.jsx)(tt,{children:(0,t.jsxs)("div",{className:ee,children:[B,K,G,O]})}),e[62]=ee,e[63]=B,e[64]=K,e[65]=G,e[66]=O,e[67]=H):H=e[67];let F;e[68]!==i||e[69]!==n?(F=(0,t.jsx)(fe,{onClick:()=>n(i),children:"Reply"}),e[68]=i,e[69]=n,e[70]=F):F=e[70];let Q;e[71]!==i.text?(Q=i.text&&(0,t.jsx)(fe,{onClick:()=>navigator.clipboard.writeText(i.text),children:"Copy"}),e[71]=i.text,e[72]=Q):Q=e[72];let X;e[73]!==r||e[74]!==i||e[75]!==c||e[76]!==w?(X=r&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(xt,{}),w&&i.type==="text"&&(0,t.jsx)(fe,{onClick:()=>w(i),children:"Edit"}),c&&(0,t.jsx)(fe,{className:"text-red-500 focus:text-red-500",onClick:()=>c(i),children:"Delete"})]}),e[73]=r,e[74]=i,e[75]=c,e[76]=w,e[77]=X):X=e[77];let $;e[78]!==F||e[79]!==Q||e[80]!==X?($=(0,t.jsxs)(st,{className:"w-48",children:[F,Q,X]}),e[78]=F,e[79]=Q,e[80]=X,e[81]=$):$=e[81];let I;e[82]!==H||e[83]!==$?(I=(0,t.jsxs)(it,{children:[H,$]}),e[82]=H,e[83]=$,e[84]=I):I=e[84];let q;e[85]!==r||e[86]!==i.reactions?(q=i.reactions&&i.reactions.length>0&&(0,t.jsx)("div",{className:P("mt-1 flex flex-wrap gap-1",r?"justify-end":"justify-start"),children:i.reactions.map(Dt)}),e[85]=r,e[86]=i.reactions,e[87]=q):q=e[87];let ne;e[88]!==J||e[89]!==W||e[90]!==I||e[91]!==q?(ne=(0,t.jsxs)("div",{className:J,children:[W,I,q]}),e[88]=J,e[89]=W,e[90]=I,e[91]=q,e[92]=ne):ne=e[92];let le;e[93]!==d||e[94]!==h||e[95]!==ie||e[96]!==Y||e[97]!==ne?(le=(0,t.jsxs)(ce.div,{drag:"x",dragConstraints:u,dragElastic:.1,onDragEnd:d,style:h,className:ie,children:[Y,ne]}),e[93]=d,e[94]=h,e[95]=ie,e[96]=Y,e[97]=ne,e[98]=le):le=e[98];let ue;return e[99]!==b||e[100]!==le||e[101]!==x?(ue=(0,t.jsxs)(ce.div,{className:x,initial:S,animate:m,transition:z,children:[b,le]}),e[99]=b,e[100]=le,e[101]=x,e[102]=ue):ue=e[102],ue},At=_.memo(Et);function Dt(s,e){return(0,t.jsx)("span",{className:"px-1.5 py-0.5 text-xs bg-zinc-100 dark:bg-zinc-800 rounded-full border border-zinc-200 dark:border-zinc-700",children:s.emoji},e)}var Pt=de();const It=()=>{const s=(0,Pt.c)(3);let e;s[0]===Symbol.for("react.memo_cache_sentinel")?(e={height:typeof window<"u"?window.innerHeight:0,keyboardOpen:!1,keyboardHeight:0},s[0]=e):e=s[0];const[i,r]=(0,_.useState)(e);let g,v;return s[1]===Symbol.for("react.memo_cache_sentinel")?(g=()=>{if(typeof window>"u"||!window.visualViewport)return;const n=()=>{const w=window.visualViewport,c=window.innerHeight,o=w.height,C=c-o,a=C>150,j=a?C:0;document.documentElement.style.setProperty("--viewport-height",`${o}px`),document.documentElement.style.setProperty("--keyboard-height",`${j}px`),document.documentElement.style.setProperty("--actual-viewport-height",`${o}px`),r({height:o,keyboardOpen:a,keyboardHeight:j}),a&&window.scrollTo(0,0)};return window.visualViewport.addEventListener("resize",n),window.visualViewport.addEventListener("scroll",n),window.addEventListener("resize",n),n(),()=>{window.visualViewport&&(window.visualViewport.removeEventListener("resize",n),window.visualViewport.removeEventListener("scroll",n)),window.removeEventListener("resize",n)}},v=[],s[1]=g,s[2]=v):(g=s[1],v=s[2]),(0,_.useEffect)(g,v),i};var Vt=({conversation:s,messages:e,currentUser:i,onBack:r,onSendMessage:g,onEditMessage:v,onDeleteMessage:n,onToggleReaction:w,onTyping:c,isLoading:o,isTyping:C,isOnline:a})=>{const j=Me(),k=(0,_.useRef)(null),[E,M]=(0,_.useState)(null),[N,d]=(0,_.useState)(null),{height:A,keyboardHeight:R,keyboardOpen:T}=It();(0,_.useEffect)(()=>{T&&k.current&&setTimeout(()=>{k.current?.scrollTo({top:k.current.scrollHeight,behavior:"smooth"})},100)},[T]),(0,_.useEffect)(()=>{k.current&&(k.current.scrollTop=k.current.scrollHeight)},[e.length,C]);const y=s.isGroup?s.name:s.user?.name,x=s.isGroup?s.avatar:s.user?.avatar,S=async(m,z,l,f)=>{if(N){v?.(N.id,m),d(null);return}let b=[],u="text";try{if(z.length>0){const h=await Promise.all(z.map(p=>_e(p)));b=h,u=h[0].type==="video"?"video":"image"}if(l){const h=await _e(new File([l],`voice-${Date.now()}.webm`,{type:"audio/webm"}));b.push(h),u="voice"}}catch(h){console.error("Failed to upload media:",h);return}g(s.id,m,u,b,E?.id),M(null)};return(0,t.jsxs)("div",{className:"flex w-full flex-col bg-white dark:bg-[#09090b] relative overflow-hidden",style:{height:`${A}px`},children:[(0,t.jsxs)("div",{className:"flex shrink-0 items-center justify-between border-b border-zinc-100 bg-white/80 px-4 py-3 backdrop-blur-md dark:border-zinc-800 dark:bg-[#09090b]/80 z-30",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(oe,{variant:"ghost",size:"icon",className:"md:hidden -ml-2",onClick:r,children:(0,t.jsx)(We,{size:20})}),(0,t.jsxs)("div",{className:"relative cursor-pointer",onClick:()=>s.user&&j(`/u/${s.user.handle}`),children:[(0,t.jsxs)(we,{className:"h-10 w-10 border border-zinc-200 dark:border-zinc-800",children:[(0,t.jsx)(je,{src:x}),(0,t.jsx)(ve,{children:y?.[0]})]}),a&&!s.isGroup&&(0,t.jsx)("span",{className:"absolute bottom-0 right-0 h-3 w-3 rounded-full border-[2px] border-white bg-emerald-500 dark:border-zinc-950"})]}),(0,t.jsxs)("div",{className:"flex flex-col cursor-pointer",onClick:()=>s.user&&j(`/u/${s.user.handle}`),children:[(0,t.jsx)("h3",{className:"text-sm font-bold text-zinc-900 dark:text-zinc-100 leading-none",children:y}),(0,t.jsx)("span",{className:"text-xs text-zinc-500 dark:text-zinc-400 mt-0.5",children:s.isGroup?`${s.members?.length||0} members`:a||s.user?.lastSeen&&new Date().getTime()-new Date(s.user.lastSeen).getTime()<6e4?"Active now":s.user?.lastSeen?`Last seen ${$e(s.user.lastSeen)}`:"Offline"})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(oe,{variant:"ghost",size:"icon",className:"text-zinc-500 dark:text-zinc-400",children:(0,t.jsx)(Ye,{size:20})}),(0,t.jsx)(oe,{variant:"ghost",size:"icon",className:"text-zinc-500 dark:text-zinc-400",children:(0,t.jsx)(Ie,{size:20})}),(0,t.jsx)(oe,{variant:"ghost",size:"icon",className:"text-zinc-500 dark:text-zinc-400",children:(0,t.jsx)(Ve,{size:20})})]})]}),(0,t.jsx)(Re,{className:"flex-1 bg-zinc-50/50 dark:bg-[#09090b]",children:(0,t.jsxs)("div",{ref:k,className:"absolute inset-0 overflow-y-auto p-4 flex flex-col gap-1 pb-[100px] md:pb-[100px]",style:{overscrollBehavior:"contain"},children:[e.length===0&&!o&&(0,t.jsxs)("div",{className:"flex h-full flex-col items-center justify-center gap-4 text-center opacity-50",children:[(0,t.jsxs)(we,{className:"h-24 w-24 grayscale opacity-50",children:[(0,t.jsx)(je,{src:x}),(0,t.jsx)(ve,{children:y?.[0]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold",children:"Say hello!"}),(0,t.jsxs)("p",{className:"text-sm",children:["Start the conversation with ",y.split(" ")[0],"."]})]})]}),o&&e.length===0&&(0,t.jsx)("div",{className:"py-10 text-center text-sm text-zinc-500",children:"Loading messages..."}),e.map((m,z)=>{const l=m.sender==="me"||m.sender_id===i.id,f=z===e.length-1||e[z+1]?.sender!==m.sender;return(0,t.jsx)(At,{message:m,isMe:l,isLastInGroup:f,showAvatar:!l&&f,onReply:M,onEdit:l?()=>d(m):void 0,onDelete:l?n:void 0,onReaction:w},m.id||z)}),C&&(0,t.jsx)("div",{className:"flex items-end gap-2 mb-2 ml-10",children:(0,t.jsx)("div",{className:"rounded-2xl bg-zinc-100 px-4 py-3 dark:bg-zinc-800 rounded-tl-sm",children:(0,t.jsx)(rt,{})})})]})}),(0,t.jsx)("div",{className:"fixed bottom-0 left-0 right-0 z-40 bg-white dark:bg-[#09090b] border-t border-zinc-100 dark:border-zinc-800 transition-transform duration-100 ease-out md:absolute md:transform-none",style:{bottom:"calc(env(safe-area-inset-bottom) + var(--keyboard-height, 0px))"},children:(0,t.jsx)("div",{className:"w-full max-w-[1500px] mx-auto md:max-w-none",children:(0,t.jsx)(St,{onSendMessage:S,onTyping:c,replyingTo:E,setReplyingTo:M,editingMessage:N,setEditingMessage:d})})})]})},Gt=Vt,Lt=de();function Ut(){const s=(0,Lt.c)(1);let e;return s[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsx)("div",{className:"flex flex-col",children:[1,2,3,4,5,6].map(Ot)}),s[0]=e):e=s[0],e}function Ot(s){return(0,t.jsxs)("div",{className:"flex items-center gap-3 p-4 border-b border-zinc-50 dark:border-zinc-900",children:[(0,t.jsx)(he,{className:"h-12 w-12 rounded-full"}),(0,t.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)(he,{className:"h-4 w-24 rounded"}),(0,t.jsx)(he,{className:"h-3 w-12 rounded"})]}),(0,t.jsx)(he,{className:"h-3 w-32 rounded"})]})]},s)}var Ht=de(),Ft=()=>{const s=(0,Ht.c)(33),{id:e,currentUser:i,onlineUsers:r,msgSearchQuery:g,setMsgSearchQuery:v,userSearchResults:n,filteredConversations:w,selectedConversation:c,localMessages:o,isConvLoading:C,isMsgLoading:a,currentIsTyping:j,otherUserIsOnline:k,handleStartConversation:E,handleSelectConversation:M,sendMessage:N,editMessage:d,onDeleteMessage:A,onToggleReaction:R,sendTypingStatus:T,typingStatus:y,navigate:x}=ct();if(!i){let h;s[0]===Symbol.for("react.memo_cache_sentinel")?(h=(0,t.jsx)("div",{className:"rounded-3xl bg-zinc-50 p-6 dark:bg-zinc-900",children:(0,t.jsx)(Ge,{size:48,className:"text-zinc-300 dark:text-zinc-600"})}),s[0]=h):h=s[0];let p;return s[1]===Symbol.for("react.memo_cache_sentinel")?(p=(0,t.jsxs)("div",{className:"flex h-[100dvh] flex-col items-center justify-center gap-6 border-zinc-100 bg-white p-8 text-center dark:border-zinc-800 dark:bg-black md:h-[calc(100vh-1.5rem)] md:rounded-2xl md:border",children:[h,(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h3",{className:"text-2xl font-black tracking-tight dark:text-white",children:"Sign in to message"}),(0,t.jsx)("p",{className:"max-w-xs text-zinc-500 font-medium",children:"Join the conversation. Sign up or log in to start chatting."})]})]}),s[1]=p):p=s[1],p}if(C){let h;return s[2]===Symbol.for("react.memo_cache_sentinel")?(h=(0,t.jsx)("div",{className:"flex h-[100dvh] pt-4 md:h-[calc(100vh-1.5rem)] md:rounded-2xl border-zinc-100 bg-white dark:border-zinc-800 dark:bg-black md:border",children:(0,t.jsx)("div",{className:"w-full md:w-[420px]",children:(0,t.jsx)(Ut,{})})}),s[2]=h):h=s[2],h}const S=`flex ${e?"h-[100dvh]":"h-[calc(100dvh-4rem)]"} w-full max-w-full box-border overscroll-none overflow-x-hidden overflow-y-hidden bg-white shadow-2xl shadow-zinc-200/50 dark:border-zinc-800 dark:bg-[#0f0f0f] dark:shadow-none md:h-[calc(100vh-1.5rem)] md:rounded-3xl md:border md:border-zinc-200/50`,m=`flex-col md:flex md:w-[420px] ${c?"hidden":"flex"} h-full min-h-0 min-w-0 flex-1 md:flex-none bg-white dark:bg-[#0f0f0f] border-r border-zinc-100 dark:border-zinc-800 z-10`,z=e??null;let l;s[3]!==w||s[4]!==M||s[5]!==E||s[6]!==g||s[7]!==r||s[8]!==v||s[9]!==z||s[10]!==y||s[11]!==n?(l=(0,t.jsx)(zt,{conversations:w,userResults:n,onSelect:M,onStartNew:E,selectedId:z,searchQuery:g,onSearchChange:v,onlineUsers:r,typingStatus:y}),s[3]=w,s[4]=M,s[5]=E,s[6]=g,s[7]=r,s[8]=v,s[9]=z,s[10]=y,s[11]=n,s[12]=l):l=s[12];let f;s[13]!==m||s[14]!==l?(f=(0,t.jsx)("div",{className:m,children:l}),s[13]=m,s[14]=l,s[15]=f):f=s[15];let b;s[16]!==j||s[17]!==i||s[18]!==d||s[19]!==a||s[20]!==o||s[21]!==x||s[22]!==A||s[23]!==R||s[24]!==k||s[25]!==c||s[26]!==N||s[27]!==T?(b=c?(0,t.jsx)(Gt,{conversation:c,messages:o,currentUser:i,onBack:()=>x("/m"),onSendMessage:N,onEditMessage:d,onDeleteMessage:A,onToggleReaction:R,onTyping:h=>T(c.id,h),isLoading:a,isTyping:!!j,isOnline:!!k}):(0,t.jsxs)("div",{className:"hidden flex-1 flex-col items-center justify-center gap-6 text-zinc-500 md:flex bg-zinc-50/30 dark:bg-zinc-900/10",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"absolute -inset-10 rounded-full bg-violet-500/5 blur-3xl dark:bg-violet-500/10"}),(0,t.jsx)("div",{className:"relative rounded-[2.5rem] bg-white p-10 shadow-xl shadow-zinc-200/50 dark:bg-zinc-900/50 dark:shadow-none ring-1 ring-zinc-100 dark:ring-zinc-800",children:(0,t.jsx)(Ke,{size:80,className:"text-violet-500 stroke-[1.5]"})})]}),(0,t.jsxs)("div",{className:"text-center max-w-sm px-4 space-y-3",children:[(0,t.jsx)("h3",{className:"text-3xl font-black tracking-tighter text-zinc-900 dark:text-white",children:"Your Messages"}),(0,t.jsx)("p",{className:"text-zinc-500 font-medium text-lg",children:"Send private photos and messages to a friend or group."})]})]}),s[16]=j,s[17]=i,s[18]=d,s[19]=a,s[20]=o,s[21]=x,s[22]=A,s[23]=R,s[24]=k,s[25]=c,s[26]=N,s[27]=T,s[28]=b):b=s[28];let u;return s[29]!==S||s[30]!==f||s[31]!==b?(u=(0,t.jsxs)("div",{className:S,children:[f,b]}),s[29]=S,s[30]=f,s[31]=b,s[32]=u):u=s[32],u},ss=Ft;export{ss as default};

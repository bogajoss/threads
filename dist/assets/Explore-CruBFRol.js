import{n as A}from"./rolldown-runtime-2JzG8er9.js";import{E as W,f as J,l as K}from"./framework-BpvJHMsq.js";import"./database-Bte7TL-V.js";import{Gt as D,Qt as F,ft as R,jt as X}from"./ui-libs-ydju28Yg.js";import{H,d as Y,it as Z,l as ee,r as se,s as te,u as Q,v as ae,x as ie}from"./index-B0P19RxL.js";import{r as re,t as B}from"./SEOHead-C-zRWQJc.js";import"./linkify-CvGdyZEF.js";import{s as ne}from"./hooks-DfWcb2bF.js";var le=K(),ve=A(W(),1),s=A(J(),1),oe=()=>{const e=(0,le.c)(54),{addToast:P}=Z(),{currentUser:r,searchQuery:a,setSearchQuery:n,activeTab:i,setActiveTab:T,isCreateModalOpen:E,setIsCreateModalOpen:l,communitiesData:G,isCommunitiesLoading:I,isFetchingMoreCommunities:k,hasMoreCommunities:M,postsData:g,isPostsLoading:N,isFetchingMorePosts:C,hasMorePosts:L,filteredCommunities:z,handleCommunityClick:$,loadCommunities:O,loadPosts:U,navigate:_}=ne();if((I||N)&&!G.length&&!g.length){let t;return e[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,s.jsxs)("div",{className:"border-y md:border border-zinc-100 dark:border-zinc-800 bg-white dark:bg-black rounded-none md:rounded-xl overflow-hidden min-h-screen",children:[(0,s.jsx)(B,{title:"Explore"}),[1,2,3].map(de)]}),e[0]=t):t=e[0],t}const q=a?`Searching for "${a}"`:"Explore Communities & Posts";let o;e[1]!==q?(o=(0,s.jsx)(B,{title:q,description:"Discover new communities, trending posts, and interesting people on Sysm."}),e[1]=q,e[2]=o):o=e[2];let d;e[3]!==n?(d=()=>n(""),e[3]=n,e[4]=d):d=e[4];let c;e[5]!==a||e[6]!==n||e[7]!==d?(c=(0,s.jsx)(ae,{value:a,onChange:n,onClear:d,placeholder:"Search communities or posts...",className:"flex-1"}),e[5]=a,e[6]=n,e[7]=d,e[8]=c):c=e[8];let m;e[9]!==r||e[10]!==l?(m=r&&(0,s.jsx)("button",{onClick:()=>l(!0),className:"size-11 rounded-xl bg-zinc-950 dark:bg-white text-white dark:text-zinc-950 flex items-center justify-center hover:scale-105 active:scale-95 transition-all shadow-sm shrink-0",title:"Create Community",children:(0,s.jsx)(X,{size:22,strokeWidth:3})}),e[9]=r,e[10]=l,e[11]=m):m=e[11];let x;e[12]!==c||e[13]!==m?(x=(0,s.jsxs)("div",{className:"p-4 flex gap-2",children:[c,m]}),e[12]=c,e[13]=m,e[14]=x):x=e[14];let y;e[15]===Symbol.for("react.memo_cache_sentinel")?(y=(0,s.jsxs)(Q,{value:"communities",className:"h-full rounded-none border-b-2 border-transparent data-[state=active]:border-violet-600 data-[state=active]:bg-transparent px-2 font-bold text-zinc-500 data-[state=active]:text-zinc-950 dark:data-[state=active]:text-white transition-all gap-2",children:[(0,s.jsx)(R,{size:18}),"Communities"]}),e[15]=y):y=e[15];let w;e[16]===Symbol.for("react.memo_cache_sentinel")?(w=(0,s.jsxs)(ee,{className:"w-full h-12 bg-transparent p-0 rounded-none border-none gap-8 px-4",children:[y,(0,s.jsxs)(Q,{value:"posts",className:"h-full rounded-none border-b-2 border-transparent data-[state=active]:border-violet-600 data-[state=active]:bg-transparent px-2 font-bold text-zinc-500 data-[state=active]:text-zinc-950 dark:data-[state=active]:text-white transition-all gap-2",children:[(0,s.jsx)(F,{size:18}),"Posts"]})]}),e[16]=w):w=e[16];let u;e[17]!==i||e[18]!==T?(u=(0,s.jsx)("div",{className:"px-1 border-t border-zinc-100 dark:border-zinc-800",children:(0,s.jsx)(te,{value:i,onValueChange:T,className:"w-full",children:w})}),e[17]=i,e[18]=T,e[19]=u):u=e[19];let f;e[20]!==x||e[21]!==u?(f=(0,s.jsxs)("div",{className:"sticky top-0 bg-white/90 dark:bg-black/90 backdrop-blur-md z-10 border-b border-zinc-100 dark:border-zinc-800",children:[x,u]}),e[20]=x,e[21]=u,e[22]=f):f=e[22];let h;e[23]!==i||e[24]!==z||e[25]!==$||e[26]!==M||e[27]!==k||e[28]!==O?(h=i==="communities"&&(0,s.jsxs)("div",{className:"divide-y divide-zinc-100 dark:divide-zinc-800",children:[z.length>0?z.map(t=>(0,s.jsx)(ie,{profile:t,onUserClick:$,isCommunity:!0},t.handle)):(0,s.jsx)("div",{className:"p-20 text-center text-zinc-500",children:(0,s.jsx)("p",{className:"font-bold",children:"No communities found"})}),M&&z.length>0&&(0,s.jsx)("div",{className:"p-6 flex justify-center border-t border-zinc-100 dark:border-zinc-800",children:(0,s.jsxs)(H,{variant:"secondary",className:"w-full max-w-xs",onClick:()=>O(!0),disabled:k,children:[k&&(0,s.jsx)(D,{size:18,className:"animate-spin mr-2"}),"Load more"]})})]}),e[23]=i,e[24]=z,e[25]=$,e[26]=M,e[27]=k,e[28]=O,e[29]=h):h=e[29];let p;e[30]!==i||e[31]!==P||e[32]!==r||e[33]!==L||e[34]!==C||e[35]!==N||e[36]!==U||e[37]!==_||e[38]!==g||e[39]!==a?(p=i==="posts"&&(0,s.jsx)("div",{className:"divide-y divide-zinc-100 dark:divide-zinc-800",children:g.length>0?(0,s.jsxs)(s.Fragment,{children:[g.map(t=>(0,s.jsx)(re,{currentUser:r,showToast:P,...t,onClick:()=>_(`/post/${t.id}`),onUserClick:V=>_(`/u/${V}`)},t.feed_id||t.id)),L&&(0,s.jsx)("div",{className:"p-6 flex justify-center border-t border-zinc-100 dark:border-zinc-800",children:(0,s.jsxs)(H,{variant:"secondary",className:"w-full max-w-xs",onClick:()=>U(!0),disabled:C,children:[C&&(0,s.jsx)(D,{size:18,className:"animate-spin mr-2"}),"Load more"]})})]}):N?(0,s.jsx)("div",{className:"p-20 flex justify-center",children:(0,s.jsx)(D,{className:"animate-spin text-violet-500",size:32})}):(0,s.jsxs)("div",{className:"p-20 text-center text-zinc-500 flex flex-col items-center gap-3",children:[(0,s.jsx)("div",{className:"p-4 bg-zinc-50 dark:bg-zinc-900 rounded-full",children:(0,s.jsx)(F,{size:32,className:"text-zinc-300"})}),(0,s.jsx)("p",{className:"font-bold",children:a?`No posts found matching "${a}"`:"No posts found"})]})}),e[30]=i,e[31]=P,e[32]=r,e[33]=L,e[34]=C,e[35]=N,e[36]=U,e[37]=_,e[38]=g,e[39]=a,e[40]=p):p=e[40];let b;e[41]!==h||e[42]!==p?(b=(0,s.jsxs)("div",{className:"min-h-screen",children:[h,p]}),e[41]=h,e[42]=p,e[43]=b):b=e[43];let v;e[44]!==l?(v=()=>l(!1),e[44]=l,e[45]=v):v=e[45];let j;e[46]!==E||e[47]!==v?(j=(0,s.jsx)(se,{isOpen:E,onClose:v}),e[46]=E,e[47]=v,e[48]=j):j=e[48];let S;return e[49]!==o||e[50]!==b||e[51]!==j||e[52]!==f?(S=(0,s.jsxs)("div",{className:"border-y md:border border-zinc-100 dark:border-zinc-800 bg-white dark:bg-black rounded-none md:rounded-xl overflow-hidden min-h-screen pb-20 shadow-sm",children:[o,f,b,j]}),e[49]=o,e[50]=b,e[51]=j,e[52]=f,e[53]=S):S=e[53],S},je=oe;function de(e){return(0,s.jsx)(Y,{},e)}export{je as default};

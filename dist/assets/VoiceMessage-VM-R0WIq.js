import{a as q}from"./rolldown-runtime-BaZ8gS7u.js";import{E as V,c as G,d as L}from"./framework-CsA6nn9m.js";import{_n as W,in as A,tn as B}from"./ui-libs-DmKhZXsk.js";import{t as F}from"./media-libs-Btb8RX-I.js";import{sn as k}from"./index-BIsGPchL.js";var H=G(),i=q(V(),1),s=q(L(),1),J=p=>{const e=(0,H.c)(29),{url:x,duration:d,isMe:r}=p,j=(0,i.useRef)(null),w=(0,i.useRef)(null),[a,N]=(0,i.useState)(!1),[g,D]=(0,i.useState)(!1),[T,C]=(0,i.useState)(0),[E,$]=(0,i.useState)(d||0);let h,v;e[0]!==d||e[1]!==r||e[2]!==x?(h=()=>{if(!j.current)return;const t=F.create({container:j.current,waveColor:r?"rgba(255, 255, 255, 0.4)":"rgba(139, 92, 246, 0.25)",progressColor:r?"#ffffff":"#8b5cf6",cursorColor:"transparent",barWidth:2,barGap:2,barRadius:1,height:24,normalize:!0,url:x});return w.current=t,t.on("ready",()=>{D(!0),d||$(t.getDuration())}),t.on("play",()=>N(!0)),t.on("pause",()=>N(!1)),t.on("finish",()=>{N(!1),t.setTime(0),C(0)}),t.on("audioprocess",()=>{C(t.getCurrentTime())}),t.on("interaction",()=>{C(t.getCurrentTime())}),()=>{t.destroy()}},v=[x,r,d],e[0]=d,e[1]=r,e[2]=x,e[3]=h,e[4]=v):(h=e[3],v=e[4]),(0,i.useEffect)(h,v);let b;e[5]===Symbol.for("react.memo_cache_sentinel")?(b=t=>{t.stopPropagation(),w.current&&w.current.playPause()},e[5]=b):b=e[5];const I=b,M=K,z=r?"text-white":"text-zinc-900 dark:text-white";let l;e[6]!==z?(l=k("flex items-center gap-2 py-1 px-1 min-w-[200px] md:min-w-[240px]",z),e[6]=z,e[7]=l):l=e[7];const S=!g,P=r?"bg-white/20 hover:bg-white/30 text-white":"bg-violet-500 text-white hover:bg-violet-600";let n;e[8]!==P?(n=k("size-9 flex shrink-0 items-center justify-center rounded-full transition-all duration-200 active:scale-90",P),e[8]=P,e[9]=n):n=e[9];let o;e[10]!==a||e[11]!==g?(o=g?a?(0,s.jsx)(A,{size:18,fill:"currentColor"}):(0,s.jsx)(B,{size:18,fill:"currentColor",className:"ml-0.5"}):(0,s.jsx)(W,{size:16,className:"animate-spin"}),e[10]=a,e[11]=g,e[12]=o):o=e[12];let c;e[13]!==S||e[14]!==n||e[15]!==o?(c=(0,s.jsx)("button",{type:"button",onClick:I,disabled:S,className:n,children:o}),e[13]=S,e[14]=n,e[15]=o,e[16]=c):c=e[16];let y;e[17]===Symbol.for("react.memo_cache_sentinel")?(y=(0,s.jsx)("div",{className:"relative h-6 flex items-center",children:(0,s.jsx)("div",{ref:j,className:"w-full cursor-pointer"})}),e[17]=y):y=e[17];const R=a||T>0?M(T):M(E);let u;e[18]!==R?(u=(0,s.jsx)("span",{className:"text-[11px] font-medium tabular-nums",children:R}),e[18]=R,e[19]=u):u=e[19];let f;e[20]!==a?(f=a&&(0,s.jsxs)("div",{className:"flex gap-[2px]",children:[(0,s.jsx)("div",{className:"size-1 rounded-full bg-current animate-pulse"}),(0,s.jsx)("div",{className:"size-1 rounded-full bg-current animate-pulse delay-75"}),(0,s.jsx)("div",{className:"size-1 rounded-full bg-current animate-pulse delay-150"})]}),e[20]=a,e[21]=f):f=e[21];let m;e[22]!==u||e[23]!==f?(m=(0,s.jsxs)("div",{className:"flex-1 flex flex-col justify-center min-w-0",children:[y,(0,s.jsxs)("div",{className:"flex items-center gap-1.5 mt-0.5 opacity-80 select-none",children:[u,f]})]}),e[22]=u,e[23]=f,e[24]=m):m=e[24];let _;return e[25]!==c||e[26]!==m||e[27]!==l?(_=(0,s.jsxs)("div",{className:l,children:[c,m]}),e[25]=c,e[26]=m,e[27]=l,e[28]=_):_=e[28],_},Z=J;function K(p){return`${Math.floor(p/60)}:${Math.floor(p%60).toString().padStart(2,"0")}`}export{Z as t};

import{a as D}from"./rolldown-runtime-BaZ8gS7u.js";import{E as B,c as H,d as V}from"./framework-CsA6nn9m.js";import"./database-BiY55TQY.js";import{Mt as W,kn as q,nn as G,xn as U}from"./ui-libs-DgSTeYpE.js";import"./media-libs-Btb8RX-I.js";import"./animations-T0TOZv2c.js";import{E as J,I as K,N as R,S as X,T as F,ht as O,o as Y,w as Z}from"./index-Z_5AiLYO.js";import"./VideoPlayer-B2FdhhBP.js";import{n as ee}from"./post-DZl7-Asy.js";import"./text-processing-DFvQvkgt.js";import"./linkify-BIniK2-v.js";import{s as se}from"./hooks-2fjHPTK4.js";var te=H(),be=D(B(),1),s=D(V(),1),ae=()=>{const e=(0,te.c)(50),{currentUser:r,searchQuery:i,setSearchQuery:n,activeTab:a,setActiveTab:M,isCreateModalOpen:P,setIsCreateModalOpen:l,communitiesData:I,isCommunitiesLoading:Q,isFetchingMoreCommunities:g,hasMoreCommunities:S,postsData:j,isPostsLoading:k,isFetchingMorePosts:N,hasMorePosts:T,filteredCommunities:z,handleCommunityClick:E,loadCommunities:L,loadPosts:$,navigate:_}=se();if((Q||k)&&!I.length&&!j.length){let t;return e[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,s.jsx)("div",{className:"min-h-screen overflow-hidden rounded-none border-y border-zinc-100 bg-white dark:bg-black dark:border-zinc-800 md:rounded-xl md:border",children:[1,2,3].map(ie)}),e[0]=t):t=e[0],t}let o;e[1]!==n?(o=()=>n(""),e[1]=n,e[2]=o):o=e[2];let d;e[3]!==i||e[4]!==n||e[5]!==o?(d=(0,s.jsx)(R,{value:i,onChange:n,onClear:o,placeholder:"Search communities or posts...",className:"flex-1"}),e[3]=i,e[4]=n,e[5]=o,e[6]=d):d=e[6];let c;e[7]!==r||e[8]!==l?(c=r&&(0,s.jsx)("button",{onClick:()=>l(!0),className:"flex size-11 shrink-0 items-center justify-center rounded-xl bg-zinc-950 text-white shadow-sm transition-all hover:scale-105 active:scale-95 dark:bg-white dark:text-zinc-950",title:"Create Community",children:(0,s.jsx)(G,{size:22,strokeWidth:3})}),e[7]=r,e[8]=l,e[9]=c):c=e[9];let m;e[10]!==d||e[11]!==c?(m=(0,s.jsxs)("div",{className:"flex gap-2 p-4",children:[d,c]}),e[10]=d,e[11]=c,e[12]=m):m=e[12];let C;e[13]===Symbol.for("react.memo_cache_sentinel")?(C=(0,s.jsxs)(F,{value:"communities",className:"flex h-full gap-2 rounded-none border-b-2 border-transparent px-2 font-bold text-zinc-500 transition-all data-[state=active]:border-violet-600 data-[state=active]:bg-transparent data-[state=active]:text-zinc-950 dark:data-[state=active]:text-white",children:[(0,s.jsx)(W,{size:18}),"Communities"]}),e[13]=C):C=e[13];let y;e[14]===Symbol.for("react.memo_cache_sentinel")?(y=(0,s.jsxs)(Z,{className:"gap-8 rounded-none border-none bg-transparent p-0 px-4 w-full h-12",children:[C,(0,s.jsxs)(F,{value:"posts",className:"flex h-full gap-2 rounded-none border-b-2 border-transparent px-2 font-bold text-zinc-500 transition-all data-[state=active]:border-violet-600 data-[state=active]:bg-transparent data-[state=active]:text-zinc-950 dark:data-[state=active]:text-white",children:[(0,s.jsx)(q,{size:18}),"Posts"]})]}),e[14]=y):y=e[14];let x;e[15]!==a||e[16]!==M?(x=(0,s.jsx)("div",{className:"border-t border-zinc-100 px-1 dark:border-zinc-800",children:(0,s.jsx)(X,{value:a,onValueChange:M,className:"w-full",children:y})}),e[15]=a,e[16]=M,e[17]=x):x=e[17];let u;e[18]!==m||e[19]!==x?(u=(0,s.jsxs)("div",{className:"sticky top-0 z-10 border-b border-zinc-100 bg-white/90 backdrop-blur-md dark:bg-black/90 dark:border-zinc-800",children:[m,x]}),e[18]=m,e[19]=x,e[20]=u):u=e[20];let f;e[21]!==a||e[22]!==z||e[23]!==E||e[24]!==S||e[25]!==g||e[26]!==L?(f=a==="communities"&&(0,s.jsxs)("div",{className:"divide-y divide-zinc-100 dark:divide-zinc-800",children:[z.length>0?z.map(t=>(0,s.jsx)(K,{profile:t,onUserClick:E,isCommunity:!0},t.handle)):(0,s.jsx)("div",{className:"p-20 text-center text-zinc-500",children:(0,s.jsx)("p",{className:"font-bold",children:"No communities found"})}),S&&z.length>0&&(0,s.jsx)("div",{className:"flex justify-center border-t border-zinc-100 p-6 dark:border-zinc-800",children:(0,s.jsxs)(O,{variant:"secondary",className:"w-full",onClick:()=>L(),disabled:g,children:[g&&(0,s.jsx)(U,{size:18,className:"mr-2 animate-spin"}),"Load more"]})})]}),e[21]=a,e[22]=z,e[23]=E,e[24]=S,e[25]=g,e[26]=L,e[27]=f):f=e[27];let h;e[28]!==a||e[29]!==r||e[30]!==T||e[31]!==N||e[32]!==k||e[33]!==$||e[34]!==_||e[35]!==j||e[36]!==i?(h=a==="posts"&&(0,s.jsx)("div",{className:"divide-y divide-zinc-100 dark:divide-zinc-800",children:j.length>0?(0,s.jsxs)(s.Fragment,{children:[j.map(t=>(0,s.jsx)(ee,{currentUser:r,...t,onClick:()=>_(`/p/${t.id}`),onUserClick:A=>_(`/u/${A}`)},t.feed_id||t.id)),T&&(0,s.jsx)("div",{className:"flex justify-center border-t border-zinc-100 p-6 dark:border-zinc-800",children:(0,s.jsxs)(O,{variant:"secondary",className:"w-full max-w-xs",onClick:()=>$(),disabled:N,children:[" ",N&&(0,s.jsx)(U,{size:18,className:"mr-2 animate-spin"}),"Load more"]})})]}):k?(0,s.jsx)("div",{className:"flex justify-center p-20",children:(0,s.jsx)(U,{className:"animate-spin text-violet-500",size:32})}):(0,s.jsxs)("div",{className:"flex flex-col items-center gap-3 p-20 text-center text-zinc-500",children:[(0,s.jsx)("div",{className:"rounded-full bg-zinc-50 p-4 dark:bg-zinc-900",children:(0,s.jsx)(q,{size:32,className:"text-zinc-300"})}),(0,s.jsx)("p",{className:"font-bold",children:i?`No posts found matching "${i}"`:"No posts found"})]})}),e[28]=a,e[29]=r,e[30]=T,e[31]=N,e[32]=k,e[33]=$,e[34]=_,e[35]=j,e[36]=i,e[37]=h):h=e[37];let p;e[38]!==f||e[39]!==h?(p=(0,s.jsxs)("div",{className:"min-h-screen",children:[f,h]}),e[38]=f,e[39]=h,e[40]=p):p=e[40];let b;e[41]!==l?(b=()=>l(!1),e[41]=l,e[42]=b):b=e[42];let v;e[43]!==P||e[44]!==b?(v=(0,s.jsx)(Y,{isOpen:P,onClose:b}),e[43]=P,e[44]=b,e[45]=v):v=e[45];let w;return e[46]!==p||e[47]!==v||e[48]!==u?(w=(0,s.jsxs)("div",{className:"min-h-screen overflow-hidden rounded-none border-y border-zinc-100 bg-white pb-20 shadow-sm dark:bg-black dark:border-zinc-800 md:rounded-xl md:border",children:[u,p,v]}),e[46]=p,e[47]=v,e[48]=u,e[49]=w):w=e[49],w},ve=ae;function ie(e){return(0,s.jsx)(J,{},e)}export{ve as default};

import{a as w}from"./rolldown-runtime-BaZ8gS7u.js";import{c as C,s as S}from"./animations-DZuN0xpW.js";import{_ as $}from"./framework-YRQI4BOE.js";import"./database-Bh-Nv8Zy.js";import{En as D,Rn as v,Ut as I,Wn as T,Xn as N,nr as h,tr as u}from"./ui-libs-dHBs5Tk6.js";import"./media-libs-CqtNZWFg.js";import{$ as g,An as A,Dn as p,Zt as b,at as E,h as F,it as L,nt as M,rt as d,tt as V}from"./index-D583o8jD.js";var k=w(C(),1),e=w(S(),1),P=()=>{const r=$(),{reports:j,actions:c}=F(),[o,z]=(0,k.useState)("all"),[m,f]=(0,k.useState)(null);if(j.isLoading)return(0,e.jsxs)("div",{className:"space-y-4",children:[(0,e.jsxs)("div",{className:"space-y-2",children:[(0,e.jsx)(g,{className:"h-8 w-64"}),(0,e.jsx)(g,{className:"h-4 w-48"})]}),(0,e.jsx)("div",{className:"space-y-3",children:[1,2,3].map(s=>(0,e.jsx)(g,{className:"h-32 rounded-2xl"},s))})]});const l=j.data||[],i=o==="all"?l:l.filter(s=>s.status===o),x={pending:l.filter(s=>s.status==="pending").length,resolved:l.filter(s=>s.status==="resolved").length,dismissed:l.filter(s=>s.status==="dismissed").length},y=s=>{try{const{target_type:t,target_id:a,target_data:n}=s;switch(t?.toLowerCase()){case"post":r(`/p/${a}`);break;case"comment":n?.post_id&&r(`/p/${n.post_id}?highlight=${a}`);break;case"user":r(`/u/${n?.handle||a}`);break;case"community":r(`/c/${a}`);break;case"profile":r(`/u/${n?.handle||a}`);break;default:console.warn("Unknown report type:",t)}}catch(t){console.error("Error navigating to content:",t)}},R=async s=>{if(confirm(`Delete the reported ${s.target_type} and mark as resolved?`)){f(s.id);try{await new Promise(t=>{const a=setTimeout(t,500);return c.deleteTarget({type:s.target_type,id:s.target_id}),()=>clearTimeout(a)}),c.updateReportStatus({reportId:s.id,status:"resolved"})}finally{f(null)}}};return(0,e.jsxs)("div",{className:"space-y-6",children:[(0,e.jsx)("div",{className:"space-y-2",children:(0,e.jsxs)("div",{className:"flex items-center gap-2",children:[(0,e.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-2xl bg-rose-600 text-white",children:(0,e.jsx)(v,{className:"h-5 w-5"})}),(0,e.jsxs)("div",{children:[(0,e.jsx)("h1",{className:"text-2xl font-black tracking-tight",children:"Reports Queue"}),(0,e.jsx)("p",{className:"text-sm text-zinc-500",children:"Monitor and resolve community reported content"})]})]})}),(0,e.jsx)("div",{className:"grid gap-4 sm:grid-cols-3",children:[{label:"Pending",count:x.pending,icon:N,color:"text-amber-600 dark:text-amber-400",bg:"bg-amber-500/10"},{label:"Resolved",count:x.resolved,icon:u,color:"text-emerald-600 dark:text-emerald-400",bg:"bg-emerald-500/10"},{label:"Dismissed",count:x.dismissed,icon:h,color:"text-zinc-600 dark:text-zinc-400",bg:"bg-zinc-500/10"}].map(s=>(0,e.jsx)("div",{className:"rounded-2xl border border-zinc-200 bg-white p-4 dark:border-zinc-800 dark:bg-black",children:(0,e.jsx)("div",{className:"flex items-center justify-between",children:(0,e.jsxs)("div",{className:"flex items-center gap-3",children:[(0,e.jsx)("div",{className:p("rounded-xl p-2",s.bg),children:(0,e.jsx)(s.icon,{className:p("h-5 w-5",s.color)})}),(0,e.jsxs)("div",{children:[(0,e.jsx)("p",{className:"text-xs font-semibold uppercase tracking-wider text-zinc-500",children:s.label}),(0,e.jsx)("p",{className:"text-2xl font-black text-foreground",children:s.count})]})]})})},s.label))}),(0,e.jsxs)("div",{className:"flex items-center justify-between",children:[(0,e.jsxs)("p",{className:"text-sm font-semibold text-zinc-600 dark:text-zinc-400",children:["Showing ",i.length," report",i.length!==1?"s":""]}),(0,e.jsxs)(V,{value:o,onValueChange:z,children:[(0,e.jsx)(L,{className:"w-[150px] rounded-xl border-zinc-200 dark:border-zinc-800",children:(0,e.jsx)(E,{})}),(0,e.jsxs)(M,{className:"rounded-xl dark:bg-zinc-900",children:[(0,e.jsx)(d,{value:"all",children:"All Reports"}),(0,e.jsx)(d,{value:"pending",children:"Pending"}),(0,e.jsx)(d,{value:"resolved",children:"Resolved"}),(0,e.jsx)(d,{value:"dismissed",children:"Dismissed"})]})]})]}),i.length===0?(0,e.jsxs)("div",{className:"flex flex-col items-center justify-center rounded-3xl border border-zinc-200 bg-white py-16 dark:border-zinc-800 dark:bg-black",children:[(0,e.jsx)("div",{className:"rounded-2xl bg-emerald-500/10 p-4",children:(0,e.jsx)(u,{className:"h-8 w-8 text-emerald-600 dark:text-emerald-400"})}),(0,e.jsx)("h3",{className:"mt-4 font-bold text-foreground",children:"Queue is empty"}),(0,e.jsx)("p",{className:"mt-1 text-sm text-zinc-500",children:"Great job! All reports have been cleared."})]}):(0,e.jsx)("div",{className:"space-y-3",children:i.map(s=>(0,e.jsxs)("div",{className:"overflow-hidden rounded-2xl border border-zinc-200 bg-white transition-all hover:border-zinc-300 dark:border-zinc-800 dark:bg-black dark:hover:border-zinc-700",children:[(0,e.jsxs)("div",{className:"flex flex-col gap-4 p-4 sm:flex-row sm:items-start sm:justify-between",children:[(0,e.jsxs)("div",{className:"flex gap-4 min-w-0 flex-1",children:[(0,e.jsx)("div",{className:"relative h-12 w-12 shrink-0",children:(0,e.jsx)("div",{className:"flex h-full w-full items-center justify-center rounded-xl bg-rose-500/10",children:(0,e.jsx)(v,{className:"h-6 w-6 text-rose-600 dark:text-rose-400"})})}),(0,e.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,e.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,e.jsx)("span",{className:"inline-flex items-center gap-1 rounded-lg bg-rose-500/10 px-2.5 py-1 text-xs font-bold uppercase tracking-wider text-rose-700 dark:text-rose-400",children:s.target_type||"unknown"}),(0,e.jsxs)("span",{className:"text-xs text-zinc-500",children:["â€¢ ",A(s.created_at)]})]}),(0,e.jsxs)("h3",{className:"mt-2 truncate font-semibold text-foreground",children:["Report by @",s.reporter?.username||"anonymous"]}),(0,e.jsx)("p",{className:"mt-1 text-sm text-zinc-600 dark:text-zinc-400 line-clamp-2",children:s.reason||"No additional context provided."})]})]}),(0,e.jsx)("div",{className:"flex items-center gap-2 shrink-0",children:(0,e.jsxs)("span",{className:p("inline-flex items-center gap-1 rounded-lg px-3 py-1.5 text-xs font-bold uppercase tracking-wider whitespace-nowrap",s.status==="pending"?"bg-amber-500/10 text-amber-700 dark:text-amber-400":s.status==="resolved"?"bg-emerald-500/10 text-emerald-700 dark:text-emerald-400":"bg-zinc-500/10 text-zinc-700 dark:text-zinc-400"),children:[s.status==="pending"&&(0,e.jsx)(N,{className:"h-3 w-3"}),s.status==="resolved"&&(0,e.jsx)(u,{className:"h-3 w-3"}),s.status==="dismissed"&&(0,e.jsx)(h,{className:"h-3 w-3"}),s.status]})})]}),(0,e.jsx)("div",{className:"border-t border-zinc-200 bg-zinc-50 px-4 py-3 dark:border-zinc-800 dark:bg-zinc-900/50",children:(0,e.jsxs)("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("p",{className:"text-xs font-semibold uppercase tracking-wider text-zinc-500",children:"Target ID"}),(0,e.jsx)("p",{className:"mt-1 font-mono text-sm text-zinc-600 dark:text-zinc-400",children:s.target_id})]}),(0,e.jsxs)(b,{variant:"outline",size:"sm",onClick:()=>y(s),className:"w-full gap-2 rounded-lg sm:w-auto",children:[(0,e.jsx)(T,{className:"h-4 w-4"}),"View Content"]})]})}),s.status==="pending"&&(0,e.jsx)("div",{className:"border-t border-zinc-200 bg-white px-4 py-3 dark:border-zinc-800 dark:bg-black",children:(0,e.jsxs)("div",{className:"flex flex-col gap-3 sm:flex-row sm:justify-end",children:[(0,e.jsxs)(b,{variant:"outline",size:"sm",onClick:()=>c.updateReportStatus({reportId:s.id,status:"dismissed"}),className:"rounded-lg",disabled:m===s.id,children:[(0,e.jsx)(h,{className:"mr-2 h-4 w-4"}),"Dismiss"]}),(0,e.jsx)(b,{size:"sm",onClick:()=>R(s),disabled:m===s.id,className:"rounded-lg bg-rose-600 hover:bg-rose-700",children:m===s.id?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(D,{className:"mr-2 h-4 w-4 animate-spin"}),"Resolving..."]}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(I,{className:"mr-2 h-4 w-4"}),"Resolve"]})})]})})]},s.id))})]})},Z=P;export{Z as default};

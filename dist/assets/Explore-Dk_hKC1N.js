import{o as K}from"./rolldown-runtime-CIzSbf4l.js";import{c as G,l as I,w as O}from"./framework-Np5pfYtm.js";import"./database-COznt_u0.js";import{Nn as B,Nt as R,Zn as H,in as X}from"./ui-libs-BGpjoWQh.js";import"./media-libs-DpUbSbu5.js";import{$ as V,J as ee,K as te,Ut as Q,Y as A,ct as se,dt as J,et as W,f as ie}from"./index-B5ZjMHt1.js";import{r as ae}from"./post-CwrwgnQt.js";import"./text-processing-iAnQJ42V.js";import"./VideoPlayer-w0_neDQh.js";import"./actionsheet-CcuyVjDQ.js";var re=G(),ze=K(O(),1),t=K(I(),1),le=()=>{const e=(0,re.c)(56),{currentUser:l,searchQuery:a,setSearchQuery:n,activeTab:s,setActiveTab:w,communitiesData:Y,isCommunitiesLoading:Z,isFetchingMoreCommunities:U,hasMoreCommunities:P,postsData:v,isPostsLoading:z,isFetchingMorePosts:S,hasMorePosts:$,filteredCommunities:j,usersData:g,isUsersLoading:N,isFetchingMoreUsers:L,hasMoreUsers:M,handleCommunityClick:T,loadCommunities:F,loadPosts:E,loadUsers:q,navigate:r}=ie();if((Z||z||N)&&!Y.length&&!v.length&&!g.length){let i;return e[0]!==s?(i=(0,t.jsx)("div",{className:"min-h-screen bg-background md:rounded-xl",children:s==="posts"?[1,2,3].map(ne):[1,2,3,4,5,6].map(ce)}),e[0]=s,e[1]=i):i=e[1],i}let c;e[2]!==n?(c=()=>n(""),e[2]=n,e[3]=c):c=e[3];let d;e[4]!==a||e[5]!==n||e[6]!==c?(d=(0,t.jsx)(se,{value:a,onChange:n,onClear:c,placeholder:"Search communities or posts...",className:"flex-1"}),e[4]=a,e[5]=n,e[6]=c,e[7]=d):d=e[7];let o;e[8]!==l||e[9]!==r?(o=l&&(0,t.jsx)("button",{onClick:()=>r("/create-community"),className:"flex size-11 shrink-0 items-center justify-center rounded-xl bg-zinc-950 text-white shadow-sm transition-all hover:scale-105 active:scale-95 dark:bg-white dark:text-zinc-950",title:"Create Community",children:(0,t.jsx)(X,{size:22,strokeWidth:3})}),e[8]=l,e[9]=r,e[10]=o):o=e[10];let m;e[11]!==d||e[12]!==o?(m=(0,t.jsxs)("div",{className:"flex gap-2 p-4",children:[d,o]}),e[11]=d,e[12]=o,e[13]=m):m=e[13];let k;e[14]===Symbol.for("react.memo_cache_sentinel")?(k=(0,t.jsx)(A,{value:"communities",className:"flex flex-1 h-full items-center justify-center rounded-none border-b-2 border-transparent font-bold text-zinc-500 transition-all data-[state=active]:border-violet-600 data-[state=active]:bg-transparent data-[state=active]:text-zinc-950 dark:data-[state=active]:text-white",title:"Communities",children:(0,t.jsx)(R,{size:22})}),e[14]=k):k=e[14];let _;e[15]===Symbol.for("react.memo_cache_sentinel")?(_=(0,t.jsx)(A,{value:"posts",className:"flex flex-1 h-full items-center justify-center rounded-none border-b-2 border-transparent font-bold text-zinc-500 transition-all data-[state=active]:border-violet-600 data-[state=active]:bg-transparent data-[state=active]:text-zinc-950 dark:data-[state=active]:text-white",title:"Posts",children:(0,t.jsx)(B,{size:22})}),e[15]=_):_=e[15];let C;e[16]===Symbol.for("react.memo_cache_sentinel")?(C=(0,t.jsxs)(ee,{className:"flex w-full h-12 gap-0 border-none bg-transparent p-0 px-4",children:[k,_,(0,t.jsx)(A,{value:"users",className:"flex flex-1 h-full items-center justify-center rounded-none border-b-2 border-transparent font-bold text-zinc-500 transition-all data-[state=active]:border-violet-600 data-[state=active]:bg-transparent data-[state=active]:text-zinc-950 dark:data-[state=active]:text-white",title:"Users",children:(0,t.jsx)(H,{size:22})})]}),e[16]=C):C=e[16];let x;e[17]!==s||e[18]!==w?(x=(0,t.jsx)("div",{className:"border-t border-zinc-50 px-1 dark:border-zinc-900/50",children:(0,t.jsx)(te,{value:s,onValueChange:w,className:"w-full",children:C})}),e[17]=s,e[18]=w,e[19]=x):x=e[19];let f;e[20]!==m||e[21]!==x?(f=(0,t.jsxs)("div",{className:"sticky top-0 z-10 border-b border-zinc-50 bg-white/90 backdrop-blur-md dark:bg-black/90 dark:border-zinc-900/50",children:[m,x]}),e[20]=m,e[21]=x,e[22]=f):f=e[22];let u;e[23]!==s||e[24]!==j||e[25]!==T||e[26]!==P||e[27]!==U||e[28]!==F?(u=s==="communities"&&(0,t.jsxs)("div",{className:"divide-y divide-zinc-50 dark:divide-zinc-900/50",children:[j.length>0?j.map(i=>(0,t.jsx)(J,{profile:i,onUserClick:T,isCommunity:!0},i.handle)):(0,t.jsx)("div",{className:"p-20 text-center text-zinc-500",children:(0,t.jsx)("p",{className:"font-bold",children:"No communities found"})}),P&&j.length>0&&(0,t.jsx)("div",{className:"flex justify-center border-t border-zinc-50 p-6 dark:border-zinc-900/50",children:(0,t.jsx)(Q,{variant:"secondary",className:"w-full",onClick:()=>F(),loading:U,children:"Load more"})})]}),e[23]=s,e[24]=j,e[25]=T,e[26]=P,e[27]=U,e[28]=F,e[29]=u):u=e[29];let h;e[30]!==s||e[31]!==l||e[32]!==$||e[33]!==S||e[34]!==z||e[35]!==E||e[36]!==r||e[37]!==v||e[38]!==a?(h=s==="posts"&&(0,t.jsx)("div",{className:"divide-y divide-zinc-50 dark:divide-zinc-900/50",children:v.length>0?(0,t.jsxs)(t.Fragment,{children:[v.map(i=>(0,t.jsx)(ae,{currentUser:l,...i,onClick:()=>r(`/p/${i.id}`),onUserClick:D=>r(`/u/${D}`)},i.feed_id||i.id)),$&&(0,t.jsx)("div",{className:"flex justify-center border-t border-zinc-50 p-6 dark:border-zinc-900/50",children:(0,t.jsx)(Q,{variant:"secondary",className:"w-full max-w-xs",onClick:()=>E(),loading:S,children:"Load more"})})]}):z?(0,t.jsx)("div",{className:"flex flex-col",children:[1,2,3].map(de)}):(0,t.jsxs)("div",{className:"flex flex-col items-center gap-3 p-20 text-center text-zinc-500",children:[(0,t.jsx)("div",{className:"rounded-full bg-zinc-50 p-4 dark:bg-zinc-900",children:(0,t.jsx)(B,{size:32,className:"text-zinc-300"})}),(0,t.jsx)("p",{className:"font-bold",children:a?`No posts found matching "${a}"`:"No posts found"})]})}),e[30]=s,e[31]=l,e[32]=$,e[33]=S,e[34]=z,e[35]=E,e[36]=r,e[37]=v,e[38]=a,e[39]=h):h=e[39];let p;e[40]!==s||e[41]!==M||e[42]!==L||e[43]!==N||e[44]!==q||e[45]!==r||e[46]!==a||e[47]!==g?(p=s==="users"&&(0,t.jsx)("div",{className:"divide-y divide-zinc-50 dark:divide-zinc-900/50",children:g.length>0?(0,t.jsxs)(t.Fragment,{children:[g.map(i=>(0,t.jsx)(J,{profile:i,onUserClick:D=>r(`/u/${D}`)},i.id)),M&&(0,t.jsx)("div",{className:"flex justify-center border-t border-zinc-50 p-6 dark:border-zinc-900/50",children:(0,t.jsx)(Q,{variant:"secondary",className:"w-full max-w-xs",onClick:()=>q(),loading:L,children:"Load more"})})]}):N?(0,t.jsx)("div",{className:"flex flex-col",children:[1,2,3,4,5].map(oe)}):(0,t.jsxs)("div",{className:"flex flex-col items-center gap-3 p-20 text-center text-zinc-500",children:[(0,t.jsx)("div",{className:"rounded-full bg-zinc-50 p-4 dark:bg-zinc-900",children:(0,t.jsx)(H,{size:32,className:"text-zinc-300"})}),(0,t.jsx)("p",{className:"font-bold",children:a?`No users found matching "${a}"`:"No users found"})]})}),e[40]=s,e[41]=M,e[42]=L,e[43]=N,e[44]=q,e[45]=r,e[46]=a,e[47]=g,e[48]=p):p=e[48];let b;e[49]!==h||e[50]!==p||e[51]!==u?(b=(0,t.jsxs)("div",{className:"min-h-screen",children:[u,h,p]}),e[49]=h,e[50]=p,e[51]=u,e[52]=b):b=e[52];let y;return e[53]!==b||e[54]!==f?(y=(0,t.jsxs)("div",{className:"min-h-screen bg-white pb-20 dark:bg-black md:rounded-xl",children:[f,b]}),e[53]=b,e[54]=f,e[55]=y):y=e[55],y},Ne=le;function ne(e){return(0,t.jsx)(W,{},e)}function ce(e){return(0,t.jsx)(V,{},e)}function de(e){return(0,t.jsx)(W,{},e)}function oe(e){return(0,t.jsx)(V,{},e)}export{Ne as default};

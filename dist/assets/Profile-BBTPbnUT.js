import{a as oe}from"./rolldown-runtime-BaZ8gS7u.js";import{o as xe,s as me}from"./animations-pEILWrFP.js";import{_ as he,c as fe}from"./framework-di2JoXyY.js";import"./database-CdmW3A7f.js";import{Hn as pe,In as ue,Nn as be,Pt as je,Qt as ge,Zt as ve,cr as ke,fr as ze,lr as ce,yn as we}from"./ui-libs-BQS0dYGn.js";import"./media-libs-D2H42K39.js";import{$ as Ne,A as ye,C as _e,Ct as Fe,E as Ce,Et as Pe,H as Me,J as Se,St as re,T as Te,U as $e,Vt as Ie,_ as Le,d as De,dt as Ee,et as Ue,f as We,ft as Ae,h as Be,it as Oe,j as qe,m as He,nt as ae,p as Re,q as le,rt as Ve,tt as ne,ut as Ge,w as ie,y as Je}from"./index-CzGiwuqh.js";import"./VideoPlayer-CkePO1Gs.js";import"./useAdmin-Drkeb22k.js";import{n as Qe}from"./post-DxFn2Nt7.js";import{t as Xe}from"./text-processing-C6AN5U5A.js";import{t as Ze}from"./linkify-Dip8EVGM.js";import{l as Ke}from"./hooks-CcUilxDg.js";import{t as de}from"./skeleton-profile-Dsnbzjoy.js";var Ye=fe(),es=oe(me(),1),s=oe(xe(),1),ss=({profile:t,currentUser:e,isCurrentUser:O,onEditProfile:V,isCommunity:d,onShowFollowers:Z,onShowFollowing:q})=>{const{addToast:x}=Pe(),h=he(),{openReport:u}=Fe(),[b,f]=(0,es.useState)(!1),{isFollowing:j,stats:c,loading:o,handleFollow:g}=$e(t||{},e?.id);if(!t)return(0,s.jsx)(de,{});const H=async()=>{if(!e){x("Please sign in to message users","info");return}f(!0);try{h(`/m/${await Ie(e.id,t.id)}`)}catch(r){console.error("Failed to start conversation:",r),x("Failed to open chat","error")}finally{f(!1)}};return(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsxs)("div",{className:"relative h-32 w-full bg-zinc-200 dark:bg-zinc-800 sm:h-48",children:[t.cover&&(0,s.jsx)("img",{src:t.cover,className:"h-full w-full object-cover transition-opacity duration-500",alt:"Cover"}),(0,s.jsx)("div",{className:"absolute -bottom-12 left-4 sm:-bottom-16 sm:left-6",children:(0,s.jsx)("div",{className:"relative rounded-full bg-white p-1 shadow-xl ring-4 ring-white dark:bg-black dark:ring-black",children:(0,s.jsxs)(Ge,{className:"size-24 sm:size-32",children:[(0,s.jsx)(Ae,{src:t.avatar,alt:t.handle,className:"object-cover"}),(0,s.jsx)(Ee,{className:"text-4xl font-bold",children:t.handle?.[0]?.toUpperCase()})]})})})]}),(0,s.jsxs)("div",{className:"flex flex-col space-y-4 p-4 pt-16 sm:p-6 sm:pt-20",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsx)("div",{className:"min-w-0 flex-1 pr-4"}),(0,s.jsx)("div",{className:"flex shrink-0 gap-2",children:O?(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:()=>V?.(t),className:"flex size-10 items-center justify-center rounded-full border border-zinc-200 text-zinc-700 transition-all hover:bg-zinc-50 active:scale-95 dark:border-zinc-700 dark:text-zinc-300 dark:hover:bg-zinc-900",title:"Edit Profile",children:(0,s.jsx)(De,{size:20})}),(0,s.jsx)("button",{onClick:()=>h("/settings"),className:"rounded-full border border-zinc-200 p-2 text-zinc-700 transition-all hover:bg-zinc-50 active:scale-95 dark:border-zinc-700 dark:text-zinc-300 dark:hover:bg-zinc-900",title:"Settings",children:(0,s.jsx)(Le,{size:20})})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{onClick:H,disabled:b,className:"rounded-full border border-zinc-200 p-2 text-zinc-700 transition-colors hover:bg-zinc-50 disabled:opacity-50 dark:border-zinc-700 dark:text-zinc-300 dark:hover:bg-zinc-900",children:b?(0,s.jsx)("span",{className:"animate-pulse",children:"..."}):(0,s.jsx)(we,{size:20})}),(0,s.jsx)("button",{className:"rounded-full border border-zinc-200 p-2 text-zinc-700 transition-colors hover:bg-zinc-50 dark:border-zinc-700 dark:text-zinc-300 dark:hover:bg-zinc-900",children:(0,s.jsx)(ke,{size:20})}),(0,s.jsx)(re,{variant:j?"secondary":"primary",onClick:g,className:"flex min-w-0 items-center gap-2 px-4 text-sm sm:min-w-[100px]",disabled:o,children:o?(0,s.jsx)("span",{className:"mx-auto animate-pulse",children:"..."}):j?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(Re,{size:18}),(0,s.jsx)("span",{className:"hidden sm:inline",children:"Following"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(We,{size:18}),(0,s.jsx)("span",{className:"hidden sm:inline",children:"Follow"})]})}),(0,s.jsxs)(Ne,{children:[(0,s.jsx)(Oe,{asChild:!0,children:(0,s.jsx)("button",{className:"rounded-full p-2 text-zinc-700 transition-colors hover:bg-zinc-100 dark:text-zinc-300 dark:hover:bg-zinc-800",children:(0,s.jsx)(pe,{size:20})})}),(0,s.jsxs)(Ue,{align:"end",className:"w-48",children:[(0,s.jsxs)(ne,{children:[(0,s.jsxs)(ae,{className:"cursor-pointer gap-2",onClick:()=>{navigator.clipboard.writeText(window.location.href),x("Profile link copied!")},children:[(0,s.jsx)(ve,{size:16}),"Share Profile"]}),(0,s.jsxs)(ae,{className:"cursor-pointer gap-2",onClick:()=>u(d?"community":"user",t.id),children:[(0,s.jsx)(ue,{size:16}),"Report ",d?"community":"user"]})]}),(0,s.jsx)(Ve,{}),(0,s.jsx)(ne,{children:(0,s.jsxs)(ae,{variant:"destructive",className:"cursor-pointer gap-2",onClick:()=>x("User blocked","info"),children:[(0,s.jsx)(ce,{size:16}),"Block user"]})})]})]})]})})]}),(0,s.jsxs)("div",{className:"space-y-0.5",children:[(0,s.jsxs)("div",{className:"mt-1 flex items-center gap-1.5",children:[(0,s.jsx)("h1",{className:"text-xl font-extrabold text-zinc-900 dark:text-zinc-100",children:t.name}),t.verified&&(0,s.jsx)(Je,{size:20,className:"text-blue-500"}),t.isBanned&&(0,s.jsxs)("span",{className:"flex items-center gap-1 rounded-full bg-rose-100 px-2 py-0.5 text-[10px] font-black uppercase tracking-wider text-rose-600 dark:bg-rose-500/10 dark:text-rose-500",children:[(0,s.jsx)(be,{size:10}),"Banned"]})]}),!d&&(0,s.jsx)("div",{className:"flex items-center space-x-3",children:(0,s.jsxs)("span",{className:"-ml-1.5 rounded-md px-1.5 py-0.5 text-sm font-medium text-zinc-500 dark:text-zinc-400",children:["@",t.handle]})})]}),(0,s.jsx)("div",{className:"whitespace-pre-line text-sm leading-relaxed text-zinc-900 dark:text-zinc-100 sm:text-[15px]",children:(0,s.jsx)(Xe,{options:{...Ze,render:({attributes:r,content:m})=>{const{href:l,...v}=r,k=!l.startsWith("/")&&(l.startsWith("http")||l.startsWith("www"));return l.startsWith("/u/")||l.startsWith("/tags/")||l.startsWith("/c/")||l.startsWith("/explore")?(0,s.jsx)("span",{...v,className:"cursor-pointer font-bold text-rose-500 hover:underline dark:text-rose-400",onClick:R=>{R.stopPropagation(),h(l)},children:m},m):(0,s.jsx)("a",{href:l,...v,target:k?"_blank":void 0,rel:k?"noopener noreferrer":void 0,children:m},m)}},children:t.bio})}),(t.website||t.location)&&(0,s.jsxs)("div",{className:"flex flex-wrap gap-x-5 gap-y-2 pt-1 text-sm",children:[t.location&&(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)(Be,{size:14}),t.location]}),t.website&&(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)(He,{size:14}),(0,s.jsx)("a",{href:`https://${t.website}`,target:"_blank",rel:"noreferrer",className:"font-semibold text-black hover:underline dark:text-white",children:t.website})]})]}),(0,s.jsx)("div",{className:"relative z-10 flex gap-4 pt-2 text-sm sm:gap-6",children:d?(0,s.jsxs)("button",{className:"group flex cursor-pointer gap-x-1",children:[(0,s.jsx)("span",{className:"font-bold text-zinc-900 dark:text-white",children:t.members}),(0,s.jsx)("span",{className:"text-zinc-500 dark:text-zinc-400",children:"Members"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("button",{onClick:r=>{r.preventDefault(),r.stopPropagation(),q()},className:"group flex cursor-pointer gap-x-1",children:[(0,s.jsx)("span",{className:"font-bold text-zinc-900 dark:text-white",children:c.following}),(0,s.jsx)("span",{className:"text-zinc-500 dark:text-zinc-400",children:"Following"})]}),(0,s.jsxs)("button",{onClick:r=>{r.preventDefault(),r.stopPropagation(),Z()},className:"group flex cursor-pointer gap-x-1",children:[(0,s.jsx)("span",{className:"font-bold text-zinc-900 dark:text-white",children:c.followers}),(0,s.jsx)("span",{className:"text-zinc-500 dark:text-zinc-400",children:"Followers"})]})]})})]})]})},ts=ss,as=t=>{const e=(0,Ye.c)(78),{onEditProfile:O}=t,{handle:V,profile:d,loading:Z,activeProfileTab:q,setActiveProfileTab:x,loadingPosts:h,isFetchingMorePosts:u,hasMorePosts:b,filteredPosts:f,isFollowModalOpen:j,setIsFollowModalOpen:c,followModalType:o,followListData:g,isListLoading:H,isFetchingMoreFollows:r,hasMoreFollows:m,openFollowModal:l,fetchNextFollows:v,handlePostClick:k,handleUserClick:R,loadUserPosts:K,currentUser:p,navigate:z}=Ke();if(Z){let a;return e[0]===Symbol.for("react.memo_cache_sentinel")?(a=(0,s.jsx)(de,{}),e[0]=a):a=e[0],a}if(!d){const a=`Try searching for another. The user @${V} could not be found.`;let i;return e[1]!==a?(i=(0,s.jsx)("div",{className:"flex min-h-[600px] items-center justify-center overflow-hidden rounded-none border-zinc-100 bg-white dark:bg-black md:rounded-xl",children:(0,s.jsx)(le,{title:"Account doesn't exist",message:a,icon:je})}),e[1]=a,e[2]=i):i=e[2],i}if(d.isBanned){const a=`The user @${V} has been suspended for violating our community guidelines.`;let i;return e[3]!==a?(i=(0,s.jsx)("div",{className:"flex min-h-[600px] items-center justify-center overflow-hidden rounded-none border-zinc-100 bg-white dark:bg-black md:rounded-xl",children:(0,s.jsx)(le,{title:"This account is banned",message:a,icon:ce})}),e[3]=a,e[4]=i):i=e[4],i}const n=d;let G;e[5]!==p||e[6]!==n.handle||e[7]!==f||e[8]!==k||e[9]!==R||e[10]!==b||e[11]!==u||e[12]!==K||e[13]!==h?(G=a=>{const i=a===void 0?!1:a;return h?(0,s.jsx)("div",{className:"flex flex-col",children:[1,2,3].map(rs)}):f.length>0?(0,s.jsxs)(s.Fragment,{children:[f.map(te=>(0,s.jsx)(Qe,{currentUser:p,...te,onClick:()=>k(te.id),onUserClick:R},te.id)),b&&(0,s.jsx)("div",{className:"flex justify-center p-6",children:(0,s.jsxs)(re,{variant:"secondary",className:"w-full max-w-xs",onClick:()=>K(),disabled:u,children:[u&&(0,s.jsx)("span",{className:"mr-2 animate-pulse",children:"..."}),"Load more posts"]})})]}):i?null:(0,s.jsxs)("div",{className:"flex animate-in fade-in flex-col items-center gap-4 p-20 text-center text-zinc-500 duration-500",children:[(0,s.jsx)("div",{className:"mb-2 rounded-full bg-zinc-50 p-6 ring-1 ring-zinc-100 dark:bg-zinc-900 dark:ring-zinc-800",children:(0,s.jsx)(ge,{size:40,className:"text-zinc-300 dark:text-zinc-700"})}),(0,s.jsx)("h3",{className:"text-xl font-bold dark:text-white",children:"No posts yet"}),(0,s.jsxs)("p",{className:"max-w-[250px] text-sm text-zinc-500 dark:text-zinc-400",children:["When @",n.handle," shares posts, they will appear here."]})]})},e[5]=p,e[6]=n.handle,e[7]=f,e[8]=k,e[9]=R,e[10]=b,e[11]=u,e[12]=K,e[13]=h,e[14]=G):G=e[14];const w=G;let N;e[15]!==z?(N=()=>z(-1),e[15]=z,e[16]=N):N=e[16];let J;e[17]===Symbol.for("react.memo_cache_sentinel")?(J=(0,s.jsx)(ze,{size:22}),e[17]=J):J=e[17];let y;e[18]!==N?(y=(0,s.jsx)("button",{onClick:N,className:"rounded-full p-1 transition-colors hover:bg-zinc-100 dark:text-white dark:hover:bg-zinc-800",children:J}),e[18]=N,e[19]=y):y=e[19];let _;e[20]!==n.name?(_=(0,s.jsx)("h5",{className:"text-lg font-bold leading-none dark:text-white",children:n.name}),e[20]=n.name,e[21]=_):_=e[21];const Y=n.follower_count||0;let F;e[22]!==Y?(F=(0,s.jsxs)("span",{className:"mt-0.5 text-xs text-zinc-500",children:[Y," Followers"]}),e[22]=Y,e[23]=F):F=e[23];let C;e[24]!==_||e[25]!==F?(C=(0,s.jsxs)("div",{className:"flex flex-col",children:[_,F]}),e[24]=_,e[25]=F,e[26]=C):C=e[26];let P;e[27]!==y||e[28]!==C?(P=(0,s.jsx)("div",{className:"sticky top-0 z-20 border-b border-zinc-100 bg-white/90 p-4 py-3 backdrop-blur-md dark:border-zinc-800 dark:bg-black/90 md:hidden",children:(0,s.jsxs)("div",{className:"flex items-center gap-x-4",children:[y,C]})}),e[27]=y,e[28]=C,e[29]=P):P=e[29];const ee=p?.handle===n.handle;let M,S;e[30]!==l?(M=()=>l("Followers"),S=()=>l("Following"),e[30]=l,e[31]=M,e[32]=S):(M=e[31],S=e[32]);let T;e[33]!==p||e[34]!==n||e[35]!==O||e[36]!==ee||e[37]!==M||e[38]!==S?(T=(0,s.jsx)(ts,{profile:n,currentUser:p,isCurrentUser:ee,onEditProfile:O,onShowFollowers:M,onShowFollowing:S}),e[33]=p,e[34]=n,e[35]=O,e[36]=ee,e[37]=M,e[38]=S,e[39]=T):T=e[39];let Q;e[40]===Symbol.for("react.memo_cache_sentinel")?(Q=(0,s.jsx)("div",{className:"sticky top-[60px] z-10 border-b border-zinc-100 bg-white/90 backdrop-blur-md dark:border-zinc-800 dark:bg-black/90 md:top-0",children:(0,s.jsx)(Te,{className:"hide-scrollbar h-auto w-full justify-start overflow-x-auto rounded-none bg-transparent p-0 px-2",children:["feed","media"].map(ls)})}),e[40]=Q):Q=e[40];let $;e[41]!==w?($=w(),e[41]=w,e[42]=$):$=e[42];let I;e[43]!==$?(I=(0,s.jsx)(ie,{value:"feed",className:"m-0 border-none",children:$}),e[43]=$,e[44]=I):I=e[44];let L;e[45]!==w?(L=w(),e[45]=w,e[46]=L):L=e[46];let D;e[47]!==L?(D=(0,s.jsx)(ie,{value:"media",className:"m-0 border-none",children:L}),e[47]=L,e[48]=D):D=e[48];let E;e[49]!==q||e[50]!==x||e[51]!==I||e[52]!==D?(E=(0,s.jsxs)(_e,{value:q,onValueChange:x,className:"w-full",children:[Q,I,D]}),e[49]=q,e[50]=x,e[51]=I,e[52]=D,e[53]=E):E=e[53];let U;e[54]!==T||e[55]!==E||e[56]!==P?(U=(0,s.jsxs)("div",{className:"border-y border-zinc-100 dark:border-zinc-800 md:border-b-0",children:[P,T,E]}),e[54]=T,e[55]=E,e[56]=P,e[57]=U):U=e[57];let W;e[58]!==c?(W=()=>c(!1),e[58]=c,e[59]=W):W=e[59];const se=o==="Followers"?`People who follow @${n.handle}`:`People @${n.handle} follows`;let A;e[60]!==v||e[61]!==g||e[62]!==o||e[63]!==m||e[64]!==r||e[65]!==H||e[66]!==z||e[67]!==c?(A=(0,s.jsx)("div",{className:"flex max-h-[75vh] flex-col overflow-y-auto",children:(0,s.jsx)("div",{className:"min-h-[300px]",children:H?(0,s.jsx)("div",{className:"flex flex-col",children:[1,2,3,4,5].map(ns)}):g.length>0?(0,s.jsxs)("div",{className:"divide-y divide-zinc-100 dark:divide-zinc-800",children:[g.map(a=>(0,s.jsx)(Me,{profile:a,onUserClick:i=>{c(!1),z(`/u/${i}`)}},a.id)),m&&(0,s.jsx)("div",{className:"flex justify-center p-4",children:(0,s.jsxs)(re,{variant:"secondary",className:"w-full text-xs",onClick:()=>v(),disabled:r,children:[r?(0,s.jsx)("span",{className:"mr-2 animate-pulse",children:"..."}):null,"Load more"]})})]}):(0,s.jsx)("div",{className:"flex flex-col items-center justify-center py-20 text-zinc-500",children:(0,s.jsxs)("p",{className:"font-medium",children:["No ",o.toLowerCase()," yet."]})})})}),e[60]=v,e[61]=g,e[62]=o,e[63]=m,e[64]=r,e[65]=H,e[66]=z,e[67]=c,e[68]=A):A=e[68];let B;e[69]!==o||e[70]!==j||e[71]!==W||e[72]!==se||e[73]!==A?(B=(0,s.jsx)(Se,{isOpen:j,onClose:W,title:o,description:se,className:"sm:max-w-md",children:A}),e[69]=o,e[70]=j,e[71]=W,e[72]=se,e[73]=A,e[74]=B):B=e[74];let X;return e[75]!==U||e[76]!==B?(X=(0,s.jsxs)("div",{className:"min-h-screen overflow-hidden rounded-none border-zinc-100 bg-white pb-20 dark:bg-black dark:border-zinc-800 md:rounded-xl",children:[U,B]}),e[75]=U,e[76]=B,e[77]=X):X=e[77],X},ks=as;function rs(t){return(0,s.jsx)(qe,{},t)}function ls(t){return(0,s.jsx)(Ce,{value:t,className:"flex-1 whitespace-nowrap rounded-none border-b-2 px-4 py-4 text-sm font-bold capitalize text-zinc-500 transition-all data-[state=active]:border-black data-[state=active]:text-black dark:data-[state=active]:border-white dark:data-[state=active]:text-white",children:t==="feed"?"Posts":t},t)}function ns(t){return(0,s.jsx)(ye,{},t)}export{ks as default};

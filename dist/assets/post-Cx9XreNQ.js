import{a as jt}from"./rolldown-runtime-BaZ8gS7u.js";import{E as Wt,b as _e,c as J,d as Ut,n as Vt,p as Bt}from"./framework-CsA6nn9m.js";import{r as qt}from"./query-QyXblnmD.js";import{$t as Gt,An as st,En as Ht,Fn as Jt,Ft as re,Gt as Qt,Ht as Kt,In as Xt,Ln as we,Mn as at,On as ge,Pn as Yt,Rn as Zt,Sn as es,Ut as ts,Vn as ss,an as as,cn as is,dn as ns,gn as zt,in as ye,jn as ls,ln as rs,mn as os,on as cs,qn as ds,sn as ms,t as Nt,tn as xs,vn as ps,xn as te,zn as us}from"./ui-libs-RMDc8kCU.js";import{$t as fe,At as hs,Ft as fs,G as gs,Gt as bs,It as Ce,J as vs,K as it,Kt as js,Mt as kt,Nt as zs,Qt as H,Ut as nt,V as yt,Vt as Ns,W as ks,Xt as ys,Y as ws,Zt as Se,_ as lt,_t as Cs,at as rt,bt as Ss,c as wt,ct as ot,d as Fs,dt as ct,f as $s,ft as _s,g as Fe,gt as Ct,ht as Ps,it as dt,jt as Rs,kt as mt,l as xt,lt as pt,mt as Is,nt as Y,ot as ut,pt as Ms,q as le,rt as Z,st as ht,tn as As,tt as ee,ut as ft,y as Es,yt as St}from"./index-ygfBiQz8.js";import{n as Pe,t as Re}from"./linkify-CDs92yJ8.js";import{d as Ts}from"./hooks-BAqhwrR7.js";var Ls=J(),n=jt(Wt(),1),t=jt(Ut(),1),Ds=s=>{const e=(0,Ls.c)(35),{icon:a,count:d,label:o,onClick:m,active:l,activeColorClass:u,size:g,type:y}=s,v=g===void 0?18:g,b=y===void 0?"default":y;let r,h,x,f,N;if(e[0]!==l||e[1]!==u||e[2]!==d||e[3]!==o||e[4]!==m||e[5]!==b){const D={like:{hoverBg:"group-hover:bg-rose-500/10",hoverText:"group-hover:text-rose-500",activeText:"text-rose-500",activeFill:"fill-rose-500"},repost:{hoverBg:"group-hover:bg-emerald-500/10",hoverText:"group-hover:text-emerald-500",activeText:"text-emerald-500",activeFill:"fill-emerald-500"},comment:{hoverBg:"group-hover:bg-sky-500/10",hoverText:"group-hover:text-sky-500",activeText:"text-sky-500",activeFill:"fill-sky-500"},share:{hoverBg:"group-hover:bg-violet-500/10",hoverText:"group-hover:text-violet-500",activeText:"text-violet-500",activeFill:"fill-violet-500"},default:{hoverBg:"group-hover:bg-zinc-500/10",hoverText:"group-hover:text-zinc-500",activeText:"text-zinc-900 dark:text-white",activeFill:"fill-current"}};r=D[b]||D.default;const S=u||r.activeText;e[11]!==m?(x=I=>{I.stopPropagation(),m&&m(I)},e[11]=m,e[12]=x):x=e[12],f=`${o} ${d!==void 0?`(${d})`:""}`,N=H("group -ml-2 flex items-center gap-x-0.5 rounded-xl px-2 py-1.5 text-[12px] font-bold transition-all sm:gap-x-1 sm:text-[13px]",l?S:"text-zinc-500",!l&&r.hoverText),h=H("rounded-full p-2 transition-all duration-200",!l&&r.hoverBg),e[0]=l,e[1]=u,e[2]=d,e[3]=o,e[4]=m,e[5]=b,e[6]=r,e[7]=h,e[8]=x,e[9]=f,e[10]=N}else r=e[6],h=e[7],x=e[8],f=e[9],N=e[10];const $=l?2.5:2,p=l&&r.activeFill;let C;e[13]!==p?(C=H("transition-colors duration-200",p),e[13]=p,e[14]=C):C=e[14];let k;e[15]!==a||e[16]!==v||e[17]!==$||e[18]!==C?(k=(0,t.jsx)(a,{size:v,strokeWidth:$,className:C}),e[15]=a,e[16]=v,e[17]=$,e[18]=C,e[19]=k):k=e[19];let P;e[20]!==k||e[21]!==h?(P=(0,t.jsx)("div",{className:h,children:k}),e[20]=k,e[21]=h,e[22]=P):P=e[22];let i;e[23]!==o?(i=o&&(0,t.jsx)("span",{className:"hidden xs:inline",children:o}),e[23]=o,e[24]=i):i=e[24];let _;e[25]!==l||e[26]!==d?(_=d!=null&&(0,t.jsx)("span",{className:H("transition-all",l?"font-black":"font-bold"),children:d||0}),e[25]=l,e[26]=d,e[27]=_):_=e[27];let A;return e[28]!==P||e[29]!==i||e[30]!==_||e[31]!==x||e[32]!==f||e[33]!==N?(A=(0,t.jsxs)("button",{onClick:x,"aria-label":f,className:N,children:[P,i,_]}),e[28]=P,e[29]=i,e[30]=_,e[31]=x,e[32]=f,e[33]=N,e[34]=A):A=e[34],A},K=Ds,Os=J(),Ws=s=>{const e=(0,Os.c)(49),{currentUser:a,newComment:d,setNewComment:o,handleSubmitComment:m,loading:l,selectedFiles:u,setSelectedFiles:g,isUploading:y}=s;let v;e[0]!==u?(v=u===void 0?[]:u,e[0]=u,e[1]=v):v=e[1];const b=v,r=(0,n.useRef)(null);let h;e[2]!==g?(h=E=>{if(E.target.files){const O=Array.from(E.target.files);g&&g(q=>[...q,...O])}},e[2]=g,e[3]=h):h=e[3];const x=h;let f;e[4]!==g?(f=E=>{g&&g(O=>O.filter((q,ie)=>ie!==E))},e[4]=g,e[5]=f):f=e[5];const N=f;let $;e[6]!==g?($=E=>{const O=E.clipboardData.files;if(O&&O.length>0){const q=Array.from(O).filter(Us);q.length>0&&(E.preventDefault(),g&&g(ie=>[...ie,...q]))}},e[6]=g,e[7]=$):$=e[7];const p=$;if(!a){let E;return e[8]===Symbol.for("react.memo_cache_sentinel")?(E=(0,t.jsx)("div",{className:"border-y border-zinc-100 bg-zinc-50/30 p-6 text-center dark:border-zinc-800 dark:bg-zinc-900/10",children:(0,t.jsx)("p",{className:"text-sm text-zinc-500",children:"Please login to join the conversation."})}),e[8]=E):E=e[8],E}let C;e[9]!==a.avatar||e[10]!==a.handle?(C=(0,t.jsx)(Z,{src:a.avatar,alt:a.handle,className:"object-cover"}),e[9]=a.avatar,e[10]=a.handle,e[11]=C):C=e[11];let k;e[12]!==a.handle?.[0]?(k=a.handle?.[0]?.toUpperCase(),e[12]=a.handle?.[0],e[13]=k):k=e[13];let P;e[14]!==k?(P=(0,t.jsx)(Y,{children:k}),e[14]=k,e[15]=P):P=e[15];let i;e[16]!==C||e[17]!==P?(i=(0,t.jsxs)(ee,{className:"size-9 border border-zinc-200 dark:border-zinc-700",children:[C,P]}),e[16]=C,e[17]=P,e[18]=i):i=e[18];let _;e[19]!==o?(_=E=>o(E.target.value),e[19]=o,e[20]=_):_=e[20];let A;e[21]!==p||e[22]!==d||e[23]!==_?(A=(0,t.jsx)("textarea",{id:"comment-input",className:"min-h-[60px] w-full resize-none bg-transparent text-base outline-none placeholder:text-zinc-500 dark:text-white",placeholder:"Post your reply...",value:d,onChange:_,onPaste:p}),e[21]=p,e[22]=d,e[23]=_,e[24]=A):A=e[24];let D;e[25]!==N||e[26]!==b?(D=b.length>0&&(0,t.jsx)("div",{className:"mt-2 mb-2 flex flex-wrap gap-2",children:b.map((E,O)=>(0,t.jsxs)("div",{className:"relative size-20 overflow-hidden rounded-xl border border-zinc-200 dark:border-zinc-800",children:[E.type.startsWith("image/")?(0,t.jsx)("img",{src:URL.createObjectURL(E),className:"size-full object-cover",alt:""}):(0,t.jsx)("div",{className:"flex size-full items-center justify-center bg-zinc-100 dark:bg-zinc-800",children:(0,t.jsx)(rs,{size:20,className:"text-zinc-500"})}),(0,t.jsx)("button",{onClick:()=>N(O),className:"absolute right-1 top-1 rounded-full bg-black/60 p-1 text-white transition-colors hover:bg-black",children:(0,t.jsx)(re,{size:12})})]},O))}),e[25]=N,e[26]=b,e[27]=D):D=e[27];let S;e[28]===Symbol.for("react.memo_cache_sentinel")?(S=()=>r.current?.click(),e[28]=S):S=e[28];let I;e[29]===Symbol.for("react.memo_cache_sentinel")?(I=(0,t.jsx)("button",{type:"button",onClick:S,className:"rounded-full p-2 text-violet-600 transition-colors hover:bg-violet-50 dark:hover:bg-zinc-800",title:"Attach media",children:(0,t.jsx)(Ht,{size:20})}),e[29]=I):I=e[29];let T;e[30]!==x?(T=(0,t.jsxs)("div",{className:"flex gap-1 text-violet-600",children:[I,(0,t.jsx)("input",{type:"file",ref:r,onChange:x,multiple:!0,className:"hidden",accept:"image/*,video/*,application/pdf"})]}),e[30]=x,e[31]=T):T=e[31];const L=l||y;let B;e[32]!==d||e[33]!==b.length?(B=!d.trim()&&b.length===0,e[32]=d,e[33]=b.length,e[34]=B):B=e[34];let V;e[35]!==m||e[36]!==L||e[37]!==B?(V=(0,t.jsx)(Ms,{className:"min-w-[70px] !w-auto px-5 py-1.5 text-sm font-bold",onClick:m,loading:L,disabled:B,children:"Reply"}),e[35]=m,e[36]=L,e[37]=B,e[38]=V):V=e[38];let j;e[39]!==T||e[40]!==V?(j=(0,t.jsxs)("div",{className:"mt-2 flex items-center justify-between border-t border-zinc-100 pt-3 dark:border-zinc-800",children:[T,V]}),e[39]=T,e[40]=V,e[41]=j):j=e[41];let w;e[42]!==A||e[43]!==D||e[44]!==j?(w=(0,t.jsxs)("div",{className:"flex-1",children:[A,D,j]}),e[42]=A,e[43]=D,e[44]=j,e[45]=w):w=e[45];let M;return e[46]!==w||e[47]!==i?(M=(0,t.jsx)("div",{className:"border-y border-zinc-100 bg-zinc-50/30 p-4 dark:border-zinc-800 dark:bg-zinc-900/10",children:(0,t.jsxs)("div",{className:"flex gap-3",children:[i,w]})}),e[46]=w,e[47]=i,e[48]=M):M=e[48],M},Ft=n.memo(Ws);function Us(s){return s.type.startsWith("image/")}var Vs=J(),Bs=s=>{const e=(0,Vs.c)(15),{file:a}=s;let d;e[0]===Symbol.for("react.memo_cache_sentinel")?(d=(0,t.jsx)("div",{className:"flex size-10 items-center justify-center rounded-xl bg-violet-100 text-violet-600 dark:bg-violet-900/30",children:(0,t.jsx)(Yt,{size:20})}),e[0]=d):d=e[0];let o;e[1]!==a.name?(o=(0,t.jsx)("div",{className:"truncate text-sm font-bold dark:text-white",children:a.name}),e[1]=a.name,e[2]=o):o=e[2];let m;e[3]!==a.size?(m=a.size!==void 0&&(0,t.jsxs)("div",{className:"text-xs uppercase text-zinc-500",children:[(a.size/1024/1024).toFixed(2)," MB"]}),e[3]=a.size,e[4]=m):m=e[4];let l;e[5]!==o||e[6]!==m?(l=(0,t.jsxs)("div",{className:"min-w-0 flex-1",children:[o,m]}),e[5]=o,e[6]=m,e[7]=l):l=e[7];let u;e[8]===Symbol.for("react.memo_cache_sentinel")?(u=(0,t.jsx)(Zt,{size:18}),e[8]=u):u=e[8];let g;e[9]!==a.name||e[10]!==a.url?(g=(0,t.jsx)("a",{href:a.url,download:a.name,className:"p-2 text-zinc-400 transition-colors hover:text-violet-600",onClick:Gs,children:u}),e[9]=a.name,e[10]=a.url,e[11]=g):g=e[11];let y;return e[12]!==l||e[13]!==g?(y=(0,t.jsxs)("div",{className:"group mt-3 flex items-center gap-3 rounded-2xl border border-zinc-100 bg-zinc-50/50 p-3 transition-colors hover:border-violet-500/30 dark:border-zinc-800 dark:bg-zinc-900/10",children:[d,l,g]}),e[12]=l,e[13]=g,e[14]=y):y=e[14],y},qs=Bs;function Gs(s){return s.stopPropagation()}var $a=J(),Hs=J(),Js=s=>{const e=(0,Hs.c)(30),{url:a}=s;let d,o;e[0]!==a?(d=["link-preview",a],o=()=>Ss(a),e[0]=a,e[1]=d,e[2]=o):(d=e[1],o=e[2]);const m=!!a;let l;e[3]!==d||e[4]!==o||e[5]!==m?(l={queryKey:d,queryFn:o,staleTime:864e5,enabled:m},e[3]=d,e[4]=o,e[5]=m,e[6]=l):l=e[6];const{data:u,isLoading:g,isError:y}=qt(l);if(g){let C;return e[7]===Symbol.for("react.memo_cache_sentinel")?(C=(0,t.jsx)("div",{className:"mt-3 flex h-24 animate-pulse items-center justify-center overflow-hidden rounded-2xl border border-zinc-100 bg-zinc-50 dark:border-zinc-800 dark:bg-zinc-900/50",children:(0,t.jsx)(st,{className:"animate-spin text-zinc-300 dark:text-zinc-700",size:24})}),e[7]=C):C=e[7],C}if(y||!u||!u.title&&!u.image)return null;let v;e[8]!==u.image||e[9]!==u.title?(v=u.image&&(0,t.jsx)("div",{className:"aspect-[1.91/1] w-full overflow-hidden border-b border-zinc-100 bg-zinc-100 dark:border-zinc-800 dark:bg-zinc-900",children:(0,t.jsx)("img",{src:u.image,alt:u.title??void 0,className:"h-full w-full object-cover transition-transform duration-500 group-hover:scale-[1.02]",onError:Ks})}),e[8]=u.image,e[9]=u.title,e[10]=v):v=e[10];let b;e[11]===Symbol.for("react.memo_cache_sentinel")?(b=(0,t.jsx)(st,{size:12}),e[11]=b):b=e[11];let r;e[12]!==u.siteName?(r=(0,t.jsxs)("div",{className:"flex items-center gap-1.5 text-xs font-bold uppercase tracking-wider text-zinc-600",children:[b,(0,t.jsx)("span",{children:u.siteName})]}),e[12]=u.siteName,e[13]=r):r=e[13];let h;e[14]!==u.title?(h=(0,t.jsx)("div",{className:"line-clamp-2 text-[15px] font-bold leading-snug transition-colors group-hover:text-violet-700 dark:text-white",children:u.title}),e[14]=u.title,e[15]=h):h=e[15];let x;e[16]!==u.description?(x=u.description&&(0,t.jsx)("p",{className:"line-clamp-2 text-xs leading-relaxed text-zinc-600 dark:text-zinc-400",children:u.description}),e[16]=u.description,e[17]=x):x=e[17];let f;e[18]===Symbol.for("react.memo_cache_sentinel")?(f=(0,t.jsx)(Xt,{size:10}),e[18]=f):f=e[18];let N;e[19]!==a?(N=(0,t.jsxs)("div",{className:"flex items-center gap-1 pt-1 text-[11px] font-medium text-zinc-500",children:[f,(0,t.jsx)("span",{className:"truncate",children:a})]}),e[19]=a,e[20]=N):N=e[20];let $;e[21]!==N||e[22]!==r||e[23]!==h||e[24]!==x?($=(0,t.jsxs)("div",{className:"space-y-1 p-3.5",children:[r,h,x,N]}),e[21]=N,e[22]=r,e[23]=h,e[24]=x,e[25]=$):$=e[25];let p;return e[26]!==$||e[27]!==v||e[28]!==a?(p=(0,t.jsxs)("a",{href:a,target:"_blank",rel:"noopener noreferrer",className:"group mt-3 flex flex-col overflow-hidden rounded-2xl border border-zinc-100 bg-white shadow-sm transition-all hover:bg-zinc-50 dark:border-zinc-800 dark:bg-zinc-950 dark:hover:bg-zinc-900",onClick:Qs,children:[v,$]}),e[26]=$,e[27]=v,e[28]=a,e[29]=p):p=e[29],p},gt=Js;function Qs(s){return s.stopPropagation()}function Ks(s){return s.target.style.display="none"}var Xs=J(),Ys=s=>{const e=(0,Xs.c)(17),{src:a,poster:d}=s,o=(0,n.useRef)(null),{reportVisibility:m,unregister:l}=_s(),{dataSaver:u}=Cs(),g=(0,n.useId)();let y;e[0]===Symbol.for("react.memo_cache_sentinel")?(y={play:()=>{const C=o.current?.plyr;C&&(C.muted=!0,C.play().catch(ea))},pause:()=>{o.current?.plyr?.pause()}},e[0]=y):y=e[0];const v=y;let b,r;e[1]!==u||e[2]!==g||e[3]!==m||e[4]!==l?(b=()=>{const C=new IntersectionObserver(P=>{const[i]=P;m(g,u?0:i.intersectionRatio,v)},{threshold:[0,.6]}),k=o.current?.elements?.container;return k&&C.observe(k),()=>{l(g),k&&C.unobserve(k)}},r=[g,m,l,v,u],e[1]=u,e[2]=g,e[3]=m,e[4]=l,e[5]=b,e[6]=r):(b=e[5],r=e[6]),(0,n.useEffect)(b,r);let h;e[7]!==a?(h=[{src:a,type:"video/mp4"}],e[7]=a,e[8]=h):h=e[8];let x;e[9]!==d||e[10]!==h?(x={type:"video",sources:h,poster:d},e[9]=d,e[10]=h,e[11]=x):x=e[11];let f;e[12]===Symbol.for("react.memo_cache_sentinel")?(f={controls:["play-large","play","progress","current-time","mute","volume","fullscreen"],settings:["quality","speed"],ratio:"16:9",clickToPlay:!0,hideControls:!0,resetOnEnd:!0},e[12]=f):f=e[12];let N;e[13]!==x?(N={source:x,options:f},e[13]=x,e[14]=N):N=e[14];const $=N;let p;return e[15]!==$?(p=(0,t.jsx)("div",{className:"w-full bg-black",onClick:ta,children:(0,t.jsx)(Nt,{ref:o,...$})}),e[15]=$,e[16]=p):p=e[16],p},Zs=Ys;function ea(){}function ta(s){return s.stopPropagation()}var sa=J(),aa=s=>{const e=(0,sa.c)(3),{items:a}=s,d=a===void 0?[]:a,{openLightbox:o}=Is();if(!d||Array.isArray(d)&&d.length===0)return null;const m=Array.isArray(d)?d:[d],l=m.filter(na),u=m.filter(la),g=h=>{const x=l.filter(ra).map(oa),f=l[h];o(x,x.indexOf(f.url||f.src))},y="mt-2 space-y-2",v=l.length>0&&(0,t.jsx)("div",{className:`grid gap-2 overflow-hidden rounded-2xl border border-zinc-100 dark:border-zinc-800 ${l.length===1?"grid-cols-1":l.length===2?"aspect-[16/9] grid-cols-2":(l.length===3,"aspect-[16/9] grid-cols-2 grid-rows-2")}`,children:l.map((h,x)=>(0,t.jsx)("div",{className:`relative cursor-pointer overflow-hidden bg-zinc-100 dark:bg-zinc-900 ${l.length===3&&x===0?"row-span-2":""}
                                `,onClick:f=>{h.type==="image"&&(f.stopPropagation(),g(x))},children:h.type==="video"?(0,t.jsx)(Zs,{src:h.url,poster:h.poster||void 0}):(0,t.jsx)("img",{src:h.url||h.src,className:"size-full object-cover transition-transform duration-500 hover:scale-[1.02]",alt:"",loading:"lazy"})},x))}),b=u.map(ca);let r;return e[0]!==v||e[1]!==b?(r=(0,t.jsxs)("div",{className:y,children:[v,b]}),e[0]=v,e[1]=b,e[2]=r):r=e[2],r},ia=aa;function na(s){return s.type==="image"||s.type==="video"}function la(s){return s.type==="file"}function ra(s){return s.type==="image"}function oa(s){return s.url||s.src}function ca(s,e){return(0,t.jsx)(qs,{file:s},e)}var da=J(),ma=s=>{const e=(0,da.c)(18),{poll:a,onVote:d}=s,o=a.options.reduce(xa,0),[m,l]=(0,n.useState)(null);let u;e[0]!==d||e[1]!==m?(u=x=>{m||(l(x),d&&d(x))},e[0]=d,e[1]=m,e[2]=u):u=e[2];const g=u;let y;if(e[3]!==g||e[4]!==a.options||e[5]!==o||e[6]!==m){let x;e[8]!==g||e[9]!==o||e[10]!==m?(x=(f,N)=>{const $=o>0?Math.round((f.votes+(m===f.id?1:0))/(o+(m?1:0))*100):0,p=m===f.id;return(0,t.jsxs)("div",{onClick:C=>{C.stopPropagation(),g(f.id)},className:`relative h-10 w-full overflow-hidden rounded-xl border cursor-pointer ${p?"border-violet-500 dark:border-violet-500":"border-zinc-200 dark:border-zinc-700"}`,children:[m&&(0,t.jsx)("div",{className:"absolute left-0 top-0 h-full bg-zinc-200 transition-all duration-500 dark:bg-zinc-800",style:{width:`${$}%`}}),(0,t.jsxs)("div",{className:"absolute inset-0 z-10 flex items-center justify-between px-4",children:[(0,t.jsxs)("span",{className:`text-sm font-medium ${p?"font-bold text-violet-600":"text-zinc-700 dark:text-zinc-200"}`,children:[f.text," ",p&&(0,t.jsx)(ss,{size:14,className:"mb-0.5 inline ml-1"})]}),m&&(0,t.jsxs)("span",{className:"text-sm font-bold text-zinc-900 dark:text-white",children:[$,"%"]})]})]},f.id||N)},e[8]=g,e[9]=o,e[10]=m,e[11]=x):x=e[11],y=a.options.map(x),e[3]=g,e[4]=a.options,e[5]=o,e[6]=m,e[7]=y}else y=e[7];const v=o+(m?1:0),b=m?"6 days left":"Click to vote";let r;e[12]!==v||e[13]!==b?(r=(0,t.jsxs)("div",{className:"pl-1 text-xs text-zinc-500 dark:text-zinc-400",children:[v," votes •"," ",b]}),e[12]=v,e[13]=b,e[14]=r):r=e[14];let h;return e[15]!==y||e[16]!==r?(h=(0,t.jsxs)("div",{className:"mt-3 space-y-2",children:[y,r]}),e[15]=y,e[16]=r,e[17]=h):h=e[17],h},bt=ma;function xa(s,e){return s+e.votes}var $e=({id:s,user:e,timeAgo:a,content:d,contentClass:o,media:m,quotedPost:l,stats:u,onClick:g,repostedBy:y,onUserClick:v,currentUser:b,showToast:r,poll:h,isDetail:x,initialComments:f,onDelete:N,onUpdate:$,isComment:p,onReply:C,community:k,parent_id:P,post_id:i})=>{const _=_e(),{liked:A,reposted:D,localStats:S,setLocalStats:I,handleLike:T,handleRepost:L}=Ts(s,u,b,r||(()=>{})),{deletePost:B,updatePost:V}=Ps(),[j,w]=(0,n.useState)(f||[]),[M,E]=(0,n.useState)(""),[O,q]=(0,n.useState)(!1),[ie,Ie]=(0,n.useState)(!1),[Me,Ae]=(0,n.useState)(!1),[_t,Ee]=(0,n.useState)(!0),[be,Te]=(0,n.useState)([]),[Pt,Le]=(0,n.useState)(!1),[De,oe]=(0,n.useState)(!1),[ve,ce]=(0,n.useState)(!1),[Q,Oe]=(0,n.useState)(d),[ne,We]=(0,n.useState)(m||[]),[de,me]=(0,n.useState)([]),[Ue,Ve]=(0,n.useState)(!1),[xe,Rt]=(0,n.useState)(!1),[It,je]=(0,n.useState)(!1),[ze,pe]=(0,n.useState)(null),[Be,qe]=(0,n.useState)(!1),[Mt,Ne]=(0,n.useState)([]),[At,Ge]=(0,n.useState)(!1),{ref:He,inView:Je}=Vt({threshold:.5,triggerOnce:!0});(0,n.useEffect)(()=>{if(Je&&!p){const c=setTimeout(()=>{Ns(s).catch(console.error)},1500);return()=>clearTimeout(c)}},[Je,s,p]);const Qe=(0,n.useRef)(null),Ke=(0,n.useRef)(j);(0,n.useEffect)(()=>{Ke.current=j},[j]);const Et=(0,n.useCallback)(async()=>{if(!(!s||!i||S.comments===0)){Ge(!0);try{Ne(await Ce(i,null,10,s)),qe(!0)}catch(c){console.error("Failed to load replies:",c)}finally{Ge(!1)}}},[s,i,S.comments]),Tt=async()=>{const c=JSON.stringify(ne)!==JSON.stringify(m||[])||de.length>0;if(!Q.trim()||Q===d&&!c){ce(!1);return}Ve(!0);try{const z=[];for(const R of de){const W=await Se(R);z.push(W)}const F=[...ne,...z];p?await bs(s,{content:Q,media:F}):await V(s,{content:Q,media:F}),me([]),ce(!1),r&&r(`${p?"Comment":"Post"} updated`),$&&$(s,Q,F)}catch(z){console.error(`Failed to update ${p?"comment":"post"}:`,z),r&&r(`Failed to update ${p?"comment":"post"}`)}finally{Ve(!1)}},Xe=async c=>{c&&c.stopPropagation();try{p?await fs(s):await B(s),r&&r(`${p?"Comment":"Post"} deleted successfully`),N&&N(s)}catch(z){console.error(`Failed to delete ${p?"comment":"post"}:`,z),r&&r(`Failed to delete ${p?"comment":"post"}`)}finally{oe(!1)}},ue=(0,n.useCallback)(async(c=!1)=>{if(s){c?Ae(!0):q(!0);try{const z=Ke.current,F=await Ce(s,c&&z.length>0?z[z.length-1].created_at:null,10);F.length<10?Ee(!1):Ee(!0),w(c?R=>[...R,...F]:F)}catch(z){console.error("Failed to load comments:",z)}finally{q(!1),Ae(!1)}}},[s]);(0,n.useEffect)(()=>{x&&s&&ue()},[x,s,ue]);const Lt=async c=>{if(c.preventDefault(),!(!M.trim()&&be.length===0||!b)){Ie(!0),Le(!0);try{const z=[];for(const F of be){const R=await Se(F);z.push(R)}await kt(s,b.id,M,z,ze?.id),E(""),Te([]),pe(null),I(F=>({...F,comments:(F.comments||0)+1})),r&&r("Reply posted!"),ue()}catch(z){console.error("Failed to post comment:",z),r&&r("Failed to post reply.")}finally{Ie(!1),Le(!1)}}},Ye=({trigger:c})=>(0,t.jsxs)(ks,{children:[(0,t.jsx)(ws,{asChild:!0,onClick:z=>z.stopPropagation(),children:c}),(0,t.jsxs)(gs,{align:"end",className:"w-48 rounded-xl border-zinc-100 bg-white dark:border-zinc-800 dark:bg-zinc-900",children:[(0,t.jsxs)(it,{children:[!p&&(0,t.jsxs)(le,{className:"cursor-pointer gap-2 py-2.5",onClick:z=>{z.stopPropagation(),navigator.clipboard.writeText(`${window.location.origin}/post/${s}`),r&&r("Link copied")},children:[(0,t.jsx)(Gt,{size:16}),(0,t.jsx)("span",{children:"Copy link"})]}),!p&&(0,t.jsxs)(le,{className:"cursor-pointer gap-2 py-2.5",onClick:z=>{z.stopPropagation(),r&&r("Post reported")},children:[(0,t.jsx)(ls,{size:16}),(0,t.jsx)("span",{children:"Report post"})]}),!ke&&(0,t.jsxs)(le,{className:"cursor-pointer gap-2 py-2.5",onClick:z=>{z.stopPropagation(),r&&r("User blocked")},children:[(0,t.jsx)(Kt,{size:16}),(0,t.jsxs)("span",{children:["Block @",e.handle]})]}),ke&&(0,t.jsxs)(le,{onClick:z=>{z.stopPropagation(),ce(!0)},className:"cursor-pointer gap-2 py-2.5",children:[(0,t.jsx)(ms,{size:16}),"Edit Post"]})]}),ke&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(vs,{}),(0,t.jsx)(it,{children:(0,t.jsxs)(le,{variant:"destructive",className:"cursor-pointer gap-2 py-2.5",onClick:z=>{z.stopPropagation(),oe(!0)},children:[(0,t.jsx)(Qt,{size:16}),(0,t.jsx)("span",{children:"Delete post"})]})})]})]})]}),ke=b?.handle===e.handle,Ze=c=>{if(!c)return null;const z=ve?ne:c;return!z||Array.isArray(z)&&z.length===0?null:ve?(0,t.jsxs)("div",{className:"mt-3 space-y-3",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2 sm:grid-cols-3",children:[ne.map((F,R)=>(0,t.jsxs)("div",{className:"group relative aspect-square overflow-hidden rounded-xl border border-zinc-200 dark:border-zinc-800",children:[F.type==="video"?(0,t.jsx)("div",{className:"flex size-full items-center justify-center bg-zinc-100 dark:bg-zinc-900",children:(0,t.jsx)(at,{size:24,className:"text-zinc-400"})}):(0,t.jsx)("img",{src:F.url||F.src,className:"size-full object-cover",alt:""}),(0,t.jsx)("button",{onClick:W=>{W.stopPropagation(),We(U=>U.filter((X,G)=>G!==R))},className:"absolute right-1.5 top-1.5 flex size-7 items-center justify-center rounded-full bg-black/60 text-white transition-colors hover:bg-black",children:(0,t.jsx)(re,{size:16})})]},`old-${R}`)),de.map((F,R)=>(0,t.jsxs)("div",{className:"group relative aspect-square overflow-hidden rounded-xl border-2 border-dashed border-violet-500 bg-violet-50/10",children:[F.type.startsWith("image/")?(0,t.jsx)("img",{src:URL.createObjectURL(F),className:"size-full object-cover",alt:""}):(0,t.jsx)("div",{className:"flex size-full items-center justify-center",children:(0,t.jsx)(at,{size:24,className:"animate-pulse text-violet-500"})}),(0,t.jsx)("button",{onClick:W=>{W.stopPropagation(),me(U=>U.filter((X,G)=>G!==R))},className:"absolute right-1.5 top-1.5 flex size-7 items-center justify-center rounded-full bg-black/60 text-white transition-colors hover:bg-black",children:(0,t.jsx)(re,{size:16})}),(0,t.jsx)("div",{className:"absolute bottom-1 left-1 rounded bg-violet-600 px-1 text-[8px] font-bold text-white",children:"NEW"})]},`new-${R}`)),ne.length+de.length<4&&(0,t.jsxs)("button",{onClick:F=>{F.stopPropagation(),Qe.current?.click()},className:"relative flex aspect-square flex-col items-center justify-center gap-1 rounded-xl border-2 border-dashed border-zinc-200 text-zinc-400 transition-all hover:border-violet-500 hover:bg-violet-50/5 hover:text-violet-500 dark:border-zinc-800",children:[(0,t.jsx)(as,{size:20}),(0,t.jsx)("span",{className:"text-[10px] font-bold",children:"Add Media"})]})]}),(0,t.jsx)("input",{type:"file",ref:Qe,onChange:F=>{if(F.target.files){const R=Array.from(F.target.files);me(W=>[...W,...R])}},multiple:!0,className:"hidden",accept:"image/*,video/*"})]}):n.isValidElement(z)?z:(0,t.jsx)(ia,{items:z})},et=(c,z)=>{const F=typeof c=="string"&&As(c);if(ve)return(0,t.jsxs)("div",{className:"mt-2 flex flex-col gap-2",onClick:R=>R.stopPropagation(),children:[(0,t.jsx)(Es,{value:Q,onChange:R=>Oe(R.target.value),className:`min-h-[100px] w-full rounded-xl border-zinc-200 bg-zinc-50 focus:ring-violet-500 dark:border-zinc-800 dark:bg-zinc-900 ${F?"font-bangla text-lg":"font-english"}`,autoFocus:!0}),(0,t.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,t.jsx)("button",{onClick:()=>{ce(!1),Oe(d),We(m||[]),me([])},className:"px-4 py-1.5 text-sm font-bold text-zinc-500 transition-colors hover:text-zinc-700 dark:hover:text-zinc-300",children:"Cancel"}),(0,t.jsx)("button",{onClick:Tt,disabled:Ue||!Q.trim()||Q===d,className:"rounded-full bg-violet-600 px-4 py-1.5 text-sm font-bold text-white transition-all hover:bg-violet-700 disabled:opacity-50 active:scale-95",children:Ue?"Saving...":"Save"})]})]});if(typeof c=="string"){const R=!x&&c.length>280,W=R&&!xe?c.substring(0,280):c;return(0,t.jsxs)("div",{className:`whitespace-pre-line ${z||""} ${F?"font-bangla text-[1.15em] leading-relaxed":"font-english text-[1.05em]"}`,children:[(0,t.jsx)(Pe,{options:{...Re,render:({attributes:U,content:X})=>{const{href:G,...se}=U,tt=window.location.origin;if(G.includes("internal.tag/")){const ae=decodeURIComponent(G.split("internal.tag/")[1]);return(0,t.jsxs)("span",{...se,className:H("cursor-pointer font-bold text-rose-600 hover:underline dark:text-rose-400 font-bangla",se.className),onClick:Ot=>{Ot.stopPropagation(),_(`/tags/${ae}`)},children:["#",ae]},X)}let he=null;return G.startsWith("/")?he=G:G.startsWith(tt)&&(he=G.replace(tt,"")),he?(0,t.jsx)("span",{...se,className:H("cursor-pointer font-medium text-violet-600 hover:underline dark:text-violet-400",se.className),onClick:ae=>{ae.stopPropagation(),_(he)},children:X},X):(0,t.jsx)("a",{href:G,...se,target:"_blank",rel:"noopener noreferrer",className:H("text-violet-600 hover:underline dark:text-violet-400",se.className),onClick:ae=>ae.stopPropagation(),children:X},X)}},children:typeof W=="string"?W.replace(/#([\u0980-\u09FF\w]+)/g,"https://internal.tag/$1"):W}),R&&!xe&&"...",R&&(0,t.jsx)("button",{onClick:U=>{U.stopPropagation(),Rt(!xe)},className:"ml-1 cursor-pointer font-bold text-rose-600 hover:underline dark:text-rose-400",children:xe?"Show less":"See more"})]})}return c},Dt=(c,z)=>{pe(z?{handle:c,id:p?P||s:z}:null),E(F=>{const R=`@${c} `;return F.includes(R)?F:R+F}),document.getElementById("comment-input")?.focus()};return x?(0,t.jsxs)("div",{className:"flex flex-col",ref:He,children:[(0,t.jsxs)("article",{className:"p-5 dark:bg-black",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex items-start gap-x-3",children:[(0,t.jsx)("button",{className:"shrink-0",onClick:()=>v&&v(e.handle),children:(0,t.jsxs)(ee,{className:"size-12 border border-zinc-200 dark:border-zinc-700",children:[(0,t.jsx)(Z,{src:e.avatar,alt:e.handle,className:"object-cover"}),(0,t.jsx)(Y,{children:e.handle[0]?.toUpperCase()})]})}),(0,t.jsxs)("div",{className:"flex min-w-0 flex-1 flex-col",children:[(0,t.jsx)("div",{className:"flex flex-wrap items-center gap-x-1.5 leading-none",children:(0,t.jsxs)("div",{className:"flex min-w-0 max-w-full items-center gap-1.5",children:[(0,t.jsxs)("button",{className:"flex shrink-0 items-center gap-1 text-base font-bold text-zinc-900 hover:underline sm:text-lg dark:text-white",onClick:()=>v&&v(e.handle),children:[(0,t.jsx)("span",{className:"max-w-[200px] truncate sm:max-w-none",children:e.handle}),e.verified&&(0,t.jsx)(lt,{size:16,className:"text-blue-500"})]}),k&&(0,t.jsxs)("div",{className:"flex min-w-0 items-center gap-1 text-zinc-500",children:[(0,t.jsx)(xt,{size:14,className:"shrink-0 text-zinc-400"}),(0,t.jsxs)("button",{className:"flex items-center gap-1 text-[14px] font-bold text-zinc-900 hover:underline sm:text-[15px] dark:text-zinc-100",onClick:c=>{c.stopPropagation(),_(`/c/${k.handle}`)},children:[(0,t.jsxs)(ee,{className:"size-4 shrink-0 border border-zinc-200 bg-zinc-100 dark:border-zinc-700 dark:bg-zinc-800",children:[(0,t.jsx)(Z,{src:k.avatar,alt:k.name,className:"object-cover"}),(0,t.jsx)(Y,{className:"text-[8px] font-bold text-zinc-500",children:k.name?.[0]?.toUpperCase()})]}),(0,t.jsx)("span",{className:"max-w-[200px] truncate sm:max-w-none",children:k.name})]})]})]})}),(0,t.jsxs)("span",{className:"text-xs font-medium text-zinc-500 sm:text-sm dark:text-zinc-400",children:["@",e.handle]})]})]}),(0,t.jsxs)("div",{className:"-mt-1 flex items-center gap-2",children:[(0,t.jsx)("span",{className:"whitespace-nowrap text-[13px] text-zinc-500 sm:text-sm dark:text-zinc-400",children:a||"Recent"}),(0,t.jsx)(Ye,{trigger:(0,t.jsx)("button",{"aria-label":"More options",className:"rounded-full p-2 text-zinc-500 transition-colors hover:bg-zinc-100 dark:hover:bg-zinc-800",children:(0,t.jsx)(we,{size:20})})})]})]}),(0,t.jsx)("div",{className:"mt-4 whitespace-pre-line break-words text-lg leading-relaxed text-zinc-900 sm:text-xl sm:leading-8 dark:text-zinc-100",children:et(d,o)}),fe(d)&&(0,t.jsx)(gt,{url:fe(d)}),Ze(m),h&&(0,t.jsx)(bt,{poll:h}),l&&(0,t.jsx)("div",{className:"mt-4 overflow-hidden rounded-2xl border border-zinc-200 shadow-sm dark:border-zinc-700",children:(0,t.jsx)(vt,{...l})}),(0,t.jsxs)("div",{className:"mt-4 flex items-center gap-x-6 border-b border-zinc-100 pb-4 text-sm text-zinc-500 dark:border-zinc-800 dark:text-zinc-400",children:[(0,t.jsxs)("div",{className:"flex items-center gap-x-1",children:[(0,t.jsx)("span",{className:"font-bold text-black dark:text-white",children:S.views||0})," ",(0,t.jsx)("span",{className:"opacity-70",children:"Views"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-x-1",children:[(0,t.jsx)("span",{className:"font-bold text-black dark:text-white",children:S.likes||0})," ",(0,t.jsx)("span",{className:"opacity-70",children:"Likes"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-x-1",children:[(0,t.jsx)("span",{className:"font-bold text-black dark:text-white",children:S.comments||0})," ",(0,t.jsx)("span",{className:"opacity-70",children:"Comments"})]})]}),(0,t.jsxs)("div",{className:"mt-4 flex w-full items-center justify-around py-1",children:[(0,t.jsx)(K,{icon:ge,label:"Like",type:"like",onClick:T,active:A}),!p&&(0,t.jsx)(K,{icon:ye,label:"Repost",type:"repost",onClick:L,active:D}),(0,t.jsx)(K,{icon:wt,label:"Comment",type:"comment",onClick:()=>document.getElementById("comment-input")?.focus()}),!p&&(0,t.jsx)(K,{icon:Fe,label:"Share",type:"share",onClick:()=>je(!0)})]})]}),ze&&(0,t.jsxs)("div",{className:"flex items-center justify-between bg-zinc-50 px-5 py-2 dark:bg-zinc-900/50",children:[(0,t.jsxs)("span",{className:"text-sm text-zinc-500",children:["Replying to ",(0,t.jsxs)("span",{className:"font-bold text-violet-600",children:["@",ze.handle]})]}),(0,t.jsx)("button",{onClick:()=>pe(null),className:"text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-200",children:(0,t.jsx)(re,{size:16})})]}),(0,t.jsx)(Ft,{currentUser:b,newComment:M,setNewComment:E,handleSubmitComment:Lt,loading:ie,selectedFiles:be,setSelectedFiles:Te,isUploading:Pt}),(0,t.jsx)("div",{className:"divide-y divide-zinc-100 dark:divide-zinc-800",children:O?(0,t.jsx)("div",{className:"flex justify-center p-8",children:(0,t.jsx)(te,{className:"animate-spin text-violet-500"})}):(0,t.jsxs)(t.Fragment,{children:[_t&&j.length>0&&(0,t.jsxs)("button",{onClick:()=>ue(!0),disabled:Me,className:"flex w-full items-center justify-center gap-2 py-3 text-sm font-bold text-violet-600 transition-colors hover:bg-zinc-50 dark:hover:bg-zinc-900",children:[Me&&(0,t.jsx)(te,{size:14,className:"animate-spin"}),"View more replies"]}),j.map(c=>(0,t.jsx)($e,{...c,isComment:!0,post_id:s,onReply:Dt,onUserClick:v,currentUser:b,showToast:r,onDelete:z=>w(F=>F.filter(R=>R.id!==z)),onUpdate:(z,F,R)=>w(W=>W.map(U=>U.id===z?{...U,content:F,media:R}:U)),stats:{likes:c.stats?.likes||0,comments:c.stats?.comments||0,reposts:c.stats?.reposts||0},timeAgo:c.timeAgo||c.created_at},c.id))]})}),(0,t.jsx)(dt,{open:De,onOpenChange:oe,children:(0,t.jsxs)(ht,{onClick:c=>c.stopPropagation(),children:[(0,t.jsxs)(ft,{children:[(0,t.jsx)(ct,{children:"Are you absolutely sure?"}),(0,t.jsx)(ot,{children:"This action cannot be undone. This will permanently delete your post and all its comments."})]}),(0,t.jsxs)(pt,{children:[(0,t.jsx)(ut,{onClick:c=>c.stopPropagation(),children:"Cancel"}),(0,t.jsx)(rt,{onClick:Xe,className:"bg-rose-500 hover:bg-rose-600",children:"Delete"})]})]})})]}):(0,t.jsxs)("article",{ref:He,onClick:g,className:`px-4 transition-all ${p?"py-2 bg-transparent hover:bg-zinc-50/30 dark:hover:bg-zinc-800/20":"py-4 border-b border-zinc-100 bg-white hover:bg-zinc-50/30 dark:border-zinc-800 dark:bg-black dark:hover:bg-white/[0.02]"} ${g?"cursor-pointer":""}`,children:[y&&(0,t.jsxs)("div",{className:"mb-2 ml-1 flex items-center space-x-1.5 text-[13px] font-semibold text-zinc-600",children:[(0,t.jsx)(ye,{size:14,className:"text-zinc-500"}),(0,t.jsxs)("span",{className:"flex cursor-pointer items-center text-zinc-700 hover:underline dark:text-zinc-300",onClick:c=>{c.stopPropagation(),v&&v(y.handle)},children:[y.handle," Reposted"]})]}),(0,t.jsxs)("div",{className:"flex items-start gap-x-3",children:[(0,t.jsxs)("div",{className:"flex shrink-0 flex-col items-center self-stretch py-0.5",children:[(0,t.jsx)("div",{className:"cursor-pointer",onClick:c=>{c.stopPropagation(),v&&v(e.handle)},children:(0,t.jsxs)(ee,{className:`${p?"size-8":"size-10"} border-0 shadow-sm`,children:[(0,t.jsx)(Z,{src:e.avatar,alt:e.handle,className:"object-cover"}),(0,t.jsx)(Y,{className:"text-xs",children:e.handle[0]?.toUpperCase()})]})}),(!p&&S.comments>0||p&&!P&&S.comments>0)&&(0,t.jsx)("div",{className:"mt-2 w-0.5 flex-1 rounded-full bg-zinc-100 dark:bg-zinc-800"})]}),(0,t.jsxs)("div",{className:"flex min-w-0 flex-1 flex-col",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("div",{className:"flex flex-wrap items-center gap-x-1.5 leading-none",children:(0,t.jsxs)("div",{className:"flex min-w-0 max-w-full items-center gap-1.5",children:[(0,t.jsxs)("button",{className:`flex shrink-0 items-center gap-1 ${p?"text-[14px]":"text-[15px]"} font-bold text-zinc-900 hover:underline dark:text-white`,onClick:c=>{c.stopPropagation(),v&&v(e.handle)},children:[(0,t.jsx)("span",{className:"max-w-[150px] truncate sm:max-w-none",children:e.handle}),e.verified&&(0,t.jsx)(lt,{size:p?12:14,className:"text-blue-500"})]}),k&&(0,t.jsxs)("div",{className:"flex min-w-0 items-center gap-1 text-zinc-500",children:[(0,t.jsx)(xt,{size:12,className:"shrink-0 text-zinc-400"}),(0,t.jsxs)("button",{className:"flex items-center gap-1 text-[13px] font-bold text-zinc-900 hover:underline dark:text-zinc-100",onClick:c=>{c.stopPropagation(),_(`/c/${k.handle}`)},children:[(0,t.jsxs)(ee,{className:"size-3.5 shrink-0 border border-zinc-200 bg-zinc-100 dark:border-zinc-700 dark:bg-zinc-800",children:[(0,t.jsx)(Z,{src:k.avatar,alt:k.name,className:"object-cover"}),(0,t.jsx)(Y,{className:"text-[6px] font-bold text-zinc-500",children:k.name?.[0]?.toUpperCase()})]}),(0,t.jsx)("span",{className:"max-w-[150px] truncate sm:max-w-none",children:k.name})]})]})]})}),(0,t.jsxs)("div",{className:"-mt-1 flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-[12px] text-zinc-500 dark:text-zinc-400",children:a||"Recent"}),(0,t.jsx)(Ye,{trigger:(0,t.jsx)("button",{"aria-label":"More options",className:"rounded-full p-2 text-zinc-500 transition-colors hover:bg-zinc-100 group-hover:bg-zinc-100 dark:hover:bg-zinc-800 dark:group-hover:bg-zinc-800/50",children:(0,t.jsx)(we,{size:18})})})]})]}),(0,t.jsx)("div",{className:"mt-0.5 whitespace-pre-line break-words text-[15px] leading-relaxed text-zinc-900 dark:text-zinc-100",children:et(d,o)}),fe(d)&&(0,t.jsx)(gt,{url:fe(d)}),Ze(m),h&&(0,t.jsx)(bt,{poll:h}),l&&(0,t.jsx)("div",{className:"mt-3 overflow-hidden rounded-2xl border border-zinc-200 shadow-sm transition-all hover:bg-zinc-50 dark:border-zinc-800 dark:hover:bg-zinc-900",onClick:c=>{c.stopPropagation(),_(`/post/${l.id}`)},children:(0,t.jsx)(vt,{...l})}),(0,t.jsxs)("div",{className:`flex items-center gap-x-1 ${p?"mt-1.5":"mt-3"}`,children:[(0,t.jsx)(K,{icon:ge,size:p?16:18,type:"like",onClick:T,active:A}),(0,t.jsx)(K,{icon:zt,size:p?16:18,type:"comment",onClick:c=>{c?.stopPropagation(),C?C(e.handle,s):g&&g()}}),(0,t.jsx)(K,{icon:ye,size:p?16:18,type:"repost",onClick:L,active:D}),!p&&(0,t.jsx)(K,{icon:Fe,type:"share",onClick:c=>{c?.stopPropagation(),je(!0)}})]}),(S.comments>0||S.likes>0||(S.views||0)>0)&&(0,t.jsxs)("div",{className:`mt-1 flex items-center gap-x-1.5 px-0.5 ${p?"text-[12px]":"text-[14px]"} font-medium text-zinc-500 dark:text-zinc-400`,children:[(S.views||0)>0&&!p&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("span",{className:"hover:underline",children:[S.views," ",S.views===1?"view":"views"]}),(S.comments>0||S.likes>0)&&(0,t.jsx)("span",{className:"opacity-50",children:"·"})]}),S.comments>0&&(0,t.jsxs)("button",{className:"hover:underline",onClick:c=>{c.stopPropagation(),Be?qe(!1):Et()},children:[S.comments," ",S.comments===1?"reply":"replies"]}),S.comments>0&&S.likes>0&&(0,t.jsx)("span",{className:"opacity-50",children:"·"}),S.likes>0&&(0,t.jsxs)("button",{className:"hover:underline",children:[S.likes," ",S.likes===1?"like":"likes"]})]}),Be&&(0,t.jsxs)("div",{className:"relative mt-2 space-y-0",children:[(0,t.jsx)("div",{className:"absolute left-[19px] top-0 bottom-4 w-0.5 bg-zinc-100 dark:bg-zinc-800"}),At?(0,t.jsx)("div",{className:"flex py-4 pl-12",children:(0,t.jsx)(te,{size:18,className:"animate-spin text-violet-500"})}):(0,t.jsx)("div",{className:"flex flex-col",children:Mt.map(c=>(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"absolute left-[19px] top-5 h-0.5 w-4 bg-zinc-100 dark:bg-zinc-800"}),(0,t.jsx)("div",{className:"pl-6",children:(0,t.jsx)($e,{...c,isComment:!0,post_id:i,onReply:C,onUserClick:v,currentUser:b,showToast:r,onDelete:z=>Ne(F=>F.filter(R=>R.id!==z)),onUpdate:(z,F,R)=>Ne(W=>W.map(U=>U.id===z?{...U,content:F,media:R}:U)),stats:{likes:c.stats?.likes||0,comments:c.stats?.comments||0,reposts:c.stats?.reposts||0},timeAgo:c.timeAgo||c.created_at})})]},c.id))})]})]})]}),(0,t.jsx)($t,{isOpen:It,onClose:()=>je(!1),url:`${window.location.origin}/post/${s}`,title:"Share Post"}),(0,t.jsx)(dt,{open:De,onOpenChange:oe,children:(0,t.jsxs)(ht,{onClick:c=>c.stopPropagation(),children:[(0,t.jsxs)(ft,{children:[(0,t.jsx)(ct,{children:"Are you absolutely sure?"}),(0,t.jsx)(ot,{children:"This action cannot be undone. This will permanently delete your post and all its comments."})]}),(0,t.jsxs)(pt,{children:[(0,t.jsx)(ut,{onClick:c=>c.stopPropagation(),children:"Cancel"}),(0,t.jsx)(rt,{onClick:Xe,className:"bg-rose-500 hover:bg-rose-600",children:"Delete"})]})]})})]})};function pa(s,e){return s.id===e.id&&s.content===e.content&&s.timeAgo===e.timeAgo&&s.user.id===e.user.id&&s.user.avatar===e.user.avatar&&s.stats.likes===e.stats.likes&&s.stats.comments===e.stats.comments&&s.stats.reposts===e.stats.reposts&&s.currentUser?.id===e.currentUser?.id&&JSON.stringify(s.media)===JSON.stringify(e.media)&&JSON.stringify(s.repostedBy)===JSON.stringify(e.repostedBy)}var ua=n.memo($e,pa),ha=J(),fa=s=>{const e=(0,ha.c)(30),{user:a,time:d,content:o}=s,m=_e();let l;e[0]!==a.avatar||e[1]!==a.handle?(l=(0,t.jsx)(Z,{src:a.avatar,alt:a.handle}),e[0]=a.avatar,e[1]=a.handle,e[2]=l):l=e[2];let u;e[3]!==a.handle[0]?(u=a.handle[0]?.toUpperCase(),e[3]=a.handle[0],e[4]=u):u=e[4];let g;e[5]!==u?(g=(0,t.jsx)(Y,{children:u}),e[5]=u,e[6]=g):g=e[6];let y;e[7]!==l||e[8]!==g?(y=(0,t.jsxs)(ee,{className:"size-6",children:[l,g]}),e[7]=l,e[8]=g,e[9]=y):y=e[9];let v;e[10]!==a.handle?(v=(0,t.jsx)("span",{className:"text-sm font-semibold",children:a.handle}),e[10]=a.handle,e[11]=v):v=e[11];let b;e[12]!==y||e[13]!==v?(b=(0,t.jsxs)("div",{className:"flex items-center gap-x-2",children:[y,v]}),e[12]=y,e[13]=v,e[14]=b):b=e[14];let r;e[15]!==d?(r=(0,t.jsx)("span",{className:"text-xs text-zinc-500 sm:text-sm",children:d}),e[15]=d,e[16]=r):r=e[16];let h;e[17]!==b||e[18]!==r?(h=(0,t.jsxs)("div",{className:"mb-2 flex items-center justify-between gap-x-2",children:[b,r]}),e[17]=b,e[18]=r,e[19]=h):h=e[19];let x;e[20]!==m?(x={...Re,render:p=>{const{attributes:C,content:k}=p,{href:P,...i}=C,_=window.location.origin;let A=null;return P.startsWith("/")?A=P:P.startsWith(_)&&(A=P.replace(_,"")),A?(0,t.jsx)("span",{...i,className:H("cursor-pointer font-medium text-violet-600 hover:underline dark:text-violet-400",i.className),onClick:D=>{D.stopPropagation(),m(A)},children:k},k):(0,t.jsx)("a",{href:P,...i,target:"_blank",rel:"noopener noreferrer",className:H("text-violet-600 hover:underline dark:text-violet-400",i.className),onClick:ga,children:k},k)}},e[20]=m,e[21]=x):x=e[21];let f;e[22]!==o?(f=(0,t.jsx)("p",{className:"whitespace-pre-line text-sm text-zinc-800 dark:text-zinc-300",children:o}),e[22]=o,e[23]=f):f=e[23];let N;e[24]!==f||e[25]!==x?(N=(0,t.jsx)(Pe,{options:x,children:f}),e[24]=f,e[25]=x,e[26]=N):N=e[26];let $;return e[27]!==N||e[28]!==h?($=(0,t.jsxs)("div",{className:"p-4",children:[h,N]}),e[27]=N,e[28]=h,e[29]=$):$=e[29],$},vt=fa;function ga(s){return s.stopPropagation()}var ba=n.memo(({reel:s,isActive:e,isMuted:a})=>{const d=_e(),{currentUser:o}=St(),{addToast:m}=Ct(),l=(0,n.useRef)(null),[u,g]=(0,n.useState)(!1),[y,v]=(0,n.useState)(!1),[b,r]=(0,n.useState)(!1),[h,x]=(0,n.useState)(null),[f,N]=(0,n.useState)(!1),[$,p]=(0,n.useState)(s.stats?.likes||0),[C,k]=(0,n.useState)(!1),[P,i]=(0,n.useState)(0),_=(0,n.useRef)(null),A=(0,n.useMemo)(()=>Array.isArray(s.media)?s.media[0]?.src||s.media[0]?.url:s.media?.src||s.media?.url||s.url,[s.media,s.url]);(0,n.useEffect)(()=>{let j;const w=l.current?.plyr;return w&&(e?j=setTimeout(()=>{typeof w.play=="function"&&w.play().catch(()=>{w&&(w.muted=!0,w.play().catch(()=>{}))})},100):typeof w.pause=="function"&&w.pause()),()=>{j&&clearTimeout(j)}},[e]),(0,n.useEffect)(()=>{if(!o?.id||!e)return;(async()=>{try{const[w,M]=await Promise.all([zs(s.id,o.id),js(o.id,s.user?.id)]);N(w),k(M)}catch(w){console.error("Failed to check interaction status:",w)}})()},[s.id,o?.id,e,s.user?.id]),(0,n.useEffect)(()=>{const j=l.current?.plyr;j&&(j.muted=a)},[a]),(0,n.useEffect)(()=>{const j=l.current?.plyr;if(!j||!e)return;const w=()=>{const M=j.currentTime,E=j.duration;E>0&&i(M/E*100)};if(typeof j.on=="function")return j.on("timeupdate",w),()=>{typeof j.off=="function"&&j.off("timeupdate",w)}},[e]),(0,n.useEffect)(()=>()=>{_.current&&clearTimeout(_.current)},[]);const D=j=>{const w=j.target;w.closest("button")||w.closest("a")||w.closest(".plyr__controls")||(_.current?(clearTimeout(_.current),_.current=null,I()):_.current=setTimeout(()=>{_.current=null,S()},250))},S=()=>{const j=l.current?.plyr;j&&(j.paused?(j.play().catch(()=>{}),x("play")):(j.pause(),x("pause")),setTimeout(()=>x(null),800))},I=async()=>{if(o&&(g(!0),setTimeout(()=>g(!1),1e3),!f)){N(!0),p(j=>j+1);try{await nt(s.id,o.id)}catch{N(!1),p(j=>j-1)}}},T=async j=>{if(j.stopPropagation(),!o)return;const w=!f;N(w),p(M=>w?M+1:M-1);try{await nt(s.id,o.id)}catch{N(!w),p(M=>w?M-1:M+1)}},L=async j=>{if(j.stopPropagation(),!o)return;const w=!C;k(w);try{await ys(o.id,s.user?.id)}catch{k(!w)}},B=j=>{j.stopPropagation(),r(!0)},V=(0,n.useMemo)(()=>({source:{type:"video",sources:[{src:A,type:"video/mp4"}]},options:{controls:[],loop:{active:!0},clickToPlay:!1,ratio:"9:16"}}),[A]);return(0,t.jsxs)("div",{"data-id":s.id,className:"reel-item relative flex h-[100dvh] w-full snap-start items-center justify-center overflow-hidden bg-black cursor-pointer",onClick:D,children:[(0,t.jsx)("div",{className:"flex h-full w-full max-w-[450px] items-center justify-center",children:(0,t.jsx)("div",{className:"w-full",children:(0,t.jsx)(Nt,{ref:l,...V})})}),u&&(0,t.jsx)("div",{className:"pointer-events-none absolute inset-0 z-50 flex items-center justify-center",children:(0,t.jsx)("div",{className:"animate-in zoom-in-50 fade-out fill-mode-forwards duration-500",children:(0,t.jsx)(ge,{size:120,fill:"white",className:"scale-125 text-white drop-shadow-[0_0_30px_rgba(255,255,255,0.4)]"})})}),h&&(0,t.jsx)("div",{className:"pointer-events-none absolute inset-0 z-50 flex items-center justify-center",children:(0,t.jsx)("div",{className:"animate-in fade-in zoom-in-90 scale-100 animate-out zoom-out-110 fade-out fill-mode-forwards duration-500",children:(0,t.jsx)("div",{className:"rounded-full border border-white/20 bg-white/10 p-8 shadow-2xl backdrop-blur-md",children:h==="play"?(0,t.jsx)(cs,{size:50,fill:"white",className:"ml-1.5 text-white"}):(0,t.jsx)(is,{size:50,fill:"white",className:"text-white"})})})}),(0,t.jsx)("div",{className:"pointer-events-none absolute inset-0 bg-gradient-to-b from-black/20 via-transparent to-black/60"}),(0,t.jsxs)("div",{className:"pointer-events-none absolute bottom-6 left-4 right-16 text-white",children:[(0,t.jsxs)("div",{className:"pointer-events-auto mb-3 flex items-center gap-2",children:[(0,t.jsxs)(Bt,{to:`/u/${s.user?.handle}`,className:"flex items-center gap-2 transition-opacity hover:opacity-80",onClick:j=>j.stopPropagation(),children:[(0,t.jsxs)(ee,{className:"size-10 border-2 border-white",children:[(0,t.jsx)(Z,{src:s.user?.avatar,alt:s.user?.handle,className:"object-cover"}),(0,t.jsx)(Y,{children:s.user?.handle?.[0]?.toUpperCase()})]}),(0,t.jsxs)("span",{className:"font-bold",children:["@",s.user?.handle]})]}),o?.id!==s.user?.id&&(0,t.jsx)("button",{className:`ml-2 flex items-center gap-1.5 rounded-full px-3 py-1.5 text-xs font-bold transition-all active:scale-95 ${C?"border border-white/50 bg-transparent text-white":"bg-white text-black hover:bg-zinc-200"}`,onClick:L,children:C?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)($s,{size:14}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"Following"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(Fs,{size:14}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"Follow"})]})})]}),(0,t.jsx)(Pe,{options:{...Re,render:({attributes:j,content:w})=>{const{href:M,...E}=j,O=!M.startsWith("/")&&(M.startsWith("http")||M.startsWith("www"));return M.startsWith("/u/")||M.startsWith("/tags/")||M.startsWith("/c/")||M.startsWith("/explore")?(0,t.jsx)("span",{...E,className:"cursor-pointer font-bold text-white hover:underline",onClick:q=>{q.stopPropagation(),d(M)},children:w},w):(0,t.jsx)("a",{href:M,...E,className:"text-white hover:underline",target:O?"_blank":void 0,rel:O?"noopener noreferrer":void 0,onClick:q=>q.stopPropagation(),children:w},w)}},children:(0,t.jsx)("p",{className:"mb-3 line-clamp-2 text-sm",children:s.content})}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-xs opacity-90",children:[(0,t.jsx)(ns,{size:14,className:"animate-spin-slow"}),(0,t.jsxs)("span",{children:["Original Audio - ",s.user?.handle]})]})]}),(0,t.jsxs)("div",{className:"absolute bottom-6 right-2 z-10 flex flex-col items-center gap-6",children:[(0,t.jsxs)("div",{className:"pointer-events-auto flex flex-col items-center gap-1",children:[(0,t.jsx)("button",{className:`rounded-full p-3 backdrop-blur-md transition-all active:scale-90 ${f?"bg-rose-500/20 text-rose-500":"bg-zinc-800/50 text-white hover:bg-zinc-700"}`,onClick:T,children:(0,t.jsx)(ge,{size:28,fill:f?"currentColor":"none"})}),(0,t.jsx)("span",{className:"text-xs font-bold text-white",children:$})]}),(0,t.jsxs)("div",{className:"pointer-events-auto flex flex-col items-center gap-1",children:[(0,t.jsx)("button",{className:"rounded-full bg-zinc-800/50 p-3 text-white backdrop-blur-md transition-colors hover:bg-zinc-700 active:scale-90",onClick:j=>{j.stopPropagation(),v(!0)},children:(0,t.jsx)(wt,{size:28})}),(0,t.jsx)("span",{className:"text-xs font-bold text-white",children:s.stats?.comments||0})]}),(0,t.jsxs)("div",{className:"pointer-events-auto flex flex-col items-center gap-1",children:[(0,t.jsx)("button",{className:"rounded-full bg-zinc-800/50 p-3 text-white backdrop-blur-md transition-colors hover:bg-zinc-700 active:scale-90",onClick:B,children:(0,t.jsx)(Fe,{size:28})}),(0,t.jsx)("span",{className:"text-xs font-bold text-white",children:s.stats?.shares||0})]})]}),(0,t.jsx)("div",{className:"absolute bottom-0 left-0 z-50 h-[3px] w-full bg-white/20",children:(0,t.jsx)("div",{className:"h-full bg-white shadow-[0_0_8px_rgba(255,255,255,0.8)] transition-all duration-100 ease-linear",style:{width:`${P}%`}})}),(0,t.jsx)(ja,{isOpen:y,onClose:()=>v(!1),reelId:s.id,currentUser:o,showToast:m}),(0,t.jsx)($t,{isOpen:b,onClose:()=>r(!1),url:`${window.location.origin}/reels?id=${s.id}`,title:"Share Reel"})]})},(s,e)=>s.isActive===e.isActive&&s.reel.id===e.reel.id&&s.isMuted===e.isMuted),_a=ba,va=({isOpen:s,onClose:e,reelId:a,currentUser:d,showToast:o})=>{const[m,l]=(0,n.useState)([]),[u,g]=(0,n.useState)(!1),[y,v]=(0,n.useState)(!1),[b,r]=(0,n.useState)(""),[h,x]=(0,n.useState)([]),[f,N]=(0,n.useState)(!1),[$,p]=(0,n.useState)(!0),[C,k]=(0,n.useState)(!1),[P,i]=(0,n.useState)(null),_=(0,n.useRef)(m);(0,n.useEffect)(()=>{_.current=m},[m]);const A=(0,n.useCallback)(async(S=!1)=>{if(a){S?k(!0):g(!0);try{const I=_.current,T=await Ce(a,S&&I.length>0?I[I.length-1].created_at:null,10);T.length<10?p(!1):p(!0),l(S?L=>[...L,...T]:T)}catch(I){console.error("Failed to load comments:",I),o&&o("Failed to load comments","error")}finally{g(!1),k(!1)}}},[a,o]);(0,n.useEffect)(()=>{s&&a?A():(l([]),p(!0))},[s,a,A]);const D=async S=>{if(S.preventDefault(),!(!b.trim()&&h.length===0||!d)){v(!0),N(!0);try{const I=[];for(const T of h){const L=await Se(T);I.push(L)}await kt(a,d.id,b,I,P?.id),r(""),x([]),i(null),o&&o("Reply posted!"),A()}catch(I){console.error("Failed to post comment:",I),o&&o("Failed to post reply.","error")}finally{v(!1),N(!1)}}};return(0,t.jsx)(yt,{isOpen:s,onClose:e,title:"Comments",className:"max-sm:h-[95dvh] h-[85vh] overflow-hidden !p-0 sm:max-w-xl",children:(0,t.jsxs)("div",{className:"flex h-full flex-col overflow-hidden bg-white dark:bg-zinc-900",children:[(0,t.jsx)("div",{className:"mx-auto my-3 h-1.5 w-12 shrink-0 rounded-full bg-zinc-200 dark:bg-zinc-800 sm:hidden"}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto scroll-smooth scrollbar-thin scrollbar-thumb-zinc-200 dark:scrollbar-thumb-zinc-800",children:u?(0,t.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,t.jsx)(te,{className:"animate-spin text-violet-500",size:32})}):m.length>0?(0,t.jsxs)("div",{className:"flex flex-col",children:[m.map(S=>(0,t.jsx)(ua,{...S,isComment:!0,post_id:a,currentUser:d,showToast:o,onReply:(I,T)=>{i(T?{handle:I,id:T}:null),r(L=>L.includes(`@${I}`)?L:L+`@${I} `)},onDelete:I=>l(T=>T.filter(L=>L.id!==I)),onUpdate:(I,T,L)=>l(B=>B.map(V=>V.id===I?{...V,content:T,media:L}:V))},S.id)),$&&(0,t.jsxs)("button",{onClick:()=>A(!0),disabled:C,className:"flex w-full items-center justify-center gap-2 py-6 text-sm font-bold text-violet-600 transition-colors hover:bg-zinc-50 dark:hover:bg-zinc-900",children:[C&&(0,t.jsx)(te,{size:16,className:"animate-spin"}),"View more replies"]})]}):(0,t.jsxs)("div",{className:"flex h-full min-h-[300px] flex-col items-center justify-center p-8 text-center text-zinc-500",children:[(0,t.jsx)("div",{className:"mb-4 flex size-16 items-center justify-center rounded-full bg-zinc-100 dark:bg-zinc-900",children:(0,t.jsx)(zt,{size:32,className:"text-zinc-400"})}),(0,t.jsx)("p",{className:"text-lg font-bold dark:text-zinc-300",children:"No comments yet"}),(0,t.jsx)("p",{className:"text-sm dark:text-zinc-500",children:"Be the first to share what you think!"})]})}),(0,t.jsxs)("div",{className:"shrink-0 border-t border-zinc-100 bg-white pb-safe dark:border-zinc-800 dark:bg-zinc-900",children:[P&&(0,t.jsxs)("div",{className:"flex items-center justify-between border-b border-zinc-50 bg-zinc-50/50 px-4 py-2 dark:border-zinc-800/50 dark:bg-zinc-900/50",children:[(0,t.jsxs)("span",{className:"text-xs text-zinc-500",children:["Replying to ",(0,t.jsxs)("span",{className:"font-bold text-violet-600",children:["@",P.handle]})]}),(0,t.jsx)("button",{onClick:()=>i(null),className:"text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-200",children:(0,t.jsx)(re,{size:14})})]}),(0,t.jsx)(Ft,{currentUser:d,newComment:b,setNewComment:r,handleSubmitComment:D,loading:y,selectedFiles:h,setSelectedFiles:x,isUploading:f})]})]})})},ja=va,za=({isOpen:s,onClose:e,url:a,title:d="Share"})=>{const[o,m]=(0,n.useState)(!1),[l,u]=(0,n.useState)(""),[g,y]=(0,n.useState)([]),[v,b]=(0,n.useState)(!1),[r,h]=(0,n.useState)(null),{addToast:x}=Ct(),{currentUser:f}=St(),N=(0,n.useCallback)(async()=>{if(f){b(!0);try{y((await mt(f.id)).map(i=>i.user).filter(i=>i!==null).slice(0,5))}catch(i){console.error("Failed to fetch conversations:",i)}finally{b(!1)}}},[f?.id]);(0,n.useEffect)(()=>{s&&f?N():(u(""),y([]))},[s,f,N]);const $=(0,n.useCallback)(async()=>{if(f){b(!0);try{y((await mt(f.id)).map(i=>i.user).filter(i=>i!==null&&(i.name?.toLowerCase().includes(l.toLowerCase())||i.handle.toLowerCase().includes(l.toLowerCase()))))}catch(i){console.error("Search failed:",i)}finally{b(!1)}}},[l,f?.id]);(0,n.useEffect)(()=>{const i=setTimeout(()=>{l.trim()&&s?$():!l.trim()&&s&&N()},300);return()=>clearTimeout(i)},[l,s,$,N]);const p=async i=>{i&&i.stopPropagation();try{await navigator.clipboard.writeText(a),m(!0),x("Link copied to clipboard!","success"),setTimeout(()=>m(!1),2e3)}catch(_){console.error("Failed to copy:",_),x("Failed to copy link","error")}},C=async i=>{if(f){h(i.id);try{await Rs(await hs(f.id,i.id),f.id,a,"text"),x(`Sent to ${i.name||i.handle}!`,"success")}catch(_){console.error("Failed to send message:",_),x("Failed to send message","error")}finally{h(null)}}},k=[{name:"X",icon:ts,color:"bg-black text-white",href:`https://twitter.com/intent/tweet?url=${encodeURIComponent(a)}`},{name:"Facebook",icon:Jt,color:"bg-[#1877F2] text-white",href:`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(a)}`},{name:"LinkedIn",icon:es,color:"bg-[#0A66C2] text-white",href:`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(a)}`},{name:"WhatsApp",icon:os,color:"bg-[#25D366] text-white",href:`https://wa.me/?text=${encodeURIComponent(a)}`},{name:"Email",icon:ps,color:"bg-zinc-600 text-white",href:`mailto:?body=${encodeURIComponent(a)}`}],P=async()=>{if(navigator.share)try{await navigator.share({title:d,url:a})}catch(i){i.name!=="AbortError"&&console.error("Native share failed:",i)}else p()};return(0,t.jsx)(yt,{isOpen:s,onClose:e,title:d,className:"max-w-[420px] !p-0 overflow-hidden",children:(0,t.jsxs)("div",{className:"flex h-full flex-col bg-white dark:bg-zinc-900",children:[(0,t.jsx)("div",{className:"px-5 pb-2 pt-4",children:(0,t.jsxs)("div",{className:"group relative",children:[(0,t.jsx)(xs,{className:"absolute left-3 top-1/2 size-4 -translate-y-1/2 text-zinc-400 transition-colors group-focus-within:text-violet-500"}),(0,t.jsx)("input",{type:"text",placeholder:"Search people...",value:l,onChange:i=>u(i.target.value),className:"w-full rounded-xl border-none bg-zinc-100 py-2.5 pl-10 pr-4 text-sm transition-all focus:ring-2 focus:ring-violet-500/20 outline-none dark:bg-zinc-800/50"})]})}),(0,t.jsx)("div",{className:"no-scrollbar flex min-h-[100px] items-center gap-4 overflow-x-auto px-5 py-4",children:v?(0,t.jsx)("div",{className:"flex flex-1 justify-center",children:(0,t.jsx)(te,{size:24,className:"animate-spin text-zinc-400"})}):g.length>0?g.map(i=>(0,t.jsxs)("button",{onClick:()=>C(i),disabled:r!==null,className:"group flex shrink-0 flex-col items-center gap-1.5 disabled:opacity-50",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"size-14 overflow-hidden rounded-full border-2 border-white shadow-sm transition-transform group-hover:scale-105 bg-zinc-100 dark:bg-zinc-800 dark:border-zinc-900",children:(0,t.jsx)("img",{src:i.avatar||`https://i.pravatar.cc/150?u=${i.id}`,alt:i.handle,className:"size-full object-cover"})}),r===i.id&&(0,t.jsx)("div",{className:"absolute inset-0 flex items-center justify-center rounded-full bg-black/40",children:(0,t.jsx)(te,{size:16,className:"animate-spin text-white"})})]}),(0,t.jsx)("span",{className:"max-w-[60px] truncate text-[10px] font-medium text-zinc-500 dark:text-zinc-400",children:i.name?.split(" ")[0]||i.handle})]},i.id)):(0,t.jsx)("div",{className:"flex-1 py-2 text-center",children:(0,t.jsx)("span",{className:"text-xs text-zinc-400",children:"No people found"})})}),(0,t.jsx)("div",{className:"mx-5 h-px bg-zinc-100 dark:bg-zinc-800"}),(0,t.jsxs)("div",{className:"grid grid-cols-5 gap-2 px-5 py-6",children:[k.map(i=>(0,t.jsxs)("a",{href:i.href,target:"_blank",rel:"noopener noreferrer",className:"group flex flex-col items-center gap-2",children:[(0,t.jsx)("div",{className:`size-12 ${i.color} flex items-center justify-center rounded-2xl shadow-md transition-all group-hover:-translate-y-1 group-hover:scale-110 group-hover:shadow-lg`,children:(0,t.jsx)(i.icon,{size:20,strokeWidth:2.5})}),(0,t.jsx)("span",{className:"text-[10px] font-bold uppercase tracking-tighter text-zinc-500 dark:text-zinc-400",children:i.name})]},i.name)),(0,t.jsxs)("button",{onClick:P,className:"group flex flex-col items-center gap-2",children:[(0,t.jsx)("div",{className:"flex size-12 items-center justify-center rounded-2xl border border-zinc-200 bg-zinc-100 text-zinc-600 shadow-sm transition-all group-hover:-translate-y-1 group-hover:scale-110 dark:border-zinc-700 dark:bg-zinc-800 dark:text-zinc-300",children:(0,t.jsx)(we,{size:20,strokeWidth:2.5})}),(0,t.jsx)("span",{className:"text-[10px] font-bold uppercase tracking-tighter text-zinc-500 dark:text-zinc-400",children:"More"})]})]}),(0,t.jsx)("div",{className:"px-5 pb-6",children:(0,t.jsxs)("div",{className:"group relative",children:[(0,t.jsx)("input",{type:"text",readOnly:!0,value:a,className:"w-full rounded-2xl border border-zinc-200 bg-zinc-50 py-3.5 pl-4 pr-14 text-sm font-medium transition-colors focus:outline-none group-hover:border-zinc-300 dark:border-zinc-800 dark:bg-zinc-950 dark:group-hover:border-zinc-700"}),(0,t.jsx)("button",{onClick:p,className:`absolute right-1.5 top-1/2 flex -translate-y-1/2 items-center gap-2 rounded-xl h-10 px-4 text-xs font-bold shadow-sm transition-all active:scale-95 ${o?"bg-emerald-500 text-white":"bg-zinc-900 text-white hover:opacity-90 dark:bg-white dark:text-zinc-900"}`,children:o?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ds,{size:14,strokeWidth:3}),(0,t.jsx)("span",{children:"Copied"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(us,{size:14,strokeWidth:3}),(0,t.jsx)("span",{children:"Copy"})]})})]})}),(0,t.jsx)("div",{className:"px-5 pb-5",children:(0,t.jsxs)("button",{onClick:e,className:"group relative flex w-full items-center justify-center overflow-hidden rounded-2xl bg-zinc-900 py-4 font-bold text-white transition-all hover:shadow-xl hover:shadow-zinc-900/10 active:scale-[0.98] dark:bg-white dark:text-zinc-900 dark:hover:shadow-white/10",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-zinc-500 to-zinc-600 opacity-0 transition-opacity duration-300 group-hover:opacity-100"}),(0,t.jsx)("div",{className:"relative flex items-center gap-2",children:(0,t.jsx)("span",{children:"Close"})})]})})]})})},$t=za;export{ua as n,_a as t};

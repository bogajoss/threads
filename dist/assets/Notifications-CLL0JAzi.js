import{n as u}from"./rolldown-runtime-2JzG8er9.js";import{s as N,u as g,w as v}from"./framework-pMVb9Z5_.js";import"./database-ApDMvJcm.js";import{Bn as h,dn as z,hn as k,in as _,ln as p}from"./ui-libs-CVo_NHeJ.js";import{$ as y,Jt as w,Q as S,et as A,l as C,tt as $}from"./index-Dj_euOpA.js";import{i as q}from"./hooks-CsE4EoXJ.js";var L=N(),P=u(v(),1),s=u(g(),1),M=()=>{const e=(0,L.c)(18),{currentUser:f,notifications:r,isLoading:b,isFetchingMore:c,hasMore:a,loadNotifications:m,handleNotificationClick:x}=q();if(b){let t;return e[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,s.jsx)("div",{className:"flex min-h-[400px] items-center justify-center",children:(0,s.jsx)(p,{size:32,className:"animate-spin text-violet-500"})}),e[0]=t):t=e[0],t}if(!f){let t;return e[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,s.jsxs)("div",{className:"flex min-h-[400px] flex-col items-center justify-center gap-4 p-8 text-center",children:[(0,s.jsx)("div",{className:"rounded-full bg-zinc-100 p-4 dark:bg-zinc-900",children:(0,s.jsx)(h,{size:40,className:"text-zinc-400"})}),(0,s.jsx)("h3",{className:"text-xl font-bold dark:text-white",children:"Sign in to see notifications"}),(0,s.jsx)("p",{className:"max-w-xs text-zinc-500",children:"Join the conversation and keep track of who's engaging with your content."})]}),e[1]=t):t=e[1],t}const j=F;let o;e[2]===Symbol.for("react.memo_cache_sentinel")?(o=(0,s.jsx)("div",{className:"sticky top-0 z-10 border-b border-zinc-100 bg-white/80 p-4 backdrop-blur-md dark:bg-black/80 dark:border-zinc-800",children:(0,s.jsx)("h2",{className:"text-xl font-bold dark:text-white",children:"Notifications"})}),e[2]=o):o=e[2];let i;e[3]!==x||e[4]!==r?(i=r.length>0?r.map(t=>(0,s.jsxs)("div",{onClick:()=>x(t),className:`flex cursor-pointer items-start gap-4 border-b border-zinc-100 p-4 transition-colors hover:bg-zinc-50 dark:border-zinc-800 dark:hover:bg-zinc-900 ${t.is_read?"":"bg-violet-50/30 dark:bg-violet-500/5"}`,children:[(0,s.jsx)("div",{className:"shrink-0 pt-1",children:j(t.type)}),(0,s.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,s.jsxs)("div",{className:"mb-1 flex items-center gap-3",children:[(0,s.jsxs)(y,{className:"size-8",children:[(0,s.jsx)($,{src:t.avatar}),(0,s.jsx)(A,{children:t.user?.[0]?.toUpperCase()})]}),(0,s.jsxs)("div",{className:"flex flex-1 items-center justify-between",children:[(0,s.jsxs)("span",{className:"truncate text-sm font-bold dark:text-white",children:["@",t.user]}),(0,s.jsx)("span",{className:"whitespace-nowrap text-xs text-zinc-500",children:w(t.created_at)})]})]}),(0,s.jsxs)("p",{className:"ml-11 text-[15px] text-zinc-600 dark:text-zinc-400",children:[t.type==="like"&&"liked your post",t.type==="follow"&&"followed you",t.type==="mention"&&"mentioned you in a post",t.type==="comment"&&"commented on your post",t.type==="repost"&&"reposted your post"]})]}),!t.is_read&&(0,s.jsx)("div",{className:"mt-2 size-2 shrink-0 rounded-full bg-violet-500 shadow-[0_0_8px_rgba(139,92,246,0.5)]"})]},t.id)):(0,s.jsx)("div",{className:"p-16 text-center text-zinc-500",children:(0,s.jsx)("p",{className:"font-medium",children:"No notifications yet."})}),e[3]=x,e[4]=r,e[5]=i):i=e[5];let n;e[6]!==a||e[7]!==c||e[8]!==m||e[9]!==r.length?(n=r.length>0&&a&&(0,s.jsx)("div",{className:"flex justify-center border-t border-zinc-100 p-6 dark:border-zinc-800",children:(0,s.jsxs)(S,{variant:"secondary",className:"w-full max-w-xs",onClick:()=>m(!0),disabled:c,children:[c?(0,s.jsx)(p,{size:18,className:"mr-2 animate-spin"}):null,"Load more"]})}),e[6]=a,e[7]=c,e[8]=m,e[9]=r.length,e[10]=n):n=e[10];let l;e[11]!==a||e[12]!==r.length?(l=r.length>0&&!a&&(0,s.jsx)("div",{className:"p-8 text-center text-sm text-zinc-500",children:"You've caught up with everything!"}),e[11]=a,e[12]=r.length,e[13]=l):l=e[13];let d;return e[14]!==i||e[15]!==n||e[16]!==l?(d=(0,s.jsxs)("div",{className:"min-h-screen overflow-hidden rounded-none border-y border-zinc-100 bg-white pb-20 shadow-sm dark:bg-black dark:border-zinc-800 md:rounded-xl md:border",children:[o,i,n,l]}),e[14]=i,e[15]=n,e[16]=l,e[17]=d):d=e[17],d},Q=M;function F(e){switch(e){case"like":return(0,s.jsx)(k,{size:20,className:"text-rose-500 fill-rose-500"});case"follow":return(0,s.jsx)(C,{size:20,className:"text-blue-500"});case"mention":return(0,s.jsx)(h,{size:20,className:"text-emerald-500"});case"comment":return(0,s.jsx)(_,{size:20,className:"text-violet-500"});case"repost":return(0,s.jsx)(z,{size:20,className:"text-amber-500"});default:return(0,s.jsx)(h,{size:20,className:"text-zinc-500"})}}export{Q as default};

import{a as _e}from"./rolldown-runtime-BaZ8gS7u.js";import{a as $e,c as Ee,i as ce,n as we,r as Ae,s as Pe}from"./animations-DZuN0xpW.js";import{_ as Ce,c as de}from"./framework-YRQI4BOE.js";import"./database-Bh-Nv8Zy.js";import{At as ye,Bn as De,Gn as Ge,Ht as ze,Kn as Ie,Kt as Ne,Nt as Le,Wn as Ve,_n as ke,dn as Oe,en as Ue,fr as Fe,hn as He,kt as We,ln as qe,on as ge,or as Ke,qt as Be,rn as Me,sn as Je,sr as Qe,un as Xe,vn as Ye}from"./ui-libs-Cxlst_z9.js";import{t as Ze}from"./media-libs-CqtNZWFg.js";import{At as et,Cn as Se,Dn as Te,Ft as tt,Gt as be,I as st,Jt as oe,Kt as ve,Mt as it,Nt as ue,Pt as rt,St as at,Wt as je,X as fe,_t as lt,bt as pe,c as nt,ct,gt as ot,h as dt,it as Re,jt as xt,lt as mt,ut,vt as ft,wn as D,z as ht}from"./index-NVHcSOsq.js";import{t as pt}from"./VideoPlayer-BEXesvIX.js";import"./text-processing-COMFTedg.js";import{t as gt}from"./rich-text-DOIiB07N.js";import{t as bt}from"./useAutoResizeTextArea-n5XCjvX4.js";var vt=de(),_=_e(Ee(),1),t=_e(Pe(),1),jt=_.memo(s=>{const e=(0,vt.c)(52),{conv:i,isSelected:r,isOnline:g,isTyping:j,onClick:n}=s,z=i.isGroup?i.name:i.user?.name||"Unknown User",c=i.isGroup?i.avatar:i.user?.avatar;let d="";try{if(i.created_at){let p;e[0]!==i.created_at?(p=Te(i.created_at),e[0]=i.created_at,e[1]=p):p=e[1],d=p}}catch{d=""}const C=r?"bg-violet-600/10 dark:bg-violet-500/10":"hover:bg-zinc-100 dark:hover:bg-zinc-800/50";let a;e[2]!==C?(a=D("group relative flex w-full cursor-pointer items-center gap-3 rounded-xl p-3 transition-all",C),e[2]=C,e[3]=a):a=e[3];let w;e[4]!==c?(w=(0,t.jsx)(ve,{src:c,className:"object-cover"}),e[4]=c,e[5]=w):w=e[5];let k;e[6]!==z[0]?(k=z[0]?.toUpperCase(),e[6]=z[0],e[7]=k):k=e[7];let E;e[8]!==k?(E=(0,t.jsx)(be,{className:"bg-gradient-to-br from-violet-500 to-fuchsia-600 text-white text-lg font-bold",children:k}),e[8]=k,e[9]=E):E=e[9];let M;e[10]!==w||e[11]!==E?(M=(0,t.jsxs)(je,{className:"h-12 w-12 border border-zinc-200 dark:border-zinc-800",children:[w,E]}),e[10]=w,e[11]=E,e[12]=M):M=e[12];let N;e[13]!==i.isGroup||e[14]!==g?(N=g&&!i.isGroup&&(0,t.jsx)("span",{className:"absolute bottom-0 right-0 h-3.5 w-3.5 rounded-full border-[2px] border-white bg-emerald-500 ring-0 dark:border-zinc-950"}),e[13]=i.isGroup,e[14]=g,e[15]=N):N=e[15];let x;e[16]!==M||e[17]!==N?(x=(0,t.jsxs)("div",{className:"relative shrink-0",children:[M,N]}),e[16]=M,e[17]=N,e[18]=x):x=e[18];const P=r?"text-violet-900 dark:text-violet-100":"text-zinc-900 dark:text-zinc-100";let T;e[19]!==P?(T=D("truncate text-[15px] font-semibold",P),e[19]=P,e[20]=T):T=e[20];let S;e[21]!==z||e[22]!==T?(S=(0,t.jsx)("h4",{className:T,children:z}),e[21]=z,e[22]=T,e[23]=S):S=e[23];let y;e[24]!==d?(y=(0,t.jsx)("span",{className:"text-[11px] font-medium text-zinc-400 dark:text-zinc-500 shrink-0",children:d}),e[24]=d,e[25]=y):y=e[25];let b;e[26]!==S||e[27]!==y?(b=(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[S,y]}),e[26]=S,e[27]=y,e[28]=b):b=e[28];let o;e[29]!==i.currentUserSent||e[30]!==i.isGroup||e[31]!==i.lastMessage||e[32]!==i.lastMessageSender||e[33]!==i.unread||e[34]!==j?(o=(0,t.jsx)("div",{className:"flex-1 min-w-0 flex items-center gap-1",children:j?(0,t.jsx)("p",{className:"truncate text-[13px] leading-relaxed text-violet-600 dark:text-violet-400 font-medium italic",children:"Typing..."}):(0,t.jsxs)("p",{className:D("truncate text-[13px] leading-relaxed",i.unread>0?"font-semibold text-zinc-900 dark:text-zinc-100":"text-zinc-500 dark:text-zinc-400"),children:[i.lastMessageSender&&i.isGroup&&(0,t.jsxs)("span",{className:"mr-1 font-medium",children:[i.lastMessageSender,":"]}),i.currentUserSent&&(0,t.jsx)("span",{className:"mr-1",children:"You:"}),i.lastMessage||"Start a conversation"]})}),e[29]=i.currentUserSent,e[30]=i.isGroup,e[31]=i.lastMessage,e[32]=i.lastMessageSender,e[33]=i.unread,e[34]=j,e[35]=o):o=e[35];let v;e[36]!==i.unread?(v=i.unread>0&&(0,t.jsx)("span",{className:"flex h-5 w-auto min-w-[20px] items-center justify-center rounded-full bg-violet-600 px-1.5 text-[10px] font-bold text-white shadow-sm ring-1 ring-violet-500 dark:bg-violet-500",children:i.unread}),e[36]=i.unread,e[37]=v):v=e[37];let f;e[38]!==o||e[39]!==v?(f=(0,t.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[o,v]}),e[38]=o,e[39]=v,e[40]=f):f=e[40];let l;e[41]!==b||e[42]!==f?(l=(0,t.jsxs)("div",{className:"flex min-w-0 flex-1 flex-col justify-center gap-0.5",children:[b,f]}),e[41]=b,e[42]=f,e[43]=l):l=e[43];let m;e[44]!==r?(m=r&&(0,t.jsx)("div",{className:"absolute left-0 top-1/2 h-8 w-1 -translate-y-1/2 rounded-r-full bg-violet-600 dark:bg-violet-500"}),e[44]=r,e[45]=m):m=e[45];let h;return e[46]!==n||e[47]!==l||e[48]!==m||e[49]!==a||e[50]!==x?(h=(0,t.jsxs)("div",{onClick:n,className:a,children:[x,l,m]}),e[46]=n,e[47]=l,e[48]=m,e[49]=a,e[50]=x,e[51]=h):h=e[51],h}),wt=({conversations:s,onSelect:e,selectedId:i,searchQuery:r,onSearchChange:g,onlineUsers:j=new Set,typingStatus:n={}})=>{const z=Ce(),[c,d]=(0,_.useState)("all"),C=(0,_.useMemo)(()=>{let a=s;return c==="unread"&&(a=a.filter(w=>w.unread>0)),c==="groups"&&(a=a.filter(w=>w.isGroup)),a},[s,c]);return(0,t.jsxs)("div",{className:"flex h-full w-full flex-col bg-white dark:bg-[#09090b] overflow-hidden",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-4 border-b border-zinc-100 p-4 dark:border-zinc-800/50 shrink-0",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h2",{className:"text-xl font-bold tracking-tight text-zinc-900 dark:text-white",children:"Messages"}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(oe,{variant:"ghost",size:"icon",className:"rounded-full text-zinc-500 dark:text-zinc-400 hover:bg-zinc-100 dark:hover:bg-zinc-800",onClick:()=>z("/create-group"),title:"New Group",children:(0,t.jsx)(ke,{size:20})}),(0,t.jsxs)(lt,{children:[(0,t.jsx)(at,{asChild:!0,children:(0,t.jsx)(oe,{variant:"ghost",size:"icon",className:"rounded-full text-zinc-500 dark:text-zinc-400 hover:bg-zinc-100 dark:hover:bg-zinc-800",children:(0,t.jsx)(Ge,{size:20})})}),(0,t.jsxs)(ft,{align:"end",className:"w-48",children:[(0,t.jsxs)(pe,{onClick:()=>d("all"),children:[(0,t.jsx)("span",{children:"All Chats"}),c==="all"&&(0,t.jsx)("span",{className:"ml-auto text-violet-500",children:"✓"})]}),(0,t.jsxs)(pe,{onClick:()=>d("unread"),children:[(0,t.jsx)("span",{children:"Unread"}),c==="unread"&&(0,t.jsx)("span",{className:"ml-auto text-violet-500",children:"✓"})]}),(0,t.jsxs)(pe,{onClick:()=>d("groups"),children:[(0,t.jsx)("span",{children:"Groups"}),c==="groups"&&(0,t.jsx)("span",{className:"ml-auto text-violet-500",children:"✓"})]})]})]})]})]}),(0,t.jsxs)("div",{className:"relative group",children:[(0,t.jsx)(Ue,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-zinc-400 transition-colors group-focus-within:text-violet-500"}),(0,t.jsx)("input",{type:"text",placeholder:"Search messages...",value:r,onChange:a=>g(a.target.value),className:"w-full rounded-2xl border-none bg-zinc-100 py-2.5 pl-9 pr-4 text-sm font-medium text-zinc-900 outline-none placeholder:text-zinc-500 transition-all focus:ring-2 focus:ring-violet-500/20 dark:bg-zinc-900 dark:text-white dark:focus:bg-zinc-800"})]})]}),(0,t.jsx)(Re,{className:"flex-1",children:(0,t.jsxs)("div",{className:"flex flex-col gap-1 p-2",children:[s.length===0&&!r&&(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center gap-2 py-12 text-center",children:[(0,t.jsx)("div",{className:"rounded-full bg-zinc-100 p-4 dark:bg-zinc-800",children:(0,t.jsx)(ke,{size:24,className:"text-zinc-400"})}),(0,t.jsx)("h3",{className:"text-sm font-semibold text-zinc-900 dark:text-white",children:"No messages yet"}),(0,t.jsx)("p",{className:"max-w-[180px] text-xs text-zinc-500",children:"Start a conversation with a friend or create a group."}),(0,t.jsx)(oe,{size:"sm",className:"mt-2 rounded-full bg-violet-600 hover:bg-violet-700 text-white",onClick:()=>z("/explore"),children:"Start New Chat"})]}),s.length>0&&C.length===0&&(0,t.jsx)("div",{className:"py-8 text-center text-sm text-zinc-500",children:"No messages found"}),C.map(a=>(0,t.jsx)(jt,{conv:a,isSelected:i===a.id,isOnline:!a.isGroup&&a.user&&j.has(a.user.id),isTyping:!!n[a.id],onClick:()=>e(a)},a.id))]})})]})},yt=wt,zt=de(),Nt=s=>{const e=(0,zt.c)(68),{onSendMessage:i,onTyping:r,replyingTo:g,setReplyingTo:j,editingMessage:n,setEditingMessage:z}=s,[c,d]=(0,_.useState)("");let C;e[0]===Symbol.for("react.memo_cache_sentinel")?(C=[],e[0]=C):C=e[0];const[a,w]=(0,_.useState)(C),[k,E]=(0,_.useState)(!1),M=(0,_.useRef)(null),N=(0,_.useRef)(null),x=bt(c),P=et("(min-width: 768px)");let T,S;e[1]!==n||e[2]!==j||e[3]!==x?(T=()=>{n&&(d(n.text),j(null),x.current&&x.current.focus())},S=[n,j,x],e[1]=n,e[2]=j,e[3]=x,e[4]=T,e[5]=S):(T=e[4],S=e[5]),_.useEffect(T,S);const{isRecording:y,recordingTime:b,startRecording:o,stopRecording:v,cancelRecording:f,audioBlob:l,audioUrl:m,clearAudio:h}=dt(),[p,R]=(0,_.useState)(!1),u=(0,_.useRef)(null),se=St,le=(0,_.useRef)(0);let q;e[6]!==r?(q=$=>{const G=$.target.value;if(d(G),r){const W=Date.now();W-le.current>3e3&&(r(!0),le.current=W),N.current&&clearTimeout(N.current),N.current=setTimeout(()=>{r(!1),le.current=0},2e3)}},e[6]=r,e[7]=q):q=e[7];const X=q;let ie;e[8]!==a||e[9]!==l||e[10]!==h||e[11]!==P||e[12]!==i||e[13]!==r||e[14]!==b||e[15]!==c||e[16]!==x?(ie=$=>{if($&&$.preventDefault(),l){i("",[],l,b),h();return}!c.trim()&&a.length===0||(r&&(N.current&&clearTimeout(N.current),r(!1)),i(c,a),d(""),w([]),setTimeout(()=>{P?x.current?.focus():x.current?.blur()},10))},e[8]=a,e[9]=l,e[10]=h,e[11]=P,e[12]=i,e[13]=r,e[14]=b,e[15]=c,e[16]=x,e[17]=ie):ie=e[17];const Y=ie;let K;e[18]!==m||e[19]!==p?(K=()=>{m&&(u.current||(u.current=new Audio(m),u.current.onended=()=>R(!1)),p?u.current.pause():u.current.play(),R(!p))},e[18]=m,e[19]=p,e[20]=K):K=e[20];const Z=K;let B,xe;e[21]!==l?(B=()=>{!l&&u.current&&(u.current.pause(),u.current=null,R(!1))},xe=[l],e[21]=l,e[22]=B,e[23]=xe):(B=e[22],xe=e[23]),_.useEffect(B,xe);let re;e[24]===Symbol.for("react.memo_cache_sentinel")?(re=$=>{if(!$.target.files)return;const G=Array.from($.target.files);w(W=>[...W,...G])},e[24]=re):re=e[24];const ae=re;let I;e[25]!==a?(I=a.length>0&&(0,t.jsx)(ce.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},exit:{y:20,opacity:0},className:"flex gap-2 overflow-x-auto mx-auto mb-2 px-2 py-2 bg-white dark:bg-[#212121] rounded-2xl shadow-lg border border-zinc-100 dark:border-zinc-800 w-full max-w-3xl no-scrollbar",children:a.map(($,G)=>(0,t.jsxs)("div",{className:"relative size-20 shrink-0 rounded-xl overflow-hidden border border-zinc-200 dark:border-zinc-700 group",children:[$.type.startsWith("video/")?(0,t.jsx)("div",{className:"size-full bg-black flex items-center justify-center",children:(0,t.jsx)(ge,{size:20,className:"text-white opacity-50"})}):(0,t.jsx)("img",{src:URL.createObjectURL($),className:"size-full object-cover"}),(0,t.jsx)("button",{type:"button",onClick:()=>w(W=>W.filter((ne,me)=>me!==G)),className:"absolute top-1 right-1 size-6 flex items-center justify-center rounded-full bg-black/50 text-white hover:bg-black/70 transition-colors",children:(0,t.jsx)(ye,{size:14})})]},G))}),e[25]=a,e[26]=I):I=e[26];let ee;e[27]!==n||e[28]!==g||e[29]!==z||e[30]!==j?(ee=(g||n)&&(0,t.jsxs)(ce.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},exit:{y:20,opacity:0},className:"flex items-center justify-between mx-auto mb-1.5 px-4 py-2 bg-white dark:bg-[#212121] rounded-2xl shadow-lg border border-zinc-100 dark:border-zinc-800 w-full max-w-3xl",children:[(0,t.jsxs)("div",{className:"text-sm flex items-center gap-3 min-w-0",children:[(0,t.jsx)("div",{className:"size-8 flex items-center justify-center rounded-full bg-violet-500/10 text-violet-500",children:n?(0,t.jsx)(qe,{size:16}):(0,t.jsx)(Me,{size:16})}),(0,t.jsxs)("div",{className:"min-w-0",children:[(0,t.jsx)("span",{className:"text-[13px] font-bold text-violet-500 block leading-tight",children:n?"Edit Message":`Reply to ${g.sender==="me"?"yourself":g.senderName}`}),(0,t.jsx)("p",{className:"truncate text-xs text-zinc-500 dark:text-[#aaaaaa]",children:n?n.text:g.text})]})]}),(0,t.jsx)("button",{onClick:()=>{j(null),z(null),n&&d("")},className:"p-1 rounded-full hover:bg-zinc-100 dark:hover:bg-white/10",children:(0,t.jsx)(ye,{size:18,className:"text-zinc-400"})})]}),e[27]=n,e[28]=g,e[29]=z,e[30]=j,e[31]=ee):ee=e[31];let L;e[32]!==I||e[33]!==ee?(L=(0,t.jsxs)($e,{children:[I,ee]}),e[32]=I,e[33]=ee,e[34]=L):L=e[34];const te=(y||l)&&"bg-zinc-900 ring-red-500/50";let V;e[35]!==te?(V=D("flex-1 min-w-0 flex items-center gap-1 rounded-[24px] px-1.5 py-1.5 transition-all bg-white dark:bg-[#212121] shadow-md border-0 ring-1 ring-zinc-200 dark:ring-zinc-800 focus-within:ring-violet-500/30",te),e[35]=te,e[36]=V):V=e[36];let O;e[37]!==l||e[38]!==f||e[39]!==h||e[40]!==Y||e[41]!==X||e[42]!==k||e[43]!==p||e[44]!==y||e[45]!==b||e[46]!==c||e[47]!==x||e[48]!==Z?(O=y?(0,t.jsxs)("div",{className:"flex-1 flex items-center gap-4 px-3 py-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(ce.div,{animate:{scale:[1,1.2,1]},transition:{repeat:1/0},className:"size-2 rounded-full bg-red-500"}),(0,t.jsx)("span",{className:"text-[15px] font-medium tabular-nums text-red-500",children:se(b)})]}),(0,t.jsx)("div",{className:"flex-1 text-center text-sm text-zinc-500",children:"Recording..."}),(0,t.jsx)("button",{type:"button",onClick:f,className:"p-2 text-zinc-400 hover:text-red-500",children:(0,t.jsx)(ze,{size:20})})]}):l?(0,t.jsxs)("div",{className:"flex-1 flex items-center gap-3 px-3 py-1",children:[(0,t.jsx)("button",{type:"button",onClick:Z,className:"size-10 flex items-center justify-center rounded-full bg-[#8774e1] text-white",children:p?(0,t.jsx)(Ne,{size:16,fill:"currentColor"}):(0,t.jsx)(ge,{size:20,fill:"currentColor",className:"ml-0.5"})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("div",{className:"h-1 bg-zinc-800 rounded-full overflow-hidden",children:(0,t.jsx)(ce.div,{initial:{width:0},animate:{width:p?"100%":"0%"},transition:{duration:b,ease:"linear"},className:"h-full bg-[#8774e1]"})}),(0,t.jsxs)("div",{className:"flex justify-between mt-1",children:[(0,t.jsx)("span",{className:"text-[10px] text-zinc-500",children:"Voice message"}),(0,t.jsx)("span",{className:"text-[10px] text-zinc-500 tabular-nums",children:se(b)})]})]}),(0,t.jsx)("button",{type:"button",onClick:h,className:"p-2 text-zinc-400 hover:text-red-500",children:(0,t.jsx)(ze,{size:20})})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(ct,{open:k,onOpenChange:E,children:[(0,t.jsx)(ut,{asChild:!0,children:(0,t.jsx)("button",{type:"button",className:"p-2 text-zinc-400 hover:text-violet-500 dark:text-[#aaaaaa] dark:hover:text-[#8774e1] transition-colors",children:(0,t.jsx)(Be,{size:24})})}),(0,t.jsx)(mt,{className:"p-0 border-none bg-transparent",side:"top",align:"start",children:(0,t.jsx)(ot,{onEmojiSelect:$=>d(G=>G+$.emoji)})})]}),(0,t.jsx)("textarea",{ref:x,value:c,onChange:X,onKeyDown:$=>{$.key==="Enter"&&!$.shiftKey&&($.preventDefault(),Y())},placeholder:"Message",className:"flex-1 bg-transparent border-none outline-none text-[16px] resize-none py-2 px-1 text-zinc-900 dark:text-white placeholder:text-zinc-500 dark:placeholder:text-[#aaaaaa] min-h-[40px] max-h-[200px]",rows:1}),(0,t.jsx)("button",{type:"button",onClick:()=>M.current?.click(),className:"p-2 text-zinc-400 hover:text-violet-500 dark:text-[#aaaaaa] dark:hover:text-[#8774e1] transition-colors",children:(0,t.jsx)(Oe,{size:24,className:"-rotate-45"})})]}),e[37]=l,e[38]=f,e[39]=h,e[40]=Y,e[41]=X,e[42]=k,e[43]=p,e[44]=y,e[45]=b,e[46]=c,e[47]=x,e[48]=Z,e[49]=O):O=e[49];let U;e[50]!==V||e[51]!==O?(U=(0,t.jsx)("div",{className:V,children:O}),e[50]=V,e[51]=O,e[52]=U):U=e[52];let F;e[53]!==a.length||e[54]!==l||e[55]!==Y||e[56]!==y||e[57]!==o||e[58]!==v||e[59]!==c?(F=c.trim()||a.length>0||l?(0,t.jsx)("button",{onClick:Y,className:"size-[50px] shrink-0 flex items-center justify-center rounded-full bg-[#8774e1] text-white shadow-md hover:scale-105 transition-transform",children:(0,t.jsx)(st,{size:24})}):y?(0,t.jsx)("button",{onClick:v,className:"size-[50px] shrink-0 flex items-center justify-center rounded-full bg-red-500 text-white shadow-md hover:scale-105 transition-transform",children:(0,t.jsx)(Ne,{size:20,fill:"currentColor"})}):(0,t.jsx)("button",{onClick:o,className:"size-[50px] shrink-0 flex items-center justify-center rounded-full bg-zinc-200 dark:bg-[#212121] text-zinc-500 dark:text-[#aaaaaa] shadow-md hover:scale-105 transition-transform",children:(0,t.jsx)(He,{size:24})}),e[53]=a.length,e[54]=l,e[55]=Y,e[56]=y,e[57]=o,e[58]=v,e[59]=c,e[60]=F):F=e[60];let H;e[61]!==U||e[62]!==F?(H=(0,t.jsxs)("div",{className:"flex items-end gap-2 w-full max-w-3xl mx-auto",children:[U,F]}),e[61]=U,e[62]=F,e[63]=H):H=e[63];let J;e[64]===Symbol.for("react.memo_cache_sentinel")?(J=(0,t.jsx)("input",{type:"file",ref:M,onChange:ae,className:"hidden",multiple:!0,accept:"image/*,video/*"}),e[64]=J):J=e[64];let Q;return e[65]!==L||e[66]!==H?(Q=(0,t.jsxs)("div",{className:"shrink-0 p-2 md:p-3 relative z-50 bg-white dark:bg-[#09090b]",children:[L,H,J]}),e[65]=L,e[66]=H,e[67]=Q):Q=e[67],Q},kt=Nt;function St(s){return`${Math.floor(s/60)}:${(s%60).toString().padStart(2,"0")}`}var _t=de(),Ct=s=>{const e=(0,_t.c)(24),{url:i,duration:r,isMe:g}=s,j=(0,_.useRef)(null),n=(0,_.useRef)(null),[z,c]=(0,_.useState)(!1),[d,C]=(0,_.useState)(!1),[a,w]=(0,_.useState)(0),[k,E]=(0,_.useState)(r||0);let M,N;e[0]!==r||e[1]!==g||e[2]!==i?(M=()=>{if(!j.current)return;const u=Ze.create({container:j.current,waveColor:g?"rgba(255, 255, 255, 0.35)":"rgba(135, 116, 225, 0.25)",progressColor:g?"#ffffff":"#8774e1",cursorColor:"transparent",barWidth:2,barGap:3,barRadius:2,height:28,normalize:!0,url:i});return n.current=u,u.on("ready",()=>{C(!0),r||E(u.getDuration())}),u.on("play",()=>c(!0)),u.on("pause",()=>c(!1)),u.on("finish",()=>{c(!1),u.setTime(0),w(0)}),u.on("audioprocess",()=>w(u.getCurrentTime())),u.on("interaction",()=>w(u.getCurrentTime())),()=>u.destroy()},N=[i,g,r],e[0]=r,e[1]=g,e[2]=i,e[3]=M,e[4]=N):(M=e[3],N=e[4]),(0,_.useEffect)(M,N);let x;e[5]===Symbol.for("react.memo_cache_sentinel")?(x=u=>{u.stopPropagation(),n.current?.playPause()},e[5]=x):x=e[5];const P=x,T=Tt,S=!d,y=g?"bg-white/20 text-white":"bg-[#8774e1] text-white";let b;e[6]!==y?(b=D("size-10 flex shrink-0 items-center justify-center rounded-full transition-all active:scale-90",y),e[6]=y,e[7]=b):b=e[7];let o;e[8]!==z||e[9]!==d?(o=d?z?(0,t.jsx)(Xe,{size:20,fill:"currentColor"}):(0,t.jsx)(ge,{size:20,fill:"currentColor",className:"ml-0.5"}):(0,t.jsx)("span",{className:"animate-pulse font-bold",children:"..."}),e[8]=z,e[9]=d,e[10]=o):o=e[10];let v;e[11]!==S||e[12]!==b||e[13]!==o?(v=(0,t.jsx)("button",{type:"button",onClick:P,disabled:S,className:b,children:o}),e[11]=S,e[12]=b,e[13]=o,e[14]=v):v=e[14];let f;e[15]===Symbol.for("react.memo_cache_sentinel")?(f=(0,t.jsx)("div",{className:"h-7 w-full overflow-hidden",children:(0,t.jsx)("div",{ref:j,className:"w-full cursor-pointer"})}),e[15]=f):f=e[15];const l=g?"text-white/80":"text-[#8774e1]";let m;e[16]!==l?(m=D("text-[11px] font-medium mt-0.5 select-none tabular-nums",l),e[16]=l,e[17]=m):m=e[17];const h=z||a>0?T(a):T(k);let p;e[18]!==m||e[19]!==h?(p=(0,t.jsxs)("div",{className:"flex-1 flex flex-col justify-center min-w-0",children:[f,(0,t.jsx)("div",{className:m,children:h})]}),e[18]=m,e[19]=h,e[20]=p):p=e[20];let R;return e[21]!==p||e[22]!==v?(R=(0,t.jsxs)("div",{className:"flex items-center gap-3 py-1 min-w-[220px] md:min-w-[280px]",children:[v,p]}),e[21]=p,e[22]=v,e[23]=R):R=e[23],R},Mt=Ct;function Tt(s){return`${Math.floor(s/60)}:${Math.floor(s%60).toString().padStart(2,"0")}`}var Rt=de(),$t=s=>{const e=(0,Rt.c)(101),{message:i,isMe:r,isLastInGroup:g,showAvatar:j,onReply:n,onEdit:z,onDelete:c}=s,d=Ae(0);let C,a;e[0]===Symbol.for("react.memo_cache_sentinel")?(C=[0,-50],a=[0,1],e[0]=C,e[1]=a):(C=e[0],a=e[1]);const w=we(d,C,a);let k,E;e[2]===Symbol.for("react.memo_cache_sentinel")?(k=[0,-50],E=[.5,1],e[2]=k,e[3]=E):(k=e[2],E=e[3]);const M=we(d,k,E);let N;e[4]!==i||e[5]!==n?(N=(A,he)=>{he.offset.x<-50&&(n(i),window.navigator.vibrate&&window.navigator.vibrate(10))},e[4]=i,e[5]=n,e[6]=N):N=e[6];const x=N,P=i.time||"Just now",T=r?"justify-end":"justify-start",S=g?"mb-4":"mb-1";let y;e[7]!==T||e[8]!==S?(y=D("group relative flex w-full items-end gap-2 mb-1",T,S),e[7]=T,e[8]=S,e[9]=y):y=e[9];let b,o,v;e[10]===Symbol.for("react.memo_cache_sentinel")?(v={opacity:0,y:10},b={opacity:1,y:0},o={duration:.2},e[10]=b,e[11]=o,e[12]=v):(b=e[10],o=e[11],v=e[12]);let f;e[13]!==w||e[14]!==M?(f={opacity:w,scale:M,right:10},e[13]=w,e[14]=M,e[15]=f):f=e[15];let l;e[16]===Symbol.for("react.memo_cache_sentinel")?(l=(0,t.jsx)(Me,{size:16}),e[16]=l):l=e[16];let m;e[17]!==f?(m=(0,t.jsx)(ce.div,{style:f,className:"absolute top-1/2 -translate-y-1/2 flex items-center justify-center size-8 rounded-full bg-violet-500/20 text-violet-600 dark:text-violet-400 z-0 pointer-events-none",children:l}),e[17]=f,e[18]=m):m=e[18];let h;e[19]===Symbol.for("react.memo_cache_sentinel")?(h={left:-50,right:0},e[19]=h):h=e[19];let p;e[20]!==d?(p={x:d},e[20]=d,e[21]=p):p=e[21];const R=r?"flex-row-reverse":"flex-row";let u;e[22]!==R?(u=D("flex max-w-[75%] items-end gap-2 relative z-10",R),e[22]=R,e[23]=u):u=e[23];let se;e[24]!==r||e[25]!==i.senderAvatar||e[26]!==i.senderName||e[27]!==j?(se=!r&&(0,t.jsx)("div",{className:"w-8 flex-shrink-0",children:j?(0,t.jsx)("img",{src:i.senderAvatar||"/placeholder-avatar.png",alt:i.senderName,className:"size-8 rounded-full object-cover bg-zinc-200 dark:bg-zinc-800"}):(0,t.jsx)("div",{className:"w-8"})}),e[24]=r,e[25]=i.senderAvatar,e[26]=i.senderName,e[27]=j,e[28]=se):se=e[28];const le=r?"items-end":"items-start";let q;e[29]!==le?(q=D("flex flex-col min-w-0",le),e[29]=le,e[30]=q):q=e[30];let X;e[31]!==r||e[32]!==i.replyTo?(X=i.replyTo&&(0,t.jsxs)("div",{className:D("mb-1 flex items-center gap-2 rounded-lg bg-zinc-100 px-3 py-2 text-xs text-zinc-500 dark:bg-zinc-800 dark:text-zinc-400 max-w-full truncate opacity-80 hover:opacity-100 cursor-pointer transition-opacity",r?"self-end":"self-start"),children:[(0,t.jsx)("div",{className:"w-0.5 h-full bg-zinc-300 dark:bg-zinc-600 rounded-full"}),(0,t.jsxs)("span",{className:"font-semibold",children:[i.replyTo.senderName,":"]}),(0,t.jsx)("span",{className:"truncate max-w-[150px]",children:i.replyTo.text})]}),e[31]=r,e[32]=i.replyTo,e[33]=X):X=e[33];const ie=r?"rounded-2xl rounded-tr-sm bg-violet-600 text-white dark:bg-violet-600":"rounded-2xl rounded-tl-sm bg-zinc-100 text-zinc-900 dark:bg-zinc-800 dark:text-zinc-100",Y=i.isOptimistic&&"opacity-70";let K;e[34]!==ie||e[35]!==Y?(K=D("relative px-4 py-2 text-[15px] leading-relaxed break-words",ie,Y),e[34]=ie,e[35]=Y,e[36]=K):K=e[36];let Z;e[37]!==r||e[38]!==i.media||e[39]!==i.text?(Z=i.media&&i.media.length>0&&(0,t.jsx)("div",{className:D("mb-2 -mx-2 -mt-2 overflow-hidden rounded-xl",i.text?"mb-2":"-mb-2"),children:i.media.map((A,he)=>(0,t.jsx)("div",{className:"relative",children:A.type==="video"||typeof A.url=="string"&&A.url.endsWith(".mp4")?(0,t.jsx)(pt,{src:A.url}):A.type==="audio"||A.type==="voice"||typeof A.url=="string"&&(A.url.endsWith(".webm")||A.url.endsWith(".mp3"))?(0,t.jsx)("div",{className:"px-2 py-1",children:(0,t.jsx)(Mt,{url:A.url,isMe:r,duration:A.duration})}):A.type==="image"||typeof A.url=="string"&&A.url.match(/\.(jpeg|jpg|gif|png|webp)$/i)?(0,t.jsx)("img",{src:A.url,className:"w-full h-auto object-cover max-h-[300px]",alt:"Attachment"}):(0,t.jsxs)("a",{href:A.url,target:"_blank",rel:"noopener noreferrer",className:D("flex items-center gap-3 p-3 rounded-lg border hover:bg-black/5 transition-colors",r?"border-white/20 bg-white/10":"border-zinc-200 bg-white dark:border-zinc-700 dark:bg-zinc-900"),children:[(0,t.jsx)("div",{className:D("p-2 rounded-full",r?"bg-white/20":"bg-zinc-100 dark:bg-zinc-800"),children:(0,t.jsx)(De,{size:20})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("p",{className:"text-sm font-medium truncate",children:A.name||"Attachment"}),(0,t.jsx)("p",{className:"text-xs opacity-70",children:A.size?`${(A.size/1024).toFixed(0)} KB`:"File"})]}),(0,t.jsx)(Ie,{size:16,className:"opacity-70"})]})},he))}),e[37]=r,e[38]=i.media,e[39]=i.text,e[40]=Z):Z=e[40];let B;e[41]!==i.media||e[42]!==i.type?(B=i.type==="voice"&&(!i.media||i.media.length===0)&&(0,t.jsx)("div",{className:"py-1",children:(0,t.jsx)("p",{className:"text-xs opacity-70 italic",children:"Voice message unavailable"})}),e[41]=i.media,e[42]=i.type,e[43]=B):B=e[43];const xe=i.text,re=r?"text-white":"text-zinc-900 dark:text-zinc-100";let ae;e[44]!==re?(ae=D(re),e[44]=re,e[45]=ae):ae=e[45];let I;e[46]!==i.text||e[47]!==ae?(I=(0,t.jsx)(gt,{content:xe,className:ae}),e[46]=i.text,e[47]=ae,e[48]=I):I=e[48];const ee=r?"text-white/80":"text-zinc-500 dark:text-zinc-400";let L;e[49]!==ee?(L=D("mt-1 flex items-center justify-end gap-1 text-[10px] opacity-70",ee),e[49]=ee,e[50]=L):L=e[50];let te;e[51]!==P?(te=(0,t.jsx)("span",{children:P}),e[51]=P,e[52]=te):te=e[52];let V;e[53]!==r||e[54]!==i.isRead?(V=r&&(0,t.jsx)("span",{children:i.isRead?(0,t.jsx)(Qe,{size:12}):(0,t.jsx)(Ke,{size:12})}),e[53]=r,e[54]=i.isRead,e[55]=V):V=e[55];let O;e[56]!==L||e[57]!==te||e[58]!==V?(O=(0,t.jsxs)("div",{className:L,children:[te,V]}),e[56]=L,e[57]=te,e[58]=V,e[59]=O):O=e[59];let U;e[60]!==K||e[61]!==Z||e[62]!==B||e[63]!==I||e[64]!==O?(U=(0,t.jsx)(tt,{children:(0,t.jsxs)("div",{className:K,children:[Z,B,I,O]})}),e[60]=K,e[61]=Z,e[62]=B,e[63]=I,e[64]=O,e[65]=U):U=e[65];let F;e[66]!==i||e[67]!==n?(F=(0,t.jsx)(ue,{onClick:()=>n(i),children:"Reply"}),e[66]=i,e[67]=n,e[68]=F):F=e[68];let H;e[69]!==i.text?(H=i.text&&(0,t.jsx)(ue,{onClick:()=>navigator.clipboard.writeText(i.text),children:"Copy"}),e[69]=i.text,e[70]=H):H=e[70];let J;e[71]!==r||e[72]!==i||e[73]!==c||e[74]!==z?(J=r&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(rt,{}),z&&i.type==="text"&&(0,t.jsx)(ue,{onClick:()=>z(i),children:"Edit"}),c&&(0,t.jsx)(ue,{className:"text-red-500 focus:text-red-500",onClick:()=>c(i),children:"Delete"})]}),e[71]=r,e[72]=i,e[73]=c,e[74]=z,e[75]=J):J=e[75];let Q;e[76]!==F||e[77]!==H||e[78]!==J?(Q=(0,t.jsxs)(it,{className:"w-48",children:[F,H,J]}),e[76]=F,e[77]=H,e[78]=J,e[79]=Q):Q=e[79];let $;e[80]!==U||e[81]!==Q?($=(0,t.jsxs)(xt,{children:[U,Q]}),e[80]=U,e[81]=Q,e[82]=$):$=e[82];let G;e[83]!==r||e[84]!==i.reactions?(G=i.reactions&&i.reactions.length>0&&(0,t.jsx)("div",{className:D("mt-1 flex flex-wrap gap-1",r?"justify-end":"justify-start"),children:i.reactions.map(At)}),e[83]=r,e[84]=i.reactions,e[85]=G):G=e[85];let W;e[86]!==q||e[87]!==X||e[88]!==$||e[89]!==G?(W=(0,t.jsxs)("div",{className:q,children:[X,$,G]}),e[86]=q,e[87]=X,e[88]=$,e[89]=G,e[90]=W):W=e[90];let ne;e[91]!==x||e[92]!==p||e[93]!==u||e[94]!==se||e[95]!==W?(ne=(0,t.jsxs)(ce.div,{drag:"x",dragConstraints:h,dragElastic:.1,onDragEnd:x,style:p,className:u,children:[se,W]}),e[91]=x,e[92]=p,e[93]=u,e[94]=se,e[95]=W,e[96]=ne):ne=e[96];let me;return e[97]!==m||e[98]!==ne||e[99]!==y?(me=(0,t.jsxs)(ce.div,{className:y,initial:v,animate:b,transition:o,children:[m,ne]}),e[97]=m,e[98]=ne,e[99]=y,e[100]=me):me=e[100],me},Et=_.memo($t);function At(s,e){return(0,t.jsx)("span",{className:"px-1.5 py-0.5 text-xs bg-zinc-100 dark:bg-zinc-800 rounded-full border border-zinc-200 dark:border-zinc-700",children:s.emoji},e)}var Pt=de();const Dt=()=>{const s=(0,Pt.c)(3);let e;s[0]===Symbol.for("react.memo_cache_sentinel")?(e={height:typeof window<"u"?window.innerHeight:0,keyboardOpen:!1,keyboardHeight:0},s[0]=e):e=s[0];const[i,r]=(0,_.useState)(e);let g,j;return s[1]===Symbol.for("react.memo_cache_sentinel")?(g=()=>{if(typeof window>"u"||!window.visualViewport)return;const n=()=>{const z=window.visualViewport,c=window.innerHeight,d=z.height,C=c-d,a=C>150,w=a?C:0;document.documentElement.style.setProperty("--viewport-height",`${d}px`),document.documentElement.style.setProperty("--keyboard-height",`${w}px`),document.documentElement.style.setProperty("--actual-viewport-height",`${d}px`),r({height:d,keyboardOpen:a,keyboardHeight:w}),a&&window.scrollTo(0,0)};return window.visualViewport.addEventListener("resize",n),window.visualViewport.addEventListener("scroll",n),window.addEventListener("resize",n),n(),()=>{window.visualViewport&&(window.visualViewport.removeEventListener("resize",n),window.visualViewport.removeEventListener("scroll",n)),window.removeEventListener("resize",n)}},j=[],s[1]=g,s[2]=j):(g=s[1],j=s[2]),(0,_.useEffect)(g,j),i};var Gt=({conversation:s,messages:e,currentUser:i,onBack:r,onSendMessage:g,onEditMessage:j,onDeleteMessage:n,onToggleReaction:z,onTyping:c,isLoading:d,isTyping:C,isOnline:a})=>{const w=Ce(),k=(0,_.useRef)(null),[E,M]=(0,_.useState)(null),[N,x]=(0,_.useState)(null),{height:P,keyboardOpen:T}=Dt();(0,_.useEffect)(()=>{T&&k.current&&setTimeout(()=>{k.current?.scrollTo({top:k.current.scrollHeight,behavior:"smooth"})},100)},[T]),(0,_.useEffect)(()=>{k.current&&(k.current.scrollTop=k.current.scrollHeight)},[e.length,C]);const S=s.isGroup?s.name:s.user?.name,y=s.isGroup?s.avatar:s.user?.avatar,b=async(o,v,f)=>{if(N){j?.(N.id,o),x(null);return}let l=[],m="text";try{if(v.length>0){const h=await Promise.all(v.map(p=>Se(p)));l=h,m=h[0].type==="video"?"video":"image"}if(f){const h=await Se(new File([f],`voice-${Date.now()}.webm`,{type:"audio/webm"}));l.push(h),m="voice"}}catch(h){console.error("Failed to upload media:",h);return}g(s.id,o,m,l,E?.id),M(null)};return(0,t.jsxs)("div",{className:"flex w-full flex-col bg-white dark:bg-[#09090b] relative overflow-hidden",style:{height:`${P}px`},children:[(0,t.jsxs)("div",{className:"flex shrink-0 items-center justify-between border-b border-zinc-100 bg-white/80 px-4 py-3 backdrop-blur-md dark:border-zinc-800 dark:bg-[#09090b]/80 z-30",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(oe,{variant:"ghost",size:"icon",className:"md:hidden -ml-2",onClick:r,children:(0,t.jsx)(Fe,{size:20})}),(0,t.jsxs)("div",{className:"relative cursor-pointer",onClick:()=>s.user&&w(`/u/${s.user.handle}`),children:[(0,t.jsxs)(je,{className:"h-10 w-10 border border-zinc-200 dark:border-zinc-800",children:[(0,t.jsx)(ve,{src:y}),(0,t.jsx)(be,{children:S?.[0]})]}),a&&!s.isGroup&&(0,t.jsx)("span",{className:"absolute bottom-0 right-0 h-3 w-3 rounded-full border-[2px] border-white bg-emerald-500 dark:border-zinc-950"})]}),(0,t.jsxs)("div",{className:"flex flex-col cursor-pointer",onClick:()=>s.user&&w(`/u/${s.user.handle}`),children:[(0,t.jsx)("h3",{className:"text-sm font-bold text-zinc-900 dark:text-zinc-100 leading-none",children:S}),(0,t.jsx)("span",{className:"text-xs text-zinc-500 dark:text-zinc-400 mt-0.5",children:(()=>{if(s.isGroup)return`${s.members?.length||0} members`;if(a)return"Active now";if(s.user?.lastSeen){const o=new Date(s.user.lastSeen);if(!isNaN(o.getTime()))return new Date().getTime()-o.getTime()<6e4?"Active now":`Last seen ${Te(s.user.lastSeen)}`}return"Offline"})()})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(oe,{variant:"ghost",size:"icon",className:"text-zinc-500 dark:text-zinc-400",children:(0,t.jsx)(Je,{size:20})}),(0,t.jsx)(oe,{variant:"ghost",size:"icon",className:"text-zinc-500 dark:text-zinc-400",children:(0,t.jsx)(Le,{size:20})}),(0,t.jsx)(oe,{variant:"ghost",size:"icon",className:"text-zinc-500 dark:text-zinc-400",children:(0,t.jsx)(Ve,{size:20})})]})]}),(0,t.jsx)(Re,{className:"flex-1 bg-zinc-50/50 dark:bg-[#09090b]",children:(0,t.jsxs)("div",{ref:k,className:"absolute inset-0 overflow-y-auto p-4 flex flex-col gap-1 pb-[100px] md:pb-[100px]",style:{overscrollBehavior:"contain"},children:[e.length===0&&!d&&(0,t.jsxs)("div",{className:"flex h-full flex-col items-center justify-center gap-4 text-center opacity-50",children:[(0,t.jsxs)(je,{className:"h-24 w-24 grayscale opacity-50",children:[(0,t.jsx)(ve,{src:y}),(0,t.jsx)(be,{children:S?.[0]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold",children:"Say hello!"}),(0,t.jsxs)("p",{className:"text-sm",children:["Start the conversation with ",S.split(" ")[0],"."]})]})]}),d&&e.length===0&&(0,t.jsx)("div",{className:"py-10 text-center text-sm text-zinc-500",children:"Loading messages..."}),e.map((o,v)=>{const f=o.sender==="me"||o.sender_id===i.id,l=v===e.length-1||e[v+1]?.sender!==o.sender;return(0,t.jsx)(Et,{message:o,isMe:f,isLastInGroup:l,showAvatar:!f&&l,onReply:M,onEdit:f?()=>x(o):void 0,onDelete:f?n:void 0,onReaction:z},o.id||v)}),C&&(0,t.jsx)("div",{className:"flex items-end gap-2 mb-2 ml-10",children:(0,t.jsx)("div",{className:"rounded-2xl bg-zinc-100 px-4 py-3 dark:bg-zinc-800 rounded-tl-sm",children:(0,t.jsx)(ht,{})})})]})}),(0,t.jsx)("div",{className:"fixed bottom-0 left-0 right-0 z-40 bg-white dark:bg-[#09090b] border-t border-zinc-100 dark:border-zinc-800 transition-transform duration-100 ease-out md:absolute md:transform-none",style:{bottom:"calc(env(safe-area-inset-bottom) + var(--keyboard-height, 0px))"},children:(0,t.jsx)("div",{className:"w-full max-w-[1500px] mx-auto md:max-w-none",children:(0,t.jsx)(kt,{onSendMessage:b,onTyping:c,replyingTo:E,setReplyingTo:M,editingMessage:N,setEditingMessage:x})})})]})},It=Gt,Lt=de();function Vt(){const s=(0,Lt.c)(1);let e;return s[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsx)("div",{className:"flex flex-col",children:[1,2,3,4,5,6].map(Ot)}),s[0]=e):e=s[0],e}function Ot(s){return(0,t.jsxs)("div",{className:"flex items-center gap-3 p-4 border-b border-zinc-50 dark:border-zinc-900",children:[(0,t.jsx)(fe,{className:"h-12 w-12 rounded-full"}),(0,t.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)(fe,{className:"h-4 w-24 rounded"}),(0,t.jsx)(fe,{className:"h-3 w-12 rounded"})]}),(0,t.jsx)(fe,{className:"h-3 w-32 rounded"})]})]},s)}var Ut=de(),Ft=()=>{const s=(0,Ut.c)(33),{id:e,currentUser:i,onlineUsers:r,msgSearchQuery:g,setMsgSearchQuery:j,userSearchResults:n,filteredConversations:z,selectedConversation:c,localMessages:d,isConvLoading:C,isMsgLoading:a,currentIsTyping:w,otherUserIsOnline:k,handleStartConversation:E,handleSelectConversation:M,sendMessage:N,editMessage:x,onDeleteMessage:P,onToggleReaction:T,sendTypingStatus:S,typingStatus:y,navigate:b}=nt();if(!i){let R;s[0]===Symbol.for("react.memo_cache_sentinel")?(R=(0,t.jsx)("div",{className:"rounded-3xl bg-zinc-50 p-6 dark:bg-zinc-900",children:(0,t.jsx)(We,{size:48,className:"text-zinc-300 dark:text-zinc-600"})}),s[0]=R):R=s[0];let u;return s[1]===Symbol.for("react.memo_cache_sentinel")?(u=(0,t.jsxs)("div",{className:"flex h-[100dvh] flex-col items-center justify-center gap-6 border-zinc-100 bg-white p-8 text-center dark:border-zinc-800 dark:bg-black md:h-[calc(100vh-1.5rem)] md:rounded-2xl md:border",children:[R,(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h3",{className:"text-2xl font-black tracking-tight dark:text-white",children:"Sign in to message"}),(0,t.jsx)("p",{className:"max-w-xs text-zinc-500 font-medium",children:"Join the conversation. Sign up or log in to start chatting."})]})]}),s[1]=u):u=s[1],u}if(C){let R;return s[2]===Symbol.for("react.memo_cache_sentinel")?(R=(0,t.jsx)("div",{className:"flex h-[100dvh] pt-4 md:h-[calc(100vh-1.5rem)] md:rounded-2xl border-zinc-100 bg-white dark:border-zinc-800 dark:bg-black md:border",children:(0,t.jsx)("div",{className:"w-full md:w-[420px]",children:(0,t.jsx)(Vt,{})})}),s[2]=R):R=s[2],R}const o=`flex ${e?"h-[100dvh]":"h-[calc(100dvh-4rem)]"} w-full max-w-full box-border overscroll-none overflow-x-hidden overflow-y-hidden bg-white shadow-2xl shadow-zinc-200/50 dark:border-zinc-800 dark:bg-[#0f0f0f] dark:shadow-none md:h-[calc(100vh-1.5rem)] md:rounded-3xl md:border md:border-zinc-200/50`,v=`flex-col md:flex md:w-[420px] ${c?"hidden":"flex"} h-full min-h-0 min-w-0 flex-1 md:flex-none bg-white dark:bg-[#0f0f0f] border-r border-zinc-100 dark:border-zinc-800 z-10`,f=e??null;let l;s[3]!==z||s[4]!==M||s[5]!==E||s[6]!==g||s[7]!==r||s[8]!==j||s[9]!==f||s[10]!==y||s[11]!==n?(l=(0,t.jsx)(yt,{conversations:z,userResults:n,onSelect:M,onStartNew:E,selectedId:f,searchQuery:g,onSearchChange:j,onlineUsers:r,typingStatus:y}),s[3]=z,s[4]=M,s[5]=E,s[6]=g,s[7]=r,s[8]=j,s[9]=f,s[10]=y,s[11]=n,s[12]=l):l=s[12];let m;s[13]!==v||s[14]!==l?(m=(0,t.jsx)("div",{className:v,children:l}),s[13]=v,s[14]=l,s[15]=m):m=s[15];let h;s[16]!==w||s[17]!==i||s[18]!==x||s[19]!==a||s[20]!==d||s[21]!==b||s[22]!==P||s[23]!==T||s[24]!==k||s[25]!==c||s[26]!==N||s[27]!==S?(h=c?(0,t.jsx)(It,{conversation:c,messages:d,currentUser:i,onBack:()=>b("/m"),onSendMessage:N,onEditMessage:x,onDeleteMessage:P,onToggleReaction:T,onTyping:R=>S(c.id,R),isLoading:a,isTyping:!!w,isOnline:!!k}):(0,t.jsxs)("div",{className:"hidden flex-1 flex-col items-center justify-center gap-6 text-zinc-500 md:flex bg-zinc-50/30 dark:bg-zinc-900/10",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"absolute -inset-10 rounded-full bg-violet-500/5 blur-3xl dark:bg-violet-500/10"}),(0,t.jsx)("div",{className:"relative rounded-[2.5rem] bg-white p-10 shadow-xl shadow-zinc-200/50 dark:bg-zinc-900/50 dark:shadow-none ring-1 ring-zinc-100 dark:ring-zinc-800",children:(0,t.jsx)(Ye,{size:80,className:"text-violet-500 stroke-[1.5]"})})]}),(0,t.jsxs)("div",{className:"text-center max-w-sm px-4 space-y-3",children:[(0,t.jsx)("h3",{className:"text-3xl font-black tracking-tighter text-zinc-900 dark:text-white",children:"Your Messages"}),(0,t.jsx)("p",{className:"text-zinc-500 font-medium text-lg",children:"Send private photos and messages to a friend or group."})]})]}),s[16]=w,s[17]=i,s[18]=x,s[19]=a,s[20]=d,s[21]=b,s[22]=P,s[23]=T,s[24]=k,s[25]=c,s[26]=N,s[27]=S,s[28]=h):h=s[28];let p;return s[29]!==o||s[30]!==m||s[31]!==h?(p=(0,t.jsxs)("div",{className:o,children:[m,h]}),s[29]=o,s[30]=m,s[31]=h,s[32]=p):p=s[32],p},ts=Ft;export{ts as default};

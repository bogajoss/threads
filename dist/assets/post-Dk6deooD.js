import{a as ct}from"./rolldown-runtime-BaZ8gS7u.js";import{T as $t,f as _t,s as J,u as Pt,y as we}from"./framework-DIDnLsp9.js";import{r as dt}from"./query-DNidMcz3.js";import{Cn as qe,Dn as It,Hn as Mt,Ht as Rt,In as At,Nn as Et,On as Lt,Pn as Dt,Pt as ve,Qt as Ot,Tn as He,Vt as Ut,Wt as Tt,Xt as Wt,an as Vt,cn as Bt,dn as mt,fn as qt,gn as Ht,hn as X,in as Jt,jn as ze,kn as Gt,nn as Kt,on as Qt,rn as Xt,t as xt,tn as je,un as Zt,wn as Yt,xn as he,yn as es}from"./ui-libs-NviTY6uf.js";import{$ as V,At as ts,Bt as Je,G as ss,H as as,Ht as is,Jt as ue,K as ns,Kt as ls,Mt as rs,Ot as Ge,Pt as Ne,R as ut,U as Ke,V as os,W as ie,Xt as cs,Zt as ds,_t as ht,a as pt,at as Qe,c as ms,ct as Xe,dt as xs,et as B,ft as us,g as hs,ht as ps,it as Ze,jt as ft,kt as fs,l as gs,lt as Ye,m as et,mt as gt,nt as tt,o as st,ot as at,p as ke,pt as bs,qt as ne,rt as it,st as nt,tt as q,ut as js,vt as ye,yt as vs}from"./index-BCmYBi0s.js";import{n as Ce,t as Se}from"./linkify-DBRQwEj8.js";import{d as zs}from"./hooks-BTYCk6Nh.js";var Ns=J(),l=ct($t(),1),t=ct(Pt(),1),ks=s=>{const e=(0,Ns.c)(21),{icon:a,count:r,label:n,onClick:d,active:i,activeColorClass:m}=s,f=m===void 0?"text-violet-600":m;let b;e[0]!==d?(b=F=>{F.stopPropagation(),d&&d(F)},e[0]=d,e[1]=b):b=e[1];const j=`${n} ${r!==void 0?`(${r})`:""}`,g=`group -ml-2 flex items-center gap-x-1 rounded-xl px-2 py-1.5 text-[12px] font-bold transition-all active:scale-95 sm:gap-x-1.5 sm:text-[13px] ${i?f:"text-zinc-500 hover:text-zinc-700 dark:hover:text-zinc-300"}`,o=`rounded-full p-2 transition-colors ${i?"":"group-hover:bg-zinc-100 dark:group-hover:bg-zinc-800"}`,p=i?2.5:2,u=i?"fill-current":"";let x;e[2]!==a||e[3]!==p||e[4]!==u?(x=(0,t.jsx)(a,{size:18,strokeWidth:p,className:u}),e[2]=a,e[3]=p,e[4]=u,e[5]=x):x=e[5];let N;e[6]!==o||e[7]!==x?(N=(0,t.jsx)("div",{className:o,children:x}),e[6]=o,e[7]=x,e[8]=N):N=e[8];let k;e[9]!==n?(k=n&&(0,t.jsx)("span",{className:"hidden xs:inline",children:n}),e[9]=n,e[10]=k):k=e[10];let w;e[11]!==i||e[12]!==r?(w=r!=null&&(0,t.jsx)("span",{className:i?"font-bold":"",children:r||0}),e[11]=i,e[12]=r,e[13]=w):w=e[13];let z;return e[14]!==k||e[15]!==w||e[16]!==b||e[17]!==j||e[18]!==g||e[19]!==N?(z=(0,t.jsxs)("button",{onClick:b,"aria-label":j,className:g,children:[N,k,w]}),e[14]=k,e[15]=w,e[16]=b,e[17]=j,e[18]=g,e[19]=N,e[20]=z):z=e[20],z},G=ks,ys=J(),ws=s=>{const e=(0,ys.c)(51),{currentUser:a,newComment:r,setNewComment:n,handleSubmitComment:d,loading:i,selectedFiles:m,setSelectedFiles:f,isUploading:b}=s;let j;e[0]!==m?(j=m===void 0?[]:m,e[0]=m,e[1]=j):j=e[1];const g=j,o=(0,l.useRef)(null);let p;e[2]!==f?(p=v=>{if(v.target.files){const _=Array.from(v.target.files);f&&f(O=>[...O,..._])}},e[2]=f,e[3]=p):p=e[3];const u=p;let x;e[4]!==f?(x=v=>{f&&f(_=>_.filter((O,Z)=>Z!==v))},e[4]=f,e[5]=x):x=e[5];const N=x;if(!a){let v;return e[6]===Symbol.for("react.memo_cache_sentinel")?(v=(0,t.jsx)("div",{className:"border-y border-zinc-100 bg-zinc-50/30 p-6 text-center dark:border-zinc-800 dark:bg-zinc-900/10",children:(0,t.jsx)("p",{className:"text-sm text-zinc-500",children:"Please login to join the conversation."})}),e[6]=v):v=e[6],v}let k;e[7]!==a.avatar||e[8]!==a.handle?(k=(0,t.jsx)(q,{src:a.avatar,alt:a.handle,className:"object-cover"}),e[7]=a.avatar,e[8]=a.handle,e[9]=k):k=e[9];let w;e[10]!==a.handle?.[0]?(w=a.handle?.[0]?.toUpperCase(),e[10]=a.handle?.[0],e[11]=w):w=e[11];let z;e[12]!==w?(z=(0,t.jsx)(B,{children:w}),e[12]=w,e[13]=z):z=e[13];let F;e[14]!==k||e[15]!==z?(F=(0,t.jsxs)(V,{className:"size-9 border border-zinc-200 dark:border-zinc-700",children:[k,z]}),e[14]=k,e[15]=z,e[16]=F):F=e[16];let P;e[17]!==n?(P=v=>n(v.target.value),e[17]=n,e[18]=P):P=e[18];let c;e[19]!==r||e[20]!==P?(c=(0,t.jsx)("textarea",{id:"comment-input",className:"min-h-[60px] w-full resize-none bg-transparent text-base outline-none placeholder:text-zinc-500 dark:text-white",placeholder:"Post your reply...",value:r,onChange:P}),e[19]=r,e[20]=P,e[21]=c):c=e[21];let S;e[22]!==N||e[23]!==g?(S=g.length>0&&(0,t.jsx)("div",{className:"mt-2 mb-2 flex flex-wrap gap-2",children:g.map((v,_)=>(0,t.jsxs)("div",{className:"relative size-20 overflow-hidden rounded-xl border border-zinc-200 dark:border-zinc-800",children:[v.type.startsWith("image/")?(0,t.jsx)("img",{src:URL.createObjectURL(v),className:"size-full object-cover",alt:""}):(0,t.jsx)("div",{className:"flex size-full items-center justify-center bg-zinc-100 dark:bg-zinc-800",children:(0,t.jsx)(Qt,{size:20,className:"text-zinc-500"})}),(0,t.jsx)("button",{onClick:()=>N(_),className:"absolute right-1 top-1 rounded-full bg-black/60 p-1 text-white transition-colors hover:bg-black",children:(0,t.jsx)(ve,{size:12})})]},_))}),e[22]=N,e[23]=g,e[24]=S):S=e[24];let R;e[25]===Symbol.for("react.memo_cache_sentinel")?(R=()=>o.current?.click(),e[25]=R):R=e[25];let I;e[26]===Symbol.for("react.memo_cache_sentinel")?(I=(0,t.jsx)("button",{type:"button",onClick:R,className:"rounded-full p-2 text-violet-600 transition-colors hover:bg-violet-50 dark:hover:bg-zinc-800",title:"Attach media",children:(0,t.jsx)(es,{size:20})}),e[26]=I):I=e[26];let E;e[27]!==u?(E=(0,t.jsxs)("div",{className:"flex gap-1 text-violet-600",children:[I,(0,t.jsx)("input",{type:"file",ref:o,onChange:u,multiple:!0,className:"hidden",accept:"image/*,video/*,application/pdf"})]}),e[27]=u,e[28]=E):E=e[28];let M;e[29]!==b||e[30]!==i||e[31]!==r||e[32]!==g.length?(M=!r.trim()&&g.length===0||i||b,e[29]=b,e[30]=i,e[31]=r,e[32]=g.length,e[33]=M):M=e[33];let T;e[34]!==b||e[35]!==i?(T=i||b?(0,t.jsx)(X,{size:16,className:"mx-auto animate-spin text-white"}):"Reply",e[34]=b,e[35]=i,e[36]=T):T=e[36];let W;e[37]!==d||e[38]!==M||e[39]!==T?(W=(0,t.jsx)(xs,{className:"min-w-[70px] !w-auto px-5 py-1.5 text-sm font-bold",onClick:d,disabled:M,children:T}),e[37]=d,e[38]=M,e[39]=T,e[40]=W):W=e[40];let L;e[41]!==E||e[42]!==W?(L=(0,t.jsxs)("div",{className:"mt-2 flex items-center justify-between border-t border-zinc-100 pt-3 dark:border-zinc-800",children:[E,W]}),e[41]=E,e[42]=W,e[43]=L):L=e[43];let D;e[44]!==c||e[45]!==S||e[46]!==L?(D=(0,t.jsxs)("div",{className:"flex-1",children:[c,S,L]}),e[44]=c,e[45]=S,e[46]=L,e[47]=D):D=e[47];let y;return e[48]!==D||e[49]!==F?(y=(0,t.jsx)("div",{className:"border-y border-zinc-100 bg-zinc-50/30 p-4 dark:border-zinc-800 dark:bg-zinc-900/10",children:(0,t.jsxs)("div",{className:"flex gap-3",children:[F,D]})}),e[48]=D,e[49]=F,e[50]=y):y=e[50],y},bt=l.memo(ws),Cs=J(),Ss=s=>{const e=(0,Cs.c)(15),{file:a}=s;let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r=(0,t.jsx)("div",{className:"flex size-10 items-center justify-center rounded-xl bg-violet-100 text-violet-600 dark:bg-violet-900/30",children:(0,t.jsx)(It,{size:20})}),e[0]=r):r=e[0];let n;e[1]!==a.name?(n=(0,t.jsx)("div",{className:"truncate text-sm font-bold dark:text-white",children:a.name}),e[1]=a.name,e[2]=n):n=e[2];let d;e[3]!==a.size?(d=a.size!==void 0&&(0,t.jsxs)("div",{className:"text-xs uppercase text-zinc-500",children:[(a.size/1024/1024).toFixed(2)," MB"]}),e[3]=a.size,e[4]=d):d=e[4];let i;e[5]!==n||e[6]!==d?(i=(0,t.jsxs)("div",{className:"min-w-0 flex-1",children:[n,d]}),e[5]=n,e[6]=d,e[7]=i):i=e[7];let m;e[8]===Symbol.for("react.memo_cache_sentinel")?(m=(0,t.jsx)(Et,{size:18}),e[8]=m):m=e[8];let f;e[9]!==a.name||e[10]!==a.url?(f=(0,t.jsx)("a",{href:a.url,download:a.name,className:"p-2 text-zinc-400 transition-colors hover:text-violet-600",onClick:$s,children:m}),e[9]=a.name,e[10]=a.url,e[11]=f):f=e[11];let b;return e[12]!==i||e[13]!==f?(b=(0,t.jsxs)("div",{className:"group mt-3 flex items-center gap-3 rounded-2xl border border-zinc-100 bg-zinc-50/50 p-3 transition-colors hover:border-violet-500/30 dark:border-zinc-800 dark:bg-zinc-900/10",children:[r,i,f]}),e[12]=i,e[13]=f,e[14]=b):b=e[14],b},Fs=Ss;function $s(s){return s.stopPropagation()}var xa=J(),_s=J(),Ps=s=>{const e=(0,_s.c)(30),{url:a}=s;let r,n;e[0]!==a?(r=["link-preview",a],n=()=>vs(a),e[0]=a,e[1]=r,e[2]=n):(r=e[1],n=e[2]);const d=!!a;let i;e[3]!==r||e[4]!==n||e[5]!==d?(i={queryKey:r,queryFn:n,staleTime:864e5,enabled:d},e[3]=r,e[4]=n,e[5]=d,e[6]=i):i=e[6];const{data:m,isLoading:f,isError:b}=dt(i);if(f){let z;return e[7]===Symbol.for("react.memo_cache_sentinel")?(z=(0,t.jsx)("div",{className:"mt-3 flex h-24 animate-pulse items-center justify-center overflow-hidden rounded-2xl border border-zinc-100 bg-zinc-50 dark:border-zinc-800 dark:bg-zinc-900/50",children:(0,t.jsx)(qe,{className:"animate-spin text-zinc-300 dark:text-zinc-700",size:24})}),e[7]=z):z=e[7],z}if(b||!m||!m.title&&!m.image)return null;let j;e[8]!==m.image||e[9]!==m.title?(j=m.image&&(0,t.jsx)("div",{className:"aspect-[1.91/1] w-full overflow-hidden border-b border-zinc-100 bg-zinc-100 dark:border-zinc-800 dark:bg-zinc-900",children:(0,t.jsx)("img",{src:m.image,alt:m.title??void 0,className:"h-full w-full object-cover transition-transform duration-500 group-hover:scale-[1.02]",onError:Ms})}),e[8]=m.image,e[9]=m.title,e[10]=j):j=e[10];let g;e[11]===Symbol.for("react.memo_cache_sentinel")?(g=(0,t.jsx)(qe,{size:12}),e[11]=g):g=e[11];let o;e[12]!==m.siteName?(o=(0,t.jsxs)("div",{className:"flex items-center gap-1.5 text-xs font-bold uppercase tracking-wider text-zinc-600",children:[g,(0,t.jsx)("span",{children:m.siteName})]}),e[12]=m.siteName,e[13]=o):o=e[13];let p;e[14]!==m.title?(p=(0,t.jsx)("div",{className:"line-clamp-2 text-[15px] font-bold leading-snug transition-colors group-hover:text-violet-700 dark:text-white",children:m.title}),e[14]=m.title,e[15]=p):p=e[15];let u;e[16]!==m.description?(u=m.description&&(0,t.jsx)("p",{className:"line-clamp-2 text-xs leading-relaxed text-zinc-600 dark:text-zinc-400",children:m.description}),e[16]=m.description,e[17]=u):u=e[17];let x;e[18]===Symbol.for("react.memo_cache_sentinel")?(x=(0,t.jsx)(Gt,{size:10}),e[18]=x):x=e[18];let N;e[19]!==a?(N=(0,t.jsxs)("div",{className:"flex items-center gap-1 pt-1 text-[11px] font-medium text-zinc-500",children:[x,(0,t.jsx)("span",{className:"truncate",children:a})]}),e[19]=a,e[20]=N):N=e[20];let k;e[21]!==N||e[22]!==o||e[23]!==p||e[24]!==u?(k=(0,t.jsxs)("div",{className:"space-y-1 p-3.5",children:[o,p,u,N]}),e[21]=N,e[22]=o,e[23]=p,e[24]=u,e[25]=k):k=e[25];let w;return e[26]!==k||e[27]!==j||e[28]!==a?(w=(0,t.jsxs)("a",{href:a,target:"_blank",rel:"noopener noreferrer",className:"group mt-3 flex flex-col overflow-hidden rounded-2xl border border-zinc-100 bg-white shadow-sm transition-all hover:bg-zinc-50 dark:border-zinc-800 dark:bg-zinc-950 dark:hover:bg-zinc-900",onClick:Is,children:[j,k]}),e[26]=k,e[27]=j,e[28]=a,e[29]=w):w=e[29],w},lt=Ps;function Is(s){return s.stopPropagation()}function Ms(s){return s.target.style.display="none"}var Rs=J(),As=s=>{const e=(0,Rs.c)(17),{src:a,poster:r}=s,n=(0,l.useRef)(null),{reportVisibility:d,unregister:i}=js(),{dataSaver:m}=ps(),f=(0,l.useId)();let b;e[0]===Symbol.for("react.memo_cache_sentinel")?(b={play:()=>{const z=n.current?.plyr;z&&(z.muted=!0,z.play().catch(Ls))},pause:()=>{n.current?.plyr?.pause()}},e[0]=b):b=e[0];const j=b;let g,o;e[1]!==m||e[2]!==f||e[3]!==d||e[4]!==i?(g=()=>{const z=new IntersectionObserver(P=>{const[c]=P;d(f,m?0:c.intersectionRatio,j)},{threshold:[0,.6]}),F=n.current?.elements?.container;return F&&z.observe(F),()=>{i(f),F&&z.unobserve(F)}},o=[f,d,i,j,m],e[1]=m,e[2]=f,e[3]=d,e[4]=i,e[5]=g,e[6]=o):(g=e[5],o=e[6]),(0,l.useEffect)(g,o);let p;e[7]!==a?(p=[{src:a,type:"video/mp4"}],e[7]=a,e[8]=p):p=e[8];let u;e[9]!==r||e[10]!==p?(u={type:"video",sources:p,poster:r},e[9]=r,e[10]=p,e[11]=u):u=e[11];let x;e[12]===Symbol.for("react.memo_cache_sentinel")?(x={controls:["play-large","play","progress","current-time","mute","volume","fullscreen"],settings:["quality","speed"],ratio:"16:9",clickToPlay:!0,hideControls:!0,resetOnEnd:!0},e[12]=x):x=e[12];let N;e[13]!==u?(N={source:u,options:x},e[13]=u,e[14]=N):N=e[14];const k=N;let w;return e[15]!==k?(w=(0,t.jsx)("div",{className:"mt-3 overflow-hidden rounded-2xl border border-zinc-100 bg-black shadow-sm dark:border-zinc-800",onClick:Ds,children:(0,t.jsx)(xt,{ref:n,...k})}),e[15]=k,e[16]=w):w=e[16],w},Es=As;function Ls(){}function Ds(s){return s.stopPropagation()}var Os=J(),Us=s=>{const e=(0,Os.c)(3),{items:a}=s,r=a===void 0?[]:a,{openLightbox:n}=us();if(!r||Array.isArray(r)&&r.length===0)return null;const d=Array.isArray(r)?r:[r],i=d.filter(Ws),m=d.filter(Vs),f=p=>{const u=i.filter(Bs).map(qs),x=i[p];n(u,u.indexOf(x.url||x.src))},b="mt-3 space-y-2",j=i.length>0&&(0,t.jsx)("div",{className:`grid gap-2 overflow-hidden rounded-2xl border border-zinc-100 dark:border-zinc-800 ${i.length===1?"grid-cols-1":i.length===2?"aspect-[16/9] grid-cols-2":(i.length===3,"aspect-[16/9] grid-cols-2 grid-rows-2")}`,children:i.map((p,u)=>(0,t.jsx)("div",{className:`relative cursor-pointer overflow-hidden bg-zinc-100 dark:bg-zinc-900 ${i.length===3&&u===0?"row-span-2":""}
                                `,onClick:x=>{p.type==="image"&&(x.stopPropagation(),f(u))},children:p.type==="video"?(0,t.jsx)(Es,{src:p.url,poster:p.poster||void 0}):(0,t.jsx)("img",{src:p.url||p.src,className:"size-full object-cover transition-transform duration-500 hover:scale-[1.02]",alt:"",loading:"lazy"})},u))}),g=m.map(Hs);let o;return e[0]!==j||e[1]!==g?(o=(0,t.jsxs)("div",{className:b,children:[j,g]}),e[0]=j,e[1]=g,e[2]=o):o=e[2],o},Ts=Us;function Ws(s){return s.type==="image"||s.type==="video"}function Vs(s){return s.type==="file"}function Bs(s){return s.type==="image"}function qs(s){return s.url||s.src}function Hs(s,e){return(0,t.jsx)(Fs,{file:s},e)}var Js=J(),Gs=s=>{const e=(0,Js.c)(18),{poll:a,onVote:r}=s,n=a.options.reduce(Ks,0),[d,i]=(0,l.useState)(null);let m;e[0]!==r||e[1]!==d?(m=u=>{d||(i(u),r&&r(u))},e[0]=r,e[1]=d,e[2]=m):m=e[2];const f=m;let b;if(e[3]!==f||e[4]!==a.options||e[5]!==n||e[6]!==d){let u;e[8]!==f||e[9]!==n||e[10]!==d?(u=(x,N)=>{const k=n>0?Math.round((x.votes+(d===x.id?1:0))/(n+(d?1:0))*100):0,w=d===x.id;return(0,t.jsxs)("div",{onClick:z=>{z.stopPropagation(),f(x.id)},className:`relative h-10 w-full overflow-hidden rounded-xl border cursor-pointer ${w?"border-violet-500 dark:border-violet-500":"border-zinc-200 dark:border-zinc-700"}`,children:[d&&(0,t.jsx)("div",{className:"absolute left-0 top-0 h-full bg-zinc-200 transition-all duration-500 dark:bg-zinc-800",style:{width:`${k}%`}}),(0,t.jsxs)("div",{className:"absolute inset-0 z-10 flex items-center justify-between px-4",children:[(0,t.jsxs)("span",{className:`text-sm font-medium ${w?"font-bold text-violet-600":"text-zinc-700 dark:text-zinc-200"}`,children:[x.text," ",w&&(0,t.jsx)(At,{size:14,className:"mb-0.5 inline ml-1"})]}),d&&(0,t.jsxs)("span",{className:"text-sm font-bold text-zinc-900 dark:text-white",children:[k,"%"]})]})]},x.id||N)},e[8]=f,e[9]=n,e[10]=d,e[11]=u):u=e[11],b=a.options.map(u),e[3]=f,e[4]=a.options,e[5]=n,e[6]=d,e[7]=b}else b=e[7];const j=n+(d?1:0),g=d?"6 days left":"Click to vote";let o;e[12]!==j||e[13]!==g?(o=(0,t.jsxs)("div",{className:"pl-1 text-xs text-zinc-500 dark:text-zinc-400",children:[j," votes •"," ",g]}),e[12]=j,e[13]=g,e[14]=o):o=e[14];let p;return e[15]!==b||e[16]!==o?(p=(0,t.jsxs)("div",{className:"mt-3 space-y-2",children:[b,o]}),e[15]=b,e[16]=o,e[17]=p):p=e[17],p},rt=Gs;function Ks(s,e){return s+e.votes}var jt=({id:s,user:e,timeAgo:a,content:r,contentClass:n,media:d,quotedPost:i,stats:m,onClick:f,repostedBy:b,onUserClick:j,currentUser:g,showToast:o,poll:p,isDetail:u,initialComments:x,onDelete:N,isComment:k,onReply:w,community:z})=>{const F=we(),{liked:P,reposted:c,localStats:S,setLocalStats:R,handleLike:I,handleRepost:E}=zs(s,m,g,o||(()=>{})),{data:M=[]}=dt({queryKey:["post",s,"commenters"],queryFn:async()=>(await Ne(s,null,3)).map(h=>h.user),enabled:ds(s)&&S.comments>0,staleTime:1e3*60*5}),{deletePost:T,updatePost:W}=bs(),[L,D]=(0,l.useState)(x||[]),[y,v]=(0,l.useState)(""),[_,O]=(0,l.useState)(!1),[Z,Y]=(0,l.useState)(!1),[Fe,$e]=(0,l.useState)(!1),[zt,_e]=(0,l.useState)(!0),[pe,Pe]=(0,l.useState)([]),[Nt,Ie]=(0,l.useState)(!1),[Me,le]=(0,l.useState)(!1),[fe,re]=(0,l.useState)(!1),[ee,Re]=(0,l.useState)(r),[ae,Ae]=(0,l.useState)(d||[]),[oe,ce]=(0,l.useState)([]),[Ee,Le]=(0,l.useState)(!1),[de,kt]=(0,l.useState)(!1),[yt,ge]=(0,l.useState)(!1),De=(0,l.useRef)(null),Oe=(0,l.useRef)(L);(0,l.useEffect)(()=>{Oe.current=L},[L]);const wt=async()=>{const h=JSON.stringify(ae)!==JSON.stringify(d||[])||oe.length>0;if(!ee.trim()||ee===r&&!h){re(!1);return}Le(!0);try{const C=[];for(const $ of oe){const A=await ye($);C.push(A)}await W(s,{content:ee,media:[...ae,...C]}),ce([]),re(!1),o&&o("Post updated")}catch(C){console.error("Failed to update post:",C),o&&o("Failed to update post")}finally{Le(!1)}},Ue=async h=>{h&&h.stopPropagation();try{await T(s),o&&o("Post deleted successfully"),N&&N(s)}catch(C){console.error("Failed to delete post:",C),o&&o("Failed to delete post")}finally{le(!1)}},me=(0,l.useCallback)(async(h=!1)=>{if(s){h?$e(!0):O(!0);try{const C=Oe.current,$=await Ne(s,h&&C.length>0?C[C.length-1].created_at:null,10);$.length<10?_e(!1):_e(!0),D(h?A=>[...A,...$]:$)}catch(C){console.error("Failed to load comments:",C)}finally{O(!1),$e(!1)}}},[s]);(0,l.useEffect)(()=>{u&&s&&me()},[u,s,me]);const Ct=async h=>{if(h.preventDefault(),!(!y.trim()&&pe.length===0||!g)){Y(!0),Ie(!0);try{const C=[];for(const $ of pe){const A=await ye($);C.push(A)}await ft(s,g.id,y,C),v(""),Pe([]),R($=>({...$,comments:($.comments||0)+1})),o&&o("Reply posted!"),me()}catch(C){console.error("Failed to post comment:",C),o&&o("Failed to post reply.")}finally{Y(!1),Ie(!1)}}},Te=({trigger:h})=>(0,t.jsxs)(os,{children:[(0,t.jsx)(ns,{asChild:!0,onClick:C=>C.stopPropagation(),children:h}),(0,t.jsxs)(as,{align:"end",className:"w-48 rounded-xl border-zinc-100 bg-white dark:border-zinc-800 dark:bg-zinc-900",children:[(0,t.jsxs)(Ke,{children:[!k&&(0,t.jsxs)(ie,{className:"cursor-pointer gap-2 py-2.5",onClick:C=>{C.stopPropagation(),navigator.clipboard.writeText(`${window.location.origin}/post/${s}`),o&&o("Link copied")},children:[(0,t.jsx)(Wt,{size:16}),(0,t.jsx)("span",{children:"Copy link"})]}),!k&&(0,t.jsxs)(ie,{className:"cursor-pointer gap-2 py-2.5",onClick:C=>{C.stopPropagation(),o&&o("Post reported")},children:[(0,t.jsx)(Yt,{size:16}),(0,t.jsx)("span",{children:"Report post"})]}),!be&&(0,t.jsxs)(ie,{className:"cursor-pointer gap-2 py-2.5",onClick:C=>{C.stopPropagation(),o&&o("User blocked")},children:[(0,t.jsx)(Ut,{size:16}),(0,t.jsxs)("span",{children:["Block @",e.handle]})]}),be&&(0,t.jsxs)(ie,{onClick:C=>{C.stopPropagation(),re(!0)},className:"cursor-pointer gap-2 py-2.5",children:[(0,t.jsx)(Jt,{size:16}),"Edit Post"]})]}),be&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ss,{}),(0,t.jsx)(Ke,{children:(0,t.jsxs)(ie,{variant:"destructive",className:"cursor-pointer gap-2 py-2.5",onClick:C=>{C.stopPropagation(),le(!0)},children:[(0,t.jsx)(Tt,{size:16}),(0,t.jsx)("span",{children:"Delete post"})]})})]})]})]}),be=g?.handle===e.handle,We=h=>{if(!h)return null;const C=fe?ae:h;return!C||Array.isArray(C)&&C.length===0?null:fe?(0,t.jsxs)("div",{className:"mt-3 space-y-3",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2 sm:grid-cols-3",children:[ae.map(($,A)=>(0,t.jsxs)("div",{className:"group relative aspect-square overflow-hidden rounded-xl border border-zinc-200 dark:border-zinc-800",children:[$.type==="video"?(0,t.jsx)("div",{className:"flex size-full items-center justify-center bg-zinc-100 dark:bg-zinc-900",children:(0,t.jsx)(He,{size:24,className:"text-zinc-400"})}):(0,t.jsx)("img",{src:$.url||$.src,className:"size-full object-cover",alt:""}),(0,t.jsx)("button",{onClick:H=>{H.stopPropagation(),Ae(K=>K.filter((Q,U)=>U!==A))},className:"absolute right-1.5 top-1.5 flex size-7 items-center justify-center rounded-full bg-black/60 text-white transition-colors hover:bg-black",children:(0,t.jsx)(ve,{size:16})})]},`old-${A}`)),oe.map(($,A)=>(0,t.jsxs)("div",{className:"group relative aspect-square overflow-hidden rounded-xl border-2 border-dashed border-violet-500 bg-violet-50/10",children:[$.type.startsWith("image/")?(0,t.jsx)("img",{src:URL.createObjectURL($),className:"size-full object-cover",alt:""}):(0,t.jsx)("div",{className:"flex size-full items-center justify-center",children:(0,t.jsx)(He,{size:24,className:"animate-pulse text-violet-500"})}),(0,t.jsx)("button",{onClick:H=>{H.stopPropagation(),ce(K=>K.filter((Q,U)=>U!==A))},className:"absolute right-1.5 top-1.5 flex size-7 items-center justify-center rounded-full bg-black/60 text-white transition-colors hover:bg-black",children:(0,t.jsx)(ve,{size:16})}),(0,t.jsx)("div",{className:"absolute bottom-1 left-1 rounded bg-violet-600 px-1 text-[8px] font-bold text-white",children:"NEW"})]},`new-${A}`)),ae.length+oe.length<4&&(0,t.jsxs)("button",{onClick:$=>{$.stopPropagation(),De.current?.click()},className:"relative flex aspect-square flex-col items-center justify-center gap-1 rounded-xl border-2 border-dashed border-zinc-200 text-zinc-400 transition-all hover:border-violet-500 hover:bg-violet-50/5 hover:text-violet-500 dark:border-zinc-800",children:[(0,t.jsx)(Kt,{size:20}),(0,t.jsx)("span",{className:"text-[10px] font-bold",children:"Add Media"})]})]}),(0,t.jsx)("input",{type:"file",ref:De,onChange:$=>{if($.target.files){const A=Array.from($.target.files);ce(H=>[...H,...A])}},multiple:!0,className:"hidden",accept:"image/*,video/*"})]}):l.isValidElement(C)?C:(0,t.jsx)(Ts,{items:C})},Ve=(h,C)=>{const $=typeof h=="string"&&cs(h);if(fe)return(0,t.jsxs)("div",{className:"mt-2 flex flex-col gap-2",onClick:A=>A.stopPropagation(),children:[(0,t.jsx)(hs,{value:ee,onChange:A=>Re(A.target.value),className:`min-h-[100px] w-full rounded-xl border-zinc-200 bg-zinc-50 focus:ring-violet-500 dark:border-zinc-800 dark:bg-zinc-900 ${$?"font-bangla text-lg":"font-english"}`,autoFocus:!0}),(0,t.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,t.jsx)("button",{onClick:()=>{re(!1),Re(r),Ae(d||[]),ce([])},className:"px-4 py-1.5 text-sm font-bold text-zinc-500 transition-colors hover:text-zinc-700 dark:hover:text-zinc-300",children:"Cancel"}),(0,t.jsx)("button",{onClick:wt,disabled:Ee||!ee.trim()||ee===r,className:"rounded-full bg-violet-600 px-4 py-1.5 text-sm font-bold text-white transition-all hover:bg-violet-700 disabled:opacity-50 active:scale-95",children:Ee?"Saving...":"Save"})]})]});if(typeof h=="string"){const A=!u&&h.length>280,H=A&&!de?h.substring(0,280):h;return(0,t.jsxs)("div",{className:`whitespace-pre-line ${C||""} ${$?"font-bangla text-[1.15em] leading-relaxed":"font-english text-[1.05em]"}`,children:[(0,t.jsx)(Ce,{options:{...Se,render:({attributes:K,content:Q})=>{const{href:U,...te}=K,Be=window.location.origin;if(U.includes("internal.tag/")){const se=decodeURIComponent(U.split("internal.tag/")[1]);return(0,t.jsxs)("span",{...te,className:ne("cursor-pointer font-bold text-rose-600 hover:underline dark:text-rose-400 font-bangla",te.className),onClick:Ft=>{Ft.stopPropagation(),F(`/tags/${se}`)},children:["#",se]},Q)}let xe=null;return U.startsWith("/")?xe=U:U.startsWith(Be)&&(xe=U.replace(Be,"")),xe?(0,t.jsx)("span",{...te,className:ne("cursor-pointer font-medium text-violet-600 hover:underline dark:text-violet-400",te.className),onClick:se=>{se.stopPropagation(),F(xe)},children:Q},Q):(0,t.jsx)("a",{href:U,...te,target:"_blank",rel:"noopener noreferrer",className:ne("text-violet-600 hover:underline dark:text-violet-400",te.className),onClick:se=>se.stopPropagation(),children:Q},Q)}},children:typeof H=="string"?H.replace(/#([\u0980-\u09FF\w]+)/g,"https://internal.tag/$1"):H}),A&&!de&&"...",A&&(0,t.jsx)("button",{onClick:K=>{K.stopPropagation(),kt(!de)},className:"ml-1 cursor-pointer font-bold text-rose-600 hover:underline dark:text-rose-400",children:de?"Show less":"See more"})]})}return h},St=h=>{v(C=>{const $=`@${h} `;return C.includes($)?C:C+$}),document.getElementById("comment-input")?.focus()};return u?(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsxs)("article",{className:"p-5 dark:bg-black",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex items-start gap-x-3",children:[(0,t.jsx)("button",{className:"shrink-0",onClick:()=>j&&j(e.handle),children:(0,t.jsxs)(V,{className:"size-12 border border-zinc-200 dark:border-zinc-700",children:[(0,t.jsx)(q,{src:e.avatar,alt:e.handle,className:"object-cover"}),(0,t.jsx)(B,{children:e.handle[0]?.toUpperCase()})]})}),(0,t.jsxs)("div",{className:"flex min-w-0 flex-1 flex-col",children:[(0,t.jsx)("div",{className:"flex flex-wrap items-center gap-x-1.5 leading-none",children:(0,t.jsxs)("div",{className:"flex min-w-0 max-w-full items-center gap-1.5",children:[(0,t.jsxs)("button",{className:"flex shrink-0 items-center gap-1 text-base font-bold text-zinc-900 hover:underline sm:text-lg dark:text-white",onClick:()=>j&&j(e.handle),children:[(0,t.jsx)("span",{className:"max-w-[200px] truncate sm:max-w-none",children:e.handle}),e.verified&&(0,t.jsx)(et,{size:16,className:"text-blue-500"})]}),z&&(0,t.jsxs)("div",{className:"flex min-w-0 items-center gap-1 text-zinc-500",children:[(0,t.jsx)(st,{size:14,className:"shrink-0 text-zinc-400"}),(0,t.jsxs)("button",{className:"flex items-center gap-1 text-[14px] font-bold text-zinc-900 hover:underline sm:text-[15px] dark:text-zinc-100",onClick:h=>{h.stopPropagation(),F(`/c/${z.handle}`)},children:[(0,t.jsxs)(V,{className:"size-4 shrink-0 border border-zinc-200 bg-zinc-100 dark:border-zinc-700 dark:bg-zinc-800",children:[(0,t.jsx)(q,{src:z.avatar,alt:z.name,className:"object-cover"}),(0,t.jsx)(B,{className:"text-[8px] font-bold text-zinc-500",children:z.name?.[0]?.toUpperCase()})]}),(0,t.jsx)("span",{className:"max-w-[200px] truncate sm:max-w-none",children:z.name})]})]})]})}),(0,t.jsxs)("span",{className:"text-xs font-medium text-zinc-500 sm:text-sm dark:text-zinc-400",children:["@",e.handle]})]})]}),(0,t.jsxs)("div",{className:"-mt-1 flex items-center gap-2",children:[(0,t.jsx)("span",{className:"whitespace-nowrap text-[13px] text-zinc-500 sm:text-sm dark:text-zinc-400",children:a||"Recent"}),(0,t.jsx)(Te,{trigger:(0,t.jsx)("button",{"aria-label":"More options",className:"rounded-full p-2 text-zinc-500 transition-colors hover:bg-zinc-100 dark:hover:bg-zinc-800",children:(0,t.jsx)(ze,{size:20})})})]})]}),(0,t.jsx)("div",{className:"mt-4 whitespace-pre-line break-words text-lg leading-relaxed text-zinc-900 sm:text-xl sm:leading-8 dark:text-zinc-100",children:Ve(r,n)}),ue(r)&&(0,t.jsx)(lt,{url:ue(r)}),We(d),p&&(0,t.jsx)(rt,{poll:p}),i&&(0,t.jsx)("div",{className:"mt-4 overflow-hidden rounded-2xl border border-zinc-200 shadow-sm dark:border-zinc-700",children:(0,t.jsx)(ot,{...i})}),(0,t.jsxs)("div",{className:"mt-4 flex items-center gap-x-6 border-b border-zinc-100 pb-4 text-sm text-zinc-500 dark:border-zinc-800 dark:text-zinc-400",children:[(0,t.jsxs)("div",{className:"flex items-center gap-x-1",children:[(0,t.jsx)("span",{className:"font-bold text-black dark:text-white",children:S.likes||0})," ",(0,t.jsx)("span",{className:"opacity-70",children:"Likes"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-x-1",children:[(0,t.jsx)("span",{className:"font-bold text-black dark:text-white",children:S.comments||0})," ",(0,t.jsx)("span",{className:"opacity-70",children:"Comments"})]})]}),(0,t.jsxs)("div",{className:"mt-4 flex w-full items-center justify-around py-1",children:[(0,t.jsx)(G,{icon:he,label:"Like",onClick:I,active:P,activeColorClass:"text-rose-500"}),!k&&(0,t.jsx)(G,{icon:je,label:"Repost",onClick:E,active:c,activeColorClass:"text-emerald-500"}),(0,t.jsx)(G,{icon:pt,label:"Comment",onClick:()=>document.getElementById("comment-input")?.focus()}),!k&&(0,t.jsx)(G,{icon:ke,label:"Share",onClick:()=>ge(!0)})]})]}),(0,t.jsx)(bt,{currentUser:g,newComment:y,setNewComment:v,handleSubmitComment:Ct,loading:Z,selectedFiles:pe,setSelectedFiles:Pe,isUploading:Nt}),(0,t.jsx)("div",{className:"divide-y divide-zinc-100 dark:divide-zinc-800",children:_?(0,t.jsx)("div",{className:"flex justify-center p-8",children:(0,t.jsx)(X,{className:"animate-spin text-violet-500"})}):(0,t.jsxs)(t.Fragment,{children:[zt&&L.length>0&&(0,t.jsxs)("button",{onClick:()=>me(!0),disabled:Fe,className:"flex w-full items-center justify-center gap-2 py-3 text-sm font-bold text-violet-600 transition-colors hover:bg-zinc-50 dark:hover:bg-zinc-900",children:[Fe&&(0,t.jsx)(X,{size:14,className:"animate-spin"}),"View more replies"]}),L.map(h=>(0,t.jsx)(jt,{...h,isComment:!0,onReply:St,onUserClick:j,currentUser:g,showToast:o,onDelete:C=>D($=>$.filter(A=>A.id!==C)),stats:{likes:h.stats?.likes||0,comments:h.stats?.comments||0,reposts:h.stats?.reposts||0},timeAgo:h.timeAgo||h.created_at},h.id))]})}),(0,t.jsx)(tt,{open:Me,onOpenChange:le,children:(0,t.jsxs)(Qe,{onClick:h=>h.stopPropagation(),children:[(0,t.jsxs)(Xe,{children:[(0,t.jsx)(Ye,{children:"Are you absolutely sure?"}),(0,t.jsx)(at,{children:"This action cannot be undone. This will permanently delete your post and all its comments."})]}),(0,t.jsxs)(nt,{children:[(0,t.jsx)(Ze,{onClick:h=>h.stopPropagation(),children:"Cancel"}),(0,t.jsx)(it,{onClick:Ue,className:"bg-rose-500 hover:bg-rose-600",children:"Delete"})]})]})})]}):(0,t.jsxs)("article",{onClick:f,className:`px-4 py-4 transition-all ${k?"border-b border-zinc-100/50 bg-transparent last:border-0 hover:bg-zinc-50/50 dark:border-zinc-800/50 dark:hover:bg-zinc-800/30":"border-b border-zinc-100 bg-white hover:bg-zinc-50/30 dark:border-zinc-800 dark:bg-black dark:hover:bg-white/[0.02]"} ${f?"cursor-pointer":""}`,children:[b&&(0,t.jsxs)("div",{className:"mb-2 ml-1 flex items-center space-x-1.5 text-[13px] font-semibold text-zinc-600",children:[(0,t.jsx)(je,{size:14,className:"text-zinc-500"}),(0,t.jsxs)("span",{className:"flex cursor-pointer items-center text-zinc-700 hover:underline dark:text-zinc-300",onClick:h=>{h.stopPropagation(),j&&j(b.handle)},children:[b.handle," Reposted"]})]}),(0,t.jsxs)("div",{className:"flex items-start gap-x-3",children:[(0,t.jsxs)("div",{className:"flex shrink-0 flex-col items-center self-stretch py-0.5",children:[(0,t.jsx)("div",{className:"cursor-pointer",onClick:h=>{h.stopPropagation(),j&&j(e.handle)},children:(0,t.jsxs)(V,{className:"size-10 border-0 shadow-sm",children:[(0,t.jsx)(q,{src:e.avatar,alt:e.handle,className:"object-cover"}),(0,t.jsx)(B,{children:e.handle[0]?.toUpperCase()})]})}),!k&&(0,t.jsx)("div",{className:`mt-2 w-0.5 flex-1 rounded-full bg-zinc-100 dark:bg-zinc-800 ${S.comments>0?"mb-1.5":""}`}),!k&&S.comments>0&&(0,t.jsx)("div",{className:"relative mb-2 mt-auto flex h-7 w-9 items-center justify-center",children:M.length>0?(0,t.jsxs)("div",{className:"relative h-full w-full",children:[(0,t.jsxs)(V,{className:"absolute top-0 left-1/2 -translate-x-1/2 z-20 size-[14px] border border-white dark:border-black shadow-sm",children:[(0,t.jsx)(q,{src:M[0]?.avatar,className:"object-cover"}),(0,t.jsx)(B,{className:"text-[5px] font-bold",children:M[0]?.handle?.[0]?.toUpperCase()})]}),M.length>1&&(0,t.jsxs)(V,{className:"absolute bottom-0 left-1 z-10 size-[16px] border-[1.5px] border-white dark:border-black shadow-sm",children:[(0,t.jsx)(q,{src:M[1]?.avatar,className:"object-cover"}),(0,t.jsx)(B,{className:"text-[6px] font-bold",children:M[1]?.handle?.[0]?.toUpperCase()})]}),M.length>2&&(0,t.jsxs)(V,{className:"absolute bottom-1 right-1 z-10 size-3 border border-white dark:border-black shadow-sm",children:[(0,t.jsx)(q,{src:M[2]?.avatar,className:"object-cover"}),(0,t.jsx)(B,{className:"text-[5px] font-bold",children:M[2]?.handle?.[0]?.toUpperCase()})]})]}):(0,t.jsxs)("div",{className:"relative h-full w-full opacity-40",children:[(0,t.jsx)("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 size-3 rounded-full bg-zinc-300 dark:bg-zinc-700"}),(0,t.jsx)("div",{className:"absolute bottom-0 left-1 size-3.5 rounded-full bg-zinc-400 dark:bg-zinc-600"}),(0,t.jsx)("div",{className:"absolute bottom-1 right-1 size-2.5 rounded-full bg-zinc-200 dark:bg-zinc-800"})]})})]}),(0,t.jsxs)("div",{className:"flex min-w-0 flex-1 flex-col",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("div",{className:"flex flex-wrap items-center gap-x-1.5 leading-none",children:(0,t.jsxs)("div",{className:"flex min-w-0 max-w-full items-center gap-1.5",children:[(0,t.jsxs)("button",{className:"flex shrink-0 items-center gap-1 text-[15px] font-bold text-zinc-900 hover:underline dark:text-white",onClick:h=>{h.stopPropagation(),j&&j(e.handle)},children:[(0,t.jsx)("span",{className:"max-w-[150px] truncate sm:max-w-none",children:e.handle}),e.verified&&(0,t.jsx)(et,{size:14,className:"text-blue-500"})]}),z&&(0,t.jsxs)("div",{className:"flex min-w-0 items-center gap-1 text-zinc-500",children:[(0,t.jsx)(st,{size:12,className:"shrink-0 text-zinc-400"}),(0,t.jsxs)("button",{className:"flex items-center gap-1 text-[13px] font-bold text-zinc-900 hover:underline dark:text-zinc-100",onClick:h=>{h.stopPropagation(),F(`/c/${z.handle}`)},children:[(0,t.jsxs)(V,{className:"size-3.5 shrink-0 border border-zinc-200 bg-zinc-100 dark:border-zinc-700 dark:bg-zinc-800",children:[(0,t.jsx)(q,{src:z.avatar,alt:z.name,className:"object-cover"}),(0,t.jsx)(B,{className:"text-[6px] font-bold text-zinc-500",children:z.name?.[0]?.toUpperCase()})]}),(0,t.jsx)("span",{className:"max-w-[150px] truncate sm:max-w-none",children:z.name})]})]})]})}),(0,t.jsxs)("div",{className:"-mt-1 flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-[12px] text-zinc-500 dark:text-zinc-400",children:a||"Recent"}),(0,t.jsx)(Te,{trigger:(0,t.jsx)("button",{"aria-label":"More options",className:"rounded-full p-2 text-zinc-500 transition-colors hover:bg-zinc-100 group-hover:bg-zinc-100 dark:hover:bg-zinc-800 dark:group-hover:bg-zinc-800/50",children:(0,t.jsx)(ze,{size:18})})})]})]}),(0,t.jsx)("div",{className:"mt-0.5 whitespace-pre-line break-words text-[15px] leading-relaxed text-zinc-900 dark:text-zinc-100",children:Ve(r,n)}),ue(r)&&(0,t.jsx)(lt,{url:ue(r)}),We(d),p&&(0,t.jsx)(rt,{poll:p}),i&&(0,t.jsx)("div",{className:"mt-3 overflow-hidden rounded-2xl border border-zinc-200 shadow-sm transition-all hover:bg-zinc-50 dark:border-zinc-800 dark:hover:bg-zinc-900",onClick:h=>{h.stopPropagation(),F(`/post/${i.id}`)},children:(0,t.jsx)(ot,{...i})}),(0,t.jsxs)("div",{className:"mt-3 flex items-center gap-x-1",children:[(0,t.jsx)(G,{icon:he,onClick:I,active:P,activeColorClass:"text-rose-500"}),(0,t.jsx)(G,{icon:mt,onClick:h=>{h?.stopPropagation(),w?w(e.handle):f&&f()}}),(0,t.jsx)(G,{icon:je,onClick:E,active:c,activeColorClass:"text-emerald-500"}),!k&&(0,t.jsx)(G,{icon:ke,onClick:h=>{h?.stopPropagation(),ge(!0)}})]}),(S.comments>0||S.likes>0)&&(0,t.jsxs)("div",{className:"mt-1 flex items-center gap-x-1.5 px-0.5 text-[14px] font-medium text-zinc-500 dark:text-zinc-400",children:[S.comments>0&&(0,t.jsxs)("button",{className:"hover:underline",children:[S.comments," ",S.comments===1?"reply":"replies"]}),S.comments>0&&S.likes>0&&(0,t.jsx)("span",{className:"opacity-50",children:"·"}),S.likes>0&&(0,t.jsxs)("button",{className:"hover:underline",children:[S.likes," ",S.likes===1?"like":"likes"]})]})]})]}),(0,t.jsx)(vt,{isOpen:yt,onClose:()=>ge(!1),url:`${window.location.origin}/post/${s}`,title:"Share Post"}),(0,t.jsx)(tt,{open:Me,onOpenChange:le,children:(0,t.jsxs)(Qe,{onClick:h=>h.stopPropagation(),children:[(0,t.jsxs)(Xe,{children:[(0,t.jsx)(Ye,{children:"Are you absolutely sure?"}),(0,t.jsx)(at,{children:"This action cannot be undone. This will permanently delete your post and all its comments."})]}),(0,t.jsxs)(nt,{children:[(0,t.jsx)(Ze,{onClick:h=>h.stopPropagation(),children:"Cancel"}),(0,t.jsx)(it,{onClick:Ue,className:"bg-rose-500 hover:bg-rose-600",children:"Delete"})]})]})})]})};function Qs(s,e){return s.id===e.id&&s.content===e.content&&s.timeAgo===e.timeAgo&&s.user.id===e.user.id&&s.user.avatar===e.user.avatar&&s.stats.likes===e.stats.likes&&s.stats.comments===e.stats.comments&&s.stats.reposts===e.stats.reposts&&s.currentUser?.id===e.currentUser?.id&&JSON.stringify(s.media)===JSON.stringify(e.media)&&JSON.stringify(s.repostedBy)===JSON.stringify(e.repostedBy)}var Xs=l.memo(jt,Qs),Zs=J(),Ys=s=>{const e=(0,Zs.c)(30),{user:a,time:r,content:n}=s,d=we();let i;e[0]!==a.avatar||e[1]!==a.handle?(i=(0,t.jsx)(q,{src:a.avatar,alt:a.handle}),e[0]=a.avatar,e[1]=a.handle,e[2]=i):i=e[2];let m;e[3]!==a.handle[0]?(m=a.handle[0]?.toUpperCase(),e[3]=a.handle[0],e[4]=m):m=e[4];let f;e[5]!==m?(f=(0,t.jsx)(B,{children:m}),e[5]=m,e[6]=f):f=e[6];let b;e[7]!==i||e[8]!==f?(b=(0,t.jsxs)(V,{className:"size-6",children:[i,f]}),e[7]=i,e[8]=f,e[9]=b):b=e[9];let j;e[10]!==a.handle?(j=(0,t.jsx)("span",{className:"text-sm font-semibold",children:a.handle}),e[10]=a.handle,e[11]=j):j=e[11];let g;e[12]!==b||e[13]!==j?(g=(0,t.jsxs)("div",{className:"flex items-center gap-x-2",children:[b,j]}),e[12]=b,e[13]=j,e[14]=g):g=e[14];let o;e[15]!==r?(o=(0,t.jsx)("span",{className:"text-xs text-zinc-500 sm:text-sm",children:r}),e[15]=r,e[16]=o):o=e[16];let p;e[17]!==g||e[18]!==o?(p=(0,t.jsxs)("div",{className:"mb-2 flex items-center justify-between gap-x-2",children:[g,o]}),e[17]=g,e[18]=o,e[19]=p):p=e[19];let u;e[20]!==d?(u={...Se,render:w=>{const{attributes:z,content:F}=w,{href:P,...c}=z,S=window.location.origin;let R=null;return P.startsWith("/")?R=P:P.startsWith(S)&&(R=P.replace(S,"")),R?(0,t.jsx)("span",{...c,className:ne("cursor-pointer font-medium text-violet-600 hover:underline dark:text-violet-400",c.className),onClick:I=>{I.stopPropagation(),d(R)},children:F},F):(0,t.jsx)("a",{href:P,...c,target:"_blank",rel:"noopener noreferrer",className:ne("text-violet-600 hover:underline dark:text-violet-400",c.className),onClick:ea,children:F},F)}},e[20]=d,e[21]=u):u=e[21];let x;e[22]!==n?(x=(0,t.jsx)("p",{className:"whitespace-pre-line text-sm text-zinc-800 dark:text-zinc-300",children:n}),e[22]=n,e[23]=x):x=e[23];let N;e[24]!==x||e[25]!==u?(N=(0,t.jsx)(Ce,{options:u,children:x}),e[24]=x,e[25]=u,e[26]=N):N=e[26];let k;return e[27]!==N||e[28]!==p?(k=(0,t.jsxs)("div",{className:"p-4",children:[p,N]}),e[27]=N,e[28]=p,e[29]=k):k=e[29],k},ot=Ys;function ea(s){return s.stopPropagation()}var ta=l.memo(({reel:s,isActive:e,isMuted:a})=>{const r=we(),{currentUser:n}=ht(),{addToast:d}=gt(),i=(0,l.useRef)(null),[m,f]=(0,l.useState)(!1),[b,j]=(0,l.useState)(!1),[g,o]=(0,l.useState)(!1),[p,u]=(0,l.useState)(null),[x,N]=(0,l.useState)(!1),[k,w]=(0,l.useState)(s.stats?.likes||0),[z,F]=(0,l.useState)(!1),[P,c]=(0,l.useState)(0),S=(0,l.useRef)(null),R=(0,l.useMemo)(()=>Array.isArray(s.media)?s.media[0]?.src||s.media[0]?.url:s.media?.src||s.media?.url||s.url,[s.media,s.url]);(0,l.useEffect)(()=>{let y;const v=i.current?.plyr;return v&&(e?y=setTimeout(()=>{typeof v.play=="function"&&v.play().catch(()=>{v&&(v.muted=!0,v.play().catch(()=>{}))})},100):typeof v.pause=="function"&&v.pause()),()=>{y&&clearTimeout(y)}},[e]),(0,l.useEffect)(()=>{if(!n?.id||!e)return;(async()=>{try{const[v,_]=await Promise.all([rs(s.id,n.id),is(n.id,s.user?.id)]);N(v),F(_)}catch(v){console.error("Failed to check interaction status:",v)}})()},[s.id,n?.id,e,s.user?.id]),(0,l.useEffect)(()=>{const y=i.current?.plyr;y&&(y.muted=a)},[a]),(0,l.useEffect)(()=>{const y=i.current?.plyr;if(!y||!e)return;const v=()=>{const _=y.currentTime,O=y.duration;O>0&&c(_/O*100)};if(typeof y.on=="function")return y.on("timeupdate",v),()=>{typeof y.off=="function"&&y.off("timeupdate",v)}},[e]),(0,l.useEffect)(()=>()=>{S.current&&clearTimeout(S.current)},[]);const I=y=>{const v=y.target;v.closest("button")||v.closest("a")||v.closest(".plyr__controls")||(S.current?(clearTimeout(S.current),S.current=null,M()):S.current=setTimeout(()=>{S.current=null,E()},250))},E=()=>{const y=i.current?.plyr;y&&(y.paused?(y.play().catch(()=>{}),u("play")):(y.pause(),u("pause")),setTimeout(()=>u(null),800))},M=async()=>{if(n&&(f(!0),setTimeout(()=>f(!1),1e3),!x)){N(!0),w(y=>y+1);try{await Je(s.id,n.id)}catch{N(!1),w(y=>y-1)}}},T=async y=>{if(y.stopPropagation(),!n)return;const v=!x;N(v),w(_=>v?_+1:_-1);try{await Je(s.id,n.id)}catch{N(!v),w(_=>v?_-1:_+1)}},W=async y=>{if(y.stopPropagation(),!n)return;const v=!z;F(v);try{await ls(n.id,s.user?.id)}catch{F(!v)}},L=y=>{y.stopPropagation(),o(!0)},D=(0,l.useMemo)(()=>({source:{type:"video",sources:[{src:R,type:"video/mp4"}]},options:{controls:[],loop:{active:!0},clickToPlay:!1,ratio:"9:16"}}),[R]);return(0,t.jsxs)("div",{"data-id":s.id,className:"reel-item relative flex h-[100dvh] w-full snap-start items-center justify-center overflow-hidden bg-black cursor-pointer",onClick:I,children:[(0,t.jsx)("div",{className:"flex h-full w-full max-w-[450px] items-center justify-center",children:(0,t.jsx)("div",{className:"w-full",children:(0,t.jsx)(xt,{ref:i,...D})})}),m&&(0,t.jsx)("div",{className:"pointer-events-none absolute inset-0 z-50 flex items-center justify-center",children:(0,t.jsx)("div",{className:"animate-in zoom-in-50 fade-out fill-mode-forwards duration-500",children:(0,t.jsx)(he,{size:120,fill:"white",className:"scale-125 text-white drop-shadow-[0_0_30px_rgba(255,255,255,0.4)]"})})}),p&&(0,t.jsx)("div",{className:"pointer-events-none absolute inset-0 z-50 flex items-center justify-center",children:(0,t.jsx)("div",{className:"animate-in fade-in zoom-in-90 scale-100 animate-out zoom-out-110 fade-out fill-mode-forwards duration-500",children:(0,t.jsx)("div",{className:"rounded-full border border-white/20 bg-white/10 p-8 shadow-2xl backdrop-blur-md",children:p==="play"?(0,t.jsx)(Xt,{size:50,fill:"white",className:"ml-1.5 text-white"}):(0,t.jsx)(Vt,{size:50,fill:"white",className:"text-white"})})})}),(0,t.jsx)("div",{className:"pointer-events-none absolute inset-0 bg-gradient-to-b from-black/20 via-transparent to-black/60"}),(0,t.jsxs)("div",{className:"pointer-events-none absolute bottom-6 left-4 right-16 text-white",children:[(0,t.jsxs)("div",{className:"pointer-events-auto mb-3 flex items-center gap-2",children:[(0,t.jsxs)(_t,{to:`/u/${s.user?.handle}`,className:"flex items-center gap-2 transition-opacity hover:opacity-80",onClick:y=>y.stopPropagation(),children:[(0,t.jsxs)(V,{className:"size-10 border-2 border-white",children:[(0,t.jsx)(q,{src:s.user?.avatar,alt:s.user?.handle,className:"object-cover"}),(0,t.jsx)(B,{children:s.user?.handle?.[0]?.toUpperCase()})]}),(0,t.jsxs)("span",{className:"font-bold",children:["@",s.user?.handle]})]}),n?.id!==s.user?.id&&(0,t.jsx)("button",{className:`ml-2 flex items-center gap-1.5 rounded-full px-3 py-1.5 text-xs font-bold transition-all active:scale-95 ${z?"border border-white/50 bg-transparent text-white":"bg-white text-black hover:bg-zinc-200"}`,onClick:W,children:z?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(gs,{size:14}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"Following"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ms,{size:14}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"Follow"})]})})]}),(0,t.jsx)(Ce,{options:{...Se,render:({attributes:y,content:v})=>{const{href:_,...O}=y,Z=!_.startsWith("/")&&(_.startsWith("http")||_.startsWith("www"));return _.startsWith("/u/")||_.startsWith("/tags/")||_.startsWith("/c/")||_.startsWith("/explore")?(0,t.jsx)("span",{...O,className:"cursor-pointer font-bold text-white hover:underline",onClick:Y=>{Y.stopPropagation(),r(_)},children:v},v):(0,t.jsx)("a",{href:_,...O,className:"text-white hover:underline",target:Z?"_blank":void 0,rel:Z?"noopener noreferrer":void 0,onClick:Y=>Y.stopPropagation(),children:v},v)}},children:(0,t.jsx)("p",{className:"mb-3 line-clamp-2 text-sm",children:s.content})}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-xs opacity-90",children:[(0,t.jsx)(Bt,{size:14,className:"animate-spin-slow"}),(0,t.jsxs)("span",{children:["Original Audio - ",s.user?.handle]})]})]}),(0,t.jsxs)("div",{className:"absolute bottom-6 right-2 z-10 flex flex-col items-center gap-6",children:[(0,t.jsxs)("div",{className:"pointer-events-auto flex flex-col items-center gap-1",children:[(0,t.jsx)("button",{className:`rounded-full p-3 backdrop-blur-md transition-all active:scale-90 ${x?"bg-rose-500/20 text-rose-500":"bg-zinc-800/50 text-white hover:bg-zinc-700"}`,onClick:T,children:(0,t.jsx)(he,{size:28,fill:x?"currentColor":"none"})}),(0,t.jsx)("span",{className:"text-xs font-bold text-white",children:k})]}),(0,t.jsxs)("div",{className:"pointer-events-auto flex flex-col items-center gap-1",children:[(0,t.jsx)("button",{className:"rounded-full bg-zinc-800/50 p-3 text-white backdrop-blur-md transition-colors hover:bg-zinc-700 active:scale-90",onClick:y=>{y.stopPropagation(),j(!0)},children:(0,t.jsx)(pt,{size:28})}),(0,t.jsx)("span",{className:"text-xs font-bold text-white",children:s.stats?.comments||0})]}),(0,t.jsxs)("div",{className:"pointer-events-auto flex flex-col items-center gap-1",children:[(0,t.jsx)("button",{className:"rounded-full bg-zinc-800/50 p-3 text-white backdrop-blur-md transition-colors hover:bg-zinc-700 active:scale-90",onClick:L,children:(0,t.jsx)(ke,{size:28})}),(0,t.jsx)("span",{className:"text-xs font-bold text-white",children:s.stats?.shares||0})]})]}),(0,t.jsx)("div",{className:"absolute bottom-0 left-0 z-50 h-[3px] w-full bg-white/20",children:(0,t.jsx)("div",{className:"h-full bg-white shadow-[0_0_8px_rgba(255,255,255,0.8)] transition-all duration-100 ease-linear",style:{width:`${P}%`}})}),(0,t.jsx)(aa,{isOpen:b,onClose:()=>j(!1),reelId:s.id,currentUser:n,showToast:d}),(0,t.jsx)(vt,{isOpen:g,onClose:()=>o(!1),url:`${window.location.origin}/reels?id=${s.id}`,title:"Share Reel"})]})},(s,e)=>s.isActive===e.isActive&&s.reel.id===e.reel.id&&s.isMuted===e.isMuted),ua=ta,sa=({isOpen:s,onClose:e,reelId:a,currentUser:r,showToast:n})=>{const[d,i]=(0,l.useState)([]),[m,f]=(0,l.useState)(!1),[b,j]=(0,l.useState)(!1),[g,o]=(0,l.useState)(""),[p,u]=(0,l.useState)([]),[x,N]=(0,l.useState)(!1),[k,w]=(0,l.useState)(!0),[z,F]=(0,l.useState)(!1),P=(0,l.useRef)(d);(0,l.useEffect)(()=>{P.current=d},[d]);const c=(0,l.useCallback)(async(R=!1)=>{if(a){R?F(!0):f(!0);try{const I=P.current,E=await Ne(a,R&&I.length>0?I[I.length-1].created_at:null,10);E.length<10?w(!1):w(!0),i(R?M=>[...M,...E]:E)}catch(I){console.error("Failed to load comments:",I),n&&n("Failed to load comments","error")}finally{f(!1),F(!1)}}},[a,n]);(0,l.useEffect)(()=>{s&&a?c():(i([]),w(!0))},[s,a,c]);const S=async R=>{if(R.preventDefault(),!(!g.trim()&&p.length===0||!r)){j(!0),N(!0);try{const I=[];for(const E of p){const M=await ye(E);I.push(M)}await ft(a,r.id,g,I),o(""),u([]),n&&n("Reply posted!"),c()}catch(I){console.error("Failed to post comment:",I),n&&n("Failed to post reply.","error")}finally{j(!1),N(!1)}}};return(0,t.jsx)(ut,{isOpen:s,onClose:e,title:"Comments",className:"max-sm:h-[95dvh] h-[85vh] overflow-hidden !p-0 sm:max-w-xl",children:(0,t.jsxs)("div",{className:"flex h-full flex-col overflow-hidden bg-white dark:bg-zinc-900",children:[(0,t.jsx)("div",{className:"mx-auto my-3 h-1.5 w-12 shrink-0 rounded-full bg-zinc-200 dark:bg-zinc-800 sm:hidden"}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto scroll-smooth scrollbar-thin scrollbar-thumb-zinc-200 dark:scrollbar-thumb-zinc-800",children:m?(0,t.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,t.jsx)(X,{className:"animate-spin text-violet-500",size:32})}):d.length>0?(0,t.jsxs)("div",{className:"flex flex-col",children:[d.map(R=>(0,t.jsx)(Xs,{...R,isComment:!0,currentUser:r,showToast:n,onDelete:I=>i(E=>E.filter(M=>M.id!==I))},R.id)),k&&(0,t.jsxs)("button",{onClick:()=>c(!0),disabled:z,className:"flex w-full items-center justify-center gap-2 py-6 text-sm font-bold text-violet-600 transition-colors hover:bg-zinc-50 dark:hover:bg-zinc-900",children:[z&&(0,t.jsx)(X,{size:16,className:"animate-spin"}),"View more replies"]})]}):(0,t.jsxs)("div",{className:"flex h-full min-h-[300px] flex-col items-center justify-center p-8 text-center text-zinc-500",children:[(0,t.jsx)("div",{className:"mb-4 flex size-16 items-center justify-center rounded-full bg-zinc-100 dark:bg-zinc-900",children:(0,t.jsx)(mt,{size:32,className:"text-zinc-400"})}),(0,t.jsx)("p",{className:"text-lg font-bold dark:text-zinc-300",children:"No comments yet"}),(0,t.jsx)("p",{className:"text-sm dark:text-zinc-500",children:"Be the first to share what you think!"})]})}),(0,t.jsx)("div",{className:"shrink-0 border-t border-zinc-100 bg-white pb-safe dark:border-zinc-800 dark:bg-zinc-900",children:(0,t.jsx)(bt,{currentUser:r,newComment:g,setNewComment:o,handleSubmitComment:S,loading:b,selectedFiles:p,setSelectedFiles:u,isUploading:x})})]})})},aa=sa,ia=({isOpen:s,onClose:e,url:a,title:r="Share"})=>{const[n,d]=(0,l.useState)(!1),[i,m]=(0,l.useState)(""),[f,b]=(0,l.useState)([]),[j,g]=(0,l.useState)(!1),[o,p]=(0,l.useState)(null),{addToast:u}=gt(),{currentUser:x}=ht(),N=(0,l.useCallback)(async()=>{if(x){g(!0);try{b((await Ge(x.id)).map(c=>c.user).filter(c=>c!==null).slice(0,5))}catch(c){console.error("Failed to fetch conversations:",c)}finally{g(!1)}}},[x?.id]);(0,l.useEffect)(()=>{s&&x?N():(m(""),b([]))},[s,x,N]);const k=(0,l.useCallback)(async()=>{if(x){g(!0);try{b((await Ge(x.id)).map(c=>c.user).filter(c=>c!==null&&(c.name?.toLowerCase().includes(i.toLowerCase())||c.handle.toLowerCase().includes(i.toLowerCase()))))}catch(c){console.error("Search failed:",c)}finally{g(!1)}}},[i,x?.id]);(0,l.useEffect)(()=>{const c=setTimeout(()=>{i.trim()&&s?k():!i.trim()&&s&&N()},300);return()=>clearTimeout(c)},[i,s,k,N]);const w=async c=>{c&&c.stopPropagation();try{await navigator.clipboard.writeText(a),d(!0),u("Link copied to clipboard!","success"),setTimeout(()=>d(!1),2e3)}catch(S){console.error("Failed to copy:",S),u("Failed to copy link","error")}},z=async c=>{if(x){p(c.id);try{await ts(await fs(x.id,c.id),x.id,a,"text"),u(`Sent to ${c.name||c.handle}!`,"success")}catch(S){console.error("Failed to send message:",S),u("Failed to send message","error")}finally{p(null)}}},F=[{name:"X",icon:Rt,color:"bg-black text-white",href:`https://twitter.com/intent/tweet?url=${encodeURIComponent(a)}`},{name:"Facebook",icon:Lt,color:"bg-[#1877F2] text-white",href:`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(a)}`},{name:"LinkedIn",icon:Ht,color:"bg-[#0A66C2] text-white",href:`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(a)}`},{name:"WhatsApp",icon:Zt,color:"bg-[#25D366] text-white",href:`https://wa.me/?text=${encodeURIComponent(a)}`},{name:"Email",icon:qt,color:"bg-zinc-600 text-white",href:`mailto:?body=${encodeURIComponent(a)}`}],P=async()=>{if(navigator.share)try{await navigator.share({title:r,url:a})}catch(c){c.name!=="AbortError"&&console.error("Native share failed:",c)}else w()};return(0,t.jsx)(ut,{isOpen:s,onClose:e,title:r,className:"max-w-[420px] !p-0 overflow-hidden",children:(0,t.jsxs)("div",{className:"flex h-full flex-col bg-white dark:bg-zinc-900",children:[(0,t.jsx)("div",{className:"px-5 pb-2 pt-4",children:(0,t.jsxs)("div",{className:"group relative",children:[(0,t.jsx)(Ot,{className:"absolute left-3 top-1/2 size-4 -translate-y-1/2 text-zinc-400 transition-colors group-focus-within:text-violet-500"}),(0,t.jsx)("input",{type:"text",placeholder:"Search people...",value:i,onChange:c=>m(c.target.value),className:"w-full rounded-xl border-none bg-zinc-100 py-2.5 pl-10 pr-4 text-sm transition-all focus:ring-2 focus:ring-violet-500/20 outline-none dark:bg-zinc-800/50"})]})}),(0,t.jsx)("div",{className:"no-scrollbar flex min-h-[100px] items-center gap-4 overflow-x-auto px-5 py-4",children:j?(0,t.jsx)("div",{className:"flex flex-1 justify-center",children:(0,t.jsx)(X,{size:24,className:"animate-spin text-zinc-400"})}):f.length>0?f.map(c=>(0,t.jsxs)("button",{onClick:()=>z(c),disabled:o!==null,className:"group flex shrink-0 flex-col items-center gap-1.5 disabled:opacity-50",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"size-14 overflow-hidden rounded-full border-2 border-white shadow-sm transition-transform group-hover:scale-105 bg-zinc-100 dark:bg-zinc-800 dark:border-zinc-900",children:(0,t.jsx)("img",{src:c.avatar||`https://i.pravatar.cc/150?u=${c.id}`,alt:c.handle,className:"size-full object-cover"})}),o===c.id&&(0,t.jsx)("div",{className:"absolute inset-0 flex items-center justify-center rounded-full bg-black/40",children:(0,t.jsx)(X,{size:16,className:"animate-spin text-white"})})]}),(0,t.jsx)("span",{className:"max-w-[60px] truncate text-[10px] font-medium text-zinc-500 dark:text-zinc-400",children:c.name?.split(" ")[0]||c.handle})]},c.id)):(0,t.jsx)("div",{className:"flex-1 py-2 text-center",children:(0,t.jsx)("span",{className:"text-xs text-zinc-400",children:"No people found"})})}),(0,t.jsx)("div",{className:"mx-5 h-px bg-zinc-100 dark:bg-zinc-800"}),(0,t.jsxs)("div",{className:"grid grid-cols-5 gap-2 px-5 py-6",children:[F.map(c=>(0,t.jsxs)("a",{href:c.href,target:"_blank",rel:"noopener noreferrer",className:"group flex flex-col items-center gap-2",children:[(0,t.jsx)("div",{className:`size-12 ${c.color} flex items-center justify-center rounded-2xl shadow-md transition-all group-hover:-translate-y-1 group-hover:scale-110 group-hover:shadow-lg`,children:(0,t.jsx)(c.icon,{size:20,strokeWidth:2.5})}),(0,t.jsx)("span",{className:"text-[10px] font-bold uppercase tracking-tighter text-zinc-500 dark:text-zinc-400",children:c.name})]},c.name)),(0,t.jsxs)("button",{onClick:P,className:"group flex flex-col items-center gap-2",children:[(0,t.jsx)("div",{className:"flex size-12 items-center justify-center rounded-2xl border border-zinc-200 bg-zinc-100 text-zinc-600 shadow-sm transition-all group-hover:-translate-y-1 group-hover:scale-110 dark:border-zinc-700 dark:bg-zinc-800 dark:text-zinc-300",children:(0,t.jsx)(ze,{size:20,strokeWidth:2.5})}),(0,t.jsx)("span",{className:"text-[10px] font-bold uppercase tracking-tighter text-zinc-500 dark:text-zinc-400",children:"More"})]})]}),(0,t.jsx)("div",{className:"px-5 pb-6",children:(0,t.jsxs)("div",{className:"group relative",children:[(0,t.jsx)("input",{type:"text",readOnly:!0,value:a,className:"w-full rounded-2xl border border-zinc-200 bg-zinc-50 py-3.5 pl-4 pr-14 text-sm font-medium transition-colors focus:outline-none group-hover:border-zinc-300 dark:border-zinc-800 dark:bg-zinc-950 dark:group-hover:border-zinc-700"}),(0,t.jsx)("button",{onClick:w,className:`absolute right-1.5 top-1/2 flex -translate-y-1/2 items-center gap-2 rounded-xl h-10 px-4 text-xs font-bold shadow-sm transition-all active:scale-95 ${n?"bg-emerald-500 text-white":"bg-zinc-900 text-white hover:opacity-90 dark:bg-white dark:text-zinc-900"}`,children:n?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(Mt,{size:14,strokeWidth:3}),(0,t.jsx)("span",{children:"Copied"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(Dt,{size:14,strokeWidth:3}),(0,t.jsx)("span",{children:"Copy"})]})})]})}),(0,t.jsx)("div",{className:"px-5 pb-5",children:(0,t.jsxs)("button",{onClick:e,className:"group relative flex w-full items-center justify-center overflow-hidden rounded-2xl bg-zinc-900 py-4 font-bold text-white transition-all hover:shadow-xl hover:shadow-zinc-900/10 active:scale-[0.98] dark:bg-white dark:text-zinc-900 dark:hover:shadow-white/10",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-zinc-500 to-zinc-600 opacity-0 transition-opacity duration-300 group-hover:opacity-100"}),(0,t.jsx)("div",{className:"relative flex items-center gap-2",children:(0,t.jsx)("span",{children:"Close"})})]})})]})})},vt=ia;export{Xs as n,ua as t};

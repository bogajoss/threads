import{a as xe}from"./rolldown-runtime-BaZ8gS7u.js";import{c as ue,l as pe,w as je}from"./framework-3lkjbTvb.js";import"./database-COznt_u0.js";import{Nt as ce,mr as ve}from"./ui-libs-oBja7Jpd.js";import"./media-libs-C98UjHPF.js";import{H as ge,In as ze,Ut as de,ht as Ne,i as ke,in as ye,it as _e,lt as Ce,nn as we,nt as Me,p as Se,r as Pe,rn as Ie,rt as Fe}from"./index-DBQHd7-E.js";import{r as Ee}from"./post-CCsYsY5F.js";import"./text-processing-BMF44JzJ.js";import"./VideoPlayer-SH4759GX.js";import"./actionsheet-CZ1IlIXz.js";import{t as Oe}from"./skeleton-profile-1OIlDRGp.js";var Ue=ue(),me=xe(je(),1),t=xe(pe(),1),Ae=K=>{const e=(0,Ue.c)(106),{onPostInCommunity:Q}=K,[V,ne]=(0,me.useState)(!1),[W,oe]=(0,me.useState)(!1),{community:s,loading:fe,isMember:a,userRole:he,isJoining:X,communityPosts:q,loadingPosts:Y,isFetchingMorePosts:Z,hasMorePosts:ee,handleJoinToggle:te,loadCommunityPosts:se,refetchCommunity:ie,currentUser:r,navigate:l}=Se(),L=he==="admin",re=a&&(!s?.isPrivate||L);if(fe){let i;return e[0]===Symbol.for("react.memo_cache_sentinel")?(i=(0,t.jsx)("div",{className:"flex min-h-screen flex-col",children:(0,t.jsx)(Oe,{})}),e[0]=i):i=e[0],i}if(!s){let i;return e[1]===Symbol.for("react.memo_cache_sentinel")?(i=(0,t.jsx)("div",{className:"flex min-h-[600px] items-center justify-center overflow-hidden rounded-none bg-background md:rounded-xl",children:(0,t.jsx)(Ne,{title:"Community doesn't exist",message:"Try searching for another. The community could not be found.",icon:ce})}),e[1]=i):i=e[1],i}let n;e[2]!==l?(n=()=>l(-1),e[2]=l,e[3]=n):n=e[3];let T;e[4]===Symbol.for("react.memo_cache_sentinel")?(T=(0,t.jsx)(ve,{size:22}),e[4]=T):T=e[4];let o;e[5]!==n?(o=(0,t.jsx)("button",{onClick:n,className:"rounded-full p-1 transition-colors hover:bg-zinc-100 dark:text-white dark:hover:bg-zinc-800",children:T}),e[5]=n,e[6]=o):o=e[6];let c;e[7]!==s.name?(c=(0,t.jsx)("h5",{className:"text-lg font-bold leading-none dark:text-white",children:s.name}),e[7]=s.name,e[8]=c):c=e[8];let d;e[9]!==s.membersCount?(d=(0,t.jsxs)("span",{className:"mt-0.5 text-xs text-zinc-500",children:[s.membersCount," Members"]}),e[9]=s.membersCount,e[10]=d):d=e[10];let m;e[11]!==c||e[12]!==d?(m=(0,t.jsxs)("div",{className:"flex flex-col",children:[c,d]}),e[11]=c,e[12]=d,e[13]=m):m=e[13];let x;e[14]!==o||e[15]!==m?(x=(0,t.jsx)("div",{className:"sticky top-0 z-20 border-b border-zinc-100 bg-white/90 px-4 py-3 backdrop-blur-md dark:border-zinc-800 dark:bg-black/90",children:(0,t.jsxs)("div",{className:"flex items-center gap-x-4",children:[o,m]})}),e[14]=o,e[15]=m,e[16]=x):x=e[16];let f;e[17]!==s.cover?(f=(0,t.jsx)("div",{className:"relative h-32 overflow-hidden bg-zinc-100 dark:bg-zinc-900 sm:h-52",children:s.cover?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("img",{src:s.cover,className:"h-full w-full object-cover",alt:""}),(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/40 to-transparent"})]}):(0,t.jsx)("div",{className:"h-full w-full bg-gradient-to-br from-violet-500/20 to-fuchsia-500/20"})}),e[17]=s.cover,e[18]=f):f=e[18];let h;e[19]!==s.avatar?(h=(0,t.jsx)("div",{className:"size-24 overflow-hidden rounded-3xl border-4 border-white bg-zinc-100 shadow-xl dark:border-black dark:bg-zinc-800 sm:size-32",children:(0,t.jsx)("img",{src:s.avatar,className:"size-full object-cover",alt:""})}),e[19]=s.avatar,e[20]=h):h=e[20];let b;e[21]!==L?(b=L&&(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{onClick:()=>ne(!0),className:"flex size-10 items-center justify-center rounded-full border border-zinc-200 text-zinc-700 transition-all hover:bg-zinc-50 active:scale-95 dark:border-zinc-800 dark:text-zinc-300 dark:hover:bg-zinc-900",title:"Edit Community",children:(0,t.jsx)(Me,{size:20})}),(0,t.jsx)("button",{onClick:()=>oe(!0),className:"flex size-10 items-center justify-center rounded-full border border-zinc-200 text-zinc-700 transition-all hover:bg-zinc-50 active:scale-95 dark:border-zinc-800 dark:text-zinc-300 dark:hover:bg-zinc-900",title:"Settings",children:(0,t.jsx)(Ce,{size:20})})]}),e[21]=L,e[22]=b):b=e[22];const le=a?"outline":"primary",ae=a?"group/join border-zinc-200 hover:border-rose-200 hover:bg-rose-50 hover:text-rose-600 dark:border-zinc-800 dark:hover:bg-rose-900/20 dark:hover:border-rose-900/30":"bg-zinc-950 text-white hover:scale-105 dark:bg-white dark:text-zinc-950";let u;e[23]!==ae?(u=ze("flex h-10 items-center justify-center gap-2 rounded-full px-4 font-bold transition-all",ae),e[23]=ae,e[24]=u):u=e[24];let p;e[25]!==a?(p=a?(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{className:"relative h-5 w-auto flex items-center justify-center",children:[(0,t.jsxs)("span",{className:"group-hover/join:opacity-0 transition-opacity duration-200 flex items-center gap-2",children:[(0,t.jsx)(_e,{size:18}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"Joined"})]}),(0,t.jsx)("span",{className:"absolute inset-0 opacity-0 group-hover/join:opacity-100 transition-opacity duration-200 flex items-center justify-center",children:"Leave"})]})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(Fe,{size:18}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"Join"})]}),e[25]=a,e[26]=p):p=e[26];let j;e[27]!==te||e[28]!==X||e[29]!==le||e[30]!==u||e[31]!==p?(j=(0,t.jsx)(de,{variant:le,onClick:te,loading:X,className:u,children:p}),e[27]=te,e[28]=X,e[29]=le,e[30]=u,e[31]=p,e[32]=j):j=e[32];let v;e[33]!==b||e[34]!==j?(v=(0,t.jsxs)("div",{className:"flex gap-2 pb-1",children:[b,j]}),e[33]=b,e[34]=j,e[35]=v):v=e[35];let g;e[36]!==v||e[37]!==h?(g=(0,t.jsxs)("div",{className:"relative z-10 -mt-12 mb-4 flex items-end justify-between sm:-mt-16",children:[h,v]}),e[36]=v,e[37]=h,e[38]=g):g=e[38];let z;e[39]!==s.name?(z=(0,t.jsx)("h1",{className:"text-2xl font-black leading-tight tracking-tight dark:text-white sm:text-3xl",children:s.name}),e[39]=s.name,e[40]=z):z=e[40];let N;e[41]!==s.handle?(N=(0,t.jsxs)("p",{className:"text-sm font-bold text-zinc-500 sm:text-base",children:["c/",s.handle]}),e[41]=s.handle,e[42]=N):N=e[42];let k;e[43]!==s.description?(k=s.description&&(0,t.jsx)("p",{className:"mt-4 max-w-2xl text-[15px] leading-relaxed dark:text-zinc-300 sm:text-base",children:s.description}),e[43]=s.description,e[44]=k):k=e[44];let y;e[45]!==s.membersCount?(y=(0,t.jsx)("span",{className:"text-base font-extrabold text-zinc-900 transition-colors dark:text-white",children:s.membersCount}),e[45]=s.membersCount,e[46]=y):y=e[46];let B;e[47]===Symbol.for("react.memo_cache_sentinel")?(B=(0,t.jsx)("span",{className:"font-medium text-zinc-500 dark:text-zinc-400",children:"Members"}),e[47]=B):B=e[47];let _;e[48]!==y?(_=(0,t.jsxs)("button",{className:"group flex cursor-pointer items-baseline gap-x-1.5",children:[y,B]}),e[48]=y,e[49]=_):_=e[49];let C;e[50]!==s.postsCount?(C=(0,t.jsx)("span",{className:"text-base font-extrabold text-zinc-900 transition-colors dark:text-white",children:s.postsCount}),e[50]=s.postsCount,e[51]=C):C=e[51];let H;e[52]===Symbol.for("react.memo_cache_sentinel")?(H=(0,t.jsx)("span",{className:"font-medium text-zinc-500 dark:text-zinc-400",children:"Posts"}),e[52]=H):H=e[52];let w;e[53]!==C?(w=(0,t.jsxs)("button",{className:"group flex cursor-pointer items-baseline gap-x-1.5",children:[C,H]}),e[53]=C,e[54]=w):w=e[54];let M;e[55]!==_||e[56]!==w?(M=(0,t.jsxs)("div",{className:"relative z-10 flex gap-4 pt-2 text-sm sm:gap-6",children:[_,w]}),e[55]=_,e[56]=w,e[57]=M):M=e[57];let S;e[58]!==z||e[59]!==N||e[60]!==k||e[61]!==M?(S=(0,t.jsxs)("div",{className:"space-y-1",children:[z,N,k,M]}),e[58]=z,e[59]=N,e[60]=k,e[61]=M,e[62]=S):S=e[62];let P;e[63]!==g||e[64]!==S?(P=(0,t.jsxs)("div",{className:"px-4 pb-6",children:[g,S]}),e[63]=g,e[64]=S,e[65]=P):P=e[65];let I;e[66]!==P||e[67]!==f?(I=(0,t.jsxs)("div",{className:"relative",children:[f,P]}),e[66]=P,e[67]=f,e[68]=I):I=e[68];let F;e[69]!==re||e[70]!==s||e[71]!==r?.avatar||e[72]!==r?.handle||e[73]!==Q?(F=re&&(0,t.jsx)("div",{className:"border-b border-zinc-100 p-4 dark:border-zinc-800",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)(we,{className:"size-10 border border-zinc-200 dark:border-zinc-800",children:[(0,t.jsx)(ye,{src:r?.avatar,alt:r?.handle,className:"object-cover"}),(0,t.jsx)(Ie,{children:r?.handle?.[0]?.toUpperCase()})]}),(0,t.jsxs)("button",{onClick:()=>Q(s),className:"flex-1 rounded-2xl bg-zinc-100 px-5 py-3 text-left text-[15px] font-medium text-zinc-500 transition-all hover:bg-zinc-200/70 dark:bg-zinc-900/50 dark:hover:bg-zinc-900",children:["Share something in ",s.name,"..."]})]})}),e[69]=re,e[70]=s,e[71]=r?.avatar,e[72]=r?.handle,e[73]=Q,e[74]=F):F=e[74];let E;e[75]!==s.name||e[76]!==q||e[77]!==r||e[78]!==ee||e[79]!==Z||e[80]!==se||e[81]!==Y||e[82]!==l?(E=Y?(0,t.jsx)("div",{className:"flex flex-col",children:[1,2,3].map($e)}):q.length>0?(0,t.jsxs)(t.Fragment,{children:[q.map(i=>(0,t.jsx)(Ee,{currentUser:r,...i,onClick:()=>l(`/p/${i.id}`),onUserClick:be=>l(`/u/${be}`)},i.feed_id||i.id)),ee&&(0,t.jsxs)("div",{className:"flex justify-center p-6",children:[(0,t.jsx)(de,{variant:"secondary",className:"w-full max-w-xs",onClick:()=>se(),loading:Z,children:"Load more"})," "]})]}):(0,t.jsxs)("div",{className:"flex flex-col items-center gap-4 p-20 text-center text-zinc-500",children:[(0,t.jsx)("div",{className:"mb-2 rounded-full bg-zinc-50 p-6 dark:bg-zinc-900",children:(0,t.jsx)(ce,{size:40,className:"text-zinc-300"})}),(0,t.jsx)("h3",{className:"text-xl font-bold dark:text-white",children:"No posts here yet"}),(0,t.jsxs)("p",{className:"text-sm max-w-[250px]",children:["Be the first to share something in ",s.name,"!"]})]}),e[75]=s.name,e[76]=q,e[77]=r,e[78]=ee,e[79]=Z,e[80]=se,e[81]=Y,e[82]=l,e[83]=E):E=e[83];let O;e[84]!==F||e[85]!==E?(O=(0,t.jsxs)("div",{className:"border-t border-zinc-100 dark:border-zinc-800",children:[F,E]}),e[84]=F,e[85]=E,e[86]=O):O=e[86];let U;e[87]!==I||e[88]!==O||e[89]!==x?(U=(0,t.jsxs)("div",{className:"relative",children:[x,I,O]}),e[87]=I,e[88]=O,e[89]=x,e[90]=U):U=e[90];let R;e[91]===Symbol.for("react.memo_cache_sentinel")?(R=()=>ne(!1),e[91]=R):R=e[91];let A;e[92]!==ie?(A=()=>{ie()},e[92]=ie,e[93]=A):A=e[93];let $;e[94]!==s||e[95]!==V||e[96]!==A?($=(0,t.jsx)(ke,{isOpen:V,onClose:R,community:s,onUpdate:A}),e[94]=s,e[95]=V,e[96]=A,e[97]=$):$=e[97];let D;e[98]===Symbol.for("react.memo_cache_sentinel")?(D=()=>oe(!1),e[98]=D):D=e[98];let J;e[99]!==s||e[100]!==W?(J=(0,t.jsx)(Pe,{isOpen:W,onClose:D,community:s}),e[99]=s,e[100]=W,e[101]=J):J=e[101];let G;return e[102]!==U||e[103]!==$||e[104]!==J?(G=(0,t.jsxs)("div",{className:"min-h-screen overflow-hidden rounded-none border-zinc-100 bg-white pb-20 dark:border-zinc-800 dark:bg-black md:rounded-xl",children:[U,$,J]}),e[102]=U,e[103]=$,e[104]=J,e[105]=G):G=e[105],G},Ve=Ae;function $e(K){return(0,t.jsx)(ge,{},K)}export{Ve as default};

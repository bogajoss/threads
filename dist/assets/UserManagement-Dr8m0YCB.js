import{a as W}from"./rolldown-runtime-BaZ8gS7u.js";import{o as Q,s as Z}from"./animations-DnIvWaa_.js";import{c as ee}from"./framework-qAfQIUpw.js";import"./database-CdmW3A7f.js";import{$t as se,Cn as te,Jt as H,Mt as J,Sn as O,Yt as R,xn as ae}from"./ui-libs-B8EJCVYu.js";import"./media-libs-BYH8vgqC.js";import{Ct as le,G as T,H as q,Nn as re,Pt as D,St as ie,U as l,V as E,W as G,nt as ne,wt as de}from"./index-BDHAGO-X.js";import{t as ce}from"./useAdmin-T_l6ss6A.js";var oe=ee(),P=W(Z(),1),s=W(Q(),1),me=()=>{const e=(0,oe.c)(62),[r,X]=(0,P.useState)("");let C;e[0]===Symbol.for("react.memo_cache_sentinel")?(C={role:"all",status:"all"},e[0]=C):C=e[0];const[a,I]=(0,P.useState)(C),{users:c,actions:y}=ce();let i,o,m,x,n,d,h;if(e[1]!==y||e[2]!==a||e[3]!==r||e[4]!==c.data||e[5]!==c.isLoading){h=Symbol.for("react.early_return_sentinel");e:{let B;if(e[13]!==a||e[14]!==r?(B=t=>{if(!t)return!1;const S=t.name.toLowerCase().includes(r.toLowerCase())||t.handle.toLowerCase().includes(r.toLowerCase()),Y=a.role==="all"||t.role===a.role,K=a.status==="all"||a.status==="verified"&&t.verified||a.status==="unverified"&&!t.verified||a.status==="banned"&&t.isBanned;return S&&Y&&K},e[13]=a,e[14]=r,e[15]=B):B=e[15],i=(c.data||[]).filter(B),c.isLoading){let t;e[16]===Symbol.for("react.memo_cache_sentinel")?(t=(0,s.jsx)("div",{className:"flex min-h-[600px] items-center justify-center",children:(0,s.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,s.jsx)(te,{className:"h-8 w-8 animate-spin text-violet-600"}),(0,s.jsx)("p",{className:"text-sm font-semibold text-zinc-500",children:"Loading users..."})]})}),e[16]=t):t=e[16],h=t;break e}x="space-y-6",e[17]===Symbol.for("react.memo_cache_sentinel")?(n=(0,s.jsx)("div",{className:"space-y-2",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-2xl bg-violet-600 text-white",children:(0,s.jsx)(J,{className:"h-5 w-5"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-black tracking-tight",children:"User Directory"}),(0,s.jsx)("p",{className:"text-sm text-zinc-500",children:"Manage platform users and permissions"})]})]})}),e[17]=n):n=e[17];let L;e[18]===Symbol.for("react.memo_cache_sentinel")?(L=(0,s.jsx)(se,{className:"absolute left-3 top-1/2 h-5 w-5 -translate-y-1/2 text-zinc-400"}),e[18]=L):L=e[18];let U;e[19]===Symbol.for("react.memo_cache_sentinel")?(U=t=>X(t.target.value),e[19]=U):U=e[19];let v;e[20]!==r?(v=(0,s.jsxs)("div",{className:"relative",children:[L,(0,s.jsx)(ne,{placeholder:"Search by name or handle...",value:r,onChange:U,className:"h-11 rounded-xl border-zinc-200 bg-white pl-10 text-sm font-medium dark:border-zinc-800 dark:bg-black"})]}),e[20]=r,e[21]=v):v=e[21];let g;e[22]!==a?(g=t=>I({...a,role:t}),e[22]=a,e[23]=g):g=e[23];let $;e[24]===Symbol.for("react.memo_cache_sentinel")?($=(0,s.jsx)(G,{className:"w-[180px] rounded-xl border-zinc-200 dark:border-zinc-800",children:(0,s.jsx)(T,{placeholder:"Filter by role"})}),e[24]=$):$=e[24];let A;e[25]===Symbol.for("react.memo_cache_sentinel")?(A=(0,s.jsxs)(q,{className:"rounded-xl dark:bg-zinc-900",children:[(0,s.jsx)(l,{value:"all",children:"All Roles"}),(0,s.jsx)(l,{value:"user",children:"Users"}),(0,s.jsx)(l,{value:"moderator",children:"Moderators"}),(0,s.jsx)(l,{value:"admin",children:"Admins"})]}),e[25]=A):A=e[25];let p;e[26]!==a.role||e[27]!==g?(p=(0,s.jsxs)(E,{value:a.role,onValueChange:g,children:[$,A]}),e[26]=a.role,e[27]=g,e[28]=p):p=e[28];let N;e[29]!==a?(N=t=>I({...a,status:t}),e[29]=a,e[30]=N):N=e[30];let V;e[31]===Symbol.for("react.memo_cache_sentinel")?(V=(0,s.jsx)(G,{className:"w-[180px] rounded-xl border-zinc-200 dark:border-zinc-800",children:(0,s.jsx)(T,{placeholder:"Filter by status"})}),e[31]=V):V=e[31];let M;e[32]===Symbol.for("react.memo_cache_sentinel")?(M=(0,s.jsxs)(q,{className:"rounded-xl dark:bg-zinc-900",children:[(0,s.jsx)(l,{value:"all",children:"All Status"}),(0,s.jsx)(l,{value:"verified",children:"Verified"}),(0,s.jsx)(l,{value:"unverified",children:"Unverified"}),(0,s.jsx)(l,{value:"banned",children:"Banned"})]}),e[32]=M):M=e[32];let k;e[33]!==a.status||e[34]!==N?(k=(0,s.jsxs)(E,{value:a.status,onValueChange:N,children:[V,M]}),e[33]=a.status,e[34]=N,e[35]=k):k=e[35];let z;e[36]!==a.role||e[37]!==a.status?(z=(a.role!=="all"||a.status!=="all")&&(0,s.jsx)(D,{variant:"outline",size:"sm",onClick:()=>I({role:"all",status:"all"}),className:"rounded-xl",children:"Clear Filters"}),e[36]=a.role,e[37]=a.status,e[38]=z):z=e[38];let w;e[39]!==p||e[40]!==k||e[41]!==z?(w=(0,s.jsxs)("div",{className:"flex flex-wrap gap-3",children:[p,k,z]}),e[39]=p,e[40]=k,e[41]=z,e[42]=w):w=e[42],e[43]!==v||e[44]!==w?(d=(0,s.jsxs)("div",{className:"space-y-4",children:[v,w]}),e[43]=v,e[44]=w,e[45]=d):d=e[45],o="overflow-hidden rounded-3xl border border-zinc-200 dark:border-zinc-800",m=i.length===0?(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center bg-white py-12 text-center dark:bg-black",children:[(0,s.jsx)(J,{className:"h-12 w-12 text-zinc-300 dark:text-zinc-700"}),(0,s.jsx)("p",{className:"mt-4 font-semibold text-zinc-600 dark:text-zinc-400",children:"No users found"}),(0,s.jsx)("p",{className:"text-sm text-zinc-500",children:"Try adjusting your search or filters"})]}):(0,s.jsx)("div",{className:"divide-y divide-zinc-200 bg-white dark:divide-zinc-800 dark:bg-black",children:i.map(t=>t?(0,s.jsxs)("div",{className:"flex flex-col gap-4 p-4 transition-colors hover:bg-zinc-50 dark:hover:bg-zinc-900/50 sm:flex-row sm:items-center sm:justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4 min-w-0",children:[(0,s.jsxs)("div",{className:"relative shrink-0",children:[(0,s.jsxs)(ie,{className:"h-12 w-12 rounded-2xl ring-2 ring-zinc-200 dark:ring-zinc-800",children:[(0,s.jsx)(de,{src:t.avatar,className:"rounded-2xl"}),(0,s.jsx)(le,{className:"rounded-2xl bg-violet-500/10 text-sm font-bold text-violet-600",children:t.name[0]?.toUpperCase()})]}),t.verified&&(0,s.jsx)(R,{className:"absolute -bottom-2 -right-2 h-5 w-5 rounded-full bg-blue-500 p-0.5 text-white"})]}),(0,s.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,s.jsx)("h3",{className:"truncate font-semibold text-foreground",children:t.name}),(0,s.jsxs)("p",{className:"truncate text-sm text-zinc-500",children:["@",t.handle]})]})]}),(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-2 sm:justify-end",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 rounded-xl bg-zinc-100 px-3 py-1.5 dark:bg-zinc-900",children:[(0,s.jsx)(ae,{className:"h-3.5 w-3.5 text-zinc-600 dark:text-zinc-400"}),(0,s.jsx)("span",{className:"text-xs font-semibold uppercase tracking-wider text-zinc-700 dark:text-zinc-300",children:t.role})]}),t.verified&&(0,s.jsxs)("div",{className:"flex items-center gap-1.5 rounded-xl bg-blue-500/10 px-3 py-1.5",children:[(0,s.jsx)(R,{className:"h-3.5 w-3.5 text-blue-600 dark:text-blue-400"}),(0,s.jsx)("span",{className:"text-xs font-semibold text-blue-700 dark:text-blue-400",children:"Verified"})]}),t.isBanned&&(0,s.jsxs)("div",{className:"flex items-center gap-1.5 rounded-xl bg-rose-500/10 px-3 py-1.5",children:[(0,s.jsx)(H,{className:"h-3.5 w-3.5 text-rose-600 dark:text-rose-400"}),(0,s.jsx)("span",{className:"text-xs font-semibold text-rose-700 dark:text-rose-400",children:"Banned"})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 sm:justify-end",children:[(0,s.jsxs)(E,{value:t.role,onValueChange:S=>y.updateRole({userId:t.id,role:S}),children:[(0,s.jsx)(G,{className:"w-[130px] rounded-lg border-zinc-200 text-xs font-semibold dark:border-zinc-800",children:(0,s.jsx)(T,{})}),(0,s.jsxs)(q,{className:"rounded-xl dark:bg-zinc-900",children:[(0,s.jsx)(l,{value:"user",children:"User"}),(0,s.jsx)(l,{value:"moderator",children:"Moderator"}),(0,s.jsx)(l,{value:"admin",children:"Admin"})]})]}),(0,s.jsx)(D,{variant:"outline",size:"sm",onClick:()=>y.toggleVerification({userId:t.id,verified:!t.verified}),title:t.verified?"Remove verification":"Verify user",className:"h-9 rounded-lg px-3",children:t.verified?(0,s.jsx)(O,{className:"h-4 w-4"}):(0,s.jsx)(R,{className:"h-4 w-4"})}),(0,s.jsx)(D,{variant:"outline",size:"sm",onClick:()=>{const S=t.isBanned?"unban":"ban";confirm(`Are you sure you want to ${S} @${t.handle}?`)&&y.toggleBan({userId:t.id,banned:!t.isBanned})},title:t.isBanned?"Unban user":"Ban user",className:re("h-9 rounded-lg px-3",t.isBanned?"border-emerald-200 bg-emerald-50 text-emerald-700 hover:bg-emerald-100 dark:border-emerald-900 dark:bg-emerald-900/20 dark:text-emerald-400":"border-rose-200 bg-rose-50 text-rose-700 hover:bg-rose-100 dark:border-rose-900 dark:bg-rose-900/20 dark:text-rose-400"),children:t.isBanned?(0,s.jsx)(O,{className:"h-4 w-4"}):(0,s.jsx)(H,{className:"h-4 w-4"})})]})]},t.id):null)})}e[1]=y,e[2]=a,e[3]=r,e[4]=c.data,e[5]=c.isLoading,e[6]=i,e[7]=o,e[8]=m,e[9]=x,e[10]=n,e[11]=d,e[12]=h}else i=e[6],o=e[7],m=e[8],x=e[9],n=e[10],d=e[11],h=e[12];if(h!==Symbol.for("react.early_return_sentinel"))return h;let f;e[46]!==o||e[47]!==m?(f=(0,s.jsx)("div",{className:o,children:m}),e[46]=o,e[47]=m,e[48]=f):f=e[48];let u;e[49]!==i.length?(u=(0,s.jsx)("span",{className:"font-semibold text-foreground",children:i.length}),e[49]=i.length,e[50]=u):u=e[50];const F=c.data?.length||0;let b;e[51]!==F?(b=(0,s.jsx)("span",{className:"font-semibold text-foreground",children:F}),e[51]=F,e[52]=b):b=e[52];let j;e[53]!==b||e[54]!==u?(j=(0,s.jsx)("div",{className:"rounded-2xl border border-zinc-200 bg-white p-4 dark:border-zinc-800 dark:bg-black",children:(0,s.jsxs)("p",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:["Showing"," ",u," ","of"," ",b," ","users"]})}),e[53]=b,e[54]=u,e[55]=j):j=e[55];let _;return e[56]!==j||e[57]!==x||e[58]!==n||e[59]!==d||e[60]!==f?(_=(0,s.jsxs)("div",{className:x,children:[n,d,f,j]}),e[56]=j,e[57]=x,e[58]=n,e[59]=d,e[60]=f,e[61]=_):_=e[61],_},pe=me;export{pe as default};

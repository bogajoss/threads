import{o as b}from"./rolldown-runtime-CIzSbf4l.js";import{c as S,l as R,v as $,w}from"./framework-i0QTTZ5z.js";import{Fn as x}from"./index-ChLbt0A9.js";import{i as P,n as y,r as U,t as D}from"./text-processing-53UaexJb.js";var I=U("hashtag",{isLink:!0});function M({scanner:e,parser:t}){const{POUND:i,UNDERSCORE:p,FULLWIDTHMIDDLEDOT:l,ASCIINUMERICAL:m,ALPHANUMERICAL:h}=e.tokens,{alpha:c,numeric:u,alphanumeric:r,emoji:a}=e.tokens.groups,o=t.start.tt(i),s=o.tt(p),n=new y(I);o.tt(m,n),o.tt(h,n),o.ta(u,s),o.ta(c,n),o.ta(a,n),o.ta(l,n),s.tt(m,n),s.tt(h,n),s.ta(c,n),s.ta(a,n),s.ta(l,n),s.ta(u,s),s.tt(p,s),n.ta(r,n),n.ta(a,n),n.tt(l,n),n.tt(p,n)}P("hashtag",M);var j=U("mention",{isLink:!0,toHref(){return"/"+this.toString().slice(1)}});function O({scanner:e,parser:t}){const{HYPHEN:i,SLASH:p,UNDERSCORE:l,AT:m}=e.tokens,{domain:h}=e.tokens.groups,c=t.start.tt(m),u=c.tt(i);u.tt(i,u);const r=c.tt(l,j);c.ta(h,r),u.tt(l,r),u.ta(h,r),r.ta(h,r),r.tt(i,r),r.tt(l,r);const a=r.tt(p);a.ta(h,r),a.tt(l,r),a.tt(i,r)}P("mention",O);const T={formatHref:(e,t)=>t==="mention"?`/u/${e.substring(1)}`:t==="hashtag"?`/tags/${e.substring(1)}`:e,attributes:{onClick:e=>e.stopPropagation(),className:"cursor-pointer font-bold text-rose-600 hover:underline dark:text-rose-400"},validate:{hashtag:e=>/^#[\u0980-\u09FF\w]+$/.test(e)},target:(e,t)=>t==="url"?"_blank":void 0,rel:(e,t)=>t==="url"?"noopener noreferrer":void 0},N={BASE_URL:"https://feed.systemadminbd.com",APP_ID:"com.mysys.app",CUSTOM_SCHEME:"mysys"},A=()=>(window.hasOwnProperty("Capacitor"),N.BASE_URL),E=e=>`${A()}${e.startsWith("/")?e:`/${e}`}`,K=e=>E(`/p/${e}`),Q=e=>E(`/r/${e}`);var F=S(),V=b(w(),1),_=b(R(),1),B=e=>{const t=(0,F.c)(13),{content:i,className:p,onClick:l}=e,m=$(),h=W;let c;t[0]!==i?(c=typeof i=="string"?h(i):i,t[0]=i,t[1]=c):c=t[1];const u=c;let r;t[2]!==p?(r=x("whitespace-pre-line break-words",p),t[2]=p,t[3]=r):r=t[3];let a;t[4]!==m?(a={...T,render:n=>{const{attributes:H,content:d}=n,{href:f,...g}=H,C=A();if(f.includes("internal.tag/")){const v=decodeURIComponent(f.split("internal.tag/")[1]);return(0,_.jsxs)("span",{...g,className:x("cursor-pointer font-bold text-blue-600 hover:underline dark:text-blue-400",g.className),onClick:L=>{L.stopPropagation(),m(`/tags/${v}`)},children:["#",v]},d)}let k=null;return f.startsWith("/")?k=f:f.startsWith(C)&&(k=f.replace(C,"")),k?(0,_.jsx)("span",{...g,className:x("cursor-pointer font-medium text-blue-600 hover:underline dark:text-blue-400",g.className),onClick:v=>{v.stopPropagation(),m(k)},children:d},d):(0,_.jsx)("a",{href:f,...g,target:"_blank",rel:"noopener noreferrer",className:x("text-blue-600 hover:underline dark:text-blue-400",g.className),onClick:q,children:d},d)}},t[4]=m,t[5]=a):a=t[5];let o;t[6]!==u||t[7]!==a?(o=(0,_.jsx)(D,{options:a,children:u}),t[6]=u,t[7]=a,t[8]=o):o=t[8];let s;return t[9]!==l||t[10]!==r||t[11]!==o?(s=(0,_.jsx)("div",{className:r,onClick:l,children:o}),t[9]=l,t[10]=r,t[11]=o,t[12]=s):s=t[12],s},X=B;function W(e){return e.replace(/#([\u0980-\u09FF\w]+)/g,"https://internal.tag/$1")}function q(e){return e.stopPropagation()}export{K as n,Q as r,X as t};

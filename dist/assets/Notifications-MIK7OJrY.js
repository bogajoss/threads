import{a as p}from"./rolldown-runtime-BaZ8gS7u.js";import{E as N,c as j,d as w}from"./framework-CsA6nn9m.js";import"./database-BiY55TQY.js";import{Yn as k,_n as f,bn as y,un as z,wn as _}from"./ui-libs-DmKhZXsk.js";import"./media-libs-Btb8RX-I.js";import"./animations-T0TOZv2c.js";import{cn as C,it as A,mt as L,nt as S,p as q,rt as F,y as M}from"./index-DJ2NyKJ5.js";import{i as I}from"./hooks-B19cr6xF.js";var $=j(),K=p(N(),1),t=p(w(),1),E=()=>{const e=(0,$.c)(20),{notifications:r,isLoading:b,isFetchingMore:o,hasMore:a,loadNotifications:h,refreshNotifications:x,handleNotificationClick:u}=I(),v=P,g=R;if(b&&r.length===0){let s;return e[0]===Symbol.for("react.memo_cache_sentinel")?(s=(0,t.jsx)("div",{className:"flex h-[50vh] items-center justify-center",children:(0,t.jsx)(f,{className:"h-8 w-8 animate-spin text-violet-600"})}),e[0]=s):s=e[0],s}let i;e[1]!==x?(i=async()=>await x(),e[1]=x,e[2]=i):i=e[2];let d;e[3]===Symbol.for("react.memo_cache_sentinel")?(d=(0,t.jsx)("div",{className:"sticky top-0 z-10 border-b border-zinc-100 bg-white/80 p-4 backdrop-blur-md dark:bg-black/80 dark:border-zinc-800",children:(0,t.jsx)("h2",{className:"text-xl font-bold dark:text-white",children:"Notifications"})}),e[3]=d):d=e[3];let n;e[4]!==u||e[5]!==r?(n=r.length>0?(0,t.jsx)("div",{className:"divide-y divide-zinc-100 dark:divide-zinc-800",children:r.map(s=>(0,t.jsxs)("div",{onClick:()=>u(s),className:`flex cursor-pointer gap-4 p-4 transition-colors hover:bg-zinc-50 dark:hover:bg-zinc-900/50 ${s.is_read?"":"bg-violet-50/30 dark:bg-violet-900/10"}`,children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)(S,{className:"h-12 w-12 border border-zinc-100 dark:border-zinc-800",children:[(0,t.jsx)(A,{src:s.avatar}),(0,t.jsx)(F,{children:s.user?.[0]?.toUpperCase()||"?"})]}),(0,t.jsx)("div",{className:"absolute -bottom-1 -right-1 rounded-full bg-white p-1 shadow-sm dark:bg-zinc-900",children:v(s.type)})]}),(0,t.jsx)("div",{className:"flex flex-1 flex-col gap-1",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"text-sm dark:text-zinc-100",children:[(0,t.jsxs)("span",{className:"font-bold",children:["@",s.user]})," ",g(s)]}),(0,t.jsx)("span",{className:"text-xs text-zinc-500",children:C(s.created_at)})]})})]},s.id))}):(0,t.jsx)("div",{className:"p-16 text-center text-zinc-500",children:(0,t.jsx)("p",{className:"font-medium",children:"No notifications yet."})}),e[4]=u,e[5]=r,e[6]=n):n=e[6];let c;e[7]!==a||e[8]!==o||e[9]!==h||e[10]!==r.length?(c=r.length>0&&a&&(0,t.jsx)("div",{className:"flex justify-center p-4",children:(0,t.jsx)(L,{variant:"ghost",onClick:()=>h(),disabled:o,className:"text-sm",children:o?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(f,{className:"mr-2 h-4 w-4 animate-spin"}),"Loading..."]}):"Load more"})}),e[7]=a,e[8]=o,e[9]=h,e[10]=r.length,e[11]=c):c=e[11];let l;e[12]!==a||e[13]!==r.length?(l=r.length>0&&!a&&(0,t.jsx)("div",{className:"p-8 text-center text-sm text-zinc-500",children:"You've caught up with everything!"}),e[12]=a,e[13]=r.length,e[14]=l):l=e[14];let m;return e[15]!==i||e[16]!==n||e[17]!==c||e[18]!==l?(m=(0,t.jsx)("div",{className:"min-h-screen overflow-hidden rounded-none border-y border-zinc-100 bg-white pb-20 shadow-sm dark:bg-black dark:border-zinc-800 md:rounded-xl md:border",children:(0,t.jsxs)(M,{onRefresh:i,children:[d,n,c,l]})}),e[15]=i,e[16]=n,e[17]=c,e[18]=l,e[19]=m):m=e[19],m},O=E;function P(e){switch(e){case"like":return(0,t.jsx)(_,{className:"h-4 w-4 fill-red-500 text-red-500"});case"mention":return(0,t.jsx)(k,{className:"h-4 w-4 text-violet-500"});case"repost":return(0,t.jsx)(y,{className:"h-4 w-4 text-green-500"});case"comment":return(0,t.jsx)(z,{className:"h-4 w-4 text-blue-500"});case"follow":return(0,t.jsx)(q,{className:"h-4 w-4 text-zinc-500"});default:return null}}function R(e){switch(e.type){case"like":return"liked your post";case"mention":return"mentioned you in a post";case"repost":return"reposted your post";case"comment":return"replied to your post";case"follow":return"started following you";default:return"interacted with you"}}export{O as default};

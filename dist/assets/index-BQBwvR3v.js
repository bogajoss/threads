import{a as e}from"./rolldown-runtime-DDUpfMIz.js";import{$ as t,A as n,At as r,B as i,C as a,Ct as o,D as s,Dt as c,E as l,Et as u,F as d,Ft as f,G as p,H as m,I as h,It as g,J as _,K as v,L as y,Lt as b,M as x,Mt as S,N as C,Nt as w,O as T,Ot as E,P as D,Pt as O,Q as k,R as A,S as j,St as M,T as N,Tt as P,U as F,V as I,W as L,X as R,Y as z,Z as B,_ as V,_t as H,a as ee,at as U,b as W,c as G,ct as K,d as te,dt as ne,et as re,f as ie,ft as ae,g as oe,gt as se,h as ce,ht as le,i as ue,it as de,j as fe,jt as pe,k as me,kt as he,l as ge,lt as _e,m as ve,mt as ye,n as be,nt as xe,o as Se,ot as Ce,p as we,pt as Te,q as Ee,r as De,rt as Oe,s as ke,st as Ae,t as je,tt as Me,u as Ne,ut as Pe,v as Fe,vt as q,w as Ie,wt as Le,x as Re,xt as ze,y as Be,z as Ve}from"./react-jRiXFMp2.js";import{t as He}from"./query-B90BCAvF.js";import{t as Ue}from"./supabase-luEpLNq7.js";import{n as We,r as Ge,t as Ke}from"./vendor-BMykRcYb.js";(function(){let e=document.createElement(`link`).relList;if(e&&e.supports&&e.supports(`modulepreload`))return;for(let e of document.querySelectorAll(`link[rel="modulepreload"]`))n(e);new MutationObserver(e=>{for(let t of e)if(t.type===`childList`)for(let e of t.addedNodes)e.tagName===`LINK`&&e.rel===`modulepreload`&&n(e)}).observe(document,{childList:!0,subtree:!0});function t(e){let t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin===`use-credentials`?t.credentials=`include`:e.crossOrigin===`anonymous`?t.credentials=`omit`:t.credentials=`same-origin`,t}function n(e){if(e.ep)return;e.ep=!0;let n=t(e);fetch(e.href,n)}})();var qe=g(),J=e(b(),1);const Y=Ue(`https://dbkcedktqhueqnulnosq.supabase.co`,`eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRia2NlZGt0cWh1ZXFudWxub3NxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njg5NzE1NTQsImV4cCI6MjA4NDU0NzU1NH0.m_Tv-H7o5mL1Nac6TH-S1JkS1x7ZN1AK_4Mt1hZlkvU`),Je=e=>e?{id:e.id,handle:e.username,name:e.display_name,avatar:e.avatar_url||`https://static.hey.xyz/images/brands/lens.svg`,cover:e.cover_url||`https://static.hey.xyz/images/hero.webp`,verified:e.is_verified,bio:e.bio,location:e.location,website:e.website,follower_count:e.follower_count||0,following_count:e.following_count||0}:null,Ye=e=>e?{...e,stats:{comments:e.comments_count||0,likes:e.likes_count||0,mirrors:e.mirrors_count||0},user:Je(e.user),timeAgo:new Date(e.created_at).toLocaleDateString()}:null,Xe=e=>e?{...e,user:e.actor?.username,avatar:e.actor?.avatar_url||`https://static.hey.xyz/images/brands/lens.svg`}:null,Ze=e=>e?{...e,media:e.media_url,user:Je(e.user)}:null,Qe=(e,t)=>{let n=(e.other_participants?.find(e=>e.user_id!==t)||e.other_participants?.[0])?.user;return{id:e.conversation.id,handle:n?.username,user:Je(n),lastMessage:`Open to see messages`,time:new Date(e.conversation.last_message_at).toLocaleTimeString([],{hour:`2-digit`,minute:`2-digit`}),unread:0}},$e=async(e,t={})=>{if(!e.type.startsWith(`image/`))return e;let n={maxSizeMB:1,maxWidthOrHeight:1920,useWebWorker:!0,initialQuality:.8,...t};try{let t=await Ge(e,n);return console.log(`Original size: ${(e.size/1024/1024).toFixed(2)} MB`),console.log(`Compressed size: ${(t.size/1024/1024).toFixed(2)} MB`),t}catch(t){return console.error(`Image compression failed:`,t),e}},et=async(e,t=`media`)=>{let n=e;e.type.startsWith(`image/`)&&(n=await $e(e));let r=e.name.split(`.`).pop(),i=`${`${Math.random()}-${Date.now()}.${r}`}`,{data:a,error:o}=await Y.storage.from(t).upload(i,n);if(o)throw o;let{data:{publicUrl:s}}=Y.storage.from(t).getPublicUrl(a.path);return{url:s,name:e.name,type:e.type.startsWith(`image/`)?`image`:e.type.startsWith(`video/`)?`video`:`file`,size:n.size}},tt=async()=>{let{data:e,error:t}=await Y.from(`posts`).select(`
            *,
            user:users!user_id (
                id,
                username,
                display_name,
                avatar_url,
                is_verified,
                bio,
                location,
                website,
                follower_count,
                following_count
            )
        `).order(`created_at`,{ascending:!1});if(t)throw t;return e.map(Ye)},nt=async e=>{let{data:t,error:n}=await Y.from(`posts`).select(`
            *,
            user:users!user_id (
                id,
                username,
                display_name,
                avatar_url,
                is_verified,
                bio,
                location,
                website,
                follower_count,
                following_count
            )
        `).eq(`id`,e).single();if(n)throw n;return Ye(t)},rt=async({content:e,media:t=[],type:n=`text`,userId:r,poll:i=null,parentId:a=null})=>{let{data:o,error:s}=await Y.from(`posts`).insert([{user_id:r,content:e,media:t,type:n,poll:i,parent_id:a,created_at:new Date().toISOString()}]).select(`
            *,
            user:users!user_id (
                id,
                username,
                display_name,
                avatar_url,
                is_verified
            )
        `);if(s)throw s;return Ye(o[0])},it=async()=>{let{data:e,error:t}=await Y.from(`users`).select(`*`);if(t)throw t;return e.reduce((e,t)=>{let n=Je(t);return e[n.handle]=n,e},{})},at=async e=>{let{data:t,error:n}=await Y.from(`users`).select(`*`).eq(`username`,e).maybeSingle();if(n)throw n;return Je(t)},ot=async(e,t)=>{let{error:n}=await Y.from(`users`).update({display_name:t.name,username:t.handle,avatar_url:t.avatar,bio:t.bio,cover_url:t.cover,website:t.website,location:t.location}).eq(`id`,e);if(n)throw n},st=async e=>{if(!e)return[];let{data:t,error:n}=await Y.from(`notifications`).select(`
            *,
            actor:users!actor_id (
                username,
                avatar_url
            )
        `).eq(`recipient_id`,e).order(`created_at`,{ascending:!1});if(n)throw n;return t.map(Xe)},ct=async e=>{if(!e)return[];let{data:t,error:n}=await Y.from(`conversation_participants`).select(`
            conversation:conversations (
                id,
                last_message_at
            ),
            other_participants:conversation_participants!inner (
                user_id,
                user:users (
                    id,
                    username,
                    display_name,
                    avatar_url
                )
            )
        `).eq(`user_id`,e);if(n)throw n;return t.map(t=>Qe(t,e))},lt=async e=>{let{data:t,error:n}=await Y.from(`messages`).select(`*`).eq(`conversation_id`,e).order(`created_at`,{ascending:!0});if(n)throw n;return t},ut=async(e,t,n)=>{let{data:r,error:i}=await Y.from(`messages`).insert([{conversation_id:e,sender_id:t,content:n}]).select();if(i)throw i;return await Y.from(`conversations`).update({last_message_at:new Date().toISOString()}).eq(`id`,e),r[0]},dt=async e=>{let{data:t,error:n}=await Y.from(`posts`).select(`
            *,
            user:users!user_id (
                id,
                username,
                display_name,
                avatar_url,
                is_verified
            )
        `).eq(`parent_id`,e).order(`created_at`,{ascending:!0});if(n)throw n;return t.map(Ye)},ft=async(e,t,n)=>{let{data:r,error:i}=await Y.from(`posts`).insert([{parent_id:e,user_id:t,content:n,type:`text`,created_at:new Date().toISOString()}]).select(`
            *,
            user:users!user_id (
                id,
                username,
                display_name,
                avatar_url,
                is_verified
            )
        `);if(i)throw i;return Ye(r[0])},pt=async(e,t)=>{let{data:n}=await Y.from(`likes`).select(`*`).eq(`post_id`,e).eq(`user_id`,t).maybeSingle();return n?(await Y.from(`likes`).delete().eq(`post_id`,e).eq(`user_id`,t),!1):(await Y.from(`likes`).insert([{post_id:e,user_id:t}]),!0)},mt=async(e,t)=>{if(!t)return!1;let{data:n}=await Y.from(`likes`).select(`*`).eq(`post_id`,e).eq(`user_id`,t).maybeSingle();return!!n},ht=async(e,t)=>{let{data:n}=await Y.from(`follows`).select(`*`).eq(`follower_id`,e).eq(`following_id`,t).maybeSingle();return n?(await Y.from(`follows`).delete().eq(`follower_id`,e).eq(`following_id`,t),!1):(await Y.from(`follows`).insert([{follower_id:e,following_id:t}]),!0)},gt=async(e,t)=>{if(!e)return!1;let{data:n}=await Y.from(`follows`).select(`*`).eq(`follower_id`,e).eq(`following_id`,t).maybeSingle();return!!n},_t=async e=>{let{data:t,error:n}=await Y.from(`users`).select(`follower_count, following_count`).eq(`id`,e).maybeSingle();return n||!t?{followers:0,following:0}:{followers:t.follower_count||0,following:t.following_count||0}},vt=async()=>{let{data:e,error:t}=await Y.from(`stories`).select(`
            *,
            user:users!user_id (
                id,
                username,
                display_name,
                avatar_url,
                is_verified
            )
        `).gt(`expires_at`,new Date().toISOString()).order(`created_at`,{ascending:!1});if(t)throw t;return e.map(Ze)},yt=async(e,t,n=`image`)=>{let{data:r,error:i}=await Y.from(`stories`).insert([{user_id:e,media_url:t,type:n,expires_at:new Date(Date.now()+1440*60*1e3).toISOString()}]).select(`
            *,
            user:users!user_id (
                id,
                username,
                display_name,
                avatar_url,
                is_verified
            )
        `);if(i)throw i;return Ze(r[0])},bt=[{tag:`Lens`,posts:`0`},{tag:`Web3`,posts:`0`},{tag:`Art`,posts:`0`}];var X=e(P(),1),xt=(0,J.createContext)();const St=({children:e})=>{let[t,n]=(0,J.useState)(null),[r,i]=(0,J.useState)(null),[a,o]=(0,J.useState)({}),[s,c]=(0,J.useState)(!0),l=async e=>{try{let{data:t,error:r}=await Y.from(`users`).select(`*`).eq(`id`,e.id).maybeSingle();if(r)throw r;if(t){let e=Je(t);n(e),o(t=>({...t,[e.handle]:e}))}else n({id:e.id,email:e.email,name:e.email.split(`@`)[0],handle:e.email.split(`@`)[0],avatar:`https://static.hey.xyz/images/brands/lens.svg`,verified:!1})}catch(e){console.error(`Error fetching user profile:`,e)}finally{c(!1)}};return(0,J.useEffect)(()=>{Y.auth.getSession().then(({data:{session:e}})=>{e?l(e.user):c(!1)});let{data:{subscription:e}}=Y.auth.onAuthStateChange((e,t)=>{t?l(t.user):(n(null),c(!1))});return()=>e.unsubscribe()},[]),(0,X.jsx)(xt.Provider,{value:{currentUser:t,authMode:r,setAuthMode:i,profiles:a,login:async({email:e,password:t})=>{let{data:n,error:r}=await Y.auth.signInWithPassword({email:e,password:t});if(r)throw r;return i(null),n},signup:async({email:e,password:t,username:n,name:r})=>{let{data:{user:a},error:o}=await Y.auth.signUp({email:e,password:t,options:{data:{username:n.toLowerCase(),name:r}}});if(o)throw o;return i(null),a},logout:async()=>{await Y.auth.signOut(),n(null),i(null)},updateProfile:async e=>{t&&(await ot(t.id,e),await l(t))},getProfileByHandle:async e=>{if(a[e])return a[e];let t=await at(e);return t?(o(n=>({...n,[e]:t})),t):null},loading:s},children:!s&&e})},Ct=()=>{let e=(0,J.useContext)(xt);if(!e)throw Error(`useAuth must be used within an AuthProvider`);return e};var wt=q(),Tt=(0,J.createContext)();const Et=e=>{let t=(0,wt.c)(11),{children:n}=e,[r,i]=(0,J.useState)(Ot),a,o;t[0]===r?(a=t[1],o=t[2]):(a=()=>{localStorage.setItem(`theme`,r?`dark`:`light`),r?document.documentElement.classList.add(`dark`):document.documentElement.classList.remove(`dark`)},o=[r],t[0]=r,t[1]=a,t[2]=o),(0,J.useEffect)(a,o);let s;t[3]===r?s=t[4]:(s=()=>i(!r),t[3]=r,t[4]=s);let c=s,l;t[5]!==r||t[6]!==c?(l={darkMode:r,setDarkMode:i,toggleDarkMode:c},t[5]=r,t[6]=c,t[7]=l):l=t[7];let u;return t[8]!==n||t[9]!==l?(u=(0,X.jsx)(Tt.Provider,{value:l,children:n}),t[8]=n,t[9]=l,t[10]=u):u=t[10],u},Dt=()=>{let e=(0,J.useContext)(Tt);if(!e)throw Error(`useTheme must be used within a ThemeProvider`);return e};function Ot(){let e=localStorage.getItem(`theme`);return e===`dark`||!e&&window.matchMedia(`(prefers-color-scheme: dark)`).matches}var kt=q(),At=e=>{let t=(0,kt.c)(7),r;t[0]===e?r=t[1]:({...r}=e,t[0]=e,t[1]=r);let{theme:a}=Ie(),o=a===void 0?`system`:a,s,c;t[2]===Symbol.for(`react.memo_cache_sentinel`)?(s={success:(0,X.jsx)(Ae,{className:`size-4`}),info:(0,X.jsx)(R,{className:`size-4`}),warning:(0,X.jsx)(n,{className:`size-4`}),error:(0,X.jsx)(i,{className:`size-4`}),loading:(0,X.jsx)(Ee,{className:`size-4 animate-spin`})},c={"--normal-bg":`var(--popover)`,"--normal-text":`var(--popover-foreground)`,"--normal-border":`var(--border)`,"--border-radius":`var(--radius)`},t[2]=s,t[3]=c):(s=t[2],c=t[3]);let l;return t[4]!==r||t[5]!==o?(l=(0,X.jsx)(se,{theme:o,className:`toaster group`,icons:s,style:c,...r}),t[4]=r,t[5]=o,t[6]=l):l=t[6],l},jt=q(),Mt=(0,J.createContext)();const Nt=e=>{let t=(0,jt.c)(4),{children:n}=e,r=Ft,i;t[0]===Symbol.for(`react.memo_cache_sentinel`)?(i={addToast:r},t[0]=i):i=t[0];let a;t[1]===Symbol.for(`react.memo_cache_sentinel`)?(a=(0,X.jsx)(At,{position:`bottom-center`,toastOptions:{className:`rounded-full font-bold`}}),t[1]=a):a=t[1];let o;return t[2]===n?o=t[3]:(o=(0,X.jsxs)(Mt.Provider,{value:i,children:[n,a]}),t[2]=n,t[3]=o),o},Pt=()=>{let e=(0,J.useContext)(Mt);if(!e)throw Error(`useToast must be used within a ToastProvider`);return e};function Ft(e,t){let n=t===void 0?`success`:t;n===`error`?H.error(e):n===`info`?H.info(e):H.success(e)}var It=(0,J.createContext)();const Lt=({children:e})=>{let[t,n]=(0,J.useState)([]),[r,i]=(0,J.useState)(!0),a=async()=>{try{n(await tt())}catch(e){console.error(`Failed to load posts:`,e)}finally{i(!1)}};return(0,J.useEffect)(()=>{a();let e=Y.channel(`public:posts`).on(`postgres_changes`,{event:`*`,schema:`public`,table:`posts`},()=>{a()}).subscribe();return()=>Y.removeChannel(e)},[]),(0,X.jsx)(It.Provider,{value:{posts:t,setPosts:n,addPost:async e=>{let t=await rt(e);return a(),t},getPostById:e=>t.find(t=>t.id===e),getUserPosts:(e,n=`feed`)=>{let r=t.filter(t=>!!(t.user?.handle===e||t.repostedBy&&t.repostedBy.handle===e));return n===`media`?r.filter(e=>e.type===`video`||e.type===`image`||e.media?.length>0):n===`replies`?r.filter(e=>e.parent_id!==null):r},loading:r,refreshPosts:a},children:e})},Rt=()=>{let e=(0,J.useContext)(It);if(!e)throw Error(`usePosts must be used within a PostProvider`);return e};var zt=q(),Bt=(0,J.createContext)();const Vt=e=>{let t=(0,zt.c)(9),{children:n}=e,r;t[0]===Symbol.for(`react.memo_cache_sentinel`)?(r={isOpen:!1,images:[],currentIndex:0},t[0]=r):r=t[0];let[i,a]=(0,J.useState)(r),o;t[1]===Symbol.for(`react.memo_cache_sentinel`)?(o=(e,t)=>{let n=t===void 0?0:t;a({isOpen:!0,images:Array.isArray(e)?e:[e],currentIndex:n})},t[1]=o):o=t[1];let s=o,c;t[2]===Symbol.for(`react.memo_cache_sentinel`)?(c=()=>{a(Ut)},t[2]=c):c=t[2];let l=c,u;t[3]===Symbol.for(`react.memo_cache_sentinel`)?(u=e=>{a(t=>({...t,currentIndex:e}))},t[3]=u):u=t[3];let d=u,f;t[4]===i?f=t[5]:(f={...i,openLightbox:s,closeLightbox:l,setIndex:d},t[4]=i,t[5]=f);let p;return t[6]!==n||t[7]!==f?(p=(0,X.jsx)(Bt.Provider,{value:f,children:n}),t[6]=n,t[7]=f,t[8]=p):p=t[8],p},Ht=()=>{let e=(0,J.useContext)(Bt);if(!e)throw Error(`useLightbox must be used within a LightboxProvider`);return e};function Ut(e){return{...e,isOpen:!1}}var Wt=q(),Gt=()=>{let e=(0,Wt.c)(10),{currentUser:t}=Ct(),n,r,i,a,o;e[0]===Symbol.for(`react.memo_cache_sentinel`)?(n={id:`home`,icon:k,path:`/`},r={id:`explore`,icon:Ce,path:`/explore`},i={id:`reels`,icon:Me,path:`/reels`},a={id:`messages`,icon:v,path:`/messages`},o={id:`notifications`,icon:ae,path:`/notifications`},e[0]=n,e[1]=r,e[2]=i,e[3]=a,e[4]=o):(n=e[0],r=e[1],i=e[2],a=e[3],o=e[4]);let l=t?`/u/${t.handle}`:`/explore`,u;e[5]===l?u=e[6]:(u=[n,r,i,a,o,{id:`profile`,icon:s,path:l}],e[5]=l,e[6]=u);let d=u,f;e[7]===Symbol.for(`react.memo_cache_sentinel`)?(f=(0,X.jsx)(c,{to:`/`,className:`mb-8 hover:scale-110 transition-transform`,children:(0,X.jsx)(`img`,{src:`https://static.hey.xyz/images/app-icon/0.png`,alt:`Logo`,className:`size-8`})}),e[7]=f):f=e[7];let p;return e[8]===d?p=e[9]:(p=(0,X.jsxs)(`aside`,{className:`sticky top-0 hidden md:flex h-screen w-[68px] flex-col items-center py-5 border-r border-zinc-100 dark:border-zinc-800 shrink-0 bg-white dark:bg-black transition-colors duration-200`,children:[f,(0,X.jsx)(`nav`,{className:`flex flex-col gap-y-4 w-full items-center`,children:d.map(qt)})]}),e[8]=d,e[9]=p),p};function Kt(e){let{isActive:t}=e;return`p-2.5 rounded-xl transition-all duration-200 border border-transparent ${t?`text-black dark:text-white bg-zinc-100 dark:bg-zinc-900 border-zinc-200 dark:border-zinc-800`:`text-zinc-500 hover:bg-zinc-50 dark:hover:bg-zinc-900`}`}function qt(e){return(0,X.jsx)(E,{to:e.path,className:Kt,children:(0,X.jsx)(e.icon,{size:26,strokeWidth:2.5})},e.id)}var Jt=q(),Yt=e=>{let t=(0,Jt.c)(13),{value:n,onChange:r,onClear:i,placeholder:a}=e,o=a===void 0?`Search...`:a,s;t[0]===Symbol.for(`react.memo_cache_sentinel`)?(s=(0,X.jsx)(h,{size:18,className:`absolute left-4 top-1/2 -translate-y-1/2 text-zinc-400 group-focus-within:text-violet-500 transition-colors`}),t[0]=s):s=t[0];let c;t[1]===r?c=t[2]:(c=e=>r(e.target.value),t[1]=r,t[2]=c);let u;t[3]!==o||t[4]!==c||t[5]!==n?(u=(0,X.jsx)(`input`,{className:`w-full rounded-full border border-zinc-100 dark:border-zinc-800 bg-zinc-50 dark:bg-zinc-900/50 text-zinc-900 dark:text-white px-11 py-2.5 text-sm outline-none focus:border-violet-500 focus:ring-1 focus:ring-violet-500 transition-all`,placeholder:o,value:n,onChange:c}),t[3]=o,t[4]=c,t[5]=n,t[6]=u):u=t[6];let d;t[7]!==i||t[8]!==n?(d=n&&(0,X.jsx)(`button`,{onClick:i,className:`absolute right-4 top-1/2 -translate-y-1/2 text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-200 transition-colors`,children:(0,X.jsx)(l,{size:16})}),t[7]=i,t[8]=n,t[9]=d):d=t[9];let f;return t[10]!==u||t[11]!==d?(f=(0,X.jsxs)(`div`,{className:`relative group w-full`,children:[s,u,d]}),t[10]=u,t[11]=d,t[12]=f):f=t[12],f},Xt=q(),Zt=e=>{let t=(0,Xt.c)(45),{trendingTopics:n}=e,r;t[0]===n?r=t[1]:(r=n===void 0?[]:n,t[0]=n,t[1]=r);let i=r,{currentUser:a,setAuthMode:o}=Ct(),{darkMode:s,toggleDarkMode:c}=Dt(),[l,u]=(0,J.useState)(``),d;t[2]===Symbol.for(`react.memo_cache_sentinel`)?(d=[`Â© 2026 Hey.xyz`,`Terms`,`Privacy`,`Guidelines`,`Discord`,`Hey`,`GitHub`,`Support`,`Status`],t[2]=d):d=t[2];let f=d,p;t[3]===s?p=t[4]:(p=s?(0,X.jsx)(x,{size:20}):(0,X.jsx)(m,{size:20}),t[3]=s,t[4]=p);let h;t[5]!==p||t[6]!==c?(h=(0,X.jsx)(`button`,{onClick:c,className:`p-3 rounded-full bg-zinc-50 dark:bg-zinc-900 text-zinc-500 dark:text-zinc-400 border border-zinc-100 dark:border-zinc-800 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-all cursor-pointer`,title:`Toggle Theme`,children:p}),t[5]=p,t[6]=c,t[7]=h):h=t[7];let g=h;if(a){let e;t[8]===Symbol.for(`react.memo_cache_sentinel`)?(e=()=>u(``),t[8]=e):e=t[8];let n;t[9]===l?n=t[10]:(n=(0,X.jsx)(`div`,{className:`flex-1`,children:(0,X.jsx)(Yt,{value:l,onChange:u,onClear:e})}),t[9]=l,t[10]=n);let r;t[11]!==n||t[12]!==g?(r=(0,X.jsxs)(`div`,{className:`flex items-center gap-3`,children:[n,g]}),t[11]=n,t[12]=g,t[13]=r):r=t[13];let a;t[14]===Symbol.for(`react.memo_cache_sentinel`)?(a=(0,X.jsx)(`h3`,{className:`font-extrabold text-xl mb-4 px-2 text-[--foreground]`,children:`What's happening`}),t[14]=a):a=t[14];let o;t[15]===i?o=t[16]:(o=i.map(Qt),t[15]=i,t[16]=o);let s;t[17]===o?s=t[18]:(s=(0,X.jsxs)(`div`,{className:`bg-zinc-50 dark:bg-zinc-900 rounded-2xl p-4 border border-[--border]`,children:[a,(0,X.jsx)(`div`,{className:`flex flex-col gap-1`,children:o})]}),t[17]=o,t[18]=s);let c;t[19]===Symbol.for(`react.memo_cache_sentinel`)?(c=(0,X.jsx)(`div`,{className:`flex flex-wrap gap-x-4 gap-y-2 px-2 text-[13px] text-zinc-500 font-medium pb-5`,children:f.map($t)}),t[19]=c):c=t[19];let d;return t[20]!==s||t[21]!==r?(d=(0,X.jsxs)(`aside`,{className:`sticky top-5 hidden w-[320px] shrink-0 flex-col gap-y-6 lg:flex overflow-y-auto max-h-screen`,children:[r,s,c]}),t[20]=s,t[21]=r,t[22]=d):d=t[22],d}let _,v;t[23]===o?(_=t[24],v=t[25]):(_=(0,X.jsx)(`button`,{onClick:()=>o(`signup`),className:`flex-1 bg-[--card] border border-[--border] py-2.5 rounded-full font-bold text-[--foreground] hover:bg-zinc-50 dark:hover:bg-zinc-900 transition-colors shadow-sm cursor-pointer`,children:`Signup`}),v=()=>o(`login`),t[23]=o,t[24]=_,t[25]=v);let y;t[26]===Symbol.for(`react.memo_cache_sentinel`)?(y=(0,X.jsx)(`img`,{src:`https://static.hey.xyz/images/brands/lens.svg`,alt:``,className:`size-4 filter brightness-0 invert dark:invert-0`}),t[26]=y):y=t[26];let b;t[27]===v?b=t[28]:(b=(0,X.jsxs)(`button`,{onClick:v,className:`flex-1 bg-zinc-950 dark:bg-white text-white dark:text-zinc-950 py-2.5 rounded-full font-bold flex items-center justify-center gap-2 hover:opacity-90 transition-opacity cursor-pointer`,children:[y,`Login`]}),t[27]=v,t[28]=b);let S;t[29]!==_||t[30]!==b||t[31]!==g?(S=(0,X.jsxs)(`div`,{className:`flex gap-3`,children:[_,b,g]}),t[29]=_,t[30]=b,t[31]=g,t[32]=S):S=t[32];let C;t[33]===Symbol.for(`react.memo_cache_sentinel`)?(C=()=>u(``),t[33]=C):C=t[33];let w;t[34]===l?w=t[35]:(w=(0,X.jsx)(Yt,{value:l,onChange:u,onClear:C}),t[34]=l,t[35]=w);let T,E;t[36]===Symbol.for(`react.memo_cache_sentinel`)?(T=(0,X.jsxs)(`div`,{className:`relative`,children:[(0,X.jsx)(`div`,{className:`size-16 rounded-full border-4 border-amber-400 border-t-transparent animate-spin duration-[3000ms]`}),(0,X.jsx)(`span`,{className:`absolute inset-0 flex items-center justify-center text-2xl`,children:`ðŸ’«`})]}),E=(0,X.jsx)(`h3`,{className:`font-extrabold text-lg text-[--foreground] mt-2 leading-tight`,children:`Get your Hey account now!`}),t[36]=T,t[37]=E):(T=t[36],E=t[37]);let D;t[38]===o?D=t[39]:(D=(0,X.jsxs)(`div`,{className:`border border-[--border] rounded-2xl p-8 flex flex-col items-center text-center gap-4 bg-[--card] shadow-sm`,children:[T,E,(0,X.jsx)(`button`,{onClick:()=>o(`signup`),className:`w-full bg-zinc-950 dark:bg-white text-white dark:text-zinc-950 py-2.5 rounded-full font-black text-sm uppercase tracking-wider hover:opacity-90 active:scale-95 transition-all shadow-lg cursor-pointer`,children:`Signup now`})]}),t[38]=o,t[39]=D);let O;t[40]===Symbol.for(`react.memo_cache_sentinel`)?(O=(0,X.jsx)(`div`,{className:`flex flex-wrap gap-x-4 gap-y-2 px-2 text-[13px] text-zinc-500 font-medium pb-5`,children:f.map(en)}),t[40]=O):O=t[40];let k;return t[41]!==S||t[42]!==w||t[43]!==D?(k=(0,X.jsxs)(`aside`,{className:`sticky top-5 hidden w-[350px] shrink-0 flex-col gap-y-6 lg:flex pr-4`,children:[S,w,D,O]}),t[41]=S,t[42]=w,t[43]=D,t[44]=k):k=t[44],k};function Qt(e){return(0,X.jsxs)(`div`,{className:`px-3 py-3 hover:bg-zinc-100 dark:hover:bg-zinc-800 rounded-xl cursor-pointer transition-colors group`,children:[(0,X.jsx)(`div`,{className:`text-xs text-zinc-500 dark:text-zinc-400 font-medium`,children:`Trending`}),(0,X.jsxs)(`div`,{className:`font-bold text-[--foreground]`,children:[`#`,e.tag]}),(0,X.jsxs)(`div`,{className:`text-xs text-zinc-500 dark:text-zinc-400`,children:[e.posts,` posts`]})]},e.tag)}function $t(e){return(0,X.jsx)(`a`,{href:`#`,className:`hover:underline`,children:e},e)}function en(e){return(0,X.jsx)(`a`,{href:`#`,className:`hover:underline`,children:e},e)}var tn=q();function Z(...e){return Ke(We(e))}const nn=()=>{let e=(0,tn.c)(2),{pathname:t}=w(),n;return e[0]===t?n=e[1]:(n=[t],e[0]=t,e[1]=n),(0,J.useEffect)(an,n),null},rn=e=>typeof e==`string`?/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(e):!1;function an(){window.scrollTo(0,0)}var on=q();function Q(e){let t=(0,on.c)(8),n,r;t[0]===e?(n=t[1],r=t[2]):({className:n,...r}=e,t[0]=e,t[1]=n,t[2]=r);let i;t[3]===n?i=t[4]:(i=Z(`relative flex size-8 shrink-0 overflow-hidden rounded-full`,n),t[3]=n,t[4]=i);let a;return t[5]!==r||t[6]!==i?(a=(0,X.jsx)(Re,{"data-slot":`avatar`,className:i,...r}),t[5]=r,t[6]=i,t[7]=a):a=t[7],a}function $(e){let t=(0,on.c)(8),n,r;t[0]===e?(n=t[1],r=t[2]):({className:n,...r}=e,t[0]=e,t[1]=n,t[2]=r);let i;t[3]===n?i=t[4]:(i=Z(`aspect-square size-full`,n),t[3]=n,t[4]=i);let a;return t[5]!==r||t[6]!==i?(a=(0,X.jsx)(W,{"data-slot":`avatar-image`,className:i,...r}),t[5]=r,t[6]=i,t[7]=a):a=t[7],a}function sn(e){let t=(0,on.c)(8),n,r;t[0]===e?(n=t[1],r=t[2]):({className:n,...r}=e,t[0]=e,t[1]=n,t[2]=r);let i;t[3]===n?i=t[4]:(i=Z(`bg-muted flex size-full items-center justify-center rounded-full`,n),t[3]=n,t[4]=i);let a;return t[5]!==r||t[6]!==i?(a=(0,X.jsx)(Be,{"data-slot":`avatar-fallback`,className:i,...r}),t[5]=r,t[6]=i,t[7]=a):a=t[7],a}var cn=q(),ln=e=>{let t=(0,cn.c)(18),{handleProfileClick:n}=e,{currentUser:r}=Ct(),i=w(),a;t[0]===Symbol.for(`react.memo_cache_sentinel`)?(a=[{id:`home`,icon:k,path:`/`},{id:`explore`,icon:Ce,path:`/explore`},{id:`reels`,icon:Me,path:`/reels`},{id:`messages`,icon:v,path:`/messages`},{id:`notifications`,icon:ae,path:`/notifications`}],t[0]=a):a=t[0];let o=a,s;t[1]===Symbol.for(`react.memo_cache_sentinel`)?(s=o.map(dn),t[1]=s):s=t[1];let c;t[2]!==r||t[3]!==n?(c=()=>{r&&n(r.handle)},t[2]=r,t[3]=n,t[4]=c):c=t[4];let l=`size-7 border-2 ${i.pathname.startsWith(`/u/`)?`border-black dark:border-white`:`border-transparent opacity-70`}`,u=r?.avatar||`https://static.hey.xyz/images/brands/lens.svg`,d;t[5]===u?d=t[6]:(d=(0,X.jsx)($,{src:u,alt:`Profile`,className:`object-cover`}),t[5]=u,t[6]=d);let f;t[7]===r?.handle?.[0]?f=t[8]:(f=r?.handle?.[0]?.toUpperCase(),t[7]=r?.handle?.[0],t[8]=f);let p;t[9]===f?p=t[10]:(p=(0,X.jsx)(sn,{children:f}),t[9]=f,t[10]=p);let m;t[11]!==l||t[12]!==d||t[13]!==p?(m=(0,X.jsxs)(Q,{className:l,children:[d,p]}),t[11]=l,t[12]=d,t[13]=p,t[14]=m):m=t[14];let h;return t[15]!==c||t[16]!==m?(h=(0,X.jsxs)(`nav`,{className:`fixed bottom-0 left-0 right-0 z-[40] flex h-16 items-center justify-around border-t border-zinc-100 bg-white/90 px-2 pb-safe backdrop-blur-md dark:border-zinc-800 dark:bg-black/90 md:hidden`,children:[s,(0,X.jsx)(`button`,{onClick:c,className:`flex-1 flex justify-center py-3`,children:m})]}),t[15]=c,t[16]=m,t[17]=h):h=t[17],h};function un(e){let{isActive:t}=e;return`flex flex-col items-center justify-center p-2 rounded-full transition-all duration-200 ${t?`text-black dark:text-white`:`text-zinc-400 opacity-70`}`}function dn(e){return(0,X.jsx)(E,{to:e.path,className:un,children:t=>{let{isActive:n}=t;return(0,X.jsx)(e.icon,{size:26,strokeWidth:n?2.5:2})}},e.id)}var fn=q(),pn=()=>{let e=(0,fn.c)(4),t,n;e[0]===Symbol.for(`react.memo_cache_sentinel`)?(t=(0,X.jsx)(`img`,{src:`https://images.unsplash.com/photo-1502082553048-f009c37129b9?q=80&w=2070&auto=format&fit=crop`,alt:`Welcome Banner`,className:`w-full h-full object-cover group-hover:scale-105 transition-transform duration-700`}),n=(0,X.jsx)(`div`,{className:`absolute inset-0 bg-gradient-to-t from-black/60 via-black/20 to-transparent`}),e[0]=t,e[1]=n):(t=e[0],n=e[1]);let r;e[2]===Symbol.for(`react.memo_cache_sentinel`)?(r=(0,X.jsxs)(`div`,{className:`absolute bottom-6 left-8 text-white`,children:[(0,X.jsx)(`h1`,{className:`text-3xl sm:text-4xl font-black mb-1 drop-shadow-lg`,children:`Welcome to Hey`}),(0,X.jsx)(`p`,{className:`text-sm sm:text-base font-medium opacity-90 tracking-wide drop-shadow-md`,children:`a social network built on Lens`})]}),e[2]=r):r=e[2];let i;return e[3]===Symbol.for(`react.memo_cache_sentinel`)?(i=(0,X.jsxs)(`div`,{className:`relative w-full aspect-[21/9] sm:aspect-[2.5/1] rounded-3xl overflow-hidden mb-6 group cursor-pointer`,children:[t,n,r,(0,X.jsx)(`div`,{className:`absolute bottom-4 right-8`,children:(0,X.jsx)(`img`,{src:`https://static.hey.xyz/images/app-icon/0.png`,className:`size-12 animate-pulse opacity-80`,alt:``})})]}),e[3]=i):i=e[3],i},mn=q(),hn=()=>{let e=(0,mn.c)(17),t=w(),n=O(),{darkMode:i}=Dt(),a=t.pathname===`/`,o;e[0]===n?o=e[1]:(o=e=>{n(`/u/${e}`)},e[0]=n,e[1]=o);let s=o,c=`min-h-screen bg-[--background] text-[--foreground] font-sans selection:bg-violet-500 selection:text-white transition-colors duration-200 ${i?`dark`:``}`,l;e[2]===Symbol.for(`react.memo_cache_sentinel`)?(l=(0,X.jsx)(Gt,{}),e[2]=l):l=e[2];let u;e[3]===a?u=e[4]:(u=a&&(0,X.jsx)(pn,{}),e[3]=a,e[4]=u);let d;e[5]===Symbol.for(`react.memo_cache_sentinel`)?(d=(0,X.jsx)(`div`,{className:`w-full`,children:(0,X.jsx)(r,{})}),e[5]=d):d=e[5];let f;e[6]===u?f=e[7]:(f=(0,X.jsxs)(`div`,{className:`w-full flex flex-col flex-1`,children:[u,d]}),e[6]=u,e[7]=f);let p;e[8]===Symbol.for(`react.memo_cache_sentinel`)?(p=(0,X.jsx)(Zt,{trendingTopics:bt}),e[8]=p):p=e[8];let m;e[9]===f?m=e[10]:(m=(0,X.jsxs)(`div`,{className:`flex justify-center w-full max-w-[1300px] mx-auto min-h-screen px-0 sm:px-0`,children:[l,(0,X.jsxs)(`div`,{className:`flex-1 flex justify-center gap-x-2 md:gap-x-8 py-0 md:py-5 px-0 md:px-4`,children:[f,p]})]}),e[9]=f,e[10]=m);let h;e[11]===s?h=e[12]:(h=(0,X.jsx)(ln,{handleProfileClick:s}),e[11]=s,e[12]=h);let g;return e[13]!==c||e[14]!==m||e[15]!==h?(g=(0,X.jsxs)(`div`,{className:c,children:[m,h]}),e[13]=c,e[14]=m,e[15]=h,e[16]=g):g=e[16],g},gn=q();function _n(e){let t=(0,gn.c)(4),n;t[0]===e?n=t[1]:({...n}=e,t[0]=e,t[1]=n);let r;return t[2]===n?r=t[3]:(r=(0,X.jsx)(V,{"data-slot":`dialog`,...n}),t[2]=n,t[3]=r),r}function vn(e){let t=(0,gn.c)(4),n;t[0]===e?n=t[1]:({...n}=e,t[0]=e,t[1]=n);let r;return t[2]===n?r=t[3]:(r=(0,X.jsx)(oe,{"data-slot":`dialog-portal`,...n}),t[2]=n,t[3]=r),r}function yn(e){let t=(0,gn.c)(8),n,r;t[0]===e?(n=t[1],r=t[2]):({className:n,...r}=e,t[0]=e,t[1]=n,t[2]=r);let i;t[3]===n?i=t[4]:(i=Z(`data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50`,n),t[3]=n,t[4]=i);let a;return t[5]!==r||t[6]!==i?(a=(0,X.jsx)(ce,{"data-slot":`dialog-overlay`,className:i,...r}),t[5]=r,t[6]=i,t[7]=a):a=t[7],a}function bn(e){let t=(0,gn.c)(15),n,r,i,a;t[0]===e?(n=t[1],r=t[2],i=t[3],a=t[4]):({className:r,children:n,showCloseButton:a,...i}=e,t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=a);let o=a===void 0?!0:a,s;t[5]===Symbol.for(`react.memo_cache_sentinel`)?(s=(0,X.jsx)(yn,{}),t[5]=s):s=t[5];let c;t[6]===r?c=t[7]:(c=Z(`bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 outline-none sm:max-w-lg`,r),t[6]=r,t[7]=c);let u;t[8]===o?u=t[9]:(u=o&&(0,X.jsxs)(ie,{"data-slot":`dialog-close`,className:`ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4`,children:[(0,X.jsx)(l,{}),(0,X.jsx)(`span`,{className:`sr-only`,children:`Close`})]}),t[8]=o,t[9]=u);let d;return t[10]!==n||t[11]!==i||t[12]!==c||t[13]!==u?(d=(0,X.jsxs)(vn,{"data-slot":`dialog-portal`,children:[s,(0,X.jsxs)(we,{"data-slot":`dialog-content`,className:c,...i,children:[n,u]})]}),t[10]=n,t[11]=i,t[12]=c,t[13]=u,t[14]=d):d=t[14],d}function xn(e){let t=(0,gn.c)(8),n,r;t[0]===e?(n=t[1],r=t[2]):({className:n,...r}=e,t[0]=e,t[1]=n,t[2]=r);let i;t[3]===n?i=t[4]:(i=Z(`flex flex-col gap-2 text-center sm:text-left`,n),t[3]=n,t[4]=i);let a;return t[5]!==r||t[6]!==i?(a=(0,X.jsx)(`div`,{"data-slot":`dialog-header`,className:i,...r}),t[5]=r,t[6]=i,t[7]=a):a=t[7],a}function Sn(e){let t=(0,gn.c)(8),n,r;t[0]===e?(n=t[1],r=t[2]):({className:n,...r}=e,t[0]=e,t[1]=n,t[2]=r);let i;t[3]===n?i=t[4]:(i=Z(`text-lg leading-none font-semibold`,n),t[3]=n,t[4]=i);let a;return t[5]!==r||t[6]!==i?(a=(0,X.jsx)(Fe,{"data-slot":`dialog-title`,className:i,...r}),t[5]=r,t[6]=i,t[7]=a):a=t[7],a}function Cn(e){let t=(0,gn.c)(8),n,r;t[0]===e?(n=t[1],r=t[2]):({className:n,...r}=e,t[0]=e,t[1]=n,t[2]=r);let i;t[3]===n?i=t[4]:(i=Z(`text-muted-foreground text-sm`,n),t[3]=n,t[4]=i);let a;return t[5]!==r||t[6]!==i?(a=(0,X.jsx)(ve,{"data-slot":`dialog-description`,className:i,...r}),t[5]=r,t[6]=i,t[7]=a):a=t[7],a}var wn=q(),Tn=e=>{let t=(0,wn.c)(14),{isOpen:n,onClose:r,title:i,children:a,description:o}=e,s;t[0]===r?s=t[1]:(s=e=>{e||r()},t[0]=r,t[1]=s);let c=s,l;t[2]!==o||t[3]!==i?(l=i&&(0,X.jsxs)(xn,{className:`px-5 py-4 border-b border-zinc-100 dark:border-zinc-800`,children:[(0,X.jsx)(Sn,{className:`text-xl font-bold`,children:i}),o&&(0,X.jsx)(Cn,{children:o})]}),t[2]=o,t[3]=i,t[4]=l):l=t[4];let u;t[5]===a?u=t[6]:(u=(0,X.jsx)(`div`,{className:`p-5 overflow-y-auto`,children:a}),t[5]=a,t[6]=u);let d;t[7]!==l||t[8]!==u?(d=(0,X.jsxs)(bn,{className:`sm:max-w-md max-h-[90vh] flex flex-col p-0 gap-0 overflow-hidden bg-white dark:bg-zinc-900 border-zinc-200 dark:border-zinc-800`,children:[l,u]}),t[7]=l,t[8]=u,t[9]=d):d=t[9];let f;return t[10]!==c||t[11]!==n||t[12]!==d?(f=(0,X.jsx)(_n,{open:n,onOpenChange:c,children:d}),t[10]=c,t[11]=n,t[12]=d,t[13]=f):f=t[13],f},En=q(),Dn=e=>{let t=(0,En.c)(12),n,r,i,a;t[0]===e?(n=t[1],r=t[2],i=t[3],a=t[4]):({children:n,variant:i,className:a,...r}=e,t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=a);let o=i===void 0?`primary`:i,s=a===void 0?``:a,c;t[5]===Symbol.for(`react.memo_cache_sentinel`)?(c={primary:`text-white hover:text-white bg-zinc-900 hover:bg-zinc-800 border border-zinc-900 dark:bg-white dark:text-black dark:border-white dark:hover:bg-zinc-200`,secondary:`text-zinc-900 border border-zinc-300 hover:border-zinc-400 bg-transparent hover:bg-zinc-50 dark:text-white dark:border-zinc-700 dark:hover:border-zinc-600 dark:hover:bg-zinc-900`,outline:`text-zinc-900 border border-zinc-300 hover:border-zinc-400 bg-white dark:bg-transparent dark:text-white dark:border-zinc-700 dark:hover:bg-zinc-900`,danger:`text-white bg-red-500 hover:bg-red-600 border border-red-500`,ghost:`text-zinc-500 hover:bg-zinc-100 dark:text-zinc-400 dark:hover:bg-zinc-800 border-transparent`},t[5]=c):c=t[5];let l=`rounded-full font-bold inline-flex items-center justify-center relative overflow-hidden px-4 py-1.5 transition-all duration-200 active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed disabled:active:scale-100 touch-manipulation ${c[o]} ${s}`,u;t[6]===n?u=t[7]:(u=(0,X.jsx)(`div`,{className:`flex items-center gap-x-1.5`,children:n}),t[6]=n,t[7]=u);let d;return t[8]!==r||t[9]!==l||t[10]!==u?(d=(0,X.jsx)(`button`,{className:l,...r,children:u}),t[8]=r,t[9]=l,t[10]=u,t[11]=d):d=t[11],d},On=({isOpen:e,onClose:t})=>{let{currentUser:n}=Ct(),{addPost:r}=Rt(),{addToast:i}=Pt(),[a,o]=(0,J.useState)(``),[s,c]=(0,J.useState)([]),[u,d]=(0,J.useState)(!1),[f,m]=(0,J.useState)({options:[``,``],duration:`1 day`}),[h,g]=(0,J.useState)(!1),_=(0,J.useRef)(null),v=e=>{let t=Array.from(e.target.files);c(e=>[...e,...t])},y=e=>{c(t=>t.filter((t,n)=>n!==e))},b=()=>{f.options.length<4&&m(e=>({...e,options:[...e.options,``]}))},x=e=>{m(t=>({...t,options:t.options.filter((t,n)=>n!==e)}))},S=(e,t)=>{let n=[...f.options];n[e]=t,m(e=>({...e,options:n}))};return(0,X.jsx)(Tn,{isOpen:e,onClose:()=>!h&&t(),title:`Create Post`,children:(0,X.jsxs)(`form`,{onSubmit:async e=>{if(e.preventDefault(),!(!a.trim()&&s.length===0||!n)){g(!0);try{let e=[];for(let t of s){let n=await et(t);e.push(n)}let l=null;u&&f.options.some(e=>e.trim())&&(l={options:f.options.filter(e=>e.trim()).map((e,t)=>({id:t+1,text:e,votes:0})),ends_at:new Date(Date.now()+1440*60*1e3).toISOString()}),await r({content:a,media:e,poll:l,type:e.length>0?e[0].type===`video`?`video`:`image`:l?`poll`:`text`,userId:n.id}),o(``),c([]),d(!1),m({options:[``,``],duration:`1 day`}),t(),i(`Post published!`)}catch(e){console.error(`Failed to create post:`,e),i(`Failed to publish post.`)}finally{g(!1)}}},className:`space-y-4 max-h-[80vh] overflow-y-auto pr-2 no-scrollbar`,children:[(0,X.jsxs)(`div`,{className:`flex gap-3`,children:[(0,X.jsxs)(Q,{className:`size-12 border border-zinc-200 dark:border-zinc-800`,children:[(0,X.jsx)($,{src:n?.avatar,className:`object-cover`}),(0,X.jsx)(sn,{children:n?.handle?.[0]?.toUpperCase()})]}),(0,X.jsxs)(`div`,{className:`flex-1`,children:[(0,X.jsx)(`textarea`,{className:`w-full bg-transparent border-none outline-none text-lg min-h-[100px] resize-none dark:text-white`,placeholder:`What's happening?`,autoFocus:!0,value:a,onChange:e=>o(e.target.value)}),u&&(0,X.jsxs)(`div`,{className:`mt-4 p-4 rounded-2xl border border-zinc-100 dark:border-zinc-800 space-y-3 bg-zinc-50/50 dark:bg-zinc-900/50`,children:[(0,X.jsxs)(`div`,{className:`flex justify-between items-center mb-2`,children:[(0,X.jsx)(`span`,{className:`text-sm font-bold opacity-60`,children:`Poll`}),(0,X.jsx)(`button`,{type:`button`,onClick:()=>d(!1),className:`text-zinc-500 hover:text-rose-500`,children:(0,X.jsx)(l,{size:18})})]}),f.options.map((e,t)=>(0,X.jsxs)(`div`,{className:`flex gap-2`,children:[(0,X.jsx)(`input`,{className:`flex-1 bg-white dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 rounded-xl px-4 py-2 text-sm outline-none focus:border-violet-500`,placeholder:`Option ${t+1}`,value:e,onChange:e=>S(t,e.target.value)}),f.options.length>2&&(0,X.jsx)(`button`,{type:`button`,onClick:()=>x(t),className:`p-2 text-rose-500 hover:bg-rose-50 dark:hover:bg-rose-900/20 rounded-lg transition-colors`,children:(0,X.jsx)(fe,{size:16})})]},t)),f.options.length<4&&(0,X.jsx)(`button`,{type:`button`,onClick:b,className:`text-sm font-bold text-violet-600 hover:bg-violet-50 dark:hover:bg-violet-900/20 px-3 py-1.5 rounded-lg transition-colors`,children:`+ Add option`})]}),s.length>0&&(0,X.jsx)(`div`,{className:`mt-4 flex flex-wrap gap-2`,children:s.map((e,t)=>(0,X.jsxs)(`div`,{className:`relative group size-20 rounded-xl overflow-hidden bg-zinc-100 dark:bg-zinc-800 border dark:border-zinc-700`,children:[e.type.startsWith(`image/`)?(0,X.jsx)(`img`,{src:URL.createObjectURL(e),className:`size-full object-cover`,alt:``}):(0,X.jsx)(`div`,{className:`size-full flex items-center justify-center text-zinc-500`,children:e.type.startsWith(`video/`)?(0,X.jsx)(A,{size:24,className:`animate-pulse`}):(0,X.jsx)(xe,{size:24})}),(0,X.jsx)(`button`,{type:`button`,onClick:()=>y(t),className:`absolute top-1 right-1 size-6 rounded-full bg-black/60 text-white flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity`,children:(0,X.jsx)(l,{size:14,strokeWidth:3})})]},t))})]})]}),(0,X.jsxs)(`div`,{className:`flex items-center justify-between pt-4 border-t border-zinc-100 dark:border-zinc-800`,children:[(0,X.jsxs)(`div`,{className:`flex text-violet-600 gap-1`,children:[(0,X.jsx)(`button`,{type:`button`,onClick:()=>_.current?.click(),className:`p-2.5 hover:bg-violet-50 dark:hover:bg-zinc-800 rounded-full transition-colors`,title:`Attach media`,children:(0,X.jsx)(B,{size:22})}),(0,X.jsx)(`button`,{type:`button`,onClick:()=>d(!0),className:`p-2.5 hover:bg-violet-50 dark:hover:bg-zinc-800 rounded-full transition-colors`,title:`Add poll`,children:(0,X.jsx)(ne,{size:22})}),(0,X.jsx)(`button`,{type:`button`,className:`p-2.5 hover:bg-violet-50 dark:hover:bg-zinc-800 rounded-full transition-colors`,children:(0,X.jsx)(p,{size:22})}),(0,X.jsx)(`input`,{type:`file`,ref:_,onChange:v,multiple:!0,className:`hidden`,accept:`image/*,video/*,application/pdf`})]}),(0,X.jsx)(Dn,{type:`submit`,disabled:!a.trim()&&s.length===0||h,className:`px-8 py-2.5 min-w-[100px] text-base`,children:h?(0,X.jsx)(Ee,{size:18,className:`animate-spin`}):`Post`})]})]})})},kn=q(),An=J.forwardRef((e,t)=>{let n=(0,kn.c)(20),r,i,a,o,s;n[0]===e?(r=n[1],i=n[2],a=n[3],o=n[4],s=n[5]):({className:r,label:i,type:s,textarea:o,...a}=e,n[0]=e,n[1]=r,n[2]=i,n[3]=a,n[4]=o,n[5]=s);let c=o?`textarea`:`input`,l;n[6]===i?l=n[7]:(l=i&&(0,X.jsx)(`label`,{className:`text-sm font-bold text-zinc-500 dark:text-zinc-400 ml-1`,children:i}),n[6]=i,n[7]=l);let u=o&&`min-h-[100px] resize-none`,d;n[8]!==r||n[9]!==u?(d=Z(`flex w-full rounded-xl border border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-900 px-4 py-2.5 text-sm ring-offset-white file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-zinc-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-violet-500 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 dark:ring-offset-zinc-950 dark:text-white transition-all`,u,r),n[8]=r,n[9]=u,n[10]=d):d=n[10];let f;n[11]!==c||n[12]!==a||n[13]!==t||n[14]!==d||n[15]!==s?(f=(0,X.jsx)(c,{type:s,className:d,ref:t,...a}),n[11]=c,n[12]=a,n[13]=t,n[14]=d,n[15]=s,n[16]=f):f=n[16];let p;return n[17]!==l||n[18]!==f?(p=(0,X.jsxs)(`div`,{className:`w-full space-y-1.5`,children:[l,f]}),n[17]=l,n[18]=f,n[19]=p):p=n[19],p});An.displayName=`Input`;var jn=An,Mn=({isOpen:e,onClose:t,editProfileData:n,setEditProfileData:r})=>{let{updateProfile:i}=Ct(),{addToast:a}=Pt(),[o,s]=(0,J.useState)(!1),[c,l]=(0,J.useState)(null),[u,d]=(0,J.useState)(null),f=(0,J.useRef)(null),p=(0,J.useRef)(null);return(0,X.jsx)(Tn,{isOpen:e,onClose:()=>!o&&t(),title:`Edit Profile`,children:(0,X.jsxs)(`div`,{className:`space-y-6`,children:[(0,X.jsx)(`input`,{type:`file`,ref:p,className:`hidden`,accept:`image/*`,onChange:e=>e.target.files[0]&&d(e.target.files[0])}),(0,X.jsx)(`input`,{type:`file`,ref:f,className:`hidden`,accept:`image/*`,onChange:e=>e.target.files[0]&&l(e.target.files[0])}),(0,X.jsxs)(`div`,{className:`relative h-32 bg-zinc-100 dark:bg-zinc-800 rounded-xl overflow-hidden group cursor-pointer`,onClick:()=>p.current?.click(),children:[(u||n?.cover)&&(0,X.jsx)(`img`,{src:u?URL.createObjectURL(u):n.cover,className:`w-full h-full object-cover opacity-60`,alt:``}),(0,X.jsx)(`div`,{className:`absolute inset-0 flex items-center justify-center`,children:(0,X.jsx)(`div`,{className:`bg-black/50 p-2 rounded-full text-white group-hover:scale-110 transition-transform`,children:(0,X.jsx)(A,{size:20})})})]}),(0,X.jsx)(`div`,{className:`relative -mt-16 ml-4`,children:(0,X.jsxs)(`div`,{className:`relative size-24 rounded-full border-4 border-white dark:border-black overflow-hidden group cursor-pointer shadow-lg bg-white dark:bg-black`,onClick:()=>f.current?.click(),children:[(c||n?.avatar)&&(0,X.jsxs)(Q,{className:`size-full opacity-60 rounded-none`,children:[(0,X.jsx)($,{src:c?URL.createObjectURL(c):n.avatar,className:`object-cover`}),(0,X.jsx)(sn,{children:n?.handle?.[0]?.toUpperCase()})]}),(0,X.jsx)(`div`,{className:`absolute inset-0 flex items-center justify-center`,children:(0,X.jsx)(`div`,{className:`bg-black/50 p-2 rounded-full text-white group-hover:scale-110 transition-transform`,children:(0,X.jsx)(A,{size:16})})})]})}),(0,X.jsxs)(`div`,{className:`space-y-4`,children:[(0,X.jsx)(jn,{label:`Name`,value:n?.name||``,onChange:e=>r({...n,name:e.target.value})}),(0,X.jsx)(jn,{label:`Bio`,textarea:!0,value:n?.bio||``,onChange:e=>r({...n,bio:e.target.value})}),(0,X.jsx)(jn,{label:`Location`,value:n?.location||``,onChange:e=>r({...n,location:e.target.value})}),(0,X.jsx)(jn,{label:`Website`,value:n?.website||``,onChange:e=>r({...n,website:e.target.value})})]}),(0,X.jsx)(Dn,{className:`w-full py-3`,disabled:o,onClick:async()=>{s(!0);try{let e=n.avatar,r=n.cover;c&&(e=(await et(c)).url),u&&(r=(await et(u)).url),await i({...n,avatar:e,cover:r}),l(null),d(null),t(),a(`Profile updated!`)}catch(e){console.error(`Failed to update profile:`,e),a(`Failed to update profile.`)}finally{s(!1)}},children:o?(0,X.jsx)(Ee,{size:24,className:`animate-spin text-white mx-auto`}):`Save changes`})]})})},Nn=({isOpen:e,onClose:t})=>{let{currentUser:n}=Ct(),{addToast:r}=Pt(),i=Le(),[a,o]=(0,J.useState)(null),[s,c]=(0,J.useState)(!1),u=(0,J.useRef)(null);return(0,X.jsx)(Tn,{isOpen:e,onClose:()=>!s&&t(),title:`Add Story`,children:(0,X.jsxs)(`div`,{className:`space-y-6`,children:[a?(0,X.jsxs)(`div`,{className:`relative aspect-[9/16] w-full max-w-[280px] mx-auto rounded-3xl overflow-hidden shadow-2xl border dark:border-zinc-800`,children:[(0,X.jsx)(`img`,{src:URL.createObjectURL(a),className:`w-full h-full object-cover`,alt:`Preview`}),(0,X.jsx)(`button`,{onClick:()=>o(null),className:`absolute top-4 right-4 p-2 bg-black/50 text-white rounded-full hover:bg-black/70 transition-colors`,children:(0,X.jsx)(l,{size:20})})]}):(0,X.jsxs)(`div`,{onClick:()=>u.current?.click(),className:`aspect-[9/16] w-full max-w-[280px] mx-auto border-2 border-dashed border-zinc-200 dark:border-zinc-800 rounded-3xl flex flex-col items-center justify-center gap-4 cursor-pointer hover:bg-zinc-50 dark:hover:bg-zinc-900 transition-colors`,children:[(0,X.jsx)(`div`,{className:`bg-violet-100 dark:bg-violet-900/30 p-4 rounded-full text-violet-600`,children:(0,X.jsx)(B,{size:32})}),(0,X.jsxs)(`div`,{className:`text-center`,children:[(0,X.jsx)(`p`,{className:`font-bold dark:text-white`,children:`Choose a photo`}),(0,X.jsx)(`p`,{className:`text-sm text-zinc-500`,children:`Stories last for 24 hours`})]})]}),(0,X.jsx)(`input`,{type:`file`,ref:u,onChange:e=>{let t=e.target.files[0];t&&o(t)},className:`hidden`,accept:`image/*`}),(0,X.jsx)(Dn,{className:`w-full py-3 text-lg`,disabled:!a||s,onClick:async()=>{if(!(!a||!n)){c(!0);try{let e=await et(a);await yt(n.id,e.url,e.type),o(null),t(),r(`Story shared!`),i.invalidateQueries([`stories`])}catch(e){console.error(`Failed to create story:`,e),r(`Failed to share story.`)}finally{c(!1)}}},children:s?(0,X.jsx)(Ee,{size:24,className:`animate-spin mx-auto`}):`Share story`})]})})},Pn=q(),Fn=e=>{let t=(0,Pn.c)(21),{isPostModalOpen:n,setIsPostModalOpen:r,isEditProfileOpen:i,setIsEditProfileOpen:a,isStoryModalOpen:o,setIsStoryModalOpen:s,editProfileData:c,setEditProfileData:l}=e,u;t[0]===r?u=t[1]:(u=()=>r(!1),t[0]=r,t[1]=u);let d;t[2]!==n||t[3]!==u?(d=(0,X.jsx)(On,{isOpen:n,onClose:u}),t[2]=n,t[3]=u,t[4]=d):d=t[4];let f;t[5]===a?f=t[6]:(f=()=>a(!1),t[5]=a,t[6]=f);let p;t[7]!==c||t[8]!==i||t[9]!==l||t[10]!==f?(p=(0,X.jsx)(Mn,{isOpen:i,onClose:f,editProfileData:c,setEditProfileData:l}),t[7]=c,t[8]=i,t[9]=l,t[10]=f,t[11]=p):p=t[11];let m;t[12]===s?m=t[13]:(m=()=>s(!1),t[12]=s,t[13]=m);let h;t[14]!==o||t[15]!==m?(h=(0,X.jsx)(Nn,{isOpen:o,onClose:m}),t[14]=o,t[15]=m,t[16]=h):h=t[16];let g;return t[17]!==d||t[18]!==p||t[19]!==h?(g=(0,X.jsxs)(X.Fragment,{children:[d,p,h]}),t[17]=d,t[18]=p,t[19]=h,t[20]=g):g=t[20],g},In=q(),Ln=e=>{let t=(0,In.c)(38),{story:n,onClose:r}=e,[i,a]=(0,J.useState)(0),o,s;t[0]===r?(o=t[1],s=t[2]):(o=()=>{let e=setInterval(()=>{a(e=>e>=100?(r(),100):e+1)},50);return()=>clearInterval(e)},s=[r],t[0]=r,t[1]=o,t[2]=s),(0,J.useEffect)(o,s);let c=`${i}%`,u;t[3]===c?u=t[4]:(u=(0,X.jsx)(`div`,{className:`flex gap-1 h-1 w-full bg-white/20 rounded-full overflow-hidden`,children:(0,X.jsx)(`div`,{className:`h-full bg-white transition-all duration-100`,style:{width:c}})}),t[3]=c,t[4]=u);let d;t[5]!==n.user.avatar||t[6]!==n.user.handle?(d=(0,X.jsx)($,{src:n.user.avatar,alt:n.user.handle,className:`object-cover`}),t[5]=n.user.avatar,t[6]=n.user.handle,t[7]=d):d=t[7];let f;t[8]===n.user.handle?.[0]?f=t[9]:(f=n.user.handle?.[0]?.toUpperCase(),t[8]=n.user.handle?.[0],t[9]=f);let p;t[10]===f?p=t[11]:(p=(0,X.jsx)(sn,{children:f}),t[10]=f,t[11]=p);let m;t[12]!==d||t[13]!==p?(m=(0,X.jsxs)(Q,{className:`size-10 border border-white/20`,children:[d,p]}),t[12]=d,t[13]=p,t[14]=m):m=t[14];let h;t[15]===n.user.handle?h=t[16]:(h=(0,X.jsx)(`span`,{className:`text-white font-bold`,children:n.user.handle}),t[15]=n.user.handle,t[16]=h);let g;t[17]!==m||t[18]!==h?(g=(0,X.jsxs)(`div`,{className:`flex items-center gap-3`,children:[m,h]}),t[17]=m,t[18]=h,t[19]=g):g=t[19];let _;t[20]===Symbol.for(`react.memo_cache_sentinel`)?(_=(0,X.jsx)(l,{size:24}),t[20]=_):_=t[20];let v;t[21]===r?v=t[22]:(v=(0,X.jsx)(`button`,{onClick:r,className:`text-white p-2 hover:bg-white/10 rounded-full`,children:_}),t[21]=r,t[22]=v);let y;t[23]!==g||t[24]!==v?(y=(0,X.jsxs)(`div`,{className:`flex items-center justify-between`,children:[g,v]}),t[23]=g,t[24]=v,t[25]=y):y=t[25];let b;t[26]!==y||t[27]!==u?(b=(0,X.jsxs)(`div`,{className:`absolute top-0 left-0 right-0 p-4 z-20 flex flex-col gap-4`,children:[u,y]}),t[26]=y,t[27]=u,t[28]=b):b=t[28];let x;t[29]===Symbol.for(`react.memo_cache_sentinel`)?(x=(0,X.jsx)(`button`,{className:`absolute left-4 z-10 p-2 bg-black/20 hover:bg-black/40 rounded-full text-white backdrop-blur-md transition-all active:scale-90`,children:(0,X.jsx)(Pe,{size:32})}),t[29]=x):x=t[29];let S;t[30]===n.media?S=t[31]:(S=(0,X.jsx)(`img`,{src:n.media,className:`w-full h-full object-contain rounded-2xl shadow-2xl`,alt:``}),t[30]=n.media,t[31]=S);let C;t[32]===Symbol.for(`react.memo_cache_sentinel`)?(C=(0,X.jsx)(`button`,{className:`absolute right-4 z-10 p-2 bg-black/20 hover:bg-black/40 rounded-full text-white backdrop-blur-md transition-all active:scale-90`,children:(0,X.jsx)(_e,{size:32})}),t[32]=C):C=t[32];let w;t[33]===S?w=t[34]:(w=(0,X.jsxs)(`div`,{className:`w-full h-full max-w-xl relative flex items-center justify-center p-4`,children:[x,S,C]}),t[33]=S,t[34]=w);let T;return t[35]!==b||t[36]!==w?(T=(0,X.jsxs)(`div`,{className:`fixed inset-0 z-[100] bg-black flex flex-col items-center justify-center animate-in fade-in duration-300`,children:[b,w]}),t[35]=b,t[36]=w,t[37]=T):T=t[37],T},Rn=q(),zn=e=>{let t=(0,Rn.c)(48),{images:n,currentIndex:r,onClose:i,onNavigate:a}=e,o=r===void 0?0:r;if(!n||n.length===0)return null;let s=n[o],c=n.length>1,u;t[0]!==o||t[1]!==a?(u=e=>{e.stopPropagation(),a&&o>0&&a(o-1)},t[0]=o,t[1]=a,t[2]=u):u=t[2];let d=u,f;t[3]!==o||t[4]!==n.length||t[5]!==a?(f=e=>{e.stopPropagation(),a&&o<n.length-1&&a(o+1)},t[3]=o,t[4]=n.length,t[5]=a,t[6]=f):f=t[6];let p=f,m;t[7]===s?m=t[8]:(m=e=>{e.stopPropagation();let t=document.createElement(`a`);t.href=s,t.download=`image-${Date.now()}.jpg`,document.body.appendChild(t),t.click(),document.body.removeChild(t)},t[7]=s,t[8]=m);let h=m,g=c?`${o+1} / ${n.length}`:``,_;t[9]===g?_=t[10]:(_=(0,X.jsx)(`div`,{className:`text-white font-medium`,children:g}),t[9]=g,t[10]=_);let v;t[11]===Symbol.for(`react.memo_cache_sentinel`)?(v=(0,X.jsx)(U,{size:22}),t[11]=v):v=t[11];let y;t[12]===h?y=t[13]:(y=(0,X.jsx)(`button`,{onClick:h,className:`text-white p-2 hover:bg-white/10 rounded-full transition-colors`,title:`Download`,children:v}),t[12]=h,t[13]=y);let b;t[14]===Symbol.for(`react.memo_cache_sentinel`)?(b=(0,X.jsx)(l,{size:24}),t[14]=b):b=t[14];let x;t[15]===i?x=t[16]:(x=(0,X.jsx)(`button`,{onClick:i,className:`text-white p-2 hover:bg-white/10 rounded-full transition-colors`,title:`Close`,children:b}),t[15]=i,t[16]=x);let S;t[17]!==x||t[18]!==y?(S=(0,X.jsxs)(`div`,{className:`flex items-center gap-2`,children:[y,x]}),t[17]=x,t[18]=y,t[19]=S):S=t[19];let C;t[20]!==S||t[21]!==_?(C=(0,X.jsxs)(`div`,{className:`absolute top-0 left-0 right-0 p-4 z-20 flex items-center justify-between bg-gradient-to-b from-black/50 to-transparent`,children:[_,S]}),t[20]=S,t[21]=_,t[22]=C):C=t[22];let w;t[23]!==o||t[24]!==d||t[25]!==c?(w=c&&o>0&&(0,X.jsx)(`button`,{onClick:d,className:`absolute left-4 z-10 p-3 bg-white/10 hover:bg-white/20 rounded-full text-white backdrop-blur-md transition-all active:scale-90`,children:(0,X.jsx)(Pe,{size:32})}),t[23]=o,t[24]=d,t[25]=c,t[26]=w):w=t[26];let T;t[27]===s?T=t[28]:(T=(0,X.jsx)(`img`,{src:s,className:`max-w-full max-h-full object-contain select-none shadow-2xl animate-in zoom-in-95 duration-300`,alt:``,onClick:Bn}),t[27]=s,t[28]=T);let E;t[29]!==o||t[30]!==p||t[31]!==c||t[32]!==n.length?(E=c&&o<n.length-1&&(0,X.jsx)(`button`,{onClick:p,className:`absolute right-4 z-10 p-3 bg-white/10 hover:bg-white/20 rounded-full text-white backdrop-blur-md transition-all active:scale-90`,children:(0,X.jsx)(_e,{size:32})}),t[29]=o,t[30]=p,t[31]=c,t[32]=n.length,t[33]=E):E=t[33];let D;t[34]!==w||t[35]!==T||t[36]!==E?(D=(0,X.jsxs)(`div`,{className:`w-full h-full relative flex items-center justify-center p-4`,children:[w,T,E]}),t[34]=w,t[35]=T,t[36]=E,t[37]=D):D=t[37];let O;t[38]!==o||t[39]!==c||t[40]!==n||t[41]!==a?(O=c&&(0,X.jsx)(`div`,{className:`absolute bottom-6 flex gap-2 p-2 bg-black/40 backdrop-blur-md rounded-2xl overflow-x-auto max-w-[90%] hide-scrollbar`,onClick:Vn,children:n.map((e,t)=>(0,X.jsx)(`button`,{onClick:()=>a(t),className:`size-12 rounded-lg overflow-hidden border-2 transition-all shrink-0 ${t===o?`border-white scale-110`:`border-transparent opacity-50 hover:opacity-100`}`,children:(0,X.jsx)(`img`,{src:e,className:`size-full object-cover`,alt:``})},t))}),t[38]=o,t[39]=c,t[40]=n,t[41]=a,t[42]=O):O=t[42];let k;return t[43]!==i||t[44]!==C||t[45]!==D||t[46]!==O?(k=(0,X.jsxs)(`div`,{className:`fixed inset-0 z-[100] bg-black/95 backdrop-blur-sm flex flex-col items-center justify-center animate-in fade-in duration-300`,onClick:i,children:[C,D,O]}),t[43]=i,t[44]=C,t[45]=D,t[46]=O,t[47]=k):k=t[47],k};function Bn(e){return e.stopPropagation()}function Vn(e){return e.stopPropagation()}var Hn=({type:e,onComplete:t,onSwitch:n})=>{let{login:r,signup:i}=Ct(),{addToast:a}=Pt(),[o,s]=(0,J.useState)({name:``,email:``,username:``,password:``}),[c,l]=(0,J.useState)(!1),[u,d]=(0,J.useState)(null);return(0,X.jsxs)(`div`,{className:`max-w-md mx-auto p-8 w-full animate-in fade-in slide-in-from-bottom-5 duration-300`,children:[(0,X.jsxs)(`div`,{className:`text-center mb-8`,children:[(0,X.jsx)(`div`,{className:`flex justify-center mb-4`,children:(0,X.jsx)(`div`,{className:`bg-black dark:bg-white dark:text-black text-white p-3 rounded-2xl shadow-lg`,children:(0,X.jsx)(`img`,{src:`https://static.hey.xyz/images/app-icon/0.png`,alt:`Logo`,className:`w-10 h-10 filter invert dark:filter-none`})})}),(0,X.jsx)(`h2`,{className:`text-3xl font-extrabold mb-2 dark:text-white tracking-tight`,children:e===`login`?`Welcome back!`:`Join Hey today`}),(0,X.jsx)(`p`,{className:`text-zinc-500 font-medium`,children:`The decentralized social network`})]}),u&&(0,X.jsxs)(`div`,{className:`mb-6 p-4 bg-rose-50 dark:bg-rose-900/20 border border-rose-100 dark:border-rose-800 rounded-xl flex items-center gap-3 text-rose-600 dark:text-rose-400 text-sm`,children:[(0,X.jsx)(K,{size:18}),(0,X.jsx)(`span`,{children:u})]}),(0,X.jsxs)(`form`,{onSubmit:async n=>{n.preventDefault(),l(!0),d(null);try{e===`login`?(await r({email:o.email,password:o.password}),a(`Welcome back!`)):(await i({email:o.email,password:o.password,username:o.username,name:o.name}),a(`Account created successfully!`)),t()}catch(e){console.error(`Auth error:`,e),d(e.message||`Authentication failed. Please check your credentials.`),a(`Authentication failed!`)}finally{l(!1)}},className:`space-y-4`,children:[(0,X.jsx)(jn,{label:`Email`,type:`email`,placeholder:`john@example.com`,value:o.email,onChange:e=>s({...o,email:e.target.value}),required:!0}),e===`signup`&&(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(jn,{label:`Name`,placeholder:`John Doe`,value:o.name,onChange:e=>s({...o,name:e.target.value}),required:!0}),(0,X.jsx)(jn,{label:`Username`,placeholder:`johndoe`,value:o.username,onChange:e=>s({...o,username:e.target.value}),required:!0})]}),(0,X.jsx)(jn,{label:`Password`,type:`password`,placeholder:`â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢`,value:o.password,onChange:e=>s({...o,password:e.target.value}),required:!0}),(0,X.jsx)(Dn,{type:`submit`,className:`w-full justify-center py-3 mt-6 text-lg`,disabled:c,children:c?(0,X.jsx)(Ee,{size:24,className:`animate-spin`}):e===`login`?`Log in`:`Sign up`})]}),(0,X.jsxs)(`div`,{className:`mt-8 text-center text-sm`,children:[(0,X.jsx)(`span`,{className:`text-zinc-500`,children:e===`login`?`Don't have an account?`:`Already have an account?`}),(0,X.jsx)(`button`,{onClick:n,className:`font-bold ml-1 hover:underline dark:text-white`,children:e===`login`?`Sign up`:`Log in`})]})]})},Un=q(),Wn=e=>{let t=(0,Un.c)(6),{children:n}=e,r,i,a,o;t[0]===Symbol.for(`react.memo_cache_sentinel`)?(r={opacity:0,y:10},i={opacity:1,y:0},a={opacity:0,y:-10},o={duration:.3,ease:`easeOut`},t[0]=r,t[1]=i,t[2]=a,t[3]=o):(r=t[0],i=t[1],a=t[2],o=t[3]);let s;return t[4]===n?s=t[5]:(s=(0,X.jsx)(j.div,{initial:r,animate:i,exit:a,transition:o,className:`w-full`,children:n}),t[4]=n,t[5]=s),s},Gn=q(),Kn=e=>{let t=(0,Gn.c)(24),{user:n,onClick:r,isAddStory:i}=e,a=i===void 0?!1:i,o=`relative p-0.5 rounded-full ${a?`bg-transparent`:`bg-gradient-to-tr from-yellow-400 via-pink-500 to-violet-600`}`,s;t[0]!==n.avatar||t[1]!==n.handle?(s=(0,X.jsx)($,{src:n.avatar,alt:n.handle,className:`object-cover`}),t[0]=n.avatar,t[1]=n.handle,t[2]=s):s=t[2];let c;t[3]===n.handle?.[0]?c=t[4]:(c=n.handle?.[0]?.toUpperCase(),t[3]=n.handle?.[0],t[4]=c);let l;t[5]===c?l=t[6]:(l=(0,X.jsx)(sn,{children:c}),t[5]=c,t[6]=l);let u;t[7]!==s||t[8]!==l?(u=(0,X.jsxs)(Q,{className:`size-14 sm:size-16 border border-zinc-100 dark:border-zinc-800`,children:[s,l]}),t[7]=s,t[8]=l,t[9]=u):u=t[9];let d;t[10]===a?d=t[11]:(d=a&&(0,X.jsx)(`div`,{className:`absolute bottom-0 right-0 bg-violet-600 border-2 border-white dark:border-black rounded-full p-1 text-white shadow-lg`,children:(0,X.jsx)(A,{size:14,strokeWidth:3})}),t[10]=a,t[11]=d);let f;t[12]!==u||t[13]!==d?(f=(0,X.jsx)(`div`,{className:`bg-white dark:bg-black rounded-full p-0.5`,children:(0,X.jsxs)(`div`,{className:`relative`,children:[u,d]})}),t[12]=u,t[13]=d,t[14]=f):f=t[14];let p;t[15]!==o||t[16]!==f?(p=(0,X.jsx)(`div`,{className:o,children:f}),t[15]=o,t[16]=f,t[17]=p):p=t[17];let m=a?`Add Story`:n.handle,h;t[18]===m?h=t[19]:(h=(0,X.jsx)(`span`,{className:`text-[11px] font-semibold text-zinc-600 dark:text-zinc-400 truncate w-16 text-center leading-tight`,children:m}),t[18]=m,t[19]=h);let g;return t[20]!==r||t[21]!==h||t[22]!==p?(g=(0,X.jsxs)(`button`,{onClick:r,className:`flex flex-col items-center gap-2 group shrink-0`,children:[p,h]}),t[20]=r,t[21]=h,t[22]=p,t[23]=g):g=t[23],g},qn=q();function Jn(e){let t=(0,qn.c)(4),n;t[0]===e?n=t[1]:({...n}=e,t[0]=e,t[1]=n);let r;return t[2]===n?r=t[3]:(r=(0,X.jsx)(ge,{"data-slot":`dropdown-menu`,...n}),t[2]=n,t[3]=r),r}function Yn(e){let t=(0,qn.c)(4),n;t[0]===e?n=t[1]:({...n}=e,t[0]=e,t[1]=n);let r;return t[2]===n?r=t[3]:(r=(0,X.jsx)(te,{"data-slot":`dropdown-menu-trigger`,...n}),t[2]=n,t[3]=r),r}function Xn(e){let t=(0,qn.c)(10),n,r,i;t[0]===e?(n=t[1],r=t[2],i=t[3]):({className:n,sideOffset:i,...r}=e,t[0]=e,t[1]=n,t[2]=r,t[3]=i);let a=i===void 0?4:i,o;t[4]===n?o=t[5]:(o=Z(`bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md`,n),t[4]=n,t[5]=o);let s;return t[6]!==r||t[7]!==a||t[8]!==o?(s=(0,X.jsx)(G,{children:(0,X.jsx)(Se,{"data-slot":`dropdown-menu-content`,sideOffset:a,className:o,...r})}),t[6]=r,t[7]=a,t[8]=o,t[9]=s):s=t[9],s}function Zn(e){let t=(0,qn.c)(12),n,r,i,a;t[0]===e?(n=t[1],r=t[2],i=t[3],a=t[4]):({className:n,inset:r,variant:a,...i}=e,t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=a);let o=a===void 0?`default`:a,s;t[5]===n?s=t[6]:(s=Z(`focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4`,n),t[5]=n,t[6]=s);let c;return t[7]!==r||t[8]!==i||t[9]!==s||t[10]!==o?(c=(0,X.jsx)(ke,{"data-slot":`dropdown-menu-item`,"data-inset":r,"data-variant":o,className:s,...i}),t[7]=r,t[8]=i,t[9]=s,t[10]=o,t[11]=c):c=t[11],c}function Qn(e){let t=(0,qn.c)(8),n,r;t[0]===e?(n=t[1],r=t[2]):({className:n,...r}=e,t[0]=e,t[1]=n,t[2]=r);let i;t[3]===n?i=t[4]:(i=Z(`bg-border -mx-1 my-1 h-px`,n),t[3]=n,t[4]=i);let a;return t[5]!==r||t[6]!==i?(a=(0,X.jsx)(Ne,{"data-slot":`dropdown-menu-separator`,className:i,...r}),t[5]=r,t[6]=i,t[7]=a):a=t[7],a}var $n=q(),er=()=>{let e=(0,$n.c)(1),t;return e[0]===Symbol.for(`react.memo_cache_sentinel`)?(t=(0,X.jsx)(Te,{size:16,className:`fill-blue-500 text-white ml-1 inline-block shrink-0`}),e[0]=t):t=e[0],t},tr=q(),nr=e=>{let t=(0,tr.c)(18),{poll:n,onVote:r}=e,i=n.options.reduce(rr,0),[a,o]=(0,J.useState)(null),s;t[0]!==r||t[1]!==a?(s=e=>{a||(o(e),r&&r(e))},t[0]=r,t[1]=a,t[2]=s):s=t[2];let c=s,l;if(t[3]!==c||t[4]!==n.options||t[5]!==i||t[6]!==a){let e;t[8]!==c||t[9]!==i||t[10]!==a?(e=(e,t)=>{let n=i>0?Math.round((e.votes+(a===e.id?1:0))/(i+(a?1:0))*100):0,r=a===e.id;return(0,X.jsxs)(`div`,{onClick:t=>{t.stopPropagation(),c(e.id)},className:`relative h-10 w-full rounded-xl overflow-hidden cursor-pointer border ${r?`border-violet-500 dark:border-violet-500`:`border-zinc-200 dark:border-zinc-700`}`,children:[a&&(0,X.jsx)(`div`,{className:`absolute top-0 left-0 h-full bg-zinc-200 dark:bg-zinc-800 transition-all duration-500`,style:{width:`${n}%`}}),(0,X.jsxs)(`div`,{className:`absolute inset-0 flex items-center justify-between px-4 z-10`,children:[(0,X.jsxs)(`span`,{className:`font-medium text-sm ${r?`text-violet-600 font-bold`:`text-zinc-700 dark:text-zinc-200`}`,children:[e.text,` `,r&&(0,X.jsx)(Ae,{size:14,className:`inline ml-1 mb-0.5`})]}),a&&(0,X.jsxs)(`span`,{className:`text-sm font-bold text-zinc-900 dark:text-white`,children:[n,`%`]})]})]},e.id||t)},t[8]=c,t[9]=i,t[10]=a,t[11]=e):e=t[11],l=n.options.map(e),t[3]=c,t[4]=n.options,t[5]=i,t[6]=a,t[7]=l}else l=t[7];let u=i+(a?1:0),d=a?`6 days left`:`Click to vote`,f;t[12]!==u||t[13]!==d?(f=(0,X.jsxs)(`div`,{className:`text-xs text-zinc-500 dark:text-zinc-400 pl-1`,children:[u,` votes â€¢ `,d]}),t[12]=u,t[13]=d,t[14]=f):f=t[14];let p;return t[15]!==l||t[16]!==f?(p=(0,X.jsxs)(`div`,{className:`mt-3 space-y-2`,children:[l,f]}),t[15]=l,t[16]=f,t[17]=p):p=t[17],p};function rr(e,t){return e+t.votes}var ir=q(),ar=e=>{let t=(0,ir.c)(23),{user:n,time:r,content:i}=e,a;t[0]!==n.avatar||t[1]!==n.handle?(a=(0,X.jsx)($,{src:n.avatar,alt:n.handle}),t[0]=n.avatar,t[1]=n.handle,t[2]=a):a=t[2];let o;t[3]===n.handle[0]?o=t[4]:(o=n.handle[0]?.toUpperCase(),t[3]=n.handle[0],t[4]=o);let s;t[5]===o?s=t[6]:(s=(0,X.jsx)(sn,{children:o}),t[5]=o,t[6]=s);let c;t[7]!==a||t[8]!==s?(c=(0,X.jsxs)(Q,{className:`size-6`,children:[a,s]}),t[7]=a,t[8]=s,t[9]=c):c=t[9];let l;t[10]===n.handle?l=t[11]:(l=(0,X.jsx)(`span`,{className:`font-semibold text-sm`,children:n.handle}),t[10]=n.handle,t[11]=l);let u;t[12]===r?u=t[13]:(u=(0,X.jsxs)(`span`,{className:`text-zinc-500 text-sm`,children:[`â€¢ `,r]}),t[12]=r,t[13]=u);let d;t[14]!==c||t[15]!==l||t[16]!==u?(d=(0,X.jsxs)(`div`,{className:`flex items-center gap-x-2 mb-2`,children:[c,l,u]}),t[14]=c,t[15]=l,t[16]=u,t[17]=d):d=t[17];let f;t[18]===i?f=t[19]:(f=(0,X.jsx)(`p`,{className:`text-sm text-zinc-800 dark:text-zinc-300 whitespace-pre-line`,children:i}),t[18]=i,t[19]=f);let p;return t[20]!==d||t[21]!==f?(p=(0,X.jsxs)(`div`,{className:`p-4`,children:[d,f]}),t[20]=d,t[21]=f,t[22]=p):p=t[22],p},or=q(),sr=e=>{let t=(0,or.c)(17),{icon:n,count:r,onClick:i,active:a,activeColorClass:o}=e,s=o===void 0?`text-violet-600`:o,c=n,l;t[0]===i?l=t[1]:(l=e=>{e.stopPropagation(),i&&i(e)},t[0]=i,t[1]=l);let u=`group flex items-center gap-x-2 text-[13px] font-medium transition-all ${a?s:`text-zinc-500 hover:text-zinc-700 dark:hover:text-zinc-300`}`,d=`rounded-full p-2 transition-colors ${a?`bg-current/10`:`group-hover:bg-zinc-100 dark:group-hover:bg-zinc-800`}`,f=a?2.5:2,p=a?`fill-current`:``,m;t[2]!==c||t[3]!==f||t[4]!==p?(m=(0,X.jsx)(c,{size:18,strokeWidth:f,className:p}),t[2]=c,t[3]=f,t[4]=p,t[5]=m):m=t[5];let h;t[6]!==d||t[7]!==m?(h=(0,X.jsx)(`div`,{className:d,children:m}),t[6]=d,t[7]=m,t[8]=h):h=t[8];let g;t[9]!==a||t[10]!==r?(g=r!=null&&(0,X.jsx)(`span`,{className:a?`font-bold`:``,children:r||0}),t[9]=a,t[10]=r,t[11]=g):g=t[11];let _;return t[12]!==l||t[13]!==u||t[14]!==h||t[15]!==g?(_=(0,X.jsxs)(`button`,{onClick:l,className:u,children:[h,g]}),t[12]=l,t[13]=u,t[14]=h,t[15]=g,t[16]=_):_=t[16],_},cr=q(),lr=e=>{let t=(0,cr.c)(12),{src:n,poster:r}=e,i=(0,J.useRef)(null),a,o;t[0]===Symbol.for(`react.memo_cache_sentinel`)?(a=()=>{let e=new IntersectionObserver(e=>{let[t]=e;i.current?.plyr&&(t.isIntersecting?i.current.plyr.play().catch(()=>{i.current.plyr.muted=!0,i.current.plyr.play()}):i.current.plyr.pause())},{threshold:.6}),t=i.current?.elements?.container;return t&&e.observe(t),()=>{t&&e.unobserve(t)}},o=[],t[0]=a,t[1]=o):(a=t[0],o=t[1]),(0,J.useEffect)(a,o);let s;t[2]===n?s=t[3]:(s=[{src:n,type:`video/mp4`}],t[2]=n,t[3]=s);let c;t[4]!==r||t[5]!==s?(c={type:`video`,sources:s,poster:r},t[4]=r,t[5]=s,t[6]=c):c=t[6];let l;t[7]===Symbol.for(`react.memo_cache_sentinel`)?(l={controls:[`play-large`,`play`,`progress`,`current-time`,`mute`,`volume`,`fullscreen`],settings:[`quality`,`speed`],ratio:`16:9`,clickToPlay:!0,hideControls:!0,resetOnEnd:!0},t[7]=l):l=t[7];let u;t[8]===c?u=t[9]:(u={source:c,options:l},t[8]=c,t[9]=u);let d=u,f;return t[10]===d?f=t[11]:(f=(0,X.jsx)(`div`,{className:`mt-3 overflow-hidden rounded-2xl shadow-sm border border-zinc-100 dark:border-zinc-800 bg-black`,onClick:ur,children:(0,X.jsx)(ee,{ref:i,...d})}),t[10]=d,t[11]=f),f};function ur(e){return e.stopPropagation()}var dr=q(),fr=e=>{let t=(0,dr.c)(17),{file:n}=e,r;t[0]===Symbol.for(`react.memo_cache_sentinel`)?(r=(0,X.jsx)(`div`,{className:`size-10 rounded-xl bg-violet-100 dark:bg-violet-900/30 flex items-center justify-center text-violet-600`,children:(0,X.jsx)(xe,{size:20})}),t[0]=r):r=t[0];let i;t[1]===n.name?i=t[2]:(i=(0,X.jsx)(`div`,{className:`text-sm font-bold truncate dark:text-white`,children:n.name}),t[1]=n.name,t[2]=i);let a=n.size/1024/1024,o;t[3]===a?o=t[4]:(o=a.toFixed(2),t[3]=a,t[4]=o);let s;t[5]===o?s=t[6]:(s=(0,X.jsxs)(`div`,{className:`text-xs text-zinc-500 uppercase`,children:[o,` MB`]}),t[5]=o,t[6]=s);let c;t[7]!==i||t[8]!==s?(c=(0,X.jsxs)(`div`,{className:`flex-1 min-w-0`,children:[i,s]}),t[7]=i,t[8]=s,t[9]=c):c=t[9];let l;t[10]===Symbol.for(`react.memo_cache_sentinel`)?(l=(0,X.jsx)(U,{size:18}),t[10]=l):l=t[10];let u;t[11]!==n.name||t[12]!==n.url?(u=(0,X.jsx)(`a`,{href:n.url,download:n.name,className:`p-2 text-zinc-400 hover:text-violet-600 transition-colors`,onClick:pr,children:l}),t[11]=n.name,t[12]=n.url,t[13]=u):u=t[13];let d;return t[14]!==c||t[15]!==u?(d=(0,X.jsxs)(`div`,{className:`mt-3 flex items-center gap-3 p-3 rounded-2xl border border-zinc-100 dark:border-zinc-800 bg-zinc-50/50 dark:bg-zinc-900/10 group hover:border-violet-500/30 transition-colors`,children:[r,c,u]}),t[14]=c,t[15]=u,t[16]=d):d=t[16],d};function pr(e){return e.stopPropagation()}var mr=q(),hr=e=>{let t=(0,mr.c)(3),{items:n}=e,r=n===void 0?[]:n,{openLightbox:i}=Ht();if(!r||r.length===0)return null;let a=Array.isArray(r)?r:[r],o=a.filter(gr),s=a.filter(_r),c=e=>{let t=o.filter(vr).map(yr),n=o[e];i(t,t.indexOf(n.url||n.src))},l=o.length>0&&(0,X.jsx)(`div`,{className:`grid gap-2 rounded-2xl overflow-hidden border border-zinc-100 dark:border-zinc-800 ${o.length===1?`grid-cols-1`:o.length===2?`grid-cols-2 aspect-[16/9]`:(o.length,`grid-cols-2 grid-rows-2 aspect-[16/9]`)}`,children:o.map((e,t)=>(0,X.jsx)(`div`,{className:`relative overflow-hidden bg-zinc-100 dark:bg-zinc-900 cursor-pointer ${o.length===3&&t===0?`row-span-2`:``}`,onClick:n=>{e.type===`image`&&(n.stopPropagation(),c(t))},children:e.type===`video`?(0,X.jsx)(lr,{src:e.url,poster:e.poster}):(0,X.jsx)(`img`,{src:e.url||e.src,className:`size-full object-cover hover:scale-[1.02] transition-transform duration-500`,alt:``,loading:`lazy`})},t))}),u=s.map(br),d;return t[0]!==l||t[1]!==u?(d=(0,X.jsxs)(`div`,{className:`mt-3 space-y-2`,children:[l,u]}),t[0]=l,t[1]=u,t[2]=d):d=t[2],d};function gr(e){return e.type===`image`||e.type===`video`}function _r(e){return e.type===`file`}function vr(e){return e.type===`image`}function yr(e){return e.url||e.src}function br(e,t){return(0,X.jsx)(fr,{file:e},t)}var xr=q(),Sr=e=>{let t=(0,xr.c)(6),{currentUser:n,newComment:r,setNewComment:i,handleSubmitComment:a,loading:o}=e,s;return t[0]!==n||t[1]!==a||t[2]!==o||t[3]!==r||t[4]!==i?(s=n?(0,X.jsx)(`div`,{className:`p-4 border-y border-zinc-100 dark:border-zinc-800 bg-zinc-50/30 dark:bg-zinc-900/10`,children:(0,X.jsxs)(`div`,{className:`flex gap-3`,children:[(0,X.jsxs)(Q,{className:`size-9 border border-zinc-200 dark:border-zinc-700`,children:[(0,X.jsx)($,{src:n.avatar,alt:n.handle,className:`object-cover`}),(0,X.jsx)(sn,{children:n.handle?.[0]?.toUpperCase()})]}),(0,X.jsxs)(`div`,{className:`flex-1`,children:[(0,X.jsx)(`textarea`,{id:`comment-input`,className:`w-full bg-transparent outline-none text-base min-h-[60px] resize-none dark:text-white placeholder:text-zinc-500`,placeholder:`Post your reply...`,value:r,onChange:e=>i(e.target.value)}),(0,X.jsxs)(`div`,{className:`flex justify-between items-center mt-2 pt-3 border-t border-zinc-100 dark:border-zinc-800`,children:[(0,X.jsxs)(`div`,{className:`flex text-violet-600 gap-1`,children:[(0,X.jsx)(`button`,{className:`text-violet-600 hover:bg-violet-50 dark:hover:bg-zinc-800 rounded-full p-2`,children:(0,X.jsx)(A,{size:20})}),(0,X.jsx)(`button`,{className:`text-violet-600 hover:bg-violet-50 dark:hover:bg-zinc-800 rounded-full p-2`,children:(0,X.jsx)(p,{size:20})})]}),(0,X.jsx)(Dn,{className:`!w-auto px-5 py-1.5 text-sm font-bold min-w-[70px]`,onClick:a,disabled:!r.trim()||o,children:o?(0,X.jsx)(Ee,{size:16,className:`animate-spin text-white mx-auto`}):`Reply`})]})]})]})}):(0,X.jsx)(`div`,{className:`p-6 text-center border-y border-zinc-100 dark:border-zinc-800 bg-zinc-50/30 dark:bg-zinc-900/10`,children:(0,X.jsx)(`p`,{className:`text-zinc-500 text-sm`,children:`Please login to join the conversation.`})}),t[0]=n,t[1]=a,t[2]=o,t[3]=r,t[4]=i,t[5]=s):s=t[5],s};const Cr=(e,t,n,r)=>{let[i,a]=(0,J.useState)(!1),[o,s]=(0,J.useState)(!1),[c,l]=(0,J.useState)(t||{comments:0,likes:0,mirrors:0});return(0,J.useEffect)(()=>{n&&e&&rn(e)&&rn(n.id)&&mt(e,n.id).then(a).catch(()=>a(!1))},[e,n]),{liked:i,reposted:o,localStats:c,setLocalStats:l,handleLike:async t=>{if(t&&t.stopPropagation(),!n)return r(`Please login to like!`,`error`);if(!rn(e)||!rn(n.id)){let e=!i;a(e),l(t=>({...t,likes:e?(t.likes||0)+1:(t.likes||0)-1})),r(e?`Liked`:`Unliked`);return}try{let t=await pt(e,n.id);a(t),l(e=>({...e,likes:t?(e.likes||0)+1:(e.likes||0)-1})),r(t?`Liked`:`Unliked`)}catch(e){console.error(`Failed to toggle like:`,e),r(`Failed to update like state`,`error`)}},handleRepost:e=>{if(e&&e.stopPropagation(),!n)return r(`Please login to repost!`,`error`);s(!o),l(e=>({...e,mirrors:o?(e.mirrors||0)-1:(e.mirrors||0)+1})),r(o?`Removed repost`:`Reposted`)}}};var wr=({id:e,user:n,timeAgo:r,content:i,contentClass:a,media:o,quotedPost:s,stats:c,onClick:l,repostedBy:u,onUserClick:d,currentUser:f,showToast:p,poll:m,isDetail:h,initialComments:g})=>{let{liked:v,reposted:b,localStats:x,setLocalStats:S,handleLike:C,handleRepost:w}=Cr(e,c,f,p),[T,E]=(0,J.useState)(g||[]),[D,O]=(0,J.useState)(``),[k,A]=(0,J.useState)(!1),[j,M]=(0,J.useState)(!1),N=(0,J.useCallback)(async()=>{if(e){A(!0);try{E(await dt(e))}catch(e){console.error(`Failed to load comments:`,e)}finally{A(!1)}}},[e]);(0,J.useEffect)(()=>{if(h&&e){N();let t=Y.channel(`comments:${e}`).on(`postgres_changes`,{event:`INSERT`,schema:`public`,table:`posts`,filter:`parent_id=eq.${e}`},()=>{N()}).subscribe();return()=>Y.removeChannel(t)}},[h,e,N]);let P=async t=>{if(t.preventDefault(),!(!D.trim()||!f)){M(!0);try{await ft(e,f.id,D),O(``),S(e=>({...e,comments:(e.comments||0)+1})),p&&p(`Reply posted!`),N()}catch(e){console.error(`Failed to post comment:`,e),p&&p(`Failed to post reply.`)}finally{M(!1)}}},F=t=>{t.stopPropagation();let n=`${window.location.origin}/post/${e}`;navigator.clipboard.writeText(n),p&&p(`Link copied to clipboard!`)},I=({trigger:e})=>(0,X.jsxs)(Jn,{children:[(0,X.jsx)(Yn,{asChild:!0,onClick:e=>e.stopPropagation(),children:e}),(0,X.jsxs)(Xn,{align:`end`,className:`w-48 rounded-xl bg-white dark:bg-zinc-900 border-zinc-100 dark:border-zinc-800`,children:[(0,X.jsxs)(Zn,{className:`gap-2 cursor-pointer focus:bg-zinc-50 dark:focus:bg-zinc-800 py-2.5`,onClick:F,children:[(0,X.jsx)(_,{size:16}),(0,X.jsx)(`span`,{children:`Copy link to post`})]}),(0,X.jsxs)(Zn,{className:`gap-2 cursor-pointer focus:bg-zinc-50 dark:focus:bg-zinc-800 py-2.5`,onClick:e=>{e.stopPropagation(),p&&p(`Post reported`)},children:[(0,X.jsx)(re,{size:16}),(0,X.jsx)(`span`,{children:`Report post`})]}),!R&&(0,X.jsxs)(Zn,{className:`gap-2 cursor-pointer focus:bg-zinc-50 dark:focus:bg-zinc-800 py-2.5 text-rose-500 focus:text-rose-500`,onClick:e=>{e.stopPropagation(),p&&p(`User blocked`)},children:[(0,X.jsx)(me,{size:16}),(0,X.jsxs)(`span`,{children:[`Block @`,n.handle]})]}),R&&(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(Qn,{className:`bg-zinc-100 dark:bg-zinc-800`}),(0,X.jsxs)(Zn,{className:`gap-2 cursor-pointer focus:bg-rose-50 dark:focus:bg-rose-900/20 py-2.5 text-rose-500 focus:text-rose-500`,onClick:e=>{e.stopPropagation(),p&&p(`Delete not implemented yet`)},children:[(0,X.jsx)(fe,{size:16}),(0,X.jsx)(`span`,{children:`Delete post`})]})]})]})]}),R=f?.handle===n.handle,z=e=>e?J.isValidElement(e)?e:(0,X.jsx)(hr,{items:e}):null,B=(e,t)=>typeof e==`string`?(0,X.jsx)(`p`,{className:`whitespace-pre-line ${t||``}`,children:e}):e;return h?(0,X.jsxs)(`div`,{className:`flex flex-col`,children:[(0,X.jsxs)(`article`,{className:`p-5 dark:bg-black`,children:[(0,X.jsxs)(`div`,{className:`flex items-start justify-between`,children:[(0,X.jsxs)(`div`,{className:`flex items-start gap-x-3`,children:[(0,X.jsx)(`button`,{className:`shrink-0`,onClick:()=>d&&d(n.handle),children:(0,X.jsxs)(Q,{className:`size-12 border border-zinc-200 dark:border-zinc-700`,children:[(0,X.jsx)($,{src:n.avatar,alt:n.handle,className:`object-cover`}),(0,X.jsx)(sn,{children:n.handle[0]?.toUpperCase()})]})}),(0,X.jsxs)(`div`,{className:`flex flex-col`,children:[(0,X.jsx)(`div`,{className:`flex flex-wrap items-center gap-x-1`,children:(0,X.jsxs)(`button`,{className:`font-bold hover:underline text-zinc-900 dark:text-white flex items-center gap-1 text-base`,onClick:()=>d&&d(n.handle),children:[n.handle,n.verified&&(0,X.jsx)(er,{})]})}),(0,X.jsxs)(`span`,{className:`text-sm text-zinc-500 dark:text-zinc-400`,children:[`@`,n.handle]})]})]}),(0,X.jsx)(I,{trigger:(0,X.jsx)(`button`,{className:`text-zinc-500 hover:bg-zinc-100 dark:hover:bg-zinc-800 rounded-full p-2 transition-colors`,children:(0,X.jsx)(Oe,{size:20})})})]}),(0,X.jsx)(`div`,{className:`break-words text-zinc-900 dark:text-zinc-100 mt-4 text-xl leading-8 whitespace-pre-line`,children:B(i,a)}),z(o),m&&(0,X.jsx)(nr,{poll:m}),s&&(0,X.jsx)(`div`,{className:`mt-4 border border-zinc-200 dark:border-zinc-700 rounded-2xl overflow-hidden shadow-sm`,children:(0,X.jsx)(ar,{...s})}),(0,X.jsx)(`div`,{className:`my-4 flex items-center text-zinc-500 dark:text-zinc-400 text-sm border-b border-zinc-100 dark:border-zinc-800 pb-4`,children:r||`Recent`}),(0,X.jsxs)(`div`,{className:`border-b border-zinc-100 dark:border-zinc-800 pb-4 flex items-center gap-x-6 text-zinc-500 dark:text-zinc-400 text-sm`,children:[(0,X.jsxs)(`div`,{className:`flex items-center gap-x-1`,children:[(0,X.jsx)(`span`,{className:`font-bold text-black dark:text-white`,children:x.comments||0}),` `,(0,X.jsx)(`span`,{className:`opacity-70`,children:`Comments`})]}),(0,X.jsxs)(`div`,{className:`flex items-center gap-x-1`,children:[(0,X.jsx)(`span`,{className:`font-bold text-black dark:text-white`,children:x.likes||0}),` `,(0,X.jsx)(`span`,{className:`opacity-70`,children:`Likes`})]})]}),(0,X.jsxs)(`div`,{className:`mt-4 flex w-full items-center justify-around py-1`,children:[(0,X.jsx)(sr,{icon:L,onClick:()=>document.getElementById(`comment-input`)?.focus()}),(0,X.jsx)(sr,{icon:y,onClick:w,active:b,activeColorClass:`text-emerald-500`}),(0,X.jsx)(sr,{icon:t,onClick:C,active:v,activeColorClass:`text-rose-500`})]})]}),(0,X.jsx)(Sr,{currentUser:f,newComment:D,setNewComment:O,handleSubmitComment:P,loading:j}),(0,X.jsx)(`div`,{className:`divide-y divide-zinc-100 dark:divide-zinc-800`,children:k?(0,X.jsx)(`div`,{className:`p-8 flex justify-center`,children:(0,X.jsx)(Ee,{className:`animate-spin text-violet-500`})}):T.map(e=>(0,X.jsx)(wr,{...e,onUserClick:d,currentUser:f,showToast:p},e.id))})]}):(0,X.jsxs)(`article`,{onClick:l,className:`px-5 pt-4 pb-3 hover:bg-zinc-50/80 dark:hover:bg-zinc-900/40 transition-colors border-b border-zinc-100 dark:border-zinc-800 last:border-0 ${l?`cursor-pointer`:``}`,children:[u&&(0,X.jsxs)(`div`,{className:`mb-2 flex items-center space-x-1.5 text-[13px] text-zinc-500 font-semibold ml-1`,children:[(0,X.jsx)(y,{size:14,className:`text-zinc-400`}),(0,X.jsx)(`span`,{className:`hover:underline cursor-pointer flex items-center text-zinc-600 dark:text-zinc-400`,onClick:e=>{e.stopPropagation(),d&&d(u.handle)},children:(0,X.jsx)(`span`,{className:`truncate max-w-[150px]`,children:typeof u==`object`?u.name:u})}),(0,X.jsx)(`span`,{className:`text-zinc-400`,children:`reposted`})]}),(0,X.jsxs)(`div`,{className:`flex items-start gap-x-3`,children:[(0,X.jsx)(`button`,{className:`shrink-0 group`,onClick:e=>{e.stopPropagation(),d&&d(n.handle)},children:(0,X.jsxs)(Q,{className:`size-11 border border-zinc-200 dark:border-zinc-700 group-hover:brightness-95 transition-all`,children:[(0,X.jsx)($,{src:n.avatar,alt:n.handle,className:`object-cover`}),(0,X.jsx)(sn,{children:n.handle[0]?.toUpperCase()})]})}),(0,X.jsxs)(`div`,{className:`min-w-0 flex-1`,children:[(0,X.jsxs)(`div`,{className:`flex w-full items-start justify-between`,children:[(0,X.jsx)(`div`,{className:`flex flex-col min-w-0`,children:(0,X.jsxs)(`div`,{className:`flex flex-wrap items-center gap-x-1`,children:[(0,X.jsxs)(`button`,{className:`font-bold hover:underline text-zinc-900 dark:text-white flex items-center gap-1 truncate text-[15px]`,onClick:e=>{e.stopPropagation(),d&&d(n.handle)},children:[(0,X.jsx)(`span`,{className:`truncate`,children:n.handle}),n.verified&&(0,X.jsx)(er,{})]}),(0,X.jsxs)(`span`,{className:`text-zinc-400 text-sm ml-1 whitespace-nowrap`,children:[`â€¢ `,r||`Recent`]})]})}),(0,X.jsx)(I,{trigger:(0,X.jsx)(`button`,{className:`text-zinc-400 hover:bg-zinc-100 hover:text-zinc-700 dark:hover:bg-zinc-800 dark:hover:text-zinc-200 rounded-full p-2 -mr-2 transition-colors`,children:(0,X.jsx)(Oe,{size:18})})})]}),(0,X.jsxs)(`div`,{className:`break-words text-zinc-900 dark:text-zinc-100 mt-1 whitespace-pre-line text-[15px] leading-relaxed`,children:[B(i,a),z(o),m&&(0,X.jsx)(nr,{poll:m,onVote:()=>p&&p(`Voted!`)}),s&&(0,X.jsx)(`div`,{className:`mt-3 border border-zinc-200 dark:border-zinc-700 rounded-2xl overflow-hidden bg-white dark:bg-zinc-900 hover:bg-zinc-50 dark:hover:bg-zinc-800 transition-colors cursor-pointer`,onClick:e=>e.stopPropagation(),children:(0,X.jsx)(ar,{...s})})]}),(0,X.jsx)(`div`,{className:`mt-3 flex w-full flex-wrap items-center justify-between gap-3 pr-4`,children:(0,X.jsxs)(`div`,{className:`flex items-center gap-x-6`,children:[(0,X.jsx)(sr,{icon:L,count:x.comments,onClick:l}),(0,X.jsx)(sr,{icon:y,count:x.mirrors,active:b,onClick:w,activeColorClass:`text-emerald-500`}),(0,X.jsx)(sr,{icon:t,count:x.likes,active:v,onClick:C,activeColorClass:`text-rose-500`})]})})]})]})]})},Tr=wr,Er=q(),Dr=()=>{let e=(0,Er.c)(3),t;e[0]===Symbol.for(`react.memo_cache_sentinel`)?(t=(0,X.jsx)(`div`,{className:`size-11 rounded-full bg-zinc-200 dark:bg-zinc-800 shrink-0`}),e[0]=t):t=e[0];let n;e[1]===Symbol.for(`react.memo_cache_sentinel`)?(n=(0,X.jsx)(`div`,{className:`h-4 bg-zinc-200 dark:bg-zinc-800 rounded w-1/3`}),e[1]=n):n=e[1];let r;return e[2]===Symbol.for(`react.memo_cache_sentinel`)?(r=(0,X.jsx)(`div`,{className:`px-5 pt-4 pb-3 border-b border-zinc-100 dark:border-zinc-800 animate-pulse`,children:(0,X.jsxs)(`div`,{className:`flex items-start gap-x-3`,children:[t,(0,X.jsxs)(`div`,{className:`flex-1 space-y-3`,children:[n,(0,X.jsxs)(`div`,{className:`space-y-2`,children:[(0,X.jsx)(`div`,{className:`h-3 bg-zinc-200 dark:bg-zinc-800 rounded w-full`}),(0,X.jsx)(`div`,{className:`h-3 bg-zinc-200 dark:bg-zinc-800 rounded w-5/6`})]}),(0,X.jsx)(`div`,{className:`h-48 bg-zinc-200 dark:bg-zinc-800 rounded-xl w-full`})]})]})}),e[2]=r):r=e[2],r},Or=q(),kr=e=>{let t=(0,Or.c)(35),{onStoryClick:n,onAddStory:r}=e,{currentUser:i}=Ct(),{addToast:a}=Pt(),o=O(),s;t[0]===Symbol.for(`react.memo_cache_sentinel`)?(s={queryKey:[`posts`],queryFn:tt},t[0]=s):s=t[0];let{data:c,isLoading:l}=M(s),u;t[1]===c?u=t[2]:(u=c===void 0?[]:c,t[1]=c,t[2]=u);let d=u,f;t[3]===Symbol.for(`react.memo_cache_sentinel`)?(f={queryKey:[`stories`],queryFn:vt},t[3]=f):f=t[3];let{data:p,isLoading:m}=M(f),h;t[4]===p?h=t[5]:(h=p===void 0?[]:p,t[4]=p,t[5]=h);let g=h,_;t[6]===d?_=t[7]:(_=d.filter(Ar),t[6]=d,t[7]=_);let v=_,y;t[8]===o?y=t[9]:(y=e=>{o(`/post/${e}`)},t[8]=o,t[9]=y);let b=y,x;t[10]===o?x=t[11]:(x=e=>{o(`/u/${e}`)},t[10]=o,t[11]=x);let S=x;if(l||m){let e;return t[12]===Symbol.for(`react.memo_cache_sentinel`)?(e=(0,X.jsxs)(`div`,{className:`border-y md:border border-zinc-100 dark:border-zinc-800 bg-white dark:bg-black rounded-none md:rounded-xl overflow-hidden min-h-screen`,children:[(0,X.jsxs)(`div`,{className:`flex gap-3 overflow-x-auto no-scrollbar py-4 px-4 bg-white dark:bg-black border-b border-zinc-100 dark:border-zinc-800`,children:[(0,X.jsx)(`div`,{className:`size-16 rounded-full bg-zinc-100 dark:bg-zinc-900 animate-pulse shrink-0`}),(0,X.jsx)(`div`,{className:`size-16 rounded-full bg-zinc-100 dark:bg-zinc-900 animate-pulse shrink-0`}),(0,X.jsx)(`div`,{className:`size-16 rounded-full bg-zinc-100 dark:bg-zinc-900 animate-pulse shrink-0`})]}),[1,2,3].map(jr)]}),t[12]=e):e=t[12],e}let C;t[13]!==i||t[14]!==r?(C=i&&(0,X.jsx)(Kn,{user:i,isAddStory:!0,onClick:r}),t[13]=i,t[14]=r,t[15]=C):C=t[15];let w;if(t[16]!==n||t[17]!==g){let e;t[19]===n?e=t[20]:(e=e=>(0,X.jsx)(Kn,{user:e.user,onClick:()=>n(e)},e.id),t[19]=n,t[20]=e),w=g.map(e),t[16]=n,t[17]=g,t[18]=w}else w=t[18];let T;t[21]!==C||t[22]!==w?(T=(0,X.jsxs)(`div`,{className:`flex gap-4 overflow-x-auto no-scrollbar py-4 px-4 bg-white dark:bg-black border-b border-zinc-100 dark:border-zinc-800`,children:[C,w]}),t[21]=C,t[22]=w,t[23]=T):T=t[23];let E;t[24]!==a||t[25]!==i||t[26]!==b||t[27]!==S||t[28]!==v?(E=v.length>0?v.map(e=>(0,X.jsx)(Tr,{...e,currentUser:i,showToast:a,onClick:()=>b(e.id),onUserClick:S},e.id)):(0,X.jsxs)(`div`,{className:`p-20 text-center text-zinc-500`,children:[(0,X.jsx)(`p`,{className:`text-lg font-medium`,children:`No posts yet.`}),(0,X.jsx)(`p`,{className:`text-sm`,children:`Be the first to share something amazing!`})]}),t[24]=a,t[25]=i,t[26]=b,t[27]=S,t[28]=v,t[29]=E):E=t[29];let D;t[30]===E?D=t[31]:(D=(0,X.jsx)(`div`,{className:`border-y md:border border-zinc-100 dark:border-zinc-800 bg-white dark:bg-black rounded-none md:rounded-xl overflow-hidden min-h-screen shadow-sm pb-24`,children:E}),t[30]=E,t[31]=D);let k;return t[32]!==T||t[33]!==D?(k=(0,X.jsxs)(`div`,{children:[T,D]}),t[32]=T,t[33]=D,t[34]=k):k=t[34],k};function Ar(e){return!e.parent_id}function jr(e){return(0,X.jsx)(Dr,{},e)}var Mr=q(),Nr=e=>{let t=(0,Mr.c)(44),{profile:n,onUserClick:r,isCommunity:i}=e,a=i===void 0?!1:i,o;t[0]!==r||t[1]!==n.handle?(o=()=>r(n.handle),t[0]=r,t[1]=n.handle,t[2]=o):o=t[2];let s=`size-12 border border-zinc-200 dark:border-zinc-800 shadow-sm ${a?`rounded-2xl`:``}`,c;t[3]!==n.avatar||t[4]!==n.handle?(c=(0,X.jsx)($,{src:n.avatar,alt:n.handle,className:`object-cover`}),t[3]=n.avatar,t[4]=n.handle,t[5]=c):c=t[5];let l=a?`rounded-2xl`:``,u;t[6]===n.handle?.[0]?u=t[7]:(u=n.handle?.[0]?.toUpperCase(),t[6]=n.handle?.[0],t[7]=u);let d;t[8]!==l||t[9]!==u?(d=(0,X.jsx)(sn,{className:l,children:u}),t[8]=l,t[9]=u,t[10]=d):d=t[10];let f;t[11]!==s||t[12]!==c||t[13]!==d?(f=(0,X.jsxs)(Q,{className:s,children:[c,d]}),t[11]=s,t[12]=c,t[13]=d,t[14]=f):f=t[14];let p;t[15]===n.name?p=t[16]:(p=(0,X.jsx)(`span`,{className:`font-bold text-zinc-900 dark:text-white group-hover:underline leading-none`,children:n.name}),t[15]=n.name,t[16]=p);let m;t[17]===n.verified?m=t[18]:(m=n.verified&&(0,X.jsx)(er,{}),t[17]=n.verified,t[18]=m);let h;t[19]!==m||t[20]!==p?(h=(0,X.jsxs)(`div`,{className:`flex items-center gap-1`,children:[p,m]}),t[19]=m,t[20]=p,t[21]=h):h=t[21];let g;t[22]===n.handle?g=t[23]:(g=(0,X.jsxs)(`span`,{className:`text-sm text-zinc-500 mt-0.5`,children:[`@`,n.handle]}),t[22]=n.handle,t[23]=g);let _;t[24]!==a||t[25]!==n.members?(_=a&&n.members&&(0,X.jsxs)(`span`,{className:`text-xs text-zinc-400 mt-1`,children:[n.members,` members`]}),t[24]=a,t[25]=n.members,t[26]=_):_=t[26];let v;t[27]!==a||t[28]!==n.followers?(v=!a&&n.followers&&(0,X.jsxs)(`span`,{className:`text-xs text-zinc-400 mt-1`,children:[n.followers,` followers`]}),t[27]=a,t[28]=n.followers,t[29]=v):v=t[29];let y;t[30]!==h||t[31]!==g||t[32]!==_||t[33]!==v?(y=(0,X.jsxs)(`div`,{className:`flex flex-col`,children:[h,g,_,v]}),t[30]=h,t[31]=g,t[32]=_,t[33]=v,t[34]=y):y=t[34];let b;t[35]!==y||t[36]!==f?(b=(0,X.jsxs)(`div`,{className:`flex items-center gap-3`,children:[f,y]}),t[35]=y,t[36]=f,t[37]=b):b=t[37];let x=a?`Join`:`Follow`,S;t[38]===x?S=t[39]:(S=(0,X.jsx)(Dn,{variant:`outline`,className:`!w-auto !py-1.5 !px-4 text-sm font-bold rounded-full border-zinc-200 dark:border-zinc-700 hover:bg-zinc-100 dark:hover:bg-zinc-800`,onClick:Pr,children:x}),t[38]=x,t[39]=S);let C;return t[40]!==b||t[41]!==S||t[42]!==o?(C=(0,X.jsxs)(`div`,{className:`flex items-center justify-between p-4 border-b border-zinc-100 dark:border-zinc-800 hover:bg-zinc-50 dark:hover:bg-zinc-900/40 transition-colors group cursor-pointer`,onClick:o,children:[b,S]}),t[40]=b,t[41]=S,t[42]=o,t[43]=C):C=t[43],C};function Pr(e){e.stopPropagation()}var Fr=q();function Ir(e){let t=(0,Fr.c)(8),n,r;t[0]===e?(n=t[1],r=t[2]):({className:n,...r}=e,t[0]=e,t[1]=n,t[2]=r);let i;t[3]===n?i=t[4]:(i=Z(`flex flex-col gap-2`,n),t[3]=n,t[4]=i);let a;return t[5]!==r||t[6]!==i?(a=(0,X.jsx)(De,{"data-slot":`tabs`,className:i,...r}),t[5]=r,t[6]=i,t[7]=a):a=t[7],a}function Lr(e){let t=(0,Fr.c)(8),n,r;t[0]===e?(n=t[1],r=t[2]):({className:n,...r}=e,t[0]=e,t[1]=n,t[2]=r);let i;t[3]===n?i=t[4]:(i=Z(`bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]`,n),t[3]=n,t[4]=i);let a;return t[5]!==r||t[6]!==i?(a=(0,X.jsx)(be,{"data-slot":`tabs-list`,className:i,...r}),t[5]=r,t[6]=i,t[7]=a):a=t[7],a}function Rr(e){let t=(0,Fr.c)(8),n,r;t[0]===e?(n=t[1],r=t[2]):({className:n,...r}=e,t[0]=e,t[1]=n,t[2]=r);let i;t[3]===n?i=t[4]:(i=Z(`data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4`,n),t[3]=n,t[4]=i);let a;return t[5]!==r||t[6]!==i?(a=(0,X.jsx)(ue,{"data-slot":`tabs-trigger`,className:i,...r}),t[5]=r,t[6]=i,t[7]=a):a=t[7],a}function zr(e){let t=(0,Fr.c)(8),n,r;t[0]===e?(n=t[1],r=t[2]):({className:n,...r}=e,t[0]=e,t[1]=n,t[2]=r);let i;t[3]===n?i=t[4]:(i=Z(`flex-1 outline-none`,n),t[3]=n,t[4]=i);let a;return t[5]!==r||t[6]!==i?(a=(0,X.jsx)(je,{"data-slot":`tabs-content`,className:i,...r}),t[5]=r,t[6]=i,t[7]=a):a=t[7],a}var Br=q(),Vr=()=>{let e=(0,Br.c)(53),{currentUser:t}=Ct(),{addToast:n}=Pt(),r=O(),[i,a]=(0,J.useState)(`users`),[o,s]=(0,J.useState)(``),c;e[0]===Symbol.for(`react.memo_cache_sentinel`)?(c={queryKey:[`posts`],queryFn:tt},e[0]=c):c=e[0];let{data:l,isLoading:u}=M(c),d;e[1]===l?d=e[2]:(d=l===void 0?[]:l,e[1]=l,e[2]=d);let f=d,p;e[3]===Symbol.for(`react.memo_cache_sentinel`)?(p={queryKey:[`profiles`],queryFn:it},e[3]=p):p=e[3];let{data:m,isLoading:h}=M(p),g;e[4]===m?g=e[5]:(g=m===void 0?{}:m,e[4]=m,e[5]=g);let _=g,v;e[6]!==_||e[7]!==o?(v=Object.values(_).filter(Hr),o&&(v=v.filter(e=>e.name?.toLowerCase().includes(o.toLowerCase())||e.handle?.toLowerCase().includes(o.toLowerCase()))),e[6]=_,e[7]=o,e[8]=v):v=e[8];let y=v,b;e[9]!==_||e[10]!==o?(b=Object.values(_).filter(Ur),o&&(b=b.filter(e=>e.name?.toLowerCase().includes(o.toLowerCase())||e.handle?.toLowerCase().includes(o.toLowerCase()))),e[9]=_,e[10]=o,e[11]=b):b=e[11];let x=b,S;if(e[12]!==f||e[13]!==o){if(S=f.filter(Wr),o){let t;e[15]===o?t=e[16]:(t=e=>e.content?.toLowerCase().includes(o.toLowerCase()),e[15]=o,e[16]=t),S=S.filter(t)}e[12]=f,e[13]=o,e[14]=S}else S=e[14];let C=S,w;e[17]===r?w=e[18]:(w=e=>{r(`/post/${e}`)},e[17]=r,e[18]=w);let T=w,E;e[19]===r?E=e[20]:(E=e=>{r(`/u/${e}`)},e[19]=r,e[20]=E);let D=E;if(u||h){let t;return e[21]===Symbol.for(`react.memo_cache_sentinel`)?(t=(0,X.jsx)(`div`,{className:`border-y md:border border-zinc-100 dark:border-zinc-800 bg-white dark:bg-black rounded-none md:rounded-xl overflow-hidden min-h-screen`,children:[1,2,3].map(Gr)}),e[21]=t):t=e[21],t}let k;e[22]===Symbol.for(`react.memo_cache_sentinel`)?(k=()=>s(``),e[22]=k):k=e[22];let A=`Search ${i}...`,j;e[23]!==o||e[24]!==A?(j=(0,X.jsx)(`div`,{className:`p-4`,children:(0,X.jsx)(Yt,{value:o,onChange:s,onClear:k,placeholder:A})}),e[23]=o,e[24]=A,e[25]=j):j=e[25];let N;e[26]===Symbol.for(`react.memo_cache_sentinel`)?(N=(0,X.jsx)(Lr,{className:`w-full h-auto bg-transparent p-0 rounded-none justify-around px-5`,children:[`users`,`communities`,`reels`].map(Kr)}),e[26]=N):N=e[26];let P;e[27]===j?P=e[28]:(P=(0,X.jsxs)(`div`,{className:`sticky top-0 bg-white/90 dark:bg-black/90 backdrop-blur-md z-10 border-b border-zinc-100 dark:border-zinc-800`,children:[j,N]}),e[27]=j,e[28]=P);let F;e[29]!==D||e[30]!==y?(F=y.length>0?y.map(e=>(0,X.jsx)(Nr,{profile:e,onUserClick:D},e.handle)):(0,X.jsx)(`div`,{className:`p-20 text-center text-zinc-500`,children:(0,X.jsx)(`p`,{className:`font-bold`,children:`No users found`})}),e[29]=D,e[30]=y,e[31]=F):F=e[31];let I;e[32]===F?I=e[33]:(I=(0,X.jsx)(zr,{value:`users`,className:`m-0 border-none`,children:(0,X.jsx)(`div`,{className:`divide-y divide-zinc-100 dark:divide-zinc-800`,children:F})}),e[32]=F,e[33]=I);let L;e[34]!==x||e[35]!==D?(L=x.length>0?x.map(e=>(0,X.jsx)(Nr,{profile:e,onUserClick:D,isCommunity:!0},e.handle)):(0,X.jsx)(`div`,{className:`p-20 text-center text-zinc-500`,children:(0,X.jsx)(`p`,{className:`font-bold`,children:`No communities found`})}),e[34]=x,e[35]=D,e[36]=L):L=e[36];let R;e[37]===L?R=e[38]:(R=(0,X.jsx)(zr,{value:`communities`,className:`m-0 border-none`,children:(0,X.jsx)(`div`,{className:`divide-y divide-zinc-100 dark:divide-zinc-800`,children:L})}),e[37]=L,e[38]=R);let z;e[39]!==n||e[40]!==t||e[41]!==T||e[42]!==D||e[43]!==C?(z=C.length>0?C.map(e=>(0,X.jsx)(Tr,{...e,currentUser:t,showToast:n,onClick:()=>T(e.id),onUserClick:D},e.id)):(0,X.jsx)(`div`,{className:`p-20 text-center text-zinc-500`,children:(0,X.jsx)(`p`,{className:`font-bold`,children:`No reels found`})}),e[39]=n,e[40]=t,e[41]=T,e[42]=D,e[43]=C,e[44]=z):z=e[44];let B;e[45]===z?B=e[46]:(B=(0,X.jsx)(zr,{value:`reels`,className:`m-0 border-none`,children:(0,X.jsx)(`div`,{children:z})}),e[45]=z,e[46]=B);let V;return e[47]!==i||e[48]!==P||e[49]!==I||e[50]!==R||e[51]!==B?(V=(0,X.jsx)(`div`,{className:`border-y md:border border-zinc-100 dark:border-zinc-800 bg-white dark:bg-black rounded-none md:rounded-xl overflow-hidden min-h-screen shadow-sm pb-20`,children:(0,X.jsxs)(Ir,{value:i,onValueChange:a,className:`w-full`,children:[P,I,R,B]})}),e[47]=i,e[48]=P,e[49]=I,e[50]=R,e[51]=B,e[52]=V):V=e[52],V};function Hr(e){return e.type!==`community`}function Ur(e){return e.type===`community`}function Wr(e){return e.type===`video`}function Gr(e){return(0,X.jsx)(Dr,{},e)}function Kr(e){return(0,X.jsx)(Rr,{value:e,className:`relative py-4 px-2 text-sm font-semibold transition-all border-b-2 rounded-none whitespace-nowrap flex-1 text-center capitalize data-[state=active]:bg-transparent data-[state=active]:border-black dark:data-[state=active]:border-white data-[state=active]:text-black dark:data-[state=active]:text-white text-zinc-500 hover:text-zinc-800 dark:hover:text-zinc-300`,children:e},e)}var qr=q(),Jr=e=>{let n=(0,qr.c)(58),{reel:r}=e,i=(0,J.useRef)(null),[o,s]=(0,J.useState)(!1),c=(0,J.useRef)(0),l=Array.isArray(r.media)?r.media[0]?.src||r.media[0]?.url:r.media?.src||r.media?.url||r.url,u,d;n[0]===Symbol.for(`react.memo_cache_sentinel`)?(u=()=>{let e=new IntersectionObserver(e=>{let[t]=e;i.current?.plyr&&(t.isIntersecting?i.current.plyr.play().catch(()=>{i.current.plyr.muted=!0,i.current.plyr.play()}):i.current.plyr.pause())},{threshold:.8}),t=i.current?.elements?.container;return t&&e.observe(t),()=>{t&&e.unobserve(t)}},d=[],n[0]=u,n[1]=d):(u=n[0],d=n[1]),(0,J.useEffect)(u,d);let f;n[2]===Symbol.for(`react.memo_cache_sentinel`)?(f=()=>{let e=Date.now();e-c.current<300&&(s(!0),setTimeout(()=>s(!1),1e3)),c.current=e},n[2]=f):f=n[2];let p=f,m;n[3]===l?m=n[4]:(m={type:`video`,sources:[{src:l,type:`video/mp4`}]},n[3]=l,n[4]=m);let h;n[5]===Symbol.for(`react.memo_cache_sentinel`)?(h={controls:[],loop:{active:!0},clickToPlay:!0,ratio:`9:16`},n[5]=h):h=n[5];let g;n[6]===m?g=n[7]:(g={source:m,options:h},n[6]=m,n[7]=g);let _=g,v;n[8]===_?v=n[9]:(v=(0,X.jsx)(`div`,{className:`w-full h-full max-w-[450px]`,children:(0,X.jsx)(ee,{ref:i,..._})}),n[8]=_,n[9]=v);let y;n[10]===o?y=n[11]:(y=o&&(0,X.jsx)(j.div,{initial:{scale:0,opacity:0},animate:{scale:1.5,opacity:1},exit:{scale:2,opacity:0},className:`absolute inset-0 flex items-center justify-center pointer-events-none z-50`,children:(0,X.jsx)(t,{size:100,fill:`white`,className:`text-white drop-shadow-2xl`})}),n[10]=o,n[11]=y);let b;n[12]===y?b=n[13]:(b=(0,X.jsx)(a,{children:y}),n[12]=y,n[13]=b);let x;n[14]===Symbol.for(`react.memo_cache_sentinel`)?(x=(0,X.jsx)(`div`,{className:`absolute inset-0 bg-gradient-to-b from-black/20 via-transparent to-black/60 pointer-events-none`}),n[14]=x):x=n[14];let S=r.user?.avatar,C=r.user?.handle,w;n[15]!==S||n[16]!==C?(w=(0,X.jsx)($,{src:S,alt:C,className:`object-cover`}),n[15]=S,n[16]=C,n[17]=w):w=n[17];let T;n[18]===r.user?.handle?.[0]?T=n[19]:(T=r.user?.handle?.[0]?.toUpperCase(),n[18]=r.user?.handle?.[0],n[19]=T);let E;n[20]===T?E=n[21]:(E=(0,X.jsx)(sn,{children:T}),n[20]=T,n[21]=E);let O;n[22]!==w||n[23]!==E?(O=(0,X.jsxs)(Q,{className:`size-10 border-2 border-white`,children:[w,E]}),n[22]=w,n[23]=E,n[24]=O):O=n[24];let k=r.user?.handle,A;n[25]===k?A=n[26]:(A=(0,X.jsxs)(`span`,{className:`font-bold`,children:[`@`,k]}),n[25]=k,n[26]=A);let M;n[27]===Symbol.for(`react.memo_cache_sentinel`)?(M=(0,X.jsx)(`button`,{className:`bg-white text-black text-xs font-bold px-3 py-1 rounded-full ml-2 hover:scale-105 active:scale-95 transition-all`,children:`Follow`}),n[27]=M):M=n[27];let N;n[28]!==O||n[29]!==A?(N=(0,X.jsxs)(`div`,{className:`flex items-center gap-2 mb-3 pointer-events-auto`,children:[O,A,M]}),n[28]=O,n[29]=A,n[30]=N):N=n[30];let P;n[31]===r.content?P=n[32]:(P=(0,X.jsx)(`p`,{className:`text-sm mb-3 line-clamp-2`,children:r.content}),n[31]=r.content,n[32]=P);let F;n[33]===Symbol.for(`react.memo_cache_sentinel`)?(F=(0,X.jsx)(I,{size:14,className:`animate-spin-slow`}),n[33]=F):F=n[33];let R=r.user?.handle,z;n[34]===R?z=n[35]:(z=(0,X.jsxs)(`div`,{className:`flex items-center gap-2 text-xs opacity-90`,children:[F,(0,X.jsxs)(`span`,{children:[`Original Audio - `,R]})]}),n[34]=R,n[35]=z);let B;n[36]!==N||n[37]!==P||n[38]!==z?(B=(0,X.jsxs)(`div`,{className:`absolute bottom-20 left-4 right-16 text-white pointer-events-none`,children:[N,P,z]}),n[36]=N,n[37]=P,n[38]=z,n[39]=B):B=n[39];let V;n[40]===Symbol.for(`react.memo_cache_sentinel`)?(V=(0,X.jsx)(`button`,{className:`p-3 bg-zinc-800/50 rounded-full text-white backdrop-blur-md hover:bg-zinc-700 transition-colors active:scale-90`,children:(0,X.jsx)(t,{size:28})}),n[40]=V):V=n[40];let H=r.stats?.likes||0,U;n[41]===H?U=n[42]:(U=(0,X.jsxs)(`div`,{className:`flex flex-col items-center gap-1`,children:[V,(0,X.jsx)(`span`,{className:`text-white text-xs font-bold`,children:H})]}),n[41]=H,n[42]=U);let W;n[43]===Symbol.for(`react.memo_cache_sentinel`)?(W=(0,X.jsx)(`button`,{className:`p-3 bg-zinc-800/50 rounded-full text-white backdrop-blur-md hover:bg-zinc-700 transition-colors active:scale-90`,children:(0,X.jsx)(L,{size:28})}),n[43]=W):W=n[43];let G=r.stats?.comments||0,K;n[44]===G?K=n[45]:(K=(0,X.jsxs)(`div`,{className:`flex flex-col items-center gap-1`,children:[W,(0,X.jsx)(`span`,{className:`text-white text-xs font-bold`,children:G})]}),n[44]=G,n[45]=K);let te;n[46]===Symbol.for(`react.memo_cache_sentinel`)?(te=(0,X.jsx)(`button`,{className:`p-3 bg-zinc-800/50 rounded-full text-white backdrop-blur-md hover:bg-zinc-700 transition-colors active:scale-90`,children:(0,X.jsx)(D,{size:28})}),n[46]=te):te=n[46];let ne=r.stats?.shares||0,re;n[47]===ne?re=n[48]:(re=(0,X.jsxs)(`div`,{className:`flex flex-col items-center gap-1`,children:[te,(0,X.jsx)(`span`,{className:`text-white text-xs font-bold`,children:ne})]}),n[47]=ne,n[48]=re);let ie;n[49]!==U||n[50]!==K||n[51]!==re?(ie=(0,X.jsxs)(`div`,{className:`absolute bottom-20 right-2 flex flex-col items-center gap-6 z-10`,children:[U,K,re]}),n[49]=U,n[50]=K,n[51]=re,n[52]=ie):ie=n[52];let ae;return n[53]!==B||n[54]!==ie||n[55]!==v||n[56]!==b?(ae=(0,X.jsxs)(`div`,{className:`relative h-screen w-full bg-black snap-start flex items-center justify-center overflow-hidden`,onClick:p,children:[v,b,x,B,ie]}),n[53]=B,n[54]=ie,n[55]=v,n[56]=b,n[57]=ae):ae=n[57],ae},Yr=q(),Xr=()=>{let e=(0,Yr.c)(10),{posts:t,loading:n}=Rt(),r,i,a;if(e[0]!==n||e[1]!==t){a=Symbol.for(`react.early_return_sentinel`);bb0:{let o=t.filter(Zr);if(n){let t;e[5]===Symbol.for(`react.memo_cache_sentinel`)?(t=(0,X.jsx)(`div`,{className:`h-screen w-full flex items-center justify-center bg-black`,children:(0,X.jsx)(Ee,{size:40,className:`animate-spin text-white`})}),e[5]=t):t=e[5],a=t;break bb0}if(o.length===0){let t;e[6]===Symbol.for(`react.memo_cache_sentinel`)?(t=(0,X.jsx)(`div`,{className:`h-screen w-full flex flex-col items-center justify-center bg-black text-white gap-4`,children:(0,X.jsx)(`p`,{className:`text-zinc-500`,children:`No reels found.`})}),e[6]=t):t=e[6],a=t;break bb0}r=`h-screen w-full snap-y snap-mandatory overflow-y-auto no-scrollbar bg-black md:rounded-xl`,i=o.map(Qr)}e[0]=n,e[1]=t,e[2]=r,e[3]=i,e[4]=a}else r=e[2],i=e[3],a=e[4];if(a!==Symbol.for(`react.early_return_sentinel`))return a;let o;return e[7]!==r||e[8]!==i?(o=(0,X.jsx)(`div`,{className:r,children:i}),e[7]=r,e[8]=i,e[9]=o):o=e[9],o};function Zr(e){return e.type===`video`||e.category===`video`}function Qr(e){return(0,X.jsx)(Jr,{reel:e},e.id)}var $r=q(),ei=e=>{let t=(0,$r.c)(18),{conversations:n,onSelect:r,selectedId:i,searchQuery:a,onSearchChange:o}=e,s;t[0]===Symbol.for(`react.memo_cache_sentinel`)?(s=(0,X.jsx)(h,{size:18,className:`absolute left-3 top-2.5 text-zinc-400 group-focus-within:text-violet-500`}),t[0]=s):s=t[0];let c;t[1]===o?c=t[2]:(c=e=>o(e.target.value),t[1]=o,t[2]=c);let l;t[3]!==a||t[4]!==c?(l=(0,X.jsx)(`div`,{className:`p-4 border-b border-zinc-100 dark:border-zinc-800`,children:(0,X.jsxs)(`div`,{className:`relative group`,children:[s,(0,X.jsx)(`input`,{type:`text`,placeholder:`Search messages...`,className:`w-full bg-zinc-100 dark:bg-zinc-900 border-none rounded-xl py-2 pl-10 pr-4 text-sm outline-none focus:ring-1 focus:ring-violet-500 transition-all`,value:a,onChange:c})]})}),t[3]=a,t[4]=c,t[5]=l):l=t[5];let u;if(t[6]!==n||t[7]!==r||t[8]!==i){let e;t[10]!==r||t[11]!==i?(e=e=>(0,X.jsxs)(`div`,{onClick:()=>r(e),className:`flex items-center gap-3 p-4 cursor-pointer transition-colors hover:bg-zinc-50 dark:hover:bg-zinc-900 ${i===e.id?`bg-zinc-50 dark:bg-zinc-900 border-r-2 border-violet-500`:``}`,children:[(0,X.jsxs)(Q,{className:`size-12`,children:[(0,X.jsx)($,{src:e.user.avatar,alt:e.user.name,className:`object-cover`}),(0,X.jsx)(sn,{children:e.user.name?.[0]?.toUpperCase()})]}),(0,X.jsxs)(`div`,{className:`flex-1 min-w-0`,children:[(0,X.jsxs)(`div`,{className:`flex justify-between items-center mb-0.5`,children:[(0,X.jsx)(`span`,{className:`font-bold dark:text-white truncate`,children:e.user.name}),(0,X.jsx)(`span`,{className:`text-xs text-zinc-500 whitespace-nowrap ml-2`,children:e.time})]}),(0,X.jsxs)(`div`,{className:`flex justify-between items-center`,children:[(0,X.jsx)(`p`,{className:`text-zinc-500 text-sm truncate pr-2`,children:e.lastMessage}),e.unread>0&&(0,X.jsx)(`span`,{className:`bg-violet-600 text-white text-[10px] font-bold size-5 rounded-full flex items-center justify-center shrink-0`,children:e.unread})]})]})]},e.id),t[10]=r,t[11]=i,t[12]=e):e=t[12],u=n.map(e),t[6]=n,t[7]=r,t[8]=i,t[9]=u}else u=t[9];let d;t[13]===u?d=t[14]:(d=(0,X.jsx)(`div`,{className:`flex-1 overflow-y-auto`,children:u}),t[13]=u,t[14]=d);let f;return t[15]!==l||t[16]!==d?(f=(0,X.jsxs)(`div`,{className:`flex-1 flex flex-col min-w-0 bg-white dark:bg-black`,children:[l,d]}),t[15]=l,t[16]=d,t[17]=f):f=t[17],f},ti=q(),ni=e=>{let t=(0,ti.c)(77),{conversation:n,messages:r,onBack:i,onSendMessage:a,isLoading:o}=e,[s,c]=(0,J.useState)(``),l=(0,J.useRef)(null),u;t[0]===Symbol.for(`react.memo_cache_sentinel`)?(u=()=>{l.current&&(l.current.scrollTop=l.current.scrollHeight)},t[0]=u):u=t[0];let f;t[1]===r?f=t[2]:(f=[r],t[1]=r,t[2]=f),(0,J.useEffect)(u,f);let p;t[3]!==n.id||t[4]!==a||t[5]!==s?(p=e=>{e.preventDefault(),s.trim()&&(a(n.id,s),c(``))},t[3]=n.id,t[4]=a,t[5]=s,t[6]=p):p=t[6];let m=p,h;t[7]===Symbol.for(`react.memo_cache_sentinel`)?(h=(0,X.jsx)(le,{size:20}),t[7]=h):h=t[7];let g;t[8]===i?g=t[9]:(g=(0,X.jsx)(`button`,{onClick:i,className:`md:hidden p-1 rounded-full hover:bg-zinc-100 dark:hover:bg-zinc-800 dark:text-white transition-colors`,children:h}),t[8]=i,t[9]=g);let _;t[10]!==n.user.avatar||t[11]!==n.user.name?(_=(0,X.jsx)($,{src:n.user.avatar,alt:n.user.name,className:`object-cover`}),t[10]=n.user.avatar,t[11]=n.user.name,t[12]=_):_=t[12];let v;t[13]===n.user.name?.[0]?v=t[14]:(v=n.user.name?.[0]?.toUpperCase(),t[13]=n.user.name?.[0],t[14]=v);let y;t[15]===v?y=t[16]:(y=(0,X.jsx)(sn,{children:v}),t[15]=v,t[16]=y);let b;t[17]!==_||t[18]!==y?(b=(0,X.jsxs)(Q,{className:`size-10 border border-zinc-200 dark:border-zinc-700`,children:[_,y]}),t[17]=_,t[18]=y,t[19]=b):b=t[19];let x;t[20]===n.user.name?x=t[21]:(x=(0,X.jsx)(`div`,{className:`font-bold dark:text-white`,children:n.user.name}),t[20]=n.user.name,t[21]=x);let S;t[22]===Symbol.for(`react.memo_cache_sentinel`)?(S=(0,X.jsx)(`div`,{className:`text-xs text-emerald-500 font-medium`,children:`Online`}),t[22]=S):S=t[22];let w;t[23]===x?w=t[24]:(w=(0,X.jsxs)(`div`,{children:[x,S]}),t[23]=x,t[24]=w);let T;t[25]!==w||t[26]!==g||t[27]!==b?(T=(0,X.jsxs)(`div`,{className:`flex items-center gap-3`,children:[g,b,w]}),t[25]=w,t[26]=g,t[27]=b,t[28]=T):T=t[28];let E;t[29]===Symbol.for(`react.memo_cache_sentinel`)?(E=(0,X.jsx)(`button`,{className:`p-2 hover:bg-zinc-100 dark:hover:bg-zinc-800 rounded-full dark:text-zinc-400`,children:(0,X.jsx)(de,{size:20})}),t[29]=E):E=t[29];let D;t[30]===T?D=t[31]:(D=(0,X.jsxs)(`div`,{className:`p-4 border-b border-zinc-100 dark:border-zinc-800 flex items-center justify-between shrink-0 bg-white/80 dark:bg-black/80 backdrop-blur-md sticky top-0 z-10`,children:[T,E]}),t[30]=T,t[31]=D);let O;t[32]!==n.user.avatar||t[33]!==n.user.name?(O=(0,X.jsx)($,{src:n.user.avatar,alt:n.user.name,className:`object-cover`}),t[32]=n.user.avatar,t[33]=n.user.name,t[34]=O):O=t[34];let k;t[35]===n.user.name?.[0]?k=t[36]:(k=n.user.name?.[0]?.toUpperCase(),t[35]=n.user.name?.[0],t[36]=k);let A;t[37]===k?A=t[38]:(A=(0,X.jsx)(sn,{className:`text-2xl font-bold`,children:k}),t[37]=k,t[38]=A);let j;t[39]!==O||t[40]!==A?(j=(0,X.jsxs)(Q,{className:`size-20 mx-auto mb-3 border-4 border-zinc-50 dark:border-zinc-900 shadow-sm`,children:[O,A]}),t[39]=O,t[40]=A,t[41]=j):j=t[41];let M;t[42]===n.user.name?M=t[43]:(M=(0,X.jsx)(`h4`,{className:`font-bold dark:text-white text-lg`,children:n.user.name}),t[42]=n.user.name,t[43]=M);let N;t[44]===n.user.handle?N=t[45]:(N=(0,X.jsxs)(`p`,{className:`text-sm text-zinc-500`,children:[`@`,n.user.handle]}),t[44]=n.user.handle,t[45]=N);let P;t[46]===n.user.handle?P=t[47]:(P=(0,X.jsxs)(`p`,{className:`text-xs text-zinc-400 mt-4 max-w-xs mx-auto`,children:[`This is the beginning of your direct message history with `,(0,X.jsxs)(`span`,{className:`font-bold`,children:[`@`,n.user.handle]})]}),t[46]=n.user.handle,t[47]=P);let F;t[48]!==j||t[49]!==M||t[50]!==N||t[51]!==P?(F=(0,X.jsxs)(`div`,{className:`text-center py-8`,children:[j,M,N,P]}),t[48]=j,t[49]=M,t[50]=N,t[51]=P,t[52]=F):F=t[52];let I;t[53]!==o||t[54]!==r?(I=o&&r.length===0?(0,X.jsx)(`div`,{className:`flex justify-center p-8`,children:(0,X.jsx)(Ee,{className:`animate-spin text-violet-500`,size:32})}):r.map(ri),t[53]=o,t[54]=r,t[55]=I):I=t[55];let L;t[56]!==F||t[57]!==I?(L=(0,X.jsxs)(`div`,{className:`flex-1 overflow-y-auto p-4 space-y-4`,ref:l,children:[F,I]}),t[56]=F,t[57]=I,t[58]=L):L=t[58];let R;t[59]===Symbol.for(`react.memo_cache_sentinel`)?(R=(0,X.jsx)(`button`,{type:`button`,className:`p-2 text-zinc-500 hover:text-violet-600 transition-colors`,children:(0,X.jsx)(C,{size:20})}),t[59]=R):R=t[59];let z;t[60]===Symbol.for(`react.memo_cache_sentinel`)?(z=e=>c(e.target.value),t[60]=z):z=t[60];let B;t[61]===s?B=t[62]:(B=(0,X.jsx)(`input`,{type:`text`,className:`flex-1 bg-transparent border-none outline-none dark:text-white py-1 px-1`,placeholder:`Start a new message`,value:s,onChange:z}),t[61]=s,t[62]=B);let V;t[63]===Symbol.for(`react.memo_cache_sentinel`)?(V=(0,X.jsx)(`button`,{type:`button`,className:`p-2 text-zinc-500 hover:text-violet-600 transition-colors`,children:(0,X.jsx)(Ve,{size:20})}),t[63]=V):V=t[63];let H;t[64]===s?H=t[65]:(H=s.trim(),t[64]=s,t[65]=H);let ee=!H,U;t[66]===Symbol.for(`react.memo_cache_sentinel`)?(U=(0,X.jsx)(d,{size:18}),t[66]=U):U=t[66];let W;t[67]===ee?W=t[68]:(W=(0,X.jsx)(Dn,{type:`submit`,className:`size-10 !p-0 rounded-xl`,disabled:ee,children:U}),t[67]=ee,t[68]=W);let G;t[69]!==m||t[70]!==B||t[71]!==W?(G=(0,X.jsx)(`div`,{className:`p-4 border-t border-zinc-100 dark:border-zinc-800 bg-white dark:bg-black shrink-0`,children:(0,X.jsxs)(`form`,{onSubmit:m,className:`flex items-center gap-2 bg-zinc-100 dark:bg-zinc-900 p-2 rounded-2xl border border-transparent focus-within:border-violet-500 transition-all`,children:[R,B,V,W]})}),t[69]=m,t[70]=B,t[71]=W,t[72]=G):G=t[72];let K;return t[73]!==D||t[74]!==L||t[75]!==G?(K=(0,X.jsxs)(`div`,{className:`flex-1 flex flex-col h-full bg-white dark:bg-black md:border-l md:border-zinc-100 dark:md:border-zinc-800`,children:[D,L,G]}),t[73]=D,t[74]=L,t[75]=G,t[76]=K):K=t[76],K};function ri(e){return(0,X.jsx)(`div`,{className:`flex ${e.sender===`me`?`justify-end`:`justify-start`}`,children:(0,X.jsxs)(`div`,{className:`max-w-[75%] px-4 py-2.5 rounded-2xl text-[15px] shadow-sm ${e.sender===`me`?`bg-violet-600 text-white rounded-tr-none`:`bg-zinc-100 dark:bg-zinc-800 dark:text-white rounded-tl-none`}`,children:[(0,X.jsx)(`p`,{children:e.text}),(0,X.jsx)(`div`,{className:`text-[10px] mt-1 ${e.sender===`me`?`text-violet-200`:`text-zinc-400`}`,children:e.time})]})},e.id)}var ii=q();const ai=e=>{let t=(0,ii.c)(33),n=Le(),r;t[0]===Symbol.for(`react.memo_cache_sentinel`)?(r={},t[0]=r):r=t[0];let[i,a]=(0,J.useState)(r),o=e?.id,s;t[1]===o?s=t[2]:(s=[`conversations`,o],t[1]=o,t[2]=s);let c;t[3]===e?.id?c=t[4]:(c=()=>ct(e?.id),t[3]=e?.id,t[4]=c);let l=!!e?.id,u;t[5]!==s||t[6]!==c||t[7]!==l?(u={queryKey:s,queryFn:c,enabled:l},t[5]=s,t[6]=c,t[7]=l,t[8]=u):u=t[8];let{data:d,isLoading:f}=M(u),p;t[9]===d?p=t[10]:(p=d===void 0?[]:d,t[9]=d,t[10]=p);let m=p,h,g;t[11]!==e||t[12]!==n?(h=()=>{if(!e?.id)return;let t=Y.channel(`user_messages:${e.id}`).on(`postgres_changes`,{event:`INSERT`,schema:`public`,table:`messages`},t=>{let r=t.new;a(e=>({...e,[r.conversation_id]:[...e[r.conversation_id]||[],r]})),n.invalidateQueries([`conversations`,e.id])}).subscribe();return()=>Y.removeChannel(t)},g=[e,n],t[11]=e,t[12]=n,t[13]=h,t[14]=g):(h=t[13],g=t[14]),(0,J.useEffect)(h,g);let _;t[15]===e?_=t[16]:(_=t=>{let{convId:n,text:r}=t;return ut(n,e.id,r)},t[15]=e,t[16]=_);let v;t[17]===n?v=t[18]:(v=(e,t)=>{let{convId:r}=t;n.invalidateQueries([`messages`,r])},t[17]=n,t[18]=v);let y;t[19]!==_||t[20]!==v?(y={mutationFn:_,onSuccess:v},t[19]=_,t[20]=v,t[21]=y):y=t[21];let b=ze(y),x;t[22]!==e?.id||t[23]!==i?(x=(t,n)=>{let r=n===void 0?[]:n,a=i[t]||[],o=[...r];return a.forEach(e=>{o.find(t=>t.id===e.id)||o.push(e)}),o.sort(oi).map(t=>({id:t.id,sender:t.sender_id===e?.id?`me`:`them`,text:t.content,time:new Date(t.created_at).toLocaleTimeString([],{hour:`2-digit`,minute:`2-digit`})}))},t[22]=e?.id,t[23]=i,t[24]=x):x=t[24];let S=x,C;t[25]===b?C=t[26]:(C=(e,t)=>b.mutate({convId:e,text:t}),t[25]=b,t[26]=C);let w;return t[27]!==m||t[28]!==S||t[29]!==f||t[30]!==b.isPending||t[31]!==C?(w={conversations:m,isConvLoading:f,sendMessage:C,getMessagesForConversation:S,isSending:b.isPending},t[27]=m,t[28]=S,t[29]=f,t[30]=b.isPending,t[31]=C,t[32]=w):w=t[32],w};function oi(e,t){return new Date(e.created_at)-new Date(t.created_at)}var si=q(),ci=()=>{let e=(0,si.c)(37),{currentUser:t}=Ct(),[n,r]=(0,J.useState)(null),[i,a]=(0,J.useState)(``),{conversations:o,isConvLoading:s,sendMessage:c,getMessagesForConversation:l}=ai(t),u=n?.id,d;e[0]===u?d=e[1]:(d=[`messages`,u],e[0]=u,e[1]=d);let f;e[2]===n?.id?f=e[3]:(f=()=>lt(n?.id),e[2]=n?.id,e[3]=f);let p=!!n?.id,m;e[4]!==d||e[5]!==f||e[6]!==p?(m={queryKey:d,queryFn:f,enabled:p},e[4]=d,e[5]=f,e[6]=p,e[7]=m):m=e[7];let{data:h,isLoading:g}=M(m),_;e[8]===h?_=e[9]:(_=h===void 0?[]:h,e[8]=h,e[9]=_);let y=_,b=n?.id,x;e[10]!==y||e[11]!==l||e[12]!==b?(x=l(b,y),e[10]=y,e[11]=l,e[12]=b,e[13]=x):x=e[13];let S=x;if(!t){let t;return e[14]===Symbol.for(`react.memo_cache_sentinel`)?(t=(0,X.jsxs)(`div`,{className:`flex flex-col items-center justify-center h-screen gap-4 p-8 text-center bg-white dark:bg-black md:rounded-xl md:border border-zinc-100 dark:border-zinc-800`,children:[(0,X.jsx)(`div`,{className:`bg-zinc-100 dark:bg-zinc-900 p-4 rounded-full`,children:(0,X.jsx)(N,{size:40,className:`text-zinc-400`})}),(0,X.jsx)(`h3`,{className:`text-xl font-bold dark:text-white`,children:`Sign in to message others`}),(0,X.jsx)(`p`,{className:`text-zinc-500 max-w-xs`,children:`Start decentralized conversations with anyone on the network.`})]}),e[14]=t):t=e[14],t}if(s){let t;return e[15]===Symbol.for(`react.memo_cache_sentinel`)?(t=(0,X.jsx)(`div`,{className:`flex h-screen items-center justify-center bg-white dark:bg-black md:rounded-xl md:border border-zinc-100 dark:border-zinc-800`,children:(0,X.jsx)(Ee,{className:`animate-spin text-violet-500`,size:32})}),e[15]=t):t=e[15],t}let C;if(e[16]!==o||e[17]!==i){let t;e[19]===i?t=e[20]:(t=e=>e.user?.name?.toLowerCase().includes(i.toLowerCase())||e.user?.handle?.toLowerCase().includes(i.toLowerCase()),e[19]=i,e[20]=t),C=o.filter(t),e[16]=o,e[17]=i,e[18]=C}else C=e[18];let w=C,T=`w-full md:w-80 flex flex-col border-r border-zinc-100 dark:border-zinc-800 ${n?`hidden md:flex`:`flex`}`,E;e[21]===Symbol.for(`react.memo_cache_sentinel`)?(E=(0,X.jsx)(`div`,{className:`p-4 border-b border-zinc-100 dark:border-zinc-800`,children:(0,X.jsx)(`h2`,{className:`text-xl font-bold dark:text-white`,children:`Messages`})}),e[21]=E):E=e[21];let D=n?.id,O;e[22]!==w||e[23]!==i||e[24]!==D?(O=(0,X.jsx)(ei,{conversations:w,onSelect:r,selectedId:D,searchQuery:i,onSearchChange:a}),e[22]=w,e[23]=i,e[24]=D,e[25]=O):O=e[25];let k;e[26]!==T||e[27]!==O?(k=(0,X.jsxs)(`div`,{className:T,children:[E,O]}),e[26]=T,e[27]=O,e[28]=k):k=e[28];let A;e[29]!==g||e[30]!==S||e[31]!==n||e[32]!==c?(A=n?(0,X.jsx)(ni,{conversation:n,messages:S,onBack:()=>r(null),onSendMessage:c,isLoading:g}):(0,X.jsxs)(`div`,{className:`hidden md:flex flex-1 items-center justify-center text-zinc-500 flex-col gap-4`,children:[(0,X.jsx)(`div`,{className:`bg-zinc-50 dark:bg-zinc-900 p-6 rounded-full`,children:(0,X.jsx)(v,{size:48,className:`text-zinc-300`})}),(0,X.jsxs)(`div`,{className:`text-center`,children:[(0,X.jsx)(`h3`,{className:`text-xl font-bold text-zinc-900 dark:text-white`,children:`Select a message`}),(0,X.jsx)(`p`,{children:`Choose from your existing conversations or start a new one.`})]})]}),e[29]=g,e[30]=S,e[31]=n,e[32]=c,e[33]=A):A=e[33];let j;return e[34]!==k||e[35]!==A?(j=(0,X.jsxs)(`div`,{className:`flex h-screen bg-white dark:bg-black overflow-hidden md:rounded-xl md:border border-zinc-100 dark:border-zinc-800`,children:[k,A]}),e[34]=k,e[35]=A,e[36]=j):j=e[36],j},li=q(),ui=()=>{let e=(0,li.c)(17),{currentUser:t}=Ct(),n=t?.id,r;e[0]===n?r=e[1]:(r=[`notifications`,n],e[0]=n,e[1]=r);let i;e[2]===t?.id?i=e[3]:(i=()=>st(t?.id),e[2]=t?.id,e[3]=i);let a=!!t?.id,o;e[4]!==r||e[5]!==i||e[6]!==a?(o={queryKey:r,queryFn:i,enabled:a},e[4]=r,e[5]=i,e[6]=a,e[7]=o):o=e[7];let{data:s,isLoading:c}=M(o),l;e[8]===s?l=e[9]:(l=s===void 0?[]:s,e[8]=s,e[9]=l);let u=l;if(c){let t;return e[10]===Symbol.for(`react.memo_cache_sentinel`)?(t=(0,X.jsx)(`div`,{className:`flex items-center justify-center min-h-[400px]`,children:(0,X.jsx)(Ee,{size:32,className:`animate-spin text-violet-500`})}),e[10]=t):t=e[10],t}if(!t){let t;return e[11]===Symbol.for(`react.memo_cache_sentinel`)?(t=(0,X.jsxs)(`div`,{className:`flex flex-col items-center justify-center min-h-[400px] gap-4 p-8 text-center`,children:[(0,X.jsx)(`div`,{className:`bg-zinc-100 dark:bg-zinc-900 p-4 rounded-full`,children:(0,X.jsx)(N,{size:40,className:`text-zinc-400`})}),(0,X.jsx)(`h3`,{className:`text-xl font-bold dark:text-white`,children:`Sign in to see notifications`}),(0,X.jsx)(`p`,{className:`text-zinc-500 max-w-xs`,children:`Join the conversation and keep track of who's engaging with your content.`})]}),e[11]=t):t=e[11],t}let d=di,f;e[12]===Symbol.for(`react.memo_cache_sentinel`)?(f=(0,X.jsx)(`div`,{className:`p-4 border-b border-zinc-100 dark:border-zinc-800 sticky top-0 bg-white/80 dark:bg-black/80 backdrop-blur-md z-10`,children:(0,X.jsx)(`h2`,{className:`text-xl font-bold dark:text-white`,children:`Notifications`})}),e[12]=f):f=e[12];let p;e[13]===u?p=e[14]:(p=u.length>0?u.map(e=>(0,X.jsxs)(`div`,{className:`p-4 border-b border-zinc-100 dark:border-zinc-800 flex items-start gap-4 hover:bg-zinc-50 dark:hover:bg-zinc-900 transition-colors cursor-pointer`,children:[(0,X.jsx)(`div`,{className:`shrink-0 pt-1`,children:d(e.type)}),(0,X.jsxs)(`div`,{className:`flex-1`,children:[(0,X.jsxs)(`div`,{className:`flex items-center gap-2 mb-1`,children:[(0,X.jsxs)(`span`,{className:`font-bold text-sm dark:text-white`,children:[`@`,e.user]}),(0,X.jsx)(`span`,{className:`text-zinc-500 text-xs`,children:e.created_at?new Date(e.created_at).toLocaleDateString():`Recent`})]}),(0,X.jsxs)(`p`,{className:`text-zinc-600 dark:text-zinc-400 text-[15px]`,children:[e.type===`like`&&`liked your post`,e.type===`follow`&&`followed you`,e.type===`mention`&&`mentioned you in a post`,e.type===`comment`&&`commented on your post`,e.type===`repost`&&`reposted your post`]})]})]},e.id)):(0,X.jsx)(`div`,{className:`p-16 text-center text-zinc-500`,children:(0,X.jsx)(`p`,{className:`font-medium`,children:`No notifications yet.`})}),e[13]=u,e[14]=p);let m;return e[15]===p?m=e[16]:(m=(0,X.jsxs)(`div`,{className:`border-y md:border border-zinc-100 dark:border-zinc-800 bg-white dark:bg-black rounded-none md:rounded-xl overflow-hidden min-h-screen shadow-sm pb-20`,children:[f,p]}),e[15]=p,e[16]=m),m};function di(e){switch(e){case`like`:return(0,X.jsx)(t,{size:20,className:`text-rose-500 fill-rose-500`});case`follow`:return(0,X.jsx)(T,{size:20,className:`text-blue-500`});case`mention`:return(0,X.jsx)(ye,{size:20,className:`text-emerald-500`});case`comment`:return(0,X.jsx)(F,{size:20,className:`text-violet-500`});case`repost`:return(0,X.jsx)(z,{size:20,className:`text-amber-500`});default:return(0,X.jsx)(ye,{size:20,className:`text-zinc-500`})}}const fi=(e,t,n)=>{let r=e?.id,[i,a]=(0,J.useState)(!1),[o,s]=(0,J.useState)({followers:e?.followers||e?.follower_count||0,following:e?.following||e?.following_count||0}),[c,l]=(0,J.useState)(!1);return(0,J.useEffect)(()=>{e&&(s({followers:e.followers||e.follower_count||0,following:e.following||e.following_count||0}),r&&rn(r)&&(_t(r).then(e=>{e&&s({followers:e.followers,following:e.following})}).catch(()=>{}),t&&rn(t)&&gt(t,r).then(a).catch(()=>a(!1))))},[e,r,t]),{isFollowing:i,stats:o,loading:c,handleFollow:async()=>{if(!t)return n(`Please login to follow!`,`error`);if(t===r)return n(`You cannot follow yourself!`,`error`);if(!r||!rn(r)||!rn(t)){let e=!i;a(e),s(t=>{let n=typeof t.followers==`string`?parseInt(t.followers.replace(/,/g,``)):t.followers||0;return{...t,followers:e?n+1:Math.max(0,n-1)}}),n(e?`Followed`:`Unfollowed`);return}l(!0);try{let e=await ht(t,r);a(e),s(t=>({...t,followers:e?(t.followers||0)+1:Math.max(0,(t.followers||0)-1)})),n(e?`Followed`:`Unfollowed`)}catch(e){console.error(`Failed to toggle follow:`,e),n(`Failed to update follow status`,`error`)}finally{l(!1)}},setStats:s}};var pi=q(),mi=e=>{let t=(0,pi.c)(52),{profile:n,currentUser:r,isCurrentUser:i,onEditProfile:a,showToast:o,isCommunity:s}=e,{isFollowing:c,stats:l,loading:u,handleFollow:d}=fi(n,r?.id,o),f;t[0]===n.cover?f=t[1]:(f=n.cover&&(0,X.jsx)(`img`,{src:n.cover,className:`h-full w-full object-cover transition-opacity duration-500`,alt:`Cover`}),t[0]=n.cover,t[1]=f);let m;t[2]!==n.avatar||t[3]!==n.handle?(m=(0,X.jsx)($,{src:n.avatar,alt:n.handle,className:`object-cover`}),t[2]=n.avatar,t[3]=n.handle,t[4]=m):m=t[4];let h;t[5]===n.handle?.[0]?h=t[6]:(h=n.handle?.[0]?.toUpperCase(),t[5]=n.handle?.[0],t[6]=h);let g;t[7]===h?g=t[8]:(g=(0,X.jsx)(sn,{className:`text-4xl font-bold`,children:h}),t[7]=h,t[8]=g);let y;t[9]!==m||t[10]!==g?(y=(0,X.jsx)(`div`,{className:`absolute -bottom-12 sm:-bottom-16 left-4 sm:left-6`,children:(0,X.jsx)(`div`,{className:`p-1 bg-white dark:bg-black rounded-full overflow-hidden shadow-xl ring-4 ring-white dark:ring-black`,children:(0,X.jsxs)(Q,{className:`size-24 sm:size-32`,children:[m,g]})})}),t[9]=m,t[10]=g,t[11]=y):y=t[11];let b;t[12]!==f||t[13]!==y?(b=(0,X.jsxs)(`div`,{className:`relative h-32 sm:h-48 w-full bg-zinc-200 dark:bg-zinc-800`,children:[f,y]}),t[12]=f,t[13]=y,t[14]=b):b=t[14];let x;t[15]===Symbol.for(`react.memo_cache_sentinel`)?(x=(0,X.jsx)(`div`,{className:`flex-1 min-w-0 pr-4`}),t[15]=x):x=t[15];let S;t[16]!==d||t[17]!==i||t[18]!==c||t[19]!==u||t[20]!==a||t[21]!==n?(S=(0,X.jsxs)(`div`,{className:`flex justify-between items-start`,children:[x,(0,X.jsx)(`div`,{className:`flex gap-2 shrink-0`,children:i?(0,X.jsx)(Dn,{variant:`secondary`,onClick:()=>a(n),className:`text-sm px-5`,children:`Edit profile`}):(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(`button`,{className:`rounded-full p-2 border border-zinc-200 dark:border-zinc-700 hover:bg-zinc-50 dark:hover:bg-zinc-900 text-zinc-700 dark:text-zinc-300 dark:border-zinc-800 transition-colors`,children:(0,X.jsx)(v,{size:20})}),(0,X.jsx)(`button`,{className:`rounded-full p-2 border border-zinc-200 dark:border-zinc-700 hover:bg-zinc-50 dark:hover:bg-zinc-900 text-zinc-700 dark:text-zinc-300 dark:border-zinc-800 transition-colors`,children:(0,X.jsx)(ae,{size:20})}),(0,X.jsx)(Dn,{variant:c?`secondary`:`primary`,onClick:d,className:`text-sm px-6 min-w-[100px]`,disabled:u,children:u?(0,X.jsx)(Loader2,{size:16,className:`animate-spin mx-auto`}):c?`Following`:`Follow`}),(0,X.jsx)(`button`,{className:`rounded-full p-2 hover:bg-zinc-100 text-zinc-700 dark:text-zinc-300 dark:hover:bg-zinc-800 transition-colors`,children:(0,X.jsx)(Oe,{size:20})})]})})]}),t[16]=d,t[17]=i,t[18]=c,t[19]=u,t[20]=a,t[21]=n,t[22]=S):S=t[22];let C;t[23]===n.verified?C=t[24]:(C=n.verified&&(0,X.jsx)(er,{}),t[23]=n.verified,t[24]=C);let w;t[25]!==n.name||t[26]!==C?(w=(0,X.jsx)(`div`,{className:`flex items-center gap-1.5`,children:(0,X.jsxs)(`h3`,{className:`text-xl sm:text-2xl font-extrabold truncate dark:text-white flex items-center gap-1`,children:[n.name,C]})}),t[25]=n.name,t[26]=C,t[27]=w):w=t[27];let T;t[28]!==s||t[29]!==n.handle?(T=!s&&(0,X.jsx)(`div`,{className:`flex items-center space-x-3`,children:(0,X.jsxs)(`span`,{className:`text-zinc-500 font-medium text-sm px-1.5 py-0.5 -ml-1.5 rounded-md dark:text-zinc-400`,children:[`@`,n.handle]})}),t[28]=s,t[29]=n.handle,t[30]=T):T=t[30];let E;t[31]!==w||t[32]!==T?(E=(0,X.jsxs)(`div`,{className:`space-y-0.5`,children:[w,T]}),t[31]=w,t[32]=T,t[33]=E):E=t[33];let D;t[34]===n.bio?D=t[35]:(D=(0,X.jsx)(`div`,{className:`whitespace-pre-line text-zinc-900 dark:text-zinc-100 leading-relaxed text-sm sm:text-[15px]`,children:n.bio}),t[34]=n.bio,t[35]=D);let O;t[36]!==n.location||t[37]!==n.website?(O=(n.website||n.location)&&(0,X.jsxs)(`div`,{className:`flex flex-wrap gap-x-5 gap-y-2 text-sm pt-1`,children:[n.location&&(0,X.jsxs)(`div`,{className:`flex items-center gap-2 text-zinc-600 dark:text-zinc-400`,children:[(0,X.jsx)(p,{size:14}),(0,X.jsx)(`span`,{children:n.location})]}),n.website&&(0,X.jsxs)(`div`,{className:`flex items-center gap-2 text-zinc-600 dark:text-zinc-400`,children:[(0,X.jsx)(_,{size:14}),(0,X.jsx)(`a`,{href:`https://${n.website}`,target:`_blank`,rel:`noreferrer`,className:`text-violet-600 hover:underline font-semibold text-black dark:text-white`,children:n.website})]})]}),t[36]=n.location,t[37]=n.website,t[38]=O):O=t[38];let k;t[39]!==s||t[40]!==n.members||t[41]!==l?(k=(0,X.jsx)(`div`,{className:`flex gap-4 sm:gap-6 text-sm pt-2`,children:s?(0,X.jsxs)(`button`,{className:`flex gap-x-1 hover:underline group`,children:[(0,X.jsx)(`span`,{className:`font-bold text-zinc-900 dark:text-white group-hover:text-violet-600`,children:n.members}),(0,X.jsx)(`span`,{className:`text-zinc-500 dark:text-zinc-400`,children:`Members`})]}):(0,X.jsxs)(X.Fragment,{children:[(0,X.jsxs)(`button`,{className:`flex gap-x-1 hover:underline group`,children:[(0,X.jsx)(`span`,{className:`font-bold text-zinc-900 dark:text-white group-hover:text-violet-600`,children:l.following}),(0,X.jsx)(`span`,{className:`text-zinc-500 dark:text-zinc-400`,children:`Following`})]}),(0,X.jsxs)(`button`,{className:`flex gap-x-1 hover:underline group`,children:[(0,X.jsx)(`span`,{className:`font-bold text-zinc-900 dark:text-white group-hover:text-violet-600`,children:l.followers}),(0,X.jsx)(`span`,{className:`text-zinc-500 dark:text-zinc-400`,children:`Followers`})]})]})}),t[39]=s,t[40]=n.members,t[41]=l,t[42]=k):k=t[42];let A;t[43]!==E||t[44]!==D||t[45]!==O||t[46]!==k||t[47]!==S?(A=(0,X.jsxs)(`div`,{className:`flex flex-col p-4 sm:p-6 pt-16 sm:pt-20 space-y-4`,children:[S,E,D,O,k]}),t[43]=E,t[44]=D,t[45]=O,t[46]=k,t[47]=S,t[48]=A):A=t[48];let j;return t[49]!==A||t[50]!==b?(j=(0,X.jsxs)(`div`,{className:`flex flex-col`,children:[b,A]}),t[49]=A,t[50]=b,t[51]=j):j=t[51],j},hi=q(),gi=e=>{let t=(0,hi.c)(67),{onEditProfile:n}=e,{handle:r}=f(),i=O(),{profiles:a,currentUser:o,getProfileByHandle:s}=Ct(),{getUserPosts:c}=Rt(),{addToast:l}=Pt(),[u,d]=(0,J.useState)(`feed`),[p,m]=(0,J.useState)(!a[r]),[g,_]=(0,J.useState)(a[r]),v,y;t[0]!==s||t[1]!==r||t[2]!==a?(v=()=>{(async()=>{a[r]?_(a[r]):(m(!0),_(await s(r)),m(!1))})()},y=[r,a,s],t[0]=s,t[1]=r,t[2]=a,t[3]=v,t[4]=y):(v=t[3],y=t[4]),(0,J.useEffect)(v,y);let b;t[5]!==u||t[6]!==c||t[7]!==r?(b=c(r,u),t[5]=u,t[6]=c,t[7]=r,t[8]=b):b=t[8];let x=b,S;t[9]===i?S=t[10]:(S=e=>{i(`/post/${e}`)},t[9]=i,t[10]=S);let C=S,w;t[11]!==r||t[12]!==i?(w=e=>{e!==r&&i(`/u/${e}`)},t[11]=r,t[12]=i,t[13]=w):w=t[13];let T=w;if(p){let e;return t[14]===Symbol.for(`react.memo_cache_sentinel`)?(e=(0,X.jsx)(`div`,{className:`flex items-center justify-center min-h-screen`,children:(0,X.jsx)(Ee,{size:40,className:`animate-spin text-violet-500`})}),t[14]=e):e=t[14],e}let E;t[15]!==r||t[16]!==g?(E=g||{name:r,handle:r,avatar:`https://static.hey.xyz/images/brands/lens.svg`,cover:`https://static.hey.xyz/images/hero.webp`,bio:`Profile not found`,following:`0`,followers:`0`},t[15]=r,t[16]=g,t[17]=E):E=t[17];let D=E,k;t[18]!==l||t[19]!==o||t[20]!==C||t[21]!==T||t[22]!==x?(k=()=>x.length>0?x.map(e=>(0,X.jsx)(Tr,{currentUser:o,showToast:l,...e,onClick:()=>C(e.id),onUserClick:T},e.id)):(0,X.jsxs)(`div`,{className:`p-16 text-center text-zinc-500 flex flex-col items-center gap-4`,children:[(0,X.jsx)(`div`,{className:`bg-zinc-50 dark:bg-zinc-900 p-4 rounded-full`,children:(0,X.jsx)(h,{size:32,className:`text-zinc-300`})}),(0,X.jsx)(`p`,{className:`font-medium`,children:`No posts found`})]}),t[18]=l,t[19]=o,t[20]=C,t[21]=T,t[22]=x,t[23]=k):k=t[23];let A=k,j;t[24]===i?j=t[25]:(j=()=>i(-1),t[24]=i,t[25]=j);let M;t[26]===Symbol.for(`react.memo_cache_sentinel`)?(M=(0,X.jsx)(le,{size:22}),t[26]=M):M=t[26];let N;t[27]===j?N=t[28]:(N=(0,X.jsx)(`button`,{onClick:j,className:`p-1 rounded-full hover:bg-zinc-100 dark:hover:bg-zinc-800 dark:text-white transition-colors`,children:M}),t[27]=j,t[28]=N);let P;t[29]===D.name?P=t[30]:(P=(0,X.jsx)(`h5`,{className:`text-lg font-bold dark:text-white leading-none`,children:D.name}),t[29]=D.name,t[30]=P);let F=x?x.length:0,I;t[31]===F?I=t[32]:(I=(0,X.jsxs)(`span`,{className:`text-xs text-zinc-500 mt-0.5`,children:[F,` Posts`]}),t[31]=F,t[32]=I);let L;t[33]!==P||t[34]!==I?(L=(0,X.jsxs)(`div`,{className:`flex flex-col`,children:[P,I]}),t[33]=P,t[34]=I,t[35]=L):L=t[35];let R;t[36]!==N||t[37]!==L?(R=(0,X.jsx)(`div`,{className:`sticky top-0 bg-white/90 dark:bg-black/90 backdrop-blur-md z-20 border-b border-zinc-100 dark:border-zinc-800 px-4 py-3 md:hidden`,children:(0,X.jsxs)(`div`,{className:`flex items-center gap-x-4`,children:[N,L]})}),t[36]=N,t[37]=L,t[38]=R):R=t[38];let z=o?.handle===D.handle,B;t[39]!==l||t[40]!==o||t[41]!==D||t[42]!==n||t[43]!==z?(B=(0,X.jsx)(mi,{profile:D,currentUser:o,isCurrentUser:z,onEditProfile:n,showToast:l}),t[39]=l,t[40]=o,t[41]=D,t[42]=n,t[43]=z,t[44]=B):B=t[44];let V;t[45]===Symbol.for(`react.memo_cache_sentinel`)?(V=(0,X.jsx)(`div`,{className:`sticky top-[60px] md:top-0 bg-white/90 dark:bg-black/90 backdrop-blur-md z-10 border-b border-zinc-100 dark:border-zinc-800`,children:(0,X.jsx)(Lr,{className:`w-full h-auto bg-transparent p-0 rounded-none justify-start px-2`,children:[`feed`,`replies`,`media`].map(_i)})}),t[45]=V):V=t[45];let H;t[46]===A?H=t[47]:(H=A(),t[46]=A,t[47]=H);let ee;t[48]===H?ee=t[49]:(ee=(0,X.jsx)(zr,{value:`feed`,className:`m-0 border-none`,children:H}),t[48]=H,t[49]=ee);let U;t[50]===A?U=t[51]:(U=A(),t[50]=A,t[51]=U);let W;t[52]===U?W=t[53]:(W=(0,X.jsx)(zr,{value:`replies`,className:`m-0 border-none`,children:U}),t[52]=U,t[53]=W);let G;t[54]===A?G=t[55]:(G=A(),t[54]=A,t[55]=G);let K;t[56]===G?K=t[57]:(K=(0,X.jsx)(zr,{value:`media`,className:`m-0 border-none`,children:G}),t[56]=G,t[57]=K);let te;t[58]!==u||t[59]!==ee||t[60]!==W||t[61]!==K?(te=(0,X.jsxs)(Ir,{value:u,onValueChange:d,className:`w-full`,children:[V,ee,W,K]}),t[58]=u,t[59]=ee,t[60]=W,t[61]=K,t[62]=te):te=t[62];let ne;return t[63]!==R||t[64]!==B||t[65]!==te?(ne=(0,X.jsx)(`div`,{className:`border-zinc-100 dark:border-zinc-800 bg-white dark:bg-black rounded-none md:rounded-xl overflow-hidden min-h-screen pb-20`,children:(0,X.jsxs)(`div`,{className:`border-y md:border-b-0 border-zinc-100 dark:border-zinc-800`,children:[R,B,te]})}),t[63]=R,t[64]=B,t[65]=te,t[66]=ne):ne=t[66],ne};function _i(e){return(0,X.jsx)(Rr,{value:e,className:`flex-1 py-4 text-sm font-bold capitalize rounded-none border-b-2 border-transparent data-[state=active]:bg-transparent data-[state=active]:border-black dark:data-[state=active]:border-white data-[state=active]:text-black dark:data-[state=active]:text-white text-zinc-500 transition-all hover:bg-zinc-50 dark:hover:bg-zinc-900`,children:e===`feed`?`Posts`:e},e)}var vi=q(),yi=()=>{let e=(0,vi.c)(32),{id:t}=f(),n=O(),{currentUser:r}=Ct(),{addToast:i}=Pt(),a,o;e[0]===t?(a=e[1],o=e[2]):(a=[`post`,t],o=async()=>{if(!rn(t))throw Error(`Invalid post ID`);return nt(t)},e[0]=t,e[1]=a,e[2]=o);let s=!!t,c;e[3]!==a||e[4]!==o||e[5]!==s?(c={queryKey:a,queryFn:o,enabled:s,retry:!1},e[3]=a,e[4]=o,e[5]=s,e[6]=c):c=e[6];let{data:l,isLoading:u,isError:d}=M(c);if(u){let t;return e[7]===Symbol.for(`react.memo_cache_sentinel`)?(t=(0,X.jsx)(`div`,{className:`border-y md:border border-zinc-100 dark:border-zinc-800 bg-white dark:bg-black rounded-none md:rounded-xl overflow-hidden min-h-screen`,children:(0,X.jsx)(Dr,{})}),e[7]=t):t=e[7],t}if(d||!l){let t;e[8]===Symbol.for(`react.memo_cache_sentinel`)?(t=(0,X.jsx)(`p`,{className:`text-zinc-500`,children:`Post not found`}),e[8]=t):t=e[8];let r;return e[9]===n?r=e[10]:(r=(0,X.jsxs)(`div`,{className:`p-10 text-center`,children:[t,(0,X.jsx)(`button`,{onClick:()=>n(-1),className:`text-violet-500 mt-4 underline font-bold`,children:`Go back`})]}),e[9]=n,e[10]=r),r}let p;e[11]===n?p=e[12]:(p=()=>n(-1),e[11]=n,e[12]=p);let m;e[13]===Symbol.for(`react.memo_cache_sentinel`)?(m=(0,X.jsx)(le,{size:20,strokeWidth:2.5}),e[13]=m):m=e[13];let h;e[14]===p?h=e[15]:(h=(0,X.jsx)(`button`,{onClick:p,className:`p-2 rounded-full hover:bg-zinc-100 dark:hover:bg-zinc-800 dark:text-white transition-colors`,children:m}),e[14]=p,e[15]=h);let g;e[16]===Symbol.for(`react.memo_cache_sentinel`)?(g=(0,X.jsx)(`h5`,{className:`text-xl font-bold dark:text-white`,children:`Post`}),e[16]=g):g=e[16];let _;e[17]===h?_=e[18]:(_=(0,X.jsx)(`div`,{className:`sticky top-0 bg-white/90 dark:bg-black/90 backdrop-blur-md z-20 border-b border-zinc-100 dark:border-zinc-800 px-4 py-3`,children:(0,X.jsxs)(`div`,{className:`flex items-center gap-x-4`,children:[h,g]})}),e[17]=h,e[18]=_);let v;e[19]===l.comments?v=e[20]:(v=l.comments||[],e[19]=l.comments,e[20]=v);let y;e[21]===n?y=e[22]:(y=e=>n(`/u/${e}`),e[21]=n,e[22]=y);let b;e[23]!==i||e[24]!==r||e[25]!==l||e[26]!==y||e[27]!==v?(b=(0,X.jsx)(Tr,{...l,isDetail:!0,currentUser:r,initialComments:v,showToast:i,onUserClick:y}),e[23]=i,e[24]=r,e[25]=l,e[26]=y,e[27]=v,e[28]=b):b=e[28];let x;return e[29]!==b||e[30]!==_?(x=(0,X.jsx)(`div`,{className:`border-y md:border border-zinc-100 dark:border-zinc-800 bg-white dark:bg-black rounded-none md:rounded-xl overflow-hidden min-h-screen shadow-sm mb-20 animate-in slide-in-from-right-5 duration-300`,children:(0,X.jsxs)(`div`,{className:`border-b border-zinc-100 dark:border-zinc-800`,children:[_,b]})}),e[29]=b,e[30]=_,e[31]=x):x=e[31],x},bi=q();function xi(){let e=(0,bi.c)(48),t=w(),{currentUser:n,authMode:r,setAuthMode:i}=Ct(),{darkMode:o}=Dt(),{isOpen:s,images:c,currentIndex:l,closeLightbox:u,setIndex:d}=Ht(),[f,p]=(0,J.useState)(!1),[m,h]=(0,J.useState)(!1),[g,_]=(0,J.useState)(!1),v;e[0]===Symbol.for(`react.memo_cache_sentinel`)?(v={},e[0]=v):v=e[0];let[y,b]=(0,J.useState)(v),[x,C]=(0,J.useState)(null);if(r){let t=o?`dark`:``,n;e[1]===i?n=e[2]:(n=()=>i(null),e[1]=i,e[2]=n);let a;e[3]!==r||e[4]!==i?(a=()=>i(r===`login`?`signup`:`login`),e[3]=r,e[4]=i,e[5]=a):a=e[5];let s;e[6]!==r||e[7]!==n||e[8]!==a?(s=(0,X.jsx)(`div`,{className:`min-h-screen bg-white dark:bg-black flex items-center justify-center p-4`,children:(0,X.jsx)(Wn,{children:(0,X.jsx)(Hn,{type:r,onComplete:n,onSwitch:a})})}),e[6]=r,e[7]=n,e[8]=a,e[9]=s):s=e[9];let c;return e[10]!==t||e[11]!==s?(c=(0,X.jsx)(`div`,{className:t,children:s}),e[10]=t,e[11]=s,e[12]=c):c=e[12],c}let T;e[13]===Symbol.for(`react.memo_cache_sentinel`)?(T=(0,X.jsx)(nn,{}),e[13]=T):T=e[13];let E;e[14]===Symbol.for(`react.memo_cache_sentinel`)?(E=(0,X.jsx)(hn,{}),e[14]=E):E=e[14];let D;e[15]===Symbol.for(`react.memo_cache_sentinel`)?(D=(0,X.jsx)(pe,{path:`/`,element:(0,X.jsx)(Wn,{children:(0,X.jsx)(kr,{onStoryClick:C,onAddStory:()=>_(!0)})})}),e[15]=D):D=e[15];let O;e[16]===Symbol.for(`react.memo_cache_sentinel`)?(O=(0,X.jsx)(pe,{path:`/home`,element:(0,X.jsx)(he,{to:`/`,replace:!0})}),e[16]=O):O=e[16];let k;e[17]===Symbol.for(`react.memo_cache_sentinel`)?(k=(0,X.jsx)(pe,{path:`/explore`,element:(0,X.jsx)(Wn,{children:(0,X.jsx)(Vr,{})})}),e[17]=k):k=e[17];let j;e[18]===Symbol.for(`react.memo_cache_sentinel`)?(j=(0,X.jsx)(pe,{path:`/reels`,element:(0,X.jsx)(Wn,{children:(0,X.jsx)(Xr,{})})}),e[18]=j):j=e[18];let M;e[19]===Symbol.for(`react.memo_cache_sentinel`)?(M=(0,X.jsx)(pe,{path:`/messages`,element:(0,X.jsx)(Wn,{children:(0,X.jsx)(ci,{})})}),e[19]=M):M=e[19];let N;e[20]===Symbol.for(`react.memo_cache_sentinel`)?(N=(0,X.jsx)(pe,{path:`/notifications`,element:(0,X.jsx)(Wn,{children:(0,X.jsx)(ui,{})})}),e[20]=N):N=e[20];let P;e[21]===Symbol.for(`react.memo_cache_sentinel`)?(P=(0,X.jsx)(pe,{path:`/post/:id`,element:(0,X.jsx)(Wn,{children:(0,X.jsx)(yi,{})})}),e[21]=P):P=e[21];let F;e[22]===Symbol.for(`react.memo_cache_sentinel`)?(F=(0,X.jsx)(pe,{path:`/u/:handle`,element:(0,X.jsx)(Wn,{children:(0,X.jsx)(gi,{onEditProfile:e=>{b(e),h(!0)}})})}),e[22]=F):F=e[22];let I;e[23]===Symbol.for(`react.memo_cache_sentinel`)?(I=(0,X.jsxs)(pe,{element:E,children:[D,O,k,j,M,N,P,F,(0,X.jsx)(pe,{path:`*`,element:(0,X.jsx)(he,{to:`/explore`})})]}),e[23]=I):I=e[23];let L;e[24]===t?L=e[25]:(L=(0,X.jsx)(a,{mode:`wait`,children:(0,X.jsx)(S,{location:t,children:I},t.pathname)}),e[24]=t,e[25]=L);let R;e[26]!==y||e[27]!==m||e[28]!==f||e[29]!==g?(R=(0,X.jsx)(Fn,{isPostModalOpen:f,setIsPostModalOpen:p,isEditProfileOpen:m,setIsEditProfileOpen:h,isStoryModalOpen:g,setIsStoryModalOpen:_,editProfileData:y,setEditProfileData:b}),e[26]=y,e[27]=m,e[28]=f,e[29]=g,e[30]=R):R=e[30];let z;e[31]===x?z=e[32]:(z=x&&(0,X.jsx)(Ln,{story:x,onClose:()=>C(null)}),e[31]=x,e[32]=z);let B;e[33]!==u||e[34]!==l||e[35]!==c||e[36]!==s||e[37]!==d?(B=s&&(0,X.jsx)(zn,{images:c,currentIndex:l,onClose:u,onNavigate:d}),e[33]=u,e[34]=l,e[35]=c,e[36]=s,e[37]=d,e[38]=B):B=e[38];let V;e[39]!==n||e[40]!==t.pathname?(V=n&&![`/messages`,`/reels`].includes(t.pathname)&&(0,X.jsx)(`button`,{onClick:()=>p(!0),className:`fixed bottom-24 right-6 md:bottom-10 md:right-10 z-50 bg-zinc-950 dark:bg-white text-white dark:text-zinc-950 size-14 md:size-16 rounded-full flex items-center justify-center shadow-2xl hover:scale-110 active:scale-90 transition-all cursor-pointer group`,title:`Create Post`,children:(0,X.jsx)(A,{size:32,className:`group-hover:rotate-90 transition-transform duration-300`})}),e[39]=n,e[40]=t.pathname,e[41]=V):V=e[41];let H;return e[42]!==L||e[43]!==R||e[44]!==z||e[45]!==B||e[46]!==V?(H=(0,X.jsxs)(X.Fragment,{children:[T,L,R,z,B,V]}),e[42]=L,e[43]=R,e[44]=z,e[45]=B,e[46]=V,e[47]=H):H=e[47],H}var Si=new He;(0,qe.createRoot)(document.getElementById(`root`)).render((0,X.jsx)(J.StrictMode,{children:(0,X.jsx)(o,{client:Si,children:(0,X.jsx)(u,{children:(0,X.jsx)(Et,{children:(0,X.jsx)(St,{children:(0,X.jsx)(Lt,{children:(0,X.jsx)(Nt,{children:(0,X.jsx)(Vt,{children:(0,X.jsx)(xi,{})})})})})})})})}));
//# sourceMappingURL=index-BQBwvR3v.js.map
import{n as fe}from"./rolldown-runtime-2JzG8er9.js";import{E as ue,f as je,l as ve,x as ge}from"./framework-BpvJHMsq.js";import"./database-Bte7TL-V.js";import{Dt as ze,Gt as v,Ht as ke,Kt as Ne,Nt as we,Sn as ye,Tt as _e,Vt as Ce,an as Pe,mt as Fe,yn as Se}from"./ui-libs-ydju28Yg.js";import{$ as $e,C as Me,D as Te,H as he,O as Le,Q as Ee,S as Ue,Z as We,c as xe,l as Oe,o as Ae,s as De,u as He,x as qe,yt as Be}from"./index-BERgXYjb.js";import{n as Ie}from"./post-G7wloGHX.js";import{n as Ve,t as Ge}from"./linkify-CvGdyZEF.js";import{l as Ke}from"./hooks-YiU3PAGu.js";import{t as me}from"./SEOHead-nkf5nWRS.js";var Qe=ve(),Xe=fe(ue(),1),s=fe(je(),1),Ze=({profile:t,currentUser:e,isCurrentUser:X,onEditProfile:Y,showToast:d,isCommunity:ee,onShowFollowers:Z,onShowFollowing:x})=>{const{isFollowing:g,stats:z,loading:u,handleFollow:J}=Ue(t,e?.id,d),p=ge(),[k,m]=(0,Xe.useState)(!1),h=async()=>{if(!e){d("Please sign in to message users");return}m(!0);try{p(`/messages/${await Be(e.id,t.id)}`)}catch(i){console.error("Failed to start conversation:",i),d("Failed to open chat")}finally{m(!1)}};return(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsxs)("div",{className:"relative h-32 sm:h-48 w-full bg-zinc-200 dark:bg-zinc-800",children:[t.cover&&(0,s.jsx)("img",{src:t.cover,className:"h-full w-full object-cover transition-opacity duration-500",alt:"Cover"}),(0,s.jsx)("div",{className:"absolute -bottom-12 sm:-bottom-16 left-4 sm:left-6",children:(0,s.jsx)("div",{className:"p-1 bg-white dark:bg-black rounded-full overflow-hidden shadow-xl ring-4 ring-white dark:ring-black relative",children:(0,s.jsxs)(We,{className:"size-24 sm:size-32",children:[(0,s.jsx)($e,{src:t.avatar,alt:t.handle,className:"object-cover"}),(0,s.jsx)(Ee,{className:"text-4xl font-bold",children:t.handle?.[0]?.toUpperCase()})]})})})]}),(0,s.jsxs)("div",{className:"flex flex-col p-4 sm:p-6 pt-16 sm:pt-20 space-y-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsx)("div",{className:"flex-1 min-w-0 pr-4"}),(0,s.jsx)("div",{className:"flex gap-2 shrink-0",children:X?(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:()=>Y(t),className:"p-2 rounded-full border border-zinc-200 dark:border-zinc-700 hover:bg-zinc-50 dark:hover:bg-zinc-900 text-zinc-700 dark:text-zinc-300 transition-all active:scale-95 flex items-center justify-center size-10",title:"Edit Profile",children:(0,s.jsx)(we,{size:20})}),(0,s.jsx)("button",{onClick:()=>p("/settings"),className:"p-2 rounded-full border border-zinc-200 dark:border-zinc-700 hover:bg-zinc-50 dark:hover:bg-zinc-900 text-zinc-700 dark:text-zinc-300 transition-all active:scale-95",title:"Settings",children:(0,s.jsx)(_e,{size:20})})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{onClick:h,disabled:k,className:"rounded-full p-2 border border-zinc-200 dark:border-zinc-700 hover:bg-zinc-50 dark:hover:bg-zinc-900 text-zinc-700 dark:text-zinc-300 dark:border-zinc-800 transition-colors disabled:opacity-50",children:k?(0,s.jsx)(v,{size:20,className:"animate-spin"}):(0,s.jsx)(ke,{size:20})}),(0,s.jsx)("button",{className:"rounded-full p-2 border border-zinc-200 dark:border-zinc-700 hover:bg-zinc-50 dark:hover:bg-zinc-900 text-zinc-700 dark:text-zinc-300 dark:border-zinc-800 transition-colors",children:(0,s.jsx)(Se,{size:20})}),(0,s.jsx)(he,{variant:g?"secondary":"primary",onClick:J,className:"text-sm px-6 min-w-[100px]",disabled:u,children:u?(0,s.jsx)(v,{size:16,className:"animate-spin mx-auto"}):g?"Following":"Follow"}),(0,s.jsx)("button",{className:"rounded-full p-2 hover:bg-zinc-100 text-zinc-700 dark:text-zinc-300 dark:hover:bg-zinc-800 transition-colors",children:(0,s.jsx)(Pe,{size:20})})]})})]}),(0,s.jsxs)("div",{className:"space-y-0.5",children:[(0,s.jsx)("div",{className:"flex items-center gap-1.5",children:(0,s.jsxs)("h3",{className:"text-xl sm:text-2xl font-extrabold truncate dark:text-white flex items-center gap-1",children:[t.name,t.verified&&(0,s.jsx)(Me,{})]})}),!ee&&(0,s.jsx)("div",{className:"flex items-center space-x-3",children:(0,s.jsxs)("span",{className:"text-zinc-500 font-medium text-sm px-1.5 py-0.5 -ml-1.5 rounded-md dark:text-zinc-400",children:["@",t.handle]})})]}),(0,s.jsx)("div",{className:"whitespace-pre-line text-zinc-900 dark:text-zinc-100 leading-relaxed text-sm sm:text-[15px]",children:(0,s.jsx)(Ve,{options:{...Ge,render:({attributes:i,content:b})=>{const{href:l,...N}=i,c=!l.startsWith("/")&&(l.startsWith("http")||l.startsWith("www"));return l.startsWith("/u/")||l.startsWith("/tags/")||l.startsWith("/c/")||l.startsWith("/explore")?(0,s.jsx)("span",{...N,className:"text-rose-500 dark:text-rose-400 font-bold hover:underline cursor-pointer",onClick:R=>{R.stopPropagation(),p(l)},children:b},b):(0,s.jsx)("a",{href:l,...N,target:c?"_blank":void 0,rel:c?"noopener noreferrer":void 0,children:b},b)}},children:t.bio})}),(t.website||t.location)&&(0,s.jsxs)("div",{className:"flex flex-wrap gap-x-5 gap-y-2 text-sm pt-1",children:[t.location&&(0,s.jsxs)("div",{className:"flex items-center gap-2 text-zinc-600 dark:text-zinc-400",children:[(0,s.jsx)(Ce,{size:14}),(0,s.jsx)("span",{children:t.location})]}),t.website&&(0,s.jsxs)("div",{className:"flex items-center gap-2 text-zinc-600 dark:text-zinc-400",children:[(0,s.jsx)(Ne,{size:14}),(0,s.jsx)("a",{href:`https://${t.website}`,target:"_blank",rel:"noreferrer",className:"text-violet-600 hover:underline font-semibold text-black dark:text-white",children:t.website})]})]}),(0,s.jsx)("div",{className:"flex gap-4 sm:gap-6 text-sm pt-2 relative z-10",children:ee?(0,s.jsxs)("button",{className:"flex gap-x-1 group cursor-pointer",children:[(0,s.jsx)("span",{className:"font-bold text-zinc-900 dark:text-white",children:t.members}),(0,s.jsx)("span",{className:"text-zinc-500 dark:text-zinc-400",children:"Members"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("button",{onClick:i=>{i.preventDefault(),i.stopPropagation(),x()},className:"flex gap-x-1 group cursor-pointer",children:[(0,s.jsx)("span",{className:"font-bold text-zinc-900 dark:text-white",children:z.following}),(0,s.jsx)("span",{className:"text-zinc-500 dark:text-zinc-400",children:"Following"})]}),(0,s.jsxs)("button",{onClick:i=>{i.preventDefault(),i.stopPropagation(),Z()},className:"flex gap-x-1 group cursor-pointer",children:[(0,s.jsx)("span",{className:"font-bold text-zinc-900 dark:text-white",children:z.followers}),(0,s.jsx)("span",{className:"text-zinc-500 dark:text-zinc-400",children:"Followers"})]})]})})]})]})},Je=Ze,Re=t=>{const e=(0,Qe.c)(99),{onEditProfile:X}=t,{handle:Y,profile:d,loading:ee,setUserPosts:Z,activeProfileTab:x,setActiveProfileTab:g,loadingPosts:z,isFetchingMorePosts:u,hasMorePosts:J,filteredPosts:p,isFollowModalOpen:k,setIsFollowModalOpen:m,followModalType:h,followListData:i,isListLoading:b,isFetchingMoreFollows:l,hasMoreFollows:N,openFollowModal:c,handlePostClick:R,handleUserClick:le,loadUserPosts:re,currentUser:j,addToast:w,navigate:y}=Ke();if(ee){const r=`@${Y}`;let n;e[0]!==r?(n=(0,s.jsx)(me,{title:r}),e[0]=r,e[1]=n):n=e[1];let o;e[2]===Symbol.for("react.memo_cache_sentinel")?(o=(0,s.jsx)(v,{size:40,className:"animate-spin text-violet-500"}),e[2]=o):o=e[2];let Q;return e[3]!==n?(Q=(0,s.jsxs)("div",{className:"flex items-center justify-center min-h-screen",children:[n,o]}),e[3]=n,e[4]=Q):Q=e[4],Q}if(!d){let r;e[5]===Symbol.for("react.memo_cache_sentinel")?(r=(0,s.jsx)(me,{title:"User Not Found"}),e[5]=r):r=e[5];const n=`Try searching for another. The user @${Y} could not be found.`;let o;return e[6]!==n?(o=(0,s.jsxs)("div",{className:"bg-white dark:bg-black rounded-none md:rounded-xl overflow-hidden min-h-[600px] flex items-center justify-center",children:[r,(0,s.jsx)(Te,{title:"Account doesn't exist",message:n,icon:Fe})]}),e[6]=n,e[7]=o):o=e[7],o}const a=d;let se;e[8]!==x||e[9]!==w||e[10]!==j||e[11]!==a.handle||e[12]!==p||e[13]!==R||e[14]!==le||e[15]!==J||e[16]!==u||e[17]!==re||e[18]!==z||e[19]!==d||e[20]!==Z?(se=r=>{const n=r===void 0?!1:r;return z?(0,s.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,s.jsx)(v,{className:"animate-spin text-violet-500",size:32})}):p.length>0?(0,s.jsxs)(s.Fragment,{children:[p.map(o=>(0,s.jsx)(Ie,{currentUser:j,showToast:w,...o,onClick:()=>R(o.id),onUserClick:le,onDelete:Q=>Z(pe=>pe.filter(be=>be.id!==Q))},o.feed_id||o.id)),J&&(0,s.jsx)("div",{className:"p-6 flex justify-center",children:(0,s.jsxs)(he,{variant:"secondary",className:"w-full max-w-xs",onClick:()=>re(d.id,!0),disabled:u,children:[u&&(0,s.jsx)(v,{size:18,className:"animate-spin mr-2"}),"Load more posts"]})})]}):n?null:(0,s.jsxs)("div",{className:"p-20 text-center text-zinc-500 flex flex-col items-center gap-4 animate-in fade-in duration-500",children:[(0,s.jsx)("div",{className:"bg-zinc-50 dark:bg-zinc-900 p-6 rounded-full mb-2 ring-1 ring-zinc-100 dark:ring-zinc-800",children:(0,s.jsx)(ze,{size:40,className:"text-zinc-300 dark:text-zinc-700"})}),(0,s.jsx)("h3",{className:"text-xl font-bold dark:text-white",children:x==="collections"?"No collections yet":"No posts yet"}),(0,s.jsx)("p",{className:"text-sm text-zinc-500 dark:text-zinc-400 max-w-[250px]",children:x==="collections"?"Saved posts and curated collections will appear here.":`When @${a.handle} shares posts, they will appear here.`})]})},e[8]=x,e[9]=w,e[10]=j,e[11]=a.handle,e[12]=p,e[13]=R,e[14]=le,e[15]=J,e[16]=u,e[17]=re,e[18]=z,e[19]=d,e[20]=Z,e[21]=se):se=e[21];const f=se,ne=`${a.name} (@${a.handle})`,oe=a.bio||`Check out ${a.name}'s profile on Sysm.`;let _;e[22]!==a.avatar||e[23]!==ne||e[24]!==oe?(_=(0,s.jsx)(me,{title:ne,description:oe,image:a.avatar}),e[22]=a.avatar,e[23]=ne,e[24]=oe,e[25]=_):_=e[25];let C;e[26]!==y?(C=()=>y(-1),e[26]=y,e[27]=C):C=e[27];let te;e[28]===Symbol.for("react.memo_cache_sentinel")?(te=(0,s.jsx)(ye,{size:22}),e[28]=te):te=e[28];let P;e[29]!==C?(P=(0,s.jsx)("button",{onClick:C,className:"p-1 rounded-full hover:bg-zinc-100 dark:hover:bg-zinc-800 dark:text-white transition-colors",children:te}),e[29]=C,e[30]=P):P=e[30];let F;e[31]!==a.name?(F=(0,s.jsx)("h5",{className:"text-lg font-bold dark:text-white leading-none",children:a.name}),e[31]=a.name,e[32]=F):F=e[32];const ce=a.posts_count||0;let S;e[33]!==ce?(S=(0,s.jsxs)("span",{className:"text-xs text-zinc-500 mt-0.5",children:[ce," Posts"]}),e[33]=ce,e[34]=S):S=e[34];let $;e[35]!==S||e[36]!==F?($=(0,s.jsxs)("div",{className:"flex flex-col",children:[F,S]}),e[35]=S,e[36]=F,e[37]=$):$=e[37];let M;e[38]!==$||e[39]!==P?(M=(0,s.jsx)("div",{className:"sticky top-0 bg-white/90 dark:bg-black/90 backdrop-blur-md z-20 border-b border-zinc-100 dark:border-zinc-800 px-4 py-3 md:hidden",children:(0,s.jsxs)("div",{className:"flex items-center gap-x-4",children:[P,$]})}),e[38]=$,e[39]=P,e[40]=M):M=e[40];const de=j?.handle===a.handle;let T,L;e[41]!==c?(T=()=>c("Followers"),L=()=>c("Following"),e[41]=c,e[42]=T,e[43]=L):(T=e[42],L=e[43]);let E;e[44]!==w||e[45]!==j||e[46]!==a||e[47]!==X||e[48]!==de||e[49]!==T||e[50]!==L?(E=(0,s.jsx)(Je,{profile:a,currentUser:j,isCurrentUser:de,onEditProfile:X,showToast:w,onShowFollowers:T,onShowFollowing:L}),e[44]=w,e[45]=j,e[46]=a,e[47]=X,e[48]=de,e[49]=T,e[50]=L,e[51]=E):E=e[51];let ae;e[52]===Symbol.for("react.memo_cache_sentinel")?(ae=(0,s.jsx)("div",{className:"sticky top-[60px] md:top-0 bg-white/90 dark:bg-black/90 backdrop-blur-md z-10 border-b border-zinc-100 dark:border-zinc-800",children:(0,s.jsx)(Oe,{className:"w-full h-auto bg-transparent p-0 rounded-none justify-start px-2 overflow-x-auto hide-scrollbar",children:["feed","collections","media"].map(Ye)})}),e[52]=ae):ae=e[52];let U;e[53]!==f?(U=f(),e[53]=f,e[54]=U):U=e[54];let W;e[55]!==U?(W=(0,s.jsx)(xe,{value:"feed",className:"m-0 border-none",children:U}),e[55]=U,e[56]=W):W=e[56];let O;e[57]!==a.id||e[58]!==a.name?(O=(0,s.jsx)(Ae,{name:a.name,number:a.id}),e[57]=a.id,e[58]=a.name,e[59]=O):O=e[59];let A;e[60]!==f?(A=f(!0),e[60]=f,e[61]=A):A=e[61];let D;e[62]!==O||e[63]!==A?(D=(0,s.jsxs)(xe,{value:"collections",className:"m-0 border-none",children:[O,A]}),e[62]=O,e[63]=A,e[64]=D):D=e[64];let H;e[65]!==f?(H=f(),e[65]=f,e[66]=H):H=e[66];let q;e[67]!==H?(q=(0,s.jsx)(xe,{value:"media",className:"m-0 border-none",children:H}),e[67]=H,e[68]=q):q=e[68];let B;e[69]!==x||e[70]!==g||e[71]!==W||e[72]!==D||e[73]!==q?(B=(0,s.jsxs)(De,{value:x,onValueChange:g,className:"w-full",children:[ae,W,D,q]}),e[69]=x,e[70]=g,e[71]=W,e[72]=D,e[73]=q,e[74]=B):B=e[74];let I;e[75]!==M||e[76]!==E||e[77]!==B?(I=(0,s.jsxs)("div",{className:"border-y md:border-b-0 border-zinc-100 dark:border-zinc-800",children:[M,E,B]}),e[75]=M,e[76]=E,e[77]=B,e[78]=I):I=e[78];let V;e[79]!==m?(V=()=>m(!1),e[79]=m,e[80]=V):V=e[80];let G;e[81]!==i||e[82]!==h||e[83]!==N||e[84]!==l||e[85]!==b||e[86]!==y||e[87]!==c||e[88]!==m?(G=(0,s.jsx)("div",{className:"min-h-[300px]",children:b?(0,s.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,s.jsx)(v,{className:"animate-spin text-violet-500",size:32})}):i.length>0?(0,s.jsxs)("div",{className:"divide-y divide-zinc-100 dark:divide-zinc-800 -mx-6",children:[i.map(r=>(0,s.jsx)(qe,{profile:r,onUserClick:n=>{m(!1),y(`/u/${n}`)}},r.id)),N&&(0,s.jsx)("div",{className:"p-4 flex justify-center",children:(0,s.jsxs)(he,{variant:"secondary",className:"w-full text-xs",onClick:()=>c(h,!0),disabled:l,children:[l?(0,s.jsx)(v,{size:14,className:"animate-spin mr-2"}):null,"Load more"]})})]}):(0,s.jsx)("div",{className:"flex flex-col items-center justify-center py-20 text-zinc-500",children:(0,s.jsxs)("p",{className:"font-medium",children:["No ",h.toLowerCase()," yet."]})})}),e[81]=i,e[82]=h,e[83]=N,e[84]=l,e[85]=b,e[86]=y,e[87]=c,e[88]=m,e[89]=G):G=e[89];let K;e[90]!==h||e[91]!==k||e[92]!==V||e[93]!==G?(K=(0,s.jsx)(Le,{isOpen:k,onClose:V,title:h,className:"sm:max-w-md",children:G}),e[90]=h,e[91]=k,e[92]=V,e[93]=G,e[94]=K):K=e[94];let ie;return e[95]!==I||e[96]!==K||e[97]!==_?(ie=(0,s.jsxs)("div",{className:"border-zinc-100 dark:border-zinc-800 bg-white dark:bg-black rounded-none md:rounded-xl overflow-hidden min-h-screen pb-20",children:[_,I,K]}),e[95]=I,e[96]=K,e[97]=_,e[98]=ie):ie=e[98],ie},cs=Re;function Ye(t){return(0,s.jsx)(He,{value:t,className:"flex-1 py-4 text-sm font-bold capitalize rounded-none border-b-2 data-[state=active]:border-black dark:data-[state=active]:border-white data-[state=active]:text-black dark:data-[state=active]:text-white text-zinc-500 transition-all hover:bg-zinc-50 dark:hover:bg-zinc-900 whitespace-nowrap px-4",children:t==="feed"?"Posts":t},t)}export{cs as default};

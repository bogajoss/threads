import{a as D}from"./rolldown-runtime-BaZ8gS7u.js";import{E as G,c as L,d as W}from"./framework-CsA6nn9m.js";import{gn as A,rn as B,tn as F}from"./ui-libs-CLcIz2nO.js";import{t as H}from"./media-libs-Btb8RX-I.js";import{an as q}from"./index-1GGj2WM6.js";var J=L(),a=D(G(),1),r=D(W(),1),K=p=>{const e=(0,J.c)(29),{url:d,duration:m,isMe:s}=p,v=(0,a.useRef)(null),y=(0,a.useRef)(null),[j,C]=(0,a.useState)(!1),[x,E]=(0,a.useState)(!1),[$,N]=(0,a.useState)(0),[z,I]=(0,a.useState)(m||0);let h,g;e[0]!==m||e[1]!==s||e[2]!==d?(h=()=>{if(!v.current)return;const t=H.create({container:v.current,waveColor:s?"rgba(255, 255, 255, 0.3)":"rgba(139, 92, 246, 0.2)",progressColor:s?"#fff":"#8b5cf6",cursorColor:"transparent",barWidth:3,barGap:3,barRadius:30,height:36,normalize:!0,url:d});return y.current=t,t.on("ready",()=>{E(!0),m||I(t.getDuration())}),t.on("play",()=>C(!0)),t.on("pause",()=>C(!1)),t.on("finish",()=>{C(!1),t.setTime(0),N(0)}),t.on("audioprocess",()=>{N(t.getCurrentTime())}),t.on("interaction",()=>{N(t.getCurrentTime())}),()=>{t.destroy()}},g=[d,s,m],e[0]=m,e[1]=s,e[2]=d,e[3]=h,e[4]=g):(h=e[3],g=e[4]),(0,a.useEffect)(h,g);let b;e[5]===Symbol.for("react.memo_cache_sentinel")?(b=t=>{t.stopPropagation(),y.current&&y.current.playPause()},e[5]=b):b=e[5];const V=b,M=O,S=s?"text-white":"text-zinc-900 dark:text-white";let i;e[6]!==S?(i=q("flex items-center gap-3 py-1.5 px-0.5 min-w-[220px] md:min-w-[260px]",S),e[6]=S,e[7]=i):i=e[7];const P=!x,R=s?"bg-white/20 hover:bg-white/30 text-white backdrop-blur-sm":"bg-violet-500 text-white hover:bg-violet-600 shadow-violet-200 dark:shadow-none";let n;e[8]!==R?(n=q("size-11 flex shrink-0 items-center justify-center rounded-full transition-all duration-200 active:scale-90 shadow-sm",R),e[8]=R,e[9]=n):n=e[9];let o;e[10]!==j||e[11]!==x?(o=x?j?(0,r.jsx)(B,{size:20,fill:"currentColor"}):(0,r.jsx)(F,{size:20,fill:"currentColor",className:"ml-1"}):(0,r.jsx)(A,{size:18,className:"animate-spin"}),e[10]=j,e[11]=x,e[12]=o):o=e[12];let l;e[13]!==P||e[14]!==n||e[15]!==o?(l=(0,r.jsx)("button",{type:"button",onClick:V,disabled:P,className:n,children:o}),e[13]=P,e[14]=n,e[15]=o,e[16]=l):l=e[16];let w;e[17]===Symbol.for("react.memo_cache_sentinel")?(w=(0,r.jsx)("div",{ref:v,className:"w-full cursor-pointer"}),e[17]=w):w=e[17];const T=M($);let c;e[18]!==T?(c=(0,r.jsx)("span",{className:"tabular-nums",children:T}),e[18]=T,e[19]=c):c=e[19];const k=z?M(z):"0:00";let u;e[20]!==k?(u=(0,r.jsx)("span",{className:"tabular-nums",children:k}),e[20]=k,e[21]=u):u=e[21];let f;e[22]!==c||e[23]!==u?(f=(0,r.jsxs)("div",{className:"flex-1 flex flex-col gap-1.5 min-w-0",children:[w,(0,r.jsxs)("div",{className:"flex justify-between items-center text-[10px] font-bold tracking-tight uppercase opacity-80",children:[c,u]})]}),e[22]=c,e[23]=u,e[24]=f):f=e[24];let _;return e[25]!==l||e[26]!==f||e[27]!==i?(_=(0,r.jsxs)("div",{className:i,children:[l,f]}),e[25]=l,e[26]=f,e[27]=i,e[28]=_):_=e[28],_},ee=K;function O(p){return`${Math.floor(p/60)}:${Math.floor(p%60).toString().padStart(2,"0")}`}export{ee as t};

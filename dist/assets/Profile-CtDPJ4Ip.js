import{a as ne}from"./rolldown-runtime-BaZ8gS7u.js";import{o as ce,s as de}from"./animations-pEILWrFP.js";import{_ as xe,c as me}from"./framework-di2JoXyY.js";import"./database-CdmW3A7f.js";import{Bn as he,Cn as fe,Kn as pe,Pt as ue,Qt as je,en as be,mr as ge,pr as ve,vr as ke}from"./ui-libs-CeA_mvKJ.js";import"./media-libs-D2H42K39.js";import{$ as ze,A as we,C as Ne,Ct as ye,E as _e,Et as Ce,H as Fe,J as Pe,St as re,T as Me,U as Se,Vt as Te,_ as Ie,d as Le,dt as $e,et as De,f as Ee,ft as Ue,h as We,it as Ae,j as Be,m as Oe,nt as ae,p as qe,q as He,rt as Re,tt as le,ut as Ve,w as ie,y as Ge}from"./index-D6iWZPjq.js";import"./VideoPlayer-I9bfnFil.js";import"./useAdmin-CrIFp0Ht.js";import{n as Je}from"./post-DuLsiW_8.js";import{t as Ke}from"./text-processing-BHR8J29b.js";import{t as Qe}from"./linkify-BSR2B0d-.js";import{l as Xe}from"./hooks-DJbG4eOi.js";import{t as oe}from"./skeleton-profile-jtMv6xZC.js";var Ye=me(),Ze=ne(de(),1),s=ne(ce(),1),es=({profile:t,currentUser:e,isCurrentUser:O,onEditProfile:Q,isCommunity:m,onShowFollowers:X,onShowFollowing:q})=>{const{addToast:c}=Ce(),h=xe(),{openReport:u}=ye(),[j,f]=(0,Ze.useState)(!1),{isFollowing:b,stats:o,loading:n,handleFollow:g}=Se(t||{},e?.id);if(!t)return(0,s.jsx)(oe,{});const H=async()=>{if(!e){c("Please sign in to message users","info");return}f(!0);try{h(`/m/${await Te(e.id,t.id)}`)}catch(a){console.error("Failed to start conversation:",a),c("Failed to open chat","error")}finally{f(!1)}};return(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsxs)("div",{className:"relative h-32 w-full bg-zinc-200 dark:bg-zinc-800 sm:h-48",children:[t.cover&&(0,s.jsx)("img",{src:t.cover,className:"h-full w-full object-cover transition-opacity duration-500",alt:"Cover"}),(0,s.jsx)("div",{className:"absolute -bottom-12 left-4 sm:-bottom-16 sm:left-6",children:(0,s.jsx)("div",{className:"relative rounded-full bg-white p-1 shadow-xl ring-4 ring-white dark:bg-black dark:ring-black",children:(0,s.jsxs)(Ve,{className:"size-24 sm:size-32",children:[(0,s.jsx)(Ue,{src:t.avatar,alt:t.handle,className:"object-cover"}),(0,s.jsx)($e,{className:"text-4xl font-bold",children:t.handle?.[0]?.toUpperCase()})]})})})]}),(0,s.jsxs)("div",{className:"flex flex-col space-y-4 p-4 pt-16 sm:p-6 sm:pt-20",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsx)("div",{className:"min-w-0 flex-1 pr-4"}),(0,s.jsx)("div",{className:"flex shrink-0 gap-2",children:O?(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:()=>Q?.(t),className:"flex size-10 items-center justify-center rounded-full border border-zinc-200 text-zinc-700 transition-all hover:bg-zinc-50 active:scale-95 dark:border-zinc-700 dark:text-zinc-300 dark:hover:bg-zinc-900",title:"Edit Profile",children:(0,s.jsx)(Le,{size:20})}),(0,s.jsx)("button",{onClick:()=>h("/settings"),className:"rounded-full border border-zinc-200 p-2 text-zinc-700 transition-all hover:bg-zinc-50 active:scale-95 dark:border-zinc-700 dark:text-zinc-300 dark:hover:bg-zinc-900",title:"Settings",children:(0,s.jsx)(Ie,{size:20})})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{onClick:H,disabled:j,className:"rounded-full border border-zinc-200 p-2 text-zinc-700 transition-colors hover:bg-zinc-50 disabled:opacity-50 dark:border-zinc-700 dark:text-zinc-300 dark:hover:bg-zinc-900",children:j?(0,s.jsx)("span",{className:"animate-pulse",children:"..."}):(0,s.jsx)(fe,{size:20})}),(0,s.jsx)("button",{className:"rounded-full border border-zinc-200 p-2 text-zinc-700 transition-colors hover:bg-zinc-50 dark:border-zinc-700 dark:text-zinc-300 dark:hover:bg-zinc-900",children:(0,s.jsx)(ve,{size:20})}),(0,s.jsx)(re,{variant:b?"secondary":"primary",onClick:g,className:"flex min-w-0 items-center gap-2 px-4 text-sm sm:min-w-[100px]",disabled:n,children:n?(0,s.jsx)("span",{className:"mx-auto animate-pulse",children:"..."}):b?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(qe,{size:18}),(0,s.jsx)("span",{className:"hidden sm:inline",children:"Following"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(Ee,{size:18}),(0,s.jsx)("span",{className:"hidden sm:inline",children:"Follow"})]})}),(0,s.jsxs)(ze,{children:[(0,s.jsx)(Ae,{asChild:!0,children:(0,s.jsx)("button",{className:"rounded-full p-2 text-zinc-700 transition-colors hover:bg-zinc-100 dark:text-zinc-300 dark:hover:bg-zinc-800",children:(0,s.jsx)(pe,{size:20})})}),(0,s.jsxs)(De,{align:"end",className:"w-48",children:[(0,s.jsxs)(le,{children:[(0,s.jsxs)(ae,{className:"cursor-pointer gap-2",onClick:()=>{navigator.clipboard.writeText(window.location.href),c("Profile link copied!")},children:[(0,s.jsx)(je,{size:16}),"Share Profile"]}),(0,s.jsxs)(ae,{className:"cursor-pointer gap-2",onClick:()=>u(m?"community":"user",t.id),children:[(0,s.jsx)(he,{size:16}),"Report ",m?"community":"user"]})]}),(0,s.jsx)(Re,{}),(0,s.jsx)(le,{children:(0,s.jsxs)(ae,{variant:"destructive",className:"cursor-pointer gap-2",onClick:()=>c("User blocked","info"),children:[(0,s.jsx)(ge,{size:16}),"Block user"]})})]})]})]})})]}),(0,s.jsxs)("div",{className:"space-y-0.5",children:[(0,s.jsxs)("div",{className:"mt-1 flex items-center gap-1.5",children:[(0,s.jsx)("h1",{className:"text-xl font-extrabold text-zinc-900 dark:text-zinc-100",children:t.name}),t.verified&&(0,s.jsx)(Ge,{size:20,className:"text-blue-500"})]}),!m&&(0,s.jsx)("div",{className:"flex items-center space-x-3",children:(0,s.jsxs)("span",{className:"-ml-1.5 rounded-md px-1.5 py-0.5 text-sm font-medium text-zinc-500 dark:text-zinc-400",children:["@",t.handle]})})]}),(0,s.jsx)("div",{className:"whitespace-pre-line text-sm leading-relaxed text-zinc-900 dark:text-zinc-100 sm:text-[15px]",children:(0,s.jsx)(Ke,{options:{...Qe,render:({attributes:a,content:d})=>{const{href:r,...v}=a,k=!r.startsWith("/")&&(r.startsWith("http")||r.startsWith("www"));return r.startsWith("/u/")||r.startsWith("/tags/")||r.startsWith("/c/")||r.startsWith("/explore")?(0,s.jsx)("span",{...v,className:"cursor-pointer font-bold text-rose-500 hover:underline dark:text-rose-400",onClick:R=>{R.stopPropagation(),h(r)},children:d},d):(0,s.jsx)("a",{href:r,...v,target:k?"_blank":void 0,rel:k?"noopener noreferrer":void 0,children:d},d)}},children:t.bio})}),(t.website||t.location)&&(0,s.jsxs)("div",{className:"flex flex-wrap gap-x-5 gap-y-2 pt-1 text-sm",children:[t.location&&(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)(We,{size:14}),t.location]}),t.website&&(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)(Oe,{size:14}),(0,s.jsx)("a",{href:`https://${t.website}`,target:"_blank",rel:"noreferrer",className:"font-semibold text-black hover:underline dark:text-white",children:t.website})]})]}),(0,s.jsx)("div",{className:"relative z-10 flex gap-4 pt-2 text-sm sm:gap-6",children:m?(0,s.jsxs)("button",{className:"group flex cursor-pointer gap-x-1",children:[(0,s.jsx)("span",{className:"font-bold text-zinc-900 dark:text-white",children:t.members}),(0,s.jsx)("span",{className:"text-zinc-500 dark:text-zinc-400",children:"Members"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("button",{onClick:a=>{a.preventDefault(),a.stopPropagation(),q()},className:"group flex cursor-pointer gap-x-1",children:[(0,s.jsx)("span",{className:"font-bold text-zinc-900 dark:text-white",children:o.following}),(0,s.jsx)("span",{className:"text-zinc-500 dark:text-zinc-400",children:"Following"})]}),(0,s.jsxs)("button",{onClick:a=>{a.preventDefault(),a.stopPropagation(),X()},className:"group flex cursor-pointer gap-x-1",children:[(0,s.jsx)("span",{className:"font-bold text-zinc-900 dark:text-white",children:o.followers}),(0,s.jsx)("span",{className:"text-zinc-500 dark:text-zinc-400",children:"Followers"})]})]})})]})]})},ss=es,ts=t=>{const e=(0,Ye.c)(76),{onEditProfile:O}=t,{handle:Q,profile:m,loading:X,activeProfileTab:q,setActiveProfileTab:c,loadingPosts:h,isFetchingMorePosts:u,hasMorePosts:j,filteredPosts:f,isFollowModalOpen:b,setIsFollowModalOpen:o,followModalType:n,followListData:g,isListLoading:H,isFetchingMoreFollows:a,hasMoreFollows:d,openFollowModal:r,fetchNextFollows:v,handlePostClick:k,handleUserClick:R,loadUserPosts:Y,currentUser:p,navigate:z}=Xe();if(X){let l;return e[0]===Symbol.for("react.memo_cache_sentinel")?(l=(0,s.jsx)(oe,{}),e[0]=l):l=e[0],l}if(!m){const l=`Try searching for another. The user @${Q} could not be found.`;let x;return e[1]!==l?(x=(0,s.jsx)("div",{className:"flex min-h-[600px] items-center justify-center overflow-hidden rounded-none border-zinc-100 bg-white dark:bg-black md:rounded-xl",children:(0,s.jsx)(He,{title:"Account doesn't exist",message:l,icon:ue})}),e[1]=l,e[2]=x):x=e[2],x}const i=m;let V;e[3]!==p||e[4]!==i.handle||e[5]!==f||e[6]!==k||e[7]!==R||e[8]!==j||e[9]!==u||e[10]!==Y||e[11]!==h?(V=l=>{const x=l===void 0?!1:l;return h?(0,s.jsx)("div",{className:"flex flex-col",children:[1,2,3].map(as)}):f.length>0?(0,s.jsxs)(s.Fragment,{children:[f.map(te=>(0,s.jsx)(Je,{currentUser:p,...te,onClick:()=>k(te.id),onUserClick:R},te.id)),j&&(0,s.jsx)("div",{className:"flex justify-center p-6",children:(0,s.jsxs)(re,{variant:"secondary",className:"w-full max-w-xs",onClick:()=>Y(),disabled:u,children:[u&&(0,s.jsx)("span",{className:"mr-2 animate-pulse",children:"..."}),"Load more posts"]})})]}):x?null:(0,s.jsxs)("div",{className:"flex animate-in fade-in flex-col items-center gap-4 p-20 text-center text-zinc-500 duration-500",children:[(0,s.jsx)("div",{className:"mb-2 rounded-full bg-zinc-50 p-6 ring-1 ring-zinc-100 dark:bg-zinc-900 dark:ring-zinc-800",children:(0,s.jsx)(be,{size:40,className:"text-zinc-300 dark:text-zinc-700"})}),(0,s.jsx)("h3",{className:"text-xl font-bold dark:text-white",children:"No posts yet"}),(0,s.jsxs)("p",{className:"max-w-[250px] text-sm text-zinc-500 dark:text-zinc-400",children:["When @",i.handle," shares posts, they will appear here."]})]})},e[3]=p,e[4]=i.handle,e[5]=f,e[6]=k,e[7]=R,e[8]=j,e[9]=u,e[10]=Y,e[11]=h,e[12]=V):V=e[12];const w=V;let N;e[13]!==z?(N=()=>z(-1),e[13]=z,e[14]=N):N=e[14];let G;e[15]===Symbol.for("react.memo_cache_sentinel")?(G=(0,s.jsx)(ke,{size:22}),e[15]=G):G=e[15];let y;e[16]!==N?(y=(0,s.jsx)("button",{onClick:N,className:"rounded-full p-1 transition-colors hover:bg-zinc-100 dark:text-white dark:hover:bg-zinc-800",children:G}),e[16]=N,e[17]=y):y=e[17];let _;e[18]!==i.name?(_=(0,s.jsx)("h5",{className:"text-lg font-bold leading-none dark:text-white",children:i.name}),e[18]=i.name,e[19]=_):_=e[19];const Z=i.follower_count||0;let C;e[20]!==Z?(C=(0,s.jsxs)("span",{className:"mt-0.5 text-xs text-zinc-500",children:[Z," Followers"]}),e[20]=Z,e[21]=C):C=e[21];let F;e[22]!==_||e[23]!==C?(F=(0,s.jsxs)("div",{className:"flex flex-col",children:[_,C]}),e[22]=_,e[23]=C,e[24]=F):F=e[24];let P;e[25]!==y||e[26]!==F?(P=(0,s.jsx)("div",{className:"sticky top-0 z-20 border-b border-zinc-100 bg-white/90 p-4 py-3 backdrop-blur-md dark:border-zinc-800 dark:bg-black/90 md:hidden",children:(0,s.jsxs)("div",{className:"flex items-center gap-x-4",children:[y,F]})}),e[25]=y,e[26]=F,e[27]=P):P=e[27];const ee=p?.handle===i.handle;let M,S;e[28]!==r?(M=()=>r("Followers"),S=()=>r("Following"),e[28]=r,e[29]=M,e[30]=S):(M=e[29],S=e[30]);let T;e[31]!==p||e[32]!==i||e[33]!==O||e[34]!==ee||e[35]!==M||e[36]!==S?(T=(0,s.jsx)(ss,{profile:i,currentUser:p,isCurrentUser:ee,onEditProfile:O,onShowFollowers:M,onShowFollowing:S}),e[31]=p,e[32]=i,e[33]=O,e[34]=ee,e[35]=M,e[36]=S,e[37]=T):T=e[37];let J;e[38]===Symbol.for("react.memo_cache_sentinel")?(J=(0,s.jsx)("div",{className:"sticky top-[60px] z-10 border-b border-zinc-100 bg-white/90 backdrop-blur-md dark:border-zinc-800 dark:bg-black/90 md:top-0",children:(0,s.jsx)(Me,{className:"hide-scrollbar h-auto w-full justify-start overflow-x-auto rounded-none bg-transparent p-0 px-2",children:["feed","media"].map(rs)})}),e[38]=J):J=e[38];let I;e[39]!==w?(I=w(),e[39]=w,e[40]=I):I=e[40];let L;e[41]!==I?(L=(0,s.jsx)(ie,{value:"feed",className:"m-0 border-none",children:I}),e[41]=I,e[42]=L):L=e[42];let $;e[43]!==w?($=w(),e[43]=w,e[44]=$):$=e[44];let D;e[45]!==$?(D=(0,s.jsx)(ie,{value:"media",className:"m-0 border-none",children:$}),e[45]=$,e[46]=D):D=e[46];let E;e[47]!==q||e[48]!==c||e[49]!==L||e[50]!==D?(E=(0,s.jsxs)(Ne,{value:q,onValueChange:c,className:"w-full",children:[J,L,D]}),e[47]=q,e[48]=c,e[49]=L,e[50]=D,e[51]=E):E=e[51];let U;e[52]!==T||e[53]!==E||e[54]!==P?(U=(0,s.jsxs)("div",{className:"border-y border-zinc-100 dark:border-zinc-800 md:border-b-0",children:[P,T,E]}),e[52]=T,e[53]=E,e[54]=P,e[55]=U):U=e[55];let W;e[56]!==o?(W=()=>o(!1),e[56]=o,e[57]=W):W=e[57];const se=n==="Followers"?`People who follow @${i.handle}`:`People @${i.handle} follows`;let A;e[58]!==v||e[59]!==g||e[60]!==n||e[61]!==d||e[62]!==a||e[63]!==H||e[64]!==z||e[65]!==o?(A=(0,s.jsx)("div",{className:"flex max-h-[75vh] flex-col overflow-y-auto",children:(0,s.jsx)("div",{className:"min-h-[300px]",children:H?(0,s.jsx)("div",{className:"flex flex-col",children:[1,2,3,4,5].map(ls)}):g.length>0?(0,s.jsxs)("div",{className:"divide-y divide-zinc-100 dark:divide-zinc-800",children:[g.map(l=>(0,s.jsx)(Fe,{profile:l,onUserClick:x=>{o(!1),z(`/u/${x}`)}},l.id)),d&&(0,s.jsx)("div",{className:"flex justify-center p-4",children:(0,s.jsxs)(re,{variant:"secondary",className:"w-full text-xs",onClick:()=>v(),disabled:a,children:[a?(0,s.jsx)("span",{className:"mr-2 animate-pulse",children:"..."}):null,"Load more"]})})]}):(0,s.jsx)("div",{className:"flex flex-col items-center justify-center py-20 text-zinc-500",children:(0,s.jsxs)("p",{className:"font-medium",children:["No ",n.toLowerCase()," yet."]})})})}),e[58]=v,e[59]=g,e[60]=n,e[61]=d,e[62]=a,e[63]=H,e[64]=z,e[65]=o,e[66]=A):A=e[66];let B;e[67]!==n||e[68]!==b||e[69]!==W||e[70]!==se||e[71]!==A?(B=(0,s.jsx)(Pe,{isOpen:b,onClose:W,title:n,description:se,className:"sm:max-w-md",children:A}),e[67]=n,e[68]=b,e[69]=W,e[70]=se,e[71]=A,e[72]=B):B=e[72];let K;return e[73]!==U||e[74]!==B?(K=(0,s.jsxs)("div",{className:"min-h-screen overflow-hidden rounded-none border-zinc-100 bg-white pb-20 dark:bg-black dark:border-zinc-800 md:rounded-xl",children:[U,B]}),e[73]=U,e[74]=B,e[75]=K):K=e[75],K},vs=ts;function as(t){return(0,s.jsx)(Be,{},t)}function rs(t){return(0,s.jsx)(_e,{value:t,className:"flex-1 whitespace-nowrap rounded-none border-b-2 px-4 py-4 text-sm font-bold capitalize text-zinc-500 transition-all data-[state=active]:border-black data-[state=active]:text-black dark:data-[state=active]:border-white dark:data-[state=active]:text-white",children:t==="feed"?"Posts":t},t)}function ls(t){return(0,s.jsx)(we,{},t)}export{vs as default};

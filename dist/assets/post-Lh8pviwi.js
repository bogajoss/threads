import{a as bt}from"./rolldown-runtime-BaZ8gS7u.js";import{T as Tt,f as Wt,s as G,u as Vt,y as Fe}from"./framework-DIDnLsp9.js";import{r as jt}from"./query-DNidMcz3.js";import{$t as Bt,An as qt,Bn as Ht,Dn as ge,Fn as Jt,Ft as ne,In as we,Kn as Gt,Kt,Ln as Qt,Nn as Xt,Pn as Yt,Rn as Zt,Sn as es,Tn as ts,Ut as ss,Wt as as,_n as vt,an as is,cn as ns,fn as ls,hn as rs,in as ye,jn as et,kn as tt,ln as os,on as cs,t as zt,tn as ds,un as ms,vn as xs,xn as Y}from"./ui-libs-x7JJBDE0.js";import{$ as q,At as Nt,Bt as st,Dt as at,G as us,H as hs,Ht as ps,Jt as le,K as fs,Nt as gs,Ot as bs,Pt as fe,Q as H,Qt as js,R as kt,U as it,Ut as vs,V as zs,W as ie,Yt as pe,Zt as Ns,_t as Ce,a as yt,at as nt,c as ks,ct as lt,dt as ys,et as J,ft as ws,g as Cs,gt as wt,it as rt,jt as Ss,kt as $s,l as Fs,lt as Ps,m as ot,mt as _s,nt as ct,o as dt,ot as mt,p as Se,pt as Ct,qt as Rs,rt as xt,st as ut,tt as ht,ut as Is,vt as Ms}from"./index-Du4T0o99.js";import{n as Pe,t as _e}from"./linkify-DBRQwEj8.js";import{d as As}from"./hooks-DMqzwblS.js";var Ls=G(),l=bt(Tt(),1),t=bt(Vt(),1),Es=s=>{const e=(0,Ls.c)(22),{icon:a,count:m,label:c,onClick:x,active:i,activeColorClass:u,size:b}=s,N=u===void 0?"text-violet-600":u,j=b===void 0?18:b;let p;e[0]!==x?(p=n=>{n.stopPropagation(),x&&x(n)},e[0]=x,e[1]=p):p=e[1];const d=`${c} ${m!==void 0?`(${m})`:""}`,f=`group -ml-2 flex items-center gap-x-1 rounded-xl px-2 py-1.5 text-[12px] font-bold transition-all active:scale-95 sm:gap-x-1.5 sm:text-[13px] ${i?N:"text-zinc-500 hover:text-zinc-700 dark:hover:text-zinc-300"}`,h=`rounded-full p-2 transition-colors ${i?"":"group-hover:bg-zinc-100 dark:group-hover:bg-zinc-800"}`,g=i?2.5:2,k=i?"fill-current":"";let C;e[2]!==a||e[3]!==j||e[4]!==g||e[5]!==k?(C=(0,t.jsx)(a,{size:j,strokeWidth:g,className:k}),e[2]=a,e[3]=j,e[4]=g,e[5]=k,e[6]=C):C=e[6];let o;e[7]!==h||e[8]!==C?(o=(0,t.jsx)("div",{className:h,children:C}),e[7]=h,e[8]=C,e[9]=o):o=e[9];let S;e[10]!==c?(S=c&&(0,t.jsx)("span",{className:"hidden xs:inline",children:c}),e[10]=c,e[11]=S):S=e[11];let y;e[12]!==i||e[13]!==m?(y=m!=null&&(0,t.jsx)("span",{className:i?"font-bold":"",children:m||0}),e[12]=i,e[13]=m,e[14]=y):y=e[14];let I;return e[15]!==o||e[16]!==S||e[17]!==y||e[18]!==p||e[19]!==d||e[20]!==f?(I=(0,t.jsxs)("button",{onClick:p,"aria-label":d,className:f,children:[o,S,y]}),e[15]=o,e[16]=S,e[17]=y,e[18]=p,e[19]=d,e[20]=f,e[21]=I):I=e[21],I},X=Es,Ds=G(),Us=s=>{const e=(0,Ds.c)(51),{currentUser:a,newComment:m,setNewComment:c,handleSubmitComment:x,loading:i,selectedFiles:u,setSelectedFiles:b,isUploading:N}=s;let j;e[0]!==u?(j=u===void 0?[]:u,e[0]=u,e[1]=j):j=e[1];const p=j,d=(0,l.useRef)(null);let f;e[2]!==b?(f=v=>{if(v.target.files){const _=Array.from(v.target.files);b&&b(V=>[...V,..._])}},e[2]=b,e[3]=f):f=e[3];const h=f;let g;e[4]!==b?(g=v=>{b&&b(_=>_.filter((V,K)=>K!==v))},e[4]=b,e[5]=g):g=e[5];const k=g;if(!a){let v;return e[6]===Symbol.for("react.memo_cache_sentinel")?(v=(0,t.jsx)("div",{className:"border-y border-zinc-100 bg-zinc-50/30 p-6 text-center dark:border-zinc-800 dark:bg-zinc-900/10",children:(0,t.jsx)("p",{className:"text-sm text-zinc-500",children:"Please login to join the conversation."})}),e[6]=v):v=e[6],v}let C;e[7]!==a.avatar||e[8]!==a.handle?(C=(0,t.jsx)(J,{src:a.avatar,alt:a.handle,className:"object-cover"}),e[7]=a.avatar,e[8]=a.handle,e[9]=C):C=e[9];let o;e[10]!==a.handle?.[0]?(o=a.handle?.[0]?.toUpperCase(),e[10]=a.handle?.[0],e[11]=o):o=e[11];let S;e[12]!==o?(S=(0,t.jsx)(q,{children:o}),e[12]=o,e[13]=S):S=e[13];let y;e[14]!==C||e[15]!==S?(y=(0,t.jsxs)(H,{className:"size-9 border border-zinc-200 dark:border-zinc-700",children:[C,S]}),e[14]=C,e[15]=S,e[16]=y):y=e[16];let I;e[17]!==c?(I=v=>c(v.target.value),e[17]=c,e[18]=I):I=e[18];let n;e[19]!==m||e[20]!==I?(n=(0,t.jsx)("textarea",{id:"comment-input",className:"min-h-[60px] w-full resize-none bg-transparent text-base outline-none placeholder:text-zinc-500 dark:text-white",placeholder:"Post your reply...",value:m,onChange:I}),e[19]=m,e[20]=I,e[21]=n):n=e[21];let R;e[22]!==k||e[23]!==p?(R=p.length>0&&(0,t.jsx)("div",{className:"mt-2 mb-2 flex flex-wrap gap-2",children:p.map((v,_)=>(0,t.jsxs)("div",{className:"relative size-20 overflow-hidden rounded-xl border border-zinc-200 dark:border-zinc-800",children:[v.type.startsWith("image/")?(0,t.jsx)("img",{src:URL.createObjectURL(v),className:"size-full object-cover",alt:""}):(0,t.jsx)("div",{className:"flex size-full items-center justify-center bg-zinc-100 dark:bg-zinc-800",children:(0,t.jsx)(ms,{size:20,className:"text-zinc-500"})}),(0,t.jsx)("button",{onClick:()=>k(_),className:"absolute right-1 top-1 rounded-full bg-black/60 p-1 text-white transition-colors hover:bg-black",children:(0,t.jsx)(ne,{size:12})})]},_))}),e[22]=k,e[23]=p,e[24]=R):R=e[24];let E;e[25]===Symbol.for("react.memo_cache_sentinel")?(E=()=>d.current?.click(),e[25]=E):E=e[25];let W;e[26]===Symbol.for("react.memo_cache_sentinel")?(W=(0,t.jsx)("button",{type:"button",onClick:E,className:"rounded-full p-2 text-violet-600 transition-colors hover:bg-violet-50 dark:hover:bg-zinc-800",title:"Attach media",children:(0,t.jsx)(ts,{size:20})}),e[26]=W):W=e[26];let F;e[27]!==h?(F=(0,t.jsxs)("div",{className:"flex gap-1 text-violet-600",children:[W,(0,t.jsx)("input",{type:"file",ref:d,onChange:h,multiple:!0,className:"hidden",accept:"image/*,video/*,application/pdf"})]}),e[27]=h,e[28]=F):F=e[28];let M;e[29]!==N||e[30]!==i||e[31]!==m||e[32]!==p.length?(M=!m.trim()&&p.length===0||i||N,e[29]=N,e[30]=i,e[31]=m,e[32]=p.length,e[33]=M):M=e[33];let A;e[34]!==N||e[35]!==i?(A=i||N?(0,t.jsx)(Y,{size:16,className:"mx-auto animate-spin text-white"}):"Reply",e[34]=N,e[35]=i,e[36]=A):A=e[36];let L;e[37]!==x||e[38]!==M||e[39]!==A?(L=(0,t.jsx)(Is,{className:"min-w-[70px] !w-auto px-5 py-1.5 text-sm font-bold",onClick:x,disabled:M,children:A}),e[37]=x,e[38]=M,e[39]=A,e[40]=L):L=e[40];let D;e[41]!==F||e[42]!==L?(D=(0,t.jsxs)("div",{className:"mt-2 flex items-center justify-between border-t border-zinc-100 pt-3 dark:border-zinc-800",children:[F,L]}),e[41]=F,e[42]=L,e[43]=D):D=e[43];let T;e[44]!==n||e[45]!==R||e[46]!==D?(T=(0,t.jsxs)("div",{className:"flex-1",children:[n,R,D]}),e[44]=n,e[45]=R,e[46]=D,e[47]=T):T=e[47];let w;return e[48]!==T||e[49]!==y?(w=(0,t.jsx)("div",{className:"border-y border-zinc-100 bg-zinc-50/30 p-4 dark:border-zinc-800 dark:bg-zinc-900/10",children:(0,t.jsxs)("div",{className:"flex gap-3",children:[y,T]})}),e[48]=T,e[49]=y,e[50]=w):w=e[50],w},St=l.memo(Us),Os=G(),Ts=s=>{const e=(0,Os.c)(15),{file:a}=s;let m;e[0]===Symbol.for("react.memo_cache_sentinel")?(m=(0,t.jsx)("div",{className:"flex size-10 items-center justify-center rounded-xl bg-violet-100 text-violet-600 dark:bg-violet-900/30",children:(0,t.jsx)(Xt,{size:20})}),e[0]=m):m=e[0];let c;e[1]!==a.name?(c=(0,t.jsx)("div",{className:"truncate text-sm font-bold dark:text-white",children:a.name}),e[1]=a.name,e[2]=c):c=e[2];let x;e[3]!==a.size?(x=a.size!==void 0&&(0,t.jsxs)("div",{className:"text-xs uppercase text-zinc-500",children:[(a.size/1024/1024).toFixed(2)," MB"]}),e[3]=a.size,e[4]=x):x=e[4];let i;e[5]!==c||e[6]!==x?(i=(0,t.jsxs)("div",{className:"min-w-0 flex-1",children:[c,x]}),e[5]=c,e[6]=x,e[7]=i):i=e[7];let u;e[8]===Symbol.for("react.memo_cache_sentinel")?(u=(0,t.jsx)(Qt,{size:18}),e[8]=u):u=e[8];let b;e[9]!==a.name||e[10]!==a.url?(b=(0,t.jsx)("a",{href:a.url,download:a.name,className:"p-2 text-zinc-400 transition-colors hover:text-violet-600",onClick:Vs,children:u}),e[9]=a.name,e[10]=a.url,e[11]=b):b=e[11];let N;return e[12]!==i||e[13]!==b?(N=(0,t.jsxs)("div",{className:"group mt-3 flex items-center gap-3 rounded-2xl border border-zinc-100 bg-zinc-50/50 p-3 transition-colors hover:border-violet-500/30 dark:border-zinc-800 dark:bg-zinc-900/10",children:[m,i,b]}),e[12]=i,e[13]=b,e[14]=N):N=e[14],N},Ws=Ts;function Vs(s){return s.stopPropagation()}var Ca=G(),Bs=G(),qs=s=>{const e=(0,Bs.c)(30),{url:a}=s;let m,c;e[0]!==a?(m=["link-preview",a],c=()=>Ms(a),e[0]=a,e[1]=m,e[2]=c):(m=e[1],c=e[2]);const x=!!a;let i;e[3]!==m||e[4]!==c||e[5]!==x?(i={queryKey:m,queryFn:c,staleTime:864e5,enabled:x},e[3]=m,e[4]=c,e[5]=x,e[6]=i):i=e[6];const{data:u,isLoading:b,isError:N}=jt(i);if(b){let S;return e[7]===Symbol.for("react.memo_cache_sentinel")?(S=(0,t.jsx)("div",{className:"mt-3 flex h-24 animate-pulse items-center justify-center overflow-hidden rounded-2xl border border-zinc-100 bg-zinc-50 dark:border-zinc-800 dark:bg-zinc-900/50",children:(0,t.jsx)(tt,{className:"animate-spin text-zinc-300 dark:text-zinc-700",size:24})}),e[7]=S):S=e[7],S}if(N||!u||!u.title&&!u.image)return null;let j;e[8]!==u.image||e[9]!==u.title?(j=u.image&&(0,t.jsx)("div",{className:"aspect-[1.91/1] w-full overflow-hidden border-b border-zinc-100 bg-zinc-100 dark:border-zinc-800 dark:bg-zinc-900",children:(0,t.jsx)("img",{src:u.image,alt:u.title??void 0,className:"h-full w-full object-cover transition-transform duration-500 group-hover:scale-[1.02]",onError:Js})}),e[8]=u.image,e[9]=u.title,e[10]=j):j=e[10];let p;e[11]===Symbol.for("react.memo_cache_sentinel")?(p=(0,t.jsx)(tt,{size:12}),e[11]=p):p=e[11];let d;e[12]!==u.siteName?(d=(0,t.jsxs)("div",{className:"flex items-center gap-1.5 text-xs font-bold uppercase tracking-wider text-zinc-600",children:[p,(0,t.jsx)("span",{children:u.siteName})]}),e[12]=u.siteName,e[13]=d):d=e[13];let f;e[14]!==u.title?(f=(0,t.jsx)("div",{className:"line-clamp-2 text-[15px] font-bold leading-snug transition-colors group-hover:text-violet-700 dark:text-white",children:u.title}),e[14]=u.title,e[15]=f):f=e[15];let h;e[16]!==u.description?(h=u.description&&(0,t.jsx)("p",{className:"line-clamp-2 text-xs leading-relaxed text-zinc-600 dark:text-zinc-400",children:u.description}),e[16]=u.description,e[17]=h):h=e[17];let g;e[18]===Symbol.for("react.memo_cache_sentinel")?(g=(0,t.jsx)(Jt,{size:10}),e[18]=g):g=e[18];let k;e[19]!==a?(k=(0,t.jsxs)("div",{className:"flex items-center gap-1 pt-1 text-[11px] font-medium text-zinc-500",children:[g,(0,t.jsx)("span",{className:"truncate",children:a})]}),e[19]=a,e[20]=k):k=e[20];let C;e[21]!==k||e[22]!==d||e[23]!==f||e[24]!==h?(C=(0,t.jsxs)("div",{className:"space-y-1 p-3.5",children:[d,f,h,k]}),e[21]=k,e[22]=d,e[23]=f,e[24]=h,e[25]=C):C=e[25];let o;return e[26]!==C||e[27]!==j||e[28]!==a?(o=(0,t.jsxs)("a",{href:a,target:"_blank",rel:"noopener noreferrer",className:"group mt-3 flex flex-col overflow-hidden rounded-2xl border border-zinc-100 bg-white shadow-sm transition-all hover:bg-zinc-50 dark:border-zinc-800 dark:bg-zinc-950 dark:hover:bg-zinc-900",onClick:Hs,children:[j,C]}),e[26]=C,e[27]=j,e[28]=a,e[29]=o):o=e[29],o},pt=qs;function Hs(s){return s.stopPropagation()}function Js(s){return s.target.style.display="none"}var Gs=G(),Ks=s=>{const e=(0,Gs.c)(17),{src:a,poster:m}=s,c=(0,l.useRef)(null),{reportVisibility:x,unregister:i}=Ps(),{dataSaver:u}=_s(),b=(0,l.useId)();let N;e[0]===Symbol.for("react.memo_cache_sentinel")?(N={play:()=>{const S=c.current?.plyr;S&&(S.muted=!0,S.play().catch(Xs))},pause:()=>{c.current?.plyr?.pause()}},e[0]=N):N=e[0];const j=N;let p,d;e[1]!==u||e[2]!==b||e[3]!==x||e[4]!==i?(p=()=>{const S=new IntersectionObserver(I=>{const[n]=I;x(b,u?0:n.intersectionRatio,j)},{threshold:[0,.6]}),y=c.current?.elements?.container;return y&&S.observe(y),()=>{i(b),y&&S.unobserve(y)}},d=[b,x,i,j,u],e[1]=u,e[2]=b,e[3]=x,e[4]=i,e[5]=p,e[6]=d):(p=e[5],d=e[6]),(0,l.useEffect)(p,d);let f;e[7]!==a?(f=[{src:a,type:"video/mp4"}],e[7]=a,e[8]=f):f=e[8];let h;e[9]!==m||e[10]!==f?(h={type:"video",sources:f,poster:m},e[9]=m,e[10]=f,e[11]=h):h=e[11];let g;e[12]===Symbol.for("react.memo_cache_sentinel")?(g={controls:["play-large","play","progress","current-time","mute","volume","fullscreen"],settings:["quality","speed"],ratio:"16:9",clickToPlay:!0,hideControls:!0,resetOnEnd:!0},e[12]=g):g=e[12];let k;e[13]!==h?(k={source:h,options:g},e[13]=h,e[14]=k):k=e[14];const C=k;let o;return e[15]!==C?(o=(0,t.jsx)("div",{className:"w-full bg-black",onClick:Ys,children:(0,t.jsx)(zt,{ref:c,...C})}),e[15]=C,e[16]=o):o=e[16],o},Qs=Ks;function Xs(){}function Ys(s){return s.stopPropagation()}var Zs=G(),ea=s=>{const e=(0,Zs.c)(3),{items:a}=s,m=a===void 0?[]:a,{openLightbox:c}=ys();if(!m||Array.isArray(m)&&m.length===0)return null;const x=Array.isArray(m)?m:[m],i=x.filter(sa),u=x.filter(aa),b=f=>{const h=i.filter(ia).map(na),g=i[f];c(h,h.indexOf(g.url||g.src))},N="mt-2 space-y-2",j=i.length>0&&(0,t.jsx)("div",{className:`grid gap-2 overflow-hidden rounded-2xl border border-zinc-100 dark:border-zinc-800 ${i.length===1?"grid-cols-1":i.length===2?"aspect-[16/9] grid-cols-2":(i.length===3,"aspect-[16/9] grid-cols-2 grid-rows-2")}`,children:i.map((f,h)=>(0,t.jsx)("div",{className:`relative cursor-pointer overflow-hidden bg-zinc-100 dark:bg-zinc-900 ${i.length===3&&h===0?"row-span-2":""}
                                `,onClick:g=>{f.type==="image"&&(g.stopPropagation(),b(h))},children:f.type==="video"?(0,t.jsx)(Qs,{src:f.url,poster:f.poster||void 0}):(0,t.jsx)("img",{src:f.url||f.src,className:"size-full object-cover transition-transform duration-500 hover:scale-[1.02]",alt:"",loading:"lazy"})},h))}),p=u.map(la);let d;return e[0]!==j||e[1]!==p?(d=(0,t.jsxs)("div",{className:N,children:[j,p]}),e[0]=j,e[1]=p,e[2]=d):d=e[2],d},ta=ea;function sa(s){return s.type==="image"||s.type==="video"}function aa(s){return s.type==="file"}function ia(s){return s.type==="image"}function na(s){return s.url||s.src}function la(s,e){return(0,t.jsx)(Ws,{file:s},e)}var ra=G(),oa=s=>{const e=(0,ra.c)(18),{poll:a,onVote:m}=s,c=a.options.reduce(ca,0),[x,i]=(0,l.useState)(null);let u;e[0]!==m||e[1]!==x?(u=h=>{x||(i(h),m&&m(h))},e[0]=m,e[1]=x,e[2]=u):u=e[2];const b=u;let N;if(e[3]!==b||e[4]!==a.options||e[5]!==c||e[6]!==x){let h;e[8]!==b||e[9]!==c||e[10]!==x?(h=(g,k)=>{const C=c>0?Math.round((g.votes+(x===g.id?1:0))/(c+(x?1:0))*100):0,o=x===g.id;return(0,t.jsxs)("div",{onClick:S=>{S.stopPropagation(),b(g.id)},className:`relative h-10 w-full overflow-hidden rounded-xl border cursor-pointer ${o?"border-violet-500 dark:border-violet-500":"border-zinc-200 dark:border-zinc-700"}`,children:[x&&(0,t.jsx)("div",{className:"absolute left-0 top-0 h-full bg-zinc-200 transition-all duration-500 dark:bg-zinc-800",style:{width:`${C}%`}}),(0,t.jsxs)("div",{className:"absolute inset-0 z-10 flex items-center justify-between px-4",children:[(0,t.jsxs)("span",{className:`text-sm font-medium ${o?"font-bold text-violet-600":"text-zinc-700 dark:text-zinc-200"}`,children:[g.text," ",o&&(0,t.jsx)(Ht,{size:14,className:"mb-0.5 inline ml-1"})]}),x&&(0,t.jsxs)("span",{className:"text-sm font-bold text-zinc-900 dark:text-white",children:[C,"%"]})]})]},g.id||k)},e[8]=b,e[9]=c,e[10]=x,e[11]=h):h=e[11],N=a.options.map(h),e[3]=b,e[4]=a.options,e[5]=c,e[6]=x,e[7]=N}else N=e[7];const j=c+(x?1:0),p=x?"6 days left":"Click to vote";let d;e[12]!==j||e[13]!==p?(d=(0,t.jsxs)("div",{className:"pl-1 text-xs text-zinc-500 dark:text-zinc-400",children:[j," votes •"," ",p]}),e[12]=j,e[13]=p,e[14]=d):d=e[14];let f;return e[15]!==N||e[16]!==d?(f=(0,t.jsxs)("div",{className:"mt-3 space-y-2",children:[N,d]}),e[15]=N,e[16]=d,e[17]=f):f=e[17],f},ft=oa;function ca(s,e){return s+e.votes}var $e=({id:s,user:e,timeAgo:a,content:m,contentClass:c,media:x,quotedPost:i,stats:u,onClick:b,repostedBy:N,onUserClick:j,currentUser:p,showToast:d,poll:f,isDetail:h,initialComments:g,onDelete:k,onUpdate:C,isComment:o,onReply:S,community:y,parent_id:I,post_id:n})=>{const R=Fe(),{liked:E,reposted:W,localStats:F,setLocalStats:M,handleLike:A,handleRepost:L}=As(s,u,p,d||(()=>{})),{data:D=[]}=jt({queryKey:["post",s,"commenters",o?"comment":"post"],queryFn:async()=>{const r=o?n:s;return r?(await fe(r,null,3,o?s:null)).map(z=>z.user):[]},enabled:js(s)&&F.comments>0&&(o?!!n:!0),staleTime:1e3*60*5}),{deletePost:T,updatePost:w}=ws(),[v,_]=(0,l.useState)(g||[]),[V,K]=(0,l.useState)(""),[se,Re]=(0,l.useState)(!1),[Ft,Ie]=(0,l.useState)(!1),[Me,Ae]=(0,l.useState)(!1),[Pt,Le]=(0,l.useState)(!0),[be,Ee]=(0,l.useState)([]),[_t,De]=(0,l.useState)(!1),[Ue,re]=(0,l.useState)(!1),[je,oe]=(0,l.useState)(!1),[Q,Oe]=(0,l.useState)(m),[ae,Te]=(0,l.useState)(x||[]),[ce,de]=(0,l.useState)([]),[We,Ve]=(0,l.useState)(!1),[me,Rt]=(0,l.useState)(!1),[It,ve]=(0,l.useState)(!1),[ze,xe]=(0,l.useState)(null),[Be,qe]=(0,l.useState)(!1),[Mt,Ne]=(0,l.useState)([]),[At,He]=(0,l.useState)(!1),Je=(0,l.useRef)(null),Ge=(0,l.useRef)(v);(0,l.useEffect)(()=>{Ge.current=v},[v]);const Lt=(0,l.useCallback)(async()=>{if(!(!s||!n||F.comments===0)){He(!0);try{Ne(await fe(n,null,10,s)),qe(!0)}catch(r){console.error("Failed to load replies:",r)}finally{He(!1)}}},[s,n,F.comments]),Et=async()=>{const r=JSON.stringify(ae)!==JSON.stringify(x||[])||ce.length>0;if(!Q.trim()||Q===m&&!r){oe(!1);return}Ve(!0);try{const z=[];for(const P of ce){const U=await Ce(P);z.push(U)}const $=[...ae,...z];o?await ps(s,{content:Q,media:$}):await w(s,{content:Q,media:$}),de([]),oe(!1),d&&d(`${o?"Comment":"Post"} updated`),C&&C(s,Q,$)}catch(z){console.error(`Failed to update ${o?"comment":"post"}:`,z),d&&d(`Failed to update ${o?"comment":"post"}`)}finally{Ve(!1)}},Ke=async r=>{r&&r.stopPropagation();try{o?await gs(s):await T(s),d&&d(`${o?"Comment":"Post"} deleted successfully`),k&&k(s)}catch(z){console.error(`Failed to delete ${o?"comment":"post"}:`,z),d&&d(`Failed to delete ${o?"comment":"post"}`)}finally{re(!1)}},ue=(0,l.useCallback)(async(r=!1)=>{if(s){r?Ae(!0):Re(!0);try{const z=Ge.current,$=await fe(s,r&&z.length>0?z[z.length-1].created_at:null,10);$.length<10?Le(!1):Le(!0),_(r?P=>[...P,...$]:$)}catch(z){console.error("Failed to load comments:",z)}finally{Re(!1),Ae(!1)}}},[s]);(0,l.useEffect)(()=>{h&&s&&ue()},[h,s,ue]);const Dt=async r=>{if(r.preventDefault(),!(!V.trim()&&be.length===0||!p)){Ie(!0),De(!0);try{const z=[];for(const $ of be){const P=await Ce($);z.push(P)}await Nt(s,p.id,V,z,ze?.id),K(""),Ee([]),xe(null),M($=>({...$,comments:($.comments||0)+1})),d&&d("Reply posted!"),ue()}catch(z){console.error("Failed to post comment:",z),d&&d("Failed to post reply.")}finally{Ie(!1),De(!1)}}},Qe=({trigger:r})=>(0,t.jsxs)(zs,{children:[(0,t.jsx)(fs,{asChild:!0,onClick:z=>z.stopPropagation(),children:r}),(0,t.jsxs)(hs,{align:"end",className:"w-48 rounded-xl border-zinc-100 bg-white dark:border-zinc-800 dark:bg-zinc-900",children:[(0,t.jsxs)(it,{children:[!o&&(0,t.jsxs)(ie,{className:"cursor-pointer gap-2 py-2.5",onClick:z=>{z.stopPropagation(),navigator.clipboard.writeText(`${window.location.origin}/post/${s}`),d&&d("Link copied")},children:[(0,t.jsx)(Bt,{size:16}),(0,t.jsx)("span",{children:"Copy link"})]}),!o&&(0,t.jsxs)(ie,{className:"cursor-pointer gap-2 py-2.5",onClick:z=>{z.stopPropagation(),d&&d("Post reported")},children:[(0,t.jsx)(qt,{size:16}),(0,t.jsx)("span",{children:"Report post"})]}),!ke&&(0,t.jsxs)(ie,{className:"cursor-pointer gap-2 py-2.5",onClick:z=>{z.stopPropagation(),d&&d("User blocked")},children:[(0,t.jsx)(ss,{size:16}),(0,t.jsxs)("span",{children:["Block @",e.handle]})]}),ke&&(0,t.jsxs)(ie,{onClick:z=>{z.stopPropagation(),oe(!0)},className:"cursor-pointer gap-2 py-2.5",children:[(0,t.jsx)(ns,{size:16}),"Edit Post"]})]}),ke&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(us,{}),(0,t.jsx)(it,{children:(0,t.jsxs)(ie,{variant:"destructive",className:"cursor-pointer gap-2 py-2.5",onClick:z=>{z.stopPropagation(),re(!0)},children:[(0,t.jsx)(Kt,{size:16}),(0,t.jsx)("span",{children:"Delete post"})]})})]})]})]}),ke=p?.handle===e.handle,Xe=r=>{if(!r)return null;const z=je?ae:r;return!z||Array.isArray(z)&&z.length===0?null:je?(0,t.jsxs)("div",{className:"mt-3 space-y-3",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2 sm:grid-cols-3",children:[ae.map(($,P)=>(0,t.jsxs)("div",{className:"group relative aspect-square overflow-hidden rounded-xl border border-zinc-200 dark:border-zinc-800",children:[$.type==="video"?(0,t.jsx)("div",{className:"flex size-full items-center justify-center bg-zinc-100 dark:bg-zinc-900",children:(0,t.jsx)(et,{size:24,className:"text-zinc-400"})}):(0,t.jsx)("img",{src:$.url||$.src,className:"size-full object-cover",alt:""}),(0,t.jsx)("button",{onClick:U=>{U.stopPropagation(),Te(O=>O.filter((Z,B)=>B!==P))},className:"absolute right-1.5 top-1.5 flex size-7 items-center justify-center rounded-full bg-black/60 text-white transition-colors hover:bg-black",children:(0,t.jsx)(ne,{size:16})})]},`old-${P}`)),ce.map(($,P)=>(0,t.jsxs)("div",{className:"group relative aspect-square overflow-hidden rounded-xl border-2 border-dashed border-violet-500 bg-violet-50/10",children:[$.type.startsWith("image/")?(0,t.jsx)("img",{src:URL.createObjectURL($),className:"size-full object-cover",alt:""}):(0,t.jsx)("div",{className:"flex size-full items-center justify-center",children:(0,t.jsx)(et,{size:24,className:"animate-pulse text-violet-500"})}),(0,t.jsx)("button",{onClick:U=>{U.stopPropagation(),de(O=>O.filter((Z,B)=>B!==P))},className:"absolute right-1.5 top-1.5 flex size-7 items-center justify-center rounded-full bg-black/60 text-white transition-colors hover:bg-black",children:(0,t.jsx)(ne,{size:16})}),(0,t.jsx)("div",{className:"absolute bottom-1 left-1 rounded bg-violet-600 px-1 text-[8px] font-bold text-white",children:"NEW"})]},`new-${P}`)),ae.length+ce.length<4&&(0,t.jsxs)("button",{onClick:$=>{$.stopPropagation(),Je.current?.click()},className:"relative flex aspect-square flex-col items-center justify-center gap-1 rounded-xl border-2 border-dashed border-zinc-200 text-zinc-400 transition-all hover:border-violet-500 hover:bg-violet-50/5 hover:text-violet-500 dark:border-zinc-800",children:[(0,t.jsx)(is,{size:20}),(0,t.jsx)("span",{className:"text-[10px] font-bold",children:"Add Media"})]})]}),(0,t.jsx)("input",{type:"file",ref:Je,onChange:$=>{if($.target.files){const P=Array.from($.target.files);de(U=>[...U,...P])}},multiple:!0,className:"hidden",accept:"image/*,video/*"})]}):l.isValidElement(z)?z:(0,t.jsx)(ta,{items:z})},Ye=(r,z)=>{const $=typeof r=="string"&&Ns(r);if(je)return(0,t.jsxs)("div",{className:"mt-2 flex flex-col gap-2",onClick:P=>P.stopPropagation(),children:[(0,t.jsx)(Cs,{value:Q,onChange:P=>Oe(P.target.value),className:`min-h-[100px] w-full rounded-xl border-zinc-200 bg-zinc-50 focus:ring-violet-500 dark:border-zinc-800 dark:bg-zinc-900 ${$?"font-bangla text-lg":"font-english"}`,autoFocus:!0}),(0,t.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,t.jsx)("button",{onClick:()=>{oe(!1),Oe(m),Te(x||[]),de([])},className:"px-4 py-1.5 text-sm font-bold text-zinc-500 transition-colors hover:text-zinc-700 dark:hover:text-zinc-300",children:"Cancel"}),(0,t.jsx)("button",{onClick:Et,disabled:We||!Q.trim()||Q===m,className:"rounded-full bg-violet-600 px-4 py-1.5 text-sm font-bold text-white transition-all hover:bg-violet-700 disabled:opacity-50 active:scale-95",children:We?"Saving...":"Save"})]})]});if(typeof r=="string"){const P=!h&&r.length>280,U=P&&!me?r.substring(0,280):r;return(0,t.jsxs)("div",{className:`whitespace-pre-line ${z||""} ${$?"font-bangla text-[1.15em] leading-relaxed":"font-english text-[1.05em]"}`,children:[(0,t.jsx)(Pe,{options:{..._e,render:({attributes:O,content:Z})=>{const{href:B,...ee}=O,Ze=window.location.origin;if(B.includes("internal.tag/")){const te=decodeURIComponent(B.split("internal.tag/")[1]);return(0,t.jsxs)("span",{...ee,className:le("cursor-pointer font-bold text-rose-600 hover:underline dark:text-rose-400 font-bangla",ee.className),onClick:Ot=>{Ot.stopPropagation(),R(`/tags/${te}`)},children:["#",te]},Z)}let he=null;return B.startsWith("/")?he=B:B.startsWith(Ze)&&(he=B.replace(Ze,"")),he?(0,t.jsx)("span",{...ee,className:le("cursor-pointer font-medium text-violet-600 hover:underline dark:text-violet-400",ee.className),onClick:te=>{te.stopPropagation(),R(he)},children:Z},Z):(0,t.jsx)("a",{href:B,...ee,target:"_blank",rel:"noopener noreferrer",className:le("text-violet-600 hover:underline dark:text-violet-400",ee.className),onClick:te=>te.stopPropagation(),children:Z},Z)}},children:typeof U=="string"?U.replace(/#([\u0980-\u09FF\w]+)/g,"https://internal.tag/$1"):U}),P&&!me&&"...",P&&(0,t.jsx)("button",{onClick:O=>{O.stopPropagation(),Rt(!me)},className:"ml-1 cursor-pointer font-bold text-rose-600 hover:underline dark:text-rose-400",children:me?"Show less":"See more"})]})}return r},Ut=(r,z)=>{xe(z?{handle:r,id:o?I||s:z}:null),K($=>{const P=`@${r} `;return $.includes(P)?$:P+$}),document.getElementById("comment-input")?.focus()};return h?(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsxs)("article",{className:"p-5 dark:bg-black",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex items-start gap-x-3",children:[(0,t.jsx)("button",{className:"shrink-0",onClick:()=>j&&j(e.handle),children:(0,t.jsxs)(H,{className:"size-12 border border-zinc-200 dark:border-zinc-700",children:[(0,t.jsx)(J,{src:e.avatar,alt:e.handle,className:"object-cover"}),(0,t.jsx)(q,{children:e.handle[0]?.toUpperCase()})]})}),(0,t.jsxs)("div",{className:"flex min-w-0 flex-1 flex-col",children:[(0,t.jsx)("div",{className:"flex flex-wrap items-center gap-x-1.5 leading-none",children:(0,t.jsxs)("div",{className:"flex min-w-0 max-w-full items-center gap-1.5",children:[(0,t.jsxs)("button",{className:"flex shrink-0 items-center gap-1 text-base font-bold text-zinc-900 hover:underline sm:text-lg dark:text-white",onClick:()=>j&&j(e.handle),children:[(0,t.jsx)("span",{className:"max-w-[200px] truncate sm:max-w-none",children:e.handle}),e.verified&&(0,t.jsx)(ot,{size:16,className:"text-blue-500"})]}),y&&(0,t.jsxs)("div",{className:"flex min-w-0 items-center gap-1 text-zinc-500",children:[(0,t.jsx)(dt,{size:14,className:"shrink-0 text-zinc-400"}),(0,t.jsxs)("button",{className:"flex items-center gap-1 text-[14px] font-bold text-zinc-900 hover:underline sm:text-[15px] dark:text-zinc-100",onClick:r=>{r.stopPropagation(),R(`/c/${y.handle}`)},children:[(0,t.jsxs)(H,{className:"size-4 shrink-0 border border-zinc-200 bg-zinc-100 dark:border-zinc-700 dark:bg-zinc-800",children:[(0,t.jsx)(J,{src:y.avatar,alt:y.name,className:"object-cover"}),(0,t.jsx)(q,{className:"text-[8px] font-bold text-zinc-500",children:y.name?.[0]?.toUpperCase()})]}),(0,t.jsx)("span",{className:"max-w-[200px] truncate sm:max-w-none",children:y.name})]})]})]})}),(0,t.jsxs)("span",{className:"text-xs font-medium text-zinc-500 sm:text-sm dark:text-zinc-400",children:["@",e.handle]})]})]}),(0,t.jsxs)("div",{className:"-mt-1 flex items-center gap-2",children:[(0,t.jsx)("span",{className:"whitespace-nowrap text-[13px] text-zinc-500 sm:text-sm dark:text-zinc-400",children:a||"Recent"}),(0,t.jsx)(Qe,{trigger:(0,t.jsx)("button",{"aria-label":"More options",className:"rounded-full p-2 text-zinc-500 transition-colors hover:bg-zinc-100 dark:hover:bg-zinc-800",children:(0,t.jsx)(we,{size:20})})})]})]}),(0,t.jsx)("div",{className:"mt-4 whitespace-pre-line break-words text-lg leading-relaxed text-zinc-900 sm:text-xl sm:leading-8 dark:text-zinc-100",children:Ye(m,c)}),pe(m)&&(0,t.jsx)(pt,{url:pe(m)}),Xe(x),f&&(0,t.jsx)(ft,{poll:f}),i&&(0,t.jsx)("div",{className:"mt-4 overflow-hidden rounded-2xl border border-zinc-200 shadow-sm dark:border-zinc-700",children:(0,t.jsx)(gt,{...i})}),(0,t.jsxs)("div",{className:"mt-4 flex items-center gap-x-6 border-b border-zinc-100 pb-4 text-sm text-zinc-500 dark:border-zinc-800 dark:text-zinc-400",children:[(0,t.jsxs)("div",{className:"flex items-center gap-x-1",children:[(0,t.jsx)("span",{className:"font-bold text-black dark:text-white",children:F.likes||0})," ",(0,t.jsx)("span",{className:"opacity-70",children:"Likes"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-x-1",children:[(0,t.jsx)("span",{className:"font-bold text-black dark:text-white",children:F.comments||0})," ",(0,t.jsx)("span",{className:"opacity-70",children:"Comments"})]})]}),(0,t.jsxs)("div",{className:"mt-4 flex w-full items-center justify-around py-1",children:[(0,t.jsx)(X,{icon:ge,label:"Like",onClick:A,active:E,activeColorClass:"text-rose-500"}),!o&&(0,t.jsx)(X,{icon:ye,label:"Repost",onClick:L,active:W,activeColorClass:"text-emerald-500"}),(0,t.jsx)(X,{icon:yt,label:"Comment",onClick:()=>document.getElementById("comment-input")?.focus()}),!o&&(0,t.jsx)(X,{icon:Se,label:"Share",onClick:()=>ve(!0)})]})]}),ze&&(0,t.jsxs)("div",{className:"flex items-center justify-between bg-zinc-50 px-5 py-2 dark:bg-zinc-900/50",children:[(0,t.jsxs)("span",{className:"text-sm text-zinc-500",children:["Replying to ",(0,t.jsxs)("span",{className:"font-bold text-violet-600",children:["@",ze.handle]})]}),(0,t.jsx)("button",{onClick:()=>xe(null),className:"text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-200",children:(0,t.jsx)(ne,{size:16})})]}),(0,t.jsx)(St,{currentUser:p,newComment:V,setNewComment:K,handleSubmitComment:Dt,loading:Ft,selectedFiles:be,setSelectedFiles:Ee,isUploading:_t}),(0,t.jsx)("div",{className:"divide-y divide-zinc-100 dark:divide-zinc-800",children:se?(0,t.jsx)("div",{className:"flex justify-center p-8",children:(0,t.jsx)(Y,{className:"animate-spin text-violet-500"})}):(0,t.jsxs)(t.Fragment,{children:[Pt&&v.length>0&&(0,t.jsxs)("button",{onClick:()=>ue(!0),disabled:Me,className:"flex w-full items-center justify-center gap-2 py-3 text-sm font-bold text-violet-600 transition-colors hover:bg-zinc-50 dark:hover:bg-zinc-900",children:[Me&&(0,t.jsx)(Y,{size:14,className:"animate-spin"}),"View more replies"]}),v.map(r=>(0,t.jsx)($e,{...r,isComment:!0,post_id:s,onReply:Ut,onUserClick:j,currentUser:p,showToast:d,onDelete:z=>_($=>$.filter(P=>P.id!==z)),onUpdate:(z,$,P)=>_(U=>U.map(O=>O.id===z?{...O,content:$,media:P}:O)),stats:{likes:r.stats?.likes||0,comments:r.stats?.comments||0,reposts:r.stats?.reposts||0},timeAgo:r.timeAgo||r.created_at},r.id))]})}),(0,t.jsx)(ht,{open:Ue,onOpenChange:re,children:(0,t.jsxs)(rt,{onClick:r=>r.stopPropagation(),children:[(0,t.jsxs)(ut,{children:[(0,t.jsx)(lt,{children:"Are you absolutely sure?"}),(0,t.jsx)(nt,{children:"This action cannot be undone. This will permanently delete your post and all its comments."})]}),(0,t.jsxs)(mt,{children:[(0,t.jsx)(xt,{onClick:r=>r.stopPropagation(),children:"Cancel"}),(0,t.jsx)(ct,{onClick:Ke,className:"bg-rose-500 hover:bg-rose-600",children:"Delete"})]})]})})]}):(0,t.jsxs)("article",{onClick:b,className:`px-4 transition-all ${o?"py-2 bg-transparent hover:bg-zinc-50/30 dark:hover:bg-zinc-800/20":"py-4 border-b border-zinc-100 bg-white hover:bg-zinc-50/30 dark:border-zinc-800 dark:bg-black dark:hover:bg-white/[0.02]"} ${b?"cursor-pointer":""}`,children:[N&&(0,t.jsxs)("div",{className:"mb-2 ml-1 flex items-center space-x-1.5 text-[13px] font-semibold text-zinc-600",children:[(0,t.jsx)(ye,{size:14,className:"text-zinc-500"}),(0,t.jsxs)("span",{className:"flex cursor-pointer items-center text-zinc-700 hover:underline dark:text-zinc-300",onClick:r=>{r.stopPropagation(),j&&j(N.handle)},children:[N.handle," Reposted"]})]}),(0,t.jsxs)("div",{className:"flex items-start gap-x-3",children:[(0,t.jsxs)("div",{className:"flex shrink-0 flex-col items-center self-stretch py-0.5",children:[(0,t.jsx)("div",{className:"cursor-pointer",onClick:r=>{r.stopPropagation(),j&&j(e.handle)},children:(0,t.jsxs)(H,{className:`${o?"size-8":"size-10"} border-0 shadow-sm`,children:[(0,t.jsx)(J,{src:e.avatar,alt:e.handle,className:"object-cover"}),(0,t.jsx)(q,{className:"text-xs",children:e.handle[0]?.toUpperCase()})]})}),!o&&(0,t.jsx)("div",{className:`mt-2 w-0.5 flex-1 rounded-full bg-zinc-100 dark:bg-zinc-800 ${F.comments>0?"mb-1.5":""}`}),!o&&F.comments>0&&(0,t.jsx)("div",{className:"relative mb-2 mt-auto flex h-7 w-9 items-center justify-center",children:D.length>0?(0,t.jsxs)("div",{className:"relative h-full w-full",children:[(0,t.jsxs)(H,{className:"absolute top-0 left-1/2 -translate-x-1/2 z-20 size-[14px] border border-white dark:border-black shadow-sm",children:[(0,t.jsx)(J,{src:D[0]?.avatar,className:"object-cover"}),(0,t.jsx)(q,{className:"text-[5px] font-bold",children:D[0]?.handle?.[0]?.toUpperCase()})]}),D.length>1&&(0,t.jsxs)(H,{className:"absolute bottom-0 left-1 z-10 size-[16px] border-[1.5px] border-white dark:border-black shadow-sm",children:[(0,t.jsx)(J,{src:D[1]?.avatar,className:"object-cover"}),(0,t.jsx)(q,{className:"text-[6px] font-bold",children:D[1]?.handle?.[0]?.toUpperCase()})]}),D.length>2&&(0,t.jsxs)(H,{className:"absolute bottom-1 right-1 z-10 size-3 border border-white dark:border-black shadow-sm",children:[(0,t.jsx)(J,{src:D[2]?.avatar,className:"object-cover"}),(0,t.jsx)(q,{className:"text-[5px] font-bold",children:D[2]?.handle?.[0]?.toUpperCase()})]})]}):(0,t.jsxs)("div",{className:"relative h-full w-full opacity-40",children:[(0,t.jsx)("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 size-3 rounded-full bg-zinc-300 dark:bg-zinc-700"}),(0,t.jsx)("div",{className:"absolute bottom-0 left-1 size-3.5 rounded-full bg-zinc-400 dark:bg-zinc-600"}),(0,t.jsx)("div",{className:"absolute bottom-1 right-1 size-2.5 rounded-full bg-zinc-200 dark:bg-zinc-800"})]})})]}),(0,t.jsxs)("div",{className:"flex min-w-0 flex-1 flex-col",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("div",{className:"flex flex-wrap items-center gap-x-1.5 leading-none",children:(0,t.jsxs)("div",{className:"flex min-w-0 max-w-full items-center gap-1.5",children:[(0,t.jsxs)("button",{className:`flex shrink-0 items-center gap-1 ${o?"text-[14px]":"text-[15px]"} font-bold text-zinc-900 hover:underline dark:text-white`,onClick:r=>{r.stopPropagation(),j&&j(e.handle)},children:[(0,t.jsx)("span",{className:"max-w-[150px] truncate sm:max-w-none",children:e.handle}),e.verified&&(0,t.jsx)(ot,{size:o?12:14,className:"text-blue-500"})]}),y&&(0,t.jsxs)("div",{className:"flex min-w-0 items-center gap-1 text-zinc-500",children:[(0,t.jsx)(dt,{size:12,className:"shrink-0 text-zinc-400"}),(0,t.jsxs)("button",{className:"flex items-center gap-1 text-[13px] font-bold text-zinc-900 hover:underline dark:text-zinc-100",onClick:r=>{r.stopPropagation(),R(`/c/${y.handle}`)},children:[(0,t.jsxs)(H,{className:"size-3.5 shrink-0 border border-zinc-200 bg-zinc-100 dark:border-zinc-700 dark:bg-zinc-800",children:[(0,t.jsx)(J,{src:y.avatar,alt:y.name,className:"object-cover"}),(0,t.jsx)(q,{className:"text-[6px] font-bold text-zinc-500",children:y.name?.[0]?.toUpperCase()})]}),(0,t.jsx)("span",{className:"max-w-[150px] truncate sm:max-w-none",children:y.name})]})]})]})}),(0,t.jsxs)("div",{className:"-mt-1 flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-[12px] text-zinc-500 dark:text-zinc-400",children:a||"Recent"}),(0,t.jsx)(Qe,{trigger:(0,t.jsx)("button",{"aria-label":"More options",className:"rounded-full p-2 text-zinc-500 transition-colors hover:bg-zinc-100 group-hover:bg-zinc-100 dark:hover:bg-zinc-800 dark:group-hover:bg-zinc-800/50",children:(0,t.jsx)(we,{size:18})})})]})]}),(0,t.jsx)("div",{className:"mt-0.5 whitespace-pre-line break-words text-[15px] leading-relaxed text-zinc-900 dark:text-zinc-100",children:Ye(m,c)}),pe(m)&&(0,t.jsx)(pt,{url:pe(m)}),Xe(x),f&&(0,t.jsx)(ft,{poll:f}),i&&(0,t.jsx)("div",{className:"mt-3 overflow-hidden rounded-2xl border border-zinc-200 shadow-sm transition-all hover:bg-zinc-50 dark:border-zinc-800 dark:hover:bg-zinc-900",onClick:r=>{r.stopPropagation(),R(`/post/${i.id}`)},children:(0,t.jsx)(gt,{...i})}),(0,t.jsxs)("div",{className:`flex items-center gap-x-1 ${o?"mt-1.5":"mt-3"}`,children:[(0,t.jsx)(X,{icon:ge,size:o?16:18,onClick:A,active:E,activeColorClass:"text-rose-500"}),(0,t.jsx)(X,{icon:vt,size:o?16:18,onClick:r=>{r?.stopPropagation(),S?S(e.handle,s):b&&b()}}),(0,t.jsx)(X,{icon:ye,size:o?16:18,onClick:L,active:W,activeColorClass:"text-emerald-500"}),!o&&(0,t.jsx)(X,{icon:Se,onClick:r=>{r?.stopPropagation(),ve(!0)}})]}),(F.comments>0||F.likes>0)&&(0,t.jsxs)("div",{className:`mt-1 flex items-center gap-x-1.5 px-0.5 ${o?"text-[12px]":"text-[14px]"} font-medium text-zinc-500 dark:text-zinc-400`,children:[F.comments>0&&(0,t.jsxs)("button",{className:"hover:underline",onClick:r=>{r.stopPropagation(),Be?qe(!1):Lt()},children:[F.comments," ",F.comments===1?"reply":"replies"]}),F.comments>0&&F.likes>0&&(0,t.jsx)("span",{className:"opacity-50",children:"·"}),F.likes>0&&(0,t.jsxs)("button",{className:"hover:underline",children:[F.likes," ",F.likes===1?"like":"likes"]})]}),Be&&(0,t.jsxs)("div",{className:"relative mt-2 space-y-0",children:[(0,t.jsx)("div",{className:"absolute left-[19px] top-0 bottom-4 w-0.5 bg-zinc-100 dark:bg-zinc-800"}),At?(0,t.jsx)("div",{className:"flex py-4 pl-12",children:(0,t.jsx)(Y,{size:18,className:"animate-spin text-violet-500"})}):(0,t.jsx)("div",{className:"flex flex-col",children:Mt.map(r=>(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"absolute left-[19px] top-5 h-0.5 w-4 bg-zinc-100 dark:bg-zinc-800"}),(0,t.jsx)("div",{className:"pl-6",children:(0,t.jsx)($e,{...r,isComment:!0,post_id:n,onReply:S,onUserClick:j,currentUser:p,showToast:d,onDelete:z=>Ne($=>$.filter(P=>P.id!==z)),onUpdate:(z,$,P)=>Ne(U=>U.map(O=>O.id===z?{...O,content:$,media:P}:O)),stats:{likes:r.stats?.likes||0,comments:r.stats?.comments||0,reposts:r.stats?.reposts||0},timeAgo:r.timeAgo||r.created_at})})]},r.id))})]})]})]}),(0,t.jsx)($t,{isOpen:It,onClose:()=>ve(!1),url:`${window.location.origin}/post/${s}`,title:"Share Post"}),(0,t.jsx)(ht,{open:Ue,onOpenChange:re,children:(0,t.jsxs)(rt,{onClick:r=>r.stopPropagation(),children:[(0,t.jsxs)(ut,{children:[(0,t.jsx)(lt,{children:"Are you absolutely sure?"}),(0,t.jsx)(nt,{children:"This action cannot be undone. This will permanently delete your post and all its comments."})]}),(0,t.jsxs)(mt,{children:[(0,t.jsx)(xt,{onClick:r=>r.stopPropagation(),children:"Cancel"}),(0,t.jsx)(ct,{onClick:Ke,className:"bg-rose-500 hover:bg-rose-600",children:"Delete"})]})]})})]})};function da(s,e){return s.id===e.id&&s.content===e.content&&s.timeAgo===e.timeAgo&&s.user.id===e.user.id&&s.user.avatar===e.user.avatar&&s.stats.likes===e.stats.likes&&s.stats.comments===e.stats.comments&&s.stats.reposts===e.stats.reposts&&s.currentUser?.id===e.currentUser?.id&&JSON.stringify(s.media)===JSON.stringify(e.media)&&JSON.stringify(s.repostedBy)===JSON.stringify(e.repostedBy)}var ma=l.memo($e,da),xa=G(),ua=s=>{const e=(0,xa.c)(30),{user:a,time:m,content:c}=s,x=Fe();let i;e[0]!==a.avatar||e[1]!==a.handle?(i=(0,t.jsx)(J,{src:a.avatar,alt:a.handle}),e[0]=a.avatar,e[1]=a.handle,e[2]=i):i=e[2];let u;e[3]!==a.handle[0]?(u=a.handle[0]?.toUpperCase(),e[3]=a.handle[0],e[4]=u):u=e[4];let b;e[5]!==u?(b=(0,t.jsx)(q,{children:u}),e[5]=u,e[6]=b):b=e[6];let N;e[7]!==i||e[8]!==b?(N=(0,t.jsxs)(H,{className:"size-6",children:[i,b]}),e[7]=i,e[8]=b,e[9]=N):N=e[9];let j;e[10]!==a.handle?(j=(0,t.jsx)("span",{className:"text-sm font-semibold",children:a.handle}),e[10]=a.handle,e[11]=j):j=e[11];let p;e[12]!==N||e[13]!==j?(p=(0,t.jsxs)("div",{className:"flex items-center gap-x-2",children:[N,j]}),e[12]=N,e[13]=j,e[14]=p):p=e[14];let d;e[15]!==m?(d=(0,t.jsx)("span",{className:"text-xs text-zinc-500 sm:text-sm",children:m}),e[15]=m,e[16]=d):d=e[16];let f;e[17]!==p||e[18]!==d?(f=(0,t.jsxs)("div",{className:"mb-2 flex items-center justify-between gap-x-2",children:[p,d]}),e[17]=p,e[18]=d,e[19]=f):f=e[19];let h;e[20]!==x?(h={..._e,render:o=>{const{attributes:S,content:y}=o,{href:I,...n}=S,R=window.location.origin;let E=null;return I.startsWith("/")?E=I:I.startsWith(R)&&(E=I.replace(R,"")),E?(0,t.jsx)("span",{...n,className:le("cursor-pointer font-medium text-violet-600 hover:underline dark:text-violet-400",n.className),onClick:W=>{W.stopPropagation(),x(E)},children:y},y):(0,t.jsx)("a",{href:I,...n,target:"_blank",rel:"noopener noreferrer",className:le("text-violet-600 hover:underline dark:text-violet-400",n.className),onClick:ha,children:y},y)}},e[20]=x,e[21]=h):h=e[21];let g;e[22]!==c?(g=(0,t.jsx)("p",{className:"whitespace-pre-line text-sm text-zinc-800 dark:text-zinc-300",children:c}),e[22]=c,e[23]=g):g=e[23];let k;e[24]!==g||e[25]!==h?(k=(0,t.jsx)(Pe,{options:h,children:g}),e[24]=g,e[25]=h,e[26]=k):k=e[26];let C;return e[27]!==k||e[28]!==f?(C=(0,t.jsxs)("div",{className:"p-4",children:[f,k]}),e[27]=k,e[28]=f,e[29]=C):C=e[29],C},gt=ua;function ha(s){return s.stopPropagation()}var pa=l.memo(({reel:s,isActive:e,isMuted:a})=>{const m=Fe(),{currentUser:c}=wt(),{addToast:x}=Ct(),i=(0,l.useRef)(null),[u,b]=(0,l.useState)(!1),[N,j]=(0,l.useState)(!1),[p,d]=(0,l.useState)(!1),[f,h]=(0,l.useState)(null),[g,k]=(0,l.useState)(!1),[C,o]=(0,l.useState)(s.stats?.likes||0),[S,y]=(0,l.useState)(!1),[I,n]=(0,l.useState)(0),R=(0,l.useRef)(null),E=(0,l.useMemo)(()=>Array.isArray(s.media)?s.media[0]?.src||s.media[0]?.url:s.media?.src||s.media?.url||s.url,[s.media,s.url]);(0,l.useEffect)(()=>{let w;const v=i.current?.plyr;return v&&(e?w=setTimeout(()=>{typeof v.play=="function"&&v.play().catch(()=>{v&&(v.muted=!0,v.play().catch(()=>{}))})},100):typeof v.pause=="function"&&v.pause()),()=>{w&&clearTimeout(w)}},[e]),(0,l.useEffect)(()=>{if(!c?.id||!e)return;(async()=>{try{const[v,_]=await Promise.all([Ss(s.id,c.id),vs(c.id,s.user?.id)]);k(v),y(_)}catch(v){console.error("Failed to check interaction status:",v)}})()},[s.id,c?.id,e,s.user?.id]),(0,l.useEffect)(()=>{const w=i.current?.plyr;w&&(w.muted=a)},[a]),(0,l.useEffect)(()=>{const w=i.current?.plyr;if(!w||!e)return;const v=()=>{const _=w.currentTime,V=w.duration;V>0&&n(_/V*100)};if(typeof w.on=="function")return w.on("timeupdate",v),()=>{typeof w.off=="function"&&w.off("timeupdate",v)}},[e]),(0,l.useEffect)(()=>()=>{R.current&&clearTimeout(R.current)},[]);const W=w=>{const v=w.target;v.closest("button")||v.closest("a")||v.closest(".plyr__controls")||(R.current?(clearTimeout(R.current),R.current=null,M()):R.current=setTimeout(()=>{R.current=null,F()},250))},F=()=>{const w=i.current?.plyr;w&&(w.paused?(w.play().catch(()=>{}),h("play")):(w.pause(),h("pause")),setTimeout(()=>h(null),800))},M=async()=>{if(c&&(b(!0),setTimeout(()=>b(!1),1e3),!g)){k(!0),o(w=>w+1);try{await st(s.id,c.id)}catch{k(!1),o(w=>w-1)}}},A=async w=>{if(w.stopPropagation(),!c)return;const v=!g;k(v),o(_=>v?_+1:_-1);try{await st(s.id,c.id)}catch{k(!v),o(_=>v?_-1:_+1)}},L=async w=>{if(w.stopPropagation(),!c)return;const v=!S;y(v);try{await Rs(c.id,s.user?.id)}catch{y(!v)}},D=w=>{w.stopPropagation(),d(!0)},T=(0,l.useMemo)(()=>({source:{type:"video",sources:[{src:E,type:"video/mp4"}]},options:{controls:[],loop:{active:!0},clickToPlay:!1,ratio:"9:16"}}),[E]);return(0,t.jsxs)("div",{"data-id":s.id,className:"reel-item relative flex h-[100dvh] w-full snap-start items-center justify-center overflow-hidden bg-black cursor-pointer",onClick:W,children:[(0,t.jsx)("div",{className:"flex h-full w-full max-w-[450px] items-center justify-center",children:(0,t.jsx)("div",{className:"w-full",children:(0,t.jsx)(zt,{ref:i,...T})})}),u&&(0,t.jsx)("div",{className:"pointer-events-none absolute inset-0 z-50 flex items-center justify-center",children:(0,t.jsx)("div",{className:"animate-in zoom-in-50 fade-out fill-mode-forwards duration-500",children:(0,t.jsx)(ge,{size:120,fill:"white",className:"scale-125 text-white drop-shadow-[0_0_30px_rgba(255,255,255,0.4)]"})})}),f&&(0,t.jsx)("div",{className:"pointer-events-none absolute inset-0 z-50 flex items-center justify-center",children:(0,t.jsx)("div",{className:"animate-in fade-in zoom-in-90 scale-100 animate-out zoom-out-110 fade-out fill-mode-forwards duration-500",children:(0,t.jsx)("div",{className:"rounded-full border border-white/20 bg-white/10 p-8 shadow-2xl backdrop-blur-md",children:f==="play"?(0,t.jsx)(cs,{size:50,fill:"white",className:"ml-1.5 text-white"}):(0,t.jsx)(os,{size:50,fill:"white",className:"text-white"})})})}),(0,t.jsx)("div",{className:"pointer-events-none absolute inset-0 bg-gradient-to-b from-black/20 via-transparent to-black/60"}),(0,t.jsxs)("div",{className:"pointer-events-none absolute bottom-6 left-4 right-16 text-white",children:[(0,t.jsxs)("div",{className:"pointer-events-auto mb-3 flex items-center gap-2",children:[(0,t.jsxs)(Wt,{to:`/u/${s.user?.handle}`,className:"flex items-center gap-2 transition-opacity hover:opacity-80",onClick:w=>w.stopPropagation(),children:[(0,t.jsxs)(H,{className:"size-10 border-2 border-white",children:[(0,t.jsx)(J,{src:s.user?.avatar,alt:s.user?.handle,className:"object-cover"}),(0,t.jsx)(q,{children:s.user?.handle?.[0]?.toUpperCase()})]}),(0,t.jsxs)("span",{className:"font-bold",children:["@",s.user?.handle]})]}),c?.id!==s.user?.id&&(0,t.jsx)("button",{className:`ml-2 flex items-center gap-1.5 rounded-full px-3 py-1.5 text-xs font-bold transition-all active:scale-95 ${S?"border border-white/50 bg-transparent text-white":"bg-white text-black hover:bg-zinc-200"}`,onClick:L,children:S?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(Fs,{size:14}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"Following"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ks,{size:14}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"Follow"})]})})]}),(0,t.jsx)(Pe,{options:{..._e,render:({attributes:w,content:v})=>{const{href:_,...V}=w,K=!_.startsWith("/")&&(_.startsWith("http")||_.startsWith("www"));return _.startsWith("/u/")||_.startsWith("/tags/")||_.startsWith("/c/")||_.startsWith("/explore")?(0,t.jsx)("span",{...V,className:"cursor-pointer font-bold text-white hover:underline",onClick:se=>{se.stopPropagation(),m(_)},children:v},v):(0,t.jsx)("a",{href:_,...V,className:"text-white hover:underline",target:K?"_blank":void 0,rel:K?"noopener noreferrer":void 0,onClick:se=>se.stopPropagation(),children:v},v)}},children:(0,t.jsx)("p",{className:"mb-3 line-clamp-2 text-sm",children:s.content})}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-xs opacity-90",children:[(0,t.jsx)(ls,{size:14,className:"animate-spin-slow"}),(0,t.jsxs)("span",{children:["Original Audio - ",s.user?.handle]})]})]}),(0,t.jsxs)("div",{className:"absolute bottom-6 right-2 z-10 flex flex-col items-center gap-6",children:[(0,t.jsxs)("div",{className:"pointer-events-auto flex flex-col items-center gap-1",children:[(0,t.jsx)("button",{className:`rounded-full p-3 backdrop-blur-md transition-all active:scale-90 ${g?"bg-rose-500/20 text-rose-500":"bg-zinc-800/50 text-white hover:bg-zinc-700"}`,onClick:A,children:(0,t.jsx)(ge,{size:28,fill:g?"currentColor":"none"})}),(0,t.jsx)("span",{className:"text-xs font-bold text-white",children:C})]}),(0,t.jsxs)("div",{className:"pointer-events-auto flex flex-col items-center gap-1",children:[(0,t.jsx)("button",{className:"rounded-full bg-zinc-800/50 p-3 text-white backdrop-blur-md transition-colors hover:bg-zinc-700 active:scale-90",onClick:w=>{w.stopPropagation(),j(!0)},children:(0,t.jsx)(yt,{size:28})}),(0,t.jsx)("span",{className:"text-xs font-bold text-white",children:s.stats?.comments||0})]}),(0,t.jsxs)("div",{className:"pointer-events-auto flex flex-col items-center gap-1",children:[(0,t.jsx)("button",{className:"rounded-full bg-zinc-800/50 p-3 text-white backdrop-blur-md transition-colors hover:bg-zinc-700 active:scale-90",onClick:D,children:(0,t.jsx)(Se,{size:28})}),(0,t.jsx)("span",{className:"text-xs font-bold text-white",children:s.stats?.shares||0})]})]}),(0,t.jsx)("div",{className:"absolute bottom-0 left-0 z-50 h-[3px] w-full bg-white/20",children:(0,t.jsx)("div",{className:"h-full bg-white shadow-[0_0_8px_rgba(255,255,255,0.8)] transition-all duration-100 ease-linear",style:{width:`${I}%`}})}),(0,t.jsx)(ga,{isOpen:N,onClose:()=>j(!1),reelId:s.id,currentUser:c,showToast:x}),(0,t.jsx)($t,{isOpen:p,onClose:()=>d(!1),url:`${window.location.origin}/reels?id=${s.id}`,title:"Share Reel"})]})},(s,e)=>s.isActive===e.isActive&&s.reel.id===e.reel.id&&s.isMuted===e.isMuted),Sa=pa,fa=({isOpen:s,onClose:e,reelId:a,currentUser:m,showToast:c})=>{const[x,i]=(0,l.useState)([]),[u,b]=(0,l.useState)(!1),[N,j]=(0,l.useState)(!1),[p,d]=(0,l.useState)(""),[f,h]=(0,l.useState)([]),[g,k]=(0,l.useState)(!1),[C,o]=(0,l.useState)(!0),[S,y]=(0,l.useState)(!1),[I,n]=(0,l.useState)(null),R=(0,l.useRef)(x);(0,l.useEffect)(()=>{R.current=x},[x]);const E=(0,l.useCallback)(async(F=!1)=>{if(a){F?y(!0):b(!0);try{const M=R.current,A=await fe(a,F&&M.length>0?M[M.length-1].created_at:null,10);A.length<10?o(!1):o(!0),i(F?L=>[...L,...A]:A)}catch(M){console.error("Failed to load comments:",M),c&&c("Failed to load comments","error")}finally{b(!1),y(!1)}}},[a,c]);(0,l.useEffect)(()=>{s&&a?E():(i([]),o(!0))},[s,a,E]);const W=async F=>{if(F.preventDefault(),!(!p.trim()&&f.length===0||!m)){j(!0),k(!0);try{const M=[];for(const A of f){const L=await Ce(A);M.push(L)}await Nt(a,m.id,p,M,I?.id),d(""),h([]),n(null),c&&c("Reply posted!"),E()}catch(M){console.error("Failed to post comment:",M),c&&c("Failed to post reply.","error")}finally{j(!1),k(!1)}}};return(0,t.jsx)(kt,{isOpen:s,onClose:e,title:"Comments",className:"max-sm:h-[95dvh] h-[85vh] overflow-hidden !p-0 sm:max-w-xl",children:(0,t.jsxs)("div",{className:"flex h-full flex-col overflow-hidden bg-white dark:bg-zinc-900",children:[(0,t.jsx)("div",{className:"mx-auto my-3 h-1.5 w-12 shrink-0 rounded-full bg-zinc-200 dark:bg-zinc-800 sm:hidden"}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto scroll-smooth scrollbar-thin scrollbar-thumb-zinc-200 dark:scrollbar-thumb-zinc-800",children:u?(0,t.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,t.jsx)(Y,{className:"animate-spin text-violet-500",size:32})}):x.length>0?(0,t.jsxs)("div",{className:"flex flex-col",children:[x.map(F=>(0,t.jsx)(ma,{...F,isComment:!0,post_id:a,currentUser:m,showToast:c,onReply:(M,A)=>{n(A?{handle:M,id:A}:null),d(L=>L.includes(`@${M}`)?L:L+`@${M} `)},onDelete:M=>i(A=>A.filter(L=>L.id!==M)),onUpdate:(M,A,L)=>i(D=>D.map(T=>T.id===M?{...T,content:A,media:L}:T))},F.id)),C&&(0,t.jsxs)("button",{onClick:()=>E(!0),disabled:S,className:"flex w-full items-center justify-center gap-2 py-6 text-sm font-bold text-violet-600 transition-colors hover:bg-zinc-50 dark:hover:bg-zinc-900",children:[S&&(0,t.jsx)(Y,{size:16,className:"animate-spin"}),"View more replies"]})]}):(0,t.jsxs)("div",{className:"flex h-full min-h-[300px] flex-col items-center justify-center p-8 text-center text-zinc-500",children:[(0,t.jsx)("div",{className:"mb-4 flex size-16 items-center justify-center rounded-full bg-zinc-100 dark:bg-zinc-900",children:(0,t.jsx)(vt,{size:32,className:"text-zinc-400"})}),(0,t.jsx)("p",{className:"text-lg font-bold dark:text-zinc-300",children:"No comments yet"}),(0,t.jsx)("p",{className:"text-sm dark:text-zinc-500",children:"Be the first to share what you think!"})]})}),(0,t.jsxs)("div",{className:"shrink-0 border-t border-zinc-100 bg-white pb-safe dark:border-zinc-800 dark:bg-zinc-900",children:[I&&(0,t.jsxs)("div",{className:"flex items-center justify-between border-b border-zinc-50 bg-zinc-50/50 px-4 py-2 dark:border-zinc-800/50 dark:bg-zinc-900/50",children:[(0,t.jsxs)("span",{className:"text-xs text-zinc-500",children:["Replying to ",(0,t.jsxs)("span",{className:"font-bold text-violet-600",children:["@",I.handle]})]}),(0,t.jsx)("button",{onClick:()=>n(null),className:"text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-200",children:(0,t.jsx)(ne,{size:14})})]}),(0,t.jsx)(St,{currentUser:m,newComment:p,setNewComment:d,handleSubmitComment:W,loading:N,selectedFiles:f,setSelectedFiles:h,isUploading:g})]})]})})},ga=fa,ba=({isOpen:s,onClose:e,url:a,title:m="Share"})=>{const[c,x]=(0,l.useState)(!1),[i,u]=(0,l.useState)(""),[b,N]=(0,l.useState)([]),[j,p]=(0,l.useState)(!1),[d,f]=(0,l.useState)(null),{addToast:h}=Ct(),{currentUser:g}=wt(),k=(0,l.useCallback)(async()=>{if(g){p(!0);try{N((await at(g.id)).map(n=>n.user).filter(n=>n!==null).slice(0,5))}catch(n){console.error("Failed to fetch conversations:",n)}finally{p(!1)}}},[g?.id]);(0,l.useEffect)(()=>{s&&g?k():(u(""),N([]))},[s,g,k]);const C=(0,l.useCallback)(async()=>{if(g){p(!0);try{N((await at(g.id)).map(n=>n.user).filter(n=>n!==null&&(n.name?.toLowerCase().includes(i.toLowerCase())||n.handle.toLowerCase().includes(i.toLowerCase()))))}catch(n){console.error("Search failed:",n)}finally{p(!1)}}},[i,g?.id]);(0,l.useEffect)(()=>{const n=setTimeout(()=>{i.trim()&&s?C():!i.trim()&&s&&k()},300);return()=>clearTimeout(n)},[i,s,C,k]);const o=async n=>{n&&n.stopPropagation();try{await navigator.clipboard.writeText(a),x(!0),h("Link copied to clipboard!","success"),setTimeout(()=>x(!1),2e3)}catch(R){console.error("Failed to copy:",R),h("Failed to copy link","error")}},S=async n=>{if(g){f(n.id);try{await $s(await bs(g.id,n.id),g.id,a,"text"),h(`Sent to ${n.name||n.handle}!`,"success")}catch(R){console.error("Failed to send message:",R),h("Failed to send message","error")}finally{f(null)}}},y=[{name:"X",icon:as,color:"bg-black text-white",href:`https://twitter.com/intent/tweet?url=${encodeURIComponent(a)}`},{name:"Facebook",icon:Yt,color:"bg-[#1877F2] text-white",href:`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(a)}`},{name:"LinkedIn",icon:es,color:"bg-[#0A66C2] text-white",href:`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(a)}`},{name:"WhatsApp",icon:rs,color:"bg-[#25D366] text-white",href:`https://wa.me/?text=${encodeURIComponent(a)}`},{name:"Email",icon:xs,color:"bg-zinc-600 text-white",href:`mailto:?body=${encodeURIComponent(a)}`}],I=async()=>{if(navigator.share)try{await navigator.share({title:m,url:a})}catch(n){n.name!=="AbortError"&&console.error("Native share failed:",n)}else o()};return(0,t.jsx)(kt,{isOpen:s,onClose:e,title:m,className:"max-w-[420px] !p-0 overflow-hidden",children:(0,t.jsxs)("div",{className:"flex h-full flex-col bg-white dark:bg-zinc-900",children:[(0,t.jsx)("div",{className:"px-5 pb-2 pt-4",children:(0,t.jsxs)("div",{className:"group relative",children:[(0,t.jsx)(ds,{className:"absolute left-3 top-1/2 size-4 -translate-y-1/2 text-zinc-400 transition-colors group-focus-within:text-violet-500"}),(0,t.jsx)("input",{type:"text",placeholder:"Search people...",value:i,onChange:n=>u(n.target.value),className:"w-full rounded-xl border-none bg-zinc-100 py-2.5 pl-10 pr-4 text-sm transition-all focus:ring-2 focus:ring-violet-500/20 outline-none dark:bg-zinc-800/50"})]})}),(0,t.jsx)("div",{className:"no-scrollbar flex min-h-[100px] items-center gap-4 overflow-x-auto px-5 py-4",children:j?(0,t.jsx)("div",{className:"flex flex-1 justify-center",children:(0,t.jsx)(Y,{size:24,className:"animate-spin text-zinc-400"})}):b.length>0?b.map(n=>(0,t.jsxs)("button",{onClick:()=>S(n),disabled:d!==null,className:"group flex shrink-0 flex-col items-center gap-1.5 disabled:opacity-50",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"size-14 overflow-hidden rounded-full border-2 border-white shadow-sm transition-transform group-hover:scale-105 bg-zinc-100 dark:bg-zinc-800 dark:border-zinc-900",children:(0,t.jsx)("img",{src:n.avatar||`https://i.pravatar.cc/150?u=${n.id}`,alt:n.handle,className:"size-full object-cover"})}),d===n.id&&(0,t.jsx)("div",{className:"absolute inset-0 flex items-center justify-center rounded-full bg-black/40",children:(0,t.jsx)(Y,{size:16,className:"animate-spin text-white"})})]}),(0,t.jsx)("span",{className:"max-w-[60px] truncate text-[10px] font-medium text-zinc-500 dark:text-zinc-400",children:n.name?.split(" ")[0]||n.handle})]},n.id)):(0,t.jsx)("div",{className:"flex-1 py-2 text-center",children:(0,t.jsx)("span",{className:"text-xs text-zinc-400",children:"No people found"})})}),(0,t.jsx)("div",{className:"mx-5 h-px bg-zinc-100 dark:bg-zinc-800"}),(0,t.jsxs)("div",{className:"grid grid-cols-5 gap-2 px-5 py-6",children:[y.map(n=>(0,t.jsxs)("a",{href:n.href,target:"_blank",rel:"noopener noreferrer",className:"group flex flex-col items-center gap-2",children:[(0,t.jsx)("div",{className:`size-12 ${n.color} flex items-center justify-center rounded-2xl shadow-md transition-all group-hover:-translate-y-1 group-hover:scale-110 group-hover:shadow-lg`,children:(0,t.jsx)(n.icon,{size:20,strokeWidth:2.5})}),(0,t.jsx)("span",{className:"text-[10px] font-bold uppercase tracking-tighter text-zinc-500 dark:text-zinc-400",children:n.name})]},n.name)),(0,t.jsxs)("button",{onClick:I,className:"group flex flex-col items-center gap-2",children:[(0,t.jsx)("div",{className:"flex size-12 items-center justify-center rounded-2xl border border-zinc-200 bg-zinc-100 text-zinc-600 shadow-sm transition-all group-hover:-translate-y-1 group-hover:scale-110 dark:border-zinc-700 dark:bg-zinc-800 dark:text-zinc-300",children:(0,t.jsx)(we,{size:20,strokeWidth:2.5})}),(0,t.jsx)("span",{className:"text-[10px] font-bold uppercase tracking-tighter text-zinc-500 dark:text-zinc-400",children:"More"})]})]}),(0,t.jsx)("div",{className:"px-5 pb-6",children:(0,t.jsxs)("div",{className:"group relative",children:[(0,t.jsx)("input",{type:"text",readOnly:!0,value:a,className:"w-full rounded-2xl border border-zinc-200 bg-zinc-50 py-3.5 pl-4 pr-14 text-sm font-medium transition-colors focus:outline-none group-hover:border-zinc-300 dark:border-zinc-800 dark:bg-zinc-950 dark:group-hover:border-zinc-700"}),(0,t.jsx)("button",{onClick:o,className:`absolute right-1.5 top-1/2 flex -translate-y-1/2 items-center gap-2 rounded-xl h-10 px-4 text-xs font-bold shadow-sm transition-all active:scale-95 ${c?"bg-emerald-500 text-white":"bg-zinc-900 text-white hover:opacity-90 dark:bg-white dark:text-zinc-900"}`,children:c?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(Gt,{size:14,strokeWidth:3}),(0,t.jsx)("span",{children:"Copied"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(Zt,{size:14,strokeWidth:3}),(0,t.jsx)("span",{children:"Copy"})]})})]})}),(0,t.jsx)("div",{className:"px-5 pb-5",children:(0,t.jsxs)("button",{onClick:e,className:"group relative flex w-full items-center justify-center overflow-hidden rounded-2xl bg-zinc-900 py-4 font-bold text-white transition-all hover:shadow-xl hover:shadow-zinc-900/10 active:scale-[0.98] dark:bg-white dark:text-zinc-900 dark:hover:shadow-white/10",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-zinc-500 to-zinc-600 opacity-0 transition-opacity duration-300 group-hover:opacity-100"}),(0,t.jsx)("div",{className:"relative flex items-center gap-2",children:(0,t.jsx)("span",{children:"Close"})})]})})]})})},$t=ba;export{ma as n,Sa as t};

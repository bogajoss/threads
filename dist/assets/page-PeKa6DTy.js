import{a as x}from"./rolldown-runtime-BaZ8gS7u.js";import{b as j,l as w,v as N,w as y}from"./framework-3lkjbTvb.js";import"./database-COznt_u0.js";import{Mn as z,_r as k,ar as _,rr as S}from"./ui-libs-2x6F5Gjm.js";import"./media-libs-C98UjHPF.js";import{Wt as C,a as P,fn as T,un as V}from"./index-Bx8FuDTh.js";var r=x(y(),1),e=x(w(),1),A=()=>{const t=N(),[o]=j(),{verifyOtp:h}=T(),{addToast:d}=V(),i=o.get("email")||"",s=o.get("type")||"signup",[a,f]=(0,r.useState)(""),[g,c]=(0,r.useState)(!1),[m,n]=(0,r.useState)(null),[b,p]=(0,r.useState)(!1);(0,r.useEffect)(()=>{i||t("/login")},[i,t]);const v=async l=>{if(l.preventDefault(),a.length<6){n("Please enter the 6-digit code");return}c(!0),n(null);try{await h(i,a,s),p(!0),d(s==="signup"?"Account verified!":"Code verified!"),setTimeout(()=>{t(s==="signup"?"/":"/reset-password")},1500)}catch(u){console.error("OTP Verification error:",u),n(u.message||"Invalid or expired code. Please try again."),d("Verification failed","error")}finally{c(!1)}};return(0,e.jsxs)("div",{className:"relative flex min-h-screen items-center justify-center overflow-hidden bg-zinc-950 p-4",children:[(0,e.jsxs)("div",{className:"absolute inset-0 z-0",children:[(0,e.jsx)("div",{className:"absolute -right-[15%] -top-[10%] h-[50%] w-[50%] rounded-full bg-blue-600/10 blur-[120px]"}),(0,e.jsx)("div",{className:"absolute -left-[15%] -bottom-[10%] h-[50%] w-[50%] rounded-full bg-indigo-600/10 blur-[120px]"})]}),(0,e.jsx)(P,{children:(0,e.jsx)("div",{className:"relative z-10 mx-auto w-full max-w-md animate-in fade-in slide-in-from-bottom-5 duration-500",children:(0,e.jsx)("div",{className:"overflow-hidden rounded-[2.5rem] border border-white/10 bg-zinc-900/40 p-1 shadow-2xl backdrop-blur-2xl",children:(0,e.jsxs)("div",{className:"rounded-[2.4rem] bg-gradient-to-b from-white/[0.08] to-transparent p-8 md:p-10",children:[(0,e.jsxs)("button",{onClick:()=>t(s==="signup"?"/register":"/forgot-password"),className:"group mb-8 flex items-center gap-2 text-sm font-medium text-zinc-400 transition-colors hover:text-white",children:[(0,e.jsx)("div",{className:"flex size-8 items-center justify-center rounded-full border border-white/10 bg-white/5 transition-all group-hover:scale-110 group-hover:bg-white/10",children:(0,e.jsx)(k,{size:16})}),"Change Email"]}),(0,e.jsxs)("div",{className:"mb-10 text-center",children:[(0,e.jsx)("div",{className:"mb-6 flex justify-center",children:(0,e.jsxs)("div",{className:"relative",children:[(0,e.jsx)("div",{className:"absolute inset-0 scale-150 bg-indigo-500/20 blur-2xl rounded-full"}),(0,e.jsx)("div",{className:"relative flex size-20 items-center justify-center rounded-3xl bg-gradient-to-br from-indigo-500 to-indigo-700 p-4 shadow-xl shadow-indigo-500/20 text-white",children:(0,e.jsx)(z,{size:40,strokeWidth:1.5})})]})}),(0,e.jsx)("h2",{className:"mb-3 text-3xl font-black tracking-tight text-white md:text-4xl",children:"Verification"}),(0,e.jsxs)("p",{className:"font-medium text-zinc-400",children:["Enter the 6-digit code sent to ",(0,e.jsx)("br",{}),(0,e.jsx)("span",{className:"font-bold text-indigo-400",children:i})]})]}),b?(0,e.jsx)("div",{className:"space-y-6 animate-in zoom-in-95 duration-500",children:(0,e.jsxs)("div",{className:"flex flex-col items-center gap-4 rounded-3xl bg-emerald-500/10 p-8 border border-emerald-500/20 text-emerald-400 text-center",children:[(0,e.jsx)("div",{className:"flex size-16 items-center justify-center rounded-full bg-emerald-500/20 shadow-inner",children:(0,e.jsx)(S,{size:32})}),(0,e.jsxs)("div",{children:[(0,e.jsx)("p",{className:"mb-2 font-black text-xl text-white",children:"Verified Successfully"}),(0,e.jsx)("p",{className:"text-sm text-zinc-400",children:s==="signup"?"Welcome to MySys! Getting things ready...":"Identity confirmed. One more step..."})]})]})}):(0,e.jsxs)("form",{onSubmit:v,className:"space-y-8",children:[(0,e.jsx)("div",{className:"space-y-4",children:(0,e.jsxs)("div",{className:"relative",children:[(0,e.jsx)("input",{type:"text",maxLength:6,placeholder:"••••••",value:a,onChange:l=>f(l.target.value.replace(/[^0-9]/g,"")),className:"w-full tracking-[1.2rem] rounded-[2rem] border border-white/10 bg-white/5 px-6 py-6 text-center text-4xl font-black text-white placeholder:text-zinc-700 focus:border-indigo-500 focus:bg-white/[0.08] focus:outline-none transition-all",required:!0,autoFocus:!0}),(0,e.jsx)("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center opacity-10",children:(0,e.jsx)("div",{className:"h-0.5 w-4/5 border-b-2 border-dashed border-white"})})]})}),m&&(0,e.jsxs)("div",{className:"flex items-center gap-3 rounded-2xl bg-rose-500/10 p-4 text-sm text-rose-400 border border-rose-500/20 animate-in slide-in-from-top-2",children:[(0,e.jsx)(_,{size:18}),(0,e.jsx)("span",{className:"font-medium",children:m})]}),(0,e.jsx)(C,{type:"submit",className:"w-full rounded-2xl bg-white py-6 text-lg font-bold text-black hover:bg-zinc-200 shadow-xl",loading:g,children:"Verify Account"})]}),(0,e.jsx)("div",{className:"mt-10 pt-8 text-center border-t border-white/5",children:(0,e.jsxs)("p",{className:"text-sm font-medium text-zinc-500",children:["Didn't receive the code? "," ",(0,e.jsx)("button",{onClick:()=>t(s==="signup"?"/register":"/forgot-password"),className:"font-bold text-white hover:underline",children:"Resend Code"})]})})]})})})})]})},D=A;export{D as default};

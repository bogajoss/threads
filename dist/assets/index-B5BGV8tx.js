import{a as e}from"./rolldown-runtime-DDUpfMIz.js";import{$ as t,A as n,At as r,B as i,Bt as a,C as o,Ct as s,D as c,Dt as l,E as u,Et as d,F as f,Ft as p,G as m,H as h,Ht as g,I as _,It as v,J as y,K as b,L as x,Lt as S,M as C,Mt as w,N as T,Nt as E,O as D,Ot as O,P as k,Pt as A,Q as j,R as M,Rt as N,S as P,St as F,T as I,U as L,V as R,Vt as z,W as B,X as V,Y as H,Z as U,_ as W,_t as G,a as K,at as q,b as J,bt as ee,c as Y,ct as te,d as ne,dt as re,et as ie,f as ae,ft as oe,g as se,gt as ce,h as le,ht as ue,i as de,it as fe,j as pe,jt as me,k as he,kt as ge,l as _e,lt as ve,m as ye,mt as be,n as xe,nt as Se,o as Ce,ot as we,p as Te,pt as Ee,q as De,r as Oe,rt as ke,s as Ae,st as je,t as Me,tt as Ne,u as Pe,ut as Fe,v as Ie,vt as Le,w as Re,x as ze,xt as Be,y as Ve,yt as He,z as Ue,zt as We}from"./react-DqBkma2m.js";import{t as Ge}from"./query-B90BCAvF.js";import{t as Ke}from"./supabase-Cy4Qrda8.js";import{n as qe,r as Je,t as Ye}from"./vendor-BMykRcYb.js";(function(){let e=document.createElement(`link`).relList;if(e&&e.supports&&e.supports(`modulepreload`))return;for(let e of document.querySelectorAll(`link[rel="modulepreload"]`))n(e);new MutationObserver(e=>{for(let t of e)if(t.type===`childList`)for(let e of t.addedNodes)e.tagName===`LINK`&&e.rel===`modulepreload`&&n(e)}).observe(document,{childList:!0,subtree:!0});function t(e){let t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin===`use-credentials`?t.credentials=`include`:e.crossOrigin===`anonymous`?t.credentials=`omit`:t.credentials=`same-origin`,t}function n(e){if(e.ep)return;e.ep=!0;let n=t(e);fetch(e.href,n)}})();var Xe=z(),X=e(g(),1);const Z=Ke(`https://dbkcedktqhueqnulnosq.supabase.co`,`eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRia2NlZGt0cWh1ZXFudWxub3NxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njg5NzE1NTQsImV4cCI6MjA4NDU0NzU1NH0.m_Tv-H7o5mL1Nac6TH-S1JkS1x7ZN1AK_4Mt1hZlkvU`),Ze=e=>e?{id:e.id,handle:e.username,name:e.display_name,avatar:e.avatar_url||`https://static.hey.xyz/images/brands/lens.svg`,cover:e.cover_url||`https://static.hey.xyz/images/hero.webp`,verified:e.is_verified,bio:e.bio,location:e.location,website:e.website,follower_count:e.follower_count||0,following_count:e.following_count||0,lastSeen:e.last_seen_at}:null,Qe=e=>e?{...e,stats:{comments:e.comments_count||0,likes:e.likes_count||0,mirrors:e.mirrors_count||0},user:Ze(e.user),timeAgo:new Date(e.created_at).toLocaleDateString()}:null,$e=e=>e?{...e,user:e.actor?.username,avatar:e.actor?.avatar_url||`https://static.hey.xyz/images/brands/lens.svg`}:null,et=e=>e?{...e,media:e.media_url,user:Ze(e.user)}:null,tt=async(e,t={})=>{if(!e.type.startsWith(`image/`))return e;let n={maxSizeMB:1,maxWidthOrHeight:1920,useWebWorker:!0,initialQuality:.8,...t};try{let t=await Je(e,n);return console.log(`Original size: ${(e.size/1024/1024).toFixed(2)} MB`),console.log(`Compressed size: ${(t.size/1024/1024).toFixed(2)} MB`),t}catch(t){return console.error(`Image compression failed:`,t),e}},nt=async(e,t=`media`)=>{let n=e;e.type.startsWith(`image/`)&&(n=await tt(e));let r=e.name.split(`.`).pop(),i=`${`${Math.random()}-${Date.now()}.${r}`}`,{data:a,error:o}=await Z.storage.from(t).upload(i,n);if(o)throw o;let{data:{publicUrl:s}}=Z.storage.from(t).getPublicUrl(a.path);return{url:s,name:e.name,type:e.type.startsWith(`image/`)?`image`:e.type.startsWith(`video/`)?`video`:`file`,size:n.size}},rt=async()=>{let{data:e,error:t}=await Z.from(`posts`).select(`
            *,
            user:users!user_id (
                id,
                username,
                display_name,
                avatar_url,
                is_verified,
                bio,
                location,
                website,
                follower_count,
                following_count
            )
        `).order(`created_at`,{ascending:!1});if(t)throw t;return e.map(Qe)},it=async e=>{let{data:t,error:n}=await Z.from(`posts`).select(`
            *,
            user:users!user_id (
                id,
                username,
                display_name,
                avatar_url,
                is_verified,
                bio,
                location,
                website,
                follower_count,
                following_count
            )
        `).eq(`id`,e).single();if(n)throw n;return Qe(t)},at=async({content:e,media:t=[],type:n=`text`,userId:r,poll:i=null,parentId:a=null})=>{let{data:o,error:s}=await Z.from(`posts`).insert([{user_id:r,content:e,media:t,type:n,poll:i,parent_id:a,created_at:new Date().toISOString()}]).select(`
            *,
            user:users!user_id (
                id,
                username,
                display_name,
                avatar_url,
                is_verified
            )
        `);if(s)throw s;return Qe(o[0])},ot=async e=>{let{data:t,error:n}=await Z.from(`users`).select(`*`).or(`username.ilike.%${e}%,display_name.ilike.%${e}%`).limit(5);if(n)throw n;return t.map(Ze)},st=async(e,t)=>{let{data:n}=await Z.from(`conversation_participants`).select(`conversation_id`).eq(`user_id`,e),r=n.map(e=>e.conversation_id),{data:i}=await Z.from(`conversation_participants`).select(`conversation_id`).eq(`user_id`,t).in(`conversation_id`,r).maybeSingle();if(i)return i.conversation_id;let{data:a,error:o}=await Z.from(`conversations`).insert([{}]).select().single();if(o)throw o;return await Z.from(`conversation_participants`).insert([{conversation_id:a.id,user_id:e},{conversation_id:a.id,user_id:t}]),a.id},ct=async()=>{let{data:e,error:t}=await Z.from(`users`).select(`*`);if(t)throw t;return e.reduce((e,t)=>{let n=Ze(t);return e[n.handle]=n,e},{})},lt=async e=>{let{data:t,error:n}=await Z.from(`users`).select(`*`).eq(`username`,e).maybeSingle();if(n)throw n;return Ze(t)},ut=async(e,t)=>{let{error:n}=await Z.from(`users`).update({display_name:t.name,username:t.handle,avatar_url:t.avatar,bio:t.bio,cover_url:t.cover,website:t.website,location:t.location}).eq(`id`,e);if(n)throw n},dt=async e=>{if(!e)return[];let{data:t,error:n}=await Z.from(`notifications`).select(`
            *,
            actor:users!actor_id (
                username,
                avatar_url
            )
        `).eq(`recipient_id`,e).order(`created_at`,{ascending:!1});if(n)throw n;return t.map($e)},ft=async e=>{let{error:t}=await Z.from(`notifications`).update({is_read:!0}).eq(`recipient_id`,e).eq(`is_read`,!1);if(t)throw t},pt=async e=>{if(!e)return 0;let{count:t,error:n}=await Z.from(`notifications`).select(`*`,{count:`exact`,head:!0}).eq(`recipient_id`,e).eq(`is_read`,!1);if(n)throw n;return t||0},mt=async e=>{if(!e)return[];let{data:t,error:n}=await Z.from(`conversation_participants`).select(`
            conversation:conversations (
                id,
                last_message_at,
                last_message_content,
                participants:conversation_participants (
                    user:users (
                        id,
                        username,
                        display_name,
                        avatar_url
                    )
                )
            )
        `).eq(`user_id`,e);if(n)throw console.error(`Supabase Error in fetchConversations:`,n.message),n;return t.map(t=>{let n=t.conversation,r=n.participants.find(t=>t.user?.id!==e)||n.participants[0];return{id:n.id,user:Ze(r?.user),lastMessage:n.last_message_content||`No messages yet`,time:n.last_message_at?new Date(n.last_message_at).toLocaleTimeString([],{hour:`2-digit`,minute:`2-digit`}):``,unread:0}})},ht=async e=>{let{data:t,error:n}=await Z.from(`messages`).select(`*`).eq(`conversation_id`,e).order(`created_at`,{ascending:!0});if(n)throw n;return t},gt=async(e,t,n)=>{let{data:r,error:i}=await Z.from(`messages`).insert([{conversation_id:e,sender_id:t,content:n}]).select();if(i)throw i;return r[0]},_t=async e=>{let{data:t,error:n}=await Z.from(`posts`).select(`
            *,
            user:users!user_id (
                id,
                username,
                display_name,
                avatar_url,
                is_verified
            )
        `).eq(`parent_id`,e).order(`created_at`,{ascending:!0});if(n)throw n;return t.map(Qe)},vt=async(e,t,n)=>{let{data:r,error:i}=await Z.from(`posts`).insert([{parent_id:e,user_id:t,content:n,type:`text`,created_at:new Date().toISOString()}]).select(`
            *,
            user:users!user_id (
                id,
                username,
                display_name,
                avatar_url,
                is_verified
            )
        `);if(i)throw i;return Qe(r[0])},yt=async(e,t)=>{let{data:n}=await Z.from(`likes`).select(`*`).eq(`post_id`,e).eq(`user_id`,t).maybeSingle();return n?(await Z.from(`likes`).delete().eq(`post_id`,e).eq(`user_id`,t),!1):(await Z.from(`likes`).insert([{post_id:e,user_id:t}]),!0)},bt=async(e,t)=>{if(!t)return!1;let{data:n}=await Z.from(`likes`).select(`*`).eq(`post_id`,e).eq(`user_id`,t).maybeSingle();return!!n},xt=async(e,t)=>{let{data:n}=await Z.from(`follows`).select(`*`).eq(`follower_id`,e).eq(`following_id`,t).maybeSingle();return n?(await Z.from(`follows`).delete().eq(`follower_id`,e).eq(`following_id`,t),!1):(await Z.from(`follows`).insert([{follower_id:e,following_id:t}]),!0)},St=async(e,t)=>{if(!e)return!1;let{data:n}=await Z.from(`follows`).select(`*`).eq(`follower_id`,e).eq(`following_id`,t).maybeSingle();return!!n},Ct=async e=>{let{data:t,error:n}=await Z.from(`users`).select(`follower_count, following_count`).eq(`id`,e).maybeSingle();return n||!t?{followers:0,following:0}:{followers:t.follower_count||0,following:t.following_count||0}},wt=async()=>{let{data:e,error:t}=await Z.from(`stories`).select(`
            *,
            user:users!user_id (
                id,
                username,
                display_name,
                avatar_url,
                is_verified
            )
        `).gt(`expires_at`,new Date().toISOString()).order(`created_at`,{ascending:!1});if(t)throw t;return e.map(et)},Tt=async(e,t,n=`image`)=>{let{data:r,error:i}=await Z.from(`stories`).insert([{user_id:e,media_url:t,type:n,expires_at:new Date(Date.now()+1440*60*1e3).toISOString()}]).select(`
            *,
            user:users!user_id (
                id,
                username,
                display_name,
                avatar_url,
                is_verified
            )
        `);if(i)throw i;return et(r[0])},Et=[{tag:`Lens`,posts:`0`},{tag:`Web3`,posts:`0`},{tag:`Art`,posts:`0`}];var Q=e(r(),1),Dt=(0,X.createContext)();const Ot=({children:e})=>{let[t,n]=(0,X.useState)(null),[r,i]=(0,X.useState)(null),[a,o]=(0,X.useState)({}),[s,c]=(0,X.useState)(!0),l=async e=>{try{let{data:t,error:r}=await Z.from(`users`).select(`*`).eq(`id`,e.id).maybeSingle();if(r)throw r;if(t){let e=Ze(t);n(e),o(t=>({...t,[e.handle]:e}))}else n({id:e.id,email:e.email,name:e.email.split(`@`)[0],handle:e.email.split(`@`)[0],avatar:`https://static.hey.xyz/images/brands/lens.svg`,verified:!1})}catch(e){console.error(`Error fetching user profile:`,e)}finally{c(!1)}};return(0,X.useEffect)(()=>{if(!t?.id)return;let e=async()=>{await Z.from(`users`).update({last_seen_at:new Date().toISOString()}).eq(`id`,t.id)};e();let n=setInterval(e,3e4),r=()=>{document.visibilityState===`visible`&&e()};return window.addEventListener(`visibilitychange`,r),window.addEventListener(`beforeunload`,e),()=>{clearInterval(n),window.removeEventListener(`visibilitychange`,r),window.removeEventListener(`beforeunload`,e)}},[t?.id]),(0,X.useEffect)(()=>{Z.auth.getSession().then(({data:{session:e}})=>{e?l(e.user):c(!1)});let{data:{subscription:e}}=Z.auth.onAuthStateChange((e,t)=>{t?l(t.user):(n(null),c(!1))});return()=>e.unsubscribe()},[]),(0,Q.jsx)(Dt.Provider,{value:{currentUser:t,authMode:r,setAuthMode:i,profiles:a,login:async({email:e,password:t})=>{let{data:n,error:r}=await Z.auth.signInWithPassword({email:e,password:t});if(r)throw r;return i(null),n},signup:async({email:e,password:t,username:n,name:r})=>{let{data:{user:a},error:o}=await Z.auth.signUp({email:e,password:t,options:{data:{username:n.toLowerCase(),name:r}}});if(o)throw o;return i(null),a},logout:async()=>{await Z.auth.signOut(),n(null),i(null)},updateProfile:async e=>{t&&(await ut(t.id,e),await l(t))},getProfileByHandle:async e=>{if(a[e])return a[e];let t=await lt(e);return t?(o(n=>({...n,[e]:t})),t):null},loading:s},children:!s&&e})},kt=()=>{let e=(0,X.useContext)(Dt);if(!e)throw Error(`useAuth must be used within an AuthProvider`);return e};var At=s(),jt=(0,X.createContext)();const Mt=e=>{let t=(0,At.c)(10),{children:n}=e,{currentUser:r}=kt(),i;t[0]===Symbol.for(`react.memo_cache_sentinel`)?(i=new Set,t[0]=i):i=t[0];let[a,o]=(0,X.useState)(i),s;t[1]===r?s=t[2]:(s=()=>{if(!r?.id)return;let e=Z.channel(`global_presence`,{config:{presence:{key:r.id}}});return e.on(`presence`,{event:`sync`},()=>{let t=e.presenceState(),n=new Set;Object.keys(t).forEach(e=>n.add(e)),o(n)}).subscribe(async t=>{t===`SUBSCRIBED`&&await e.track({userId:r.id,online_at:new Date().toISOString()})}),()=>{Z.removeChannel(e),o(new Set)}},t[1]=r,t[2]=s);let c=r?.id,l;t[3]===c?l=t[4]:(l=[c],t[3]=c,t[4]=l),(0,X.useEffect)(s,l);let u;t[5]===a?u=t[6]:(u={onlineUsers:a},t[5]=a,t[6]=u);let d;return t[7]!==n||t[8]!==u?(d=(0,Q.jsx)(jt.Provider,{value:u,children:n}),t[7]=n,t[8]=u,t[9]=d):d=t[9],d},Nt=()=>{let e=(0,X.useContext)(jt);if(!e)throw Error(`usePresence must be used within a PresenceProvider`);return e};var Pt=s(),Ft=(0,X.createContext)();const It=e=>{let t=(0,Pt.c)(11),{children:n}=e,[r,i]=(0,X.useState)(Rt),a,o;t[0]===r?(a=t[1],o=t[2]):(a=()=>{localStorage.setItem(`theme`,r?`dark`:`light`),r?document.documentElement.classList.add(`dark`):document.documentElement.classList.remove(`dark`)},o=[r],t[0]=r,t[1]=a,t[2]=o),(0,X.useEffect)(a,o);let s;t[3]===r?s=t[4]:(s=()=>i(!r),t[3]=r,t[4]=s);let c=s,l;t[5]!==r||t[6]!==c?(l={darkMode:r,setDarkMode:i,toggleDarkMode:c},t[5]=r,t[6]=c,t[7]=l):l=t[7];let u;return t[8]!==n||t[9]!==l?(u=(0,Q.jsx)(Ft.Provider,{value:l,children:n}),t[8]=n,t[9]=l,t[10]=u):u=t[10],u},Lt=()=>{let e=(0,X.useContext)(Ft);if(!e)throw Error(`useTheme must be used within a ThemeProvider`);return e};function Rt(){let e=localStorage.getItem(`theme`);return e===`dark`||!e&&window.matchMedia(`(prefers-color-scheme: dark)`).matches}var zt=s(),Bt=e=>{let t=(0,zt.c)(7),n;t[0]===e?n=t[1]:({...n}=e,t[0]=e,t[1]=n);let{theme:r}=c(),i=r===void 0?`system`:r,a,o;t[2]===Symbol.for(`react.memo_cache_sentinel`)?(a={success:(0,Q.jsx)(oe,{className:`size-4`}),info:(0,Q.jsx)(ie,{className:`size-4`}),warning:(0,Q.jsx)(T,{className:`size-4`}),error:(0,Q.jsx)(B,{className:`size-4`}),loading:(0,Q.jsx)(U,{className:`size-4 animate-spin`})},o={"--normal-bg":`var(--popover)`,"--normal-text":`var(--popover-foreground)`,"--normal-border":`var(--border)`,"--border-radius":`var(--radius)`},t[2]=a,t[3]=o):(a=t[2],o=t[3]);let s;return t[4]!==n||t[5]!==i?(s=(0,Q.jsx)(Be,{theme:i,className:`toaster group`,icons:a,style:o,...n}),t[4]=n,t[5]=i,t[6]=s):s=t[6],s},Vt=s(),Ht=(0,X.createContext)();const Ut=e=>{let t=(0,Vt.c)(4),{children:n}=e,r=Gt,i;t[0]===Symbol.for(`react.memo_cache_sentinel`)?(i={addToast:r},t[0]=i):i=t[0];let a;t[1]===Symbol.for(`react.memo_cache_sentinel`)?(a=(0,Q.jsx)(Bt,{position:`bottom-center`,toastOptions:{className:`rounded-full font-bold`}}),t[1]=a):a=t[1];let o;return t[2]===n?o=t[3]:(o=(0,Q.jsxs)(Ht.Provider,{value:i,children:[n,a]}),t[2]=n,t[3]=o),o},Wt=()=>{let e=(0,X.useContext)(Ht);if(!e)throw Error(`useToast must be used within a ToastProvider`);return e};function Gt(e,t){let n=t===void 0?`success`:t;n===`error`?F.error(e):n===`info`?F.info(e):F.success(e)}var Kt=(0,X.createContext)();const qt=({children:e})=>{let[t,n]=(0,X.useState)([]),[r,i]=(0,X.useState)(!0),a=async()=>{try{n(await rt())}catch(e){console.error(`Failed to load posts:`,e)}finally{i(!1)}};return(0,X.useEffect)(()=>{a()},[]),(0,Q.jsx)(Kt.Provider,{value:{posts:t,setPosts:n,addPost:async e=>{let t=await at(e);return a(),t},getPostById:e=>t.find(t=>t.id===e),getUserPosts:(e,n=`feed`)=>{let r=t.filter(t=>!!(t.user?.handle===e||t.repostedBy&&t.repostedBy.handle===e));return n===`media`?r.filter(e=>e.type===`video`||e.type===`image`||e.media?.length>0):n===`replies`?r.filter(e=>e.parent_id!==null):r},loading:r,refreshPosts:a},children:e})},Jt=()=>{let e=(0,X.useContext)(Kt);if(!e)throw Error(`usePosts must be used within a PostProvider`);return e};var Yt=s(),Xt=(0,X.createContext)();const Zt=e=>{let t=(0,Yt.c)(9),{children:n}=e,r;t[0]===Symbol.for(`react.memo_cache_sentinel`)?(r={isOpen:!1,images:[],currentIndex:0},t[0]=r):r=t[0];let[i,a]=(0,X.useState)(r),o;t[1]===Symbol.for(`react.memo_cache_sentinel`)?(o=(e,t)=>{let n=t===void 0?0:t;a({isOpen:!0,images:Array.isArray(e)?e:[e],currentIndex:n})},t[1]=o):o=t[1];let s=o,c;t[2]===Symbol.for(`react.memo_cache_sentinel`)?(c=()=>{a($t)},t[2]=c):c=t[2];let l=c,u;t[3]===Symbol.for(`react.memo_cache_sentinel`)?(u=e=>{a(t=>({...t,currentIndex:e}))},t[3]=u):u=t[3];let d=u,f;t[4]===i?f=t[5]:(f={...i,openLightbox:s,closeLightbox:l,setIndex:d},t[4]=i,t[5]=f);let p;return t[6]!==n||t[7]!==f?(p=(0,Q.jsx)(Xt.Provider,{value:f,children:n}),t[6]=n,t[7]=f,t[8]=p):p=t[8],p},Qt=()=>{let e=(0,X.useContext)(Xt);if(!e)throw Error(`useLightbox must be used within a LightboxProvider`);return e};function $t(e){return{...e,isOpen:!1}}var en=s();const tn=e=>{let t=(0,en.c)(16),n=ge(),r=e?.id,i;t[0]===r?i=t[1]:(i=[`unread_notifications_count`,r],t[0]=r,t[1]=i);let a;t[2]===e?.id?a=t[3]:(a=()=>pt(e?.id),t[2]=e?.id,t[3]=a);let o=!!e?.id,s;t[4]!==i||t[5]!==a||t[6]!==o?(s={queryKey:i,queryFn:a,enabled:o},t[4]=i,t[5]=a,t[6]=o,t[7]=s):s=t[7];let{data:c}=l(s),u=c===void 0?0:c,d;t[8]!==e||t[9]!==n?(d=()=>{if(!e?.id)return;let t=Z.channel(`unread_count:${e.id}`).on(`postgres_changes`,{event:`*`,schema:`public`,table:`notifications`,filter:`recipient_id=eq.${e.id}`},()=>{n.invalidateQueries({queryKey:[`unread_notifications_count`,e.id]}),n.invalidateQueries({queryKey:[`notifications`,e.id]})}).subscribe();return()=>Z.removeChannel(t)},t[8]=e,t[9]=n,t[10]=d):d=t[10];let f=e?.id,p;t[11]!==n||t[12]!==f?(p=[f,n],t[11]=n,t[12]=f,t[13]=p):p=t[13],(0,X.useEffect)(d,p);let m;return t[14]===u?m=t[15]:(m={unreadCount:u},t[14]=u,t[15]=m),m};var nn=s(),rn=()=>{let e=(0,nn.c)(11),{currentUser:t}=kt(),{unreadCount:r}=tn(t),i,a,o,s,c;e[0]===Symbol.for(`react.memo_cache_sentinel`)?(i={id:`home`,icon:Se,path:`/`},a={id:`explore`,icon:re,path:`/explore`},o={id:`reels`,icon:q,path:`/reels`},s={id:`messages`,icon:V,path:`/messages`},c={id:`notifications`,icon:G,path:`/notifications`},e[0]=i,e[1]=a,e[2]=o,e[3]=s,e[4]=c):(i=e[0],a=e[1],o=e[2],s=e[3],c=e[4]);let l=t?`/u/${t.handle}`:`/explore`,u;e[5]===l?u=e[6]:(u=[i,a,o,s,c,{id:`profile`,icon:n,path:l}],e[5]=l,e[6]=u);let d=u,f;e[7]===Symbol.for(`react.memo_cache_sentinel`)?(f=(0,Q.jsx)(w,{to:`/`,className:`mb-8 hover:scale-110 transition-transform`,children:(0,Q.jsx)(`img`,{src:`https://archive.systemadminbd.com/wp-content/uploads/2024/06/cropped-20240613_193200-270x270.png`,alt:`Logo`,className:`size-8 rounded-lg`})}),e[7]=f):f=e[7];let p;return e[8]!==d||e[9]!==r?(p=(0,Q.jsxs)(`aside`,{className:`sticky top-0 hidden md:flex h-screen w-[68px] flex-col items-center py-5 border-r border-zinc-100 dark:border-zinc-800 shrink-0 bg-white dark:bg-black transition-colors duration-200`,children:[f,(0,Q.jsx)(`nav`,{className:`flex flex-col gap-y-4 w-full items-center`,children:d.map(e=>(0,Q.jsxs)(E,{to:e.path,className:an,children:[(0,Q.jsx)(e.icon,{size:26,strokeWidth:2.5}),e.id===`notifications`&&r>0&&(0,Q.jsx)(`span`,{className:`absolute top-2 right-2 size-2 bg-rose-500 rounded-full ring-2 ring-white dark:ring-black`})]},e.id))})]}),e[8]=d,e[9]=r,e[10]=p):p=e[10],p};function an(e){let{isActive:t}=e;return`p-2.5 rounded-xl transition-all duration-200 border border-transparent relative ${t?`text-black dark:text-white bg-zinc-100 dark:bg-zinc-900 border-zinc-200 dark:border-zinc-800`:`text-zinc-500 hover:bg-zinc-50 dark:hover:bg-zinc-900`}`}var on=s(),sn=e=>{let t=(0,on.c)(13),{value:n,onChange:r,onClear:i,placeholder:a}=e,o=a===void 0?`Search...`:a,s;t[0]===Symbol.for(`react.memo_cache_sentinel`)?(s=(0,Q.jsx)(Ue,{size:18,className:`absolute left-4 top-1/2 -translate-y-1/2 text-zinc-400 group-focus-within:text-violet-500 transition-colors`}),t[0]=s):s=t[0];let c;t[1]===r?c=t[2]:(c=e=>r(e.target.value),t[1]=r,t[2]=c);let l;t[3]!==o||t[4]!==c||t[5]!==n?(l=(0,Q.jsx)(`input`,{className:`w-full rounded-full border border-zinc-100 dark:border-zinc-800 bg-zinc-50 dark:bg-zinc-900/50 text-zinc-900 dark:text-white px-11 py-2.5 text-sm outline-none focus:border-violet-500 focus:ring-1 focus:ring-violet-500 transition-all`,placeholder:o,value:n,onChange:c}),t[3]=o,t[4]=c,t[5]=n,t[6]=l):l=t[6];let u;t[7]!==i||t[8]!==n?(u=n&&(0,Q.jsx)(`button`,{onClick:i,className:`absolute right-4 top-1/2 -translate-y-1/2 text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-200 transition-colors`,children:(0,Q.jsx)(he,{size:16})}),t[7]=i,t[8]=n,t[9]=u):u=t[9];let d;return t[10]!==l||t[11]!==u?(d=(0,Q.jsxs)(`div`,{className:`relative group w-full`,children:[s,l,u]}),t[10]=l,t[11]=u,t[12]=d):d=t[12],d},cn=s(),ln=e=>{let t=(0,cn.c)(45),{trendingTopics:n}=e,r;t[0]===n?r=t[1]:(r=n===void 0?[]:n,t[0]=n,t[1]=r);let i=r,{currentUser:a,setAuthMode:o}=kt(),{darkMode:s,toggleDarkMode:c}=Lt(),[l,u]=(0,X.useState)(``),d;t[2]===Symbol.for(`react.memo_cache_sentinel`)?(d=[`Â© 2026 Sysm`,`Terms`,`Privacy`,`Guidelines`,`Discord`,`Sysm`,`GitHub`,`Support`,`Status`],t[2]=d):d=t[2];let p=d,m;t[3]===s?m=t[4]:(m=s?(0,Q.jsx)(f,{size:20}):(0,Q.jsx)(b,{size:20}),t[3]=s,t[4]=m);let h;t[5]!==m||t[6]!==c?(h=(0,Q.jsx)(`button`,{onClick:c,className:`p-3 rounded-full bg-zinc-50 dark:bg-zinc-900 text-zinc-500 dark:text-zinc-400 border border-zinc-100 dark:border-zinc-800 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-all cursor-pointer`,title:`Toggle Theme`,children:m}),t[5]=m,t[6]=c,t[7]=h):h=t[7];let g=h;if(a){let e;t[8]===Symbol.for(`react.memo_cache_sentinel`)?(e=()=>u(``),t[8]=e):e=t[8];let n;t[9]===l?n=t[10]:(n=(0,Q.jsx)(`div`,{className:`flex-1`,children:(0,Q.jsx)(sn,{value:l,onChange:u,onClear:e})}),t[9]=l,t[10]=n);let r;t[11]!==n||t[12]!==g?(r=(0,Q.jsxs)(`div`,{className:`flex items-center gap-3`,children:[n,g]}),t[11]=n,t[12]=g,t[13]=r):r=t[13];let a;t[14]===Symbol.for(`react.memo_cache_sentinel`)?(a=(0,Q.jsx)(`h3`,{className:`font-extrabold text-xl mb-4 px-2 text-[--foreground]`,children:`What's happening`}),t[14]=a):a=t[14];let o;t[15]===i?o=t[16]:(o=i.map(un),t[15]=i,t[16]=o);let s;t[17]===o?s=t[18]:(s=(0,Q.jsxs)(`div`,{className:`bg-zinc-50 dark:bg-zinc-900 rounded-2xl p-4 border border-[--border]`,children:[a,(0,Q.jsx)(`div`,{className:`flex flex-col gap-1`,children:o})]}),t[17]=o,t[18]=s);let c;t[19]===Symbol.for(`react.memo_cache_sentinel`)?(c=(0,Q.jsx)(`div`,{className:`flex flex-wrap gap-x-4 gap-y-2 px-2 text-[13px] text-zinc-500 font-medium pb-5`,children:p.map(dn)}),t[19]=c):c=t[19];let d;return t[20]!==s||t[21]!==r?(d=(0,Q.jsxs)(`aside`,{className:`sticky top-5 hidden w-[320px] shrink-0 flex-col gap-y-6 lg:flex overflow-y-auto max-h-screen`,children:[r,s,c]}),t[20]=s,t[21]=r,t[22]=d):d=t[22],d}let _,v;t[23]===o?(_=t[24],v=t[25]):(_=(0,Q.jsx)(`button`,{onClick:()=>o(`signup`),className:`flex-1 bg-[--card] border border-[--border] py-2.5 rounded-full font-bold text-[--foreground] hover:bg-zinc-50 dark:hover:bg-zinc-900 transition-colors shadow-sm cursor-pointer`,children:`Signup`}),v=()=>o(`login`),t[23]=o,t[24]=_,t[25]=v);let y;t[26]===Symbol.for(`react.memo_cache_sentinel`)?(y=(0,Q.jsx)(`img`,{src:`https://archive.systemadminbd.com/wp-content/uploads/2024/06/cropped-20240613_193200-270x270.png`,alt:``,className:`size-4 rounded-sm`}),t[26]=y):y=t[26];let x;t[27]===v?x=t[28]:(x=(0,Q.jsxs)(`button`,{onClick:v,className:`flex-1 bg-zinc-950 dark:bg-white text-white dark:text-zinc-950 py-2.5 rounded-full font-bold flex items-center justify-center gap-2 hover:opacity-90 transition-opacity cursor-pointer`,children:[y,`Login`]}),t[27]=v,t[28]=x);let S;t[29]!==_||t[30]!==x||t[31]!==g?(S=(0,Q.jsxs)(`div`,{className:`flex gap-3`,children:[_,x,g]}),t[29]=_,t[30]=x,t[31]=g,t[32]=S):S=t[32];let C;t[33]===Symbol.for(`react.memo_cache_sentinel`)?(C=()=>u(``),t[33]=C):C=t[33];let w;t[34]===l?w=t[35]:(w=(0,Q.jsx)(sn,{value:l,onChange:u,onClear:C}),t[34]=l,t[35]=w);let T,E;t[36]===Symbol.for(`react.memo_cache_sentinel`)?(T=(0,Q.jsxs)(`div`,{className:`relative`,children:[(0,Q.jsx)(`div`,{className:`size-16 rounded-full border-4 border-amber-400 border-t-transparent animate-spin duration-[3000ms]`}),(0,Q.jsx)(`span`,{className:`absolute inset-0 flex items-center justify-center text-2xl`,children:`ðŸ’«`})]}),E=(0,Q.jsx)(`h3`,{className:`font-extrabold text-lg text-[--foreground] mt-2 leading-tight`,children:`Get your Sysm account now!`}),t[36]=T,t[37]=E):(T=t[36],E=t[37]);let D;t[38]===o?D=t[39]:(D=(0,Q.jsxs)(`div`,{className:`border border-[--border] rounded-2xl p-8 flex flex-col items-center text-center gap-4 bg-[--card] shadow-sm`,children:[T,E,(0,Q.jsx)(`button`,{onClick:()=>o(`signup`),className:`w-full bg-zinc-950 dark:bg-white text-white dark:text-zinc-950 py-2.5 rounded-full font-black text-sm uppercase tracking-wider hover:opacity-90 active:scale-95 transition-all shadow-lg cursor-pointer`,children:`Signup now`})]}),t[38]=o,t[39]=D);let O;t[40]===Symbol.for(`react.memo_cache_sentinel`)?(O=(0,Q.jsx)(`div`,{className:`flex flex-wrap gap-x-4 gap-y-2 px-2 text-[13px] text-zinc-500 font-medium pb-5`,children:p.map(fn)}),t[40]=O):O=t[40];let k;return t[41]!==S||t[42]!==w||t[43]!==D?(k=(0,Q.jsxs)(`aside`,{className:`sticky top-5 hidden w-[350px] shrink-0 flex-col gap-y-6 lg:flex pr-4`,children:[S,w,D,O]}),t[41]=S,t[42]=w,t[43]=D,t[44]=k):k=t[44],k};function un(e){return(0,Q.jsxs)(`div`,{className:`px-3 py-3 hover:bg-zinc-100 dark:hover:bg-zinc-800 rounded-xl cursor-pointer transition-colors group`,children:[(0,Q.jsx)(`div`,{className:`text-xs text-zinc-500 dark:text-zinc-400 font-medium`,children:`Trending`}),(0,Q.jsxs)(`div`,{className:`font-bold text-[--foreground]`,children:[`#`,e.tag]}),(0,Q.jsxs)(`div`,{className:`text-xs text-zinc-500 dark:text-zinc-400`,children:[e.posts,` posts`]})]},e.tag)}function dn(e){return(0,Q.jsx)(`a`,{href:`#`,className:`hover:underline`,children:e},e)}function fn(e){return(0,Q.jsx)(`a`,{href:`#`,className:`hover:underline`,children:e},e)}var pn=s();function $(...e){return Ye(qe(e))}const mn=()=>{let e=(0,pn.c)(2),{pathname:t}=N(),n;return e[0]===t?n=e[1]:(n=[t],e[0]=t,e[1]=n),(0,X.useEffect)(vn,n),null},hn=e=>typeof e==`string`?/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(e):!1,gn=(e,t)=>{let n=document.createElement(`canvas`),r=e.naturalWidth/e.width,i=e.naturalHeight/e.height;return n.width=t.width,n.height=t.height,n.getContext(`2d`).drawImage(e,t.x*r,t.y*i,t.width*r,t.height*i,0,0,t.width,t.height),new Promise((e,t)=>{n.toBlob(n=>{if(!n){t(Error(`Canvas is empty`));return}e(n)},`image/jpeg`,1)})},_n=e=>{if(!e)return``;let t=new Date-new Date(e),n=Math.floor(t/1e3),r=Math.floor(n/60),i=Math.floor(r/60),a=Math.floor(i/24);return n<60?`Just now`:r<60?`${r}m ago`:i<24?`${i}h ago`:a<7?`${a}d ago`:new Date(e).toLocaleDateString()};function vn(){window.scrollTo(0,0)}var yn=s();function bn(e){let t=(0,yn.c)(8),n,r;t[0]===e?(n=t[1],r=t[2]):({className:n,...r}=e,t[0]=e,t[1]=n,t[2]=r);let i;t[3]===n?i=t[4]:(i=$(`relative flex size-8 shrink-0 overflow-hidden rounded-full`,n),t[3]=n,t[4]=i);let a;return t[5]!==r||t[6]!==i?(a=(0,Q.jsx)(Re,{"data-slot":`avatar`,className:i,...r}),t[5]=r,t[6]=i,t[7]=a):a=t[7],a}function xn(e){let t=(0,yn.c)(8),n,r;t[0]===e?(n=t[1],r=t[2]):({className:n,...r}=e,t[0]=e,t[1]=n,t[2]=r);let i;t[3]===n?i=t[4]:(i=$(`aspect-square size-full`,n),t[3]=n,t[4]=i);let a;return t[5]!==r||t[6]!==i?(a=(0,Q.jsx)(o,{"data-slot":`avatar-image`,className:i,...r}),t[5]=r,t[6]=i,t[7]=a):a=t[7],a}function Sn(e){let t=(0,yn.c)(8),n,r;t[0]===e?(n=t[1],r=t[2]):({className:n,...r}=e,t[0]=e,t[1]=n,t[2]=r);let i;t[3]===n?i=t[4]:(i=$(`bg-muted flex size-full items-center justify-center rounded-full`,n),t[3]=n,t[4]=i);let a;return t[5]!==r||t[6]!==i?(a=(0,Q.jsx)(P,{"data-slot":`avatar-fallback`,className:i,...r}),t[5]=r,t[6]=i,t[7]=a):a=t[7],a}var Cn=s(),wn=e=>{let t=(0,Cn.c)(22),{handleProfileClick:n}=e,{currentUser:r}=kt(),{unreadCount:i}=tn(r),a=N(),o;t[0]===Symbol.for(`react.memo_cache_sentinel`)?(o=[{id:`home`,icon:Se,path:`/`},{id:`explore`,icon:re,path:`/explore`},{id:`reels`,icon:q,path:`/reels`},{id:`messages`,icon:V,path:`/messages`},{id:`notifications`,icon:G,path:`/notifications`}],t[0]=o):o=t[0];let s=o,c;t[1]===i?c=t[2]:(c=s.map(e=>(0,Q.jsx)(E,{to:e.path,className:Tn,children:t=>{let{isActive:n}=t;return(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsx)(e.icon,{size:26,strokeWidth:n?2.5:2}),e.id===`notifications`&&i>0&&(0,Q.jsx)(`span`,{className:`absolute top-3 right-[30%] size-2 bg-rose-500 rounded-full ring-2 ring-white dark:ring-black`})]})}},e.id)),t[1]=i,t[2]=c);let l;t[3]!==r||t[4]!==n?(l=()=>{r&&n(r.handle)},t[3]=r,t[4]=n,t[5]=l):l=t[5];let u=`size-7 border-2 ${a.pathname.startsWith(`/u/`)?`border-black dark:border-white`:`border-transparent opacity-70`}`,d=r?.avatar||`https://static.hey.xyz/images/brands/lens.svg`,f;t[6]===d?f=t[7]:(f=(0,Q.jsx)(xn,{src:d,alt:`Profile`,className:`object-cover`}),t[6]=d,t[7]=f);let p;t[8]===r?.handle?.[0]?p=t[9]:(p=r?.handle?.[0]?.toUpperCase(),t[8]=r?.handle?.[0],t[9]=p);let m;t[10]===p?m=t[11]:(m=(0,Q.jsx)(Sn,{children:p}),t[10]=p,t[11]=m);let h;t[12]!==u||t[13]!==f||t[14]!==m?(h=(0,Q.jsxs)(bn,{className:u,children:[f,m]}),t[12]=u,t[13]=f,t[14]=m,t[15]=h):h=t[15];let g;t[16]!==l||t[17]!==h?(g=(0,Q.jsx)(`button`,{onClick:l,className:`flex-1 flex flex-col items-center justify-center h-full`,children:h}),t[16]=l,t[17]=h,t[18]=g):g=t[18];let _;return t[19]!==g||t[20]!==c?(_=(0,Q.jsxs)(`nav`,{className:`fixed bottom-0 left-0 right-0 z-[40] flex h-16 items-center border-t border-zinc-100 bg-white/90 pb-safe backdrop-blur-md dark:border-zinc-800 dark:bg-black/90 md:hidden`,children:[c,g]}),t[19]=g,t[20]=c,t[21]=_):_=t[21],_};function Tn(e){let{isActive:t}=e;return`flex flex-1 flex-col items-center justify-center h-full transition-all duration-200 relative ${t?`text-black dark:text-white`:`text-zinc-400 opacity-70`}`}var En=s(),Dn=()=>{let e=(0,En.c)(4),t,n;e[0]===Symbol.for(`react.memo_cache_sentinel`)?(t=(0,Q.jsx)(`img`,{src:`https://images.unsplash.com/photo-1502082553048-f009c37129b9?q=80&w=2070&auto=format&fit=crop`,alt:`Welcome Banner`,className:`w-full h-full object-cover group-hover:scale-105 transition-transform duration-700`}),n=(0,Q.jsx)(`div`,{className:`absolute inset-0 bg-gradient-to-t from-black/60 via-black/20 to-transparent`}),e[0]=t,e[1]=n):(t=e[0],n=e[1]);let r;e[2]===Symbol.for(`react.memo_cache_sentinel`)?(r=(0,Q.jsxs)(`div`,{className:`absolute bottom-6 left-8 text-white`,children:[(0,Q.jsx)(`h1`,{className:`text-3xl sm:text-4xl font-black mb-1 drop-shadow-lg`,children:`Welcome to Sysm`}),(0,Q.jsx)(`p`,{className:`text-sm sm:text-base font-medium opacity-90 tracking-wide drop-shadow-md`,children:`a social network built on Lens`})]}),e[2]=r):r=e[2];let i;return e[3]===Symbol.for(`react.memo_cache_sentinel`)?(i=(0,Q.jsxs)(`div`,{className:`relative w-full aspect-[21/9] sm:aspect-[2.5/1] rounded-3xl overflow-hidden mb-6 group cursor-pointer`,children:[t,n,r,(0,Q.jsx)(`div`,{className:`absolute bottom-4 right-8`,children:(0,Q.jsx)(`img`,{src:`https://archive.systemadminbd.com/wp-content/uploads/2024/06/cropped-20240613_193200-270x270.png`,className:`size-12 animate-pulse opacity-80 rounded-xl`,alt:``})})]}),e[3]=i):i=e[3],i},On=s(),kn=()=>{let e=(0,On.c)(23),t=N(),n=We(),{darkMode:r}=Lt(),i=t.pathname===`/`,a;e[0]===t.pathname?a=e[1]:(a=t.pathname.split(`/`).length>2&&t.pathname.startsWith(`/messages`),e[0]=t.pathname,e[1]=a);let o=a,s;e[2]===n?s=e[3]:(s=e=>{n(`/u/${e}`)},e[2]=n,e[3]=s);let c=s,l=`min-h-screen bg-[--background] text-[--foreground] font-sans selection:bg-violet-500 selection:text-white transition-colors duration-200 ${r?`dark`:``}`,u;e[4]===Symbol.for(`react.memo_cache_sentinel`)?(u=(0,Q.jsx)(rn,{}),e[4]=u):u=e[4];let d=!o&&`pb-24 md:pb-0`,f;e[5]===d?f=e[6]:(f=$(`flex-1 flex justify-center gap-x-2 md:gap-x-8 py-0 md:py-5 px-0 md:px-4`,d),e[5]=d,e[6]=f);let m;e[7]===i?m=e[8]:(m=i&&(0,Q.jsx)(Dn,{}),e[7]=i,e[8]=m);let h;e[9]===Symbol.for(`react.memo_cache_sentinel`)?(h=(0,Q.jsx)(`div`,{className:`w-full`,children:(0,Q.jsx)(p,{})}),e[9]=h):h=e[9];let g;e[10]===m?g=e[11]:(g=(0,Q.jsxs)(`div`,{className:`w-full flex flex-col flex-1`,children:[m,h]}),e[10]=m,e[11]=g);let _;e[12]===Symbol.for(`react.memo_cache_sentinel`)?(_=(0,Q.jsx)(ln,{trendingTopics:Et}),e[12]=_):_=e[12];let v;e[13]!==f||e[14]!==g?(v=(0,Q.jsxs)(`div`,{className:`flex justify-center w-full max-w-[1300px] mx-auto min-h-screen px-0 sm:px-0`,children:[u,(0,Q.jsxs)(`div`,{className:f,children:[g,_]})]}),e[13]=f,e[14]=g,e[15]=v):v=e[15];let y;e[16]!==c||e[17]!==o?(y=!o&&(0,Q.jsx)(wn,{handleProfileClick:c}),e[16]=c,e[17]=o,e[18]=y):y=e[18];let b;return e[19]!==v||e[20]!==y||e[21]!==l?(b=(0,Q.jsxs)(`div`,{className:l,children:[v,y]}),e[19]=v,e[20]=y,e[21]=l,e[22]=b):b=e[22],b},An=s();function jn(e){let t=(0,An.c)(4),n;t[0]===e?n=t[1]:({...n}=e,t[0]=e,t[1]=n);let r;return t[2]===n?r=t[3]:(r=(0,Q.jsx)(J,{"data-slot":`dialog`,...n}),t[2]=n,t[3]=r),r}function Mn(e){let t=(0,An.c)(4),n;t[0]===e?n=t[1]:({...n}=e,t[0]=e,t[1]=n);let r;return t[2]===n?r=t[3]:(r=(0,Q.jsx)(Ve,{"data-slot":`dialog-portal`,...n}),t[2]=n,t[3]=r),r}function Nn(e){let t=(0,An.c)(8),n,r;t[0]===e?(n=t[1],r=t[2]):({className:n,...r}=e,t[0]=e,t[1]=n,t[2]=r);let i;t[3]===n?i=t[4]:(i=$(`data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50`,n),t[3]=n,t[4]=i);let a;return t[5]!==r||t[6]!==i?(a=(0,Q.jsx)(Ie,{"data-slot":`dialog-overlay`,className:i,...r}),t[5]=r,t[6]=i,t[7]=a):a=t[7],a}function Pn(e){let t=(0,An.c)(15),n,r,i,a;t[0]===e?(n=t[1],r=t[2],i=t[3],a=t[4]):({className:r,children:n,showCloseButton:a,...i}=e,t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=a);let o=a===void 0?!0:a,s;t[5]===Symbol.for(`react.memo_cache_sentinel`)?(s=(0,Q.jsx)(Nn,{}),t[5]=s):s=t[5];let c;t[6]===r?c=t[7]:(c=$(`bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 outline-none sm:max-w-lg`,r),t[6]=r,t[7]=c);let l;t[8]===o?l=t[9]:(l=o&&(0,Q.jsxs)(le,{"data-slot":`dialog-close`,className:`ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4`,children:[(0,Q.jsx)(he,{}),(0,Q.jsx)(`span`,{className:`sr-only`,children:`Close`})]}),t[8]=o,t[9]=l);let u;return t[10]!==n||t[11]!==i||t[12]!==c||t[13]!==l?(u=(0,Q.jsxs)(Mn,{"data-slot":`dialog-portal`,children:[s,(0,Q.jsxs)(se,{"data-slot":`dialog-content`,className:c,...i,children:[n,l]})]}),t[10]=n,t[11]=i,t[12]=c,t[13]=l,t[14]=u):u=t[14],u}function Fn(e){let t=(0,An.c)(8),n,r;t[0]===e?(n=t[1],r=t[2]):({className:n,...r}=e,t[0]=e,t[1]=n,t[2]=r);let i;t[3]===n?i=t[4]:(i=$(`flex flex-col gap-2 text-center sm:text-left`,n),t[3]=n,t[4]=i);let a;return t[5]!==r||t[6]!==i?(a=(0,Q.jsx)(`div`,{"data-slot":`dialog-header`,className:i,...r}),t[5]=r,t[6]=i,t[7]=a):a=t[7],a}function In(e){let t=(0,An.c)(8),n,r;t[0]===e?(n=t[1],r=t[2]):({className:n,...r}=e,t[0]=e,t[1]=n,t[2]=r);let i;t[3]===n?i=t[4]:(i=$(`flex flex-col-reverse gap-2 sm:flex-row sm:justify-end`,n),t[3]=n,t[4]=i);let a;return t[5]!==r||t[6]!==i?(a=(0,Q.jsx)(`div`,{"data-slot":`dialog-footer`,className:i,...r}),t[5]=r,t[6]=i,t[7]=a):a=t[7],a}function Ln(e){let t=(0,An.c)(8),n,r;t[0]===e?(n=t[1],r=t[2]):({className:n,...r}=e,t[0]=e,t[1]=n,t[2]=r);let i;t[3]===n?i=t[4]:(i=$(`text-lg leading-none font-semibold`,n),t[3]=n,t[4]=i);let a;return t[5]!==r||t[6]!==i?(a=(0,Q.jsx)(ze,{"data-slot":`dialog-title`,className:i,...r}),t[5]=r,t[6]=i,t[7]=a):a=t[7],a}function Rn(e){let t=(0,An.c)(8),n,r;t[0]===e?(n=t[1],r=t[2]):({className:n,...r}=e,t[0]=e,t[1]=n,t[2]=r);let i;t[3]===n?i=t[4]:(i=$(`text-muted-foreground text-sm`,n),t[3]=n,t[4]=i);let a;return t[5]!==r||t[6]!==i?(a=(0,Q.jsx)(W,{"data-slot":`dialog-description`,className:i,...r}),t[5]=r,t[6]=i,t[7]=a):a=t[7],a}var zn=s(),Bn=e=>{let t=(0,zn.c)(20),{isOpen:n,onClose:r,title:i,children:a,footer:o,description:s,className:c}=e,l;t[0]===r?l=t[1]:(l=e=>{e||r()},t[0]=r,t[1]=l);let u=l,d;t[2]===c?d=t[3]:(d=$(`sm:max-w-md max-h-[calc(100dvh-2rem)] flex flex-col p-0 gap-0 overflow-hidden bg-white dark:bg-zinc-900 border-zinc-200 dark:border-zinc-800`,c),t[2]=c,t[3]=d);let f;t[4]!==s||t[5]!==i?(f=i&&(0,Q.jsxs)(Fn,{className:`px-5 py-4 border-b border-zinc-100 dark:border-zinc-800 shrink-0`,children:[(0,Q.jsx)(Ln,{className:`text-xl font-bold`,children:i}),s&&(0,Q.jsx)(Rn,{children:s})]}),t[4]=s,t[5]=i,t[6]=f):f=t[6];let p;t[7]===a?p=t[8]:(p=(0,Q.jsx)(`div`,{className:`flex-1 overflow-y-auto p-5 min-h-0`,children:a}),t[7]=a,t[8]=p);let m;t[9]===o?m=t[10]:(m=o&&(0,Q.jsx)(In,{className:`px-5 py-4 border-t border-zinc-100 dark:border-zinc-800 shrink-0 bg-white dark:bg-zinc-900`,children:o}),t[9]=o,t[10]=m);let h;t[11]!==d||t[12]!==f||t[13]!==p||t[14]!==m?(h=(0,Q.jsxs)(Pn,{className:d,children:[f,p,m]}),t[11]=d,t[12]=f,t[13]=p,t[14]=m,t[15]=h):h=t[15];let g;return t[16]!==u||t[17]!==n||t[18]!==h?(g=(0,Q.jsx)(jn,{open:n,onOpenChange:u,children:h}),t[16]=u,t[17]=n,t[18]=h,t[19]=g):g=t[19],g},Vn=s(),Hn=e=>{let t=(0,Vn.c)(12),n,r,i,a;t[0]===e?(n=t[1],r=t[2],i=t[3],a=t[4]):({children:n,variant:i,className:a,...r}=e,t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=a);let o=i===void 0?`primary`:i,s=a===void 0?``:a,c;t[5]===Symbol.for(`react.memo_cache_sentinel`)?(c={primary:`text-white hover:text-white bg-zinc-900 hover:bg-zinc-800 border border-zinc-900 dark:bg-white dark:text-black dark:border-white dark:hover:bg-zinc-200`,secondary:`text-zinc-900 border border-zinc-300 hover:border-zinc-400 bg-transparent hover:bg-zinc-50 dark:text-white dark:border-zinc-700 dark:hover:border-zinc-600 dark:hover:bg-zinc-900`,outline:`text-zinc-900 border border-zinc-300 hover:border-zinc-400 bg-white dark:bg-transparent dark:text-white dark:border-zinc-700 dark:hover:bg-zinc-900`,danger:`text-white bg-red-500 hover:bg-red-600 border border-red-500`,ghost:`text-zinc-500 hover:bg-zinc-100 dark:text-zinc-400 dark:hover:bg-zinc-800 border-transparent`},t[5]=c):c=t[5];let l=`rounded-full font-bold inline-flex items-center justify-center relative overflow-hidden px-4 py-1.5 transition-all duration-200 active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed disabled:active:scale-100 touch-manipulation ${c[o]} ${s}`,u;t[6]===n?u=t[7]:(u=(0,Q.jsx)(`div`,{className:`flex items-center gap-x-1.5`,children:n}),t[6]=n,t[7]=u);let d;return t[8]!==r||t[9]!==l||t[10]!==u?(d=(0,Q.jsx)(`button`,{className:l,...r,children:u}),t[8]=r,t[9]=l,t[10]=u,t[11]=d):d=t[11],d},Un=s(),Wn=e=>{let t=(0,Un.c)(33),{src:n,isOpen:r,onClose:i,onCropComplete:a,aspect:o,circular:s}=e,[c,l]=(0,X.useState)(),[u,d]=(0,X.useState)(null),f=(0,X.useRef)(null),p;t[0]===o?p=t[1]:(p=e=>{let{width:t,height:n}=e.currentTarget;l(o?Te(ae({unit:`%`,width:90},o,t,n),t,n):{unit:`%`,width:80,height:80,x:10,y:10})},t[0]=o,t[1]=p);let m=p,h;t[2]!==u||t[3]!==i||t[4]!==a?(h=async()=>{if(u&&f.current)try{a(await gn(f.current,u)),i()}catch(e){let t=e;console.error(`Error cropping image:`,t)}},t[2]=u,t[3]=i,t[4]=a,t[5]=h):h=t[5];let g=h,_;t[6]===i?_=t[7]:(_=e=>!e&&i(),t[6]=i,t[7]=_);let v;t[8]===Symbol.for(`react.memo_cache_sentinel`)?(v=(0,Q.jsx)(Fn,{className:`p-4 border-b border-zinc-100 dark:border-zinc-800`,children:(0,Q.jsx)(Ln,{children:`Crop Image`})}),t[8]=v):v=t[8];let y,b;t[9]===Symbol.for(`react.memo_cache_sentinel`)?(y=e=>l(e),b=e=>d(e),t[9]=y,t[10]=b):(y=t[9],b=t[10]);let x;t[11]!==m||t[12]!==n?(x=(0,Q.jsx)(`img`,{ref:f,src:n,alt:`Crop preview`,onLoad:m,className:`max-h-[60vh] w-auto block`}),t[11]=m,t[12]=n,t[13]=x):x=t[13];let S;t[14]!==o||t[15]!==s||t[16]!==c||t[17]!==x?(S=(0,Q.jsx)(`div`,{className:`p-6 flex items-center justify-center bg-zinc-100/50 dark:bg-zinc-950/50 min-h-[300px] max-h-[65vh] overflow-auto`,children:(0,Q.jsx)(ye,{crop:c,onChange:y,onComplete:b,aspect:o,circularCrop:s,className:`max-w-full shadow-2xl`,children:x})}),t[14]=o,t[15]=s,t[16]=c,t[17]=x,t[18]=S):S=t[18];let C;t[19]===i?C=t[20]:(C=(0,Q.jsx)(Hn,{variant:`outline`,onClick:i,className:`!w-auto px-6`,children:`Cancel`}),t[19]=i,t[20]=C);let w;t[21]===g?w=t[22]:(w=(0,Q.jsx)(Hn,{onClick:g,className:`!w-auto px-6`,children:`Apply Crop`}),t[21]=g,t[22]=w);let T;t[23]!==w||t[24]!==C?(T=(0,Q.jsxs)(In,{className:`p-4 bg-white dark:bg-zinc-900 border-t border-zinc-100 dark:border-zinc-800 flex flex-row justify-end gap-2`,children:[C,w]}),t[23]=w,t[24]=C,t[25]=T):T=t[25];let E;t[26]!==T||t[27]!==S?(E=(0,Q.jsxs)(Pn,{className:`sm:max-w-2xl bg-white dark:bg-zinc-900 border-zinc-200 dark:border-zinc-800 p-0 overflow-hidden`,children:[v,S,T]}),t[26]=T,t[27]=S,t[28]=E):E=t[28];let D;return t[29]!==r||t[30]!==E||t[31]!==_?(D=(0,Q.jsx)(jn,{open:r,onOpenChange:_,children:E}),t[29]=r,t[30]=E,t[31]=_,t[32]=D):D=t[32],D},Gn=({isOpen:e,onClose:t})=>{let{currentUser:n}=kt(),{addPost:r}=Jt(),{addToast:i}=Wt(),[a,o]=(0,X.useState)(``),[s,c]=(0,X.useState)([]),[l,u]=(0,X.useState)(!1),[d,f]=(0,X.useState)({options:[``,``],duration:`1 day`}),[p,m]=(0,X.useState)(!1),[h,g]=(0,X.useState)(null),[_,v]=(0,X.useState)(null),y=(0,X.useRef)(null),b=e=>{let t=Array.from(e.target.files);c(e=>[...e,...t])},x=e=>{c(t=>t.filter((t,n)=>n!==e))},S=e=>{let t=s[e],n=new FileReader;n.onload=()=>{g(n.result),v(e)},n.readAsDataURL(t)},C=e=>{let t=new File([e],`cropped-${Date.now()}.jpg`,{type:`image/jpeg`}),n=[...s];n[_]=t,c(n),g(null),v(null)},w=()=>{d.options.length<4&&f(e=>({...e,options:[...e.options,``]}))},T=e=>{f(t=>({...t,options:t.options.filter((t,n)=>n!==e)}))},E=(e,t)=>{let n=[...d.options];n[e]=t,f(e=>({...e,options:n}))};return(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsx)(Bn,{isOpen:e,onClose:()=>!p&&t(),title:`Create Post`,className:`sm:max-w-xl`,footer:(0,Q.jsxs)(`div`,{className:`flex items-center justify-between w-full`,children:[(0,Q.jsxs)(`div`,{className:`flex text-violet-600 gap-1`,children:[(0,Q.jsx)(`button`,{type:`button`,onClick:()=>y.current?.click(),className:`p-2.5 hover:bg-violet-50 dark:hover:bg-zinc-800 rounded-full transition-colors`,title:`Attach media`,children:(0,Q.jsx)(Ne,{size:22})}),(0,Q.jsx)(`button`,{type:`button`,onClick:()=>u(!0),className:`p-2.5 hover:bg-violet-50 dark:hover:bg-zinc-800 rounded-full transition-colors`,title:`Add poll`,children:(0,Q.jsx)(ce,{size:22})}),(0,Q.jsx)(`button`,{type:`button`,className:`p-2.5 hover:bg-violet-50 dark:hover:bg-zinc-800 rounded-full transition-colors`,children:(0,Q.jsx)(H,{size:22})}),(0,Q.jsx)(`input`,{type:`file`,ref:y,onChange:b,multiple:!0,className:`hidden`,accept:`image/*,video/*,application/pdf`})]}),(0,Q.jsx)(Hn,{onClick:async e=>{if(e.preventDefault(),!(!a.trim()&&s.length===0||!n)){m(!0);try{let e=[];for(let t of s){let n=await nt(t);e.push(n)}let p=null;l&&d.options.some(e=>e.trim())&&(p={options:d.options.filter(e=>e.trim()).map((e,t)=>({id:t+1,text:e,votes:0})),ends_at:new Date(Date.now()+1440*60*1e3).toISOString()}),await r({content:a,media:e,poll:p,type:e.length>0?e[0].type===`video`?`video`:`image`:p?`poll`:`text`,userId:n.id}),o(``),c([]),u(!1),f({options:[``,``],duration:`1 day`}),t(),i(`Post published!`)}catch(e){console.error(`Failed to create post:`,e),i(`Failed to publish post.`)}finally{m(!1)}}},disabled:!a.trim()&&s.length===0||p,className:`px-8 py-2.5 min-w-[100px] text-base`,children:p?(0,Q.jsx)(U,{size:18,className:`animate-spin`}):`Post`})]}),children:(0,Q.jsx)(`div`,{className:`space-y-4`,children:(0,Q.jsxs)(`div`,{className:`flex gap-3`,children:[(0,Q.jsxs)(bn,{className:`size-12 border border-zinc-200 dark:border-zinc-800`,children:[(0,Q.jsx)(xn,{src:n?.avatar,className:`object-cover`}),(0,Q.jsx)(Sn,{children:n?.handle?.[0]?.toUpperCase()})]}),(0,Q.jsxs)(`div`,{className:`flex-1`,children:[(0,Q.jsx)(`textarea`,{className:`w-full bg-transparent border-none outline-none text-lg min-h-[120px] resize-none dark:text-white`,placeholder:`What's happening?`,autoFocus:!0,value:a,onChange:e=>o(e.target.value)}),l&&(0,Q.jsxs)(`div`,{className:`mt-4 p-4 rounded-2xl border border-zinc-100 dark:border-zinc-800 space-y-3 bg-zinc-50/50 dark:bg-zinc-900/50`,children:[(0,Q.jsxs)(`div`,{className:`flex justify-between items-center mb-2`,children:[(0,Q.jsx)(`span`,{className:`text-sm font-bold opacity-60`,children:`Poll`}),(0,Q.jsx)(`button`,{type:`button`,onClick:()=>u(!1),className:`text-zinc-500 hover:text-rose-500`,children:(0,Q.jsx)(he,{size:18})})]}),d.options.map((e,t)=>(0,Q.jsxs)(`div`,{className:`flex gap-2`,children:[(0,Q.jsx)(`input`,{className:`flex-1 bg-white dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 rounded-xl px-4 py-2 text-sm outline-none focus:border-violet-500`,placeholder:`Option ${t+1}`,value:e,onChange:e=>E(t,e.target.value)}),d.options.length>2&&(0,Q.jsx)(`button`,{type:`button`,onClick:()=>T(t),className:`p-2 text-rose-500 hover:bg-rose-50 dark:hover:bg-rose-900/20 rounded-lg transition-colors`,children:(0,Q.jsx)(k,{size:16})})]},t)),d.options.length<4&&(0,Q.jsx)(`button`,{type:`button`,onClick:w,className:`text-sm font-bold text-violet-600 hover:bg-violet-50 dark:hover:bg-violet-900/20 px-3 py-1.5 rounded-lg transition-colors`,children:`+ Add option`})]}),s.length>0&&(0,Q.jsx)(`div`,{className:`mt-4 flex flex-wrap gap-2`,children:s.map((e,t)=>(0,Q.jsxs)(`div`,{className:`relative group size-24 rounded-xl overflow-hidden bg-zinc-100 dark:bg-zinc-800 border dark:border-zinc-700`,children:[e.type.startsWith(`image/`)?(0,Q.jsx)(`img`,{src:URL.createObjectURL(e),className:`size-full object-cover`,alt:``}):(0,Q.jsx)(`div`,{className:`size-full flex items-center justify-center text-zinc-500`,children:e.type.startsWith(`video/`)?(0,Q.jsx)(R,{size:24,className:`animate-pulse`}):(0,Q.jsx)(we,{size:24})}),(0,Q.jsx)(`button`,{type:`button`,onClick:()=>x(t),className:`absolute top-1 right-1 size-6 rounded-full bg-black/60 text-white flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity`,children:(0,Q.jsx)(he,{size:14,strokeWidth:3})}),e.type.startsWith(`image/`)&&(0,Q.jsx)(`button`,{type:`button`,onClick:()=>S(t),className:`absolute bottom-1 right-1 size-6 rounded-full bg-black/60 text-white flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity`,title:`Crop image`,children:(0,Q.jsx)(Fe,{size:14,strokeWidth:3})})]},t))})]})]})})}),h&&(0,Q.jsx)(Wn,{src:h,isOpen:!!h,onClose:()=>{g(null),v(null)},onCropComplete:C,aspect:void 0})]})},Kn=s(),qn=X.forwardRef((e,t)=>{let n=(0,Kn.c)(20),r,i,a,o,s;n[0]===e?(r=n[1],i=n[2],a=n[3],o=n[4],s=n[5]):({className:r,label:i,type:s,textarea:o,...a}=e,n[0]=e,n[1]=r,n[2]=i,n[3]=a,n[4]=o,n[5]=s);let c=o?`textarea`:`input`,l;n[6]===i?l=n[7]:(l=i&&(0,Q.jsx)(`label`,{className:`text-sm font-bold text-zinc-500 dark:text-zinc-400 ml-1`,children:i}),n[6]=i,n[7]=l);let u=o&&`min-h-[100px] resize-none`,d;n[8]!==r||n[9]!==u?(d=$(`flex w-full rounded-xl border border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-900 px-4 py-2.5 text-sm ring-offset-white file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-zinc-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-violet-500 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 dark:ring-offset-zinc-950 dark:text-white transition-all`,u,r),n[8]=r,n[9]=u,n[10]=d):d=n[10];let f;n[11]!==c||n[12]!==a||n[13]!==t||n[14]!==d||n[15]!==s?(f=(0,Q.jsx)(c,{type:s,className:d,ref:t,...a}),n[11]=c,n[12]=a,n[13]=t,n[14]=d,n[15]=s,n[16]=f):f=n[16];let p;return n[17]!==l||n[18]!==f?(p=(0,Q.jsxs)(`div`,{className:`w-full space-y-1.5`,children:[l,f]}),n[17]=l,n[18]=f,n[19]=p):p=n[19],p});qn.displayName=`Input`;var Jn=qn,Yn=({isOpen:e,onClose:t,editProfileData:n,setEditProfileData:r})=>{let{updateProfile:i}=kt(),{addToast:a}=Wt(),[o,s]=(0,X.useState)(!1),[c,l]=(0,X.useState)(null),[u,d]=(0,X.useState)(null),[f,p]=(0,X.useState)(null),[m,h]=(0,X.useState)(null),g=(0,X.useRef)(null),_=(0,X.useRef)(null),v=(e,t)=>{let n=e.target.files[0];if(n){let e=new FileReader;e.onload=()=>{p(e.result),h(t)},e.readAsDataURL(n)}};return(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsx)(Bn,{isOpen:e,onClose:()=>!o&&t(),title:`Edit Profile`,children:(0,Q.jsxs)(`div`,{className:`space-y-6`,children:[(0,Q.jsx)(`input`,{type:`file`,ref:_,className:`hidden`,accept:`image/*`,onChange:e=>v(e,`cover`)}),(0,Q.jsx)(`input`,{type:`file`,ref:g,className:`hidden`,accept:`image/*`,onChange:e=>v(e,`avatar`)}),(0,Q.jsxs)(`div`,{className:`relative h-32 bg-zinc-100 dark:bg-zinc-800 rounded-xl overflow-hidden group cursor-pointer`,onClick:()=>_.current?.click(),children:[(u||n?.cover)&&(0,Q.jsx)(`img`,{src:u?URL.createObjectURL(u):n.cover,className:`w-full h-full object-cover opacity-60`,alt:``}),(0,Q.jsx)(`div`,{className:`absolute inset-0 flex items-center justify-center`,children:(0,Q.jsx)(`div`,{className:`bg-black/50 p-2 rounded-full text-white group-hover:scale-110 transition-transform`,children:(0,Q.jsx)(R,{size:20})})})]}),(0,Q.jsx)(`div`,{className:`relative -mt-16 ml-4`,children:(0,Q.jsxs)(`div`,{className:`relative size-24 rounded-full border-4 border-white dark:border-black overflow-hidden group cursor-pointer shadow-lg bg-white dark:bg-black`,onClick:()=>g.current?.click(),children:[(c||n?.avatar)&&(0,Q.jsxs)(bn,{className:`size-full opacity-60 rounded-none`,children:[(0,Q.jsx)(xn,{src:c?URL.createObjectURL(c):n.avatar,className:`object-cover`}),(0,Q.jsx)(Sn,{children:n?.handle?.[0]?.toUpperCase()})]}),(0,Q.jsx)(`div`,{className:`absolute inset-0 flex items-center justify-center`,children:(0,Q.jsx)(`div`,{className:`bg-black/50 p-2 rounded-full text-white group-hover:scale-110 transition-transform`,children:(0,Q.jsx)(R,{size:16})})})]})}),(0,Q.jsxs)(`div`,{className:`space-y-4`,children:[(0,Q.jsx)(Jn,{label:`Name`,value:n?.name||``,onChange:e=>r({...n,name:e.target.value})}),(0,Q.jsx)(Jn,{label:`Bio`,textarea:!0,value:n?.bio||``,onChange:e=>r({...n,bio:e.target.value})}),(0,Q.jsx)(Jn,{label:`Location`,value:n?.location||``,onChange:e=>r({...n,location:e.target.value})}),(0,Q.jsx)(Jn,{label:`Website`,value:n?.website||``,onChange:e=>r({...n,website:e.target.value})})]}),(0,Q.jsx)(Hn,{className:`w-full py-3`,disabled:o,onClick:async()=>{s(!0);try{let e=n.avatar,r=n.cover;c&&(e=(await nt(c)).url),u&&(r=(await nt(u)).url),await i({...n,avatar:e,cover:r}),l(null),d(null),t(),a(`Profile updated!`)}catch(e){console.error(`Failed to update profile:`,e),a(`Failed to update profile.`,`error`)}finally{s(!1)}},children:o?(0,Q.jsx)(U,{size:24,className:`animate-spin text-white mx-auto`}):`Save changes`})]})}),f&&(0,Q.jsx)(Wn,{src:f,isOpen:!!f,onClose:()=>{p(null),h(null)},onCropComplete:e=>{let t=new File([e],`cropped-${Date.now()}.jpg`,{type:`image/jpeg`});m===`avatar`?l(t):d(t),p(null),h(null)},aspect:m===`avatar`?1:m===`cover`?3/1:void 0,circular:m===`avatar`})]})},Xn=({isOpen:e,onClose:t})=>{let{currentUser:n}=kt(),{addToast:r}=Wt(),i=ge(),[a,o]=(0,X.useState)(null),[s,c]=(0,X.useState)(!1),[l,u]=(0,X.useState)(null),d=(0,X.useRef)(null);return(0,Q.jsxs)(Bn,{isOpen:e,onClose:()=>!s&&t(),title:`Add Story`,children:[(0,Q.jsxs)(`div`,{className:`space-y-6`,children:[a?(0,Q.jsxs)(`div`,{className:`space-y-6`,children:[(0,Q.jsxs)(`div`,{className:`relative aspect-[9/16] w-full max-w-[280px] mx-auto rounded-3xl overflow-hidden shadow-2xl border dark:border-zinc-800`,children:[(0,Q.jsx)(`img`,{src:URL.createObjectURL(a),className:`w-full h-full object-cover`,alt:`Preview`}),(0,Q.jsx)(`button`,{onClick:()=>o(null),className:`absolute top-4 right-4 p-2 bg-black/50 text-white rounded-full hover:bg-rose-500 transition-colors`,title:`Remove`,children:(0,Q.jsx)(he,{size:20})})]}),(0,Q.jsxs)(`div`,{className:`flex items-center justify-center gap-4 py-2 border-y border-zinc-100 dark:border-zinc-800 bg-zinc-50/50 dark:bg-zinc-900/50 rounded-2xl`,children:[(0,Q.jsxs)(`button`,{onClick:()=>{if(!a)return;let e=new FileReader;e.onload=()=>{u(e.result)},e.readAsDataURL(a)},className:`flex flex-col items-center gap-1.5 p-3 rounded-xl hover:bg-white dark:hover:bg-zinc-800 transition-all text-zinc-600 dark:text-zinc-400 hover:text-violet-600 dark:hover:text-violet-400 group`,children:[(0,Q.jsx)(`div`,{className:`p-2 rounded-lg bg-white dark:bg-zinc-800 shadow-sm group-hover:shadow-md transition-all`,children:(0,Q.jsx)(h,{size:20})}),(0,Q.jsx)(`span`,{className:`text-[10px] font-bold uppercase tracking-wider`,children:`Crop / Edit`})]}),(0,Q.jsxs)(`button`,{className:`flex flex-col items-center gap-1.5 p-3 rounded-xl opacity-40 cursor-not-allowed text-zinc-600 dark:text-zinc-400`,children:[(0,Q.jsx)(`div`,{className:`p-2 rounded-lg bg-white dark:bg-zinc-800 shadow-sm`,children:(0,Q.jsx)(`svg`,{size:20,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,className:`w-5 h-5`,children:(0,Q.jsx)(`path`,{d:`M17 3a2.828 2.828 0 1 1 4 4L7.5 21 3 22l1-4.5L17 3z`})})}),(0,Q.jsx)(`span`,{className:`text-[10px] font-bold uppercase tracking-wider`,children:`Text`})]}),(0,Q.jsxs)(`button`,{className:`flex flex-col items-center gap-1.5 p-3 rounded-xl opacity-40 cursor-not-allowed text-zinc-600 dark:text-zinc-400`,children:[(0,Q.jsx)(`div`,{className:`p-2 rounded-lg bg-white dark:bg-zinc-800 shadow-sm`,children:(0,Q.jsxs)(`svg`,{size:20,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,className:`w-5 h-5`,children:[(0,Q.jsx)(`circle`,{cx:`12`,cy:`12`,r:`10`}),(0,Q.jsx)(`path`,{d:`M8 14s1.5 2 4 2 4-2 4-2`}),(0,Q.jsx)(`line`,{x1:`9`,y1:`9`,x2:`9.01`,y2:`9`}),(0,Q.jsx)(`line`,{x1:`15`,y1:`9`,x2:`15.01`,y2:`9`})]})}),(0,Q.jsx)(`span`,{className:`text-[10px] font-bold uppercase tracking-wider`,children:`Stickers`})]})]})]}):(0,Q.jsxs)(`div`,{className:`py-10`,children:[(0,Q.jsxs)(`div`,{className:`relative w-full group`,onClick:()=>d.current?.click(),children:[(0,Q.jsx)(`div`,{className:`relative z-40 cursor-pointer group-hover:translate-x-8 group-hover:shadow-2xl group-hover:-translate-y-8 transition-all duration-500 bg-zinc-900 dark:bg-white flex items-center justify-center h-32 w-32 mx-auto rounded-xl border-4 border-white dark:border-zinc-900`,children:(0,Q.jsxs)(`svg`,{className:`h-8 w-8 text-white/60 dark:text-zinc-950/60`,strokeLinejoin:`round`,strokeLinecap:`round`,strokeWidth:`2`,stroke:`currentColor`,fill:`none`,viewBox:`0 0 24 24`,xmlns:`http://www.w3.org/2000/svg`,children:[(0,Q.jsx)(`path`,{d:`M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2`}),(0,Q.jsx)(`path`,{d:`M7 9l5 -5l5 5`}),(0,Q.jsx)(`path`,{d:`M12 4l0 12`})]})}),(0,Q.jsx)(`div`,{className:`absolute border-2 opacity-0 group-hover:opacity-80 transition-all duration-300 border-dashed border-violet-500 inset-0 z-30 bg-transparent flex items-center justify-center h-32 w-32 mx-auto rounded-xl`})]}),(0,Q.jsxs)(`div`,{className:`text-center mt-8`,children:[(0,Q.jsx)(`p`,{className:`font-bold dark:text-white`,children:`Choose a photo`}),(0,Q.jsx)(`p`,{className:`text-sm text-zinc-500`,children:`Stories last for 24 hours`})]})]}),(0,Q.jsx)(`input`,{type:`file`,ref:d,onChange:e=>{let t=e.target.files[0];t&&o(t)},className:`hidden`,accept:`image/*`}),(0,Q.jsx)(Hn,{className:`w-full py-3 text-lg`,disabled:!a||s,onClick:async()=>{if(!(!a||!n)){c(!0);try{let e=await nt(a);await Tt(n.id,e.url,e.type),o(null),t(),r(`Story shared!`),i.invalidateQueries([`stories`])}catch(e){console.error(`Failed to create story:`,e),r(`Failed to share story.`)}finally{c(!1)}}},children:s?(0,Q.jsx)(U,{size:24,className:`animate-spin mx-auto`}):`Share story`})]}),l&&(0,Q.jsx)(Wn,{src:l,isOpen:!!l,onClose:()=>u(null),onCropComplete:e=>{o(new File([e],`story-cropped-${Date.now()}.jpg`,{type:`image/jpeg`})),u(null)},aspect:9/16})]})},Zn=s(),Qn=e=>{let t=(0,Zn.c)(21),{isPostModalOpen:n,setIsPostModalOpen:r,isEditProfileOpen:i,setIsEditProfileOpen:a,isStoryModalOpen:o,setIsStoryModalOpen:s,editProfileData:c,setEditProfileData:l}=e,u;t[0]===r?u=t[1]:(u=()=>r(!1),t[0]=r,t[1]=u);let d;t[2]!==n||t[3]!==u?(d=(0,Q.jsx)(Gn,{isOpen:n,onClose:u}),t[2]=n,t[3]=u,t[4]=d):d=t[4];let f;t[5]===a?f=t[6]:(f=()=>a(!1),t[5]=a,t[6]=f);let p;t[7]!==c||t[8]!==i||t[9]!==l||t[10]!==f?(p=(0,Q.jsx)(Yn,{isOpen:i,onClose:f,editProfileData:c,setEditProfileData:l}),t[7]=c,t[8]=i,t[9]=l,t[10]=f,t[11]=p):p=t[11];let m;t[12]===s?m=t[13]:(m=()=>s(!1),t[12]=s,t[13]=m);let h;t[14]!==o||t[15]!==m?(h=(0,Q.jsx)(Xn,{isOpen:o,onClose:m}),t[14]=o,t[15]=m,t[16]=h):h=t[16];let g;return t[17]!==d||t[18]!==p||t[19]!==h?(g=(0,Q.jsxs)(Q.Fragment,{children:[d,p,h]}),t[17]=d,t[18]=p,t[19]=h,t[20]=g):g=t[20],g},$n=s(),er=e=>{let t=(0,$n.c)(38),{story:n,onClose:r}=e,[i,a]=(0,X.useState)(0),o,s;t[0]===r?(o=t[1],s=t[2]):(o=()=>{let e=setInterval(()=>{a(e=>e>=100?(r(),100):e+1)},50);return()=>clearInterval(e)},s=[r],t[0]=r,t[1]=o,t[2]=s),(0,X.useEffect)(o,s);let c=`${i}%`,l;t[3]===c?l=t[4]:(l=(0,Q.jsx)(`div`,{className:`flex gap-1 h-1 w-full bg-white/20 rounded-full overflow-hidden`,children:(0,Q.jsx)(`div`,{className:`h-full bg-white transition-all duration-100`,style:{width:c}})}),t[3]=c,t[4]=l);let u;t[5]!==n.user.avatar||t[6]!==n.user.handle?(u=(0,Q.jsx)(xn,{src:n.user.avatar,alt:n.user.handle,className:`object-cover`}),t[5]=n.user.avatar,t[6]=n.user.handle,t[7]=u):u=t[7];let d;t[8]===n.user.handle?.[0]?d=t[9]:(d=n.user.handle?.[0]?.toUpperCase(),t[8]=n.user.handle?.[0],t[9]=d);let f;t[10]===d?f=t[11]:(f=(0,Q.jsx)(Sn,{children:d}),t[10]=d,t[11]=f);let p;t[12]!==u||t[13]!==f?(p=(0,Q.jsxs)(bn,{className:`size-10 border border-white/20`,children:[u,f]}),t[12]=u,t[13]=f,t[14]=p):p=t[14];let m;t[15]===n.user.handle?m=t[16]:(m=(0,Q.jsx)(`span`,{className:`text-white font-bold`,children:n.user.handle}),t[15]=n.user.handle,t[16]=m);let h;t[17]!==p||t[18]!==m?(h=(0,Q.jsxs)(`div`,{className:`flex items-center gap-3`,children:[p,m]}),t[17]=p,t[18]=m,t[19]=h):h=t[19];let g;t[20]===Symbol.for(`react.memo_cache_sentinel`)?(g=(0,Q.jsx)(he,{size:24}),t[20]=g):g=t[20];let _;t[21]===r?_=t[22]:(_=(0,Q.jsx)(`button`,{onClick:r,className:`text-white p-2 hover:bg-white/10 rounded-full`,children:g}),t[21]=r,t[22]=_);let v;t[23]!==h||t[24]!==_?(v=(0,Q.jsxs)(`div`,{className:`flex items-center justify-between`,children:[h,_]}),t[23]=h,t[24]=_,t[25]=v):v=t[25];let y;t[26]!==v||t[27]!==l?(y=(0,Q.jsxs)(`div`,{className:`absolute top-0 left-0 right-0 p-4 z-20 flex flex-col gap-4`,children:[l,v]}),t[26]=v,t[27]=l,t[28]=y):y=t[28];let b;t[29]===Symbol.for(`react.memo_cache_sentinel`)?(b=(0,Q.jsx)(`button`,{className:`absolute left-4 z-10 p-2 bg-black/20 hover:bg-black/40 rounded-full text-white backdrop-blur-md transition-all active:scale-90`,children:(0,Q.jsx)(ue,{size:32})}),t[29]=b):b=t[29];let x;t[30]===n.media?x=t[31]:(x=(0,Q.jsx)(`img`,{src:n.media,className:`w-full h-full object-contain rounded-2xl shadow-2xl`,alt:``}),t[30]=n.media,t[31]=x);let S;t[32]===Symbol.for(`react.memo_cache_sentinel`)?(S=(0,Q.jsx)(`button`,{className:`absolute right-4 z-10 p-2 bg-black/20 hover:bg-black/40 rounded-full text-white backdrop-blur-md transition-all active:scale-90`,children:(0,Q.jsx)(be,{size:32})}),t[32]=S):S=t[32];let C;t[33]===x?C=t[34]:(C=(0,Q.jsxs)(`div`,{className:`w-full h-full max-w-xl relative flex items-center justify-center p-4`,children:[b,x,S]}),t[33]=x,t[34]=C);let w;return t[35]!==y||t[36]!==C?(w=(0,Q.jsxs)(`div`,{className:`fixed inset-0 z-[100] bg-black flex flex-col items-center justify-center animate-in fade-in duration-300`,children:[y,C]}),t[35]=y,t[36]=C,t[37]=w):w=t[37],w},tr=s(),nr=e=>{let t=(0,tr.c)(48),{images:n,currentIndex:r,onClose:i,onNavigate:a}=e,o=r===void 0?0:r;if(!n||n.length===0)return null;let s=n[o],c=n.length>1,l;t[0]!==o||t[1]!==a?(l=e=>{e.stopPropagation(),a&&o>0&&a(o-1)},t[0]=o,t[1]=a,t[2]=l):l=t[2];let u=l,d;t[3]!==o||t[4]!==n.length||t[5]!==a?(d=e=>{e.stopPropagation(),a&&o<n.length-1&&a(o+1)},t[3]=o,t[4]=n.length,t[5]=a,t[6]=d):d=t[6];let f=d,p;t[7]===s?p=t[8]:(p=e=>{e.stopPropagation();let t=document.createElement(`a`);t.href=s,t.download=`image-${Date.now()}.jpg`,document.body.appendChild(t),t.click(),document.body.removeChild(t)},t[7]=s,t[8]=p);let m=p,h=c?`${o+1} / ${n.length}`:``,g;t[9]===h?g=t[10]:(g=(0,Q.jsx)(`div`,{className:`text-white font-medium`,children:h}),t[9]=h,t[10]=g);let _;t[11]===Symbol.for(`react.memo_cache_sentinel`)?(_=(0,Q.jsx)(ve,{size:22}),t[11]=_):_=t[11];let v;t[12]===m?v=t[13]:(v=(0,Q.jsx)(`button`,{onClick:m,className:`text-white p-2 hover:bg-white/10 rounded-full transition-colors`,title:`Download`,children:_}),t[12]=m,t[13]=v);let y;t[14]===Symbol.for(`react.memo_cache_sentinel`)?(y=(0,Q.jsx)(he,{size:24}),t[14]=y):y=t[14];let b;t[15]===i?b=t[16]:(b=(0,Q.jsx)(`button`,{onClick:i,className:`text-white p-2 hover:bg-white/10 rounded-full transition-colors`,title:`Close`,children:y}),t[15]=i,t[16]=b);let x;t[17]!==b||t[18]!==v?(x=(0,Q.jsxs)(`div`,{className:`flex items-center gap-2`,children:[v,b]}),t[17]=b,t[18]=v,t[19]=x):x=t[19];let S;t[20]!==x||t[21]!==g?(S=(0,Q.jsxs)(`div`,{className:`absolute top-0 left-0 right-0 p-4 z-20 flex items-center justify-between bg-gradient-to-b from-black/50 to-transparent`,children:[g,x]}),t[20]=x,t[21]=g,t[22]=S):S=t[22];let C;t[23]!==o||t[24]!==u||t[25]!==c?(C=c&&o>0&&(0,Q.jsx)(`button`,{onClick:u,className:`absolute left-4 z-10 p-3 bg-white/10 hover:bg-white/20 rounded-full text-white backdrop-blur-md transition-all active:scale-90`,children:(0,Q.jsx)(ue,{size:32})}),t[23]=o,t[24]=u,t[25]=c,t[26]=C):C=t[26];let w;t[27]===s?w=t[28]:(w=(0,Q.jsx)(`img`,{src:s,className:`max-w-full max-h-full object-contain select-none shadow-2xl animate-in zoom-in-95 duration-300`,alt:``,onClick:rr}),t[27]=s,t[28]=w);let T;t[29]!==o||t[30]!==f||t[31]!==c||t[32]!==n.length?(T=c&&o<n.length-1&&(0,Q.jsx)(`button`,{onClick:f,className:`absolute right-4 z-10 p-3 bg-white/10 hover:bg-white/20 rounded-full text-white backdrop-blur-md transition-all active:scale-90`,children:(0,Q.jsx)(be,{size:32})}),t[29]=o,t[30]=f,t[31]=c,t[32]=n.length,t[33]=T):T=t[33];let E;t[34]!==C||t[35]!==w||t[36]!==T?(E=(0,Q.jsxs)(`div`,{className:`w-full h-full relative flex items-center justify-center p-4`,children:[C,w,T]}),t[34]=C,t[35]=w,t[36]=T,t[37]=E):E=t[37];let D;t[38]!==o||t[39]!==c||t[40]!==n||t[41]!==a?(D=c&&(0,Q.jsx)(`div`,{className:`absolute bottom-6 flex gap-2 p-2 bg-black/40 backdrop-blur-md rounded-2xl overflow-x-auto max-w-[90%] hide-scrollbar`,onClick:ir,children:n.map((e,t)=>(0,Q.jsx)(`button`,{onClick:()=>a(t),className:`size-12 rounded-lg overflow-hidden border-2 transition-all shrink-0 ${t===o?`border-white scale-110`:`border-transparent opacity-50 hover:opacity-100`}`,children:(0,Q.jsx)(`img`,{src:e,className:`size-full object-cover`,alt:``})},t))}),t[38]=o,t[39]=c,t[40]=n,t[41]=a,t[42]=D):D=t[42];let O;return t[43]!==i||t[44]!==S||t[45]!==E||t[46]!==D?(O=(0,Q.jsxs)(`div`,{className:`fixed inset-0 z-[100] bg-black/95 backdrop-blur-sm flex flex-col items-center justify-center animate-in fade-in duration-300`,onClick:i,children:[S,E,D]}),t[43]=i,t[44]=S,t[45]=E,t[46]=D,t[47]=O):O=t[47],O};function rr(e){return e.stopPropagation()}function ir(e){return e.stopPropagation()}var ar=({type:e,onComplete:t,onSwitch:n})=>{let{login:r,signup:i}=kt(),{addToast:a}=Wt(),[o,s]=(0,X.useState)({name:``,email:``,username:``,password:``}),[c,l]=(0,X.useState)(!1),[u,d]=(0,X.useState)(null);return(0,Q.jsxs)(`div`,{className:`max-w-md mx-auto p-8 w-full animate-in fade-in slide-in-from-bottom-5 duration-300`,children:[(0,Q.jsxs)(`div`,{className:`text-center mb-8`,children:[(0,Q.jsx)(`div`,{className:`flex justify-center mb-4`,children:(0,Q.jsx)(`div`,{className:`bg-black dark:bg-white dark:text-black text-white p-3 rounded-2xl shadow-lg`,children:(0,Q.jsx)(`img`,{src:`https://archive.systemadminbd.com/wp-content/uploads/2024/06/cropped-20240613_193200-270x270.png`,alt:`Logo`,className:`w-10 h-10 rounded-xl`})})}),(0,Q.jsx)(`h2`,{className:`text-3xl font-extrabold mb-2 dark:text-white tracking-tight`,children:e===`login`?`Welcome back!`:`Join Sysm today`}),(0,Q.jsx)(`p`,{className:`text-zinc-500 font-medium`,children:`The decentralized social network`})]}),u&&(0,Q.jsxs)(`div`,{className:`mb-6 p-4 bg-rose-50 dark:bg-rose-900/20 border border-rose-100 dark:border-rose-800 rounded-xl flex items-center gap-3 text-rose-600 dark:text-rose-400 text-sm`,children:[(0,Q.jsx)(Ee,{size:18}),(0,Q.jsx)(`span`,{children:u})]}),(0,Q.jsxs)(`form`,{onSubmit:async n=>{n.preventDefault(),l(!0),d(null);try{e===`login`?(await r({email:o.email,password:o.password}),a(`Welcome back!`)):(await i({email:o.email,password:o.password,username:o.username,name:o.name}),a(`Account created successfully!`)),t()}catch(e){console.error(`Auth error:`,e),d(e.message||`Authentication failed. Please check your credentials.`),a(`Authentication failed!`)}finally{l(!1)}},className:`space-y-4`,children:[(0,Q.jsx)(Jn,{label:`Email`,type:`email`,placeholder:`john@example.com`,value:o.email,onChange:e=>s({...o,email:e.target.value}),required:!0}),e===`signup`&&(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsx)(Jn,{label:`Name`,placeholder:`John Doe`,value:o.name,onChange:e=>s({...o,name:e.target.value}),required:!0}),(0,Q.jsx)(Jn,{label:`Username`,placeholder:`johndoe`,value:o.username,onChange:e=>s({...o,username:e.target.value}),required:!0})]}),(0,Q.jsx)(Jn,{label:`Password`,type:`password`,placeholder:`â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢`,value:o.password,onChange:e=>s({...o,password:e.target.value}),required:!0}),(0,Q.jsx)(Hn,{type:`submit`,className:`w-full justify-center py-3 mt-6 text-lg`,disabled:c,children:c?(0,Q.jsx)(U,{size:24,className:`animate-spin`}):e===`login`?`Log in`:`Sign up`})]}),(0,Q.jsxs)(`div`,{className:`mt-8 text-center text-sm`,children:[(0,Q.jsx)(`span`,{className:`text-zinc-500`,children:e===`login`?`Don't have an account?`:`Already have an account?`}),(0,Q.jsx)(`button`,{onClick:n,className:`font-bold ml-1 hover:underline dark:text-white`,children:e===`login`?`Sign up`:`Log in`})]})]})},or=s(),sr=e=>{let t=(0,or.c)(6),{children:n}=e,r,i,a,o;t[0]===Symbol.for(`react.memo_cache_sentinel`)?(r={opacity:0,y:10},i={opacity:1,y:0},a={opacity:0,y:-10},o={duration:.3,ease:`easeOut`},t[0]=r,t[1]=i,t[2]=a,t[3]=o):(r=t[0],i=t[1],a=t[2],o=t[3]);let s;return t[4]===n?s=t[5]:(s=(0,Q.jsx)(I.div,{initial:r,animate:i,exit:a,transition:o,className:`w-full`,children:n}),t[4]=n,t[5]=s),s},cr=s(),lr=e=>{let t=(0,cr.c)(24),{user:n,onClick:r,isAddStory:i}=e,a=i===void 0?!1:i,o=`relative p-0.5 rounded-full ${a?`bg-transparent`:`bg-gradient-to-tr from-yellow-400 via-pink-500 to-violet-600`}`,s;t[0]!==n.avatar||t[1]!==n.handle?(s=(0,Q.jsx)(xn,{src:n.avatar,alt:n.handle,className:`object-cover`}),t[0]=n.avatar,t[1]=n.handle,t[2]=s):s=t[2];let c;t[3]===n.handle?.[0]?c=t[4]:(c=n.handle?.[0]?.toUpperCase(),t[3]=n.handle?.[0],t[4]=c);let l;t[5]===c?l=t[6]:(l=(0,Q.jsx)(Sn,{children:c}),t[5]=c,t[6]=l);let u;t[7]!==s||t[8]!==l?(u=(0,Q.jsxs)(bn,{className:`size-14 sm:size-16 border border-zinc-100 dark:border-zinc-800`,children:[s,l]}),t[7]=s,t[8]=l,t[9]=u):u=t[9];let d;t[10]===a?d=t[11]:(d=a&&(0,Q.jsx)(`div`,{className:`absolute bottom-0 right-0 bg-violet-600 border-2 border-white dark:border-black rounded-full p-1 text-white shadow-lg`,children:(0,Q.jsx)(R,{size:14,strokeWidth:3})}),t[10]=a,t[11]=d);let f;t[12]!==u||t[13]!==d?(f=(0,Q.jsx)(`div`,{className:`bg-white dark:bg-black rounded-full p-0.5`,children:(0,Q.jsxs)(`div`,{className:`relative`,children:[u,d]})}),t[12]=u,t[13]=d,t[14]=f):f=t[14];let p;t[15]!==o||t[16]!==f?(p=(0,Q.jsx)(`div`,{className:o,children:f}),t[15]=o,t[16]=f,t[17]=p):p=t[17];let m=a?`Add Story`:n.handle,h;t[18]===m?h=t[19]:(h=(0,Q.jsx)(`span`,{className:`text-[11px] font-semibold text-zinc-600 dark:text-zinc-400 truncate w-16 text-center leading-tight`,children:m}),t[18]=m,t[19]=h);let g;return t[20]!==r||t[21]!==h||t[22]!==p?(g=(0,Q.jsxs)(`button`,{onClick:r,className:`flex flex-col items-center gap-2 group shrink-0`,children:[p,h]}),t[20]=r,t[21]=h,t[22]=p,t[23]=g):g=t[23],g},ur=s();function dr(e){let t=(0,ur.c)(4),n;t[0]===e?n=t[1]:({...n}=e,t[0]=e,t[1]=n);let r;return t[2]===n?r=t[3]:(r=(0,Q.jsx)(_e,{"data-slot":`dropdown-menu`,...n}),t[2]=n,t[3]=r),r}function fr(e){let t=(0,ur.c)(4),n;t[0]===e?n=t[1]:({...n}=e,t[0]=e,t[1]=n);let r;return t[2]===n?r=t[3]:(r=(0,Q.jsx)(ne,{"data-slot":`dropdown-menu-trigger`,...n}),t[2]=n,t[3]=r),r}function pr(e){let t=(0,ur.c)(10),n,r,i;t[0]===e?(n=t[1],r=t[2],i=t[3]):({className:n,sideOffset:i,...r}=e,t[0]=e,t[1]=n,t[2]=r,t[3]=i);let a=i===void 0?4:i,o;t[4]===n?o=t[5]:(o=$(`bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md`,n),t[4]=n,t[5]=o);let s;return t[6]!==r||t[7]!==a||t[8]!==o?(s=(0,Q.jsx)(Y,{children:(0,Q.jsx)(Ce,{"data-slot":`dropdown-menu-content`,sideOffset:a,className:o,...r})}),t[6]=r,t[7]=a,t[8]=o,t[9]=s):s=t[9],s}function mr(e){let t=(0,ur.c)(12),n,r,i,a;t[0]===e?(n=t[1],r=t[2],i=t[3],a=t[4]):({className:n,inset:r,variant:a,...i}=e,t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=a);let o=a===void 0?`default`:a,s;t[5]===n?s=t[6]:(s=$(`focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4`,n),t[5]=n,t[6]=s);let c;return t[7]!==r||t[8]!==i||t[9]!==s||t[10]!==o?(c=(0,Q.jsx)(Ae,{"data-slot":`dropdown-menu-item`,"data-inset":r,"data-variant":o,className:s,...i}),t[7]=r,t[8]=i,t[9]=s,t[10]=o,t[11]=c):c=t[11],c}function hr(e){let t=(0,ur.c)(8),n,r;t[0]===e?(n=t[1],r=t[2]):({className:n,...r}=e,t[0]=e,t[1]=n,t[2]=r);let i;t[3]===n?i=t[4]:(i=$(`bg-border -mx-1 my-1 h-px`,n),t[3]=n,t[4]=i);let a;return t[5]!==r||t[6]!==i?(a=(0,Q.jsx)(Pe,{"data-slot":`dropdown-menu-separator`,className:i,...r}),t[5]=r,t[6]=i,t[7]=a):a=t[7],a}var gr=s(),_r=()=>{let e=(0,gr.c)(1),t;return e[0]===Symbol.for(`react.memo_cache_sentinel`)?(t=(0,Q.jsx)(Le,{size:16,className:`fill-blue-500 text-white ml-1 inline-block shrink-0`}),e[0]=t):t=e[0],t},vr=s(),yr=e=>{let t=(0,vr.c)(18),{poll:n,onVote:r}=e,i=n.options.reduce(br,0),[a,o]=(0,X.useState)(null),s;t[0]!==r||t[1]!==a?(s=e=>{a||(o(e),r&&r(e))},t[0]=r,t[1]=a,t[2]=s):s=t[2];let c=s,l;if(t[3]!==c||t[4]!==n.options||t[5]!==i||t[6]!==a){let e;t[8]!==c||t[9]!==i||t[10]!==a?(e=(e,t)=>{let n=i>0?Math.round((e.votes+(a===e.id?1:0))/(i+(a?1:0))*100):0,r=a===e.id;return(0,Q.jsxs)(`div`,{onClick:t=>{t.stopPropagation(),c(e.id)},className:`relative h-10 w-full rounded-xl overflow-hidden cursor-pointer border ${r?`border-violet-500 dark:border-violet-500`:`border-zinc-200 dark:border-zinc-700`}`,children:[a&&(0,Q.jsx)(`div`,{className:`absolute top-0 left-0 h-full bg-zinc-200 dark:bg-zinc-800 transition-all duration-500`,style:{width:`${n}%`}}),(0,Q.jsxs)(`div`,{className:`absolute inset-0 flex items-center justify-between px-4 z-10`,children:[(0,Q.jsxs)(`span`,{className:`font-medium text-sm ${r?`text-violet-600 font-bold`:`text-zinc-700 dark:text-zinc-200`}`,children:[e.text,` `,r&&(0,Q.jsx)(oe,{size:14,className:`inline ml-1 mb-0.5`})]}),a&&(0,Q.jsxs)(`span`,{className:`text-sm font-bold text-zinc-900 dark:text-white`,children:[n,`%`]})]})]},e.id||t)},t[8]=c,t[9]=i,t[10]=a,t[11]=e):e=t[11],l=n.options.map(e),t[3]=c,t[4]=n.options,t[5]=i,t[6]=a,t[7]=l}else l=t[7];let u=i+(a?1:0),d=a?`6 days left`:`Click to vote`,f;t[12]!==u||t[13]!==d?(f=(0,Q.jsxs)(`div`,{className:`text-xs text-zinc-500 dark:text-zinc-400 pl-1`,children:[u,` votes â€¢ `,d]}),t[12]=u,t[13]=d,t[14]=f):f=t[14];let p;return t[15]!==l||t[16]!==f?(p=(0,Q.jsxs)(`div`,{className:`mt-3 space-y-2`,children:[l,f]}),t[15]=l,t[16]=f,t[17]=p):p=t[17],p};function br(e,t){return e+t.votes}var xr=s(),Sr=e=>{let t=(0,xr.c)(23),{user:n,time:r,content:i}=e,a;t[0]!==n.avatar||t[1]!==n.handle?(a=(0,Q.jsx)(xn,{src:n.avatar,alt:n.handle}),t[0]=n.avatar,t[1]=n.handle,t[2]=a):a=t[2];let o;t[3]===n.handle[0]?o=t[4]:(o=n.handle[0]?.toUpperCase(),t[3]=n.handle[0],t[4]=o);let s;t[5]===o?s=t[6]:(s=(0,Q.jsx)(Sn,{children:o}),t[5]=o,t[6]=s);let c;t[7]!==a||t[8]!==s?(c=(0,Q.jsxs)(bn,{className:`size-6`,children:[a,s]}),t[7]=a,t[8]=s,t[9]=c):c=t[9];let l;t[10]===n.handle?l=t[11]:(l=(0,Q.jsx)(`span`,{className:`font-semibold text-sm`,children:n.handle}),t[10]=n.handle,t[11]=l);let u;t[12]===r?u=t[13]:(u=(0,Q.jsxs)(`span`,{className:`text-zinc-500 text-sm`,children:[`â€¢ `,r]}),t[12]=r,t[13]=u);let d;t[14]!==c||t[15]!==l||t[16]!==u?(d=(0,Q.jsxs)(`div`,{className:`flex items-center gap-x-2 mb-2`,children:[c,l,u]}),t[14]=c,t[15]=l,t[16]=u,t[17]=d):d=t[17];let f;t[18]===i?f=t[19]:(f=(0,Q.jsx)(`p`,{className:`text-sm text-zinc-800 dark:text-zinc-300 whitespace-pre-line`,children:i}),t[18]=i,t[19]=f);let p;return t[20]!==d||t[21]!==f?(p=(0,Q.jsxs)(`div`,{className:`p-4`,children:[d,f]}),t[20]=d,t[21]=f,t[22]=p):p=t[22],p},Cr=s(),wr=e=>{let t=(0,Cr.c)(17),{icon:n,count:r,onClick:i,active:a,activeColorClass:o}=e,s=o===void 0?`text-violet-600`:o,c=n,l;t[0]===i?l=t[1]:(l=e=>{e.stopPropagation(),i&&i(e)},t[0]=i,t[1]=l);let u=`group flex items-center gap-x-2 text-[13px] font-medium transition-all ${a?s:`text-zinc-500 hover:text-zinc-700 dark:hover:text-zinc-300`}`,d=`rounded-full p-2 transition-colors ${a?`bg-current/10`:`group-hover:bg-zinc-100 dark:group-hover:bg-zinc-800`}`,f=a?2.5:2,p=a?`fill-current`:``,m;t[2]!==c||t[3]!==f||t[4]!==p?(m=(0,Q.jsx)(c,{size:18,strokeWidth:f,className:p}),t[2]=c,t[3]=f,t[4]=p,t[5]=m):m=t[5];let h;t[6]!==d||t[7]!==m?(h=(0,Q.jsx)(`div`,{className:d,children:m}),t[6]=d,t[7]=m,t[8]=h):h=t[8];let g;t[9]!==a||t[10]!==r?(g=r!=null&&(0,Q.jsx)(`span`,{className:a?`font-bold`:``,children:r||0}),t[9]=a,t[10]=r,t[11]=g):g=t[11];let _;return t[12]!==l||t[13]!==u||t[14]!==h||t[15]!==g?(_=(0,Q.jsxs)(`button`,{onClick:l,className:u,children:[h,g]}),t[12]=l,t[13]=u,t[14]=h,t[15]=g,t[16]=_):_=t[16],_},Tr=s(),Er=e=>{let t=(0,Tr.c)(12),{src:n,poster:r}=e,i=(0,X.useRef)(null),a,o;t[0]===Symbol.for(`react.memo_cache_sentinel`)?(a=()=>{let e=new IntersectionObserver(e=>{let[t]=e;i.current?.plyr&&(t.isIntersecting?i.current.plyr.play().catch(()=>{i.current.plyr.muted=!0,i.current.plyr.play()}):i.current.plyr.pause())},{threshold:.6}),t=i.current?.elements?.container;return t&&e.observe(t),()=>{t&&e.unobserve(t)}},o=[],t[0]=a,t[1]=o):(a=t[0],o=t[1]),(0,X.useEffect)(a,o);let s;t[2]===n?s=t[3]:(s=[{src:n,type:`video/mp4`}],t[2]=n,t[3]=s);let c;t[4]!==r||t[5]!==s?(c={type:`video`,sources:s,poster:r},t[4]=r,t[5]=s,t[6]=c):c=t[6];let l;t[7]===Symbol.for(`react.memo_cache_sentinel`)?(l={controls:[`play-large`,`play`,`progress`,`current-time`,`mute`,`volume`,`fullscreen`],settings:[`quality`,`speed`],ratio:`16:9`,clickToPlay:!0,hideControls:!0,resetOnEnd:!0},t[7]=l):l=t[7];let u;t[8]===c?u=t[9]:(u={source:c,options:l},t[8]=c,t[9]=u);let d=u,f;return t[10]===d?f=t[11]:(f=(0,Q.jsx)(`div`,{className:`mt-3 overflow-hidden rounded-2xl shadow-sm border border-zinc-100 dark:border-zinc-800 bg-black`,onClick:Dr,children:(0,Q.jsx)(K,{ref:i,...d})}),t[10]=d,t[11]=f),f};function Dr(e){return e.stopPropagation()}var Or=s(),kr=e=>{let t=(0,Or.c)(17),{file:n}=e,r;t[0]===Symbol.for(`react.memo_cache_sentinel`)?(r=(0,Q.jsx)(`div`,{className:`size-10 rounded-xl bg-violet-100 dark:bg-violet-900/30 flex items-center justify-center text-violet-600`,children:(0,Q.jsx)(we,{size:20})}),t[0]=r):r=t[0];let i;t[1]===n.name?i=t[2]:(i=(0,Q.jsx)(`div`,{className:`text-sm font-bold truncate dark:text-white`,children:n.name}),t[1]=n.name,t[2]=i);let a=n.size/1024/1024,o;t[3]===a?o=t[4]:(o=a.toFixed(2),t[3]=a,t[4]=o);let s;t[5]===o?s=t[6]:(s=(0,Q.jsxs)(`div`,{className:`text-xs text-zinc-500 uppercase`,children:[o,` MB`]}),t[5]=o,t[6]=s);let c;t[7]!==i||t[8]!==s?(c=(0,Q.jsxs)(`div`,{className:`flex-1 min-w-0`,children:[i,s]}),t[7]=i,t[8]=s,t[9]=c):c=t[9];let l;t[10]===Symbol.for(`react.memo_cache_sentinel`)?(l=(0,Q.jsx)(ve,{size:18}),t[10]=l):l=t[10];let u;t[11]!==n.name||t[12]!==n.url?(u=(0,Q.jsx)(`a`,{href:n.url,download:n.name,className:`p-2 text-zinc-400 hover:text-violet-600 transition-colors`,onClick:Ar,children:l}),t[11]=n.name,t[12]=n.url,t[13]=u):u=t[13];let d;return t[14]!==c||t[15]!==u?(d=(0,Q.jsxs)(`div`,{className:`mt-3 flex items-center gap-3 p-3 rounded-2xl border border-zinc-100 dark:border-zinc-800 bg-zinc-50/50 dark:bg-zinc-900/10 group hover:border-violet-500/30 transition-colors`,children:[r,c,u]}),t[14]=c,t[15]=u,t[16]=d):d=t[16],d};function Ar(e){return e.stopPropagation()}var jr=s(),Mr=e=>{let t=(0,jr.c)(3),{items:n}=e,r=n===void 0?[]:n,{openLightbox:i}=Qt();if(!r||r.length===0)return null;let a=Array.isArray(r)?r:[r],o=a.filter(Nr),s=a.filter(Pr),c=e=>{let t=o.filter(Fr).map(Ir),n=o[e];i(t,t.indexOf(n.url||n.src))},l=o.length>0&&(0,Q.jsx)(`div`,{className:`grid gap-2 rounded-2xl overflow-hidden border border-zinc-100 dark:border-zinc-800 ${o.length===1?`grid-cols-1`:o.length===2?`grid-cols-2 aspect-[16/9]`:(o.length,`grid-cols-2 grid-rows-2 aspect-[16/9]`)}`,children:o.map((e,t)=>(0,Q.jsx)(`div`,{className:`relative overflow-hidden bg-zinc-100 dark:bg-zinc-900 cursor-pointer ${o.length===3&&t===0?`row-span-2`:``}`,onClick:n=>{e.type===`image`&&(n.stopPropagation(),c(t))},children:e.type===`video`?(0,Q.jsx)(Er,{src:e.url,poster:e.poster}):(0,Q.jsx)(`img`,{src:e.url||e.src,className:`size-full object-cover hover:scale-[1.02] transition-transform duration-500`,alt:``,loading:`lazy`})},t))}),u=s.map(Lr),d;return t[0]!==l||t[1]!==u?(d=(0,Q.jsxs)(`div`,{className:`mt-3 space-y-2`,children:[l,u]}),t[0]=l,t[1]=u,t[2]=d):d=t[2],d};function Nr(e){return e.type===`image`||e.type===`video`}function Pr(e){return e.type===`file`}function Fr(e){return e.type===`image`}function Ir(e){return e.url||e.src}function Lr(e,t){return(0,Q.jsx)(kr,{file:e},t)}var Rr=s(),zr=e=>{let t=(0,Rr.c)(6),{currentUser:n,newComment:r,setNewComment:i,handleSubmitComment:a,loading:o}=e,s;return t[0]!==n||t[1]!==a||t[2]!==o||t[3]!==r||t[4]!==i?(s=n?(0,Q.jsx)(`div`,{className:`p-4 border-y border-zinc-100 dark:border-zinc-800 bg-zinc-50/30 dark:bg-zinc-900/10`,children:(0,Q.jsxs)(`div`,{className:`flex gap-3`,children:[(0,Q.jsxs)(bn,{className:`size-9 border border-zinc-200 dark:border-zinc-700`,children:[(0,Q.jsx)(xn,{src:n.avatar,alt:n.handle,className:`object-cover`}),(0,Q.jsx)(Sn,{children:n.handle?.[0]?.toUpperCase()})]}),(0,Q.jsxs)(`div`,{className:`flex-1`,children:[(0,Q.jsx)(`textarea`,{id:`comment-input`,className:`w-full bg-transparent outline-none text-base min-h-[60px] resize-none dark:text-white placeholder:text-zinc-500`,placeholder:`Post your reply...`,value:r,onChange:e=>i(e.target.value)}),(0,Q.jsxs)(`div`,{className:`flex justify-between items-center mt-2 pt-3 border-t border-zinc-100 dark:border-zinc-800`,children:[(0,Q.jsxs)(`div`,{className:`flex text-violet-600 gap-1`,children:[(0,Q.jsx)(`button`,{className:`text-violet-600 hover:bg-violet-50 dark:hover:bg-zinc-800 rounded-full p-2`,children:(0,Q.jsx)(R,{size:20})}),(0,Q.jsx)(`button`,{className:`text-violet-600 hover:bg-violet-50 dark:hover:bg-zinc-800 rounded-full p-2`,children:(0,Q.jsx)(H,{size:20})})]}),(0,Q.jsx)(Hn,{className:`!w-auto px-5 py-1.5 text-sm font-bold min-w-[70px]`,onClick:a,disabled:!r.trim()||o,children:o?(0,Q.jsx)(U,{size:16,className:`animate-spin text-white mx-auto`}):`Reply`})]})]})]})}):(0,Q.jsx)(`div`,{className:`p-6 text-center border-y border-zinc-100 dark:border-zinc-800 bg-zinc-50/30 dark:bg-zinc-900/10`,children:(0,Q.jsx)(`p`,{className:`text-zinc-500 text-sm`,children:`Please login to join the conversation.`})}),t[0]=n,t[1]=a,t[2]=o,t[3]=r,t[4]=i,t[5]=s):s=t[5],s};const Br=(e,t,n,r)=>{let[i,a]=(0,X.useState)(!1),[o,s]=(0,X.useState)(!1),[c,l]=(0,X.useState)(t||{comments:0,likes:0,mirrors:0});return(0,X.useEffect)(()=>{n&&e&&hn(e)&&hn(n.id)&&bt(e,n.id).then(a).catch(()=>a(!1))},[e,n]),{liked:i,reposted:o,localStats:c,setLocalStats:l,handleLike:async t=>{if(t&&t.stopPropagation(),!n)return r(`Please login to like!`,`error`);if(!hn(e)||!hn(n.id)){let e=!i;a(e),l(t=>({...t,likes:e?(t.likes||0)+1:(t.likes||0)-1})),r(e?`Liked`:`Unliked`);return}try{let t=await yt(e,n.id);a(t),l(e=>({...e,likes:t?(e.likes||0)+1:(e.likes||0)-1})),r(t?`Liked`:`Unliked`)}catch(e){console.error(`Failed to toggle like:`,e),r(`Failed to update like state`,`error`)}},handleRepost:e=>{if(e&&e.stopPropagation(),!n)return r(`Please login to repost!`,`error`);s(!o),l(e=>({...e,mirrors:o?(e.mirrors||0)-1:(e.mirrors||0)+1})),r(o?`Removed repost`:`Reposted`)}}};var Vr=({id:e,user:t,timeAgo:n,content:r,contentClass:a,media:o,quotedPost:s,stats:c,onClick:l,repostedBy:u,onUserClick:d,currentUser:f,showToast:p,poll:m,isDetail:h,initialComments:g})=>{let{liked:_,reposted:v,localStats:b,setLocalStats:x,handleLike:S,handleRepost:w}=Br(e,c,f,p),[T,E]=(0,X.useState)(g||[]),[D,O]=(0,X.useState)(``),[A,M]=(0,X.useState)(!1),[N,P]=(0,X.useState)(!1),F=(0,X.useCallback)(async()=>{if(e){M(!0);try{E(await _t(e))}catch(e){console.error(`Failed to load comments:`,e)}finally{M(!1)}}},[e]);(0,X.useEffect)(()=>{h&&e&&F()},[h,e,F]);let I=async t=>{if(t.preventDefault(),!(!D.trim()||!f)){P(!0);try{await vt(e,f.id,D),O(``),x(e=>({...e,comments:(e.comments||0)+1})),p&&p(`Reply posted!`),F()}catch(e){console.error(`Failed to post comment:`,e),p&&p(`Failed to post reply.`)}finally{P(!1)}}},L=t=>{t.stopPropagation();let n=`${window.location.origin}/post/${e}`;navigator.clipboard.writeText(n),p&&p(`Link copied to clipboard!`)},R=({trigger:e})=>(0,Q.jsxs)(dr,{children:[(0,Q.jsx)(fr,{asChild:!0,onClick:e=>e.stopPropagation(),children:e}),(0,Q.jsxs)(pr,{align:`end`,className:`w-48 rounded-xl bg-white dark:bg-zinc-900 border-zinc-100 dark:border-zinc-800`,children:[(0,Q.jsxs)(mr,{className:`gap-2 cursor-pointer focus:bg-zinc-50 dark:focus:bg-zinc-800 py-2.5`,onClick:L,children:[(0,Q.jsx)(j,{size:16}),(0,Q.jsx)(`span`,{children:`Copy link to post`})]}),(0,Q.jsxs)(mr,{className:`gap-2 cursor-pointer focus:bg-zinc-50 dark:focus:bg-zinc-800 py-2.5`,onClick:e=>{e.stopPropagation(),p&&p(`Post reported`)},children:[(0,Q.jsx)(fe,{size:16}),(0,Q.jsx)(`span`,{children:`Report post`})]}),!z&&(0,Q.jsxs)(mr,{className:`gap-2 cursor-pointer focus:bg-zinc-50 dark:focus:bg-zinc-800 py-2.5 text-rose-500 focus:text-rose-500`,onClick:e=>{e.stopPropagation(),p&&p(`User blocked`)},children:[(0,Q.jsx)(C,{size:16}),(0,Q.jsxs)(`span`,{children:[`Block @`,t.handle]})]}),z&&(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsx)(hr,{className:`bg-zinc-100 dark:bg-zinc-800`}),(0,Q.jsxs)(mr,{className:`gap-2 cursor-pointer focus:bg-rose-50 dark:focus:bg-rose-900/20 py-2.5 text-rose-500 focus:text-rose-500`,onClick:e=>{e.stopPropagation(),p&&p(`Delete not implemented yet`)},children:[(0,Q.jsx)(k,{size:16}),(0,Q.jsx)(`span`,{children:`Delete post`})]})]})]})]}),z=f?.handle===t.handle,B=e=>e?X.isValidElement(e)?e:(0,Q.jsx)(Mr,{items:e}):null,V=(e,t)=>typeof e==`string`?(0,Q.jsx)(`p`,{className:`whitespace-pre-line ${t||``}`,children:e}):e;return h?(0,Q.jsxs)(`div`,{className:`flex flex-col`,children:[(0,Q.jsxs)(`article`,{className:`p-5 dark:bg-black`,children:[(0,Q.jsxs)(`div`,{className:`flex items-start justify-between`,children:[(0,Q.jsxs)(`div`,{className:`flex items-start gap-x-3`,children:[(0,Q.jsx)(`button`,{className:`shrink-0`,onClick:()=>d&&d(t.handle),children:(0,Q.jsxs)(bn,{className:`size-12 border border-zinc-200 dark:border-zinc-700`,children:[(0,Q.jsx)(xn,{src:t.avatar,alt:t.handle,className:`object-cover`}),(0,Q.jsx)(Sn,{children:t.handle[0]?.toUpperCase()})]})}),(0,Q.jsxs)(`div`,{className:`flex flex-col`,children:[(0,Q.jsx)(`div`,{className:`flex flex-wrap items-center gap-x-1`,children:(0,Q.jsxs)(`button`,{className:`font-bold hover:underline text-zinc-900 dark:text-white flex items-center gap-1 text-base`,onClick:()=>d&&d(t.handle),children:[t.handle,t.verified&&(0,Q.jsx)(_r,{})]})}),(0,Q.jsxs)(`span`,{className:`text-sm text-zinc-500 dark:text-zinc-400`,children:[`@`,t.handle]})]})]}),(0,Q.jsx)(R,{trigger:(0,Q.jsx)(`button`,{className:`text-zinc-500 hover:bg-zinc-100 dark:hover:bg-zinc-800 rounded-full p-2 transition-colors`,children:(0,Q.jsx)(je,{size:20})})})]}),(0,Q.jsx)(`div`,{className:`break-words text-zinc-900 dark:text-zinc-100 mt-4 text-xl leading-8 whitespace-pre-line`,children:V(r,a)}),B(o),m&&(0,Q.jsx)(yr,{poll:m}),s&&(0,Q.jsx)(`div`,{className:`mt-4 border border-zinc-200 dark:border-zinc-700 rounded-2xl overflow-hidden shadow-sm`,children:(0,Q.jsx)(Sr,{...s})}),(0,Q.jsx)(`div`,{className:`my-4 flex items-center text-zinc-500 dark:text-zinc-400 text-sm border-b border-zinc-100 dark:border-zinc-800 pb-4`,children:n||`Recent`}),(0,Q.jsxs)(`div`,{className:`border-b border-zinc-100 dark:border-zinc-800 pb-4 flex items-center gap-x-6 text-zinc-500 dark:text-zinc-400 text-sm`,children:[(0,Q.jsxs)(`div`,{className:`flex items-center gap-x-1`,children:[(0,Q.jsx)(`span`,{className:`font-bold text-black dark:text-white`,children:b.comments||0}),` `,(0,Q.jsx)(`span`,{className:`opacity-70`,children:`Comments`})]}),(0,Q.jsxs)(`div`,{className:`flex items-center gap-x-1`,children:[(0,Q.jsx)(`span`,{className:`font-bold text-black dark:text-white`,children:b.likes||0}),` `,(0,Q.jsx)(`span`,{className:`opacity-70`,children:`Likes`})]})]}),(0,Q.jsxs)(`div`,{className:`mt-4 flex w-full items-center justify-around py-1`,children:[(0,Q.jsx)(wr,{icon:y,onClick:()=>document.getElementById(`comment-input`)?.focus()}),(0,Q.jsx)(wr,{icon:i,onClick:w,active:v,activeColorClass:`text-emerald-500`}),(0,Q.jsx)(wr,{icon:ke,onClick:S,active:_,activeColorClass:`text-rose-500`})]})]}),(0,Q.jsx)(zr,{currentUser:f,newComment:D,setNewComment:O,handleSubmitComment:I,loading:N}),(0,Q.jsx)(`div`,{className:`divide-y divide-zinc-100 dark:divide-zinc-800`,children:A?(0,Q.jsx)(`div`,{className:`p-8 flex justify-center`,children:(0,Q.jsx)(U,{className:`animate-spin text-violet-500`})}):T.map(e=>(0,Q.jsx)(Vr,{...e,onUserClick:d,currentUser:f,showToast:p},e.id))})]}):(0,Q.jsxs)(`article`,{onClick:l,className:`px-5 pt-4 pb-3 hover:bg-zinc-50/80 dark:hover:bg-zinc-900/40 transition-colors border-b border-zinc-100 dark:border-zinc-800 last:border-0 ${l?`cursor-pointer`:``}`,children:[u&&(0,Q.jsxs)(`div`,{className:`mb-2 flex items-center space-x-1.5 text-[13px] text-zinc-500 font-semibold ml-1`,children:[(0,Q.jsx)(i,{size:14,className:`text-zinc-400`}),(0,Q.jsx)(`span`,{className:`hover:underline cursor-pointer flex items-center text-zinc-600 dark:text-zinc-400`,onClick:e=>{e.stopPropagation(),d&&d(u.handle)},children:(0,Q.jsx)(`span`,{className:`truncate max-w-[150px]`,children:typeof u==`object`?u.name:u})}),(0,Q.jsx)(`span`,{className:`text-zinc-400`,children:`reposted`})]}),(0,Q.jsxs)(`div`,{className:`flex items-start gap-x-3`,children:[(0,Q.jsx)(`button`,{className:`shrink-0 group`,onClick:e=>{e.stopPropagation(),d&&d(t.handle)},children:(0,Q.jsxs)(bn,{className:`size-11 border border-zinc-200 dark:border-zinc-700 group-hover:brightness-95 transition-all`,children:[(0,Q.jsx)(xn,{src:t.avatar,alt:t.handle,className:`object-cover`}),(0,Q.jsx)(Sn,{children:t.handle[0]?.toUpperCase()})]})}),(0,Q.jsxs)(`div`,{className:`min-w-0 flex-1`,children:[(0,Q.jsxs)(`div`,{className:`flex w-full items-start justify-between`,children:[(0,Q.jsx)(`div`,{className:`flex flex-col min-w-0`,children:(0,Q.jsxs)(`div`,{className:`flex flex-wrap items-center gap-x-1`,children:[(0,Q.jsxs)(`button`,{className:`font-bold hover:underline text-zinc-900 dark:text-white flex items-center gap-1 truncate text-[15px]`,onClick:e=>{e.stopPropagation(),d&&d(t.handle)},children:[(0,Q.jsx)(`span`,{className:`truncate`,children:t.handle}),t.verified&&(0,Q.jsx)(_r,{})]}),(0,Q.jsxs)(`span`,{className:`text-zinc-400 text-sm ml-1 whitespace-nowrap`,children:[`â€¢ `,n||`Recent`]})]})}),(0,Q.jsx)(R,{trigger:(0,Q.jsx)(`button`,{className:`text-zinc-400 hover:bg-zinc-100 hover:text-zinc-700 dark:hover:bg-zinc-800 dark:hover:text-zinc-200 rounded-full p-2 -mr-2 transition-colors`,children:(0,Q.jsx)(je,{size:18})})})]}),(0,Q.jsxs)(`div`,{className:`break-words text-zinc-900 dark:text-zinc-100 mt-1 whitespace-pre-line text-[15px] leading-relaxed`,children:[V(r,a),B(o),m&&(0,Q.jsx)(yr,{poll:m,onVote:()=>p&&p(`Voted!`)}),s&&(0,Q.jsx)(`div`,{className:`mt-3 border border-zinc-200 dark:border-zinc-700 rounded-2xl overflow-hidden bg-white dark:bg-zinc-900 hover:bg-zinc-50 dark:hover:bg-zinc-800 transition-colors cursor-pointer`,onClick:e=>e.stopPropagation(),children:(0,Q.jsx)(Sr,{...s})})]}),(0,Q.jsx)(`div`,{className:`mt-3 flex w-full flex-wrap items-center justify-between gap-3 pr-4`,children:(0,Q.jsxs)(`div`,{className:`flex items-center gap-x-6`,children:[(0,Q.jsx)(wr,{icon:y,count:b.comments,onClick:l}),(0,Q.jsx)(wr,{icon:i,count:b.mirrors,active:v,onClick:w,activeColorClass:`text-emerald-500`}),(0,Q.jsx)(wr,{icon:ke,count:b.likes,active:_,onClick:S,activeColorClass:`text-rose-500`})]})})]})]})]})},Hr=Vr,Ur=s(),Wr=()=>{let e=(0,Ur.c)(3),t;e[0]===Symbol.for(`react.memo_cache_sentinel`)?(t=(0,Q.jsx)(`div`,{className:`size-11 rounded-full bg-zinc-200 dark:bg-zinc-800 shrink-0`}),e[0]=t):t=e[0];let n;e[1]===Symbol.for(`react.memo_cache_sentinel`)?(n=(0,Q.jsx)(`div`,{className:`h-4 bg-zinc-200 dark:bg-zinc-800 rounded w-1/3`}),e[1]=n):n=e[1];let r;return e[2]===Symbol.for(`react.memo_cache_sentinel`)?(r=(0,Q.jsx)(`div`,{className:`px-5 pt-4 pb-3 border-b border-zinc-100 dark:border-zinc-800 animate-pulse`,children:(0,Q.jsxs)(`div`,{className:`flex items-start gap-x-3`,children:[t,(0,Q.jsxs)(`div`,{className:`flex-1 space-y-3`,children:[n,(0,Q.jsxs)(`div`,{className:`space-y-2`,children:[(0,Q.jsx)(`div`,{className:`h-3 bg-zinc-200 dark:bg-zinc-800 rounded w-full`}),(0,Q.jsx)(`div`,{className:`h-3 bg-zinc-200 dark:bg-zinc-800 rounded w-5/6`})]}),(0,Q.jsx)(`div`,{className:`h-48 bg-zinc-200 dark:bg-zinc-800 rounded-xl w-full`})]})]})}),e[2]=r):r=e[2],r},Gr=s(),Kr=e=>{let t=(0,Gr.c)(35),{onStoryClick:n,onAddStory:r}=e,{currentUser:i}=kt(),{addToast:a}=Wt(),o=We(),s;t[0]===Symbol.for(`react.memo_cache_sentinel`)?(s={queryKey:[`posts`],queryFn:rt},t[0]=s):s=t[0];let{data:c,isLoading:u}=l(s),d;t[1]===c?d=t[2]:(d=c===void 0?[]:c,t[1]=c,t[2]=d);let f=d,p;t[3]===Symbol.for(`react.memo_cache_sentinel`)?(p={queryKey:[`stories`],queryFn:wt},t[3]=p):p=t[3];let{data:m,isLoading:h}=l(p),g;t[4]===m?g=t[5]:(g=m===void 0?[]:m,t[4]=m,t[5]=g);let _=g,v;t[6]===f?v=t[7]:(v=f.filter(qr),t[6]=f,t[7]=v);let y=v,b;t[8]===o?b=t[9]:(b=e=>{o(`/post/${e}`)},t[8]=o,t[9]=b);let x=b,S;t[10]===o?S=t[11]:(S=e=>{o(`/u/${e}`)},t[10]=o,t[11]=S);let C=S;if(u||h){let e;return t[12]===Symbol.for(`react.memo_cache_sentinel`)?(e=(0,Q.jsxs)(`div`,{className:`border-y md:border border-zinc-100 dark:border-zinc-800 bg-white dark:bg-black rounded-none md:rounded-xl overflow-hidden min-h-screen`,children:[(0,Q.jsxs)(`div`,{className:`flex gap-3 overflow-x-auto no-scrollbar py-4 px-4 bg-white dark:bg-black border-b border-zinc-100 dark:border-zinc-800`,children:[(0,Q.jsx)(`div`,{className:`size-16 rounded-full bg-zinc-100 dark:bg-zinc-900 animate-pulse shrink-0`}),(0,Q.jsx)(`div`,{className:`size-16 rounded-full bg-zinc-100 dark:bg-zinc-900 animate-pulse shrink-0`}),(0,Q.jsx)(`div`,{className:`size-16 rounded-full bg-zinc-100 dark:bg-zinc-900 animate-pulse shrink-0`})]}),[1,2,3].map(Jr)]}),t[12]=e):e=t[12],e}let w;t[13]!==i||t[14]!==r?(w=i&&(0,Q.jsx)(lr,{user:i,isAddStory:!0,onClick:r}),t[13]=i,t[14]=r,t[15]=w):w=t[15];let T;if(t[16]!==n||t[17]!==_){let e;t[19]===n?e=t[20]:(e=e=>(0,Q.jsx)(lr,{user:e.user,onClick:()=>n(e)},e.id),t[19]=n,t[20]=e),T=_.map(e),t[16]=n,t[17]=_,t[18]=T}else T=t[18];let E;t[21]!==w||t[22]!==T?(E=(0,Q.jsxs)(`div`,{className:`flex gap-4 overflow-x-auto no-scrollbar py-4 px-4 bg-white dark:bg-black border-b border-zinc-100 dark:border-zinc-800`,children:[w,T]}),t[21]=w,t[22]=T,t[23]=E):E=t[23];let D;t[24]!==a||t[25]!==i||t[26]!==x||t[27]!==C||t[28]!==y?(D=y.length>0?y.map(e=>(0,Q.jsx)(Hr,{...e,currentUser:i,showToast:a,onClick:()=>x(e.id),onUserClick:C},e.id)):(0,Q.jsxs)(`div`,{className:`p-20 text-center text-zinc-500`,children:[(0,Q.jsx)(`p`,{className:`text-lg font-medium`,children:`No posts yet.`}),(0,Q.jsx)(`p`,{className:`text-sm`,children:`Be the first to share something amazing!`})]}),t[24]=a,t[25]=i,t[26]=x,t[27]=C,t[28]=y,t[29]=D):D=t[29];let O;t[30]===D?O=t[31]:(O=(0,Q.jsx)(`div`,{className:`border-y md:border border-zinc-100 dark:border-zinc-800 bg-white dark:bg-black rounded-none md:rounded-xl overflow-hidden min-h-screen shadow-sm`,children:D}),t[30]=D,t[31]=O);let k;return t[32]!==E||t[33]!==O?(k=(0,Q.jsxs)(`div`,{children:[E,O]}),t[32]=E,t[33]=O,t[34]=k):k=t[34],k};function qr(e){return!e.parent_id}function Jr(e){return(0,Q.jsx)(Wr,{},e)}var Yr=s(),Xr=e=>{let t=(0,Yr.c)(44),{profile:n,onUserClick:r,isCommunity:i}=e,a=i===void 0?!1:i,o;t[0]!==r||t[1]!==n.handle?(o=()=>r(n.handle),t[0]=r,t[1]=n.handle,t[2]=o):o=t[2];let s=`size-12 border border-zinc-200 dark:border-zinc-800 shadow-sm ${a?`rounded-2xl`:``}`,c;t[3]!==n.avatar||t[4]!==n.handle?(c=(0,Q.jsx)(xn,{src:n.avatar,alt:n.handle,className:`object-cover`}),t[3]=n.avatar,t[4]=n.handle,t[5]=c):c=t[5];let l=a?`rounded-2xl`:``,u;t[6]===n.handle?.[0]?u=t[7]:(u=n.handle?.[0]?.toUpperCase(),t[6]=n.handle?.[0],t[7]=u);let d;t[8]!==l||t[9]!==u?(d=(0,Q.jsx)(Sn,{className:l,children:u}),t[8]=l,t[9]=u,t[10]=d):d=t[10];let f;t[11]!==s||t[12]!==c||t[13]!==d?(f=(0,Q.jsxs)(bn,{className:s,children:[c,d]}),t[11]=s,t[12]=c,t[13]=d,t[14]=f):f=t[14];let p;t[15]===n.name?p=t[16]:(p=(0,Q.jsx)(`span`,{className:`font-bold text-zinc-900 dark:text-white group-hover:underline leading-none`,children:n.name}),t[15]=n.name,t[16]=p);let m;t[17]===n.verified?m=t[18]:(m=n.verified&&(0,Q.jsx)(_r,{}),t[17]=n.verified,t[18]=m);let h;t[19]!==m||t[20]!==p?(h=(0,Q.jsxs)(`div`,{className:`flex items-center gap-1`,children:[p,m]}),t[19]=m,t[20]=p,t[21]=h):h=t[21];let g;t[22]===n.handle?g=t[23]:(g=(0,Q.jsxs)(`span`,{className:`text-sm text-zinc-500 mt-0.5`,children:[`@`,n.handle]}),t[22]=n.handle,t[23]=g);let _;t[24]!==a||t[25]!==n.members?(_=a&&n.members&&(0,Q.jsxs)(`span`,{className:`text-xs text-zinc-400 mt-1`,children:[n.members,` members`]}),t[24]=a,t[25]=n.members,t[26]=_):_=t[26];let v;t[27]!==a||t[28]!==n.followers?(v=!a&&n.followers&&(0,Q.jsxs)(`span`,{className:`text-xs text-zinc-400 mt-1`,children:[n.followers,` followers`]}),t[27]=a,t[28]=n.followers,t[29]=v):v=t[29];let y;t[30]!==h||t[31]!==g||t[32]!==_||t[33]!==v?(y=(0,Q.jsxs)(`div`,{className:`flex flex-col`,children:[h,g,_,v]}),t[30]=h,t[31]=g,t[32]=_,t[33]=v,t[34]=y):y=t[34];let b;t[35]!==y||t[36]!==f?(b=(0,Q.jsxs)(`div`,{className:`flex items-center gap-3`,children:[f,y]}),t[35]=y,t[36]=f,t[37]=b):b=t[37];let x=a?`Join`:`Follow`,S;t[38]===x?S=t[39]:(S=(0,Q.jsx)(Hn,{variant:`outline`,className:`!w-auto !py-1.5 !px-4 text-sm font-bold rounded-full border-zinc-200 dark:border-zinc-700 hover:bg-zinc-100 dark:hover:bg-zinc-800`,onClick:Zr,children:x}),t[38]=x,t[39]=S);let C;return t[40]!==b||t[41]!==S||t[42]!==o?(C=(0,Q.jsxs)(`div`,{className:`flex items-center justify-between p-4 border-b border-zinc-100 dark:border-zinc-800 hover:bg-zinc-50 dark:hover:bg-zinc-900/40 transition-colors group cursor-pointer`,onClick:o,children:[b,S]}),t[40]=b,t[41]=S,t[42]=o,t[43]=C):C=t[43],C};function Zr(e){e.stopPropagation()}var Qr=s();function $r(e){let t=(0,Qr.c)(8),n,r;t[0]===e?(n=t[1],r=t[2]):({className:n,...r}=e,t[0]=e,t[1]=n,t[2]=r);let i;t[3]===n?i=t[4]:(i=$(`flex flex-col gap-2`,n),t[3]=n,t[4]=i);let a;return t[5]!==r||t[6]!==i?(a=(0,Q.jsx)(Oe,{"data-slot":`tabs`,className:i,...r}),t[5]=r,t[6]=i,t[7]=a):a=t[7],a}function ei(e){let t=(0,Qr.c)(8),n,r;t[0]===e?(n=t[1],r=t[2]):({className:n,...r}=e,t[0]=e,t[1]=n,t[2]=r);let i;t[3]===n?i=t[4]:(i=$(`bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]`,n),t[3]=n,t[4]=i);let a;return t[5]!==r||t[6]!==i?(a=(0,Q.jsx)(xe,{"data-slot":`tabs-list`,className:i,...r}),t[5]=r,t[6]=i,t[7]=a):a=t[7],a}function ti(e){let t=(0,Qr.c)(8),n,r;t[0]===e?(n=t[1],r=t[2]):({className:n,...r}=e,t[0]=e,t[1]=n,t[2]=r);let i;t[3]===n?i=t[4]:(i=$(`inline-flex items-center justify-center gap-1.5 px-2 py-1 text-sm font-medium whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 outline-none focus:outline-none focus-visible:outline-none ring-0 focus:ring-0 focus-visible:ring-0 shadow-none data-[state=active]:shadow-none`,n),t[3]=n,t[4]=i);let a;return t[5]!==r||t[6]!==i?(a=(0,Q.jsx)(de,{"data-slot":`tabs-trigger`,className:i,...r}),t[5]=r,t[6]=i,t[7]=a):a=t[7],a}function ni(e){let t=(0,Qr.c)(8),n,r;t[0]===e?(n=t[1],r=t[2]):({className:n,...r}=e,t[0]=e,t[1]=n,t[2]=r);let i;t[3]===n?i=t[4]:(i=$(`flex-1 outline-none`,n),t[3]=n,t[4]=i);let a;return t[5]!==r||t[6]!==i?(a=(0,Q.jsx)(Me,{"data-slot":`tabs-content`,className:i,...r}),t[5]=r,t[6]=i,t[7]=a):a=t[7],a}var ri=s(),ii=()=>{let e=(0,ri.c)(53),{currentUser:t}=kt(),{addToast:n}=Wt(),r=We(),[i,a]=(0,X.useState)(`users`),[o,s]=(0,X.useState)(``),c;e[0]===Symbol.for(`react.memo_cache_sentinel`)?(c={queryKey:[`posts`],queryFn:rt},e[0]=c):c=e[0];let{data:u,isLoading:d}=l(c),f;e[1]===u?f=e[2]:(f=u===void 0?[]:u,e[1]=u,e[2]=f);let p=f,m;e[3]===Symbol.for(`react.memo_cache_sentinel`)?(m={queryKey:[`profiles`],queryFn:ct},e[3]=m):m=e[3];let{data:h,isLoading:g}=l(m),_;e[4]===h?_=e[5]:(_=h===void 0?{}:h,e[4]=h,e[5]=_);let v=_,y;e[6]!==v||e[7]!==o?(y=Object.values(v).filter(ai),o&&(y=y.filter(e=>e.name?.toLowerCase().includes(o.toLowerCase())||e.handle?.toLowerCase().includes(o.toLowerCase()))),e[6]=v,e[7]=o,e[8]=y):y=e[8];let b=y,x;e[9]!==v||e[10]!==o?(x=Object.values(v).filter(oi),o&&(x=x.filter(e=>e.name?.toLowerCase().includes(o.toLowerCase())||e.handle?.toLowerCase().includes(o.toLowerCase()))),e[9]=v,e[10]=o,e[11]=x):x=e[11];let S=x,C;if(e[12]!==p||e[13]!==o){if(C=p.filter(si),o){let t;e[15]===o?t=e[16]:(t=e=>e.content?.toLowerCase().includes(o.toLowerCase()),e[15]=o,e[16]=t),C=C.filter(t)}e[12]=p,e[13]=o,e[14]=C}else C=e[14];let w=C,T;e[17]===r?T=e[18]:(T=e=>{r(`/post/${e}`)},e[17]=r,e[18]=T);let E=T,D;e[19]===r?D=e[20]:(D=e=>{r(`/u/${e}`)},e[19]=r,e[20]=D);let O=D;if(d||g){let t;return e[21]===Symbol.for(`react.memo_cache_sentinel`)?(t=(0,Q.jsx)(`div`,{className:`border-y md:border border-zinc-100 dark:border-zinc-800 bg-white dark:bg-black rounded-none md:rounded-xl overflow-hidden min-h-screen`,children:[1,2,3].map(ci)}),e[21]=t):t=e[21],t}let k;e[22]===Symbol.for(`react.memo_cache_sentinel`)?(k=()=>s(``),e[22]=k):k=e[22];let A=`Search ${i}...`,j;e[23]!==o||e[24]!==A?(j=(0,Q.jsx)(`div`,{className:`p-4`,children:(0,Q.jsx)(sn,{value:o,onChange:s,onClear:k,placeholder:A})}),e[23]=o,e[24]=A,e[25]=j):j=e[25];let M;e[26]===Symbol.for(`react.memo_cache_sentinel`)?(M=(0,Q.jsx)(ei,{className:`w-full h-auto bg-transparent p-0 rounded-none justify-around px-5`,children:[`users`,`communities`,`reels`].map(li)}),e[26]=M):M=e[26];let N;e[27]===j?N=e[28]:(N=(0,Q.jsxs)(`div`,{className:`sticky top-0 bg-white/90 dark:bg-black/90 backdrop-blur-md z-10 border-b border-zinc-100 dark:border-zinc-800`,children:[j,M]}),e[27]=j,e[28]=N);let P;e[29]!==O||e[30]!==b?(P=b.length>0?b.map(e=>(0,Q.jsx)(Xr,{profile:e,onUserClick:O},e.handle)):(0,Q.jsx)(`div`,{className:`p-20 text-center text-zinc-500`,children:(0,Q.jsx)(`p`,{className:`font-bold`,children:`No users found`})}),e[29]=O,e[30]=b,e[31]=P):P=e[31];let F;e[32]===P?F=e[33]:(F=(0,Q.jsx)(ni,{value:`users`,className:`m-0 border-none`,children:(0,Q.jsx)(`div`,{className:`divide-y divide-zinc-100 dark:divide-zinc-800`,children:P})}),e[32]=P,e[33]=F);let I;e[34]!==S||e[35]!==O?(I=S.length>0?S.map(e=>(0,Q.jsx)(Xr,{profile:e,onUserClick:O,isCommunity:!0},e.handle)):(0,Q.jsx)(`div`,{className:`p-20 text-center text-zinc-500`,children:(0,Q.jsx)(`p`,{className:`font-bold`,children:`No communities found`})}),e[34]=S,e[35]=O,e[36]=I):I=e[36];let L;e[37]===I?L=e[38]:(L=(0,Q.jsx)(ni,{value:`communities`,className:`m-0 border-none`,children:(0,Q.jsx)(`div`,{className:`divide-y divide-zinc-100 dark:divide-zinc-800`,children:I})}),e[37]=I,e[38]=L);let R;e[39]!==n||e[40]!==t||e[41]!==E||e[42]!==O||e[43]!==w?(R=w.length>0?w.map(e=>(0,Q.jsx)(Hr,{...e,currentUser:t,showToast:n,onClick:()=>E(e.id),onUserClick:O},e.id)):(0,Q.jsx)(`div`,{className:`p-20 text-center text-zinc-500`,children:(0,Q.jsx)(`p`,{className:`font-bold`,children:`No reels found`})}),e[39]=n,e[40]=t,e[41]=E,e[42]=O,e[43]=w,e[44]=R):R=e[44];let z;e[45]===R?z=e[46]:(z=(0,Q.jsx)(ni,{value:`reels`,className:`m-0 border-none`,children:(0,Q.jsx)(`div`,{children:R})}),e[45]=R,e[46]=z);let B;return e[47]!==i||e[48]!==N||e[49]!==F||e[50]!==L||e[51]!==z?(B=(0,Q.jsx)(`div`,{className:`border-y md:border border-zinc-100 dark:border-zinc-800 bg-white dark:bg-black rounded-none md:rounded-xl overflow-hidden min-h-screen shadow-sm`,children:(0,Q.jsxs)($r,{value:i,onValueChange:a,className:`w-full`,children:[N,F,L,z]})}),e[47]=i,e[48]=N,e[49]=F,e[50]=L,e[51]=z,e[52]=B):B=e[52],B};function ai(e){return e.type!==`community`}function oi(e){return e.type===`community`}function si(e){return e.type===`video`}function ci(e){return(0,Q.jsx)(Wr,{},e)}function li(e){return(0,Q.jsx)(ti,{value:e,className:`relative py-4 px-2 text-sm font-semibold transition-all border-b-2 rounded-none whitespace-nowrap flex-1 text-center capitalize data-[state=active]:border-black dark:data-[state=active]:border-white data-[state=active]:text-black dark:data-[state=active]:text-white text-zinc-500 hover:text-zinc-800 dark:hover:text-zinc-300`,children:e},e)}var ui=s(),di=e=>{let t=(0,ui.c)(58),{reel:n}=e,r=(0,X.useRef)(null),[i,a]=(0,X.useState)(!1),o=(0,X.useRef)(0),s=Array.isArray(n.media)?n.media[0]?.src||n.media[0]?.url:n.media?.src||n.media?.url||n.url,c,l;t[0]===Symbol.for(`react.memo_cache_sentinel`)?(c=()=>{let e=new IntersectionObserver(e=>{let[t]=e;r.current?.plyr&&(t.isIntersecting?r.current.plyr.play().catch(()=>{r.current.plyr.muted=!0,r.current.plyr.play()}):r.current.plyr.pause())},{threshold:.8}),t=r.current?.elements?.container;return t&&e.observe(t),()=>{t&&e.unobserve(t)}},l=[],t[0]=c,t[1]=l):(c=t[0],l=t[1]),(0,X.useEffect)(c,l);let d;t[2]===Symbol.for(`react.memo_cache_sentinel`)?(d=()=>{let e=Date.now();e-o.current<300&&(a(!0),setTimeout(()=>a(!1),1e3)),o.current=e},t[2]=d):d=t[2];let f=d,p;t[3]===s?p=t[4]:(p={type:`video`,sources:[{src:s,type:`video/mp4`}]},t[3]=s,t[4]=p);let h;t[5]===Symbol.for(`react.memo_cache_sentinel`)?(h={controls:[],loop:{active:!0},clickToPlay:!0,ratio:`9:16`},t[5]=h):h=t[5];let g;t[6]===p?g=t[7]:(g={source:p,options:h},t[6]=p,t[7]=g);let _=g,v;t[8]===_?v=t[9]:(v=(0,Q.jsx)(`div`,{className:`w-full h-full max-w-[450px]`,children:(0,Q.jsx)(K,{ref:r,..._})}),t[8]=_,t[9]=v);let b;t[10]===i?b=t[11]:(b=i&&(0,Q.jsx)(I.div,{initial:{scale:0,opacity:0},animate:{scale:1.5,opacity:1},exit:{scale:2,opacity:0},className:`absolute inset-0 flex items-center justify-center pointer-events-none z-50`,children:(0,Q.jsx)(ke,{size:100,fill:`white`,className:`text-white drop-shadow-2xl`})}),t[10]=i,t[11]=b);let S;t[12]===b?S=t[13]:(S=(0,Q.jsx)(u,{children:b}),t[12]=b,t[13]=S);let C;t[14]===Symbol.for(`react.memo_cache_sentinel`)?(C=(0,Q.jsx)(`div`,{className:`absolute inset-0 bg-gradient-to-b from-black/20 via-transparent to-black/60 pointer-events-none`}),t[14]=C):C=t[14];let w=n.user?.avatar,T=n.user?.handle,E;t[15]!==w||t[16]!==T?(E=(0,Q.jsx)(xn,{src:w,alt:T,className:`object-cover`}),t[15]=w,t[16]=T,t[17]=E):E=t[17];let D;t[18]===n.user?.handle?.[0]?D=t[19]:(D=n.user?.handle?.[0]?.toUpperCase(),t[18]=n.user?.handle?.[0],t[19]=D);let O;t[20]===D?O=t[21]:(O=(0,Q.jsx)(Sn,{children:D}),t[20]=D,t[21]=O);let k;t[22]!==E||t[23]!==O?(k=(0,Q.jsxs)(bn,{className:`size-10 border-2 border-white`,children:[E,O]}),t[22]=E,t[23]=O,t[24]=k):k=t[24];let A=n.user?.handle,j;t[25]===A?j=t[26]:(j=(0,Q.jsxs)(`span`,{className:`font-bold`,children:[`@`,A]}),t[25]=A,t[26]=j);let M;t[27]===Symbol.for(`react.memo_cache_sentinel`)?(M=(0,Q.jsx)(`button`,{className:`bg-white text-black text-xs font-bold px-3 py-1 rounded-full ml-2 hover:scale-105 active:scale-95 transition-all`,children:`Follow`}),t[27]=M):M=t[27];let N;t[28]!==k||t[29]!==j?(N=(0,Q.jsxs)(`div`,{className:`flex items-center gap-2 mb-3 pointer-events-auto`,children:[k,j,M]}),t[28]=k,t[29]=j,t[30]=N):N=t[30];let P;t[31]===n.content?P=t[32]:(P=(0,Q.jsx)(`p`,{className:`text-sm mb-3 line-clamp-2`,children:n.content}),t[31]=n.content,t[32]=P);let F;t[33]===Symbol.for(`react.memo_cache_sentinel`)?(F=(0,Q.jsx)(m,{size:14,className:`animate-spin-slow`}),t[33]=F):F=t[33];let L=n.user?.handle,R;t[34]===L?R=t[35]:(R=(0,Q.jsxs)(`div`,{className:`flex items-center gap-2 text-xs opacity-90`,children:[F,(0,Q.jsxs)(`span`,{children:[`Original Audio - `,L]})]}),t[34]=L,t[35]=R);let z;t[36]!==N||t[37]!==P||t[38]!==R?(z=(0,Q.jsxs)(`div`,{className:`absolute bottom-20 left-4 right-16 text-white pointer-events-none`,children:[N,P,R]}),t[36]=N,t[37]=P,t[38]=R,t[39]=z):z=t[39];let B;t[40]===Symbol.for(`react.memo_cache_sentinel`)?(B=(0,Q.jsx)(`button`,{className:`p-3 bg-zinc-800/50 rounded-full text-white backdrop-blur-md hover:bg-zinc-700 transition-colors active:scale-90`,children:(0,Q.jsx)(ke,{size:28})}),t[40]=B):B=t[40];let V=n.stats?.likes||0,H;t[41]===V?H=t[42]:(H=(0,Q.jsxs)(`div`,{className:`flex flex-col items-center gap-1`,children:[B,(0,Q.jsx)(`span`,{className:`text-white text-xs font-bold`,children:V})]}),t[41]=V,t[42]=H);let U;t[43]===Symbol.for(`react.memo_cache_sentinel`)?(U=(0,Q.jsx)(`button`,{className:`p-3 bg-zinc-800/50 rounded-full text-white backdrop-blur-md hover:bg-zinc-700 transition-colors active:scale-90`,children:(0,Q.jsx)(y,{size:28})}),t[43]=U):U=t[43];let W=n.stats?.comments||0,G;t[44]===W?G=t[45]:(G=(0,Q.jsxs)(`div`,{className:`flex flex-col items-center gap-1`,children:[U,(0,Q.jsx)(`span`,{className:`text-white text-xs font-bold`,children:W})]}),t[44]=W,t[45]=G);let q;t[46]===Symbol.for(`react.memo_cache_sentinel`)?(q=(0,Q.jsx)(`button`,{className:`p-3 bg-zinc-800/50 rounded-full text-white backdrop-blur-md hover:bg-zinc-700 transition-colors active:scale-90`,children:(0,Q.jsx)(x,{size:28})}),t[46]=q):q=t[46];let J=n.stats?.shares||0,ee;t[47]===J?ee=t[48]:(ee=(0,Q.jsxs)(`div`,{className:`flex flex-col items-center gap-1`,children:[q,(0,Q.jsx)(`span`,{className:`text-white text-xs font-bold`,children:J})]}),t[47]=J,t[48]=ee);let Y;t[49]!==H||t[50]!==G||t[51]!==ee?(Y=(0,Q.jsxs)(`div`,{className:`absolute bottom-20 right-2 flex flex-col items-center gap-6 z-10`,children:[H,G,ee]}),t[49]=H,t[50]=G,t[51]=ee,t[52]=Y):Y=t[52];let te;return t[53]!==z||t[54]!==Y||t[55]!==v||t[56]!==S?(te=(0,Q.jsxs)(`div`,{className:`relative h-screen w-full bg-black snap-start flex items-center justify-center overflow-hidden`,onClick:f,children:[v,S,C,z,Y]}),t[53]=z,t[54]=Y,t[55]=v,t[56]=S,t[57]=te):te=t[57],te},fi=s(),pi=()=>{let e=(0,fi.c)(10),{posts:t,loading:n}=Jt(),r,i,a;if(e[0]!==n||e[1]!==t){a=Symbol.for(`react.early_return_sentinel`);bb0:{let o=t.filter(mi);if(n){let t;e[5]===Symbol.for(`react.memo_cache_sentinel`)?(t=(0,Q.jsx)(`div`,{className:`h-screen w-full flex items-center justify-center bg-black`,children:(0,Q.jsx)(U,{size:40,className:`animate-spin text-white`})}),e[5]=t):t=e[5],a=t;break bb0}if(o.length===0){let t;e[6]===Symbol.for(`react.memo_cache_sentinel`)?(t=(0,Q.jsx)(`div`,{className:`h-screen w-full flex flex-col items-center justify-center bg-black text-white gap-4`,children:(0,Q.jsx)(`p`,{className:`text-zinc-500`,children:`No reels found.`})}),e[6]=t):t=e[6],a=t;break bb0}r=`h-screen w-full snap-y snap-mandatory overflow-y-auto no-scrollbar bg-black md:rounded-xl`,i=o.map(hi)}e[0]=n,e[1]=t,e[2]=r,e[3]=i,e[4]=a}else r=e[2],i=e[3],a=e[4];if(a!==Symbol.for(`react.early_return_sentinel`))return a;let o;return e[7]!==r||e[8]!==i?(o=(0,Q.jsx)(`div`,{className:r,children:i}),e[7]=r,e[8]=i,e[9]=o):o=e[9],o};function mi(e){return e.type===`video`||e.category===`video`}function hi(e){return(0,Q.jsx)(di,{reel:e},e.id)}var gi=s();const _i=e=>{let t=(0,gi.c)(5),n;t[0]===e?n=t[1]:(n=()=>_n(e),t[0]=e,t[1]=n);let[r,i]=(0,X.useState)(n),a,o;return t[2]===e?(a=t[3],o=t[4]):(a=()=>{if(!e)return;let t=setTimeout(()=>{i(_n(e))},0),n=setInterval(()=>{i(_n(e))},6e4);return()=>{clearTimeout(t),clearInterval(n)}},o=[e],t[2]=e,t[3]=a,t[4]=o),(0,X.useEffect)(a,o),r};var vi=s(),yi=e=>{let t=(0,vi.c)(50),{conv:n,selectedId:r,onSelect:i,onlineUsers:a}=e,o=_i(n.user?.lastSeen),s;t[0]!==n.user?.id||t[1]!==a?(s=a.has(n.user?.id),t[0]=n.user?.id,t[1]=a,t[2]=s):s=t[2];let c=s,l;t[3]!==n||t[4]!==i?(l=()=>i(n),t[3]=n,t[4]=i,t[5]=l):l=t[5];let u=`flex items-center gap-3 p-4 cursor-pointer transition-colors hover:bg-zinc-50 dark:hover:bg-zinc-900 ${r===n.id?`bg-zinc-50 dark:bg-zinc-900 border-r-2 border-violet-500`:``}`,d=n.user?.avatar,f=n.user?.name,p;t[6]!==d||t[7]!==f?(p=(0,Q.jsx)(xn,{src:d,alt:f,className:`object-cover`}),t[6]=d,t[7]=f,t[8]=p):p=t[8];let m;t[9]===n.user?.name?.[0]?m=t[10]:(m=n.user?.name?.[0]?.toUpperCase(),t[9]=n.user?.name?.[0],t[10]=m);let h;t[11]===m?h=t[12]:(h=(0,Q.jsx)(Sn,{children:m}),t[11]=m,t[12]=h);let g;t[13]!==p||t[14]!==h?(g=(0,Q.jsxs)(bn,{className:`size-12`,children:[p,h]}),t[13]=p,t[14]=h,t[15]=g):g=t[15];let _;t[16]===c?_=t[17]:(_=c&&(0,Q.jsx)(`span`,{className:`absolute bottom-0 right-0 size-3 bg-emerald-500 border-2 border-white dark:border-black rounded-full`}),t[16]=c,t[17]=_);let v;t[18]!==_||t[19]!==g?(v=(0,Q.jsxs)(`div`,{className:`relative`,children:[g,_]}),t[18]=_,t[19]=g,t[20]=v):v=t[20];let y=n.user?.name,b;t[21]===y?b=t[22]:(b=(0,Q.jsx)(`span`,{className:`font-bold dark:text-white truncate`,children:y}),t[21]=y,t[22]=b);let x;t[23]!==n.user?.lastSeen||t[24]!==c||t[25]!==o?(x=c?(0,Q.jsx)(`span`,{className:`text-[10px] text-emerald-500 font-medium leading-none mb-1`,children:`Online`}):n.user?.lastSeen&&(0,Q.jsx)(`span`,{className:`text-[10px] text-zinc-500 font-medium leading-none mb-1`,children:o}),t[23]=n.user?.lastSeen,t[24]=c,t[25]=o,t[26]=x):x=t[26];let S;t[27]!==b||t[28]!==x?(S=(0,Q.jsxs)(`div`,{className:`flex flex-col min-w-0`,children:[b,x]}),t[27]=b,t[28]=x,t[29]=S):S=t[29];let C;t[30]===n.time?C=t[31]:(C=(0,Q.jsx)(`span`,{className:`text-xs text-zinc-500 whitespace-nowrap ml-2`,children:n.time}),t[30]=n.time,t[31]=C);let w;t[32]!==S||t[33]!==C?(w=(0,Q.jsxs)(`div`,{className:`flex justify-between items-center mb-0.5`,children:[S,C]}),t[32]=S,t[33]=C,t[34]=w):w=t[34];let T;t[35]===n.lastMessage?T=t[36]:(T=(0,Q.jsx)(`p`,{className:`text-zinc-500 text-sm truncate pr-2`,children:n.lastMessage}),t[35]=n.lastMessage,t[36]=T);let E;t[37]===n.unread?E=t[38]:(E=n.unread>0&&(0,Q.jsx)(`span`,{className:`bg-violet-600 text-white text-[10px] font-bold size-5 rounded-full flex items-center justify-center shrink-0`,children:n.unread}),t[37]=n.unread,t[38]=E);let D;t[39]!==T||t[40]!==E?(D=(0,Q.jsxs)(`div`,{className:`flex-1 flex justify-between items-center`,children:[T,E]}),t[39]=T,t[40]=E,t[41]=D):D=t[41];let O;t[42]!==w||t[43]!==D?(O=(0,Q.jsxs)(`div`,{className:`flex-1 min-w-0`,children:[w,D]}),t[42]=w,t[43]=D,t[44]=O):O=t[44];let k;return t[45]!==v||t[46]!==l||t[47]!==O||t[48]!==u?(k=(0,Q.jsxs)(`div`,{onClick:l,className:u,children:[v,O]}),t[45]=v,t[46]=l,t[47]=O,t[48]=u,t[49]=k):k=t[49],k},bi=({conversations:e,userResults:t=[],onSelect:n,onStartNew:r,selectedId:i,searchQuery:a,onSearchChange:o,onlineUsers:s=new Set})=>(0,Q.jsxs)(`div`,{className:`flex-1 flex flex-col min-w-0 bg-white dark:bg-black`,children:[(0,Q.jsx)(`div`,{className:`p-4 border-b border-zinc-100 dark:border-zinc-800`,children:(0,Q.jsx)(sn,{value:a,onChange:o,onClear:()=>o(``),placeholder:`Search people or messages...`})}),(0,Q.jsxs)(`div`,{className:`flex-1 overflow-y-auto`,children:[e.length>0&&(0,Q.jsx)(`div`,{className:`py-2`,children:e.map(e=>(0,Q.jsx)(yi,{conv:e,selectedId:i,onSelect:n,onlineUsers:s},e.id))}),t.length>0&&(0,Q.jsxs)(`div`,{className:`border-t border-zinc-100 dark:border-zinc-800`,children:[(0,Q.jsx)(`div`,{className:`px-4 py-3 text-xs font-bold text-zinc-500 uppercase tracking-wider`,children:`People`}),t.map(e=>(0,Q.jsxs)(`div`,{onClick:()=>r(e),className:`flex items-center gap-3 p-4 cursor-pointer transition-colors hover:bg-zinc-50 dark:hover:bg-zinc-900`,children:[(0,Q.jsxs)(bn,{className:`size-12`,children:[(0,Q.jsx)(xn,{src:e.avatar,alt:e.name,className:`object-cover`}),(0,Q.jsx)(Sn,{children:e.name?.[0]?.toUpperCase()})]}),(0,Q.jsxs)(`div`,{className:`flex-1 min-w-0`,children:[(0,Q.jsx)(`div`,{className:`font-bold dark:text-white truncate`,children:e.name}),(0,Q.jsxs)(`div`,{className:`text-zinc-500 text-sm truncate`,children:[`@`,e.handle]})]}),(0,Q.jsx)(pe,{size:18,className:`text-violet-500`})]},e.id))]}),e.length===0&&t.length===0&&a&&(0,Q.jsx)(`div`,{className:`p-8 text-center`,children:(0,Q.jsxs)(`p`,{className:`text-zinc-500 text-sm`,children:[`No conversations or people found for "`,a,`"`]})}),e.length===0&&!a&&(0,Q.jsx)(`div`,{className:`p-8 text-center`,children:(0,Q.jsx)(`p`,{className:`text-zinc-500 text-sm`,children:`No messages yet. Search for people to start a chat!`})})]})]}),xi=s(),Si=e=>{let t=(0,xi.c)(7),{className:n}=e,r;t[0]===n?r=t[1]:(r=$(`flex items-center gap-1 px-1 py-1.5`,n),t[0]=n,t[1]=r);let i,a,o;t[2]===Symbol.for(`react.memo_cache_sentinel`)?(i=(0,Q.jsx)(`div`,{className:`size-1.5 rounded-full bg-zinc-400 dark:bg-zinc-500 animate-dot-pulse`}),a=(0,Q.jsx)(`div`,{className:`size-1.5 rounded-full bg-zinc-400 dark:bg-zinc-500 animate-dot-pulse [animation-delay:0.2s]`}),o=(0,Q.jsx)(`div`,{className:`size-1.5 rounded-full bg-zinc-400 dark:bg-zinc-500 animate-dot-pulse [animation-delay:0.4s]`}),t[2]=i,t[3]=a,t[4]=o):(i=t[2],a=t[3],o=t[4]);let s;return t[5]===r?s=t[6]:(s=(0,Q.jsxs)(`div`,{className:r,children:[i,a,o]}),t[5]=r,t[6]=s),s},Ci=s(),wi=e=>{let t=(0,Ci.c)(88),{conversation:n,messages:r,onBack:i,onSendMessage:a,onTyping:o,isLoading:s,isTyping:c,isOnline:l}=e,[u,d]=(0,X.useState)(``),f=(0,X.useRef)(null),p=(0,X.useRef)(null),m=_i(n.user?.lastSeen),h;t[0]===Symbol.for(`react.memo_cache_sentinel`)?(h=()=>{f.current&&(f.current.scrollTop=f.current.scrollHeight)},t[0]=h):h=t[0];let g;t[1]!==c||t[2]!==r?(g=[r,c],t[1]=c,t[2]=r,t[3]=g):g=t[3],(0,X.useEffect)(h,g);let v;t[4]===o?v=t[5]:(v=e=>{let t=e.target.value;d(t),o&&(o(!0),p.current&&clearTimeout(p.current),p.current=setTimeout(()=>{o(!1)},2e3))},t[4]=o,t[5]=v);let y=v,b;t[6]!==n.id||t[7]!==a||t[8]!==o||t[9]!==u?(b=e=>{e.preventDefault(),u.trim()&&(o&&(clearTimeout(p.current),o(!1)),a(n.id,u),d(``))},t[6]=n.id,t[7]=a,t[8]=o,t[9]=u,t[10]=b):b=t[10];let x=b,S;t[11]===Symbol.for(`react.memo_cache_sentinel`)?(S=(0,Q.jsx)(ee,{size:20}),t[11]=S):S=t[11];let C;t[12]===i?C=t[13]:(C=(0,Q.jsx)(`button`,{onClick:i,className:`md:hidden p-1 rounded-full hover:bg-zinc-100 dark:hover:bg-zinc-800 dark:text-white transition-colors`,children:S}),t[12]=i,t[13]=C);let w;t[14]!==n.user.avatar||t[15]!==n.user.name?(w=(0,Q.jsx)(xn,{src:n.user.avatar,alt:n.user.name,className:`object-cover`}),t[14]=n.user.avatar,t[15]=n.user.name,t[16]=w):w=t[16];let T;t[17]===n.user.name?.[0]?T=t[18]:(T=n.user.name?.[0]?.toUpperCase(),t[17]=n.user.name?.[0],t[18]=T);let E;t[19]===T?E=t[20]:(E=(0,Q.jsx)(Sn,{children:T}),t[19]=T,t[20]=E);let D;t[21]!==w||t[22]!==E?(D=(0,Q.jsxs)(bn,{className:`size-10 border border-zinc-200 dark:border-zinc-700`,children:[w,E]}),t[21]=w,t[22]=E,t[23]=D):D=t[23];let O;t[24]===n.user.name?O=t[25]:(O=(0,Q.jsx)(`div`,{className:`font-bold dark:text-white`,children:n.user.name}),t[24]=n.user.name,t[25]=O);let k;t[26]!==n.user.lastSeen||t[27]!==l||t[28]!==m?(k=l?(0,Q.jsx)(`div`,{className:`text-xs text-emerald-500 font-medium`,children:`Online`}):(0,Q.jsx)(`div`,{className:`text-xs text-zinc-500 font-medium`,children:n.user.lastSeen?`Last seen ${m}`:`Offline`}),t[26]=n.user.lastSeen,t[27]=l,t[28]=m,t[29]=k):k=t[29];let A;t[30]!==O||t[31]!==k?(A=(0,Q.jsxs)(`div`,{children:[O,k]}),t[30]=O,t[31]=k,t[32]=A):A=t[32];let j;t[33]!==D||t[34]!==A||t[35]!==C?(j=(0,Q.jsxs)(`div`,{className:`flex items-center gap-3`,children:[C,D,A]}),t[33]=D,t[34]=A,t[35]=C,t[36]=j):j=t[36];let N;t[37]===Symbol.for(`react.memo_cache_sentinel`)?(N=(0,Q.jsx)(`button`,{className:`p-2 hover:bg-zinc-100 dark:hover:bg-zinc-800 rounded-full dark:text-zinc-400`,children:(0,Q.jsx)(te,{size:20})}),t[37]=N):N=t[37];let P;t[38]===j?P=t[39]:(P=(0,Q.jsxs)(`div`,{className:`p-4 border-b border-zinc-100 dark:border-zinc-800 flex items-center justify-between shrink-0 bg-white/80 dark:bg-black/80 backdrop-blur-md sticky top-0 z-10`,children:[j,N]}),t[38]=j,t[39]=P);let F;t[40]!==n.user.avatar||t[41]!==n.user.name?(F=(0,Q.jsx)(xn,{src:n.user.avatar,alt:n.user.name,className:`object-cover`}),t[40]=n.user.avatar,t[41]=n.user.name,t[42]=F):F=t[42];let I;t[43]===n.user.name?.[0]?I=t[44]:(I=n.user.name?.[0]?.toUpperCase(),t[43]=n.user.name?.[0],t[44]=I);let R;t[45]===I?R=t[46]:(R=(0,Q.jsx)(Sn,{className:`text-2xl font-bold`,children:I}),t[45]=I,t[46]=R);let z;t[47]!==F||t[48]!==R?(z=(0,Q.jsxs)(bn,{className:`size-20 mx-auto mb-3 border-4 border-zinc-50 dark:border-zinc-900 shadow-sm`,children:[F,R]}),t[47]=F,t[48]=R,t[49]=z):z=t[49];let B;t[50]===n.user.name?B=t[51]:(B=(0,Q.jsx)(`h4`,{className:`font-bold dark:text-white text-lg`,children:n.user.name}),t[50]=n.user.name,t[51]=B);let V;t[52]===n.user.handle?V=t[53]:(V=(0,Q.jsxs)(`p`,{className:`text-sm text-zinc-500`,children:[`@`,n.user.handle]}),t[52]=n.user.handle,t[53]=V);let H;t[54]===n.user.handle?H=t[55]:(H=(0,Q.jsxs)(`p`,{className:`text-xs text-zinc-400 mt-4 max-w-xs mx-auto`,children:[`This is the beginning of your direct message history with `,(0,Q.jsxs)(`span`,{className:`font-bold`,children:[`@`,n.user.handle]})]}),t[54]=n.user.handle,t[55]=H);let W;t[56]!==z||t[57]!==B||t[58]!==V||t[59]!==H?(W=(0,Q.jsxs)(`div`,{className:`text-center py-8`,children:[z,B,V,H]}),t[56]=z,t[57]=B,t[58]=V,t[59]=H,t[60]=W):W=t[60];let G;t[61]!==s||t[62]!==r?(G=s&&r.length===0?(0,Q.jsx)(`div`,{className:`flex justify-center p-8`,children:(0,Q.jsx)(U,{className:`animate-spin text-violet-500`,size:32})}):r.map(Ti),t[61]=s,t[62]=r,t[63]=G):G=t[63];let K;t[64]===c?K=t[65]:(K=c&&(0,Q.jsx)(`div`,{className:`flex justify-start animate-in fade-in slide-in-from-bottom-2 duration-300`,children:(0,Q.jsx)(`div`,{className:`bg-zinc-100 dark:bg-zinc-800/50 px-3 py-2 rounded-2xl rounded-tl-none border border-zinc-200/50 dark:border-zinc-700/30 shadow-sm`,children:(0,Q.jsx)(Si,{})})}),t[64]=c,t[65]=K);let q;t[66]!==W||t[67]!==G||t[68]!==K?(q=(0,Q.jsxs)(`div`,{className:`flex-1 overflow-y-auto p-4 space-y-4`,ref:f,children:[W,G,K]}),t[66]=W,t[67]=G,t[68]=K,t[69]=q):q=t[69];let J;t[70]===Symbol.for(`react.memo_cache_sentinel`)?(J=(0,Q.jsx)(`button`,{type:`button`,className:`p-2 text-zinc-500 hover:text-violet-600 transition-colors`,children:(0,Q.jsx)(_,{size:20})}),t[70]=J):J=t[70];let Y;t[71]!==y||t[72]!==u?(Y=(0,Q.jsx)(`input`,{type:`text`,className:`flex-1 bg-transparent border-none outline-none dark:text-white py-1 px-1`,placeholder:`Start a new message`,value:u,onChange:y}),t[71]=y,t[72]=u,t[73]=Y):Y=t[73];let ne;t[74]===Symbol.for(`react.memo_cache_sentinel`)?(ne=(0,Q.jsx)(`button`,{type:`button`,className:`p-2 text-zinc-500 hover:text-violet-600 transition-colors`,children:(0,Q.jsx)(L,{size:20})}),t[74]=ne):ne=t[74];let re;t[75]===u?re=t[76]:(re=u.trim(),t[75]=u,t[76]=re);let ie=!re,ae;t[77]===Symbol.for(`react.memo_cache_sentinel`)?(ae=(0,Q.jsx)(M,{size:18}),t[77]=ae):ae=t[77];let oe;t[78]===ie?oe=t[79]:(oe=(0,Q.jsx)(Hn,{type:`submit`,className:`size-10 !p-0 rounded-xl`,disabled:ie,children:ae}),t[78]=ie,t[79]=oe);let se;t[80]!==x||t[81]!==Y||t[82]!==oe?(se=(0,Q.jsx)(`div`,{className:`p-4 border-t border-zinc-100 dark:border-zinc-800 bg-white dark:bg-black shrink-0`,children:(0,Q.jsxs)(`form`,{onSubmit:x,className:`flex items-center gap-2 bg-zinc-100 dark:bg-zinc-900 p-2 rounded-2xl border border-transparent focus-within:border-violet-500 transition-all`,children:[J,Y,ne,oe]})}),t[80]=x,t[81]=Y,t[82]=oe,t[83]=se):se=t[83];let ce;return t[84]!==P||t[85]!==q||t[86]!==se?(ce=(0,Q.jsxs)(`div`,{className:`flex-1 flex flex-col h-full bg-white dark:bg-black md:border-l md:border-zinc-100 dark:md:border-zinc-800`,children:[P,q,se]}),t[84]=P,t[85]=q,t[86]=se,t[87]=ce):ce=t[87],ce};function Ti(e){return(0,Q.jsx)(`div`,{className:`flex ${e.sender===`me`?`justify-end`:`justify-start`}`,children:(0,Q.jsxs)(`div`,{className:`max-w-[75%] px-4 py-2.5 rounded-2xl text-[15px] shadow-sm ${e.sender===`me`?`bg-violet-600 text-white rounded-tr-none`:`bg-zinc-100 dark:bg-zinc-800 dark:text-white rounded-tl-none`}`,children:[(0,Q.jsx)(`p`,{children:e.text}),(0,Q.jsx)(`div`,{className:`text-[10px] mt-1 ${e.sender===`me`?`text-violet-200`:`text-zinc-400`}`,children:e.time})]})},e.id)}var Ei=s();const Di=e=>{let t=(0,Ei.c)(39),n=ge(),r;t[0]===Symbol.for(`react.memo_cache_sentinel`)?(r={},t[0]=r):r=t[0];let[i,a]=(0,X.useState)(r),o=(0,X.useRef)(null),s=e?.id,c;t[1]===s?c=t[2]:(c=[`conversations`,s],t[1]=s,t[2]=c);let u;t[3]===e?.id?u=t[4]:(u=()=>mt(e?.id),t[3]=e?.id,t[4]=u);let f=!!e?.id,p;t[5]!==c||t[6]!==u||t[7]!==f?(p={queryKey:c,queryFn:u,enabled:f},t[5]=c,t[6]=u,t[7]=f,t[8]=p):p=t[8];let{data:m,isLoading:h}=l(p),g;t[9]===m?g=t[10]:(g=m===void 0?[]:m,t[9]=m,t[10]=g);let _=g,v;t[11]!==e||t[12]!==n?(v=()=>{if(!e?.id)return;let t=Z.channel(`user_messages:${e.id}`).on(`postgres_changes`,{event:`INSERT`,schema:`public`,table:`messages`},t=>{let r=t.new;n.setQueryData([`messages`,r.conversation_id],e=>e?e.find(e=>e.id===r.id)?e:[...e,r]:[r]),n.invalidateQueries([`conversations`,e.id]),a(e=>({...e,[r.conversation_id]:!1}))}).subscribe(),r=Z.channel(`chat_typing_shared`).on(`broadcast`,{event:`typing`},t=>{let{payload:n}=t;console.log(`Received typing broadcast:`,n);let{conversationId:r,isTyping:i,userId:o}=n;o!==e.id&&a(e=>({...e,[r]:i}))}).subscribe(Oi);return o.current=r,()=>{console.log(`Cleaning up channels`),Z.removeChannel(t),Z.removeChannel(r)}},t[11]=e,t[12]=n,t[13]=v):v=t[13];let y=e?.id,b;t[14]!==n||t[15]!==y?(b=[y,n],t[14]=n,t[15]=y,t[16]=b):b=t[16],(0,X.useEffect)(v,b);let x;t[17]===e?x=t[18]:(x=t=>{let{convId:n,text:r}=t;return gt(n,e.id,r)},t[17]=e,t[18]=x);let S;t[19]!==e||t[20]!==n?(S=t=>{n.setQueryData([`messages`,t.conversation_id],e=>e?e.find(e=>e.id===t.id)?e:[...e,t]:[t]),n.invalidateQueries([`conversations`,e.id])},t[19]=e,t[20]=n,t[21]=S):S=t[21];let C;t[22]!==x||t[23]!==S?(C={mutationFn:x,onSuccess:S},t[22]=x,t[23]=S,t[24]=C):C=t[24];let w=d(C),T;t[25]===e?T=t[26]:(T=(t,n)=>{o.current&&o.current.send({type:`broadcast`,event:`typing`,payload:{conversationId:t,isTyping:n,userId:e.id}})},t[25]=e,t[26]=T);let E=T,D;t[27]===e?.id?D=t[28]:(D=t=>(t===void 0?[]:t).map(t=>({id:t.id,sender:t.sender_id===e?.id?`me`:`them`,text:t.content,time:new Date(t.created_at).toLocaleTimeString([],{hour:`2-digit`,minute:`2-digit`})})),t[27]=e?.id,t[28]=D);let O=D,k;t[29]===w?k=t[30]:(k=(e,t)=>w.mutate({convId:e,text:t}),t[29]=w,t[30]=k);let A;return t[31]!==_||t[32]!==O||t[33]!==h||t[34]!==w.isPending||t[35]!==E||t[36]!==k||t[37]!==i?(A={conversations:_,isConvLoading:h,sendMessage:k,sendTypingStatus:E,typingStatus:i,formatMessages:O,isSending:w.isPending},t[31]=_,t[32]=O,t[33]=h,t[34]=w.isPending,t[35]=E,t[36]=k,t[37]=i,t[38]=A):A=t[38],A};function Oi(e){console.log(`Typing channel status:`,e)}var ki=s(),Ai=()=>{let e=(0,ki.c)(65),{id:t}=a(),n=We(),{currentUser:r}=kt(),{onlineUsers:i}=Nt(),o=ge(),[s,c]=(0,X.useState)(``),u;e[0]===Symbol.for(`react.memo_cache_sentinel`)?(u=[],e[0]=u):u=e[0];let[d,f]=(0,X.useState)(u),{conversations:p,isConvLoading:m,sendMessage:h,sendTypingStatus:g,typingStatus:_,formatMessages:v}=Di(r),y;bb0:{if(!t||p.length===0){y=null;break bb0}let n;e[1]!==p||e[2]!==t?(n=p.find(e=>e.id===t)||null,e[1]=p,e[2]=t,e[3]=n):n=e[3],y=n}let b=y,x;e[4]!==p||e[5]!==r?.id||e[6]!==s?(x=()=>{let e=setTimeout(async()=>{if(s.length>1){let e=await ot(s),t=p.map(ji);f(e.filter(e=>e.id!==r?.id&&!t.includes(e.id)))}else f([])},300);return()=>clearTimeout(e)},e[4]=p,e[5]=r?.id,e[6]=s,e[7]=x):x=e[7];let S=r?.id,C;e[8]!==p||e[9]!==s||e[10]!==S?(C=[s,p,S],e[8]=p,e[9]=s,e[10]=S,e[11]=C):C=e[11],(0,X.useEffect)(x,C);let w;e[12]!==r||e[13]!==n||e[14]!==o?(w=async e=>{try{let t=await st(r.id,e.id);o.invalidateQueries([`conversations`,r.id]),c(``),n(`/messages/${t}`)}catch(e){let t=e;console.error(`Failed to start conversation:`,t)}},e[12]=r,e[13]=n,e[14]=o,e[15]=w):w=e[15];let T=w,E;e[16]===n?E=e[17]:(E=e=>{n(`/messages/${e.id}`)},e[16]=n,e[17]=E);let O=E,k=b?.id,A;e[18]===k?A=e[19]:(A=[`messages`,k],e[18]=k,e[19]=A);let j;e[20]===b?.id?j=e[21]:(j=()=>ht(b?.id),e[20]=b?.id,e[21]=j);let M=!!b?.id,N;e[22]!==M||e[23]!==A||e[24]!==j?(N={queryKey:A,queryFn:j,enabled:M},e[22]=M,e[23]=A,e[24]=j,e[25]=N):N=e[25];let{data:P,isLoading:F}=l(N),I;e[26]===P?I=e[27]:(I=P===void 0?[]:P,e[26]=P,e[27]=I);let L=I,R;e[28]!==L||e[29]!==v?(R=v(L),e[28]=L,e[29]=v,e[30]=R):R=e[30];let z=R;if(!r){let t;return e[31]===Symbol.for(`react.memo_cache_sentinel`)?(t=(0,Q.jsxs)(`div`,{className:`flex flex-col items-center justify-center h-screen gap-4 p-8 text-center bg-white dark:bg-black md:rounded-xl md:border border-zinc-100 dark:border-zinc-800`,children:[(0,Q.jsx)(`div`,{className:`bg-zinc-100 dark:bg-zinc-900 p-4 rounded-full`,children:(0,Q.jsx)(D,{size:40,className:`text-zinc-400`})}),(0,Q.jsx)(`h3`,{className:`text-xl font-bold dark:text-white`,children:`Sign in to message others`}),(0,Q.jsx)(`p`,{className:`text-zinc-500 max-w-xs`,children:`Start decentralized conversations with anyone on the network.`})]}),e[31]=t):t=e[31],t}if(m){let t;return e[32]===Symbol.for(`react.memo_cache_sentinel`)?(t=(0,Q.jsx)(`div`,{className:`flex h-screen items-center justify-center bg-white dark:bg-black md:rounded-xl md:border border-zinc-100 dark:border-zinc-800`,children:(0,Q.jsx)(U,{className:`animate-spin text-violet-500`,size:32})}),e[32]=t):t=e[32],t}let B;if(e[33]!==p||e[34]!==s){let t;e[36]===s?t=e[37]:(t=e=>e.user?.name?.toLowerCase().includes(s.toLowerCase())||e.user?.handle?.toLowerCase().includes(s.toLowerCase())||e.lastMessage?.toLowerCase().includes(s.toLowerCase()),e[36]=s,e[37]=t),B=p.filter(t),e[33]=p,e[34]=s,e[35]=B}else B=e[35];let H=B,W=b&&_[b.id],G;e[38]!==i||e[39]!==b?(G=b&&i.has(b.user?.id),e[38]=i,e[39]=b,e[40]=G):G=e[40];let K=G,q=`w-full md:w-80 flex flex-col border-r border-zinc-100 dark:border-zinc-800 ${b?`hidden md:flex`:`flex`}`,J;e[41]===Symbol.for(`react.memo_cache_sentinel`)?(J=(0,Q.jsx)(`div`,{className:`p-4 border-b border-zinc-100 dark:border-zinc-800`,children:(0,Q.jsx)(`h2`,{className:`text-xl font-bold dark:text-white`,children:`Messages`})}),e[41]=J):J=e[41];let ee;e[42]!==H||e[43]!==O||e[44]!==T||e[45]!==t||e[46]!==s||e[47]!==i||e[48]!==d?(ee=(0,Q.jsx)(bi,{conversations:H,userResults:d,onSelect:O,onStartNew:T,selectedId:t,searchQuery:s,onSearchChange:c,onlineUsers:i}),e[42]=H,e[43]=O,e[44]=T,e[45]=t,e[46]=s,e[47]=i,e[48]=d,e[49]=ee):ee=e[49];let Y;e[50]!==q||e[51]!==ee?(Y=(0,Q.jsxs)(`div`,{className:q,children:[J,ee]}),e[50]=q,e[51]=ee,e[52]=Y):Y=e[52];let te;e[53]!==W||e[54]!==F||e[55]!==z||e[56]!==n||e[57]!==K||e[58]!==b||e[59]!==h||e[60]!==g?(te=b?(0,Q.jsx)(wi,{conversation:b,messages:z,onBack:()=>n(`/messages`),onSendMessage:h,onTyping:e=>g(b.id,e),isLoading:F,isTyping:W,isOnline:K}):(0,Q.jsxs)(`div`,{className:`hidden md:flex flex-1 items-center justify-center text-zinc-500 flex-col gap-4`,children:[(0,Q.jsx)(`div`,{className:`bg-zinc-50 dark:bg-zinc-900 p-6 rounded-full`,children:(0,Q.jsx)(V,{size:48,className:`text-zinc-300`})}),(0,Q.jsxs)(`div`,{className:`text-center`,children:[(0,Q.jsx)(`h3`,{className:`text-xl font-bold text-zinc-900 dark:text-white`,children:`Select a message`}),(0,Q.jsx)(`p`,{children:`Choose from your existing conversations or start a new one.`})]})]}),e[53]=W,e[54]=F,e[55]=z,e[56]=n,e[57]=K,e[58]=b,e[59]=h,e[60]=g,e[61]=te):te=e[61];let ne;return e[62]!==Y||e[63]!==te?(ne=(0,Q.jsxs)(`div`,{className:`flex h-screen bg-white dark:bg-black overflow-hidden md:rounded-xl md:border border-zinc-100 dark:border-zinc-800`,children:[Y,te]}),e[62]=Y,e[63]=te,e[64]=ne):ne=e[64],ne};function ji(e){return e.user?.id}var Mi=s(),Ni=()=>{let e=(0,Mi.c)(39),{currentUser:t}=kt(),n=ge(),r=t?.id,i;e[0]===r?i=e[1]:(i=[`notifications`,r],e[0]=r,e[1]=i);let a;e[2]===t?.id?a=e[3]:(a=()=>dt(t?.id),e[2]=t?.id,e[3]=a);let o=!!t?.id,s;e[4]!==i||e[5]!==a||e[6]!==o?(s={queryKey:i,queryFn:a,enabled:o},e[4]=i,e[5]=a,e[6]=o,e[7]=s):s=e[7];let{data:c,isLoading:u}=l(s),f;e[8]===c?f=e[9]:(f=c===void 0?[]:c,e[8]=c,e[9]=f);let p=f,m;e[10]!==t||e[11]!==n?(m=()=>{if(!t?.id)return;let e=Z.channel(`user_notifications:${t.id}`).on(`postgres_changes`,{event:`INSERT`,schema:`public`,table:`notifications`,filter:`recipient_id=eq.${t.id}`},()=>{n.invalidateQueries({queryKey:[`notifications`,t.id]})}).subscribe();return()=>Z.removeChannel(e)},e[10]=t,e[11]=n,e[12]=m):m=e[12];let h=t?.id,g;e[13]!==n||e[14]!==h?(g=[h,n],e[13]=n,e[14]=h,e[15]=g):g=e[15],(0,X.useEffect)(m,g);let _;e[16]===t?_=e[17]:(_=()=>ft(t.id),e[16]=t,e[17]=_);let v;e[18]!==t||e[19]!==n?(v=()=>{n.invalidateQueries({queryKey:[`notifications`,t.id]})},e[18]=t,e[19]=n,e[20]=v):v=e[20];let y;e[21]!==_||e[22]!==v?(y={mutationFn:_,onSuccess:v},e[21]=_,e[22]=v,e[23]=y):y=e[23];let b=d(y),x;e[24]!==t?.id||e[25]!==b||e[26]!==p?(x=()=>{t?.id&&p.some(Pi)&&b.mutate()},e[24]=t?.id,e[25]=b,e[26]=p,e[27]=x):x=e[27];let S=t?.id,C;if(e[28]!==b||e[29]!==p||e[30]!==S?(C=[S,p,b],e[28]=b,e[29]=p,e[30]=S,e[31]=C):C=e[31],(0,X.useEffect)(x,C),u){let t;return e[32]===Symbol.for(`react.memo_cache_sentinel`)?(t=(0,Q.jsx)(`div`,{className:`flex items-center justify-center min-h-[400px]`,children:(0,Q.jsx)(U,{size:32,className:`animate-spin text-violet-500`})}),e[32]=t):t=e[32],t}if(!t){let t;return e[33]===Symbol.for(`react.memo_cache_sentinel`)?(t=(0,Q.jsxs)(`div`,{className:`flex flex-col items-center justify-center min-h-[400px] gap-4 p-8 text-center`,children:[(0,Q.jsx)(`div`,{className:`bg-zinc-100 dark:bg-zinc-900 p-4 rounded-full`,children:(0,Q.jsx)(D,{size:40,className:`text-zinc-400`})}),(0,Q.jsx)(`h3`,{className:`text-xl font-bold dark:text-white`,children:`Sign in to see notifications`}),(0,Q.jsx)(`p`,{className:`text-zinc-500 max-w-xs`,children:`Join the conversation and keep track of who's engaging with your content.`})]}),e[33]=t):t=e[33],t}let w=Fi,T;e[34]===Symbol.for(`react.memo_cache_sentinel`)?(T=(0,Q.jsx)(`div`,{className:`p-4 border-b border-zinc-100 dark:border-zinc-800 sticky top-0 bg-white/80 dark:bg-black/80 backdrop-blur-md z-10`,children:(0,Q.jsx)(`h2`,{className:`text-xl font-bold dark:text-white`,children:`Notifications`})}),e[34]=T):T=e[34];let E;e[35]===p?E=e[36]:(E=p.length>0?p.map(e=>(0,Q.jsxs)(`div`,{className:`p-4 border-b border-zinc-100 dark:border-zinc-800 flex items-start gap-4 hover:bg-zinc-50 dark:hover:bg-zinc-900 transition-colors cursor-pointer ${e.is_read?``:`bg-violet-50/30 dark:bg-violet-500/5`}`,children:[(0,Q.jsx)(`div`,{className:`shrink-0 pt-1`,children:w(e.type)}),(0,Q.jsxs)(`div`,{className:`flex-1 min-w-0`,children:[(0,Q.jsxs)(`div`,{className:`flex items-center gap-3 mb-1`,children:[(0,Q.jsxs)(bn,{className:`size-8`,children:[(0,Q.jsx)(xn,{src:e.avatar}),(0,Q.jsx)(Sn,{children:e.user?.[0]?.toUpperCase()})]}),(0,Q.jsxs)(`div`,{className:`flex-1 flex justify-between items-center`,children:[(0,Q.jsxs)(`span`,{className:`font-bold text-sm dark:text-white truncate`,children:[`@`,e.user]}),(0,Q.jsx)(`span`,{className:`text-zinc-500 text-xs whitespace-nowrap`,children:_n(e.created_at)})]})]}),(0,Q.jsxs)(`p`,{className:`text-zinc-600 dark:text-zinc-400 text-[15px] ml-11`,children:[e.type===`like`&&`liked your post`,e.type===`follow`&&`followed you`,e.type===`mention`&&`mentioned you in a post`,e.type===`comment`&&`commented on your post`,e.type===`repost`&&`reposted your post`]})]}),!e.is_read&&(0,Q.jsx)(`div`,{className:`size-2 rounded-full bg-violet-500 mt-2 shrink-0 shadow-[0_0_8px_rgba(139,92,246,0.5)]`})]},e.id)):(0,Q.jsx)(`div`,{className:`p-16 text-center text-zinc-500`,children:(0,Q.jsx)(`p`,{className:`font-medium`,children:`No notifications yet.`})}),e[35]=p,e[36]=E);let O;return e[37]===E?O=e[38]:(O=(0,Q.jsxs)(`div`,{className:`border-y md:border border-zinc-100 dark:border-zinc-800 bg-white dark:bg-black rounded-none md:rounded-xl overflow-hidden min-h-screen shadow-sm`,children:[T,E]}),e[37]=E,e[38]=O),O};function Pi(e){return!e.is_read}function Fi(e){switch(e){case`like`:return(0,Q.jsx)(ke,{size:20,className:`text-rose-500 fill-rose-500`});case`follow`:return(0,Q.jsx)(pe,{size:20,className:`text-blue-500`});case`mention`:return(0,Q.jsx)(He,{size:20,className:`text-emerald-500`});case`comment`:return(0,Q.jsx)(De,{size:20,className:`text-violet-500`});case`repost`:return(0,Q.jsx)(t,{size:20,className:`text-amber-500`});default:return(0,Q.jsx)(He,{size:20,className:`text-zinc-500`})}}const Ii=(e,t,n)=>{let r=e?.id,[i,a]=(0,X.useState)(!1),[o,s]=(0,X.useState)({followers:e?.followers||e?.follower_count||0,following:e?.following||e?.following_count||0}),[c,l]=(0,X.useState)(!1);return(0,X.useEffect)(()=>{e&&(s({followers:e.followers||e.follower_count||0,following:e.following||e.following_count||0}),r&&hn(r)&&(Ct(r).then(e=>{e&&s({followers:e.followers,following:e.following})}).catch(()=>{}),t&&hn(t)&&St(t,r).then(a).catch(()=>a(!1))))},[e,r,t]),{isFollowing:i,stats:o,loading:c,handleFollow:async()=>{if(!t)return n(`Please login to follow!`,`error`);if(t===r)return n(`You cannot follow yourself!`,`error`);if(!r||!hn(r)||!hn(t)){let e=!i;a(e),s(t=>{let n=typeof t.followers==`string`?parseInt(t.followers.replace(/,/g,``)):t.followers||0;return{...t,followers:e?n+1:Math.max(0,n-1)}}),n(e?`Followed`:`Unfollowed`);return}l(!0);try{let e=await xt(t,r);a(e),s(t=>({...t,followers:e?(t.followers||0)+1:Math.max(0,(t.followers||0)-1)})),n(e?`Followed`:`Unfollowed`)}catch(e){console.error(`Failed to toggle follow:`,e),n(`Failed to update follow status`,`error`)}finally{l(!1)}},setStats:s}};var Li=s(),Ri=e=>{let t=(0,Li.c)(65),{profile:n,currentUser:r,isCurrentUser:i,onEditProfile:a,showToast:o,isCommunity:s,isOnline:c}=e,{isFollowing:l,stats:u,loading:d,handleFollow:f}=Ii(n,r?.id,o),p=_i(n.lastSeen),m;t[0]===n.cover?m=t[1]:(m=n.cover&&(0,Q.jsx)(`img`,{src:n.cover,className:`h-full w-full object-cover transition-opacity duration-500`,alt:`Cover`}),t[0]=n.cover,t[1]=m);let h;t[2]!==n.avatar||t[3]!==n.handle?(h=(0,Q.jsx)(xn,{src:n.avatar,alt:n.handle,className:`object-cover`}),t[2]=n.avatar,t[3]=n.handle,t[4]=h):h=t[4];let g;t[5]===n.handle?.[0]?g=t[6]:(g=n.handle?.[0]?.toUpperCase(),t[5]=n.handle?.[0],t[6]=g);let _;t[7]===g?_=t[8]:(_=(0,Q.jsx)(Sn,{className:`text-4xl font-bold`,children:g}),t[7]=g,t[8]=_);let v;t[9]!==h||t[10]!==_?(v=(0,Q.jsxs)(bn,{className:`size-24 sm:size-32`,children:[h,_]}),t[9]=h,t[10]=_,t[11]=v):v=t[11];let y;t[12]===c?y=t[13]:(y=c&&(0,Q.jsx)(`span`,{className:`absolute bottom-2 right-2 size-5 bg-emerald-500 border-4 border-white dark:border-black rounded-full animate-in zoom-in duration-300`}),t[12]=c,t[13]=y);let b;t[14]!==v||t[15]!==y?(b=(0,Q.jsx)(`div`,{className:`absolute -bottom-12 sm:-bottom-16 left-4 sm:left-6`,children:(0,Q.jsxs)(`div`,{className:`p-1 bg-white dark:bg-black rounded-full overflow-hidden shadow-xl ring-4 ring-white dark:ring-black relative`,children:[v,y]})}),t[14]=v,t[15]=y,t[16]=b):b=t[16];let x;t[17]!==m||t[18]!==b?(x=(0,Q.jsxs)(`div`,{className:`relative h-32 sm:h-48 w-full bg-zinc-200 dark:bg-zinc-800`,children:[m,b]}),t[17]=m,t[18]=b,t[19]=x):x=t[19];let S;t[20]!==c||t[21]!==p||t[22]!==n.lastSeen?(S=c?(0,Q.jsxs)(`span`,{className:`flex items-center gap-1.5 text-[11px] font-bold text-emerald-500 bg-emerald-500/10 px-2 py-0.5 rounded-full uppercase tracking-wider`,children:[(0,Q.jsx)(`span`,{className:`size-1.5 bg-emerald-500 rounded-full animate-pulse`}),`Online`]}):n.lastSeen&&(0,Q.jsxs)(`span`,{className:`text-[11px] font-bold text-zinc-500 bg-zinc-100 dark:bg-zinc-800/50 px-2 py-0.5 rounded-full uppercase tracking-wider`,children:[`Last seen `,p]}),t[20]=c,t[21]=p,t[22]=n.lastSeen,t[23]=S):S=t[23];let C;t[24]===S?C=t[25]:(C=(0,Q.jsx)(`div`,{className:`flex-1 min-w-0 pr-4`,children:(0,Q.jsx)(`div`,{className:`flex items-center gap-2`,children:S})}),t[24]=S,t[25]=C);let w;t[26]!==f||t[27]!==i||t[28]!==l||t[29]!==d||t[30]!==a||t[31]!==n?(w=(0,Q.jsx)(`div`,{className:`flex gap-2 shrink-0`,children:i?(0,Q.jsx)(Hn,{variant:`secondary`,onClick:()=>a(n),className:`text-sm px-5`,children:`Edit profile`}):(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsx)(`button`,{className:`rounded-full p-2 border border-zinc-200 dark:border-zinc-700 hover:bg-zinc-50 dark:hover:bg-zinc-900 text-zinc-700 dark:text-zinc-300 dark:border-zinc-800 transition-colors`,children:(0,Q.jsx)(V,{size:20})}),(0,Q.jsx)(`button`,{className:`rounded-full p-2 border border-zinc-200 dark:border-zinc-700 hover:bg-zinc-50 dark:hover:bg-zinc-900 text-zinc-700 dark:text-zinc-300 dark:border-zinc-800 transition-colors`,children:(0,Q.jsx)(G,{size:20})}),(0,Q.jsx)(Hn,{variant:l?`secondary`:`primary`,onClick:f,className:`text-sm px-6 min-w-[100px]`,disabled:d,children:d?(0,Q.jsx)(U,{size:16,className:`animate-spin mx-auto`}):l?`Following`:`Follow`}),(0,Q.jsx)(`button`,{className:`rounded-full p-2 hover:bg-zinc-100 text-zinc-700 dark:text-zinc-300 dark:hover:bg-zinc-800 transition-colors`,children:(0,Q.jsx)(je,{size:20})})]})}),t[26]=f,t[27]=i,t[28]=l,t[29]=d,t[30]=a,t[31]=n,t[32]=w):w=t[32];let T;t[33]!==C||t[34]!==w?(T=(0,Q.jsxs)(`div`,{className:`flex justify-between items-start`,children:[C,w]}),t[33]=C,t[34]=w,t[35]=T):T=t[35];let E;t[36]===n.verified?E=t[37]:(E=n.verified&&(0,Q.jsx)(_r,{}),t[36]=n.verified,t[37]=E);let D;t[38]!==n.name||t[39]!==E?(D=(0,Q.jsx)(`div`,{className:`flex items-center gap-1.5`,children:(0,Q.jsxs)(`h3`,{className:`text-xl sm:text-2xl font-extrabold truncate dark:text-white flex items-center gap-1`,children:[n.name,E]})}),t[38]=n.name,t[39]=E,t[40]=D):D=t[40];let O;t[41]!==s||t[42]!==n.handle?(O=!s&&(0,Q.jsx)(`div`,{className:`flex items-center space-x-3`,children:(0,Q.jsxs)(`span`,{className:`text-zinc-500 font-medium text-sm px-1.5 py-0.5 -ml-1.5 rounded-md dark:text-zinc-400`,children:[`@`,n.handle]})}),t[41]=s,t[42]=n.handle,t[43]=O):O=t[43];let k;t[44]!==D||t[45]!==O?(k=(0,Q.jsxs)(`div`,{className:`space-y-0.5`,children:[D,O]}),t[44]=D,t[45]=O,t[46]=k):k=t[46];let A;t[47]===n.bio?A=t[48]:(A=(0,Q.jsx)(`div`,{className:`whitespace-pre-line text-zinc-900 dark:text-zinc-100 leading-relaxed text-sm sm:text-[15px]`,children:n.bio}),t[47]=n.bio,t[48]=A);let M;t[49]!==n.location||t[50]!==n.website?(M=(n.website||n.location)&&(0,Q.jsxs)(`div`,{className:`flex flex-wrap gap-x-5 gap-y-2 text-sm pt-1`,children:[n.location&&(0,Q.jsxs)(`div`,{className:`flex items-center gap-2 text-zinc-600 dark:text-zinc-400`,children:[(0,Q.jsx)(H,{size:14}),(0,Q.jsx)(`span`,{children:n.location})]}),n.website&&(0,Q.jsxs)(`div`,{className:`flex items-center gap-2 text-zinc-600 dark:text-zinc-400`,children:[(0,Q.jsx)(j,{size:14}),(0,Q.jsx)(`a`,{href:`https://${n.website}`,target:`_blank`,rel:`noreferrer`,className:`text-violet-600 hover:underline font-semibold text-black dark:text-white`,children:n.website})]})]}),t[49]=n.location,t[50]=n.website,t[51]=M):M=t[51];let N;t[52]!==s||t[53]!==n.members||t[54]!==u?(N=(0,Q.jsx)(`div`,{className:`flex gap-4 sm:gap-6 text-sm pt-2`,children:s?(0,Q.jsxs)(`button`,{className:`flex gap-x-1 hover:underline group`,children:[(0,Q.jsx)(`span`,{className:`font-bold text-zinc-900 dark:text-white group-hover:text-violet-600`,children:n.members}),(0,Q.jsx)(`span`,{className:`text-zinc-500 dark:text-zinc-400`,children:`Members`})]}):(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsxs)(`button`,{className:`flex gap-x-1 hover:underline group`,children:[(0,Q.jsx)(`span`,{className:`font-bold text-zinc-900 dark:text-white group-hover:text-violet-600`,children:u.following}),(0,Q.jsx)(`span`,{className:`text-zinc-500 dark:text-zinc-400`,children:`Following`})]}),(0,Q.jsxs)(`button`,{className:`flex gap-x-1 hover:underline group`,children:[(0,Q.jsx)(`span`,{className:`font-bold text-zinc-900 dark:text-white group-hover:text-violet-600`,children:u.followers}),(0,Q.jsx)(`span`,{className:`text-zinc-500 dark:text-zinc-400`,children:`Followers`})]})]})}),t[52]=s,t[53]=n.members,t[54]=u,t[55]=N):N=t[55];let P;t[56]!==T||t[57]!==k||t[58]!==A||t[59]!==M||t[60]!==N?(P=(0,Q.jsxs)(`div`,{className:`flex flex-col p-4 sm:p-6 pt-16 sm:pt-20 space-y-4`,children:[T,k,A,M,N]}),t[56]=T,t[57]=k,t[58]=A,t[59]=M,t[60]=N,t[61]=P):P=t[61];let F;return t[62]!==P||t[63]!==x?(F=(0,Q.jsxs)(`div`,{className:`flex flex-col`,children:[x,P]}),t[62]=P,t[63]=x,t[64]=F):F=t[64],F},zi=s(),Bi=e=>{let t=(0,zi.c)(71),{onEditProfile:n}=e,{handle:r}=a(),i=We(),{profiles:o,currentUser:s,getProfileByHandle:c}=kt(),{onlineUsers:l}=Nt(),{getUserPosts:u}=Jt(),{addToast:d}=Wt(),[f,p]=(0,X.useState)(`feed`),[m,h]=(0,X.useState)(!o[r]),[g,_]=(0,X.useState)(o[r]),v,y;t[0]!==c||t[1]!==r||t[2]!==o?(v=()=>{(async()=>{o[r]?_(o[r]):(h(!0),_(await c(r)),h(!1))})()},y=[r,o,c],t[0]=c,t[1]=r,t[2]=o,t[3]=v,t[4]=y):(v=t[3],y=t[4]),(0,X.useEffect)(v,y);let b;t[5]!==f||t[6]!==u||t[7]!==r?(b=u(r,f),t[5]=f,t[6]=u,t[7]=r,t[8]=b):b=t[8];let x=b,S;t[9]===i?S=t[10]:(S=e=>{i(`/post/${e}`)},t[9]=i,t[10]=S);let C=S,w;t[11]!==r||t[12]!==i?(w=e=>{e!==r&&i(`/u/${e}`)},t[11]=r,t[12]=i,t[13]=w):w=t[13];let T=w;if(m){let e;return t[14]===Symbol.for(`react.memo_cache_sentinel`)?(e=(0,Q.jsx)(`div`,{className:`flex items-center justify-center min-h-screen`,children:(0,Q.jsx)(U,{size:40,className:`animate-spin text-violet-500`})}),t[14]=e):e=t[14],e}let E;t[15]!==r||t[16]!==g?(E=g||{id:null,name:r,handle:r,avatar:`https://static.hey.xyz/images/brands/lens.svg`,cover:`https://static.hey.xyz/images/hero.webp`,bio:`Profile not found`,following:`0`,followers:`0`},t[15]=r,t[16]=g,t[17]=E):E=t[17];let D=E,O;t[18]!==D.id||t[19]!==l?(O=l.has(D.id),t[18]=D.id,t[19]=l,t[20]=O):O=t[20];let k=O,A;t[21]!==d||t[22]!==s||t[23]!==C||t[24]!==T||t[25]!==x?(A=()=>x.length>0?x.map(e=>(0,Q.jsx)(Hr,{currentUser:s,showToast:d,...e,onClick:()=>C(e.id),onUserClick:T},e.id)):(0,Q.jsxs)(`div`,{className:`p-16 text-center text-zinc-500 flex flex-col items-center gap-4`,children:[(0,Q.jsx)(`div`,{className:`bg-zinc-50 dark:bg-zinc-900 p-4 rounded-full`,children:(0,Q.jsx)(Ue,{size:32,className:`text-zinc-300`})}),(0,Q.jsx)(`p`,{className:`font-medium`,children:`No posts found`})]}),t[21]=d,t[22]=s,t[23]=C,t[24]=T,t[25]=x,t[26]=A):A=t[26];let j=A,M;t[27]===i?M=t[28]:(M=()=>i(-1),t[27]=i,t[28]=M);let N;t[29]===Symbol.for(`react.memo_cache_sentinel`)?(N=(0,Q.jsx)(ee,{size:22}),t[29]=N):N=t[29];let P;t[30]===M?P=t[31]:(P=(0,Q.jsx)(`button`,{onClick:M,className:`p-1 rounded-full hover:bg-zinc-100 dark:hover:bg-zinc-800 dark:text-white transition-colors`,children:N}),t[30]=M,t[31]=P);let F;t[32]===D.name?F=t[33]:(F=(0,Q.jsx)(`h5`,{className:`text-lg font-bold dark:text-white leading-none`,children:D.name}),t[32]=D.name,t[33]=F);let I=x?x.length:0,L;t[34]===I?L=t[35]:(L=(0,Q.jsxs)(`span`,{className:`text-xs text-zinc-500 mt-0.5`,children:[I,` Posts`]}),t[34]=I,t[35]=L);let R;t[36]!==F||t[37]!==L?(R=(0,Q.jsxs)(`div`,{className:`flex flex-col`,children:[F,L]}),t[36]=F,t[37]=L,t[38]=R):R=t[38];let z;t[39]!==P||t[40]!==R?(z=(0,Q.jsx)(`div`,{className:`sticky top-0 bg-white/90 dark:bg-black/90 backdrop-blur-md z-20 border-b border-zinc-100 dark:border-zinc-800 px-4 py-3 md:hidden`,children:(0,Q.jsxs)(`div`,{className:`flex items-center gap-x-4`,children:[P,R]})}),t[39]=P,t[40]=R,t[41]=z):z=t[41];let B=s?.handle===D.handle,V;t[42]!==d||t[43]!==s||t[44]!==D||t[45]!==k||t[46]!==n||t[47]!==B?(V=(0,Q.jsx)(Ri,{profile:D,currentUser:s,isCurrentUser:B,onEditProfile:n,showToast:d,isOnline:k}),t[42]=d,t[43]=s,t[44]=D,t[45]=k,t[46]=n,t[47]=B,t[48]=V):V=t[48];let H;t[49]===Symbol.for(`react.memo_cache_sentinel`)?(H=(0,Q.jsx)(`div`,{className:`sticky top-[60px] md:top-0 bg-white/90 dark:bg-black/90 backdrop-blur-md z-10 border-b border-zinc-100 dark:border-zinc-800`,children:(0,Q.jsx)(ei,{className:`w-full h-auto bg-transparent p-0 rounded-none justify-start px-2`,children:[`feed`,`replies`,`media`].map(Vi)})}),t[49]=H):H=t[49];let W;t[50]===j?W=t[51]:(W=j(),t[50]=j,t[51]=W);let G;t[52]===W?G=t[53]:(G=(0,Q.jsx)(ni,{value:`feed`,className:`m-0 border-none`,children:W}),t[52]=W,t[53]=G);let K;t[54]===j?K=t[55]:(K=j(),t[54]=j,t[55]=K);let q;t[56]===K?q=t[57]:(q=(0,Q.jsx)(ni,{value:`replies`,className:`m-0 border-none`,children:K}),t[56]=K,t[57]=q);let J;t[58]===j?J=t[59]:(J=j(),t[58]=j,t[59]=J);let Y;t[60]===J?Y=t[61]:(Y=(0,Q.jsx)(ni,{value:`media`,className:`m-0 border-none`,children:J}),t[60]=J,t[61]=Y);let te;t[62]!==f||t[63]!==G||t[64]!==q||t[65]!==Y?(te=(0,Q.jsxs)($r,{value:f,onValueChange:p,className:`w-full`,children:[H,G,q,Y]}),t[62]=f,t[63]=G,t[64]=q,t[65]=Y,t[66]=te):te=t[66];let ne;return t[67]!==z||t[68]!==V||t[69]!==te?(ne=(0,Q.jsx)(`div`,{className:`border-zinc-100 dark:border-zinc-800 bg-white dark:bg-black rounded-none md:rounded-xl overflow-hidden min-h-screen`,children:(0,Q.jsxs)(`div`,{className:`border-y md:border-b-0 border-zinc-100 dark:border-zinc-800`,children:[z,V,te]})}),t[67]=z,t[68]=V,t[69]=te,t[70]=ne):ne=t[70],ne};function Vi(e){return(0,Q.jsx)(ti,{value:e,className:`flex-1 py-4 text-sm font-bold capitalize rounded-none border-b-2 data-[state=active]:border-black dark:data-[state=active]:border-white data-[state=active]:text-black dark:data-[state=active]:text-white text-zinc-500 transition-all hover:bg-zinc-50 dark:hover:bg-zinc-900`,children:e===`feed`?`Posts`:e},e)}var Hi=s(),Ui=()=>{let e=(0,Hi.c)(32),{id:t}=a(),n=We(),{currentUser:r}=kt(),{addToast:i}=Wt(),o,s;e[0]===t?(o=e[1],s=e[2]):(o=[`post`,t],s=async()=>{if(!hn(t))throw Error(`Invalid post ID`);return it(t)},e[0]=t,e[1]=o,e[2]=s);let c=!!t,u;e[3]!==o||e[4]!==s||e[5]!==c?(u={queryKey:o,queryFn:s,enabled:c,retry:!1},e[3]=o,e[4]=s,e[5]=c,e[6]=u):u=e[6];let{data:d,isLoading:f,isError:p}=l(u);if(f){let t;return e[7]===Symbol.for(`react.memo_cache_sentinel`)?(t=(0,Q.jsx)(`div`,{className:`border-y md:border border-zinc-100 dark:border-zinc-800 bg-white dark:bg-black rounded-none md:rounded-xl overflow-hidden min-h-screen`,children:(0,Q.jsx)(Wr,{})}),e[7]=t):t=e[7],t}if(p||!d){let t;e[8]===Symbol.for(`react.memo_cache_sentinel`)?(t=(0,Q.jsx)(`p`,{className:`text-zinc-500`,children:`Post not found`}),e[8]=t):t=e[8];let r;return e[9]===n?r=e[10]:(r=(0,Q.jsxs)(`div`,{className:`p-10 text-center`,children:[t,(0,Q.jsx)(`button`,{onClick:()=>n(-1),className:`text-violet-500 mt-4 underline font-bold`,children:`Go back`})]}),e[9]=n,e[10]=r),r}let m;e[11]===n?m=e[12]:(m=()=>n(-1),e[11]=n,e[12]=m);let h;e[13]===Symbol.for(`react.memo_cache_sentinel`)?(h=(0,Q.jsx)(ee,{size:20,strokeWidth:2.5}),e[13]=h):h=e[13];let g;e[14]===m?g=e[15]:(g=(0,Q.jsx)(`button`,{onClick:m,className:`p-2 rounded-full hover:bg-zinc-100 dark:hover:bg-zinc-800 dark:text-white transition-colors`,children:h}),e[14]=m,e[15]=g);let _;e[16]===Symbol.for(`react.memo_cache_sentinel`)?(_=(0,Q.jsx)(`h5`,{className:`text-xl font-bold dark:text-white`,children:`Post`}),e[16]=_):_=e[16];let v;e[17]===g?v=e[18]:(v=(0,Q.jsx)(`div`,{className:`sticky top-0 bg-white/90 dark:bg-black/90 backdrop-blur-md z-20 border-b border-zinc-100 dark:border-zinc-800 px-4 py-3`,children:(0,Q.jsxs)(`div`,{className:`flex items-center gap-x-4`,children:[g,_]})}),e[17]=g,e[18]=v);let y;e[19]===d.comments?y=e[20]:(y=d.comments||[],e[19]=d.comments,e[20]=y);let b;e[21]===n?b=e[22]:(b=e=>n(`/u/${e}`),e[21]=n,e[22]=b);let x;e[23]!==i||e[24]!==r||e[25]!==d||e[26]!==b||e[27]!==y?(x=(0,Q.jsx)(Hr,{...d,isDetail:!0,currentUser:r,initialComments:y,showToast:i,onUserClick:b}),e[23]=i,e[24]=r,e[25]=d,e[26]=b,e[27]=y,e[28]=x):x=e[28];let S;return e[29]!==x||e[30]!==v?(S=(0,Q.jsx)(`div`,{className:`border-y md:border border-zinc-100 dark:border-zinc-800 bg-white dark:bg-black rounded-none md:rounded-xl overflow-hidden min-h-screen shadow-sm mb-20 animate-in slide-in-from-right-5 duration-300`,children:(0,Q.jsxs)(`div`,{className:`border-b border-zinc-100 dark:border-zinc-800`,children:[v,x]})}),e[29]=x,e[30]=v,e[31]=S):S=e[31],S},Wi=s();function Gi(){let e=(0,Wi.c)(49),t=N(),{currentUser:n,authMode:r,setAuthMode:i}=kt(),{darkMode:a}=Lt(),{isOpen:o,images:s,currentIndex:c,closeLightbox:l,setIndex:d}=Qt(),[f,p]=(0,X.useState)(!1),[m,h]=(0,X.useState)(!1),[g,_]=(0,X.useState)(!1),y;e[0]===Symbol.for(`react.memo_cache_sentinel`)?(y={},e[0]=y):y=e[0];let[b,x]=(0,X.useState)(y),[C,w]=(0,X.useState)(null);if(r){let t=a?`dark`:``,n;e[1]===i?n=e[2]:(n=()=>i(null),e[1]=i,e[2]=n);let o;e[3]!==r||e[4]!==i?(o=()=>i(r===`login`?`signup`:`login`),e[3]=r,e[4]=i,e[5]=o):o=e[5];let s;e[6]!==r||e[7]!==n||e[8]!==o?(s=(0,Q.jsx)(`div`,{className:`min-h-screen bg-white dark:bg-black flex items-center justify-center p-4`,children:(0,Q.jsx)(sr,{children:(0,Q.jsx)(ar,{type:r,onComplete:n,onSwitch:o})})}),e[6]=r,e[7]=n,e[8]=o,e[9]=s):s=e[9];let c;return e[10]!==t||e[11]!==s?(c=(0,Q.jsx)(`div`,{className:t,children:s}),e[10]=t,e[11]=s,e[12]=c):c=e[12],c}let T;e[13]===Symbol.for(`react.memo_cache_sentinel`)?(T=(0,Q.jsx)(mn,{}),e[13]=T):T=e[13];let E;e[14]===Symbol.for(`react.memo_cache_sentinel`)?(E=(0,Q.jsx)(kn,{}),e[14]=E):E=e[14];let D;e[15]===Symbol.for(`react.memo_cache_sentinel`)?(D=(0,Q.jsx)(v,{path:`/`,element:(0,Q.jsx)(sr,{children:(0,Q.jsx)(Kr,{onStoryClick:w,onAddStory:()=>_(!0)})})}),e[15]=D):D=e[15];let O;e[16]===Symbol.for(`react.memo_cache_sentinel`)?(O=(0,Q.jsx)(v,{path:`/home`,element:(0,Q.jsx)(A,{to:`/`,replace:!0})}),e[16]=O):O=e[16];let k;e[17]===Symbol.for(`react.memo_cache_sentinel`)?(k=(0,Q.jsx)(v,{path:`/explore`,element:(0,Q.jsx)(sr,{children:(0,Q.jsx)(ii,{})})}),e[17]=k):k=e[17];let j;e[18]===Symbol.for(`react.memo_cache_sentinel`)?(j=(0,Q.jsx)(v,{path:`/reels`,element:(0,Q.jsx)(sr,{children:(0,Q.jsx)(pi,{})})}),e[18]=j):j=e[18];let M;e[19]===Symbol.for(`react.memo_cache_sentinel`)?(M=(0,Q.jsx)(v,{path:`/messages`,element:(0,Q.jsx)(sr,{children:(0,Q.jsx)(Ai,{})})}),e[19]=M):M=e[19];let P;e[20]===Symbol.for(`react.memo_cache_sentinel`)?(P=(0,Q.jsx)(v,{path:`/messages/:id`,element:(0,Q.jsx)(sr,{children:(0,Q.jsx)(Ai,{})})}),e[20]=P):P=e[20];let F;e[21]===Symbol.for(`react.memo_cache_sentinel`)?(F=(0,Q.jsx)(v,{path:`/notifications`,element:(0,Q.jsx)(sr,{children:(0,Q.jsx)(Ni,{})})}),e[21]=F):F=e[21];let I;e[22]===Symbol.for(`react.memo_cache_sentinel`)?(I=(0,Q.jsx)(v,{path:`/post/:id`,element:(0,Q.jsx)(sr,{children:(0,Q.jsx)(Ui,{})})}),e[22]=I):I=e[22];let L;e[23]===Symbol.for(`react.memo_cache_sentinel`)?(L=(0,Q.jsx)(v,{path:`/u/:handle`,element:(0,Q.jsx)(sr,{children:(0,Q.jsx)(Bi,{onEditProfile:e=>{x(e),h(!0)}})})}),e[23]=L):L=e[23];let z;e[24]===Symbol.for(`react.memo_cache_sentinel`)?(z=(0,Q.jsxs)(v,{element:E,children:[D,O,k,j,M,P,F,I,L,(0,Q.jsx)(v,{path:`*`,element:(0,Q.jsx)(A,{to:`/explore`})})]}),e[24]=z):z=e[24];let B;e[25]===t?B=e[26]:(B=(0,Q.jsx)(u,{mode:`wait`,children:(0,Q.jsx)(S,{location:t,children:z},t.pathname)}),e[25]=t,e[26]=B);let V;e[27]!==b||e[28]!==m||e[29]!==f||e[30]!==g?(V=(0,Q.jsx)(Qn,{isPostModalOpen:f,setIsPostModalOpen:p,isEditProfileOpen:m,setIsEditProfileOpen:h,isStoryModalOpen:g,setIsStoryModalOpen:_,editProfileData:b,setEditProfileData:x}),e[27]=b,e[28]=m,e[29]=f,e[30]=g,e[31]=V):V=e[31];let H;e[32]===C?H=e[33]:(H=C&&(0,Q.jsx)(er,{story:C,onClose:()=>w(null)}),e[32]=C,e[33]=H);let U;e[34]!==l||e[35]!==c||e[36]!==s||e[37]!==o||e[38]!==d?(U=o&&(0,Q.jsx)(nr,{images:s,currentIndex:c,onClose:l,onNavigate:d}),e[34]=l,e[35]=c,e[36]=s,e[37]=o,e[38]=d,e[39]=U):U=e[39];let W;e[40]!==n||e[41]!==t.pathname?(W=n&&t.pathname===`/`&&(0,Q.jsx)(`button`,{onClick:()=>p(!0),className:`fixed bottom-20 right-5 md:bottom-10 md:right-10 z-50 bg-zinc-950 dark:bg-white text-white dark:text-zinc-950 size-12 md:size-16 rounded-full flex items-center justify-center shadow-2xl hover:scale-110 active:scale-90 transition-all cursor-pointer group`,title:`Create Post`,children:(0,Q.jsx)(R,{size:28,className:`md:w-8 md:h-8 group-hover:rotate-90 transition-transform duration-300`})}),e[40]=n,e[41]=t.pathname,e[42]=W):W=e[42];let G;return e[43]!==B||e[44]!==V||e[45]!==H||e[46]!==U||e[47]!==W?(G=(0,Q.jsxs)(Q.Fragment,{children:[T,B,V,H,U,W]}),e[43]=B,e[44]=V,e[45]=H,e[46]=U,e[47]=W,e[48]=G):G=e[48],G}var Ki=new Ge;(0,Xe.createRoot)(document.getElementById(`root`)).render((0,Q.jsx)(X.StrictMode,{children:(0,Q.jsx)(O,{client:Ki,children:(0,Q.jsx)(me,{children:(0,Q.jsx)(It,{children:(0,Q.jsx)(Ot,{children:(0,Q.jsx)(Mt,{children:(0,Q.jsx)(qt,{children:(0,Q.jsx)(Ut,{children:(0,Q.jsx)(Zt,{children:(0,Q.jsx)(Gi,{})})})})})})})})})}));
//# sourceMappingURL=index-B5BGV8tx.js.map
const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/VideoPlayer-R1VZRQLW.js","assets/framework-BjssErrK.js","assets/database-CdmW3A7f.js","assets/animations-Kp4r2r5F.js","assets/rolldown-runtime-BaZ8gS7u.js","assets/framework-sg0yWRLc.css","assets/media-libs-DyQ6Lt1T.js","assets/media-libs-CqCaMccn.css","assets/VideoPlayer-Dg4Ry3y9.js","assets/index-xp3ajAXe.js","assets/ui-libs-EpJdbQFE.js","assets/query-BlVNDywe.js","assets/index-BxYG9ddW.css","assets/dist-CqcvTCol.js"])))=>i.map(i=>d[i]);
import{a as gt}from"./rolldown-runtime-BaZ8gS7u.js";import{a as ye,c as At,i as V,s as Dt}from"./animations-Kp4r2r5F.js";import{_ as ce,b as vt,c as q,n as Lt,u as Ot}from"./framework-BjssErrK.js";import{r as Ut}from"./query-BlVNDywe.js";import{Bn as Ne,Cn as Wt,Dt as oe,Hn as Ht,In as Bt,It as Vt,Jt as Be,Ln as qt,Nn as we,Pn as Ve,Pt as qe,Rt as Ge,Wn as Gt,Xt as Qt,Yn as Xt,en as Ce,fn as Jt,hn as bt,in as Qe,jn as Xe,kn as ge,ln as Yt,nn as Kt,nr as Zt,on as es,sn as ts,tn as ss,vn as is,zn as as}from"./ui-libs-EpJdbQFE.js";import{$t as ls,Bt as te,E as ns,F as rs,Ft as Je,Gt as os,H as cs,It as Ye,Kt as ds,L as ms,Lt as Ke,M as xs,Mt as Ze,Nt as et,O as hs,P as ve,Pt as tt,Qt as st,Rt as it,T as jt,Tt as fs,U as us,Ut as ps,Vt as se,Wt as kt,Xt as gs,Yt as zt,_n as $e,_t as ne,an as vs,dn as bs,en as js,g as ks,hn as zs,ht as ys,in as Ns,jt as at,k as ws,ln as lt,lt as yt,m as nt,mt as Cs,on as $s,qt as Se,sn as _s,un as Ss,vn as X,vt as Ps,xn as rt,yn as pe,yt as Fs,zt as ie}from"./index-xp3ajAXe.js";import{i as Nt,n as Ts,r as wt,t as Pe}from"./text-processing-C3-PA5LD.js";import{n as re,t as Rs}from"./actionsheet-z62p0GvR.js";var Is=q(),$=gt(At(),1),t=gt(Dt(),1),Ms=s=>{const e=(0,Is.c)(37),{isComment:i,liked:n,reposted:a,handleLike:l,handleRepost:r,handleCommentClick:d,handleShareClick:o,isDetail:x}=s;if(x!==void 0&&x){let w;e[0]!==l||e[1]!==n?(w=(0,t.jsx)(J,{icon:ge,label:"Like",type:"like",onClick:l,active:n}),e[0]=l,e[1]=n,e[2]=w):w=e[2];let z;e[3]!==r||e[4]!==i||e[5]!==a?(z=!i&&(0,t.jsx)(J,{icon:Ce,label:"Repost",type:"repost",onClick:r,active:a}),e[3]=r,e[4]=i,e[5]=a,e[6]=z):z=e[6];let y;e[7]!==d?(y=(0,t.jsx)(J,{icon:jt,label:"Comment",type:"comment",onClick:d}),e[7]=d,e[8]=y):y=e[8];let c;e[9]!==o||e[10]!==i?(c=!i&&(0,t.jsx)(J,{icon:ve,label:"Share",type:"share",onClick:o}),e[9]=o,e[10]=i,e[11]=c):c=e[11];let _;return e[12]!==w||e[13]!==z||e[14]!==y||e[15]!==c?(_=(0,t.jsxs)("div",{className:"mt-4 flex w-full items-center justify-around py-1",children:[w,z,y,c]}),e[12]=w,e[13]=z,e[14]=y,e[15]=c,e[16]=_):_=e[16],_}const p=`flex items-center gap-x-1 ${i?"mt-1.5":"mt-3"}`,f=i?16:18;let m;e[17]!==l||e[18]!==n||e[19]!==f?(m=(0,t.jsx)(J,{icon:ge,size:f,type:"like",onClick:l,active:n}),e[17]=l,e[18]=n,e[19]=f,e[20]=m):m=e[20];const h=i?16:18;let v;e[21]!==d||e[22]!==h?(v=(0,t.jsx)(J,{icon:bt,size:h,type:"comment",onClick:d}),e[21]=d,e[22]=h,e[23]=v):v=e[23];const u=i?16:18;let b;e[24]!==r||e[25]!==a||e[26]!==u?(b=(0,t.jsx)(J,{icon:Ce,size:u,type:"repost",onClick:r,active:a}),e[24]=r,e[25]=a,e[26]=u,e[27]=b):b=e[27];let g;e[28]!==o||e[29]!==i?(g=!i&&o&&(0,t.jsx)(J,{icon:ve,type:"share",onClick:o}),e[28]=o,e[29]=i,e[30]=g):g=e[30];let N;return e[31]!==p||e[32]!==m||e[33]!==v||e[34]!==b||e[35]!==g?(N=(0,t.jsxs)("div",{className:p,children:[m,v,b,g]}),e[31]=p,e[32]=m,e[33]=v,e[34]=b,e[35]=g,e[36]=N):N=e[36],N},ot=Ms,Es=q(),As=s=>{const e=(0,Es.c)(38),{views:i,likes:n,comments:a,isDetail:l,isComment:r,onRepliesClick:d}=s,o=l===void 0?!1:l,x=r===void 0?!1:r;if(o){const b=i||0;let g;e[0]!==b?(g=(0,t.jsx)("span",{className:"font-bold text-black dark:text-white",children:b}),e[0]=b,e[1]=g):g=e[1];let N;e[2]===Symbol.for("react.memo_cache_sentinel")?(N=(0,t.jsx)("span",{className:"opacity-70",children:"Views"}),e[2]=N):N=e[2];let w;e[3]!==g?(w=(0,t.jsxs)("div",{className:"flex items-center gap-x-1",children:[g," ",N]}),e[3]=g,e[4]=w):w=e[4];const z=n||0;let y;e[5]!==z?(y=(0,t.jsx)("span",{className:"font-bold text-black dark:text-white",children:z}),e[5]=z,e[6]=y):y=e[6];let c;e[7]===Symbol.for("react.memo_cache_sentinel")?(c=(0,t.jsx)("span",{className:"opacity-70",children:"Likes"}),e[7]=c):c=e[7];let _;e[8]!==y?(_=(0,t.jsxs)("div",{className:"flex items-center gap-x-1",children:[y," ",c]}),e[8]=y,e[9]=_):_=e[9];const S=a||0;let I;e[10]!==S?(I=(0,t.jsx)("span",{className:"font-bold text-black dark:text-white",children:S}),e[10]=S,e[11]=I):I=e[11];let C;e[12]===Symbol.for("react.memo_cache_sentinel")?(C=(0,t.jsx)("span",{className:"opacity-70",children:"Comments"}),e[12]=C):C=e[12];let j;e[13]!==I?(j=(0,t.jsxs)("div",{className:"flex items-center gap-x-1",children:[I," ",C]}),e[13]=I,e[14]=j):j=e[14];let F;return e[15]!==_||e[16]!==j||e[17]!==w?(F=(0,t.jsxs)("div",{className:"mt-4 flex items-center gap-x-6 border-b border-zinc-100 pb-4 text-sm text-zinc-500 dark:border-zinc-800 dark:text-zinc-400",children:[w,_,j]}),e[15]=_,e[16]=j,e[17]=w,e[18]=F):F=e[18],F}if(a===0&&n===0&&(i===0||x))return null;const p=`mt-1 flex items-center gap-x-1.5 px-0.5 ${x?"text-[12px]":"text-[14px]"} font-medium text-zinc-500 dark:text-zinc-400`;let f;e[19]!==a||e[20]!==x||e[21]!==n||e[22]!==i?(f=i>0&&!x&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("span",{className:"hover:underline",children:[i," ",i===1?"view":"views"]}),(a>0||n>0)&&(0,t.jsx)("span",{className:"opacity-50",children:"·"})]}),e[19]=a,e[20]=x,e[21]=n,e[22]=i,e[23]=f):f=e[23];let m;e[24]!==a||e[25]!==d?(m=a>0&&(0,t.jsxs)("button",{className:"hover:underline",onClick:b=>{b.stopPropagation(),d&&d(b)},children:[a," ",a===1?"reply":"replies"]}),e[24]=a,e[25]=d,e[26]=m):m=e[26];let h;e[27]!==a||e[28]!==n?(h=a>0&&n>0&&(0,t.jsx)("span",{className:"opacity-50",children:"·"}),e[27]=a,e[28]=n,e[29]=h):h=e[29];let v;e[30]!==n?(v=n>0&&(0,t.jsxs)("button",{className:"hover:underline",children:[n," ",n===1?"like":"likes"]}),e[30]=n,e[31]=v):v=e[31];let u;return e[32]!==p||e[33]!==f||e[34]!==m||e[35]!==h||e[36]!==v?(u=(0,t.jsxs)("div",{className:p,children:[f,m,h,v]}),e[32]=p,e[33]=f,e[34]=m,e[35]=h,e[36]=v,e[37]=u):u=e[37],u},ct=As,Ds=q(),Ls=s=>{const e=(0,Ds.c)(43),{user:i,timeAgo:n,community:a,onUserClick:l,actionsMenu:r,isComment:d,isDetail:o,showAvatar:x}=s,p=x===void 0?!1:x,f=ce();let m;e[0]!==l||e[1]!==i.handle?(m=T=>{T.stopPropagation(),l&&l(i.handle)},e[0]=l,e[1]=i.handle,e[2]=m):m=e[2];const h=m;let v;e[3]!==a||e[4]!==f?(v=T=>{T.stopPropagation(),a&&f(`/c/${a.handle}`)},e[3]=a,e[4]=f,e[5]=v):v=e[5];const u=v,b=`flex items-center justify-between ${o?"pb-4":"min-h-[40px] mb-1"}`;let g;e[6]!==h||e[7]!==d||e[8]!==o||e[9]!==p||e[10]!==i.avatar||e[11]!==i.handle?(g=p&&(0,t.jsx)("button",{className:"shrink-0",onClick:h,children:(0,t.jsxs)(ie,{className:`${o?"size-12":d?"size-8":"size-10"} border-0 shadow-sm`,children:[(0,t.jsx)(se,{src:i.avatar,alt:i.handle,className:"object-cover"}),(0,t.jsx)(te,{className:"text-xs",children:i.handle[0]?.toUpperCase()})]})}),e[6]=h,e[7]=d,e[8]=o,e[9]=p,e[10]=i.avatar,e[11]=i.handle,e[12]=g):g=e[12];const N=`flex shrink-0 items-center gap-1 font-bold text-zinc-900 hover:underline dark:text-white ${o?"text-base sm:text-lg":d?"text-[14px]":"text-[15px]"}`;let w;e[13]!==i.handle?(w=(0,t.jsx)("span",{className:"max-w-[150px] truncate sm:max-w-none",children:i.handle}),e[13]=i.handle,e[14]=w):w=e[14];let z;e[15]!==d||e[16]!==o||e[17]!==i.verified?(z=i.verified&&(0,t.jsx)(rs,{size:o?16:d?12:14,className:"text-blue-500"}),e[15]=d,e[16]=o,e[17]=i.verified,e[18]=z):z=e[18];let y;e[19]!==h||e[20]!==N||e[21]!==w||e[22]!==z?(y=(0,t.jsxs)("button",{className:N,onClick:h,children:[w,z]}),e[19]=h,e[20]=N,e[21]=w,e[22]=z,e[23]=y):y=e[23];let c;e[24]!==a||e[25]!==u||e[26]!==o?(c=a&&(0,t.jsxs)("div",{className:"flex min-w-0 items-center gap-1 text-zinc-500",children:[(0,t.jsx)(ns,{size:o?14:12,className:"shrink-0 text-zinc-400"}),(0,t.jsxs)("button",{className:`flex items-center gap-1 font-bold text-zinc-900 hover:underline dark:text-zinc-100 ${o?"text-[14px] sm:text-[15px]":"text-[13px]"}`,onClick:u,children:[(0,t.jsxs)(ie,{className:"size-3.5 shrink-0 border border-zinc-200 bg-zinc-100 dark:border-zinc-700 dark:bg-zinc-800",children:[(0,t.jsx)(se,{src:a.avatar,alt:a.name,className:"object-cover"}),(0,t.jsx)(te,{className:"text-[6px] font-bold text-zinc-500",children:a.name?.[0]?.toUpperCase()})]}),(0,t.jsx)("span",{className:"max-w-[150px] truncate sm:max-w-none",children:a.name})]})]}),e[24]=a,e[25]=u,e[26]=o,e[27]=c):c=e[27];let _;e[28]!==c||e[29]!==y?(_=(0,t.jsx)("div",{className:"flex min-w-0 flex-1 flex-col",children:(0,t.jsx)("div",{className:"flex flex-wrap items-center gap-x-1.5 leading-none",children:(0,t.jsxs)("div",{className:"flex min-w-0 max-w-full items-center gap-1.5",children:[y,c]})})}),e[28]=c,e[29]=y,e[30]=_):_=e[30];let S;e[31]!==_||e[32]!==g?(S=(0,t.jsxs)("div",{className:"flex items-center gap-x-3 flex-1 min-w-0",children:[g,_]}),e[31]=_,e[32]=g,e[33]=S):S=e[33];const I=n||"Recent";let C;e[34]!==I?(C=(0,t.jsx)("span",{className:"whitespace-nowrap text-[12px] text-zinc-500 dark:text-zinc-400",children:I}),e[34]=I,e[35]=C):C=e[35];let j;e[36]!==r||e[37]!==C?(j=(0,t.jsxs)("div",{className:"-mt-1 flex items-center gap-2",children:[C,r]}),e[36]=r,e[37]=C,e[38]=j):j=e[38];let F;return e[39]!==S||e[40]!==j||e[41]!==b?(F=(0,t.jsxs)("div",{className:b,children:[S,j]}),e[39]=S,e[40]=j,e[41]=b,e[42]=F):F=e[42],F},dt=Ls,Os=wt("hashtag",{isLink:!0});function Us({scanner:s,parser:e}){const{POUND:i,UNDERSCORE:n,FULLWIDTHMIDDLEDOT:a,ASCIINUMERICAL:l,ALPHANUMERICAL:r}=s.tokens,{alpha:d,numeric:o,alphanumeric:x,emoji:p}=s.tokens.groups,f=e.start.tt(i),m=f.tt(n),h=new Ts(Os);f.tt(l,h),f.tt(r,h),f.ta(o,m),f.ta(d,h),f.ta(p,h),f.ta(a,h),m.tt(l,h),m.tt(r,h),m.ta(d,h),m.ta(p,h),m.ta(a,h),m.ta(o,m),m.tt(n,m),h.ta(x,h),h.ta(p,h),h.tt(a,h),h.tt(n,h)}Nt("hashtag",Us);var Ws=wt("mention",{isLink:!0,toHref(){return"/"+this.toString().slice(1)}});function Hs({scanner:s,parser:e}){const{HYPHEN:i,SLASH:n,UNDERSCORE:a,AT:l}=s.tokens,{domain:r}=s.tokens.groups,d=e.start.tt(l),o=d.tt(i);o.tt(i,o);const x=d.tt(a,Ws);d.ta(r,x),o.tt(a,x),o.ta(r,x),x.ta(r,x),x.tt(i,x),x.tt(a,x);const p=x.tt(n);p.ta(r,x),p.tt(a,x),p.tt(i,x)}Nt("mention",Hs);const Fe={formatHref:(s,e)=>e==="mention"?`/u/${s.substring(1)}`:e==="hashtag"?`/tags/${s.substring(1)}`:s,attributes:{onClick:s=>s.stopPropagation(),className:"cursor-pointer font-bold text-rose-600 hover:underline dark:text-rose-400"},validate:{hashtag:s=>/^#[\u0980-\u09FF\w]+$/.test(s)},target:(s,e)=>e==="url"?"_blank":void 0,rel:(s,e)=>e==="url"?"noopener noreferrer":void 0};var Bs=q(),Vs=s=>{const e=(0,Bs.c)(45),{content:i,isDetail:n,isEditing:a,editedContent:l,setEditedContent:r,onCancelEdit:d,onSaveEdit:o,isUpdating:x,contentClass:p}=s,f=ce(),[m,h]=(0,$.useState)(!1),v=typeof i=="string"&&rt(i);if(a&&r){let j;e[0]!==r?(j=W=>r(W.target.value),e[0]=r,e[1]=j):j=e[1];const F=`min-h-[100px] w-full rounded-xl border-zinc-200 bg-zinc-50 focus:ring-violet-500 dark:border-zinc-800 dark:bg-zinc-900 ${rt(l||"")?"font-bangla text-lg":"font-english"}`;let T;e[2]!==l||e[3]!==j||e[4]!==F?(T=(0,t.jsx)(ms,{value:l,onChange:j,className:F,autoFocus:!0}),e[2]=l,e[3]=j,e[4]=F,e[5]=T):T=e[5];let M;e[6]!==d?(M=(0,t.jsx)("button",{onClick:d,className:"px-4 py-1.5 text-sm font-bold text-zinc-500 transition-colors hover:text-zinc-700 dark:hover:text-zinc-300",children:"Cancel"}),e[6]=d,e[7]=M):M=e[7];let E;e[8]!==i||e[9]!==l||e[10]!==x?(E=x||!l?.trim()||l===i,e[8]=i,e[9]=l,e[10]=x,e[11]=E):E=e[11];const O=x?"Saving...":"Save";let A;e[12]!==o||e[13]!==E||e[14]!==O?(A=(0,t.jsx)("button",{onClick:o,disabled:E,className:"rounded-full bg-violet-600 px-4 py-1.5 text-sm font-bold text-white transition-all hover:bg-violet-700 disabled:opacity-50 active:scale-95",children:O}),e[12]=o,e[13]=E,e[14]=O,e[15]=A):A=e[15];let L;e[16]!==M||e[17]!==A?(L=(0,t.jsxs)("div",{className:"flex justify-end gap-2",children:[M,A]}),e[16]=M,e[17]=A,e[18]=L):L=e[18];let U;return e[19]!==T||e[20]!==L?(U=(0,t.jsxs)("div",{className:"mt-2 flex flex-col gap-2",onClick:qs,children:[T,L]}),e[19]=T,e[20]=L,e[21]=U):U=e[21],U}const u=!n&&i.length>280;let b;e[22]!==i||e[23]!==m||e[24]!==u?(b=u&&!m?i.substring(0,280):i,e[22]=i,e[23]=m,e[24]=u,e[25]=b):b=e[25];const g=b,N=n?"text-lg leading-relaxed sm:text-xl sm:leading-8":"text-[15px] leading-relaxed",w=v?"font-bangla text-[1.15em]":"font-english";let z;e[26]!==p||e[27]!==N||e[28]!==w?(z=X("whitespace-pre-line break-words",N,w,p),e[26]=p,e[27]=N,e[28]=w,e[29]=z):z=e[29];let y;e[30]!==f?(y={...Fe,render:j=>{const{attributes:F,content:T}=j,{href:M,...E}=F,O=window.location.origin;if(M.includes("internal.tag/")){const L=decodeURIComponent(M.split("internal.tag/")[1]);return(0,t.jsxs)("span",{...E,className:X("cursor-pointer font-bold text-rose-600 hover:underline dark:text-rose-400 font-bangla",E.className),onClick:U=>{U.stopPropagation(),f(`/tags/${L}`)},children:["#",L]},T)}let A=null;return M.startsWith("/")?A=M:M.startsWith(O)&&(A=M.replace(O,"")),A?(0,t.jsx)("span",{...E,className:X("cursor-pointer font-medium text-violet-600 hover:underline dark:text-violet-400",E.className),onClick:L=>{L.stopPropagation(),f(A)},children:T},T):(0,t.jsx)("a",{href:M,...E,target:"_blank",rel:"noopener noreferrer",className:X("text-violet-600 hover:underline dark:text-violet-400",E.className),onClick:Gs,children:T},T)}},e[30]=f,e[31]=y):y=e[31];let c;e[32]!==g?(c=typeof g=="string"?g.replace(/#([\u0980-\u09FF\w]+)/g,"https://internal.tag/$1"):g,e[32]=g,e[33]=c):c=e[33];let _;e[34]!==y||e[35]!==c?(_=(0,t.jsx)(Pe,{options:y,children:c}),e[34]=y,e[35]=c,e[36]=_):_=e[36];const S=u&&!m&&"...";let I;e[37]!==m||e[38]!==u?(I=u&&(0,t.jsx)("button",{onClick:j=>{j.stopPropagation(),h(!m)},className:"ml-1 cursor-pointer font-bold text-rose-600 hover:underline dark:text-rose-400",children:m?"Show less":"See more"}),e[37]=m,e[38]=u,e[39]=I):I=e[39];let C;return e[40]!==z||e[41]!==_||e[42]!==S||e[43]!==I?(C=(0,t.jsxs)("div",{className:z,children:[_,S,I]}),e[40]=z,e[41]=_,e[42]=S,e[43]=I,e[44]=C):C=e[44],C},mt=Vs;function qs(s){return s.stopPropagation()}function Gs(s){return s.stopPropagation()}var Qs=q(),Xs=s=>{const e=(0,Qs.c)(28),{media:i,isEditing:n,editedMedia:a,setEditedMedia:l,newFiles:r,setNewFiles:d}=s;let o;e[0]!==a?(o=a===void 0?[]:a,e[0]=a,e[1]=o):o=e[1];const x=o;let p;e[2]!==r?(p=r===void 0?[]:r,e[2]=r,e[3]=p):p=e[3];const f=p,m=(0,$.useRef)(null);if(n&&l&&d){let v;if(e[4]!==x||e[5]!==l){let z;e[7]!==l?(z=(y,c)=>(0,t.jsxs)("div",{className:"group relative aspect-square overflow-hidden rounded-xl border border-zinc-200 dark:border-zinc-800",children:[y.type==="video"?(0,t.jsx)("div",{className:"flex size-full items-center justify-center bg-zinc-100 dark:bg-zinc-900",children:(0,t.jsx)(Ve,{size:24,className:"text-zinc-400"})}):(0,t.jsx)("img",{src:y.url||y.src,className:"size-full object-cover",alt:""}),(0,t.jsx)("button",{onClick:_=>{_.stopPropagation(),l(S=>S.filter((I,C)=>C!==c))},className:"absolute right-1.5 top-1.5 flex size-7 items-center justify-center rounded-full bg-black/60 text-white transition-colors hover:bg-black",children:(0,t.jsx)(oe,{size:16})})]},`old-${c}`),e[7]=l,e[8]=z):z=e[8],v=x.map(z),e[4]=x,e[5]=l,e[6]=v}else v=e[6];let u;if(e[9]!==f||e[10]!==d){let z;e[12]!==d?(z=(y,c)=>(0,t.jsxs)("div",{className:"group relative aspect-square overflow-hidden rounded-xl border-2 border-dashed border-violet-500 bg-violet-50/10",children:[y.type.startsWith("image/")?(0,t.jsx)("img",{src:URL.createObjectURL(y),className:"size-full object-cover",alt:""}):(0,t.jsx)("div",{className:"flex size-full items-center justify-center",children:(0,t.jsx)(Ve,{size:24,className:"animate-pulse text-violet-500"})}),(0,t.jsx)("button",{onClick:_=>{_.stopPropagation(),d(S=>S.filter((I,C)=>C!==c))},className:"absolute right-1.5 top-1.5 flex size-7 items-center justify-center rounded-full bg-black/60 text-white transition-colors hover:bg-black",children:(0,t.jsx)(oe,{size:16})}),(0,t.jsx)("div",{className:"absolute bottom-1 left-1 rounded bg-violet-600 px-1 text-[8px] font-bold text-white",children:"NEW"})]},`new-${c}`),e[12]=d,e[13]=z):z=e[13],u=f.map(z),e[9]=f,e[10]=d,e[11]=u}else u=e[11];let b;e[14]!==x.length||e[15]!==f.length?(b=x.length+f.length<4&&(0,t.jsxs)("button",{onClick:z=>{z.stopPropagation(),m.current?.click()},className:"relative flex aspect-square flex-col items-center justify-center gap-1 rounded-xl border-2 border-dashed border-zinc-200 text-zinc-400 transition-all hover:border-violet-500 hover:bg-violet-50/5 hover:text-violet-500 dark:border-zinc-800",children:[(0,t.jsx)(ss,{size:20}),(0,t.jsx)("span",{className:"text-[10px] font-bold",children:"Add Media"})]}),e[14]=x.length,e[15]=f.length,e[16]=b):b=e[16];let g;e[17]!==v||e[18]!==u||e[19]!==b?(g=(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2 sm:grid-cols-3",children:[v,u,b]}),e[17]=v,e[18]=u,e[19]=b,e[20]=g):g=e[20];let N;e[21]!==d?(N=(0,t.jsx)("input",{type:"file",ref:m,onChange:z=>{if(z.target.files){const y=Array.from(z.target.files);d(c=>[...c,...y])}},multiple:!0,className:"hidden",accept:"image/*,video/*"}),e[21]=d,e[22]=N):N=e[22];let w;return e[23]!==g||e[24]!==N?(w=(0,t.jsxs)("div",{className:"mt-3 space-y-3",children:[g,N]}),e[23]=g,e[24]=N,e[25]=w):w=e[25],w}if(!i||i.length===0)return null;let h;return e[26]!==i?(h=(0,t.jsx)(vi,{items:i}),e[26]=i,e[27]=h):h=e[27],h},xt=Xs,Js=q(),Ys=s=>{const e=(0,Js.c)(48),{icon:i,count:n,label:a,onClick:l,active:r,activeColorClass:d,size:o,type:x}=s,p=o===void 0?18:o,f=x===void 0?"default":x;let m,h,v,u,b,g,N;if(e[0]!==r||e[1]!==d||e[2]!==n||e[3]!==a||e[4]!==l||e[5]!==f){const E={like:{hoverBg:"group-hover:bg-rose-500/10",hoverText:"group-hover:text-rose-500",activeText:"text-rose-500",activeFill:"fill-rose-500"},repost:{hoverBg:"group-hover:bg-emerald-500/10",hoverText:"group-hover:text-emerald-500",activeText:"text-emerald-500",activeFill:"fill-emerald-500"},comment:{hoverBg:"group-hover:bg-sky-500/10",hoverText:"group-hover:text-sky-500",activeText:"text-sky-500",activeFill:"fill-sky-500"},share:{hoverBg:"group-hover:bg-violet-500/10",hoverText:"group-hover:text-violet-500",activeText:"text-violet-500",activeFill:"fill-violet-500"},default:{hoverBg:"group-hover:bg-zinc-500/10",hoverText:"group-hover:text-zinc-500",activeText:"text-zinc-900 dark:text-white",activeFill:"fill-current"}};h=E[f]||E.default;const O=d||h.activeText;m=V.button,e[13]===Symbol.for("react.memo_cache_sentinel")?(u={scale:.85},e[13]=u):u=e[13],e[14]!==l?(b=A=>{A.stopPropagation(),l&&l(A)},e[14]=l,e[15]=b):b=e[15],g=`${a} ${n!==void 0?`(${n})`:""}`,N=X("group -ml-2 flex items-center gap-x-0.5 rounded-xl px-2 py-1.5 text-[12px] font-bold transition-all sm:gap-x-1 sm:text-[13px]",r?O:"text-zinc-500",!r&&h.hoverText),v=X("rounded-full p-2 transition-all duration-200",!r&&h.hoverBg),e[0]=r,e[1]=d,e[2]=n,e[3]=a,e[4]=l,e[5]=f,e[6]=m,e[7]=h,e[8]=v,e[9]=u,e[10]=b,e[11]=g,e[12]=N}else m=e[6],h=e[7],v=e[8],u=e[9],b=e[10],g=e[11],N=e[12];let w;e[16]!==r?(w=r?{scale:[1,1.4,1],rotate:[0,15,0]}:{scale:1},e[16]=r,e[17]=w):w=e[17];let z;e[18]===Symbol.for("react.memo_cache_sentinel")?(z={duration:.45,type:"spring",stiffness:300,damping:15},e[18]=z):z=e[18];const y=r?2.5:2,c=r&&h.activeFill;let _;e[19]!==c?(_=X("transition-colors duration-200",c),e[19]=c,e[20]=_):_=e[20];let S;e[21]!==i||e[22]!==p||e[23]!==y||e[24]!==_?(S=(0,t.jsx)(i,{size:p,strokeWidth:y,className:_}),e[21]=i,e[22]=p,e[23]=y,e[24]=_,e[25]=S):S=e[25];let I;e[26]!==S||e[27]!==w?(I=(0,t.jsx)(V.div,{animate:w,transition:z,children:S}),e[26]=S,e[27]=w,e[28]=I):I=e[28];let C;e[29]!==I||e[30]!==v?(C=(0,t.jsx)("div",{className:v,children:I}),e[29]=I,e[30]=v,e[31]=C):C=e[31];let j;e[32]!==a?(j=a&&(0,t.jsx)("span",{className:"hidden xs:inline",children:a}),e[32]=a,e[33]=j):j=e[33];let F;e[34]!==r||e[35]!==n?(F=n!=null&&(0,t.jsx)(V.span,{initial:{opacity:0,y:5},animate:{opacity:1,y:0},exit:{opacity:0,y:-5},className:X("transition-all",r?"font-black":"font-bold"),children:n||0},n),e[34]=r,e[35]=n,e[36]=F):F=e[36];let T;e[37]!==F?(T=(0,t.jsx)(ye,{mode:"wait",children:F}),e[37]=F,e[38]=T):T=e[38];let M;return e[39]!==m||e[40]!==C||e[41]!==j||e[42]!==T||e[43]!==u||e[44]!==b||e[45]!==g||e[46]!==N?(M=(0,t.jsxs)(m,{whileTap:u,onClick:b,"aria-label":g,className:N,children:[C,j,T]}),e[39]=m,e[40]=C,e[41]=j,e[42]=T,e[43]=u,e[44]=b,e[45]=g,e[46]=N,e[47]=M):M=e[47],M},J=Ys,Ks=q(),Zs=s=>{const e=(0,Ks.c)(18),{poll:i,onVote:n}=s,a=i.options.reduce(ei,0),[l,r]=(0,$.useState)(null);let d;e[0]!==n||e[1]!==l?(d=v=>{l||(r(v),n&&n(v))},e[0]=n,e[1]=l,e[2]=d):d=e[2];const o=d;let x;if(e[3]!==o||e[4]!==i.options||e[5]!==a||e[6]!==l){let v;e[8]!==o||e[9]!==a||e[10]!==l?(v=(u,b)=>{const g=a>0?Math.round((u.votes+(l===u.id?1:0))/(a+(l?1:0))*100):0,N=l===u.id;return(0,t.jsxs)("div",{onClick:()=>o(u.id),className:`relative h-10 w-full overflow-hidden rounded-xl border cursor-pointer ${N?"border-violet-500 dark:border-violet-500":"border-zinc-200 dark:border-zinc-700"}`,children:[l&&(0,t.jsx)("div",{className:"absolute left-0 top-0 h-full bg-zinc-200 transition-all duration-500 dark:bg-zinc-800",style:{width:`${g}%`}}),(0,t.jsxs)("div",{className:"absolute inset-0 z-10 flex items-center justify-between px-4",children:[(0,t.jsxs)("span",{className:`text-sm font-medium ${N?"font-bold text-violet-600":"text-zinc-700 dark:text-zinc-200"}`,children:[u.text," ",N&&(0,t.jsx)(Xt,{size:14,className:"mb-0.5 inline ml-1"})]}),l&&(0,t.jsxs)("span",{className:"text-sm font-bold text-zinc-900 dark:text-white",children:[g,"%"]})]})]},u.id||b)},e[8]=o,e[9]=a,e[10]=l,e[11]=v):v=e[11],x=i.options.map(v),e[3]=o,e[4]=i.options,e[5]=a,e[6]=l,e[7]=x}else x=e[7];const p=a+(l?1:0),f=l?"6 days left":"Click to vote";let m;e[12]!==p||e[13]!==f?(m=(0,t.jsxs)("div",{className:"pl-1 text-xs text-zinc-500 dark:text-zinc-400",children:[p," votes •"," ",f]}),e[12]=p,e[13]=f,e[14]=m):m=e[14];let h;return e[15]!==x||e[16]!==m?(h=(0,t.jsxs)("div",{className:"mt-3 space-y-2",children:[x,m]}),e[15]=x,e[16]=m,e[17]=h):h=e[17],h},ht=Zs;function ei(s,e){return s+e.votes}var ti=q(),si=s=>{const e=(0,ti.c)(30),{user:i,time:n,content:a}=s,l=ce();let r;e[0]!==i.avatar||e[1]!==i.handle?(r=(0,t.jsx)(se,{src:i.avatar,alt:i.handle}),e[0]=i.avatar,e[1]=i.handle,e[2]=r):r=e[2];let d;e[3]!==i.handle[0]?(d=i.handle[0]?.toUpperCase(),e[3]=i.handle[0],e[4]=d):d=e[4];let o;e[5]!==d?(o=(0,t.jsx)(te,{children:d}),e[5]=d,e[6]=o):o=e[6];let x;e[7]!==r||e[8]!==o?(x=(0,t.jsxs)(ie,{className:"size-6",children:[r,o]}),e[7]=r,e[8]=o,e[9]=x):x=e[9];let p;e[10]!==i.handle?(p=(0,t.jsx)("span",{className:"text-sm font-semibold",children:i.handle}),e[10]=i.handle,e[11]=p):p=e[11];let f;e[12]!==x||e[13]!==p?(f=(0,t.jsxs)("div",{className:"flex items-center gap-x-2",children:[x,p]}),e[12]=x,e[13]=p,e[14]=f):f=e[14];let m;e[15]!==n?(m=(0,t.jsx)("span",{className:"text-xs text-zinc-500 sm:text-sm",children:n}),e[15]=n,e[16]=m):m=e[16];let h;e[17]!==f||e[18]!==m?(h=(0,t.jsxs)("div",{className:"mb-2 flex items-center justify-between gap-x-2",children:[f,m]}),e[17]=f,e[18]=m,e[19]=h):h=e[19];let v;e[20]!==l?(v={...Fe,render:N=>{const{attributes:w,content:z}=N,{href:y,...c}=w,_=window.location.origin;let S=null;return y.startsWith("/")?S=y:y.startsWith(_)&&(S=y.replace(_,"")),S?(0,t.jsx)("span",{...c,className:X("cursor-pointer font-medium text-violet-600 hover:underline dark:text-violet-400",c.className),onClick:I=>{I.stopPropagation(),l(S)},children:z},z):(0,t.jsx)("a",{href:y,...c,target:"_blank",rel:"noopener noreferrer",className:X("text-violet-600 hover:underline dark:text-violet-400",c.className),onClick:ii,children:z},z)}},e[20]=l,e[21]=v):v=e[21];let u;e[22]!==a?(u=(0,t.jsx)("p",{className:"whitespace-pre-line text-sm text-zinc-800 dark:text-zinc-300",children:a}),e[22]=a,e[23]=u):u=e[23];let b;e[24]!==u||e[25]!==v?(b=(0,t.jsx)(Pe,{options:v,children:u}),e[24]=u,e[25]=v,e[26]=b):b=e[26];let g;return e[27]!==b||e[28]!==h?(g=(0,t.jsxs)("div",{className:"p-4",children:[h,b]}),e[27]=b,e[28]=h,e[29]=g):g=e[29],g},ft=si;function ii(s){return s.stopPropagation()}var ai=q(),li=s=>{const e=(0,ai.c)(54),{currentUser:i,newComment:n,setNewComment:a,handleSubmitComment:l,loading:r,selectedFiles:d,setSelectedFiles:o,isUploading:x}=s;let p;e[0]!==d?(p=d===void 0?[]:d,e[0]=d,e[1]=p):p=e[1];const f=p,m=(0,$.useRef)(null);let h;e[2]!==o?(h=k=>{if(k.target.files){const P=Array.from(k.target.files);o&&o(D=>[...D,...P])}},e[2]=o,e[3]=h):h=e[3];const v=h;let u;e[4]!==o?(u=k=>{o&&o(P=>P.filter((D,B)=>B!==k))},e[4]=o,e[5]=u):u=e[5];const b=u;let g;e[6]!==o?(g=k=>{const P=k.clipboardData.files;if(P&&P.length>0){const D=Array.from(P).filter(ni);D.length>0&&(k.preventDefault(),o&&o(B=>[...B,...D]))}},e[6]=o,e[7]=g):g=e[7];const N=g;if(!i){let k;return e[8]===Symbol.for("react.memo_cache_sentinel")?(k=(0,t.jsx)("div",{className:"border-y border-zinc-100 bg-zinc-50/30 p-6 text-center dark:border-zinc-800 dark:bg-zinc-900/10",children:(0,t.jsx)("p",{className:"text-sm text-zinc-500",children:"Please login to join the conversation."})}),e[8]=k):k=e[8],k}let w;e[9]!==i.avatar||e[10]!==i.handle?(w=(0,t.jsx)(se,{src:i.avatar,alt:i.handle,className:"object-cover"}),e[9]=i.avatar,e[10]=i.handle,e[11]=w):w=e[11];let z;e[12]!==i.handle?.[0]?(z=i.handle?.[0]?.toUpperCase(),e[12]=i.handle?.[0],e[13]=z):z=e[13];let y;e[14]!==z?(y=(0,t.jsx)(te,{children:z}),e[14]=z,e[15]=y):y=e[15];let c;e[16]!==w||e[17]!==y?(c=(0,t.jsxs)(ie,{className:"size-9 border border-zinc-200 dark:border-zinc-700",children:[w,y]}),e[16]=w,e[17]=y,e[18]=c):c=e[18];let _;e[19]!==a?(_=k=>a(k.target.value),e[19]=a,e[20]=_):_=e[20];let S;e[21]!==N||e[22]!==n||e[23]!==_?(S=(0,t.jsx)("textarea",{id:"comment-input",className:"min-h-[60px] w-full resize-none bg-transparent text-base outline-none placeholder:text-zinc-500 dark:text-white",placeholder:"Post your reply...",value:n,onChange:_,onPaste:N}),e[21]=N,e[22]=n,e[23]=_,e[24]=S):S=e[24];let I;e[25]!==b||e[26]!==f?(I=f.length>0&&(0,t.jsx)("div",{className:"mt-2 mb-2 flex flex-wrap gap-2",children:f.map((k,P)=>(0,t.jsxs)("div",{className:"relative size-20 overflow-hidden rounded-xl border border-zinc-200 dark:border-zinc-800",children:[k.type.startsWith("image/")?(0,t.jsx)("img",{src:URL.createObjectURL(k),className:"size-full object-cover",alt:""}):(0,t.jsx)("div",{className:"flex size-full items-center justify-center bg-zinc-100 dark:bg-zinc-800",children:(0,t.jsx)(ts,{size:20,className:"text-zinc-500"})}),(0,t.jsx)("button",{onClick:()=>b(P),className:"absolute right-1 top-1 rounded-full bg-black/60 p-1 text-white transition-colors hover:bg-black",children:(0,t.jsx)(oe,{size:12})})]},P))}),e[25]=b,e[26]=f,e[27]=I):I=e[27];let C;e[28]===Symbol.for("react.memo_cache_sentinel")?(C=()=>m.current?.click(),e[28]=C):C=e[28];let j;e[29]===Symbol.for("react.memo_cache_sentinel")?(j=(0,t.jsx)("button",{type:"button",onClick:C,className:"rounded-full p-2 text-violet-600 transition-colors hover:bg-violet-50 dark:hover:bg-zinc-800",title:"Attach media",children:(0,t.jsx)(xs,{size:20})}),e[29]=j):j=e[29];let F;e[30]!==v?(F=(0,t.jsxs)("div",{className:"flex gap-1 text-violet-600",children:[j,(0,t.jsx)("input",{type:"file",ref:m,onChange:v,multiple:!0,className:"hidden",accept:"image/*,video/*,application/pdf"})]}),e[30]=v,e[31]=F):F=e[31];const T=r||x?"primary":"animated";let M;e[32]!==x||e[33]!==r?(M=!(r||x)&&(0,t.jsx)(ve,{size:20}),e[32]=x,e[33]=r,e[34]=M):M=e[34];const E=r||x;let O;e[35]!==n||e[36]!==f.length?(O=!n.trim()&&f.length===0,e[35]=n,e[36]=f.length,e[37]=O):O=e[37];let A;e[38]!==l||e[39]!==T||e[40]!==M||e[41]!==E||e[42]!==O?(A=(0,t.jsx)(ps,{variant:T,icon:M,className:"min-w-[70px] !w-auto",onClick:l,loading:E,disabled:O,children:"Reply"}),e[38]=l,e[39]=T,e[40]=M,e[41]=E,e[42]=O,e[43]=A):A=e[43];let L;e[44]!==F||e[45]!==A?(L=(0,t.jsxs)("div",{className:"mt-2 flex items-center justify-between border-t border-zinc-100 pt-3 dark:border-zinc-800",children:[F,A]}),e[44]=F,e[45]=A,e[46]=L):L=e[46];let U;e[47]!==S||e[48]!==I||e[49]!==L?(U=(0,t.jsxs)("div",{className:"flex-1",children:[S,I,L]}),e[47]=S,e[48]=I,e[49]=L,e[50]=U):U=e[50];let W;return e[51]!==U||e[52]!==c?(W=(0,t.jsx)("div",{className:"border-y border-zinc-100 bg-zinc-50/30 p-4 dark:border-zinc-800 dark:bg-zinc-900/10",children:(0,t.jsxs)("div",{className:"flex gap-3",children:[c,U]})}),e[51]=U,e[52]=c,e[53]=W):W=e[53],W},Ct=$.memo(li);function ni(s){return s.type.startsWith("image/")}var ri=q(),oi=s=>{const e=(0,ri.c)(30),{url:i}=s;let n,a;e[0]!==i?(n=["link-preview",i],a=()=>gs(i),e[0]=i,e[1]=n,e[2]=a):(n=e[1],a=e[2]);const l=!!i;let r;e[3]!==n||e[4]!==a||e[5]!==l?(r={queryKey:n,queryFn:a,staleTime:864e5,enabled:l},e[3]=n,e[4]=a,e[5]=l,e[6]=r):r=e[6];const{data:d,isLoading:o,isError:x}=Ut(r);if(o){let w;return e[7]===Symbol.for("react.memo_cache_sentinel")?(w=(0,t.jsx)("div",{className:"mt-3 flex h-24 animate-pulse items-center justify-center overflow-hidden rounded-2xl border border-zinc-100 bg-zinc-50 dark:border-zinc-800 dark:bg-zinc-900/50",children:(0,t.jsx)(Xe,{className:"animate-spin text-zinc-300 dark:text-zinc-700",size:24})}),e[7]=w):w=e[7],w}if(x||!d||!d.title&&!d.image)return null;let p;e[8]!==d.image||e[9]!==d.title?(p=d.image&&(0,t.jsx)("div",{className:"aspect-[1.91/1] w-full overflow-hidden border-b border-zinc-100 bg-zinc-100 dark:border-zinc-800 dark:bg-zinc-900",children:(0,t.jsx)("img",{src:d.image,alt:d.title??void 0,className:"h-full w-full object-cover transition-transform duration-500 group-hover:scale-[1.02]",onError:di})}),e[8]=d.image,e[9]=d.title,e[10]=p):p=e[10];let f;e[11]===Symbol.for("react.memo_cache_sentinel")?(f=(0,t.jsx)(Xe,{size:12}),e[11]=f):f=e[11];let m;e[12]!==d.siteName?(m=(0,t.jsxs)("div",{className:"flex items-center gap-1.5 text-xs font-bold uppercase tracking-wider text-zinc-600",children:[f,(0,t.jsx)("span",{children:d.siteName})]}),e[12]=d.siteName,e[13]=m):m=e[13];let h;e[14]!==d.title?(h=(0,t.jsx)("div",{className:"line-clamp-2 text-[15px] font-bold leading-snug transition-colors group-hover:text-violet-700 dark:text-white",children:d.title}),e[14]=d.title,e[15]=h):h=e[15];let v;e[16]!==d.description?(v=d.description&&(0,t.jsx)("p",{className:"line-clamp-2 text-xs leading-relaxed text-zinc-600 dark:text-zinc-400",children:d.description}),e[16]=d.description,e[17]=v):v=e[17];let u;e[18]===Symbol.for("react.memo_cache_sentinel")?(u=(0,t.jsx)(as,{size:10}),e[18]=u):u=e[18];let b;e[19]!==i?(b=(0,t.jsxs)("div",{className:"flex items-center gap-1 pt-1 text-[11px] font-medium text-zinc-500",children:[u,(0,t.jsx)("span",{className:"truncate",children:i})]}),e[19]=i,e[20]=b):b=e[20];let g;e[21]!==b||e[22]!==m||e[23]!==h||e[24]!==v?(g=(0,t.jsxs)("div",{className:"space-y-1 p-3.5",children:[m,h,v,b]}),e[21]=b,e[22]=m,e[23]=h,e[24]=v,e[25]=g):g=e[25];let N;return e[26]!==g||e[27]!==p||e[28]!==i?(N=(0,t.jsxs)("a",{href:i,target:"_blank",rel:"noopener noreferrer",className:"group mt-3 flex flex-col overflow-hidden rounded-2xl border border-zinc-100 bg-white shadow-sm transition-all hover:bg-zinc-50 dark:border-zinc-800 dark:bg-zinc-950 dark:hover:bg-zinc-900",onClick:ci,children:[p,g]}),e[26]=g,e[27]=p,e[28]=i,e[29]=N):N=e[29],N},ut=oi;function ci(s){return s.stopPropagation()}function di(s){return s.target.style.display="none"}var mi=q(),xi=s=>{const e=(0,mi.c)(15),{file:i}=s;let n;e[0]===Symbol.for("react.memo_cache_sentinel")?(n=(0,t.jsx)("div",{className:"flex size-10 items-center justify-center rounded-xl bg-violet-100 text-violet-600 dark:bg-violet-900/30",children:(0,t.jsx)(Bt,{size:20})}),e[0]=n):n=e[0];let a;e[1]!==i.name?(a=(0,t.jsx)("div",{className:"truncate text-sm font-bold dark:text-white",children:i.name}),e[1]=i.name,e[2]=a):a=e[2];let l;e[3]!==i.size?(l=i.size!==void 0&&(0,t.jsxs)("div",{className:"text-xs uppercase text-zinc-500",children:[(i.size/1024/1024).toFixed(2)," MB"]}),e[3]=i.size,e[4]=l):l=e[4];let r;e[5]!==a||e[6]!==l?(r=(0,t.jsxs)("div",{className:"min-w-0 flex-1",children:[a,l]}),e[5]=a,e[6]=l,e[7]=r):r=e[7];let d;e[8]===Symbol.for("react.memo_cache_sentinel")?(d=(0,t.jsx)(Ht,{size:18}),e[8]=d):d=e[8];let o;e[9]!==i.name||e[10]!==i.url?(o=(0,t.jsx)("a",{href:i.url,download:i.name,className:"p-2 text-zinc-400 transition-colors hover:text-violet-600",onClick:fi,children:d}),e[9]=i.name,e[10]=i.url,e[11]=o):o=e[11];let x;return e[12]!==r||e[13]!==o?(x=(0,t.jsxs)("div",{className:"group mt-3 flex items-center gap-3 rounded-2xl border border-zinc-100 bg-zinc-50/50 p-3 transition-colors hover:border-violet-500/30 dark:border-zinc-800 dark:bg-zinc-900/10",children:[n,r,o]}),e[12]=r,e[13]=o,e[14]=x):x=e[14],x},hi=xi;function fi(s){return s.stopPropagation()}var $t=q(),ui=$.lazy(()=>vt(()=>import("./VideoPlayer-R1VZRQLW.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12]))),pi=s=>{const e=(0,$t.c)(16),{item:i,onClick:n}=s,[a,l]=(0,$.useState)(!1);let r,d;e[0]===Symbol.for("react.memo_cache_sentinel")?(r={scale:.98},d={type:"spring",stiffness:400,damping:25},e[0]=r,e[1]=d):(r=e[0],d=e[1]);let o;e[2]!==a?(o=!a&&(0,t.jsx)("div",{className:"absolute inset-0 animate-pulse bg-zinc-200 dark:bg-zinc-800"}),e[2]=a,e[3]=o):o=e[3];const x=i.url||i.src;let p;e[4]===Symbol.for("react.memo_cache_sentinel")?(p={opacity:0,scale:1.05,filter:"blur(10px)"},e[4]=p):p=e[4];let f;e[5]!==a?(f=a?{opacity:1,scale:1,filter:"blur(0px)"}:{},e[5]=a,e[6]=f):f=e[6];let m;e[7]===Symbol.for("react.memo_cache_sentinel")?(m={duration:.4,ease:"easeOut"},e[7]=m):m=e[7];let h;e[8]===Symbol.for("react.memo_cache_sentinel")?(h=()=>l(!0),e[8]=h):h=e[8];let v;e[9]!==x||e[10]!==f?(v=(0,t.jsx)(V.img,{src:x,initial:p,animate:f,transition:m,className:"size-full object-cover",alt:"",loading:"lazy",onLoad:h}),e[9]=x,e[10]=f,e[11]=v):v=e[11];let u;return e[12]!==n||e[13]!==o||e[14]!==v?(u=(0,t.jsxs)(V.div,{whileTap:r,transition:d,className:"relative size-full overflow-hidden",onClick:n,children:[o,v]}),e[12]=n,e[13]=o,e[14]=v,e[15]=u):u=e[15],u},gi=s=>{const e=(0,$t.c)(3),{items:i}=s,n=i===void 0?[]:i,{openLightbox:a}=os();if(!n||Array.isArray(n)&&n.length===0)return null;const l=Array.isArray(n)?n:[n],r=l.filter(bi),d=l.filter(ji),o=r.some(ki),x=v=>{const u=r.filter(zi).map(yi),b=r[v];a(u,u.indexOf(b.url||b.src))},p="mt-2 space-y-2",f=r.length>0&&(0,t.jsx)("div",{className:`grid gap-2 overflow-hidden rounded-2xl border border-zinc-100 dark:border-zinc-800 ${r.length===1?"grid-cols-1":r.length===2?o?"aspect-[8/9] grid-cols-1 grid-rows-2":"aspect-[16/9] grid-cols-2":(r.length===3,"aspect-[16/9] grid-cols-2 grid-rows-2")}`,children:r.map((v,u)=>(0,t.jsx)("div",{className:`relative cursor-pointer overflow-hidden bg-zinc-100 dark:bg-zinc-900 ${r.length===3&&u===0?"row-span-2":""}`,children:v.type==="video"?(0,t.jsx)($.Suspense,{fallback:(0,t.jsx)("div",{className:"flex aspect-video w-full items-center justify-center bg-zinc-100 dark:bg-zinc-900",children:(0,t.jsx)("div",{className:"size-8 animate-spin rounded-full border-2 border-violet-500 border-t-transparent"})}),children:(0,t.jsx)(ui,{src:v.url,poster:v.poster||void 0})}):(0,t.jsx)(pi,{item:v,onClick:b=>{b.stopPropagation(),x(u)}})},u))}),m=d.map(Ni);let h;return e[0]!==f||e[1]!==m?(h=(0,t.jsxs)("div",{className:p,children:[f,m]}),e[0]=f,e[1]=m,e[2]=h):h=e[2],h},vi=gi;function bi(s){return s.type==="image"||s.type==="video"}function ji(s){return s.type==="file"}function ki(s){return s.type==="video"}function zi(s){return s.type==="image"}function yi(s){return s.url||s.src}function Ni(s,e){return(0,t.jsx)(hi,{file:s},e)}var _t=q(),wi=s=>{const e=(0,_t.c)(6),{avatars:i}=s;if(!i||i.length===0)return null;let n,a;if(e[0]!==i){const r=i.slice(0,3);n="relative mt-2 h-7 w-7",a=r.map((d,o)=>{let x,p;return r.length===1?(x="top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2",p="size-5"):r.length===2?(p="size-4",x=o===0?"top-0 right-0":"bottom-0 left-0"):(p=o===0?"size-3.5":"size-3",o===0?x="top-0 right-0":o===1?x="bottom-0 right-0":x="top-1/2 left-0 -translate-y-1/2"),(0,t.jsx)("div",{className:`absolute rounded-full border border-white bg-zinc-100 dark:border-black dark:bg-zinc-800 overflow-hidden shadow-sm ${x} ${p}`,style:{zIndex:10-o},children:(0,t.jsx)("img",{src:d,alt:"",className:"h-full w-full object-cover"})},o)}),e[0]=i,e[1]=n,e[2]=a}else n=e[1],a=e[2];let l;return e[3]!==n||e[4]!==a?(l=(0,t.jsx)("div",{className:n,children:a}),e[3]=n,e[4]=a,e[5]=l):l=e[5],l},pt=s=>{const e=(0,_t.c)(70),{id:i,user:n,isCurrentUser:a,isComment:l,onEdit:r,onDelete:d,addToast:o,trigger:x}=s,{openReport:p}=kt(),[f,m]=(0,$.useState)(!1);if(fs("(min-width: 1024px)")){let C;e[0]!==x?(C=(0,t.jsx)(Fs,{asChild:!0,onClick:Si,children:(0,t.jsx)("div",{className:"cursor-pointer outline-none",children:x})}),e[0]=x,e[1]=C):C=e[1];let j;e[2]!==o||e[3]!==i||e[4]!==l?(j=!l&&(0,t.jsxs)(ne,{onClick:k=>{k.stopPropagation(),navigator.clipboard.writeText(`${window.location.origin}/p/${i}`),o("Link copied"),m(!1)},children:[(0,t.jsx)(Be,{className:"mr-2 h-4 w-4"}),(0,t.jsx)("span",{children:"Copy link"})]}),e[2]=o,e[3]=i,e[4]=l,e[5]=j):j=e[5];let F;e[6]!==i||e[7]!==p?(F=k=>{k.stopPropagation(),p("post",i),m(!1)},e[6]=i,e[7]=p,e[8]=F):F=e[8];let T;e[9]===Symbol.for("react.memo_cache_sentinel")?(T=(0,t.jsx)(we,{className:"mr-2 h-4 w-4"}),e[9]=T):T=e[9];const M=l?"comment":"post";let E;e[10]!==M?(E=(0,t.jsxs)("span",{children:["Report ",M]}),e[10]=M,e[11]=E):E=e[11];let O;e[12]!==F||e[13]!==E?(O=(0,t.jsxs)(ne,{onClick:F,children:[T,E]}),e[12]=F,e[13]=E,e[14]=O):O=e[14];let A;e[15]!==a||e[16]!==p||e[17]!==n?(A=!a&&(0,t.jsxs)(ne,{onClick:k=>{k.stopPropagation(),p("user",n.id),m(!1)},children:[(0,t.jsx)(qe,{className:"mr-2 h-4 w-4"}),(0,t.jsxs)("span",{children:["Report @",n.handle]})]}),e[15]=a,e[16]=p,e[17]=n,e[18]=A):A=e[18];let L;e[19]!==l||e[20]!==a||e[21]!==d||e[22]!==r?(L=a&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(Ps,{}),(0,t.jsxs)(ne,{onClick:k=>{k.stopPropagation(),r(),m(!1)},children:[(0,t.jsx)(Qe,{className:"mr-2 h-4 w-4"}),(0,t.jsxs)("span",{children:["Edit ",l?"Comment":"Post"]})]}),(0,t.jsxs)(ne,{className:"text-red-500 focus:text-red-500",onClick:k=>{k.stopPropagation(),d(),m(!1)},children:[(0,t.jsx)(Ge,{className:"mr-2 h-4 w-4"}),(0,t.jsxs)("span",{children:["Delete ",l?"comment":"post"]})]})]}),e[19]=l,e[20]=a,e[21]=d,e[22]=r,e[23]=L):L=e[23];let U;e[24]!==j||e[25]!==O||e[26]!==A||e[27]!==L?(U=(0,t.jsxs)(ys,{align:"end",className:"w-56",onClick:Pi,children:[j,O,A,L]}),e[24]=j,e[25]=O,e[26]=A,e[27]=L,e[28]=U):U=e[28];let W;return e[29]!==f||e[30]!==C||e[31]!==U?(W=(0,t.jsx)("div",{onClick:_i,children:(0,t.jsxs)(Cs,{open:f,onOpenChange:m,modal:!0,children:[C,U]})}),e[29]=f,e[30]=C,e[31]=U,e[32]=W):W=e[32],W}let h;e[33]===Symbol.for("react.memo_cache_sentinel")?(h=C=>{C.stopPropagation(),m(!0)},e[33]=h):h=e[33];let v;e[34]!==x?(v=(0,t.jsx)("div",{onClick:h,className:"cursor-pointer",children:x}),e[34]=x,e[35]=v):v=e[35];let u;e[36]===Symbol.for("react.memo_cache_sentinel")?(u=()=>m(!1),e[36]=u):u=e[36];let b;e[37]!==o||e[38]!==i||e[39]!==l?(b=!l&&(0,t.jsx)(re,{icon:(0,t.jsx)(Be,{size:18}),onClick:C=>{C.stopPropagation(),navigator.clipboard.writeText(`${window.location.origin}/p/${i}`),o("Link copied"),m(!1)},children:"Copy link"}),e[37]=o,e[38]=i,e[39]=l,e[40]=b):b=e[40];let g;e[41]===Symbol.for("react.memo_cache_sentinel")?(g=(0,t.jsx)(we,{size:18}),e[41]=g):g=e[41];let N;e[42]!==i||e[43]!==p?(N=C=>{C.stopPropagation(),p("post",i),m(!1)},e[42]=i,e[43]=p,e[44]=N):N=e[44];const w=l?"comment":"post";let z;e[45]!==N||e[46]!==w?(z=(0,t.jsxs)(re,{icon:g,onClick:N,children:["Report ",w]}),e[45]=N,e[46]=w,e[47]=z):z=e[47];let y;e[48]!==a||e[49]!==p||e[50]!==n?(y=!a&&(0,t.jsxs)(re,{icon:(0,t.jsx)(qe,{size:18}),onClick:C=>{C.stopPropagation(),p("user",n.id),m(!1)},children:["Report @",n.handle]}),e[48]=a,e[49]=p,e[50]=n,e[51]=y):y=e[51];let c;e[52]!==l||e[53]!==a||e[54]!==r?(c=a&&(0,t.jsxs)(re,{icon:(0,t.jsx)(Qe,{size:18}),onClick:C=>{C.stopPropagation(),r(),m(!1)},children:["Edit ",l?"Comment":"Post"]}),e[52]=l,e[53]=a,e[54]=r,e[55]=c):c=e[55];let _;e[56]!==l||e[57]!==a||e[58]!==d?(_=a&&(0,t.jsxs)(re,{variant:"destructive",icon:(0,t.jsx)(Ge,{size:18}),onClick:C=>{C.stopPropagation(),d(),m(!1)},children:["Delete ",l?"comment":"post"]}),e[56]=l,e[57]=a,e[58]=d,e[59]=_):_=e[59];let S;e[60]!==f||e[61]!==c||e[62]!==_||e[63]!==b||e[64]!==z||e[65]!==y?(S=(0,t.jsx)("div",{onClick:Fi,children:(0,t.jsxs)(Rs,{isOpen:f,onClose:u,children:[b,z,y,c,_]})}),e[60]=f,e[61]=c,e[62]=_,e[63]=b,e[64]=z,e[65]=y,e[66]=S):S=e[66];let I;return e[67]!==S||e[68]!==v?(I=(0,t.jsxs)(t.Fragment,{children:[v,S]}),e[67]=S,e[68]=v,e[69]=I):I=e[69],I},_e=({id:s,user:e,timeAgo:i,content:n,contentClass:a,media:l,quotedPost:r,stats:d,onClick:o,repostedBy:x,onUserClick:p,currentUser:f,poll:m,isDetail:h,initialComments:v,onDelete:u,onUpdate:b,isComment:g,onReply:N,community:w,parent_id:z,post_id:y,commenterAvatars:c=[]})=>{const _=ce(),{addToast:S}=Se(),{liked:I,reposted:C,localStats:j,setLocalStats:F,handleLike:T,handleRepost:M}=ks(y||s,d,f),{deletePost:E,updatePost:O}=ds(),{comments:A,fetchNextPage:L,hasNextPage:U,isFetchingNextPage:W,addComment:k,deleteComment:P,updateComment:D,isSubmitting:B}=nt(y||s,v),[Q,Y]=(0,$.useState)(""),[be,Te]=(0,$.useState)([]),[Pt,Re]=(0,$.useState)(!1),[Ie,ae]=(0,$.useState)(!1),[de,Z]=(0,$.useState)(!1),[K,me]=(0,$.useState)(n),[xe,he]=(0,$.useState)(l||[]),[fe,le]=(0,$.useState)([]),[Me,Ee]=(0,$.useState)(!1),[Ft,je]=(0,$.useState)(!1),[ke,ue]=(0,$.useState)(null),[ze,Ae]=(0,$.useState)(!1),{comments:Tt,refetch:De}=nt(y||s,void 0,ze?s:void 0),{ref:Le,inView:Oe}=Lt({threshold:.5,triggerOnce:!0});(0,$.useEffect)(()=>{if(Oe&&!g){const R=setTimeout(()=>{_s(s).catch(console.error)},1500);return()=>clearTimeout(R)}},[Oe,s,g]);const Rt=(0,$.useCallback)(async()=>{!s||!y&&!s||j.comments===0||(Ae(!0),De())},[s,y,j.comments,De]),Ue=async()=>{const R=JSON.stringify(xe)!==JSON.stringify(l||[])||fe.length>0;if(!K.trim()||K===n&&!R){Z(!1);return}Ee(!0);try{const H=[];for(const ee of fe){const Et=await $e(ee);H.push(Et)}const G=[...xe,...H];g?await D({commentId:s,content:K,media:G}):await O(s,{content:K,media:G}),le([]),Z(!1),S(`${g?"Comment":"Post"} updated`),b&&b(s,K,G)}catch(H){console.error(`Failed to update ${g?"comment":"post"}:`,H),S(`Failed to update ${g?"comment":"post"}`)}finally{Ee(!1)}},We=async R=>{R&&R.stopPropagation();try{g?await P(s):await E(s),S(`${g?"Comment":"Post"} deleted successfully`),u&&u(s)}catch(H){console.error(`Failed to delete ${g?"comment":"post"}:`,H),S(`Failed to delete ${g?"comment":"post"}`)}finally{ae(!1)}},It=async R=>{if(R.preventDefault(),!(!Q.trim()&&be.length===0||!f)){Re(!0);try{const H=[];for(const G of be){const ee=await $e(G);H.push(ee)}await k({userId:f.id,content:Q,media:H,replyToId:ke?.id}),Y(""),Te([]),ue(null),F(G=>({...G,comments:(G.comments||0)+1})),S("Reply posted!")}catch(H){console.error("Failed to post comment:",H),S("Failed to post reply.")}finally{Re(!1)}}},He=f?.handle===e.handle,Mt=(R,H)=>{ue(H?{handle:R,id:g?z||s:H}:null),Y(G=>{const ee=`@${R} `;return G.includes(ee)?G:ee+G}),document.getElementById("comment-input")?.focus()};return h?(0,t.jsxs)(V.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:"flex flex-col",ref:Le,children:[(0,t.jsxs)("article",{className:"p-5 dark:bg-black",children:[(0,t.jsx)(dt,{user:e,timeAgo:i,community:w,onUserClick:p,isDetail:!0,showAvatar:!0,actionsMenu:(0,t.jsx)(pt,{id:s,user:e,isCurrentUser:He,isComment:g,onEdit:()=>Z(!0),onDelete:()=>ae(!0),addToast:S,trigger:(0,t.jsx)("button",{"aria-label":"More options",className:"rounded-full p-2 text-zinc-500 transition-colors hover:bg-zinc-100 dark:hover:bg-zinc-800",children:(0,t.jsx)(Ne,{size:20})})})}),(0,t.jsx)(mt,{content:n,isDetail:!0,isEditing:de,editedContent:K,setEditedContent:me,onCancelEdit:()=>{Z(!1),me(n),he(l||[]),le([])},onSaveEdit:Ue,isUpdating:Me,contentClass:a}),pe(n)&&(0,t.jsx)(ut,{url:pe(n)}),(0,t.jsx)(xt,{media:l,isEditing:de,editedMedia:xe,setEditedMedia:he,newFiles:fe,setNewFiles:le}),m&&(0,t.jsx)(ht,{poll:m,onVote:R=>Ss(s,R,f.id)}),r&&(0,t.jsx)("div",{className:"mt-4 overflow-hidden rounded-2xl border border-zinc-200 shadow-sm dark:border-zinc-700",children:(0,t.jsx)(ft,{...r})}),(0,t.jsx)(ct,{views:j.views||0,likes:j.likes||0,comments:j.comments||0,isDetail:!0}),(0,t.jsx)(ot,{liked:I,reposted:C,handleLike:T,handleRepost:M,handleCommentClick:()=>document.getElementById("comment-input")?.focus(),handleShareClick:()=>je(!0),isDetail:!0,isComment:g})]}),ke&&(0,t.jsxs)("div",{className:"flex items-center justify-between bg-zinc-50 px-5 py-2 dark:bg-zinc-900/50",children:[(0,t.jsxs)("span",{className:"text-sm text-zinc-500",children:["Replying to"," ",(0,t.jsxs)("span",{className:"font-bold text-violet-600",children:["@",ke.handle]})]}),(0,t.jsx)("button",{onClick:()=>ue(null),className:"text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-200",children:(0,t.jsx)(oe,{size:16})})]}),(0,t.jsx)(Ct,{currentUser:f,newComment:Q,setNewComment:Y,handleSubmitComment:It,loading:B,selectedFiles:be,setSelectedFiles:Te,isUploading:Pt}),(0,t.jsxs)("div",{className:"divide-y divide-zinc-100 dark:divide-zinc-800",children:[(0,t.jsx)("div",{className:"divide-y divide-zinc-100 dark:divide-zinc-800",children:(0,t.jsxs)(t.Fragment,{children:[U&&A.length>0&&(0,t.jsxs)("button",{onClick:()=>L(),disabled:W,className:"flex w-full items-center justify-center gap-2 py-3 text-sm font-bold text-violet-600 transition-colors hover:bg-zinc-50 dark:hover:bg-zinc-900",children:[W&&(0,t.jsx)("span",{className:"animate-spin",children:"⌛"}),"View more replies"]}),A.map(R=>(0,t.jsx)(_e,{...R,isComment:!0,post_id:s,onReply:Mt,onUserClick:p,currentUser:f,stats:{likes:R.stats?.likes||0,comments:R.stats?.comments||0,reposts:R.stats?.reposts||0},timeAgo:R.timeAgo||R.created_at},R.id))]})}),(0,t.jsx)(at,{open:Ie,onOpenChange:ae,children:(0,t.jsxs)(tt,{onClick:R=>R.stopPropagation(),children:[(0,t.jsxs)(Ke,{children:[(0,t.jsx)(it,{children:"Are you absolutely sure?"}),(0,t.jsx)(Je,{children:"This action cannot be undone. This will permanently delete your post and all its comments."})]}),(0,t.jsxs)(Ye,{children:[(0,t.jsx)(et,{onClick:R=>R.stopPropagation(),children:"Cancel"}),(0,t.jsx)(Ze,{onClick:We,className:"bg-rose-500 hover:bg-rose-600",children:"Delete"})]})]})})]})]}):(0,t.jsxs)(V.article,{initial:{opacity:0,y:10},whileInView:{opacity:1,y:0},viewport:{once:!0,margin:"-50px"},transition:{duration:.4,ease:"easeOut"},ref:Le,onClick:o,className:`px-4 transition-all ${g?"py-2 bg-transparent hover:bg-zinc-50/30 dark:hover:bg-zinc-800/20":"py-4 bg-white hover:bg-zinc-50/30 dark:bg-black dark:hover:bg-white/[0.02]"} ${o?"cursor-pointer":""}`,children:[x&&(0,t.jsxs)("div",{className:"mb-2 ml-1 flex items-center space-x-1.5 text-[13px] font-semibold text-zinc-600",children:[(0,t.jsx)(Ce,{size:14,className:"text-zinc-500"}),(0,t.jsxs)("span",{className:"flex cursor-pointer items-center text-zinc-700 hover:underline dark:text-zinc-300",onClick:R=>{R.stopPropagation(),p&&p(x.handle)},children:[x.handle," Reposted"]})]}),(0,t.jsxs)("div",{className:"flex items-start gap-x-3",children:[(0,t.jsxs)("div",{className:"flex shrink-0 flex-col items-center self-stretch pt-0.5",children:[(0,t.jsx)("div",{className:"cursor-pointer",onClick:R=>{R.stopPropagation(),p&&p(e.handle)},children:(0,t.jsxs)(ie,{className:`${g?"size-8":"size-10"} border-0 shadow-sm`,children:[(0,t.jsx)(se,{src:e.avatar,alt:e.handle,className:"object-cover"}),(0,t.jsx)(te,{className:"text-xs",children:e.handle[0]?.toUpperCase()})]})}),(!g&&j.comments>0||g&&!z&&j.comments>0)&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"mt-2 w-0.5 flex-1 rounded-full bg-zinc-100 dark:bg-zinc-800"}),!g&&(0,t.jsx)(wi,{avatars:c.length>0?c:(A||[]).slice(0,3).map(R=>R.user.avatar)})]})]}),(0,t.jsxs)("div",{className:"flex min-w-0 flex-1 flex-col",children:[(0,t.jsx)(dt,{user:e,timeAgo:i,community:w,onUserClick:p,isComment:g,actionsMenu:(0,t.jsx)(pt,{id:s,user:e,isCurrentUser:He,isComment:g,onEdit:()=>Z(!0),onDelete:()=>ae(!0),addToast:S,trigger:(0,t.jsx)("button",{"aria-label":"More options",className:"rounded-full p-2 text-zinc-500 transition-colors hover:bg-zinc-100 group-hover:bg-zinc-100 dark:hover:bg-zinc-800 dark:group-hover:bg-zinc-800/50",children:(0,t.jsx)(Ne,{size:18})})})}),(0,t.jsx)(mt,{content:n,isEditing:de,editedContent:K,setEditedContent:me,onCancelEdit:()=>{Z(!1),me(n),he(l||[]),le([])},onSaveEdit:Ue,isUpdating:Me,contentClass:a}),pe(n)&&(0,t.jsx)(ut,{url:pe(n)}),(0,t.jsx)(xt,{media:l,isEditing:de,editedMedia:xe,setEditedMedia:he,newFiles:fe,setNewFiles:le}),m&&(0,t.jsx)(ht,{poll:m}),r&&(0,t.jsx)("div",{className:"mt-3 overflow-hidden rounded-2xl border border-zinc-200 shadow-sm transition-all hover:bg-zinc-50 dark:border-zinc-800 dark:hover:bg-zinc-900",onClick:R=>{R.stopPropagation(),_(`/p/${r.id}`)},children:(0,t.jsx)(ft,{...r})}),(0,t.jsx)(ot,{liked:I,reposted:C,handleLike:T,handleRepost:M,handleCommentClick:R=>{if(R?.stopPropagation(),N){const H=g&&z||s;N(e.handle,H)}else o&&o()},handleShareClick:R=>{R?.stopPropagation(),je(!0)},isComment:g}),(0,t.jsx)(ct,{views:j.views||0,likes:j.likes||0,comments:j.comments||0,isComment:g,onRepliesClick:()=>{ze?Ae(!1):Rt()}}),ze&&(0,t.jsxs)("div",{className:"relative mt-2 space-y-0",children:[(0,t.jsx)("div",{className:"absolute left-[19px] top-0 bottom-4 w-0.5 bg-zinc-100 dark:bg-zinc-800"}),(0,t.jsx)("div",{className:"flex flex-col",children:Tt.map(R=>(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"absolute left-[19px] top-5 h-0.5 w-4 bg-zinc-100 dark:bg-zinc-800"}),(0,t.jsx)("div",{className:"pl-6",children:(0,t.jsx)(_e,{...R,isComment:!0,post_id:y||s,onReply:N,onUserClick:p,currentUser:f,stats:{likes:R.stats?.likes||0,comments:R.stats?.comments||0,reposts:R.stats?.reposts||0},timeAgo:R.timeAgo||R.created_at})})]},R.id))})]}),(0,t.jsx)(St,{isOpen:Ft,onClose:()=>je(!1),url:`${window.location.origin}/p/${s}`,title:"Share Post"}),(0,t.jsx)(at,{open:Ie,onOpenChange:ae,children:(0,t.jsxs)(tt,{onClick:R=>R.stopPropagation(),children:[(0,t.jsxs)(Ke,{children:[(0,t.jsx)(it,{children:"Are you absolutely sure?"}),(0,t.jsx)(Je,{children:"This action cannot be undone. This will permanently delete your post and all its comments."})]}),(0,t.jsxs)(Ye,{children:[(0,t.jsx)(et,{onClick:R=>R.stopPropagation(),children:"Cancel"}),(0,t.jsx)(Ze,{onClick:We,className:"bg-rose-500 hover:bg-rose-600",children:"Delete"})]})]})})]})]})]})};function Ci(s,e){const i=!s.media&&!e.media||s.media?.length===e.media?.length&&s.media?.every((a,l)=>a.url===e.media?.[l].url),n=s.repostedBy?.handle===e.repostedBy?.handle;return s.id===e.id&&s.content===e.content&&s.timeAgo===e.timeAgo&&s.user.id===e.user.id&&s.user.avatar===e.user.avatar&&s.stats.likes===e.stats.likes&&s.stats.comments===e.stats.comments&&s.stats.reposts===e.stats.reposts&&s.currentUser?.id===e.currentUser?.id&&!!i&&!!n}var $i=$.memo(_e,Ci);function _i(s){return s.stopPropagation()}function Si(s){return s.stopPropagation()}function Pi(s){return s.stopPropagation()}function Fi(s){return s.stopPropagation()}var Ti=({isOpen:s,onClose:e,url:i,title:n="Share"})=>{const[a,l]=(0,$.useState)(!1),[r,d]=(0,$.useState)(""),[o,x]=(0,$.useState)([]),[p,f]=(0,$.useState)(!1),[m,h]=(0,$.useState)(null),{addToast:v}=Se(),{currentUser:u}=zt(),b=(0,$.useCallback)(async()=>{if(u){f(!0);try{x((await st(u.id)).map(c=>c.user).filter(c=>c!==null).slice(0,5))}catch(c){console.error("Failed to fetch conversations:",c)}finally{f(!1)}}},[u]);(0,$.useEffect)(()=>{s&&u?b():(d(""),x([]))},[s,u,b]);const g=(0,$.useCallback)(async()=>{if(u){f(!0);try{x((await st(u.id)).map(c=>c.user).filter(c=>c!==null&&(c.name?.toLowerCase().includes(r.toLowerCase())||c.handle.toLowerCase().includes(r.toLowerCase()))))}catch(c){console.error("Search failed:",c)}finally{f(!1)}}},[r,u]);(0,$.useEffect)(()=>{const c=setTimeout(()=>{r.trim()&&s?g():!r.trim()&&s&&b()},300);return()=>clearTimeout(c)},[r,s,g,b]);const N=async c=>{c&&c.stopPropagation();try{await navigator.clipboard.writeText(i),l(!0),v("Link copied to clipboard!","success"),setTimeout(()=>l(!1),2e3)}catch(_){console.error("Failed to copy:",_),v("Failed to copy link","error")}},w=async c=>{if(u){h(c.id);try{await js(await ls(u.id,c.id),u.id,i,"text"),v(`Sent to ${c.name||c.handle}!`,"success")}catch(_){console.error("Failed to send message:",_),v("Failed to send message","error")}finally{h(null)}}},z=[{name:"X",icon:Vt,color:"bg-black text-white",href:`https://twitter.com/intent/tweet?url=${encodeURIComponent(i)}`},{name:"Facebook",icon:qt,color:"bg-[#1877F2] text-white",href:`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(i)}`},{name:"LinkedIn",icon:Wt,color:"bg-[#0A66C2] text-white",href:`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(i)}`},{name:"WhatsApp",icon:Jt,color:"bg-[#25D366] text-white",href:`https://wa.me/?text=${encodeURIComponent(i)}`},{name:"Email",icon:is,color:"bg-zinc-600 text-white",href:`mailto:?body=${encodeURIComponent(i)}`}],y=async()=>{if(navigator.share)try{await navigator.share({title:n,url:i})}catch(c){c.name!=="AbortError"&&console.error("Native share failed:",c)}else N()};return(0,t.jsx)(yt,{isOpen:s,onClose:e,title:n,className:"max-w-[420px] !p-0 overflow-hidden",children:(0,t.jsxs)("div",{className:"flex h-full flex-col bg-white dark:bg-zinc-900",children:[(0,t.jsx)("div",{className:"px-5 pb-2 pt-4",children:(0,t.jsxs)("div",{className:"group relative",children:[(0,t.jsx)(Qt,{className:"absolute left-3 top-1/2 size-4 -translate-y-1/2 text-zinc-400 transition-colors group-focus-within:text-violet-500"}),(0,t.jsx)("input",{type:"text",placeholder:"Search people...",value:r,onChange:c=>d(c.target.value),className:"w-full rounded-xl border-none bg-zinc-100 py-2.5 pl-10 pr-4 text-sm transition-all focus:ring-2 focus:ring-violet-500/20 outline-none dark:bg-zinc-800/50"})]})}),(0,t.jsx)("div",{className:"no-scrollbar flex min-h-[100px] items-center gap-4 overflow-x-auto px-5 py-4",children:p?(0,t.jsx)("div",{className:"flex flex-1 justify-center",children:(0,t.jsx)("span",{className:"animate-pulse font-bold text-zinc-400",children:"Loading..."})}):o.length>0?o.map(c=>(0,t.jsxs)("button",{onClick:()=>w(c),disabled:m!==null,className:"group flex shrink-0 flex-col items-center gap-1.5 disabled:opacity-50",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"size-14 overflow-hidden rounded-full border-2 border-white shadow-sm transition-transform group-hover:scale-105 bg-zinc-100 dark:bg-zinc-800 dark:border-zinc-900",children:(0,t.jsx)("img",{src:c.avatar||`https://i.pravatar.cc/150?u=${c.id}`,alt:c.handle,className:"size-full object-cover"})}),m===c.id&&(0,t.jsx)("div",{className:"absolute inset-0 flex items-center justify-center rounded-full bg-black/40",children:(0,t.jsx)("span",{className:"animate-pulse text-white font-bold",children:"..."})})]}),(0,t.jsx)("span",{className:"max-w-[60px] truncate text-[10px] font-medium text-zinc-500 dark:text-zinc-400",children:c.name?.split(" ")[0]||c.handle})]},c.id)):(0,t.jsx)("div",{className:"flex-1 py-2 text-center",children:(0,t.jsx)("span",{className:"text-xs text-zinc-400",children:"No people found"})})}),(0,t.jsx)("div",{className:"mx-5 h-px bg-zinc-100 dark:bg-zinc-800"}),(0,t.jsxs)("div",{className:"grid grid-cols-5 gap-2 px-5 py-6",children:[z.map(c=>(0,t.jsxs)("a",{href:c.href,target:"_blank",rel:"noopener noreferrer",className:"group flex flex-col items-center gap-2",children:[(0,t.jsx)("div",{className:`size-12 ${c.color} flex items-center justify-center rounded-2xl shadow-md transition-all group-hover:-translate-y-1 group-hover:scale-110 group-hover:shadow-lg`,children:(0,t.jsx)(c.icon,{size:20,strokeWidth:2.5})}),(0,t.jsx)("span",{className:"text-[10px] font-bold uppercase tracking-tighter text-zinc-500 dark:text-zinc-400",children:c.name})]},c.name)),(0,t.jsxs)("button",{onClick:y,className:"group flex flex-col items-center gap-2",children:[(0,t.jsx)("div",{className:"flex size-12 items-center justify-center rounded-2xl border border-zinc-200 bg-zinc-100 text-zinc-600 shadow-sm transition-all group-hover:-translate-y-1 group-hover:scale-110 dark:border-zinc-700 dark:bg-zinc-800 dark:text-zinc-300",children:(0,t.jsx)(Ne,{size:20,strokeWidth:2.5})}),(0,t.jsx)("span",{className:"text-[10px] font-bold uppercase tracking-tighter text-zinc-500 dark:text-zinc-400",children:"More"})]})]}),(0,t.jsx)("div",{className:"px-5 pb-6",children:(0,t.jsxs)("div",{className:"group relative",children:[(0,t.jsx)("input",{type:"text",readOnly:!0,value:i,className:"w-full rounded-2xl border border-zinc-200 bg-zinc-50 py-3.5 pl-4 pr-14 text-sm font-medium transition-colors focus:outline-none group-hover:border-zinc-300 dark:border-zinc-800 dark:bg-zinc-950 dark:group-hover:border-zinc-700"}),(0,t.jsx)("button",{onClick:N,className:`absolute right-1.5 top-1/2 flex -translate-y-1/2 items-center gap-2 rounded-xl h-10 px-4 text-xs font-bold shadow-sm transition-all active:scale-95 ${a?"bg-emerald-500 text-white":"bg-zinc-900 text-white hover:opacity-90 dark:bg-white dark:text-zinc-900"}`,children:a?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(Zt,{size:14,strokeWidth:3}),(0,t.jsx)("span",{children:"Copied"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(Gt,{size:14,strokeWidth:3}),(0,t.jsx)("span",{children:"Copy"})]})})]})}),(0,t.jsx)("div",{className:"px-5 pb-5",children:(0,t.jsxs)("button",{onClick:e,className:"group relative flex w-full items-center justify-center overflow-hidden rounded-2xl bg-zinc-900 py-4 font-bold text-white transition-all hover:shadow-xl hover:shadow-zinc-900/10 active:scale-[0.98] dark:bg-white dark:text-zinc-900 dark:hover:shadow-white/10",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-zinc-500 to-zinc-600 opacity-0 transition-opacity duration-300 group-hover:opacity-100"}),(0,t.jsx)("div",{className:"relative flex items-center gap-2",children:(0,t.jsx)("span",{children:"Close"})})]})})]})})},St=Ti,Ri=$.lazy(()=>vt(()=>import("./dist-CqcvTCol.js"),__vite__mapDeps([13,1,2,3,4,5,6,7])).then(s=>({default:s.Plyr}))),Ii=$.memo(({reel:s,isActive:e,isMuted:i,shouldLoad:n=!0})=>{const a=ce(),{currentUser:l}=zt(),{addToast:r}=Se(),{openReport:d}=kt(),o=(0,$.useRef)(null),[x,p]=(0,$.useState)(!1),[f,m]=(0,$.useState)(!1),[h,v]=(0,$.useState)(!1),[u,b]=(0,$.useState)(!1),[g,N]=(0,$.useState)(null),[w,z]=(0,$.useState)(!1),[y,c]=(0,$.useState)(s.stats?.likes||0),[_,S]=(0,$.useState)(!1),[I,C]=(0,$.useState)(0),j=(0,$.useRef)(null),F=(0,$.useMemo)(()=>Array.isArray(s.media)?s.media[0]?.src||s.media[0]?.url:s.media?.src||s.media?.url||s.url,[s.media,s.url]);(0,$.useEffect)(()=>{b(!1);const k=o.current?.plyr;if(k&&typeof k.on=="function"){const P=()=>b(!0);return k.on("ready",P),k.on("canplay",P),k.on("loadeddata",P),()=>{typeof k.off=="function"&&(k.off("ready",P),k.off("canplay",P),k.off("loadeddata",P))}}else{const P=setTimeout(()=>b(!0),1e3);return()=>clearTimeout(P)}},[F]),(0,$.useEffect)(()=>{let k;const P=o.current?.plyr;return P&&u&&(e?k=setTimeout(()=>{if(typeof P.play=="function"){const D=P.play();D!==void 0&&D.catch(()=>{P&&(P.muted=!0,P.play().catch(()=>{}))})}},100):typeof P.pause=="function"&&P.pause()),()=>{k&&clearTimeout(k),P&&typeof P.pause=="function"&&P.pause()}},[e,u]),(0,$.useEffect)(()=>{if(!l?.id||!e)return;(async()=>{try{const[P,D]=await Promise.all([vs(s.id,l.id),bs(l.id,s.user?.id)]);z(P),S(D)}catch(P){console.error("Failed to check interaction status:",P)}})()},[s.id,l?.id,e,s.user?.id]),(0,$.useEffect)(()=>{o.current?.plyr&&(o.current.plyr.muted=i)},[i]),(0,$.useEffect)(()=>{const k=o.current?.plyr;if(!k||!e)return;const P=()=>{const D=k.currentTime,B=k.duration;B>0&&C(D/B*100)};if(typeof k.on=="function")return k.on("timeupdate",P),()=>{typeof k.off=="function"&&k.off("timeupdate",P)}},[e]);const T=k=>{k.stopPropagation();const P=k.currentTarget.getBoundingClientRect(),D=k.clientX-P.left,B=Math.min(Math.max(0,D/P.width),1),Q=o.current?.plyr;Q&&Q.duration&&(Q.currentTime=B*Q.duration,C(B*100))};(0,$.useEffect)(()=>()=>{j.current&&clearTimeout(j.current)},[]);const M=k=>{const P=k.target;P.closest("button")||P.closest("a")||P.closest(".plyr__controls")||(j.current?(clearTimeout(j.current),j.current=null,O()):j.current=setTimeout(()=>{j.current=null,E()},250))},E=()=>{const k=o.current?.plyr;k&&(k.paused?(k.play().catch(()=>{}),N("play")):(k.pause(),N("pause")),setTimeout(()=>N(null),800))},O=async()=>{if(l&&(p(!0),setTimeout(()=>p(!1),800),!w)){z(!0),c(k=>k+1);try{await lt(s.id,l.id)}catch{z(!1),c(k=>k-1)}}},A=async k=>{if(k.stopPropagation(),!l)return;const P=!w;z(P),c(D=>P?D+1:D-1);try{await lt(s.id,l.id)}catch{z(!P),c(D=>P?D-1:D+1)}},L=async k=>{if(k.stopPropagation(),!l)return;const P=!_;S(P);try{await zs(l.id,s.user?.id)}catch{S(!P)}},U=k=>{k.stopPropagation(),v(!0)},W=(0,$.useMemo)(()=>({source:{type:"video",sources:[{src:F,type:"video/mp4"}]},options:{controls:[],loop:{active:!0},clickToPlay:!1,ratio:"9:16",autoplay:!0,muted:!0,playsinline:!0}}),[F]);return(0,t.jsxs)("div",{"data-id":s.id,className:"reel-item relative flex h-[100dvh] w-full snap-start items-center justify-center overflow-hidden bg-black cursor-pointer select-none",onClick:M,children:[(0,t.jsxs)("div",{className:"relative flex h-full w-full max-w-[450px] items-center justify-center",children:[(0,t.jsx)("div",{className:"w-full",children:n?(0,t.jsx)($.Suspense,{fallback:(0,t.jsx)("div",{className:"aspect-[9/16] w-full bg-zinc-900 animate-pulse"}),children:(0,t.jsx)(Ri,{ref:o,...W})}):(0,t.jsx)("div",{className:"aspect-[9/16] w-full bg-zinc-900",children:(0,t.jsx)("img",{src:s.media?.[0]?.preview||s.media?.[0]?.thumbnail||F,className:"h-full w-full object-cover opacity-50 blur-xl",alt:"Reel preview"})})}),!u&&(0,t.jsx)("div",{className:"absolute inset-0 z-[60] flex items-center justify-center bg-zinc-900",children:(0,t.jsx)(us,{})}),(0,t.jsx)(ye,{children:x&&(0,t.jsx)(V.div,{initial:{scale:0,opacity:0},animate:{scale:[0,1.2,1],opacity:1},exit:{scale:1.5,opacity:0},transition:{duration:.5,type:"spring",stiffness:400,damping:20},className:"pointer-events-none absolute inset-0 z-50 flex items-center justify-center",children:(0,t.jsx)(ge,{size:120,fill:"white",className:"text-white drop-shadow-[0_0_30px_rgba(255,255,255,0.4)]"})})}),(0,t.jsx)(ye,{children:g&&(0,t.jsx)(V.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},exit:{scale:1.5,opacity:0},transition:{duration:.4},className:"pointer-events-none absolute inset-0 z-50 flex items-center justify-center",children:(0,t.jsx)("div",{className:"rounded-full border border-white/20 bg-white/10 p-8 shadow-2xl backdrop-blur-md",children:g==="play"?(0,t.jsx)(Kt,{size:50,fill:"white",className:"ml-1.5 text-white"}):(0,t.jsx)(es,{size:50,fill:"white",className:"text-white"})})})}),(0,t.jsx)("div",{className:"pointer-events-none absolute inset-0 bg-gradient-to-b from-black/20 via-transparent to-black/60"}),(0,t.jsxs)("div",{className:"pointer-events-none absolute bottom-6 left-4 right-16 text-white",children:[(0,t.jsxs)("div",{className:"pointer-events-auto mb-3 flex items-center gap-2",children:[(0,t.jsxs)(Ot,{to:`/u/${s.user?.handle}`,className:"flex items-center gap-2 transition-opacity hover:opacity-80 active:scale-95",onClick:k=>k.stopPropagation(),children:[(0,t.jsxs)(ie,{className:"size-10 border-2 border-white",children:[(0,t.jsx)(se,{src:s.user?.avatar,alt:s.user?.handle,className:"object-cover"}),(0,t.jsx)(te,{children:s.user?.handle?.[0]?.toUpperCase()})]}),(0,t.jsxs)("span",{className:"font-bold",children:["@",s.user?.handle]})]}),l?.id!==s.user?.id&&(0,t.jsx)("button",{className:`ml-2 flex items-center gap-1.5 rounded-full px-3 py-1.5 text-xs font-bold transition-all active:scale-95 ${_?"border border-white/50 bg-transparent text-white":"bg-white text-black hover:bg-zinc-200"}`,onClick:L,children:_?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ws,{size:14}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"Following"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(hs,{size:14}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"Follow"})]})})]}),(0,t.jsx)(Pe,{options:{...Fe,render:({attributes:k,content:P})=>{const{href:D,...B}=k,Q=!D.startsWith("/")&&(D.startsWith("http")||D.startsWith("www"));return D.startsWith("/u/")||D.startsWith("/tags/")||D.startsWith("/c/")||D.startsWith("/explore")?(0,t.jsx)("span",{...B,className:"cursor-pointer font-bold text-white hover:underline",onClick:Y=>{Y.stopPropagation(),a(D)},children:P},P):(0,t.jsx)("a",{href:D,...B,className:"text-white hover:underline",target:Q?"_blank":void 0,rel:Q?"noopener noreferrer":void 0,onClick:Y=>Y.stopPropagation(),children:P},P)}},children:(0,t.jsx)("p",{className:"mb-3 line-clamp-2 text-sm",children:s.content})}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-xs opacity-90",children:[(0,t.jsx)(Yt,{size:14,className:"animate-spin-slow"}),(0,t.jsxs)("span",{children:["Original Audio - ",s.user?.handle]})]})]}),(0,t.jsxs)("div",{className:"absolute bottom-6 right-2 z-10 flex flex-col items-center gap-6",children:[(0,t.jsxs)("div",{className:"pointer-events-auto flex flex-col items-center gap-1",children:[(0,t.jsx)(V.button,{whileTap:{scale:.8},className:`rounded-full p-3 backdrop-blur-md transition-all ${w?"bg-rose-500/20 text-rose-500":"bg-zinc-800/50 text-white hover:bg-zinc-700"}`,onClick:A,children:(0,t.jsx)(V.div,{animate:w?{scale:[1,1.3,1]}:{scale:1},transition:{duration:.3},children:(0,t.jsx)(ge,{size:28,fill:w?"currentColor":"none"})})}),(0,t.jsx)("span",{className:"text-xs font-bold text-white",children:y})]}),(0,t.jsxs)("div",{className:"pointer-events-auto flex flex-col items-center gap-1",children:[(0,t.jsx)(V.button,{whileTap:{scale:.8},className:"rounded-full bg-zinc-800/50 p-3 text-white backdrop-blur-md transition-colors hover:bg-zinc-700",onClick:k=>{k.stopPropagation(),m(!0)},children:(0,t.jsx)(jt,{size:28})}),(0,t.jsx)("span",{className:"text-xs font-bold text-white",children:s.stats?.comments||0})]}),(0,t.jsxs)("div",{className:"pointer-events-auto flex flex-col items-center gap-1",children:[(0,t.jsx)(V.button,{whileTap:{scale:.8},className:"rounded-full bg-zinc-800/50 p-3 text-white backdrop-blur-md transition-colors hover:bg-zinc-700",onClick:U,children:(0,t.jsx)(ve,{size:28})}),(0,t.jsx)("span",{className:"text-xs font-bold text-white",children:s.stats?.shares||0})]}),(0,t.jsx)("div",{className:"pointer-events-auto flex flex-col items-center gap-1",children:(0,t.jsx)(V.button,{whileTap:{scale:.8},className:"rounded-full bg-zinc-800/50 p-3 text-white backdrop-blur-md transition-colors hover:bg-rose-500/20 hover:text-rose-500",onClick:k=>{k.stopPropagation(),d("reel",s.id)},children:(0,t.jsx)(we,{size:28})})})]}),(0,t.jsx)("div",{className:"absolute bottom-0 left-0 z-50 h-[3px] w-full bg-white/20 hover:h-[8px] transition-all cursor-pointer group",onClick:T,children:(0,t.jsx)("div",{className:"h-full bg-white shadow-[0_0_8px_rgba(255,255,255,0.8)] transition-all duration-100 ease-linear relative",style:{width:`${I}%`},children:(0,t.jsx)("div",{className:"absolute right-0 top-1/2 -translate-y-1/2 size-3 bg-white rounded-full shadow-lg scale-0 group-hover:scale-100 transition-transform"})})})]}),(0,t.jsx)(Ei,{isOpen:f,onClose:()=>m(!1),reelId:s.id,currentUser:l,showToast:r}),(0,t.jsx)(St,{isOpen:h,onClose:()=>v(!1),url:`${window.location.origin}/r/${s.id}`,title:"Share Reel"})]})},(s,e)=>s.isActive===e.isActive&&s.reel.id===e.reel.id&&s.isMuted===e.isMuted),Vi=Ii,Mi=({isOpen:s,onClose:e,reelId:i,currentUser:n,showToast:a})=>{const[l,r]=(0,$.useState)([]),[d,o]=(0,$.useState)(!1),[x,p]=(0,$.useState)(!1),[f,m]=(0,$.useState)(""),[h,v]=(0,$.useState)([]),[u,b]=(0,$.useState)(!1),[g,N]=(0,$.useState)(!0),[w,z]=(0,$.useState)(!1),[y,c]=(0,$.useState)(null),_=(0,$.useRef)(l);(0,$.useEffect)(()=>{_.current=l},[l]);const S=(0,$.useCallback)(async(C=!1)=>{if(i){C?z(!0):o(!0);try{const j=_.current,F=await $s(i,C&&j.length>0?j[j.length-1].created_at:null,10);F.length<10?N(!1):N(!0),r(C?T=>[...T,...F]:F)}catch(j){console.error("Failed to load comments:",j),a&&a("Failed to load comments","error")}finally{o(!1),z(!1)}}},[i,a]);(0,$.useEffect)(()=>{s&&i?S():(r([]),N(!0))},[s,i,S]);const I=async C=>{if(C.preventDefault(),!(!f.trim()&&h.length===0||!n)){p(!0),b(!0);try{const j=[];for(const F of h){const T=await $e(F);j.push(T)}await Ns(i,n.id,f,j,y?.id),m(""),v([]),c(null),a&&a("Reply posted!"),S()}catch(j){console.error("Failed to post comment:",j),a&&a("Failed to post reply.","error")}finally{p(!1),b(!1)}}};return(0,t.jsx)(yt,{isOpen:s,onClose:e,title:"Comments",className:"max-sm:h-[95dvh] h-[85vh] overflow-hidden !p-0 sm:max-w-xl",children:(0,t.jsxs)("div",{className:"flex h-full flex-col overflow-hidden bg-white dark:bg-zinc-900",children:[(0,t.jsx)("div",{className:"mx-auto my-3 h-1.5 w-12 shrink-0 rounded-full bg-zinc-200 dark:bg-zinc-800 sm:hidden"}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto scroll-smooth scrollbar-thin scrollbar-thumb-zinc-200 dark:scrollbar-thumb-zinc-800",children:d?(0,t.jsx)("div",{className:"flex flex-col",children:[1,2,3].map(C=>(0,t.jsx)(cs,{},C))}):l.length>0?(0,t.jsxs)("div",{className:"flex flex-col",children:[l.map(C=>(0,t.jsx)($i,{...C,isComment:!0,post_id:i,currentUser:n,showToast:a,onReply:(j,F)=>{c(F?{handle:j,id:F}:null),m(T=>T.includes(`@${j}`)?T:T+`@${j} `)},onDelete:j=>r(F=>F.filter(T=>T.id!==j)),onUpdate:(j,F,T)=>r(M=>M.map(E=>E.id===j?{...E,content:F,media:T}:E))},C.id)),g&&(0,t.jsxs)("button",{onClick:()=>S(!0),disabled:w,className:"flex w-full items-center justify-center gap-2 py-6 text-sm font-bold text-violet-600 transition-colors hover:bg-zinc-50 dark:hover:bg-zinc-900",children:[w&&(0,t.jsx)("span",{className:"mr-2 animate-pulse",children:"..."}),"View more replies"]})]}):(0,t.jsxs)("div",{className:"flex h-full min-h-[300px] flex-col items-center justify-center p-8 text-center text-zinc-500",children:[(0,t.jsx)("div",{className:"mb-4 flex size-16 items-center justify-center rounded-full bg-zinc-100 dark:bg-zinc-900",children:(0,t.jsx)(bt,{size:32,className:"text-zinc-400"})}),(0,t.jsx)("p",{className:"text-lg font-bold dark:text-zinc-300",children:"No comments yet"}),(0,t.jsx)("p",{className:"text-sm dark:text-zinc-500",children:"Be the first to share what you think!"})]})}),(0,t.jsxs)("div",{className:"shrink-0 border-t border-zinc-100 bg-white pb-safe dark:border-zinc-800 dark:bg-zinc-900",children:[y&&(0,t.jsxs)("div",{className:"flex items-center justify-between border-b border-zinc-50 bg-zinc-50/50 px-4 py-2 dark:border-zinc-800/50 dark:bg-zinc-900/50",children:[(0,t.jsxs)("span",{className:"text-xs text-zinc-500",children:["Replying to"," ",(0,t.jsxs)("span",{className:"font-bold text-violet-600",children:["@",y.handle]})]}),(0,t.jsx)("button",{onClick:()=>c(null),className:"text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-200",children:(0,t.jsx)(oe,{size:14})})]}),(0,t.jsx)(Ct,{currentUser:n,newComment:f,setNewComment:m,handleSubmitComment:I,loading:x,selectedFiles:h,setSelectedFiles:v,isUploading:u})]})]})})},Ei=Mi,qi=q();export{$i as n,Fe as r,Vi as t};

import{a as J}from"./rolldown-runtime-BaZ8gS7u.js";import{c as O,l as R,w as X}from"./framework-pz3E8ggb.js";import"./database-OCX2jLsI.js";import{Fn as B,Pt as Y,Qn as G,an as Z}from"./ui-libs-DWk2zGE7.js";import"./media-libs-_YS1-DNr.js";import{$ as V,G as ee,J as D,Q as W,f as te,q as se,st as ae,tn as A,ut as H}from"./index-DN7dOT-1.js";import"./VideoPlayer-Bji2tEGu.js";import{n as ie}from"./post-BFIea0w1.js";import"./text-processing-BCvMLdJG.js";import"./rich-text-BghXyOk6.js";import"./actionsheet-CbXQZs43.js";var re=O(),Ne=J(X(),1),t=J(R(),1),ne=()=>{const e=(0,re.c)(56),{currentUser:n,searchQuery:i,setSearchQuery:l,activeTab:s,setActiveTab:w,communitiesData:I,isCommunitiesLoading:K,isFetchingMoreCommunities:U,hasMoreCommunities:P,postsData:v,isPostsLoading:z,isFetchingMorePosts:S,hasMorePosts:$,filteredCommunities:j,usersData:g,isUsersLoading:N,isFetchingMoreUsers:L,hasMoreUsers:M,handleCommunityClick:F,loadCommunities:T,loadPosts:q,loadUsers:E,navigate:r}=te();if((K||z||N)&&!I.length&&!v.length&&!g.length){let a;return e[0]!==s?(a=(0,t.jsx)("div",{className:"min-h-screen bg-background md:rounded-xl",children:s==="posts"?[1,2,3].map(le):[1,2,3,4,5,6].map(ce)}),e[0]=s,e[1]=a):a=e[1],a}let c;e[2]!==l?(c=()=>l(""),e[2]=l,e[3]=c):c=e[3];let d;e[4]!==i||e[5]!==l||e[6]!==c?(d=(0,t.jsx)(ae,{value:i,onChange:l,onClear:c,placeholder:"Search communities or posts...",className:"flex-1"}),e[4]=i,e[5]=l,e[6]=c,e[7]=d):d=e[7];let o;e[8]!==n||e[9]!==r?(o=n&&(0,t.jsx)("button",{onClick:()=>r("/create-community"),className:"flex size-11 shrink-0 items-center justify-center rounded-xl bg-zinc-950 text-white shadow-sm transition-all hover:scale-105 active:scale-95 dark:bg-white dark:text-zinc-950",title:"Create Community",children:(0,t.jsx)(Z,{size:22,strokeWidth:3})}),e[8]=n,e[9]=r,e[10]=o):o=e[10];let m;e[11]!==d||e[12]!==o?(m=(0,t.jsxs)("div",{className:"flex gap-2 p-4",children:[d,o]}),e[11]=d,e[12]=o,e[13]=m):m=e[13];let k;e[14]===Symbol.for("react.memo_cache_sentinel")?(k=(0,t.jsx)(D,{value:"communities",className:"flex flex-1 h-full items-center justify-center rounded-none border-b-2 border-transparent font-bold text-zinc-500 transition-all data-[state=active]:border-violet-600 data-[state=active]:bg-transparent data-[state=active]:text-zinc-950 dark:data-[state=active]:text-white",title:"Communities",children:(0,t.jsx)(Y,{size:22})}),e[14]=k):k=e[14];let _;e[15]===Symbol.for("react.memo_cache_sentinel")?(_=(0,t.jsx)(D,{value:"posts",className:"flex flex-1 h-full items-center justify-center rounded-none border-b-2 border-transparent font-bold text-zinc-500 transition-all data-[state=active]:border-violet-600 data-[state=active]:bg-transparent data-[state=active]:text-zinc-950 dark:data-[state=active]:text-white",title:"Posts",children:(0,t.jsx)(B,{size:22})}),e[15]=_):_=e[15];let C;e[16]===Symbol.for("react.memo_cache_sentinel")?(C=(0,t.jsxs)(se,{className:"flex w-full h-12 gap-0 border-none bg-transparent p-0 px-4",children:[k,_,(0,t.jsx)(D,{value:"users",className:"flex flex-1 h-full items-center justify-center rounded-none border-b-2 border-transparent font-bold text-zinc-500 transition-all data-[state=active]:border-violet-600 data-[state=active]:bg-transparent data-[state=active]:text-zinc-950 dark:data-[state=active]:text-white",title:"Users",children:(0,t.jsx)(G,{size:22})})]}),e[16]=C):C=e[16];let x;e[17]!==s||e[18]!==w?(x=(0,t.jsx)("div",{className:"border-t border-zinc-50 px-1 dark:border-zinc-900/50",children:(0,t.jsx)(ee,{value:s,onValueChange:w,className:"w-full",children:C})}),e[17]=s,e[18]=w,e[19]=x):x=e[19];let u;e[20]!==m||e[21]!==x?(u=(0,t.jsxs)("div",{className:"sticky top-0 z-10 border-b border-zinc-50 bg-white/90 backdrop-blur-md dark:bg-black/90 dark:border-zinc-900/50",children:[m,x]}),e[20]=m,e[21]=x,e[22]=u):u=e[22];let f;e[23]!==s||e[24]!==j||e[25]!==F||e[26]!==P||e[27]!==U||e[28]!==T?(f=s==="communities"&&(0,t.jsxs)("div",{className:"divide-y divide-zinc-50 dark:divide-zinc-900/50",children:[j.length>0?j.map(a=>(0,t.jsx)(H,{profile:a,onUserClick:F,isCommunity:!0},a.handle)):(0,t.jsx)("div",{className:"p-20 text-center text-zinc-500",children:(0,t.jsx)("p",{className:"font-bold",children:"No communities found"})}),P&&j.length>0&&(0,t.jsx)("div",{className:"flex justify-center border-t border-zinc-50 p-6 dark:border-zinc-900/50",children:(0,t.jsx)(A,{variant:"secondary",className:"w-full",onClick:()=>T(),loading:U,children:"Load more"})})]}),e[23]=s,e[24]=j,e[25]=F,e[26]=P,e[27]=U,e[28]=T,e[29]=f):f=e[29];let h;e[30]!==s||e[31]!==n||e[32]!==$||e[33]!==S||e[34]!==z||e[35]!==q||e[36]!==r||e[37]!==v||e[38]!==i?(h=s==="posts"&&(0,t.jsx)("div",{className:"divide-y divide-zinc-50 dark:divide-zinc-900/50",children:v.length>0?(0,t.jsxs)(t.Fragment,{children:[v.map(a=>(0,t.jsx)(ie,{currentUser:n,...a,onClick:()=>r(`/p/${a.id}`),onUserClick:Q=>r(`/u/${Q}`)},a.feed_id||a.id)),$&&(0,t.jsx)("div",{className:"flex justify-center border-t border-zinc-50 p-6 dark:border-zinc-900/50",children:(0,t.jsx)(A,{variant:"secondary",className:"w-full max-w-xs",onClick:()=>q(),loading:S,children:"Load more"})})]}):z?(0,t.jsx)("div",{className:"flex flex-col",children:[1,2,3].map(de)}):(0,t.jsxs)("div",{className:"flex flex-col items-center gap-3 p-20 text-center text-zinc-500",children:[(0,t.jsx)("div",{className:"rounded-full bg-zinc-50 p-4 dark:bg-zinc-900",children:(0,t.jsx)(B,{size:32,className:"text-zinc-300"})}),(0,t.jsx)("p",{className:"font-bold",children:i?`No posts found matching "${i}"`:"No posts found"})]})}),e[30]=s,e[31]=n,e[32]=$,e[33]=S,e[34]=z,e[35]=q,e[36]=r,e[37]=v,e[38]=i,e[39]=h):h=e[39];let p;e[40]!==s||e[41]!==M||e[42]!==L||e[43]!==N||e[44]!==E||e[45]!==r||e[46]!==i||e[47]!==g?(p=s==="users"&&(0,t.jsx)("div",{className:"divide-y divide-zinc-50 dark:divide-zinc-900/50",children:g.length>0?(0,t.jsxs)(t.Fragment,{children:[g.map(a=>(0,t.jsx)(H,{profile:a,onUserClick:Q=>r(`/u/${Q}`)},a.id)),M&&(0,t.jsx)("div",{className:"flex justify-center border-t border-zinc-50 p-6 dark:border-zinc-900/50",children:(0,t.jsx)(A,{variant:"secondary",className:"w-full max-w-xs",onClick:()=>E(),loading:L,children:"Load more"})})]}):N?(0,t.jsx)("div",{className:"flex flex-col",children:[1,2,3,4,5].map(oe)}):(0,t.jsxs)("div",{className:"flex flex-col items-center gap-3 p-20 text-center text-zinc-500",children:[(0,t.jsx)("div",{className:"rounded-full bg-zinc-50 p-4 dark:bg-zinc-900",children:(0,t.jsx)(G,{size:32,className:"text-zinc-300"})}),(0,t.jsx)("p",{className:"font-bold",children:i?`No users found matching "${i}"`:"No users found"})]})}),e[40]=s,e[41]=M,e[42]=L,e[43]=N,e[44]=E,e[45]=r,e[46]=i,e[47]=g,e[48]=p):p=e[48];let b;e[49]!==h||e[50]!==p||e[51]!==f?(b=(0,t.jsxs)("div",{className:"min-h-screen",children:[f,h,p]}),e[49]=h,e[50]=p,e[51]=f,e[52]=b):b=e[52];let y;return e[53]!==b||e[54]!==u?(y=(0,t.jsxs)("div",{className:"min-h-screen bg-white pb-20 dark:bg-black md:rounded-xl",children:[u,b]}),e[53]=b,e[54]=u,e[55]=y):y=e[55],y},ke=ne;function le(e){return(0,t.jsx)(V,{},e)}function ce(e){return(0,t.jsx)(W,{},e)}function de(e){return(0,t.jsx)(V,{},e)}function oe(e){return(0,t.jsx)(W,{},e)}export{ke as default};

import{t as b}from"./rolldown-runtime-CIzSbf4l.js";var I=b((r=>{Object.defineProperties(r,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});function o(e,n){const s=e.indexOf(n);s!==-1&&e.splice(s,1)}var i=()=>{};function g(e){if(!(typeof e=="object"&&e!==null&&!Array.isArray(e)))return!1;try{return JSON.stringify(e),!0}catch{return!1}}var a=(e=>(e[e.None=0]="None",e[e.Fatal=1]="Fatal",e[e.Error=2]="Error",e[e.Warn=3]="Warn",e[e.Info=4]="Info",e[e.Debug=5]="Debug",e[e.Verbose=6]="Verbose",e))(a||{}),p=class{setLogLevel(e){window.cordova.exec(i,i,"OneSignalPush","setLogLevel",[e])}setAlertLevel(e){window.cordova.exec(i,i,"OneSignalPush","setAlertLevel",[e])}},w=class{constructor(){this._inAppMessageClickListeners=[],this._willDisplayInAppMessageListeners=[],this._didDisplayInAppMessageListeners=[],this._willDismissInAppMessageListeners=[],this._didDismissInAppMessageListeners=[]}_processFunctionList(e,n){for(let s=0;s<e.length;s++)e[s](n)}addEventListener(e,n){if(e==="click"){this._inAppMessageClickListeners.push(n);const s=t=>{this._processFunctionList(this._inAppMessageClickListeners,t)};window.cordova.exec(s,i,"OneSignalPush","setInAppMessageClickHandler",[])}else if(e==="willDisplay"){this._willDisplayInAppMessageListeners.push(n);const s=t=>{this._processFunctionList(this._willDisplayInAppMessageListeners,t)};window.cordova.exec(s,i,"OneSignalPush","setOnWillDisplayInAppMessageHandler",[])}else if(e==="didDisplay"){this._didDisplayInAppMessageListeners.push(n);const s=t=>{this._processFunctionList(this._didDisplayInAppMessageListeners,t)};window.cordova.exec(s,i,"OneSignalPush","setOnDidDisplayInAppMessageHandler",[])}else if(e==="willDismiss"){this._willDismissInAppMessageListeners.push(n);const s=t=>{this._processFunctionList(this._willDismissInAppMessageListeners,t)};window.cordova.exec(s,i,"OneSignalPush","setOnWillDismissInAppMessageHandler",[])}else if(e==="didDismiss"){this._didDismissInAppMessageListeners.push(n);const s=t=>{this._processFunctionList(this._didDismissInAppMessageListeners,t)};window.cordova.exec(s,i,"OneSignalPush","setOnDidDismissInAppMessageHandler",[])}}removeEventListener(e,n){e==="click"?o(this._inAppMessageClickListeners,n):e==="willDisplay"?o(this._willDisplayInAppMessageListeners,n):e==="didDisplay"?o(this._didDisplayInAppMessageListeners,n):e==="willDismiss"?o(this._willDismissInAppMessageListeners,n):e==="didDismiss"&&o(this._didDismissInAppMessageListeners,n)}addTrigger(e,n){const s={[e]:n};this.addTriggers(s)}addTriggers(e){Object.keys(e).forEach(function(n){typeof e[n]!="string"&&(e[n]=JSON.stringify(e[n]))}),window.cordova.exec(i,i,"OneSignalPush","addTriggers",[e])}removeTrigger(e){this.removeTriggers([e])}removeTriggers(e){Array.isArray(e)||console.error("OneSignal: removeTriggers: argument must be of type Array"),window.cordova.exec(i,i,"OneSignalPush","removeTriggers",[e])}clearTriggers(){window.cordova.exec(i,i,"OneSignalPush","clearTriggers")}setPaused(e){window.cordova.exec(i,i,"OneSignalPush","setPaused",[e])}getPaused(){return new Promise((e,n)=>{window.cordova.exec(e,n,"OneSignalPush","isPaused",[])})}},v=class{enter(e,n,s,t){s??=i,t??=i,window.cordova.exec(s,t,"OneSignalPush","enterLiveActivity",[e,n])}exit(e,n,s){n??=i,s??=i,window.cordova.exec(n,s,"OneSignalPush","exitLiveActivity",[e])}setPushToStartToken(e,n){window.cordova.exec(i,i,"OneSignalPush","setPushToStartToken",[e,n])}removePushToStartToken(e){window.cordova.exec(i,i,"OneSignalPush","removePushToStartToken",[e])}setupDefault(e){window.cordova.exec(i,i,"OneSignalPush","setupDefaultLiveActivity",[e])}startDefault(e,n,s){window.cordova.exec(i,i,"OneSignalPush","startDefaultLiveActivity",[e,n,s])}},m=class{requestPermission(){window.cordova.exec(i,i,"OneSignalPush","requestLocationPermission",[])}setShared(e){window.cordova.exec(i,i,"OneSignalPush","setLocationShared",[e])}isShared(){return new Promise((e,n)=>{window.cordova.exec(e,n,"OneSignalPush","isLocationShared",[])})}},c=class{constructor(e){this.notificationId=e.notificationId,this.body=e.body,this.title=e.title,this.additionalData=e.additionalData,typeof e.rawPayload=="string"?this.rawPayload=JSON.parse(e.rawPayload):this.rawPayload=e.rawPayload,this.launchURL=e.launchURL,this.sound=e.sound,e.actionButtons&&(this.actionButtons=e.actionButtons),e.groupKey&&(this.groupKey=e.groupKey),e.ledColor&&(this.ledColor=e.ledColor),typeof e.priority<"u"&&(this.priority=e.priority),e.smallIcon&&(this.smallIcon=e.smallIcon),e.largeIcon&&(this.largeIcon=e.largeIcon),e.bigPicture&&(this.bigPicture=e.bigPicture),e.collapseId&&(this.collapseId=e.collapseId),e.groupMessage&&(this.groupMessage=e.groupMessage),e.fromProjectNumber&&(this.fromProjectNumber=e.fromProjectNumber),e.smallIconAccentColor&&(this.smallIconAccentColor=e.smallIconAccentColor),e.lockScreenVisibility&&(this.lockScreenVisibility=e.lockScreenVisibility),e.androidNotificationId&&(this.androidNotificationId=e.androidNotificationId),e.groupedNotifications&&e.groupedNotifications.length&&(this.groupedNotifications=e.groupedNotifications),e.badge&&(this.badge=e.badge),e.category&&(this.category=e.category),e.threadId&&(this.threadId=e.threadId),e.subtitle&&(this.subtitle=e.subtitle),e.templateId&&(this.templateId=e.templateId),e.attachments&&(this.attachments=e.attachments),e.templateName&&(this.templateName=e.templateName),e.mutableContent&&(this.mutableContent=e.mutableContent),e.badgeIncrement&&(this.badgeIncrement=e.badgeIncrement),e.contentAvailable&&(this.contentAvailable=e.contentAvailable),e.relevanceScore&&(this.relevanceScore=e.relevanceScore),e.interruptionLevel&&(this.interruptionLevel=e.interruptionLevel)}display(){window.cordova.exec(i,i,"OneSignalPush","displayNotification",[this.notificationId])}},d=class{constructor(e){this.notification=new c(e)}preventDefault(e=!1){window.cordova.exec(i,i,"OneSignalPush","preventDefault",[this.notification.notificationId,e])}getNotification(){return this.notification}},l=(e=>(e[e.NotDetermined=0]="NotDetermined",e[e.Denied=1]="Denied",e[e.Authorized=2]="Authorized",e[e.Provisional=3]="Provisional",e[e.Ephemeral=4]="Ephemeral",e))(l||{}),P=class{constructor(){this._permissionObserverList=[],this._notificationClickedListeners=[],this._notificationWillDisplayListeners=[]}_processFunctionList(e,n){for(let s=0;s<e.length;s++)e[s](n)}_setPropertyAndObserver(){const e=n=>{this._permission=n};window.cordova.exec(e,i,"OneSignalPush","getPermissionInternal"),this.addEventListener("permissionChange",n=>{this._permission=n})}hasPermission(){return this._permission||!1}getPermissionAsync(){return new Promise((e,n)=>{window.cordova.exec(e,n,"OneSignalPush","getPermissionInternal")})}permissionNative(){return new Promise((e,n)=>{window.cordova.exec(e,n,"OneSignalPush","permissionNative",[])})}requestPermission(e){let n=e??!1;return new Promise((s,t)=>{window.cordova.exec(s,t,"OneSignalPush","requestPermission",[n])})}canRequestPermission(){return new Promise((e,n)=>{window.cordova.exec(e,n,"OneSignalPush","canRequestPermission",[])})}registerForProvisionalAuthorization(e=i){window.cordova.exec(e,i,"OneSignalPush","registerForProvisionalAuthorization",[])}addEventListener(e,n){if(e==="click"){this._notificationClickedListeners.push(n);const s=t=>{this._processFunctionList(this._notificationClickedListeners,t)};window.cordova.exec(s,i,"OneSignalPush","addNotificationClickListener",[])}else if(e==="foregroundWillDisplay"){this._notificationWillDisplayListeners.push(n);const s=t=>{this._notificationWillDisplayListeners.forEach(f=>{f(new d(t))}),window.cordova.exec(i,i,"OneSignalPush","proceedWithWillDisplay",[t.notificationId])};window.cordova.exec(s,i,"OneSignalPush","addForegroundLifecycleListener",[])}else if(e==="permissionChange"){this._permissionObserverList.push(n);const s=t=>{this._processFunctionList(this._permissionObserverList,t)};window.cordova.exec(s,i,"OneSignalPush","addPermissionObserver",[])}}removeEventListener(e,n){e==="click"?o(this._notificationClickedListeners,n):e==="foregroundWillDisplay"?o(this._notificationWillDisplayListeners,n):e==="permissionChange"&&o(this._permissionObserverList,n)}clearAll(){window.cordova.exec(i,i,"OneSignalPush","clearAllNotifications",[])}removeNotification(e){window.cordova.exec(i,i,"OneSignalPush","removeNotification",[e])}removeGroupedNotifications(e){window.cordova.exec(i,i,"OneSignalPush","removeGroupedNotifications",[e])}},O=class{addOutcome(e){window.cordova.exec(i,i,"OneSignalPush","addOutcome",[e])}addUniqueOutcome(e){window.cordova.exec(i,i,"OneSignalPush","addUniqueOutcome",[e])}addOutcomeWithValue(e,n){window.cordova.exec(i,i,"OneSignalPush","addOutcomeWithValue",[e,n])}},S=class{constructor(){this._subscriptionObserverList=[]}_processFunctionList(e,n){for(let s=0;s<e.length;s++)e[s](n)}_setPropertiesAndObserver(){const e=t=>{this._id=t};window.cordova.exec(e,i,"OneSignalPush","getPushSubscriptionId");const n=t=>{this._token=t};window.cordova.exec(n,i,"OneSignalPush","getPushSubscriptionToken");const s=t=>{this._optedIn=t};window.cordova.exec(s,i,"OneSignalPush","getPushSubscriptionOptedIn"),this.addEventListener("change",t=>{this._id=t.current.id,this._token=t.current.token,this._optedIn=t.current.optedIn})}get id(){return console.warn("OneSignal: This method has been deprecated. Use getIdAsync instead for getting push subscription id."),this._id}get token(){return console.warn("OneSignal: This method has been deprecated. Use getTokenAsync instead for getting push subscription token."),this._token}get optedIn(){return console.warn("OneSignal: This method has been deprecated. Use getOptedInAsync instead for getting push subscription opted in status."),this._optedIn||!1}getIdAsync(){return new Promise((e,n)=>{window.cordova.exec(e,n,"OneSignalPush","getPushSubscriptionId")})}getTokenAsync(){return new Promise((e,n)=>{window.cordova.exec(e,n,"OneSignalPush","getPushSubscriptionToken")})}getOptedInAsync(){return new Promise((e,n)=>{window.cordova.exec(e,n,"OneSignalPush","getPushSubscriptionOptedIn")})}addEventListener(e,n){this._subscriptionObserverList.push(n);const s=t=>{this._processFunctionList(this._subscriptionObserverList,t)};window.cordova.exec(s,i,"OneSignalPush","addPushSubscriptionObserver",[])}removeEventListener(e,n){o(this._subscriptionObserverList,n)}optIn(){window.cordova.exec(i,i,"OneSignalPush","optInPushSubscription")}optOut(){window.cordova.exec(i,i,"OneSignalPush","optOutPushSubscription")}},L=class{constructor(){this.pushSubscription=new S,this._userStateObserverList=[]}_processFunctionList(e,n){for(let s=0;s<e.length;s++)e[s](n)}setLanguage(e){window.cordova.exec(i,i,"OneSignalPush","setLanguage",[e])}addAlias(e,n){const s={[e]:n};window.cordova.exec(i,i,"OneSignalPush","addAliases",[s])}addAliases(e){window.cordova.exec(i,i,"OneSignalPush","addAliases",[e])}removeAlias(e){window.cordova.exec(i,i,"OneSignalPush","removeAliases",[e])}removeAliases(e){window.cordova.exec(i,i,"OneSignalPush","removeAliases",e)}addEmail(e){window.cordova.exec(i,i,"OneSignalPush","addEmail",[e])}removeEmail(e){window.cordova.exec(i,i,"OneSignalPush","removeEmail",[e])}addSms(e){window.cordova.exec(i,i,"OneSignalPush","addSms",[e])}removeSms(e){window.cordova.exec(i,i,"OneSignalPush","removeSms",[e])}addTag(e,n){const s={[e]:n};window.cordova.exec(i,i,"OneSignalPush","addTags",[s])}addTags(e){const n=e;Object.keys(e).forEach(function(s){typeof n[s]!="string"&&(n[s]=JSON.stringify(n[s]))}),window.cordova.exec(i,i,"OneSignalPush","addTags",[n])}removeTag(e){window.cordova.exec(i,i,"OneSignalPush","removeTags",[e])}removeTags(e){window.cordova.exec(i,i,"OneSignalPush","removeTags",e)}getTags(){return new Promise((e,n)=>{window.cordova.exec(e,n,"OneSignalPush","getTags",[])})}addEventListener(e,n){this._userStateObserverList.push(n);const s=t=>{this._processFunctionList(this._userStateObserverList,t)};window.cordova.exec(s,i,"OneSignalPush","addUserStateObserver",[])}removeEventListener(e,n){o(this._userStateObserverList,n)}getOnesignalId(){return new Promise((e,n)=>{window.cordova.exec(e,n,"OneSignalPush","getOnesignalId",[])})}getExternalId(){return new Promise((e,n)=>{window.cordova.exec(e,n,"OneSignalPush","getExternalId",[])})}trackEvent(e,n){if(n!==void 0&&!g(n)){console.error("Properties must be a JSON-serializable object");return}const s=n?[e,n]:[e];window.cordova.exec(i,i,"OneSignalPush","trackEvent",s)}},u=class{constructor(){this.User=new L,this.Debug=new p,this.Session=new O,this.Location=new m,this.InAppMessages=new w,this.Notifications=new P,this.LiveActivities=new v,this._appID=""}initialize(e){this._appID=e;const n=()=>{this.User.pushSubscription._setPropertiesAndObserver(),this.Notifications._setPropertyAndObserver()};window.cordova.exec(n,i,"OneSignalPush","init",[this._appID])}login(e){window.cordova.exec(i,i,"OneSignalPush","login",[e])}logout(){window.cordova.exec(i,i,"OneSignalPush","logout")}setConsentRequired(e){window.cordova.exec(i,i,"OneSignalPush","setPrivacyConsentRequired",[e])}setConsentGiven(e){window.cordova.exec(i,i,"OneSignalPush","setPrivacyConsentGiven",[e])}},h=new u;window.plugins||(window.plugins={}),window.plugins.OneSignal||(window.plugins.OneSignal=h),r.LogLevel=a,r.NotificationWillDisplayEvent=d,r.OSNotification=c,r.OSNotificationPermission=l,r.OneSignalPlugin=u,r.default=h})),_=I();export{_ as default};

import{a as j}from"./rolldown-runtime-BaZ8gS7u.js";import{l as N,v as z,w as y}from"./framework-3lkjbTvb.js";import"./database-COznt_u0.js";import{En as R,Gn as C,Ht as S,Xn as T,nr as I,tr as u,zn as $}from"./ui-libs-oBja7Jpd.js";import"./media-libs-C98UjHPF.js";import{Bn as A,G as D,J as L,K as q,Ln as l,U as b,Y as E,h as M,q as d}from"./index-DL50ezAM.js";var f=j(y(),1),e=j(N(),1),G=()=>{const i=z(),{reports:p,actions:c}=M(),[o,v]=(0,f.useState)("all"),[x,g]=(0,f.useState)(null);if(p.isLoading)return(0,e.jsxs)("div",{className:"space-y-4",children:[(0,e.jsxs)("div",{className:"space-y-2",children:[(0,e.jsx)(b,{className:"h-8 w-64"}),(0,e.jsx)(b,{className:"h-4 w-48"})]}),(0,e.jsx)("div",{className:"space-y-3",children:[1,2,3].map(s=>(0,e.jsx)(b,{className:"h-32 rounded-2xl"},s))})]});const a=p.data||[],m=o==="all"?a:a.filter(s=>s.status===o),h={pending:a.filter(s=>s.status==="pending").length,resolved:a.filter(s=>s.status==="resolved").length,dismissed:a.filter(s=>s.status==="dismissed").length},w=s=>{try{const{target_type:r,target_id:t,target_data:n}=s;switch(r?.toLowerCase()){case"post":i(`/p/${t}`);break;case"comment":n?.post_id&&i(`/p/${n.post_id}?highlight=${t}`);break;case"user":i(`/u/${n?.handle||t}`);break;case"community":i(`/c/${t}`);break;case"profile":i(`/u/${n?.handle||t}`);break;default:console.warn("Unknown report type:",r)}}catch(r){console.error("Error navigating to content:",r)}},k=async s=>{if(confirm(`Delete the reported ${s.target_type} and mark as resolved?`)){g(s.id);try{await new Promise(r=>{const t=setTimeout(r,500);return c.deleteTarget({type:s.target_type,id:s.target_id}),()=>clearTimeout(t)}),c.updateReportStatus({reportId:s.id,status:"resolved"})}finally{g(null)}}};return(0,e.jsxs)("div",{className:"space-y-8 animate-in fade-in duration-500",children:[(0,e.jsxs)("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[(0,e.jsxs)("div",{className:"space-y-1",children:[(0,e.jsx)("h1",{className:"text-3xl font-black tracking-tight text-zinc-900 dark:text-white",children:"Moderation Queue"}),(0,e.jsx)("p",{className:"text-sm font-medium text-zinc-500",children:"Review and resolve community reported content"})]}),(0,e.jsx)("div",{className:"flex items-center gap-2 rounded-2xl bg-white p-1 shadow-sm dark:bg-zinc-900 border border-zinc-200/50 dark:border-white/5",children:(0,e.jsxs)("div",{className:"px-4 py-2",children:[(0,e.jsx)("p",{className:"text-[10px] font-black uppercase tracking-widest text-zinc-400",children:"Total Reports"}),(0,e.jsx)("p",{className:"text-xl font-black text-rose-600",children:a.length})]})})]}),(0,e.jsx)("div",{className:"grid gap-4 sm:grid-cols-3",children:[{label:"Action Required",count:h.pending,icon:T,color:"text-amber-600 dark:text-amber-400",bg:"bg-amber-500/10",border:"border-amber-500/20"},{label:"Resolved",count:h.resolved,icon:u,color:"text-emerald-600 dark:text-emerald-400",bg:"bg-emerald-500/10",border:"border-emerald-500/20"},{label:"Dismissed",count:h.dismissed,icon:I,color:"text-zinc-600 dark:text-zinc-400",bg:"bg-zinc-500/10",border:"border-zinc-500/20"}].map(s=>(0,e.jsx)("div",{className:l("group relative overflow-hidden rounded-[2rem] border bg-white p-6 shadow-sm transition-all duration-300 dark:bg-zinc-900/50",s.border),children:(0,e.jsxs)("div",{className:"flex items-center gap-4",children:[(0,e.jsx)("div",{className:l("rounded-2xl p-3 shadow-inner transition-transform group-hover:scale-110",s.bg),children:(0,e.jsx)(s.icon,{className:l("h-6 w-6",s.color)})}),(0,e.jsxs)("div",{children:[(0,e.jsx)("p",{className:"text-[10px] font-black uppercase tracking-widest text-zinc-400",children:s.label}),(0,e.jsx)("p",{className:"text-3xl font-black text-foreground",children:s.count})]})]})},s.label))}),(0,e.jsxs)("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between border-b border-zinc-200/50 pb-6 dark:border-white/5",children:[(0,e.jsxs)("p",{className:"text-sm font-bold text-zinc-500",children:["Showing ",(0,e.jsx)("span",{className:"text-zinc-900 dark:text-white",children:m.length})," individual reports"]}),(0,e.jsx)("div",{className:"flex items-center gap-3",children:(0,e.jsxs)(D,{value:o,onValueChange:v,children:[(0,e.jsx)(L,{className:"h-11 w-[160px] rounded-xl border-zinc-200/50 bg-white font-bold shadow-sm dark:border-white/5 dark:bg-zinc-900",children:(0,e.jsx)(E,{})}),(0,e.jsxs)(q,{className:"rounded-xl dark:bg-zinc-900",children:[(0,e.jsx)(d,{value:"all",children:"All Status"}),(0,e.jsx)(d,{value:"pending",children:"Pending"}),(0,e.jsx)(d,{value:"resolved",children:"Resolved"}),(0,e.jsx)(d,{value:"dismissed",children:"Dismissed"})]})]})})]}),m.length===0?(0,e.jsxs)("div",{className:"flex flex-col items-center justify-center rounded-[3rem] border-2 border-dashed border-zinc-200 bg-white py-24 dark:border-white/5 dark:bg-zinc-900/20",children:[(0,e.jsxs)("div",{className:"relative",children:[(0,e.jsx)("div",{className:"absolute inset-0 bg-emerald-500/20 blur-3xl rounded-full"}),(0,e.jsx)("div",{className:"relative rounded-[2rem] bg-emerald-500/10 p-8 shadow-inner",children:(0,e.jsx)(u,{className:"h-12 w-12 text-emerald-600 dark:text-emerald-400"})})]}),(0,e.jsx)("h3",{className:"mt-8 text-2xl font-black text-zinc-900 dark:text-white",children:"All Clear"}),(0,e.jsx)("p",{className:"mt-2 max-w-[280px] text-center font-medium text-zinc-500",children:"Great job! No reports are currently waiting for your attention."})]}):(0,e.jsx)("div",{className:"grid gap-4 xl:grid-cols-2",children:m.map(s=>(0,e.jsxs)("div",{className:"group relative flex flex-col overflow-hidden rounded-[2.5rem] border border-zinc-200/50 bg-white shadow-sm transition-all duration-300 hover:border-violet-500/30 hover:shadow-xl hover:shadow-violet-500/5 dark:border-white/5 dark:bg-zinc-900/50 dark:hover:bg-zinc-900",children:[(0,e.jsxs)("div",{className:"flex items-center justify-between p-6 pb-4",children:[(0,e.jsxs)("div",{className:"flex items-center gap-3",children:[(0,e.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-2xl bg-rose-500/10 shadow-inner",children:(0,e.jsx)($,{className:"h-6 w-6 text-rose-600 dark:text-rose-400"})}),(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{className:"flex items-center gap-2",children:[(0,e.jsx)("span",{className:"text-[10px] font-black uppercase tracking-widest text-zinc-400",children:"Target Type"}),(0,e.jsx)("span",{className:"rounded-lg bg-zinc-100 px-2 py-0.5 text-[10px] font-black uppercase tracking-wider text-zinc-600 dark:bg-white/5 dark:text-zinc-400",children:s.target_type||"unknown"})]}),(0,e.jsxs)("h3",{className:"text-lg font-black text-zinc-900 dark:text-white leading-tight mt-0.5",children:["Report by @",s.reporter?.username||"anonymous"]})]})]}),(0,e.jsx)("div",{className:"hidden sm:block",children:(0,e.jsx)("span",{className:l("inline-flex items-center gap-1.5 rounded-full px-4 py-1.5 text-[11px] font-black uppercase tracking-wider shadow-sm transition-colors",s.status==="pending"?"bg-amber-500 text-white shadow-amber-500/20":s.status==="resolved"?"bg-emerald-500 text-white shadow-emerald-500/20":"bg-zinc-500 text-white shadow-zinc-500/20"),children:s.status})})]}),(0,e.jsxs)("div",{className:"px-6 pb-6 flex-1",children:[(0,e.jsxs)("div",{className:"rounded-3xl bg-zinc-50/50 p-5 dark:bg-white/5 border border-zinc-100 dark:border-white/5",children:[(0,e.jsx)("p",{className:"text-[11px] font-black uppercase tracking-[0.15em] text-zinc-400 mb-2",children:"Reason"}),(0,e.jsxs)("p",{className:"text-[15px] font-medium text-zinc-700 dark:text-zinc-300 leading-relaxed italic",children:['"',s.reason||"No additional context provided.",'"']})]}),(0,e.jsxs)("div",{className:"mt-4 flex items-center justify-between text-xs font-bold text-zinc-400 px-2",children:[(0,e.jsxs)("span",{children:["ID: ",s.target_id.slice(0,12),"..."]}),(0,e.jsx)("span",{children:A(s.created_at)})]})]}),(0,e.jsx)("div",{className:"mt-auto border-t border-zinc-100 bg-zinc-50/30 p-4 px-6 dark:border-white/5 dark:bg-zinc-950/20",children:(0,e.jsxs)("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[(0,e.jsxs)("button",{onClick:()=>w(s),className:"flex h-11 items-center justify-center gap-2 rounded-2xl border border-zinc-200 bg-white px-6 text-sm font-black text-zinc-700 shadow-sm transition-all hover:bg-zinc-100 active:scale-95 dark:border-white/5 dark:bg-zinc-900 dark:text-zinc-300 dark:hover:bg-zinc-800",children:[(0,e.jsx)(C,{className:"h-4 w-4"}),"Inspect Content"]}),s.status==="pending"&&(0,e.jsxs)("div",{className:"flex items-center gap-2",children:[(0,e.jsx)("button",{onClick:()=>c.updateReportStatus({reportId:s.id,status:"dismissed"}),className:"flex-1 sm:flex-none h-11 items-center justify-center rounded-2xl px-5 text-sm font-black text-zinc-500 transition-colors hover:text-zinc-900 dark:hover:text-white active:scale-95",disabled:x===s.id,children:"Dismiss"}),(0,e.jsxs)("button",{onClick:()=>k(s),disabled:x===s.id,className:"flex-1 sm:flex-none flex h-11 items-center justify-center gap-2 rounded-2xl bg-rose-600 px-6 text-sm font-black text-white shadow-lg shadow-rose-500/20 transition-all hover:bg-rose-700 active:scale-95 disabled:opacity-50",children:[x===s.id?(0,e.jsx)(R,{className:"h-4 w-4 animate-spin"}):(0,e.jsx)(S,{className:"h-4 w-4"}),"Resolve"]})]})]})})]},s.id))})]})},J=G;export{J as default};

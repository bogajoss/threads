import{n as D}from"./rolldown-runtime-2JzG8er9.js";import{s as I,u as V,w as W}from"./framework-pMVb9Z5_.js";import"./database-ApDMvJcm.js";import{Ut as O,Xt as q,jt as X,pt as Z}from"./ui-libs-C0jnt0Gl.js";import{O as G,Z as F,_ as J,b as B,ft as K,j as R,r as Y,x as ee,y as se}from"./index-BjxKXbPZ.js";import{n as te}from"./post-Da5d_QSO.js";import"./linkify-fXGRsD3N.js";import{s as ae}from"./hooks-BgL0g9tL.js";var re=I(),he=D(W(),1),s=D(V(),1),ie=()=>{const e=(0,re.c)(51),{addToast:P}=K(),{currentUser:i,searchQuery:r,setSearchQuery:n,activeTab:a,setActiveTab:T,isCreateModalOpen:M,setIsCreateModalOpen:l,communitiesData:Q,isCommunitiesLoading:A,isFetchingMoreCommunities:g,hasMoreCommunities:S,postsData:j,isPostsLoading:k,isFetchingMorePosts:N,hasMorePosts:L,filteredCommunities:z,handleCommunityClick:U,loadCommunities:$,loadPosts:E,navigate:_}=ae();if((A||k)&&!Q.length&&!j.length){let t;return e[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,s.jsx)("div",{className:"border-y md:border border-zinc-100 dark:border-zinc-800 bg-white dark:bg-black rounded-none md:rounded-xl overflow-hidden min-h-screen",children:[1,2,3].map(ne)}),e[0]=t):t=e[0],t}let o;e[1]!==n?(o=()=>n(""),e[1]=n,e[2]=o):o=e[2];let d;e[3]!==r||e[4]!==n||e[5]!==o?(d=(0,s.jsx)(G,{value:r,onChange:n,onClear:o,placeholder:"Search communities or posts...",className:"flex-1"}),e[3]=r,e[4]=n,e[5]=o,e[6]=d):d=e[6];let c;e[7]!==i||e[8]!==l?(c=i&&(0,s.jsx)("button",{onClick:()=>l(!0),className:"size-11 rounded-xl bg-zinc-950 dark:bg-white text-white dark:text-zinc-950 flex items-center justify-center hover:scale-105 active:scale-95 transition-all shadow-sm shrink-0",title:"Create Community",children:(0,s.jsx)(X,{size:22,strokeWidth:3})}),e[7]=i,e[8]=l,e[9]=c):c=e[9];let m;e[10]!==d||e[11]!==c?(m=(0,s.jsxs)("div",{className:"p-4 flex gap-2",children:[d,c]}),e[10]=d,e[11]=c,e[12]=m):m=e[12];let C;e[13]===Symbol.for("react.memo_cache_sentinel")?(C=(0,s.jsxs)(B,{value:"communities",className:"h-full rounded-none border-b-2 border-transparent data-[state=active]:border-violet-600 data-[state=active]:bg-transparent px-2 font-bold text-zinc-500 data-[state=active]:text-zinc-950 dark:data-[state=active]:text-white transition-all gap-2",children:[(0,s.jsx)(Z,{size:18}),"Communities"]}),e[13]=C):C=e[13];let y;e[14]===Symbol.for("react.memo_cache_sentinel")?(y=(0,s.jsxs)(se,{className:"w-full h-12 bg-transparent p-0 rounded-none border-none gap-8 px-4",children:[C,(0,s.jsxs)(B,{value:"posts",className:"h-full rounded-none border-b-2 border-transparent data-[state=active]:border-violet-600 data-[state=active]:bg-transparent px-2 font-bold text-zinc-500 data-[state=active]:text-zinc-950 dark:data-[state=active]:text-white transition-all gap-2",children:[(0,s.jsx)(q,{size:18}),"Posts"]})]}),e[14]=y):y=e[14];let u;e[15]!==a||e[16]!==T?(u=(0,s.jsx)("div",{className:"px-1 border-t border-zinc-100 dark:border-zinc-800",children:(0,s.jsx)(J,{value:a,onValueChange:T,className:"w-full",children:y})}),e[15]=a,e[16]=T,e[17]=u):u=e[17];let x;e[18]!==m||e[19]!==u?(x=(0,s.jsxs)("div",{className:"sticky top-0 bg-white/90 dark:bg-black/90 backdrop-blur-md z-10 border-b border-zinc-100 dark:border-zinc-800",children:[m,u]}),e[18]=m,e[19]=u,e[20]=x):x=e[20];let f;e[21]!==a||e[22]!==z||e[23]!==U||e[24]!==S||e[25]!==g||e[26]!==$?(f=a==="communities"&&(0,s.jsxs)("div",{className:"divide-y divide-zinc-100 dark:divide-zinc-800",children:[z.length>0?z.map(t=>(0,s.jsx)(R,{profile:t,onUserClick:U,isCommunity:!0},t.handle)):(0,s.jsx)("div",{className:"p-20 text-center text-zinc-500",children:(0,s.jsx)("p",{className:"font-bold",children:"No communities found"})}),S&&z.length>0&&(0,s.jsx)("div",{className:"p-6 flex justify-center border-t border-zinc-100 dark:border-zinc-800",children:(0,s.jsxs)(F,{variant:"secondary",className:"w-full max-w-xs",onClick:()=>$(!0),disabled:g,children:[g&&(0,s.jsx)(O,{size:18,className:"animate-spin mr-2"}),"Load more"]})})]}),e[21]=a,e[22]=z,e[23]=U,e[24]=S,e[25]=g,e[26]=$,e[27]=f):f=e[27];let h;e[28]!==a||e[29]!==P||e[30]!==i||e[31]!==L||e[32]!==N||e[33]!==k||e[34]!==E||e[35]!==_||e[36]!==j||e[37]!==r?(h=a==="posts"&&(0,s.jsx)("div",{className:"divide-y divide-zinc-100 dark:divide-zinc-800",children:j.length>0?(0,s.jsxs)(s.Fragment,{children:[j.map(t=>(0,s.jsx)(te,{currentUser:i,showToast:P,...t,onClick:()=>_(`/post/${t.id}`),onUserClick:H=>_(`/u/${H}`)},t.feed_id||t.id)),L&&(0,s.jsx)("div",{className:"p-6 flex justify-center border-t border-zinc-100 dark:border-zinc-800",children:(0,s.jsxs)(F,{variant:"secondary",className:"w-full max-w-xs",onClick:()=>E(!0),disabled:N,children:[N&&(0,s.jsx)(O,{size:18,className:"animate-spin mr-2"}),"Load more"]})})]}):k?(0,s.jsx)("div",{className:"p-20 flex justify-center",children:(0,s.jsx)(O,{className:"animate-spin text-violet-500",size:32})}):(0,s.jsxs)("div",{className:"p-20 text-center text-zinc-500 flex flex-col items-center gap-3",children:[(0,s.jsx)("div",{className:"p-4 bg-zinc-50 dark:bg-zinc-900 rounded-full",children:(0,s.jsx)(q,{size:32,className:"text-zinc-300"})}),(0,s.jsx)("p",{className:"font-bold",children:r?`No posts found matching "${r}"`:"No posts found"})]})}),e[28]=a,e[29]=P,e[30]=i,e[31]=L,e[32]=N,e[33]=k,e[34]=E,e[35]=_,e[36]=j,e[37]=r,e[38]=h):h=e[38];let b;e[39]!==f||e[40]!==h?(b=(0,s.jsxs)("div",{className:"min-h-screen",children:[f,h]}),e[39]=f,e[40]=h,e[41]=b):b=e[41];let p;e[42]!==l?(p=()=>l(!1),e[42]=l,e[43]=p):p=e[43];let v;e[44]!==M||e[45]!==p?(v=(0,s.jsx)(Y,{isOpen:M,onClose:p}),e[44]=M,e[45]=p,e[46]=v):v=e[46];let w;return e[47]!==b||e[48]!==v||e[49]!==x?(w=(0,s.jsxs)("div",{className:"border-y md:border border-zinc-100 dark:border-zinc-800 bg-white dark:bg-black rounded-none md:rounded-xl overflow-hidden min-h-screen pb-20 shadow-sm",children:[x,b,v]}),e[47]=b,e[48]=v,e[49]=x,e[50]=w):w=e[50],w},be=ie;function ne(e){return(0,s.jsx)(ee,{},e)}export{be as default};

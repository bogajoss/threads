import{n as N}from"./rolldown-runtime-2JzG8er9.js";import{$t as O,Hn as o,Jt as z,Qt as U,Rr as $,Rt as A,Xt as E,Yn as I,bn as M,mn as q,or as V,wn as w,yn as H}from"./framework-BnK0ORzS.js";import"./database-BXMLJMrA.js";import"./vendor-CLhjLqcy.js";import{Bt as v,H as j,_ as J,at as Q,g as X,h as u,it as Y,k,m as Z,p as G,st as K}from"./index-CY8WzFj7.js";var h=N($(),1),e=N(V(),1),W=()=>{const{currentUser:t,logout:y}=K(),{darkMode:l,toggleDarkMode:S,fontSize:P,setFontSize:C,dataSaver:c,setDataSaver:D}=Q(),{addToast:a}=Y(),[f,d]=(0,h.useState)(!1),[r,x]=(0,h.useState)({newPassword:"",confirmPassword:""}),[p,i]=(0,h.useState)(!1),g=async()=>{try{await y(),a("Logged out successfully")}catch(s){console.error("Logout error:",s),a("Failed to logout")}},_=async s=>{if(s.preventDefault(),r.newPassword!==r.confirmPassword){a("Passwords do not match","error");return}if(r.newPassword.length<6){a("Password must be at least 6 characters","error");return}i(!0);try{const{error:n}=await v.auth.updateUser({password:r.newPassword});if(n)throw n;a("Password updated successfully!"),d(!1),x({newPassword:"",confirmPassword:""})}catch(n){console.error("Password update error:",n),a(n.message||"Failed to update password","error")}finally{i(!1)}},L=async()=>{if(t?.email){i(!0);try{const{error:s}=await v.auth.resetPasswordForEmail(t.email,{redirectTo:`${window.location.origin}/settings?type=recovery`});if(s)throw s;a("Password reset email sent!")}catch(s){console.error("Reset password error:",s),a(s.message||"Failed to send reset email","error")}finally{i(!1)}}},R=()=>{["seenStories","font-size","data-saver","theme"].forEach(s=>localStorage.removeItem(s)),a("Cache cleared! Reloading..."),setTimeout(()=>window.location.reload(),1500)},T=async()=>{i(!0);try{const s={user:{id:t.id,handle:t.handle,name:t.name,email:t.email},exportDate:new Date().toISOString(),note:"This is a mock export of your Sysm data."},n=new Blob([JSON.stringify(s,null,2)],{type:"application/json"}),b=URL.createObjectURL(n),m=document.createElement("a");m.href=b,m.download=`sysm-data-${t.handle}.json`,m.click(),URL.revokeObjectURL(b),a("Data export started!")}catch{a("Failed to export data","error")}finally{i(!1)}},B=()=>{window.confirm("Are you absolutely sure? This will permanently delete your account and all associated data. This action is irreversible.")&&(a("Account deletion request submitted. Logging out..."),setTimeout(g,2e3))},F=()=>{window.prompt("Please describe the bug you found:")&&a("Bug reported! Thank you for your feedback.")};return t?(0,e.jsxs)("div",{className:"flex flex-col min-h-screen bg-white dark:bg-black md:rounded-xl md:border border-zinc-100 dark:border-zinc-800",children:[(0,e.jsx)("div",{className:"sticky top-0 z-10 bg-white/80 dark:bg-black/80 backdrop-blur-md p-4 border-b border-zinc-100 dark:border-zinc-800",children:(0,e.jsx)("h2",{className:"text-xl font-bold dark:text-white",children:"Settings"})}),(0,e.jsxs)("div",{className:"p-4 space-y-6 max-w-2xl mx-auto w-full pb-20 mt-4",children:[(0,e.jsxs)("section",{className:"space-y-4",children:[(0,e.jsx)("h3",{className:"text-sm font-bold text-zinc-500 uppercase tracking-wider px-2",children:"Account Security"}),(0,e.jsxs)("div",{className:"bg-zinc-50 dark:bg-zinc-900 rounded-2xl overflow-hidden divide-y divide-zinc-200 dark:divide-zinc-800",children:[(0,e.jsxs)("button",{onClick:()=>d(!f),className:"w-full px-4 py-4 flex items-center gap-3 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors text-left",children:[(0,e.jsx)(M,{size:20,className:"text-zinc-500"}),(0,e.jsx)("span",{className:"flex-1 font-medium dark:text-zinc-200",children:"Change Password"}),(0,e.jsx)(o,{size:16,className:"text-zinc-400"})]}),f&&(0,e.jsxs)("form",{onSubmit:_,className:"p-4 space-y-3 bg-white dark:bg-black animate-in fade-in slide-in-from-top-2",children:[(0,e.jsx)(k,{type:"password",placeholder:"New Password",value:r.newPassword,onChange:s=>x({...r,newPassword:s.target.value})}),(0,e.jsx)(k,{type:"password",placeholder:"Confirm Password",value:r.confirmPassword,onChange:s=>x({...r,confirmPassword:s.target.value})}),(0,e.jsxs)("div",{className:"flex gap-2 justify-end",children:[(0,e.jsx)(j,{type:"button",variant:"secondary",onClick:()=>d(!1),children:"Cancel"}),(0,e.jsx)(j,{type:"submit",disabled:p,children:p?"Saving...":"Update Password"})]})]}),(0,e.jsxs)("button",{onClick:L,className:"w-full px-4 py-4 flex items-center gap-3 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors text-left",children:[(0,e.jsx)(O,{size:20,className:"text-zinc-500"}),(0,e.jsx)("span",{className:"flex-1 font-medium dark:text-zinc-200",children:"Reset via Email"}),(0,e.jsx)(o,{size:16,className:"text-zinc-400"})]})]})]}),(0,e.jsxs)("section",{className:"space-y-4",children:[(0,e.jsx)("h3",{className:"text-sm font-bold text-zinc-500 uppercase tracking-wider px-2",children:"Display & Typography"}),(0,e.jsxs)("div",{className:"bg-zinc-50 dark:bg-zinc-900 rounded-2xl overflow-hidden divide-y divide-zinc-200 dark:divide-zinc-800",children:[(0,e.jsxs)("button",{onClick:S,className:"w-full px-4 py-4 flex items-center gap-3 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors text-left",children:[l?(0,e.jsx)(q,{size:20,className:"text-violet-500"}):(0,e.jsx)(E,{size:20,className:"text-amber-500"}),(0,e.jsx)("span",{className:"flex-1 font-medium dark:text-zinc-200",children:"Dark Mode"}),(0,e.jsx)("div",{className:`w-10 h-6 rounded-full relative transition-colors ${l?"bg-violet-600":"bg-zinc-300"}`,children:(0,e.jsx)("div",{className:`absolute top-1 size-4 bg-white rounded-full transition-all ${l?"left-5":"left-1"}`})})]}),(0,e.jsxs)("div",{className:"px-4 py-4 flex items-center justify-between gap-3",children:[(0,e.jsxs)("div",{className:"flex items-center gap-3",children:[(0,e.jsx)(U,{size:20,className:"text-zinc-500"}),(0,e.jsx)("span",{className:"font-medium dark:text-zinc-200",children:"Font Size"})]}),(0,e.jsxs)(G,{value:P,onValueChange:C,children:[(0,e.jsx)(X,{className:"w-[140px] bg-zinc-100 dark:bg-zinc-800 border-none font-bold text-violet-600 dark:text-violet-400 capitalize transition-all hover:bg-zinc-200 dark:hover:bg-zinc-700",children:(0,e.jsx)(J,{placeholder:"Select"})}),(0,e.jsxs)(Z,{className:"bg-white dark:bg-zinc-900 border-zinc-100 dark:border-zinc-800 shadow-2xl rounded-xl p-1",children:[(0,e.jsx)(u,{value:"small",className:"py-2.5 rounded-lg focus:bg-zinc-50 dark:focus:bg-zinc-800 focus:text-violet-600 font-medium cursor-pointer",children:"Small"}),(0,e.jsx)(u,{value:"base",className:"py-2.5 rounded-lg focus:bg-zinc-50 dark:focus:bg-zinc-800 focus:text-violet-600 font-medium cursor-pointer",children:"Default"}),(0,e.jsx)(u,{value:"large",className:"py-2.5 rounded-lg focus:bg-zinc-50 dark:focus:bg-zinc-800 focus:text-violet-600 font-medium cursor-pointer",children:"Large"})]})]})]})]})]}),(0,e.jsxs)("section",{className:"space-y-4",children:[(0,e.jsx)("h3",{className:"text-sm font-bold text-zinc-500 uppercase tracking-wider px-2",children:"Data & Storage"}),(0,e.jsxs)("div",{className:"bg-zinc-50 dark:bg-zinc-900 rounded-2xl overflow-hidden divide-y divide-zinc-200 dark:divide-zinc-800",children:[(0,e.jsxs)("button",{onClick:()=>D(!c),className:"w-full px-4 py-4 flex items-center gap-3 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors text-left",children:[(0,e.jsx)(A,{size:20,className:"text-zinc-500"}),(0,e.jsx)("span",{className:"flex-1 font-medium dark:text-zinc-200",children:"Data Saver"}),(0,e.jsx)("div",{className:`w-10 h-6 rounded-full relative transition-colors ${c?"bg-emerald-600":"bg-zinc-300"}`,children:(0,e.jsx)("div",{className:`absolute top-1 size-4 bg-white rounded-full transition-all ${c?"left-5":"left-1"}`})})]}),(0,e.jsxs)("button",{onClick:R,className:"w-full px-4 py-4 flex items-center gap-3 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors text-left",children:[(0,e.jsx)(z,{size:20,className:"text-zinc-500"}),(0,e.jsx)("span",{className:"flex-1 font-medium dark:text-zinc-200",children:"Clear Local Cache"}),(0,e.jsx)(o,{size:16,className:"text-zinc-400"})]}),(0,e.jsxs)("button",{onClick:T,className:"w-full px-4 py-4 flex items-center gap-3 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors text-left",children:[(0,e.jsx)(w,{size:20,className:"text-zinc-500"}),(0,e.jsx)("span",{className:"flex-1 font-medium dark:text-zinc-200",children:"Download My Data (Export)"}),(0,e.jsx)(o,{size:16,className:"text-zinc-400"})]})]})]}),(0,e.jsxs)("section",{className:"space-y-4",children:[(0,e.jsx)("h3",{className:"text-sm font-bold text-zinc-500 uppercase tracking-wider px-2",children:"Support"}),(0,e.jsxs)("div",{className:"bg-zinc-50 dark:bg-zinc-900 rounded-2xl overflow-hidden divide-y divide-zinc-200 dark:divide-zinc-800",children:[(0,e.jsxs)("button",{onClick:F,className:"w-full px-4 py-4 flex items-center gap-3 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors text-left",children:[(0,e.jsx)(I,{size:20,className:"text-zinc-500"}),(0,e.jsx)("span",{className:"flex-1 font-medium dark:text-zinc-200",children:"Report a Bug"}),(0,e.jsx)(o,{size:16,className:"text-zinc-400"})]}),(0,e.jsxs)("div",{className:"px-4 py-4 flex items-center gap-3",children:[(0,e.jsx)(w,{size:20,className:"text-zinc-500"}),(0,e.jsx)("span",{className:"flex-1 font-medium dark:text-zinc-200",children:"Version"}),(0,e.jsx)("span",{className:"text-zinc-500",children:"1.0.0 (Beta)"})]})]})]}),(0,e.jsx)("section",{className:"space-y-4 pt-4",children:(0,e.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,e.jsxs)("button",{onClick:g,className:"w-full bg-zinc-100 dark:bg-zinc-900 text-zinc-900 dark:text-zinc-100 p-4 rounded-2xl font-bold flex items-center justify-center gap-2 hover:bg-zinc-200 dark:hover:bg-zinc-800 transition-colors shadow-sm",children:[(0,e.jsx)(H,{size:20}),"Log Out"]}),(0,e.jsxs)("button",{onClick:B,className:"w-full bg-rose-50 dark:bg-rose-900/10 text-rose-600 dark:text-rose-500 p-4 rounded-2xl font-bold flex items-center justify-center gap-2 border border-rose-100 dark:border-rose-900/20 hover:bg-rose-100 dark:hover:bg-rose-900/40 transition-colors",children:[(0,e.jsx)(z,{size:20}),"Delete Account Permanently"]})]})}),(0,e.jsx)("div",{className:"text-center text-xs text-zinc-400 py-4 pb-10",children:"Sysm Â© 2026. Decentralized & Open Source."})]})]}):(0,e.jsx)("div",{className:"flex flex-col items-center justify-center p-10 text-center",children:(0,e.jsx)("p",{className:"text-zinc-500",children:"Please login to view settings."})})},ne=W;export{ne as default};

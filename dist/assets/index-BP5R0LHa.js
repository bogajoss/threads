import{a as e}from"./rolldown-runtime-DDUpfMIz.js";import{$ as t,A as n,B as r,C as i,D as a,E as o,F as s,G as c,H as l,I as u,J as d,K as f,L as p,M as m,N as h,O as g,P as _,Q as v,R as y,S as b,T as x,U as S,V as C,W as w,X as T,Y as E,Z as D,_ as O,a as k,at as A,b as j,c as M,d as N,et as P,f as F,g as I,h as L,i as R,it as z,j as B,k as V,l as H,m as U,n as W,nt as ee,o as te,ot as ne,p as re,q as ie,r as ae,rt as oe,s as se,st as ce,t as le,tt as G,u as ue,v as de,w as fe,x as pe,y as me,z as he}from"./react-CLNopo60.js";import{t as ge}from"./query-B90BCAvF.js";import{t as _e}from"./supabase-CK4_smEw.js";import{t as ve}from"./vendor-Bsb6gq4c.js";(function(){let e=document.createElement(`link`).relList;if(e&&e.supports&&e.supports(`modulepreload`))return;for(let e of document.querySelectorAll(`link[rel="modulepreload"]`))n(e);new MutationObserver(e=>{for(let t of e)if(t.type===`childList`)for(let e of t.addedNodes)e.tagName===`LINK`&&e.rel===`modulepreload`&&n(e)}).observe(document,{childList:!0,subtree:!0});function t(e){let t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin===`use-credentials`?t.credentials=`include`:e.crossOrigin===`anonymous`?t.credentials=`omit`:t.credentials=`same-origin`,t}function n(e){if(e.ep)return;e.ep=!0;let n=t(e);fetch(e.href,n)}})();var ye=ne(),K=e(ce(),1);const q=_e(`https://dbkcedktqhueqnulnosq.supabase.co`,`eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRia2NlZGt0cWh1ZXFudWxub3NxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njg5NzE1NTQsImV4cCI6MjA4NDU0NzU1NH0.m_Tv-H7o5mL1Nac6TH-S1JkS1x7ZN1AK_4Mt1hZlkvU`),be=e=>e?{id:e.id,handle:e.username,name:e.display_name,avatar:e.avatar_url||`https://static.hey.xyz/images/brands/lens.svg`,cover:e.cover_url||`https://static.hey.xyz/images/hero.webp`,verified:e.is_verified,bio:e.bio,location:e.location,website:e.website,follower_count:e.follower_count||0,following_count:e.following_count||0}:null,xe=e=>e?{...e,stats:{comments:e.comments_count||0,likes:e.likes_count||0,collects:e.collects_count||0,mirrors:e.mirrors_count||0},user:be(e.user),timeAgo:new Date(e.created_at).toLocaleDateString()}:null,Se=e=>e?{...e,user:e.actor?.username,avatar:e.actor?.avatar_url||`https://static.hey.xyz/images/brands/lens.svg`}:null,Ce=e=>e?{...e,media:e.media_url,user:be(e.user)}:null,we=(e,t)=>{let n=(e.other_participants?.find(e=>e.user_id!==t)||e.other_participants?.[0])?.user;return{id:e.conversation.id,handle:n?.username,user:be(n),lastMessage:`Open to see messages`,time:new Date(e.conversation.last_message_at).toLocaleTimeString([],{hour:`2-digit`,minute:`2-digit`}),unread:0}},Te=async(e,t={})=>{if(!e.type.startsWith(`image/`))return e;let n={maxSizeMB:1,maxWidthOrHeight:1920,useWebWorker:!0,initialQuality:.8,...t};try{let t=await ve(e,n);return console.log(`Original size: ${(e.size/1024/1024).toFixed(2)} MB`),console.log(`Compressed size: ${(t.size/1024/1024).toFixed(2)} MB`),t}catch(t){return console.error(`Image compression failed:`,t),e}},Ee=async(e,t=`media`)=>{let n=e;e.type.startsWith(`image/`)&&(n=await Te(e));let r=e.name.split(`.`).pop(),i=`${`${Math.random()}-${Date.now()}.${r}`}`,{data:a,error:o}=await q.storage.from(t).upload(i,n);if(o)throw o;let{data:{publicUrl:s}}=q.storage.from(t).getPublicUrl(a.path);return{url:s,name:e.name,type:e.type.startsWith(`image/`)?`image`:e.type.startsWith(`video/`)?`video`:`file`,size:n.size}},De=async()=>{let{data:e,error:t}=await q.from(`posts`).select(`
            *,
            user:users!user_id (
                id,
                username,
                display_name,
                avatar_url,
                is_verified,
                bio,
                location,
                website,
                follower_count,
                following_count
            )
        `).order(`created_at`,{ascending:!1});if(t)throw t;return e.map(xe)},Oe=async e=>{let{data:t,error:n}=await q.from(`posts`).select(`
            *,
            user:users!user_id (
                id,
                username,
                display_name,
                avatar_url,
                is_verified,
                bio,
                location,
                website,
                follower_count,
                following_count
            )
        `).eq(`id`,e).single();if(n)throw n;return xe(t)},ke=async({content:e,media:t=[],type:n=`text`,userId:r,poll:i=null,parentId:a=null})=>{let{data:o,error:s}=await q.from(`posts`).insert([{user_id:r,content:e,media:t,type:n,poll:i,parent_id:a,created_at:new Date().toISOString()}]).select(`
            *,
            user:users!user_id (
                id,
                username,
                display_name,
                avatar_url,
                is_verified
            )
        `);if(s)throw s;return xe(o[0])},Ae=async()=>{let{data:e,error:t}=await q.from(`users`).select(`*`);if(t)throw t;return e.reduce((e,t)=>{let n=be(t);return e[n.handle]=n,e},{})},je=async e=>{let{data:t,error:n}=await q.from(`users`).select(`*`).eq(`username`,e).maybeSingle();if(n)throw n;return be(t)},Me=async(e,t)=>{let{error:n}=await q.from(`users`).update({display_name:t.name,username:t.handle,avatar_url:t.avatar,bio:t.bio,cover_url:t.cover,website:t.website,location:t.location}).eq(`id`,e);if(n)throw n},Ne=async e=>{if(!e)return[];let{data:t,error:n}=await q.from(`notifications`).select(`
            *,
            actor:users!actor_id (
                username,
                avatar_url
            )
        `).eq(`recipient_id`,e).order(`created_at`,{ascending:!1});if(n)throw n;return t.map(Se)},Pe=async e=>{if(!e)return[];let{data:t,error:n}=await q.from(`conversation_participants`).select(`
            conversation:conversations (
                id,
                last_message_at
            ),
            other_participants:conversation_participants!inner (
                user_id,
                user:users (
                    id,
                    username,
                    display_name,
                    avatar_url
                )
            )
        `).eq(`user_id`,e);if(n)throw n;return t.map(t=>we(t,e))},Fe=async e=>{let{data:t,error:n}=await q.from(`messages`).select(`*`).eq(`conversation_id`,e).order(`created_at`,{ascending:!0});if(n)throw n;return t},Ie=async(e,t,n)=>{let{data:r,error:i}=await q.from(`messages`).insert([{conversation_id:e,sender_id:t,content:n}]).select();if(i)throw i;return await q.from(`conversations`).update({last_message_at:new Date().toISOString()}).eq(`id`,e),r[0]},Le=async e=>{let{data:t,error:n}=await q.from(`posts`).select(`
            *,
            user:users!user_id (
                id,
                username,
                display_name,
                avatar_url,
                is_verified
            )
        `).eq(`parent_id`,e).order(`created_at`,{ascending:!0});if(n)throw n;return t.map(xe)},Re=async(e,t,n)=>{let{data:r,error:i}=await q.from(`posts`).insert([{parent_id:e,user_id:t,content:n,type:`text`,created_at:new Date().toISOString()}]).select(`
            *,
            user:users!user_id (
                id,
                username,
                display_name,
                avatar_url,
                is_verified
            )
        `);if(i)throw i;return xe(r[0])},ze=async(e,t)=>{let{data:n}=await q.from(`likes`).select(`*`).eq(`post_id`,e).eq(`user_id`,t).maybeSingle();return n?(await q.from(`likes`).delete().eq(`post_id`,e).eq(`user_id`,t),!1):(await q.from(`likes`).insert([{post_id:e,user_id:t}]),!0)},Be=async(e,t)=>{if(!t)return!1;let{data:n}=await q.from(`likes`).select(`*`).eq(`post_id`,e).eq(`user_id`,t).maybeSingle();return!!n},Ve=async(e,t)=>{let{data:n}=await q.from(`follows`).select(`*`).eq(`follower_id`,e).eq(`following_id`,t).maybeSingle();return n?(await q.from(`follows`).delete().eq(`follower_id`,e).eq(`following_id`,t),!1):(await q.from(`follows`).insert([{follower_id:e,following_id:t}]),!0)},He=async(e,t)=>{if(!e)return!1;let{data:n}=await q.from(`follows`).select(`*`).eq(`follower_id`,e).eq(`following_id`,t).maybeSingle();return!!n},Ue=async e=>{let{data:t,error:n}=await q.from(`users`).select(`follower_count, following_count`).eq(`id`,e).maybeSingle();return n||!t?{followers:0,following:0}:{followers:t.follower_count||0,following:t.following_count||0}},We=async()=>{let{data:e,error:t}=await q.from(`stories`).select(`
            *,
            user:users!user_id (
                id,
                username,
                display_name,
                avatar_url,
                is_verified
            )
        `).gt(`expires_at`,new Date().toISOString()).order(`created_at`,{ascending:!1});if(t)throw t;return e.map(Ce)},Ge=async(e,t,n=`image`)=>{let{data:r,error:i}=await q.from(`stories`).insert([{user_id:e,media_url:t,type:n,expires_at:new Date(Date.now()+1440*60*1e3).toISOString()}]).select(`
            *,
            user:users!user_id (
                id,
                username,
                display_name,
                avatar_url,
                is_verified
            )
        `);if(i)throw i;return Ce(r[0])};var Ke={currentUser:{name:`Demo User`,handle:`demouser`,avatar:`https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?w=800&auto=format&fit=crop&q=60&ixlib=rb-4.0.3`,cover:`https://images.unsplash.com/photo-1550684848-fac1c5b4e853?w=1200&auto=format&fit=crop&q=60&ixlib=rb-4.0.3`,bio:`Just exploring the decentralized web.
Building cool things.`,following:`42`,followers:`10`,website:`demo.xyz`,isCurrentUser:!0,verified:!0},profiles:{kolin:{name:`Kolin Din`,handle:`kolin`,avatar:`https://ik.imagekit.io/lens/tr:w-350,h-350/4a67baab97a63fee1b583385e0ae02e87322f415a67e3d6d771edf9fec7cb8d1_aodohgJQ6.webp`,cover:`https://ik.imagekit.io/lens/tr:w-1350,h-350/be11e5e13134f50396c2ce7099922812a611ed00b95d9cf5e461a1aa88d04663_QZK383PW8.webp`,bio:`Minimalism is the key. It's still photography.
kolindin.eth`,following:`226`,followers:`18,968`,website:`art.kolindin.com`,verified:!0},ogunkizmaz:{name:`I'mOK`,handle:`ogunkizmaz`,avatar:`https://ik.imagekit.io/lens/tr:w-100,h-100/292e4b889c83e5b2673076e1d9137c160d5bd2620ada3d4fc83b25f873e6bb26_OXKlfU-fMx.jpeg`,cover:`https://static.hey.xyz/images/hero.webp`,bio:`Painter, tattooist, muralist, digital 2d, 3d artist, web3 addict.`,following:`1.2K`,followers:`5.4K`,website:`hey.xyz`,verified:!0},tereth:{name:`Tereth`,handle:`tereth`,avatar:`https://ik.imagekit.io/lens/tr:w-100,h-100/03174b40d9659f54dfc2c5e0d966eb589dcb9b9189fcdeb5fd7070e6fbcee470_iYnoFCROu.png`,cover:`https://static.hey.xyz/images/hero.webp`,bio:`Web3 enthusiast and explorer.`,following:`300`,followers:`1.5K`,website:`lens.xyz/tereth`,verified:!0},sunshinevendetta:{name:`Sunshine`,handle:`sunshinevendetta`,avatar:`https://ik.imagekit.io/lens/tr:w-100,h-100/3151b50e5ab1743d9dd9de476072af90b615da6ac9dcf15d7b9531ff64ba4e6c_y4E0LWW--.webp`,cover:`https://static.hey.xyz/images/hero.webp`,bio:`Lens Creator. Building cool stuff.`,following:`50`,followers:`500`,verified:!0},nzhouses:{name:`NZ Houses`,handle:`nzhouses`,avatar:`https://ik.imagekit.io/lens/tr:w-100,h-100/b29bc731a9b0134fdd142c13d5a0ca8dec4fe1ff76c2aa61753dfcf5e870853f_lSPVVK37H.webp`,cover:`https://static.hey.xyz/images/hero.webp`,bio:`Showcasing NZ architecture`,following:`10`,followers:`2K`},ArchitectureDesign:{type:`community`,name:`ArchitectureDesign`,handle:`ArchitectureDesign`,avatar:`https://api.grove.storage/c8c829130b1bd660b7489a813e4254054df983a2eeaeedf74c1b43a0bfcdcca6`,cover:`https://api.grove.storage/e92983306252d2fabd90e490c1608979b66f7da29f461235c8c97627b2427f61`,bio:`Exploring the beauty in Architecture + Design from around the globe ~`,members:`164`,verified:!0},demouser:{name:`Demo User`,handle:`demouser`,avatar:`https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?w=800&auto=format&fit=crop&q=60&ixlib=rb-4.0.3`,cover:`https://images.unsplash.com/photo-1550684848-fac1c5b4e853?w=1200&auto=format&fit=crop&q=60&ixlib=rb-4.0.3`,bio:`Just exploring the decentralized web.
Building cool things.`,following:`42`,followers:`10`,website:`demo.xyz`,isCurrentUser:!0,verified:!0}},posts:[{id:`h1`,type:`text`,userHandle:`sunshinevendetta`,timeAgo:`1d`,content:``,contentClass:`text-2xl`,media:{type:`video`,poster:`https://ik.imagekit.io/lens/b550a05214325a2c03e0e145502375f6ba2934137cd2ee1fc7d6869a62380cc4_CEkJ1-VSu.jpeg`,duration:`0:15`},stats:{comments:5,likes:40,collects:2,tips:1,mirrors:4},timestamp:`10:00 AM 路 Jan 19, 2026`,category:`video`},{id:`p_poll_1`,type:`poll`,userHandle:`kolin`,timeAgo:`1h`,content:`What is your favorite frontend framework?`,contentClass:`text-lg font-medium mb-2`,poll:{options:[{id:1,text:`React`,votes:45},{id:2,text:`Vue`,votes:20},{id:3,text:`Svelte`,votes:15},{id:4,text:`Angular`,votes:10}],totalVotes:90},stats:{comments:12,likes:85,collects:5,tips:2,mirrors:3},timestamp:`9:00 AM 路 Jan 21, 2026`,category:`text`},{id:`h2`,type:`text`,userHandle:`tereth`,timeAgo:`2d`,content:`Great post from @inferenco on how they are using @pond3r to get their own Web3 Intel ヰ`,quotedPost:{user:{handle:`inferenco`,avatar:`https://ik.imagekit.io/lens/tr:w-100,h-100/d428fc9beb7d8d4b434f03a25865836c3df8a0d8a61589a2816cbd08317d419c_iDySmGR2Z.webp`},time:`2d`,content:`Automated Crypto Intelligence Reports: Your AI-Powered Market Analyst - fountain.ink/p/inferenco/auto...`,link:`fountain.ink/p/inferenco/auto...`},stats:{comments:2,likes:17,collects:1,tips:1,mirrors:8},timestamp:`4:20 PM 路 Jan 18, 2026`,category:`text`},{id:`e1`,type:`repost`,repostedBy:{name:`Kolin Din`,handle:`kolin`},userHandle:`nzhouses`,timeAgo:`Jan 13`,content:`27 Nugent Street
 2024, Auckland
art.kolindin.com/27-nugent-st...`,media:{type:`image`,src:`https://ik.imagekit.io/lens/tr:w-1000/6d06a47e1042365b20fbed23f6d462a696b7dfde4f52d2597040c1c660cb5939_ZNihGyWE8.jpeg`},stats:{comments:2,likes:35,collects:0,tips:1,mirrors:0},timestamp:`1:00 AM 路 Jan 20, 2026`,category:`images`},{id:`e2`,type:`image`,userHandle:`kolin`,timeAgo:`6h`,content:`Facing incomprehensible.
 2022`,media:{type:`image`,src:`https://ik.imagekit.io/lens/tr:w-1000/9f44178f7517e026ef69ef4294060209be75560eda610b0b1257c1af66f9ff5d_zCIEf-sum.jpeg`},stats:{comments:2,likes:35,collects:5,tips:1,mirrors:3},timestamp:`4:00 AM 路 Jan 20, 2026`,category:`images`},{id:`e4`,type:`image`,userHandle:`ogunkizmaz`,timeAgo:`2d`,content:`gM!锔`,media:{type:`image`,src:`https://ik.imagekit.io/lens/tr:w-1000/1bc475132a2c09576840b15a4ff0985a4098d8406080d7baf29c062368b168d4_27BORIvbR.jpeg`},stats:{comments:9,likes:71,collects:12,tips:1,mirrors:10},timestamp:`2:34 PM 路 Jan 18, 2026 路 Edited 路 Orb`,category:`images`},{id:`d1`,type:`text`,userHandle:`demouser`,timeAgo:`Just now`,content:`Hello Hey.xyz! Excited to be here.`,stats:{comments:0,likes:0,collects:0,tips:0,mirrors:0},timestamp:`Now`,category:`text`}],reels:[{id:`r1`,url:`https://assets.mixkit.co/videos/preview/mixkit-tree-branches-in-the-breeze-1188-large.mp4`,userHandle:`kolin`,caption:`Nature vibes  #nature #calm`,song:`Original Audio - kolin`,stats:{likes:1200,comments:45,shares:12}},{id:`r2`,url:`https://assets.mixkit.co/videos/preview/mixkit-waves-in-the-water-1164-large.mp4`,userHandle:`ogunkizmaz`,caption:`Ocean waves  #sea #relax`,song:`Ocean Sounds - Nature`,stats:{likes:850,comments:20,shares:5}}],notifications:[{id:1,type:`like`,user:`kolin`,text:`liked your post`,time:`2m`},{id:2,type:`follow`,user:`ogunkizmaz`,text:`followed you`,time:`1h`},{id:3,type:`mention`,user:`tereth`,text:`mentioned you in a post`,time:`3h`},{id:4,type:`collect`,user:`sunshinevendetta`,text:`collected your post`,time:`5h`}],conversations:[{id:`c1`,userHandle:`kolin`,lastMessage:`Hey, loved your photo!`,time:`2m`,unread:2},{id:`c2`,userHandle:`tereth`,lastMessage:`Did you see the news?`,time:`1h`,unread:0},{id:`c3`,userHandle:`ogunkizmaz`,lastMessage:`Thanks for the follow!`,time:`5h`,unread:0}],chats:{c1:[{id:1,sender:`them`,text:`Hi! How are you?`,time:`10:00 AM`},{id:2,sender:`me`,text:`I'm good, thanks! Just posted some new photos.`,time:`10:05 AM`},{id:3,sender:`them`,text:`Hey, loved your photo!`,time:`10:06 AM`}],c2:[{id:1,sender:`me`,text:`Hey Tereth!`,time:`9:00 AM`},{id:2,sender:`them`,text:`Did you see the news?`,time:`9:30 AM`}],c3:[{id:1,sender:`them`,text:`Thanks for the follow!`,time:`5:00 AM`}]},mockComments:[{id:`c1`,user:{handle:`serjant_ens`,avatar:`https://gw.ipfs-lens.dev/ipfs/bafybeieeyjkiwnsyo37gafyx7ntpl5nbmzptmckjrbexdkenthlx6d7lhy`,context:{name:`orb`,icon:`https://api.grove.storage/296fa244ab7ee9a223efd877acc4689946d86afe1176f5306bc42317586e9429`}},timeAgo:`27m`,content:`hours making a door for`,stats:{comments:null,likes:2,collects:null,showCollect:!1,mirrors:0}},{id:`c2`,user:{handle:`orbbro`,avatar:`https://ik.imagekit.io/lens/tr:w-100,h-100/3d2e90873a33154147e9477caa0108fbbb10a6ffb84ea3008fefce262f90b71d_yWFmGbu6t.jpeg`,context:{name:`orb`,icon:`https://api.grove.storage/296fa244ab7ee9a223efd877acc4689946d86afe1176f5306bc42317586e9429`}},timeAgo:`2d`,content:`gM champ`,stats:{comments:null,likes:1,collects:null,showCollect:!1,mirrors:0}}],trendingTopics:[{tag:`Lens`,posts:`52.4K`},{tag:`Web3`,posts:`12.1K`},{tag:`Art`,posts:`9.8K`},{tag:`Photography`,posts:`5.2K`},{tag:`Tech`,posts:`3.4K`}],stories:[{id:`s1`,user:{handle:`kolin`,avatar:`https://ik.imagekit.io/lens/tr:w-350,h-350/4a67baab97a63fee1b583385e0ae02e87322f415a67e3d6d771edf9fec7cb8d1_aodohgJQ6.webp`},media:`https://images.unsplash.com/photo-1550684848-fac1c5b4e853?w=1200`,type:`image`},{id:`s2`,user:{handle:`ogunkizmaz`,avatar:`https://ik.imagekit.io/lens/tr:w-100,h-100/292e4b889c83e5b2673076e1d9137c160d5bd2620ada3d4fc83b25f873e6bb26_OXKlfU-fMx.jpeg`},media:`https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?w=800`,type:`image`}]},J=e(E(),1),qe=(0,K.createContext)();const Je=({children:e})=>{let[t,n]=(0,K.useState)(null),[r,i]=(0,K.useState)(null),[a,o]=(0,K.useState)(Ke.profiles),[s,c]=(0,K.useState)(!0),l=async e=>{try{let{data:t,error:r}=await q.from(`users`).select(`*`).eq(`id`,e.id).maybeSingle();if(r)throw r;if(t){let e=be(t);n(e),o(t=>({...t,[e.handle]:e}))}else n({id:e.id,email:e.email,name:e.email.split(`@`)[0],handle:e.email.split(`@`)[0],avatar:`https://static.hey.xyz/images/brands/lens.svg`,verified:!1})}catch(e){console.error(`Error fetching user profile:`,e)}finally{c(!1)}};return(0,K.useEffect)(()=>{q.auth.getSession().then(({data:{session:e}})=>{e?l(e.user):c(!1)});let{data:{subscription:e}}=q.auth.onAuthStateChange((e,t)=>{t?l(t.user):(n(null),c(!1))});return()=>e.unsubscribe()},[]),(0,J.jsx)(qe.Provider,{value:{currentUser:t,authMode:r,setAuthMode:i,profiles:a,login:async({email:e,password:t})=>{let{data:n,error:r}=await q.auth.signInWithPassword({email:e,password:t});if(r)throw r;return i(null),n},signup:async({email:e,password:t,username:n,name:r})=>{let{data:{user:a},error:o}=await q.auth.signUp({email:e,password:t,options:{data:{username:n.toLowerCase(),name:r}}});if(o)throw o;return i(null),a},logout:async()=>{await q.auth.signOut(),n(null),i(null)},updateProfile:async e=>{t&&(await Me(t.id,e),await l(t))},getProfileByHandle:async e=>{if(a[e])return a[e];let t=await je(e);return t?(o(n=>({...n,[e]:t})),t):null},loading:s},children:!s&&e})},Y=()=>{let e=(0,K.useContext)(qe);if(!e)throw Error(`useAuth must be used within an AuthProvider`);return e};var Ye=w(),Xe=(0,K.createContext)();const Ze=e=>{let t=(0,Ye.c)(11),{children:n}=e,[r,i]=(0,K.useState)($e),a,o;t[0]===r?(a=t[1],o=t[2]):(a=()=>{localStorage.setItem(`theme`,r?`dark`:`light`),r?document.documentElement.classList.add(`dark`):document.documentElement.classList.remove(`dark`)},o=[r],t[0]=r,t[1]=a,t[2]=o),(0,K.useEffect)(a,o);let s;t[3]===r?s=t[4]:(s=()=>i(!r),t[3]=r,t[4]=s);let c=s,l;t[5]!==r||t[6]!==c?(l={darkMode:r,setDarkMode:i,toggleDarkMode:c},t[5]=r,t[6]=c,t[7]=l):l=t[7];let u;return t[8]!==n||t[9]!==l?(u=(0,J.jsx)(Xe.Provider,{value:l,children:n}),t[8]=n,t[9]=l,t[10]=u):u=t[10],u},Qe=()=>{let e=(0,K.useContext)(Xe);if(!e)throw Error(`useTheme must be used within a ThemeProvider`);return e};function $e(){let e=localStorage.getItem(`theme`);return e===`dark`||!e&&window.matchMedia(`(prefers-color-scheme: dark)`).matches}var et=w(),tt=e=>{let t=(0,et.c)(9),{message:n,type:r,onClose:i}=e,a=r===void 0?`success`:r,o,c;t[0]===i?(o=t[1],c=t[2]):(o=()=>{let e=setTimeout(i,3e3);return()=>clearTimeout(e)},c=[i],t[0]=i,t[1]=o,t[2]=c),(0,K.useEffect)(o,c);let l=`flex items-center gap-3 px-5 py-3.5 rounded-full shadow-xl text-white text-sm font-semibold animate-in slide-in-from-bottom-5 duration-300 border border-white/10 ${a===`error`?`bg-red-600`:`bg-zinc-900 dark:bg-white dark:text-black`}`,d;t[3]===a?d=t[4]:(d=a===`success`?(0,J.jsx)(s,{size:18}):(0,J.jsx)(u,{size:18}),t[3]=a,t[4]=d);let f;return t[5]!==n||t[6]!==l||t[7]!==d?(f=(0,J.jsxs)(`div`,{className:l,children:[d,n]}),t[5]=n,t[6]=l,t[7]=d,t[8]=f):f=t[8],f},nt=w(),rt=(0,K.createContext)();const it=e=>{let t=(0,nt.c)(12),{children:n}=e,r;t[0]===Symbol.for(`react.memo_cache_sentinel`)?(r=[],t[0]=r):r=t[0];let[i,a]=(0,K.useState)(r),o;t[1]===Symbol.for(`react.memo_cache_sentinel`)?(o=(e,t)=>{let n=t===void 0?`success`:t,r=Date.now();a(t=>[...t,{id:r,message:e,type:n}])},t[1]=o):o=t[1];let s=o,c;t[2]===Symbol.for(`react.memo_cache_sentinel`)?(c=e=>{a(t=>t.filter(t=>t.id!==e))},t[2]=c):c=t[2];let l=c,u;t[3]===Symbol.for(`react.memo_cache_sentinel`)?(u={addToast:s},t[3]=u):u=t[3];let d;if(t[4]!==i){let e;t[6]===Symbol.for(`react.memo_cache_sentinel`)?(e=e=>(0,J.jsx)(`div`,{className:`pointer-events-auto`,children:(0,J.jsx)(tt,{message:e.message,type:e.type,onClose:()=>l(e.id)})},e.id),t[6]=e):e=t[6],d=i.map(e),t[4]=i,t[5]=d}else d=t[5];let f;t[7]===d?f=t[8]:(f=(0,J.jsx)(`div`,{className:`fixed bottom-24 md:bottom-10 left-1/2 -translate-x-1/2 z-[60] flex flex-col gap-2 items-center pointer-events-none`,children:d}),t[7]=d,t[8]=f);let p;return t[9]!==n||t[10]!==f?(p=(0,J.jsxs)(rt.Provider,{value:u,children:[n,f]}),t[9]=n,t[10]=f,t[11]=p):p=t[11],p},X=()=>{let e=(0,K.useContext)(rt);if(!e)throw Error(`useToast must be used within a ToastProvider`);return e};var at=(0,K.createContext)();const ot=({children:e})=>{let[t,n]=(0,K.useState)([]),[r,i]=(0,K.useState)(!0),a=async()=>{try{n(await De())}catch(e){console.error(`Failed to load posts:`,e)}finally{i(!1)}};return(0,K.useEffect)(()=>{a();let e=q.channel(`public:posts`).on(`postgres_changes`,{event:`*`,schema:`public`,table:`posts`},()=>{a()}).subscribe();return()=>q.removeChannel(e)},[]),(0,J.jsx)(at.Provider,{value:{posts:t,setPosts:n,addPost:async e=>{let t=await ke(e);return a(),t},getPostById:e=>t.find(t=>t.id===e),getUserPosts:(e,n=`feed`)=>{let r=t.filter(t=>!!(t.user?.handle===e||t.repostedBy&&t.repostedBy.handle===e));return n===`media`?r.filter(e=>e.type===`video`||e.type===`image`||e.media?.length>0):n===`replies`?r.filter(e=>e.parent_id!==null):r},loading:r,refreshPosts:a},children:e})},st=()=>{let e=(0,K.useContext)(at);if(!e)throw Error(`usePosts must be used within a PostProvider`);return e};var ct=w(),lt=(0,K.createContext)();const ut=e=>{let t=(0,ct.c)(9),{children:n}=e,r;t[0]===Symbol.for(`react.memo_cache_sentinel`)?(r={isOpen:!1,images:[],currentIndex:0},t[0]=r):r=t[0];let[i,a]=(0,K.useState)(r),o;t[1]===Symbol.for(`react.memo_cache_sentinel`)?(o=(e,t)=>{let n=t===void 0?0:t;a({isOpen:!0,images:Array.isArray(e)?e:[e],currentIndex:n})},t[1]=o):o=t[1];let s=o,c;t[2]===Symbol.for(`react.memo_cache_sentinel`)?(c=()=>{a(ft)},t[2]=c):c=t[2];let l=c,u;t[3]===Symbol.for(`react.memo_cache_sentinel`)?(u=e=>{a(t=>({...t,currentIndex:e}))},t[3]=u):u=t[3];let d=u,f;t[4]===i?f=t[5]:(f={...i,openLightbox:s,closeLightbox:l,setIndex:d},t[4]=i,t[5]=f);let p;return t[6]!==n||t[7]!==f?(p=(0,J.jsx)(lt.Provider,{value:f,children:n}),t[6]=n,t[7]=f,t[8]=p):p=t[8],p},dt=()=>{let e=(0,K.useContext)(lt);if(!e)throw Error(`useLightbox must be used within a LightboxProvider`);return e};function ft(e){return{...e,isOpen:!1}}var pt=w(),mt=()=>{let e=(0,pt.c)(10),{currentUser:t}=Y(),n,i,o,s,c;e[0]===Symbol.for(`react.memo_cache_sentinel`)?(n={id:`home`,icon:a,path:`/`},i={id:`explore`,icon:_,path:`/explore`},o={id:`reels`,icon:V,path:`/reels`},s={id:`messages`,icon:b,path:`/messages`},c={id:`notifications`,icon:r,path:`/notifications`},e[0]=n,e[1]=i,e[2]=o,e[3]=s,e[4]=c):(n=e[0],i=e[1],o=e[2],s=e[3],c=e[4]);let l=t?`/u/${t.handle}`:`/explore`,u;e[5]===l?u=e[6]:(u=[n,i,o,s,c,{id:`profile`,icon:te,path:l}],e[5]=l,e[6]=u);let d=u,f;e[7]===Symbol.for(`react.memo_cache_sentinel`)?(f=(0,J.jsx)(D,{to:`/`,className:`mb-8 hover:scale-110 transition-transform`,children:(0,J.jsx)(`img`,{src:`https://static.hey.xyz/images/app-icon/0.png`,alt:`Logo`,className:`size-8`})}),e[7]=f):f=e[7];let p;return e[8]===d?p=e[9]:(p=(0,J.jsxs)(`aside`,{className:`sticky top-0 hidden md:flex h-screen w-[68px] flex-col items-center py-5 border-r border-zinc-100 dark:border-zinc-800 shrink-0 bg-white dark:bg-black transition-colors duration-200`,children:[f,(0,J.jsx)(`nav`,{className:`flex flex-col gap-y-4 w-full items-center`,children:d.map(gt)})]}),e[8]=d,e[9]=p),p};function ht(e){let{isActive:t}=e;return`p-2.5 rounded-xl transition-all duration-200 border border-transparent ${t?`text-black dark:text-white bg-zinc-100 dark:bg-zinc-900 border-zinc-200 dark:border-zinc-800`:`text-zinc-500 hover:bg-zinc-50 dark:hover:bg-zinc-900`}`}function gt(e){return(0,J.jsx)(v,{to:e.path,className:ht,children:(0,J.jsx)(e.icon,{size:26,strokeWidth:2.5})},e.id)}var _t=w(),vt=e=>{let t=(0,_t.c)(13),{value:n,onChange:r,onClear:i,placeholder:a}=e,o=a===void 0?`Search...`:a,s;t[0]===Symbol.for(`react.memo_cache_sentinel`)?(s=(0,J.jsx)(re,{size:18,className:`absolute left-4 top-1/2 -translate-y-1/2 text-zinc-400 group-focus-within:text-violet-500 transition-colors`}),t[0]=s):s=t[0];let c;t[1]===r?c=t[2]:(c=e=>r(e.target.value),t[1]=r,t[2]=c);let l;t[3]!==o||t[4]!==c||t[5]!==n?(l=(0,J.jsx)(`input`,{className:`w-full rounded-full border border-zinc-100 dark:border-zinc-800 bg-zinc-50 dark:bg-zinc-900/50 text-zinc-900 dark:text-white px-11 py-2.5 text-sm outline-none focus:border-violet-500 focus:ring-1 focus:ring-violet-500 transition-all`,placeholder:o,value:n,onChange:c}),t[3]=o,t[4]=c,t[5]=n,t[6]=l):l=t[6];let u;t[7]!==i||t[8]!==n?(u=n&&(0,J.jsx)(`button`,{onClick:i,className:`absolute right-4 top-1/2 -translate-y-1/2 text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-200 transition-colors`,children:(0,J.jsx)(k,{size:16})}),t[7]=i,t[8]=n,t[9]=u):u=t[9];let d;return t[10]!==l||t[11]!==u?(d=(0,J.jsxs)(`div`,{className:`relative group w-full`,children:[s,l,u]}),t[10]=l,t[11]=u,t[12]=d):d=t[12],d},yt=w(),bt=e=>{let t=(0,yt.c)(45),{trendingTopics:n}=e,r;t[0]===n?r=t[1]:(r=n===void 0?[]:n,t[0]=n,t[1]=r);let i=r,{currentUser:a,setAuthMode:o}=Y(),{darkMode:s,toggleDarkMode:c}=Qe(),[l,u]=(0,K.useState)(``),d;t[2]===Symbol.for(`react.memo_cache_sentinel`)?(d=[`漏 2026 Hey.xyz`,`Terms`,`Privacy`,`Guidelines`,`Discord`,`Hey`,`GitHub`,`Support`,`Status`],t[2]=d):d=t[2];let f=d,p;t[3]===s?p=t[4]:(p=s?(0,J.jsx)(H,{size:20}):(0,J.jsx)(de,{size:20}),t[3]=s,t[4]=p);let m;t[5]!==p||t[6]!==c?(m=(0,J.jsx)(`button`,{onClick:c,className:`p-3 rounded-full bg-zinc-50 dark:bg-zinc-900 text-zinc-500 dark:text-zinc-400 border border-zinc-100 dark:border-zinc-800 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-all cursor-pointer`,title:`Toggle Theme`,children:p}),t[5]=p,t[6]=c,t[7]=m):m=t[7];let h=m;if(a){let e;t[8]===Symbol.for(`react.memo_cache_sentinel`)?(e=()=>u(``),t[8]=e):e=t[8];let n;t[9]===l?n=t[10]:(n=(0,J.jsx)(`div`,{className:`flex-1`,children:(0,J.jsx)(vt,{value:l,onChange:u,onClear:e})}),t[9]=l,t[10]=n);let r;t[11]!==n||t[12]!==h?(r=(0,J.jsxs)(`div`,{className:`flex items-center gap-3`,children:[n,h]}),t[11]=n,t[12]=h,t[13]=r):r=t[13];let a;t[14]===Symbol.for(`react.memo_cache_sentinel`)?(a=(0,J.jsx)(`h3`,{className:`font-extrabold text-xl mb-4 px-2 text-[--foreground]`,children:`What's happening`}),t[14]=a):a=t[14];let o;t[15]===i?o=t[16]:(o=i.map(xt),t[15]=i,t[16]=o);let s;t[17]===o?s=t[18]:(s=(0,J.jsxs)(`div`,{className:`bg-zinc-50 dark:bg-zinc-900 rounded-2xl p-4 border border-[--border]`,children:[a,(0,J.jsx)(`div`,{className:`flex flex-col gap-1`,children:o})]}),t[17]=o,t[18]=s);let c;t[19]===Symbol.for(`react.memo_cache_sentinel`)?(c=(0,J.jsx)(`div`,{className:`flex flex-wrap gap-x-4 gap-y-2 px-2 text-[13px] text-zinc-500 font-medium pb-5`,children:f.map(St)}),t[19]=c):c=t[19];let d;return t[20]!==s||t[21]!==r?(d=(0,J.jsxs)(`aside`,{className:`sticky top-5 hidden w-[320px] shrink-0 flex-col gap-y-6 lg:flex overflow-y-auto max-h-screen`,children:[r,s,c]}),t[20]=s,t[21]=r,t[22]=d):d=t[22],d}let g,_;t[23]===o?(g=t[24],_=t[25]):(g=(0,J.jsx)(`button`,{onClick:()=>o(`signup`),className:`flex-1 bg-[--card] border border-[--border] py-2.5 rounded-full font-bold text-[--foreground] hover:bg-zinc-50 dark:hover:bg-zinc-900 transition-colors shadow-sm cursor-pointer`,children:`Signup`}),_=()=>o(`login`),t[23]=o,t[24]=g,t[25]=_);let v;t[26]===Symbol.for(`react.memo_cache_sentinel`)?(v=(0,J.jsx)(`img`,{src:`https://static.hey.xyz/images/brands/lens.svg`,alt:``,className:`size-4 filter brightness-0 invert dark:invert-0`}),t[26]=v):v=t[26];let y;t[27]===_?y=t[28]:(y=(0,J.jsxs)(`button`,{onClick:_,className:`flex-1 bg-zinc-950 dark:bg-white text-white dark:text-zinc-950 py-2.5 rounded-full font-bold flex items-center justify-center gap-2 hover:opacity-90 transition-opacity cursor-pointer`,children:[v,`Login`]}),t[27]=_,t[28]=y);let b;t[29]!==g||t[30]!==y||t[31]!==h?(b=(0,J.jsxs)(`div`,{className:`flex gap-3`,children:[g,y,h]}),t[29]=g,t[30]=y,t[31]=h,t[32]=b):b=t[32];let x;t[33]===Symbol.for(`react.memo_cache_sentinel`)?(x=()=>u(``),t[33]=x):x=t[33];let S;t[34]===l?S=t[35]:(S=(0,J.jsx)(vt,{value:l,onChange:u,onClear:x}),t[34]=l,t[35]=S);let C,w;t[36]===Symbol.for(`react.memo_cache_sentinel`)?(C=(0,J.jsxs)(`div`,{className:`relative`,children:[(0,J.jsx)(`div`,{className:`size-16 rounded-full border-4 border-amber-400 border-t-transparent animate-spin duration-[3000ms]`}),(0,J.jsx)(`span`,{className:`absolute inset-0 flex items-center justify-center text-2xl`,children:``})]}),w=(0,J.jsx)(`h3`,{className:`font-extrabold text-lg text-[--foreground] mt-2 leading-tight`,children:`Get your Hey account now!`}),t[36]=C,t[37]=w):(C=t[36],w=t[37]);let T;t[38]===o?T=t[39]:(T=(0,J.jsxs)(`div`,{className:`border border-[--border] rounded-2xl p-8 flex flex-col items-center text-center gap-4 bg-[--card] shadow-sm`,children:[C,w,(0,J.jsx)(`button`,{onClick:()=>o(`signup`),className:`w-full bg-zinc-950 dark:bg-white text-white dark:text-zinc-950 py-2.5 rounded-full font-black text-sm uppercase tracking-wider hover:opacity-90 active:scale-95 transition-all shadow-lg cursor-pointer`,children:`Signup now`})]}),t[38]=o,t[39]=T);let E;t[40]===Symbol.for(`react.memo_cache_sentinel`)?(E=(0,J.jsx)(`div`,{className:`flex flex-wrap gap-x-4 gap-y-2 px-2 text-[13px] text-zinc-500 font-medium pb-5`,children:f.map(Ct)}),t[40]=E):E=t[40];let D;return t[41]!==b||t[42]!==S||t[43]!==T?(D=(0,J.jsxs)(`aside`,{className:`sticky top-5 hidden w-[350px] shrink-0 flex-col gap-y-6 lg:flex pr-4`,children:[b,S,T,E]}),t[41]=b,t[42]=S,t[43]=T,t[44]=D):D=t[44],D};function xt(e){return(0,J.jsxs)(`div`,{className:`px-3 py-3 hover:bg-zinc-100 dark:hover:bg-zinc-800 rounded-xl cursor-pointer transition-colors group`,children:[(0,J.jsx)(`div`,{className:`text-xs text-zinc-500 dark:text-zinc-400 font-medium`,children:`Trending`}),(0,J.jsxs)(`div`,{className:`font-bold text-[--foreground]`,children:[`#`,e.tag]}),(0,J.jsxs)(`div`,{className:`text-xs text-zinc-500 dark:text-zinc-400`,children:[e.posts,` posts`]})]},e.tag)}function St(e){return(0,J.jsx)(`a`,{href:`#`,className:`hover:underline`,children:e},e)}function Ct(e){return(0,J.jsx)(`a`,{href:`#`,className:`hover:underline`,children:e},e)}var wt=w(),Tt=e=>{let t=(0,wt.c)(12),{handleProfileClick:n}=e,{currentUser:i}=Y(),o=oe(),s;t[0]===Symbol.for(`react.memo_cache_sentinel`)?(s=[{id:`home`,icon:a,path:`/`},{id:`explore`,icon:_,path:`/explore`},{id:`reels`,icon:V,path:`/reels`},{id:`messages`,icon:b,path:`/messages`},{id:`notifications`,icon:r,path:`/notifications`}],t[0]=s):s=t[0];let c=s,l;t[1]===Symbol.for(`react.memo_cache_sentinel`)?(l=c.map(Dt),t[1]=l):l=t[1];let u=i?`/u/${i.handle}`:`/explore`,d;t[2]!==i||t[3]!==n?(d=()=>{i||n(`demouser`)},t[2]=i,t[3]=n,t[4]=d):d=t[4];let f=i?.avatar||`https://static.hey.xyz/images/brands/lens.svg`,p=`size-7 rounded-full object-cover border-2 ${o.pathname.startsWith(`/u/`)?`border-black dark:border-white`:`border-transparent opacity-70`}`,m;t[5]!==f||t[6]!==p?(m=(0,J.jsx)(`img`,{src:f,className:p,alt:``}),t[5]=f,t[6]=p,t[7]=m):m=t[7];let h;return t[8]!==u||t[9]!==d||t[10]!==m?(h=(0,J.jsxs)(`nav`,{className:`fixed bottom-0 left-0 right-0 z-[40] flex h-16 items-center justify-around border-t border-zinc-100 bg-white/90 px-2 pb-safe backdrop-blur-md dark:border-zinc-800 dark:bg-black/90 md:hidden`,children:[l,(0,J.jsx)(D,{to:u,onClick:d,className:`flex flex-col items-center justify-center p-2`,children:m})]}),t[8]=u,t[9]=d,t[10]=m,t[11]=h):h=t[11],h};function Et(e){let{isActive:t}=e;return`flex flex-col items-center justify-center p-2 rounded-full transition-all duration-200 ${t?`text-black dark:text-white`:`text-zinc-400 opacity-70`}`}function Dt(e){return(0,J.jsx)(v,{to:e.path,className:Et,children:t=>{let{isActive:n}=t;return(0,J.jsx)(e.icon,{size:26,strokeWidth:n?2.5:2})}},e.id)}var Ot=w(),kt=()=>{let e=(0,Ot.c)(4),t,n;e[0]===Symbol.for(`react.memo_cache_sentinel`)?(t=(0,J.jsx)(`img`,{src:`https://images.unsplash.com/photo-1502082553048-f009c37129b9?q=80&w=2070&auto=format&fit=crop`,alt:`Welcome Banner`,className:`w-full h-full object-cover group-hover:scale-105 transition-transform duration-700`}),n=(0,J.jsx)(`div`,{className:`absolute inset-0 bg-gradient-to-t from-black/60 via-black/20 to-transparent`}),e[0]=t,e[1]=n):(t=e[0],n=e[1]);let r;e[2]===Symbol.for(`react.memo_cache_sentinel`)?(r=(0,J.jsxs)(`div`,{className:`absolute bottom-6 left-8 text-white`,children:[(0,J.jsx)(`h1`,{className:`text-3xl sm:text-4xl font-black mb-1 drop-shadow-lg`,children:`Welcome to Hey`}),(0,J.jsx)(`p`,{className:`text-sm sm:text-base font-medium opacity-90 tracking-wide drop-shadow-md`,children:`a social network built on Lens`})]}),e[2]=r):r=e[2];let i;return e[3]===Symbol.for(`react.memo_cache_sentinel`)?(i=(0,J.jsxs)(`div`,{className:`relative w-full aspect-[21/9] sm:aspect-[2.5/1] rounded-3xl overflow-hidden mb-6 group cursor-pointer`,children:[t,n,r,(0,J.jsx)(`div`,{className:`absolute bottom-4 right-8`,children:(0,J.jsx)(`img`,{src:`https://static.hey.xyz/images/app-icon/0.png`,className:`size-12 animate-pulse opacity-80`,alt:``})})]}),e[3]=i):i=e[3],i},At=w(),jt=()=>{let e=(0,At.c)(17),t=oe(),n=z(),{darkMode:r}=Qe(),i=t.pathname===`/`,a;e[0]===n?a=e[1]:(a=e=>{n(`/u/${e}`)},e[0]=n,e[1]=a);let o=a,s=`min-h-screen bg-[--background] text-[--foreground] font-sans selection:bg-violet-500 selection:text-white transition-colors duration-200 ${r?`dark`:``}`,c;e[2]===Symbol.for(`react.memo_cache_sentinel`)?(c=(0,J.jsx)(mt,{}),e[2]=c):c=e[2];let l;e[3]===i?l=e[4]:(l=i&&(0,J.jsx)(kt,{}),e[3]=i,e[4]=l);let u;e[5]===Symbol.for(`react.memo_cache_sentinel`)?(u=(0,J.jsx)(`div`,{className:`w-full`,children:(0,J.jsx)(P,{})}),e[5]=u):u=e[5];let d;e[6]===l?d=e[7]:(d=(0,J.jsxs)(`div`,{className:`w-full flex flex-col flex-1`,children:[l,u]}),e[6]=l,e[7]=d);let f;e[8]===Symbol.for(`react.memo_cache_sentinel`)?(f=(0,J.jsx)(bt,{trendingTopics:Ke.trendingTopics}),e[8]=f):f=e[8];let p;e[9]===d?p=e[10]:(p=(0,J.jsxs)(`div`,{className:`flex justify-center w-full max-w-[1300px] mx-auto min-h-screen px-0 sm:px-0`,children:[c,(0,J.jsxs)(`div`,{className:`flex-1 flex justify-center gap-x-2 md:gap-x-8 py-0 md:py-5 px-0 md:px-4`,children:[d,f]})]}),e[9]=d,e[10]=p);let m;e[11]===o?m=e[12]:(m=(0,J.jsx)(Tt,{handleProfileClick:o}),e[11]=o,e[12]=m);let h;return e[13]!==s||e[14]!==p||e[15]!==m?(h=(0,J.jsxs)(`div`,{className:s,children:[p,m]}),e[13]=s,e[14]=p,e[15]=m,e[16]=h):h=e[16],h},Mt=w(),Nt=e=>{let t=(0,Mt.c)(13),{isOpen:n,onClose:r,title:i,children:a}=e;if(!n)return null;let o;t[0]===i?o=t[1]:(o=(0,J.jsx)(`h3`,{className:`font-bold text-xl dark:text-white`,children:i}),t[0]=i,t[1]=o);let s;t[2]===Symbol.for(`react.memo_cache_sentinel`)?(s=(0,J.jsx)(k,{size:20}),t[2]=s):s=t[2];let c;t[3]===r?c=t[4]:(c=(0,J.jsx)(`button`,{onClick:r,className:`p-2 hover:bg-zinc-100 dark:hover:bg-zinc-800 rounded-full dark:text-zinc-400 transition-colors`,children:s}),t[3]=r,t[4]=c);let l;t[5]!==o||t[6]!==c?(l=(0,J.jsxs)(`div`,{className:`flex items-center justify-between p-5 border-b border-zinc-100 dark:border-zinc-800 shrink-0`,children:[o,c]}),t[5]=o,t[6]=c,t[7]=l):l=t[7];let u;t[8]===a?u=t[9]:(u=(0,J.jsx)(`div`,{className:`p-5 overflow-y-auto`,children:a}),t[8]=a,t[9]=u);let d;return t[10]!==l||t[11]!==u?(d=(0,J.jsx)(`div`,{className:`fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200`,children:(0,J.jsxs)(`div`,{className:`bg-white dark:bg-zinc-900 rounded-3xl w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200 border border-zinc-200 dark:border-zinc-800 max-h-[90dvh] flex flex-col`,children:[l,u]})}),t[10]=l,t[11]=u,t[12]=d):d=t[12],d},Pt=w(),Z=e=>{let t=(0,Pt.c)(12),n,r,i,a;t[0]===e?(n=t[1],r=t[2],i=t[3],a=t[4]):({children:n,variant:i,className:a,...r}=e,t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=a);let o=i===void 0?`primary`:i,s=a===void 0?``:a,c;t[5]===Symbol.for(`react.memo_cache_sentinel`)?(c={primary:`text-white hover:text-white bg-zinc-900 hover:bg-zinc-800 border border-zinc-900 dark:bg-white dark:text-black dark:border-white dark:hover:bg-zinc-200`,secondary:`text-zinc-900 border border-zinc-300 hover:border-zinc-400 bg-transparent hover:bg-zinc-50 dark:text-white dark:border-zinc-700 dark:hover:border-zinc-600 dark:hover:bg-zinc-900`,outline:`text-zinc-900 border border-zinc-300 hover:border-zinc-400 bg-white dark:bg-transparent dark:text-white dark:border-zinc-700 dark:hover:bg-zinc-900`,danger:`text-white bg-red-500 hover:bg-red-600 border border-red-500`,ghost:`text-zinc-500 hover:bg-zinc-100 dark:text-zinc-400 dark:hover:bg-zinc-800 border-transparent`},t[5]=c):c=t[5];let l=`rounded-full font-bold inline-flex items-center justify-center relative overflow-hidden px-4 py-1.5 transition-all duration-200 active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed disabled:active:scale-100 touch-manipulation ${c[o]} ${s}`,u;t[6]===n?u=t[7]:(u=(0,J.jsx)(`div`,{className:`flex items-center gap-x-1.5`,children:n}),t[6]=n,t[7]=u);let d;return t[8]!==r||t[9]!==l||t[10]!==u?(d=(0,J.jsx)(`button`,{className:l,...r,children:u}),t[8]=r,t[9]=l,t[10]=u,t[11]=d):d=t[11],d},Ft=({isOpen:e,onClose:t})=>{let{currentUser:r}=Y(),{addPost:a}=st(),{addToast:s}=X(),[c,l]=(0,K.useState)(``),[u,d]=(0,K.useState)([]),[f,p]=(0,K.useState)(!1),[m,h]=(0,K.useState)({options:[``,``],duration:`1 day`}),[g,_]=(0,K.useState)(!1),v=(0,K.useRef)(null),y=e=>{let t=Array.from(e.target.files);d(e=>[...e,...t])},b=e=>{d(t=>t.filter((t,n)=>n!==e))},x=()=>{m.options.length<4&&h(e=>({...e,options:[...e.options,``]}))},S=e=>{h(t=>({...t,options:t.options.filter((t,n)=>n!==e)}))},C=(e,t)=>{let n=[...m.options];n[e]=t,h(e=>({...e,options:n}))};return(0,J.jsx)(Nt,{isOpen:e,onClose:()=>!g&&t(),title:`Create Post`,children:(0,J.jsxs)(`form`,{onSubmit:async e=>{if(e.preventDefault(),!(!c.trim()&&u.length===0||!r)){_(!0);try{let e=[];for(let t of u){let n=await Ee(t);e.push(n)}let n=null;f&&m.options.some(e=>e.trim())&&(n={options:m.options.filter(e=>e.trim()).map(e=>({text:e,votes:0})),ends_at:new Date(Date.now()+1440*60*1e3).toISOString()}),await a({content:c,media:e,poll:n,type:e.length>0?e[0].type===`video`?`video`:`image`:n?`poll`:`text`,userId:r.id}),l(``),d([]),p(!1),h({options:[``,``],duration:`1 day`}),t(),s(`Post published!`)}catch(e){console.error(`Failed to create post:`,e),s(`Failed to publish post.`)}finally{_(!1)}}},className:`space-y-4 max-h-[80vh] overflow-y-auto pr-2 no-scrollbar`,children:[(0,J.jsxs)(`div`,{className:`flex gap-3`,children:[(0,J.jsx)(`img`,{src:r?.avatar,className:`size-12 rounded-full border border-zinc-200 dark:border-zinc-800 object-cover`,alt:``}),(0,J.jsxs)(`div`,{className:`flex-1`,children:[(0,J.jsx)(`textarea`,{className:`w-full bg-transparent border-none outline-none text-lg min-h-[100px] resize-none dark:text-white`,placeholder:`What's happening?`,autoFocus:!0,value:c,onChange:e=>l(e.target.value)}),f&&(0,J.jsxs)(`div`,{className:`mt-4 p-4 rounded-2xl border border-zinc-100 dark:border-zinc-800 space-y-3 bg-zinc-50/50 dark:bg-zinc-900/50`,children:[(0,J.jsxs)(`div`,{className:`flex justify-between items-center mb-2`,children:[(0,J.jsx)(`span`,{className:`text-sm font-bold opacity-60`,children:`Poll`}),(0,J.jsx)(`button`,{type:`button`,onClick:()=>p(!1),className:`text-zinc-500 hover:text-rose-500`,children:(0,J.jsx)(k,{size:18})})]}),m.options.map((e,t)=>(0,J.jsxs)(`div`,{className:`flex gap-2`,children:[(0,J.jsx)(`input`,{className:`flex-1 bg-white dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 rounded-xl px-4 py-2 text-sm outline-none focus:border-violet-500`,placeholder:`Option ${t+1}`,value:e,onChange:e=>C(t,e.target.value)}),m.options.length>2&&(0,J.jsx)(`button`,{type:`button`,onClick:()=>S(t),className:`p-2 text-rose-500 hover:bg-rose-50 dark:hover:bg-rose-900/20 rounded-lg transition-colors`,children:(0,J.jsx)(M,{size:16})})]},t)),m.options.length<4&&(0,J.jsx)(`button`,{type:`button`,onClick:x,className:`text-sm font-bold text-violet-600 hover:bg-violet-50 dark:hover:bg-violet-900/20 px-3 py-1.5 rounded-lg transition-colors`,children:`+ Add option`})]}),u.length>0&&(0,J.jsx)(`div`,{className:`mt-4 flex flex-wrap gap-2`,children:u.map((e,t)=>(0,J.jsxs)(`div`,{className:`relative group size-20 rounded-xl overflow-hidden bg-zinc-100 dark:bg-zinc-800 border dark:border-zinc-700`,children:[e.type.startsWith(`image/`)?(0,J.jsx)(`img`,{src:URL.createObjectURL(e),className:`size-full object-cover`,alt:``}):(0,J.jsx)(`div`,{className:`size-full flex items-center justify-center text-zinc-500`,children:e.type.startsWith(`video/`)?(0,J.jsx)(L,{size:24,className:`animate-pulse`}):(0,J.jsx)(n,{size:24})}),(0,J.jsx)(`button`,{type:`button`,onClick:()=>b(t),className:`absolute top-1 right-1 size-6 rounded-full bg-black/60 text-white flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity`,children:(0,J.jsx)(k,{size:14,strokeWidth:3})})]},t))})]})]}),(0,J.jsxs)(`div`,{className:`flex items-center justify-between pt-4 border-t border-zinc-100 dark:border-zinc-800`,children:[(0,J.jsxs)(`div`,{className:`flex text-violet-600 gap-1`,children:[(0,J.jsx)(`button`,{type:`button`,onClick:()=>v.current?.click(),className:`p-2.5 hover:bg-violet-50 dark:hover:bg-zinc-800 rounded-full transition-colors`,title:`Attach media`,children:(0,J.jsx)(o,{size:22})}),(0,J.jsx)(`button`,{type:`button`,onClick:()=>p(!0),className:`p-2.5 hover:bg-violet-50 dark:hover:bg-zinc-800 rounded-full transition-colors`,title:`Add poll`,children:(0,J.jsx)(he,{size:22})}),(0,J.jsx)(`button`,{type:`button`,className:`p-2.5 hover:bg-violet-50 dark:hover:bg-zinc-800 rounded-full transition-colors`,children:(0,J.jsx)(pe,{size:22})}),(0,J.jsx)(`input`,{type:`file`,ref:v,onChange:y,multiple:!0,className:`hidden`,accept:`image/*,video/*,application/pdf`})]}),(0,J.jsx)(Z,{type:`submit`,disabled:!c.trim()&&u.length===0||g,className:`px-8 py-2.5 min-w-[100px] text-base`,children:g?(0,J.jsx)(i,{size:18,className:`animate-spin`}):`Post`})]})]})})},It=w(),Q=e=>{let t=(0,It.c)(12),{label:n,type:r,placeholder:i,value:a,onChange:o,required:s,textarea:c}=e,l=r===void 0?`text`:r,u=c===void 0?!1:c,d;t[0]===n?d=t[1]:(d=n&&(0,J.jsx)(`label`,{className:`text-sm font-semibold text-zinc-700 dark:text-zinc-300 block ml-1`,children:n}),t[0]=n,t[1]=d);let f;t[2]!==o||t[3]!==i||t[4]!==s||t[5]!==u||t[6]!==l||t[7]!==a?(f=(0,J.jsx)(`div`,{className:`relative`,children:u?(0,J.jsx)(`textarea`,{className:`w-full rounded-xl border border-zinc-300 bg-zinc-50 px-4 py-3 text-sm outline-none focus:border-black focus:ring-1 focus:ring-black transition-all dark:bg-zinc-900 dark:border-zinc-800 dark:text-white dark:focus:border-white dark:focus:ring-white resize-none`,placeholder:i,value:a,onChange:o,required:s,rows:3}):(0,J.jsx)(`input`,{type:l,className:`w-full rounded-xl border border-zinc-300 bg-zinc-50 px-4 py-3 text-sm outline-none focus:border-black focus:ring-1 focus:ring-black transition-all dark:bg-zinc-900 dark:border-zinc-800 dark:text-white dark:focus:border-white dark:focus:ring-white`,placeholder:i,value:a,onChange:o,required:s})}),t[2]=o,t[3]=i,t[4]=s,t[5]=u,t[6]=l,t[7]=a,t[8]=f):f=t[8];let p;return t[9]!==d||t[10]!==f?(p=(0,J.jsxs)(`div`,{className:`space-y-1.5 w-full`,children:[d,f]}),t[9]=d,t[10]=f,t[11]=p):p=t[11],p},Lt=({isOpen:e,onClose:t,editProfileData:n,setEditProfileData:r})=>{let{updateProfile:a}=Y(),{addToast:o}=X(),[s,c]=(0,K.useState)(!1),[l,u]=(0,K.useState)(null),[d,f]=(0,K.useState)(null),p=(0,K.useRef)(null),m=(0,K.useRef)(null);return(0,J.jsx)(Nt,{isOpen:e,onClose:()=>!s&&t(),title:`Edit Profile`,children:(0,J.jsxs)(`div`,{className:`space-y-6`,children:[(0,J.jsx)(`input`,{type:`file`,ref:m,className:`hidden`,accept:`image/*`,onChange:e=>e.target.files[0]&&f(e.target.files[0])}),(0,J.jsx)(`input`,{type:`file`,ref:p,className:`hidden`,accept:`image/*`,onChange:e=>e.target.files[0]&&u(e.target.files[0])}),(0,J.jsxs)(`div`,{className:`relative h-32 bg-zinc-100 dark:bg-zinc-800 rounded-xl overflow-hidden group cursor-pointer`,onClick:()=>m.current?.click(),children:[(d||n?.cover)&&(0,J.jsx)(`img`,{src:d?URL.createObjectURL(d):n.cover,className:`w-full h-full object-cover opacity-60`,alt:``}),(0,J.jsx)(`div`,{className:`absolute inset-0 flex items-center justify-center`,children:(0,J.jsx)(`div`,{className:`bg-black/50 p-2 rounded-full text-white group-hover:scale-110 transition-transform`,children:(0,J.jsx)(L,{size:20})})})]}),(0,J.jsx)(`div`,{className:`relative -mt-16 ml-4`,children:(0,J.jsxs)(`div`,{className:`relative size-24 rounded-full border-4 border-white dark:border-black overflow-hidden group cursor-pointer shadow-lg bg-white dark:bg-black`,onClick:()=>p.current?.click(),children:[(l||n?.avatar)&&(0,J.jsx)(`img`,{src:l?URL.createObjectURL(l):n.avatar,className:`w-full h-full object-cover opacity-60`,alt:``}),(0,J.jsx)(`div`,{className:`absolute inset-0 flex items-center justify-center`,children:(0,J.jsx)(`div`,{className:`bg-black/50 p-2 rounded-full text-white group-hover:scale-110 transition-transform`,children:(0,J.jsx)(L,{size:16})})})]})}),(0,J.jsxs)(`div`,{className:`space-y-4`,children:[(0,J.jsx)(Q,{label:`Name`,value:n?.name||``,onChange:e=>r({...n,name:e.target.value})}),(0,J.jsx)(Q,{label:`Bio`,textarea:!0,value:n?.bio||``,onChange:e=>r({...n,bio:e.target.value})}),(0,J.jsx)(Q,{label:`Location`,value:n?.location||``,onChange:e=>r({...n,location:e.target.value})}),(0,J.jsx)(Q,{label:`Website`,value:n?.website||``,onChange:e=>r({...n,website:e.target.value})})]}),(0,J.jsx)(Z,{className:`w-full py-3`,disabled:s,onClick:async()=>{c(!0);try{let e=n.avatar,r=n.cover;l&&(e=(await Ee(l)).url),d&&(r=(await Ee(d)).url),await a({...n,avatar:e,cover:r}),u(null),f(null),t(),o(`Profile updated!`)}catch(e){console.error(`Failed to update profile:`,e),o(`Failed to update profile.`)}finally{c(!1)}},children:s?(0,J.jsx)(i,{size:24,className:`animate-spin text-white mx-auto`}):`Save changes`})]})})},Rt=({isOpen:e,onClose:t})=>{let{currentUser:n}=Y(),{addToast:r}=X(),a=d(),[s,c]=(0,K.useState)(null),[l,u]=(0,K.useState)(!1),f=(0,K.useRef)(null);return(0,J.jsx)(Nt,{isOpen:e,onClose:()=>!l&&t(),title:`Add Story`,children:(0,J.jsxs)(`div`,{className:`space-y-6`,children:[s?(0,J.jsxs)(`div`,{className:`relative aspect-[9/16] w-full max-w-[280px] mx-auto rounded-3xl overflow-hidden shadow-2xl border dark:border-zinc-800`,children:[(0,J.jsx)(`img`,{src:URL.createObjectURL(s),className:`w-full h-full object-cover`,alt:`Preview`}),(0,J.jsx)(`button`,{onClick:()=>c(null),className:`absolute top-4 right-4 p-2 bg-black/50 text-white rounded-full hover:bg-black/70 transition-colors`,children:(0,J.jsx)(k,{size:20})})]}):(0,J.jsxs)(`div`,{onClick:()=>f.current?.click(),className:`aspect-[9/16] w-full max-w-[280px] mx-auto border-2 border-dashed border-zinc-200 dark:border-zinc-800 rounded-3xl flex flex-col items-center justify-center gap-4 cursor-pointer hover:bg-zinc-50 dark:hover:bg-zinc-900 transition-colors`,children:[(0,J.jsx)(`div`,{className:`bg-violet-100 dark:bg-violet-900/30 p-4 rounded-full text-violet-600`,children:(0,J.jsx)(o,{size:32})}),(0,J.jsxs)(`div`,{className:`text-center`,children:[(0,J.jsx)(`p`,{className:`font-bold dark:text-white`,children:`Choose a photo`}),(0,J.jsx)(`p`,{className:`text-sm text-zinc-500`,children:`Stories last for 24 hours`})]})]}),(0,J.jsx)(`input`,{type:`file`,ref:f,onChange:e=>{let t=e.target.files[0];t&&c(t)},className:`hidden`,accept:`image/*`}),(0,J.jsx)(Z,{className:`w-full py-3 text-lg`,disabled:!s||l,onClick:async()=>{if(!(!s||!n)){u(!0);try{let e=await Ee(s);await Ge(n.id,e.url,e.type),c(null),t(),r(`Story shared!`),a.invalidateQueries([`stories`])}catch(e){console.error(`Failed to create story:`,e),r(`Failed to share story.`)}finally{u(!1)}}},children:l?(0,J.jsx)(i,{size:24,className:`animate-spin mx-auto`}):`Share story`})]})})},zt=w(),Bt=e=>{let t=(0,zt.c)(21),{isPostModalOpen:n,setIsPostModalOpen:r,isEditProfileOpen:i,setIsEditProfileOpen:a,isStoryModalOpen:o,setIsStoryModalOpen:s,editProfileData:c,setEditProfileData:l}=e,u;t[0]===r?u=t[1]:(u=()=>r(!1),t[0]=r,t[1]=u);let d;t[2]!==n||t[3]!==u?(d=(0,J.jsx)(Ft,{isOpen:n,onClose:u}),t[2]=n,t[3]=u,t[4]=d):d=t[4];let f;t[5]===a?f=t[6]:(f=()=>a(!1),t[5]=a,t[6]=f);let p;t[7]!==c||t[8]!==i||t[9]!==l||t[10]!==f?(p=(0,J.jsx)(Lt,{isOpen:i,onClose:f,editProfileData:c,setEditProfileData:l}),t[7]=c,t[8]=i,t[9]=l,t[10]=f,t[11]=p):p=t[11];let m;t[12]===s?m=t[13]:(m=()=>s(!1),t[12]=s,t[13]=m);let h;t[14]!==o||t[15]!==m?(h=(0,J.jsx)(Rt,{isOpen:o,onClose:m}),t[14]=o,t[15]=m,t[16]=h):h=t[16];let g;return t[17]!==d||t[18]!==p||t[19]!==h?(g=(0,J.jsxs)(J.Fragment,{children:[d,p,h]}),t[17]=d,t[18]=p,t[19]=h,t[20]=g):g=t[20],g},Vt=w(),Ht=e=>{let t=(0,Vt.c)(30),{story:n,onClose:r}=e,[i,a]=(0,K.useState)(0),o,s;t[0]===r?(o=t[1],s=t[2]):(o=()=>{let e=setInterval(()=>{a(e=>e>=100?(r(),100):e+1)},50);return()=>clearInterval(e)},s=[r],t[0]=r,t[1]=o,t[2]=s),(0,K.useEffect)(o,s);let c=`${i}%`,l;t[3]===c?l=t[4]:(l=(0,J.jsx)(`div`,{className:`flex gap-1 h-1 w-full bg-white/20 rounded-full overflow-hidden`,children:(0,J.jsx)(`div`,{className:`h-full bg-white transition-all duration-100`,style:{width:c}})}),t[3]=c,t[4]=l);let u;t[5]===n.user.avatar?u=t[6]:(u=(0,J.jsx)(`img`,{src:n.user.avatar,className:`size-10 rounded-full border border-white/20`,alt:``}),t[5]=n.user.avatar,t[6]=u);let d;t[7]===n.user.handle?d=t[8]:(d=(0,J.jsx)(`span`,{className:`text-white font-bold`,children:n.user.handle}),t[7]=n.user.handle,t[8]=d);let f;t[9]!==u||t[10]!==d?(f=(0,J.jsxs)(`div`,{className:`flex items-center gap-3`,children:[u,d]}),t[9]=u,t[10]=d,t[11]=f):f=t[11];let m;t[12]===Symbol.for(`react.memo_cache_sentinel`)?(m=(0,J.jsx)(k,{size:24}),t[12]=m):m=t[12];let h;t[13]===r?h=t[14]:(h=(0,J.jsx)(`button`,{onClick:r,className:`text-white p-2 hover:bg-white/10 rounded-full`,children:m}),t[13]=r,t[14]=h);let g;t[15]!==f||t[16]!==h?(g=(0,J.jsxs)(`div`,{className:`flex items-center justify-between`,children:[f,h]}),t[15]=f,t[16]=h,t[17]=g):g=t[17];let _;t[18]!==g||t[19]!==l?(_=(0,J.jsxs)(`div`,{className:`absolute top-0 left-0 right-0 p-4 z-20 flex flex-col gap-4`,children:[l,g]}),t[18]=g,t[19]=l,t[20]=_):_=t[20];let v;t[21]===Symbol.for(`react.memo_cache_sentinel`)?(v=(0,J.jsx)(`button`,{className:`absolute left-4 z-10 p-2 bg-black/20 hover:bg-black/40 rounded-full text-white backdrop-blur-md transition-all active:scale-90`,children:(0,J.jsx)(y,{size:32})}),t[21]=v):v=t[21];let b;t[22]===n.media?b=t[23]:(b=(0,J.jsx)(`img`,{src:n.media,className:`w-full h-full object-contain rounded-2xl shadow-2xl`,alt:``}),t[22]=n.media,t[23]=b);let x;t[24]===Symbol.for(`react.memo_cache_sentinel`)?(x=(0,J.jsx)(`button`,{className:`absolute right-4 z-10 p-2 bg-black/20 hover:bg-black/40 rounded-full text-white backdrop-blur-md transition-all active:scale-90`,children:(0,J.jsx)(p,{size:32})}),t[24]=x):x=t[24];let S;t[25]===b?S=t[26]:(S=(0,J.jsxs)(`div`,{className:`w-full h-full max-w-xl relative flex items-center justify-center p-4`,children:[v,b,x]}),t[25]=b,t[26]=S);let C;return t[27]!==_||t[28]!==S?(C=(0,J.jsxs)(`div`,{className:`fixed inset-0 z-[100] bg-black flex flex-col items-center justify-center animate-in fade-in duration-300`,children:[_,S]}),t[27]=_,t[28]=S,t[29]=C):C=t[29],C},Ut=w(),Wt=e=>{let t=(0,Ut.c)(48),{images:n,currentIndex:r,onClose:i,onNavigate:a}=e,o=r===void 0?0:r;if(!n||n.length===0)return null;let s=n[o],c=n.length>1,l;t[0]!==o||t[1]!==a?(l=e=>{e.stopPropagation(),a&&o>0&&a(o-1)},t[0]=o,t[1]=a,t[2]=l):l=t[2];let u=l,d;t[3]!==o||t[4]!==n.length||t[5]!==a?(d=e=>{e.stopPropagation(),a&&o<n.length-1&&a(o+1)},t[3]=o,t[4]=n.length,t[5]=a,t[6]=d):d=t[6];let f=d,m;t[7]===s?m=t[8]:(m=e=>{e.stopPropagation();let t=document.createElement(`a`);t.href=s,t.download=`image-${Date.now()}.jpg`,document.body.appendChild(t),t.click(),document.body.removeChild(t)},t[7]=s,t[8]=m);let g=m,_=c?`${o+1} / ${n.length}`:``,v;t[9]===_?v=t[10]:(v=(0,J.jsx)(`div`,{className:`text-white font-medium`,children:_}),t[9]=_,t[10]=v);let b;t[11]===Symbol.for(`react.memo_cache_sentinel`)?(b=(0,J.jsx)(h,{size:22}),t[11]=b):b=t[11];let x;t[12]===g?x=t[13]:(x=(0,J.jsx)(`button`,{onClick:g,className:`text-white p-2 hover:bg-white/10 rounded-full transition-colors`,title:`Download`,children:b}),t[12]=g,t[13]=x);let S;t[14]===Symbol.for(`react.memo_cache_sentinel`)?(S=(0,J.jsx)(k,{size:24}),t[14]=S):S=t[14];let C;t[15]===i?C=t[16]:(C=(0,J.jsx)(`button`,{onClick:i,className:`text-white p-2 hover:bg-white/10 rounded-full transition-colors`,title:`Close`,children:S}),t[15]=i,t[16]=C);let w;t[17]!==C||t[18]!==x?(w=(0,J.jsxs)(`div`,{className:`flex items-center gap-2`,children:[x,C]}),t[17]=C,t[18]=x,t[19]=w):w=t[19];let T;t[20]!==w||t[21]!==v?(T=(0,J.jsxs)(`div`,{className:`absolute top-0 left-0 right-0 p-4 z-20 flex items-center justify-between bg-gradient-to-b from-black/50 to-transparent`,children:[v,w]}),t[20]=w,t[21]=v,t[22]=T):T=t[22];let E;t[23]!==o||t[24]!==u||t[25]!==c?(E=c&&o>0&&(0,J.jsx)(`button`,{onClick:u,className:`absolute left-4 z-10 p-3 bg-white/10 hover:bg-white/20 rounded-full text-white backdrop-blur-md transition-all active:scale-90`,children:(0,J.jsx)(y,{size:32})}),t[23]=o,t[24]=u,t[25]=c,t[26]=E):E=t[26];let D;t[27]===s?D=t[28]:(D=(0,J.jsx)(`img`,{src:s,className:`max-w-full max-h-full object-contain select-none shadow-2xl animate-in zoom-in-95 duration-300`,alt:``,onClick:Gt}),t[27]=s,t[28]=D);let O;t[29]!==o||t[30]!==f||t[31]!==c||t[32]!==n.length?(O=c&&o<n.length-1&&(0,J.jsx)(`button`,{onClick:f,className:`absolute right-4 z-10 p-3 bg-white/10 hover:bg-white/20 rounded-full text-white backdrop-blur-md transition-all active:scale-90`,children:(0,J.jsx)(p,{size:32})}),t[29]=o,t[30]=f,t[31]=c,t[32]=n.length,t[33]=O):O=t[33];let A;t[34]!==E||t[35]!==D||t[36]!==O?(A=(0,J.jsxs)(`div`,{className:`w-full h-full relative flex items-center justify-center p-4`,children:[E,D,O]}),t[34]=E,t[35]=D,t[36]=O,t[37]=A):A=t[37];let j;t[38]!==o||t[39]!==c||t[40]!==n||t[41]!==a?(j=c&&(0,J.jsx)(`div`,{className:`absolute bottom-6 flex gap-2 p-2 bg-black/40 backdrop-blur-md rounded-2xl overflow-x-auto max-w-[90%] hide-scrollbar`,onClick:Kt,children:n.map((e,t)=>(0,J.jsx)(`button`,{onClick:()=>a(t),className:`size-12 rounded-lg overflow-hidden border-2 transition-all shrink-0 ${t===o?`border-white scale-110`:`border-transparent opacity-50 hover:opacity-100`}`,children:(0,J.jsx)(`img`,{src:e,className:`size-full object-cover`,alt:``})},t))}),t[38]=o,t[39]=c,t[40]=n,t[41]=a,t[42]=j):j=t[42];let M;return t[43]!==i||t[44]!==T||t[45]!==A||t[46]!==j?(M=(0,J.jsxs)(`div`,{className:`fixed inset-0 z-[100] bg-black/95 backdrop-blur-sm flex flex-col items-center justify-center animate-in fade-in duration-300`,onClick:i,children:[T,A,j]}),t[43]=i,t[44]=T,t[45]=A,t[46]=j,t[47]=M):M=t[47],M};function Gt(e){return e.stopPropagation()}function Kt(e){return e.stopPropagation()}var qt=({type:e,onComplete:t,onSwitch:n})=>{let{login:r,signup:a}=Y(),{addToast:o}=X(),[s,c]=(0,K.useState)({name:``,email:``,username:``,password:``}),[l,d]=(0,K.useState)(!1),[f,p]=(0,K.useState)(null);return(0,J.jsxs)(`div`,{className:`max-w-md mx-auto p-8 w-full animate-in fade-in slide-in-from-bottom-5 duration-300`,children:[(0,J.jsxs)(`div`,{className:`text-center mb-8`,children:[(0,J.jsx)(`div`,{className:`flex justify-center mb-4`,children:(0,J.jsx)(`div`,{className:`bg-black dark:bg-white dark:text-black text-white p-3 rounded-2xl shadow-lg`,children:(0,J.jsx)(`img`,{src:`https://static.hey.xyz/images/app-icon/0.png`,alt:`Logo`,className:`w-10 h-10 filter invert dark:filter-none`})})}),(0,J.jsx)(`h2`,{className:`text-3xl font-extrabold mb-2 dark:text-white tracking-tight`,children:e===`login`?`Welcome back!`:`Join Hey today`}),(0,J.jsx)(`p`,{className:`text-zinc-500 font-medium`,children:`The decentralized social network`})]}),f&&(0,J.jsxs)(`div`,{className:`mb-6 p-4 bg-rose-50 dark:bg-rose-900/20 border border-rose-100 dark:border-rose-800 rounded-xl flex items-center gap-3 text-rose-600 dark:text-rose-400 text-sm`,children:[(0,J.jsx)(u,{size:18}),(0,J.jsx)(`span`,{children:f})]}),(0,J.jsxs)(`form`,{onSubmit:async n=>{n.preventDefault(),d(!0),p(null);try{e===`login`?(await r({email:s.email,password:s.password}),o(`Welcome back!`)):(await a({email:s.email,password:s.password,username:s.username,name:s.name}),o(`Account created successfully!`)),t()}catch(e){console.error(`Auth error:`,e),p(e.message||`Authentication failed. Please check your credentials.`),o(`Authentication failed!`)}finally{d(!1)}},className:`space-y-4`,children:[(0,J.jsx)(Q,{label:`Email`,type:`email`,placeholder:`john@example.com`,value:s.email,onChange:e=>c({...s,email:e.target.value}),required:!0}),e===`signup`&&(0,J.jsxs)(J.Fragment,{children:[(0,J.jsx)(Q,{label:`Name`,placeholder:`John Doe`,value:s.name,onChange:e=>c({...s,name:e.target.value}),required:!0}),(0,J.jsx)(Q,{label:`Username`,placeholder:`johndoe`,value:s.username,onChange:e=>c({...s,username:e.target.value}),required:!0})]}),(0,J.jsx)(Q,{label:`Password`,type:`password`,placeholder:`⑩⑩⑩⑩⑩⑩⑩`,value:s.password,onChange:e=>c({...s,password:e.target.value}),required:!0}),(0,J.jsx)(Z,{type:`submit`,className:`w-full justify-center py-3 mt-6 text-lg`,disabled:l,children:l?(0,J.jsx)(i,{size:24,className:`animate-spin`}):e===`login`?`Log in`:`Sign up`})]}),(0,J.jsxs)(`div`,{className:`mt-8 text-center text-sm`,children:[(0,J.jsx)(`span`,{className:`text-zinc-500`,children:e===`login`?`Don't have an account?`:`Already have an account?`}),(0,J.jsx)(`button`,{onClick:n,className:`font-bold ml-1 hover:underline dark:text-white`,children:e===`login`?`Sign up`:`Log in`})]})]})},Jt=w(),$=e=>{let t=(0,Jt.c)(6),{children:n}=e,r,i,a,o;t[0]===Symbol.for(`react.memo_cache_sentinel`)?(r={opacity:0,y:10},i={opacity:1,y:0},a={opacity:0,y:-10},o={duration:.3,ease:`easeOut`},t[0]=r,t[1]=i,t[2]=a,t[3]=o):(r=t[0],i=t[1],a=t[2],o=t[3]);let s;return t[4]===n?s=t[5]:(s=(0,J.jsx)(W.div,{initial:r,animate:i,exit:a,transition:o,className:`w-full`,children:n}),t[4]=n,t[5]=s),s},Yt=w(),Xt=e=>{let t=(0,Yt.c)(17),{user:n,onClick:r,isAddStory:i}=e,a=i===void 0?!1:i,o=`relative p-0.5 rounded-full ${a?`bg-transparent`:`bg-gradient-to-tr from-yellow-400 via-pink-500 to-violet-600`}`,s;t[0]!==n.avatar||t[1]!==n.handle?(s=(0,J.jsx)(`img`,{src:n.avatar,className:`size-14 sm:size-16 rounded-full object-cover border border-zinc-100 dark:border-zinc-800`,alt:n.handle}),t[0]=n.avatar,t[1]=n.handle,t[2]=s):s=t[2];let c;t[3]===a?c=t[4]:(c=a&&(0,J.jsx)(`div`,{className:`absolute bottom-0 right-0 bg-violet-600 border-2 border-white dark:border-black rounded-full p-1 text-white shadow-lg`,children:(0,J.jsx)(L,{size:14,strokeWidth:3})}),t[3]=a,t[4]=c);let l;t[5]!==s||t[6]!==c?(l=(0,J.jsx)(`div`,{className:`bg-white dark:bg-black rounded-full p-0.5`,children:(0,J.jsxs)(`div`,{className:`relative`,children:[s,c]})}),t[5]=s,t[6]=c,t[7]=l):l=t[7];let u;t[8]!==o||t[9]!==l?(u=(0,J.jsx)(`div`,{className:o,children:l}),t[8]=o,t[9]=l,t[10]=u):u=t[10];let d=a?`Add Story`:n.handle,f;t[11]===d?f=t[12]:(f=(0,J.jsx)(`span`,{className:`text-[11px] font-semibold text-zinc-600 dark:text-zinc-400 truncate w-16 text-center leading-tight`,children:d}),t[11]=d,t[12]=f);let p;return t[13]!==r||t[14]!==u||t[15]!==f?(p=(0,J.jsxs)(`button`,{onClick:r,className:`flex flex-col items-center gap-2 group shrink-0`,children:[u,f]}),t[13]=r,t[14]=u,t[15]=f,t[16]=p):p=t[16],p},Zt=w(),Qt=()=>{let e=(0,Zt.c)(1),t;return e[0]===Symbol.for(`react.memo_cache_sentinel`)?(t=(0,J.jsx)(C,{size:16,className:`fill-blue-500 text-white ml-1 inline-block shrink-0`}),e[0]=t):t=e[0],t},$t=w(),en=e=>{let t=(0,$t.c)(18),{poll:n,onVote:r}=e,i=n.options.reduce(tn,0),[a,o]=(0,K.useState)(null),c;t[0]!==r||t[1]!==a?(c=e=>{a||(o(e),r&&r(e))},t[0]=r,t[1]=a,t[2]=c):c=t[2];let l=c,u;if(t[3]!==l||t[4]!==n.options||t[5]!==i||t[6]!==a){let e;t[8]!==l||t[9]!==i||t[10]!==a?(e=e=>{let t=i>0?Math.round((e.votes+(a===e.id?1:0))/(i+(a?1:0))*100):0,n=a===e.id;return(0,J.jsxs)(`div`,{onClick:t=>{t.stopPropagation(),l(e.id)},className:`relative h-10 w-full rounded-xl overflow-hidden cursor-pointer border ${n?`border-violet-500 dark:border-violet-500`:`border-zinc-200 dark:border-zinc-700`}`,children:[a&&(0,J.jsx)(`div`,{className:`absolute top-0 left-0 h-full bg-zinc-200 dark:bg-zinc-800 transition-all duration-500`,style:{width:`${t}%`}}),(0,J.jsxs)(`div`,{className:`absolute inset-0 flex items-center justify-between px-4 z-10`,children:[(0,J.jsxs)(`span`,{className:`font-medium text-sm ${n?`text-violet-600 font-bold`:`text-zinc-700 dark:text-zinc-200`}`,children:[e.text,` `,n&&(0,J.jsx)(s,{size:14,className:`inline ml-1 mb-0.5`})]}),a&&(0,J.jsxs)(`span`,{className:`text-sm font-bold text-zinc-900 dark:text-white`,children:[t,`%`]})]})]},e.id)},t[8]=l,t[9]=i,t[10]=a,t[11]=e):e=t[11],u=n.options.map(e),t[3]=l,t[4]=n.options,t[5]=i,t[6]=a,t[7]=u}else u=t[7];let d=i+(a?1:0),f=a?`6 days left`:`Click to vote`,p;t[12]!==d||t[13]!==f?(p=(0,J.jsxs)(`div`,{className:`text-xs text-zinc-500 dark:text-zinc-400 pl-1`,children:[d,` votes  `,f]}),t[12]=d,t[13]=f,t[14]=p):p=t[14];let m;return t[15]!==u||t[16]!==p?(m=(0,J.jsxs)(`div`,{className:`mt-3 space-y-2`,children:[u,p]}),t[15]=u,t[16]=p,t[17]=m):m=t[17],m};function tn(e,t){return e+t.votes}var nn=w(),rn=e=>{let t=(0,nn.c)(16),{user:n,time:r,content:i}=e,a;t[0]!==n.avatar||t[1]!==n.handle?(a=(0,J.jsx)(`img`,{src:n.avatar,className:`size-6 rounded-full`,alt:n.handle}),t[0]=n.avatar,t[1]=n.handle,t[2]=a):a=t[2];let o;t[3]===n.handle?o=t[4]:(o=(0,J.jsx)(`span`,{className:`font-semibold text-sm`,children:n.handle}),t[3]=n.handle,t[4]=o);let s;t[5]===r?s=t[6]:(s=(0,J.jsxs)(`span`,{className:`text-zinc-500 text-sm`,children:[` `,r]}),t[5]=r,t[6]=s);let c;t[7]!==a||t[8]!==o||t[9]!==s?(c=(0,J.jsxs)(`div`,{className:`flex items-center gap-x-2 mb-2`,children:[a,o,s]}),t[7]=a,t[8]=o,t[9]=s,t[10]=c):c=t[10];let l;t[11]===i?l=t[12]:(l=(0,J.jsx)(`p`,{className:`text-sm text-zinc-800 dark:text-zinc-300 whitespace-pre-line`,children:i}),t[11]=i,t[12]=l);let u;return t[13]!==c||t[14]!==l?(u=(0,J.jsxs)(`div`,{className:`p-4`,children:[c,l]}),t[13]=c,t[14]=l,t[15]=u):u=t[15],u},an=w(),on=e=>{let t=(0,an.c)(17),{icon:n,count:r,onClick:i,active:a,activeColorClass:o}=e,s=o===void 0?`text-violet-600`:o,c=n,l;t[0]===i?l=t[1]:(l=e=>{e.stopPropagation(),i&&i(e)},t[0]=i,t[1]=l);let u=`group flex items-center gap-x-2 text-[13px] font-medium transition-all ${a?s:`text-zinc-500 hover:text-zinc-700 dark:hover:text-zinc-300`}`,d=`rounded-full p-2 transition-colors ${a?`bg-current/10`:`group-hover:bg-zinc-100 dark:group-hover:bg-zinc-800`}`,f=a?2.5:2,p=a?`fill-current`:``,m;t[2]!==c||t[3]!==f||t[4]!==p?(m=(0,J.jsx)(c,{size:18,strokeWidth:f,className:p}),t[2]=c,t[3]=f,t[4]=p,t[5]=m):m=t[5];let h;t[6]!==d||t[7]!==m?(h=(0,J.jsx)(`div`,{className:d,children:m}),t[6]=d,t[7]=m,t[8]=h):h=t[8];let g;t[9]!==a||t[10]!==r?(g=r!=null&&(0,J.jsx)(`span`,{className:a?`font-bold`:``,children:r||0}),t[9]=a,t[10]=r,t[11]=g):g=t[11];let _;return t[12]!==l||t[13]!==u||t[14]!==h||t[15]!==g?(_=(0,J.jsxs)(`button`,{onClick:l,className:u,children:[h,g]}),t[12]=l,t[13]=u,t[14]=h,t[15]=g,t[16]=_):_=t[16],_},sn=w(),cn=e=>{let t=(0,sn.c)(12),{src:n,poster:r}=e,i=(0,K.useRef)(null),a,o;t[0]===Symbol.for(`react.memo_cache_sentinel`)?(a=()=>{let e=new IntersectionObserver(e=>{let[t]=e;i.current?.plyr&&(t.isIntersecting?i.current.plyr.play().catch(()=>{i.current.plyr.muted=!0,i.current.plyr.play()}):i.current.plyr.pause())},{threshold:.6}),t=i.current?.elements?.container;return t&&e.observe(t),()=>{t&&e.unobserve(t)}},o=[],t[0]=a,t[1]=o):(a=t[0],o=t[1]),(0,K.useEffect)(a,o);let s;t[2]===n?s=t[3]:(s=[{src:n,type:`video/mp4`}],t[2]=n,t[3]=s);let c;t[4]!==r||t[5]!==s?(c={type:`video`,sources:s,poster:r},t[4]=r,t[5]=s,t[6]=c):c=t[6];let l;t[7]===Symbol.for(`react.memo_cache_sentinel`)?(l={controls:[`play-large`,`play`,`progress`,`current-time`,`mute`,`volume`,`fullscreen`],settings:[`quality`,`speed`],ratio:`16:9`,clickToPlay:!0,hideControls:!0,resetOnEnd:!0},t[7]=l):l=t[7];let u;t[8]===c?u=t[9]:(u={source:c,options:l},t[8]=c,t[9]=u);let d=u,f;return t[10]===d?f=t[11]:(f=(0,J.jsx)(`div`,{className:`mt-3 overflow-hidden rounded-2xl shadow-sm border border-zinc-100 dark:border-zinc-800 bg-black`,onClick:ln,children:(0,J.jsx)(le,{ref:i,...d})}),t[10]=d,t[11]=f),f};function ln(e){return e.stopPropagation()}var un=w(),dn=e=>{let t=(0,un.c)(17),{file:r}=e,i;t[0]===Symbol.for(`react.memo_cache_sentinel`)?(i=(0,J.jsx)(`div`,{className:`size-10 rounded-xl bg-violet-100 dark:bg-violet-900/30 flex items-center justify-center text-violet-600`,children:(0,J.jsx)(n,{size:20})}),t[0]=i):i=t[0];let a;t[1]===r.name?a=t[2]:(a=(0,J.jsx)(`div`,{className:`text-sm font-bold truncate dark:text-white`,children:r.name}),t[1]=r.name,t[2]=a);let o=r.size/1024/1024,s;t[3]===o?s=t[4]:(s=o.toFixed(2),t[3]=o,t[4]=s);let c;t[5]===s?c=t[6]:(c=(0,J.jsxs)(`div`,{className:`text-xs text-zinc-500 uppercase`,children:[s,` MB`]}),t[5]=s,t[6]=c);let l;t[7]!==a||t[8]!==c?(l=(0,J.jsxs)(`div`,{className:`flex-1 min-w-0`,children:[a,c]}),t[7]=a,t[8]=c,t[9]=l):l=t[9];let u;t[10]===Symbol.for(`react.memo_cache_sentinel`)?(u=(0,J.jsx)(h,{size:18}),t[10]=u):u=t[10];let d;t[11]!==r.name||t[12]!==r.url?(d=(0,J.jsx)(`a`,{href:r.url,download:r.name,className:`p-2 text-zinc-400 hover:text-violet-600 transition-colors`,onClick:fn,children:u}),t[11]=r.name,t[12]=r.url,t[13]=d):d=t[13];let f;return t[14]!==l||t[15]!==d?(f=(0,J.jsxs)(`div`,{className:`mt-3 flex items-center gap-3 p-3 rounded-2xl border border-zinc-100 dark:border-zinc-800 bg-zinc-50/50 dark:bg-zinc-900/10 group hover:border-violet-500/30 transition-colors`,children:[i,l,d]}),t[14]=l,t[15]=d,t[16]=f):f=t[16],f};function fn(e){return e.stopPropagation()}var pn=w(),mn=e=>{let t=(0,pn.c)(3),{items:n}=e,r=n===void 0?[]:n,{openLightbox:i}=dt();if(!r||r.length===0)return null;let a=Array.isArray(r)?r:[r],o=a.filter(hn),s=a.filter(gn),c=e=>{let t=o.filter(_n).map(vn),n=o[e];i(t,t.indexOf(n.url||n.src))},l=o.length>0&&(0,J.jsx)(`div`,{className:`grid gap-2 rounded-2xl overflow-hidden border border-zinc-100 dark:border-zinc-800 ${o.length===1?`grid-cols-1`:o.length===2?`grid-cols-2 aspect-[16/9]`:(o.length,`grid-cols-2 grid-rows-2 aspect-[16/9]`)}`,children:o.map((e,t)=>(0,J.jsx)(`div`,{className:`relative overflow-hidden bg-zinc-100 dark:bg-zinc-900 cursor-pointer ${o.length===3&&t===0?`row-span-2`:``}`,onClick:n=>{e.type===`image`&&(n.stopPropagation(),c(t))},children:e.type===`video`?(0,J.jsx)(cn,{src:e.url,poster:e.poster}):(0,J.jsx)(`img`,{src:e.url||e.src,className:`size-full object-cover hover:scale-[1.02] transition-transform duration-500`,alt:``,loading:`lazy`})},t))}),u=s.map(yn),d;return t[0]!==l||t[1]!==u?(d=(0,J.jsxs)(`div`,{className:`mt-3 space-y-2`,children:[l,u]}),t[0]=l,t[1]=u,t[2]=d):d=t[2],d};function hn(e){return e.type===`image`||e.type===`video`}function gn(e){return e.type===`file`}function _n(e){return e.type===`image`}function vn(e){return e.url||e.src}function yn(e,t){return(0,J.jsx)(dn,{file:e},t)}var bn=w(),xn=e=>{let t=(0,bn.c)(6),{currentUser:n,newComment:r,setNewComment:a,handleSubmitComment:o,loading:s}=e,c;return t[0]!==n||t[1]!==o||t[2]!==s||t[3]!==r||t[4]!==a?(c=n?(0,J.jsx)(`div`,{className:`p-4 border-y border-zinc-100 dark:border-zinc-800 bg-zinc-50/30 dark:bg-zinc-900/10`,children:(0,J.jsxs)(`div`,{className:`flex gap-3`,children:[(0,J.jsx)(`img`,{src:n.avatar,className:`size-9 rounded-full object-cover shrink-0 border border-zinc-200 dark:border-zinc-700`,alt:``}),(0,J.jsxs)(`div`,{className:`flex-1`,children:[(0,J.jsx)(`textarea`,{id:`comment-input`,className:`w-full bg-transparent outline-none text-base min-h-[60px] resize-none dark:text-white placeholder:text-zinc-500`,placeholder:`Post your reply...`,value:r,onChange:e=>a(e.target.value)}),(0,J.jsxs)(`div`,{className:`flex justify-between items-center mt-2 pt-3 border-t border-zinc-100 dark:border-zinc-800`,children:[(0,J.jsxs)(`div`,{className:`flex text-violet-600 gap-1`,children:[(0,J.jsx)(`button`,{className:`text-violet-600 hover:bg-violet-50 dark:hover:bg-zinc-800 rounded-full p-2`,children:(0,J.jsx)(L,{size:20})}),(0,J.jsx)(`button`,{className:`text-violet-600 hover:bg-violet-50 dark:hover:bg-zinc-800 rounded-full p-2`,children:(0,J.jsx)(pe,{size:20})})]}),(0,J.jsx)(Z,{className:`!w-auto px-5 py-1.5 text-sm font-bold min-w-[70px]`,onClick:o,disabled:!r.trim()||s,children:s?(0,J.jsx)(i,{size:16,className:`animate-spin text-white mx-auto`}):`Reply`})]})]})]})}):(0,J.jsx)(`div`,{className:`p-6 text-center border-y border-zinc-100 dark:border-zinc-800 bg-zinc-50/30 dark:bg-zinc-900/10`,children:(0,J.jsx)(`p`,{className:`text-zinc-500 text-sm`,children:`Please login to join the conversation.`})}),t[0]=n,t[1]=o,t[2]=s,t[3]=r,t[4]=a,t[5]=c):c=t[5],c};const Sn=(e,t,n,r)=>{let[i,a]=(0,K.useState)(!1),[o,s]=(0,K.useState)(!1),[c,l]=(0,K.useState)(t||{comments:0,likes:0,collects:0,mirrors:0});return(0,K.useEffect)(()=>{n&&e&&Be(e,n.id).then(a)},[e,n]),{liked:i,reposted:o,localStats:c,setLocalStats:l,handleLike:async t=>{if(t&&t.stopPropagation(),!n)return r(`Please login to like!`,`error`);try{let t=await ze(e,n.id);a(t),l(e=>({...e,likes:t?(e.likes||0)+1:(e.likes||0)-1})),r(t?`Liked`:`Unliked`)}catch(e){console.error(`Failed to toggle like:`,e),r(`Failed to update like state`,`error`)}},handleRepost:e=>{if(e&&e.stopPropagation(),!n)return r(`Please login to repost!`,`error`);s(!o),l(e=>({...e,mirrors:o?(e.mirrors||0)-1:(e.mirrors||0)+1})),r(o?`Removed repost`:`Reposted`)}}};var Cn=({id:e,user:t,timeAgo:n,content:r,contentClass:a,media:o,quotedPost:s,stats:c,onClick:l,repostedBy:u,onUserClick:d,currentUser:f,showToast:p,poll:m,isDetail:h,initialComments:_})=>{let{liked:v,reposted:y,localStats:b,setLocalStats:x,handleLike:S,handleRepost:C}=Sn(e,c,f,p),[w,T]=(0,K.useState)(_||[]),[E,D]=(0,K.useState)(``),[O,k]=(0,K.useState)(!1),[A,M]=(0,K.useState)(!1),N=(0,K.useCallback)(async()=>{if(e){k(!0);try{T(await Le(e))}catch(e){console.error(`Failed to load comments:`,e)}finally{k(!1)}}},[e]);(0,K.useEffect)(()=>{if(h&&e){N();let t=q.channel(`comments:${e}`).on(`postgres_changes`,{event:`INSERT`,schema:`public`,table:`posts`,filter:`parent_id=eq.${e}`},()=>{N()}).subscribe();return()=>q.removeChannel(t)}},[h,e,N]);let P=async t=>{if(t.preventDefault(),!(!E.trim()||!f)){M(!0);try{await Re(e,f.id,E),D(``),x(e=>({...e,comments:(e.comments||0)+1})),p&&p(`Reply posted!`),N()}catch(e){console.error(`Failed to post comment:`,e),p&&p(`Failed to post reply.`)}finally{M(!1)}}},F=e=>e?K.isValidElement(e)?e:(0,J.jsx)(mn,{items:e}):null,I=(e,t)=>typeof e==`string`?(0,J.jsx)(`p`,{className:`whitespace-pre-line ${t||``}`,children:e}):e;return h?(0,J.jsxs)(`div`,{className:`flex flex-col`,children:[(0,J.jsxs)(`article`,{className:`p-5 dark:bg-black`,children:[(0,J.jsxs)(`div`,{className:`flex items-start justify-between`,children:[(0,J.jsxs)(`div`,{className:`flex items-start gap-x-3`,children:[(0,J.jsx)(`button`,{className:`shrink-0`,onClick:()=>d&&d(t.handle),children:(0,J.jsx)(`img`,{src:t.avatar,alt:t.handle,className:`size-12 rounded-full border border-zinc-200 bg-zinc-200 object-cover dark:border-zinc-700 dark:bg-zinc-800`})}),(0,J.jsxs)(`div`,{className:`flex flex-col`,children:[(0,J.jsx)(`div`,{className:`flex flex-wrap items-center gap-x-1`,children:(0,J.jsxs)(`button`,{className:`font-bold hover:underline text-zinc-900 dark:text-white flex items-center gap-1 text-base`,onClick:()=>d&&d(t.handle),children:[t.handle,t.verified&&(0,J.jsx)(Qt,{})]})}),(0,J.jsxs)(`span`,{className:`text-sm text-zinc-500 dark:text-zinc-400`,children:[`@`,t.handle]})]})]}),(0,J.jsx)(`button`,{className:`text-zinc-500 hover:bg-zinc-100 dark:hover:bg-zinc-800 rounded-full p-2`,children:(0,J.jsx)(B,{size:20})})]}),(0,J.jsx)(`div`,{className:`break-words text-zinc-900 dark:text-zinc-100 mt-4 text-xl leading-8 whitespace-pre-line`,children:I(r,a)}),F(o),m&&(0,J.jsx)(en,{poll:m}),s&&(0,J.jsx)(`div`,{className:`mt-4 border border-zinc-200 dark:border-zinc-700 rounded-2xl overflow-hidden shadow-sm`,children:(0,J.jsx)(rn,{...s})}),(0,J.jsx)(`div`,{className:`my-4 flex items-center text-zinc-500 dark:text-zinc-400 text-sm border-b border-zinc-100 dark:border-zinc-800 pb-4`,children:n||`Recent`}),(0,J.jsxs)(`div`,{className:`border-b border-zinc-100 dark:border-zinc-800 pb-4 flex items-center gap-x-6 text-zinc-500 dark:text-zinc-400 text-sm`,children:[(0,J.jsxs)(`div`,{className:`flex items-center gap-x-1`,children:[(0,J.jsx)(`span`,{className:`font-bold text-black dark:text-white`,children:b.comments||0}),` `,(0,J.jsx)(`span`,{className:`opacity-70`,children:`Comments`})]}),(0,J.jsxs)(`div`,{className:`flex items-center gap-x-1`,children:[(0,J.jsx)(`span`,{className:`font-bold text-black dark:text-white`,children:b.likes||0}),` `,(0,J.jsx)(`span`,{className:`opacity-70`,children:`Likes`})]})]}),(0,J.jsxs)(`div`,{className:`mt-4 flex w-full items-center justify-around py-1`,children:[(0,J.jsx)(on,{icon:j,onClick:()=>document.getElementById(`comment-input`)?.focus()}),(0,J.jsx)(on,{icon:U,onClick:C,active:y,activeColorClass:`text-emerald-500`}),(0,J.jsx)(on,{icon:g,onClick:S,active:v,activeColorClass:`text-rose-500`})]})]}),(0,J.jsx)(xn,{currentUser:f,newComment:E,setNewComment:D,handleSubmitComment:P,loading:A}),(0,J.jsx)(`div`,{className:`divide-y divide-zinc-100 dark:divide-zinc-800`,children:O?(0,J.jsx)(`div`,{className:`p-8 flex justify-center`,children:(0,J.jsx)(i,{className:`animate-spin text-violet-500`})}):w.map(e=>(0,J.jsx)(Cn,{...e,onUserClick:d,currentUser:f,showToast:p},e.id))})]}):(0,J.jsxs)(`article`,{onClick:l,className:`px-5 pt-4 pb-3 hover:bg-zinc-50/80 dark:hover:bg-zinc-900/40 transition-colors border-b border-zinc-100 dark:border-zinc-800 last:border-0 ${l?`cursor-pointer`:``}`,children:[u&&(0,J.jsxs)(`div`,{className:`mb-2 flex items-center space-x-1.5 text-[13px] text-zinc-500 font-semibold ml-1`,children:[(0,J.jsx)(U,{size:14,className:`text-zinc-400`}),(0,J.jsx)(`span`,{className:`hover:underline cursor-pointer flex items-center text-zinc-600 dark:text-zinc-400`,onClick:e=>{e.stopPropagation(),d&&d(u.handle||`kolin`)},children:(0,J.jsx)(`span`,{className:`truncate max-w-[150px]`,children:typeof u==`object`?u.name:u})}),(0,J.jsx)(`span`,{className:`text-zinc-400`,children:`reposted`})]}),(0,J.jsxs)(`div`,{className:`flex items-start gap-x-3`,children:[(0,J.jsx)(`button`,{className:`shrink-0 group`,onClick:e=>{e.stopPropagation(),d&&d(t.handle)},children:(0,J.jsx)(`img`,{src:t.avatar,alt:t.handle,className:`size-11 rounded-full border border-zinc-200 bg-zinc-200 object-cover dark:border-zinc-700 dark:bg-zinc-800 group-hover:brightness-95 transition-all`})}),(0,J.jsxs)(`div`,{className:`min-w-0 flex-1`,children:[(0,J.jsxs)(`div`,{className:`flex w-full items-start justify-between`,children:[(0,J.jsx)(`div`,{className:`flex flex-col min-w-0`,children:(0,J.jsxs)(`div`,{className:`flex flex-wrap items-center gap-x-1`,children:[(0,J.jsxs)(`button`,{className:`font-bold hover:underline text-zinc-900 dark:text-white flex items-center gap-1 truncate text-[15px]`,onClick:e=>{e.stopPropagation(),d&&d(t.handle)},children:[(0,J.jsx)(`span`,{className:`truncate`,children:t.handle}),t.verified&&(0,J.jsx)(Qt,{})]}),(0,J.jsxs)(`span`,{className:`text-zinc-400 text-sm ml-1 whitespace-nowrap`,children:[` `,n||`Recent`]})]})}),(0,J.jsx)(`button`,{className:`text-zinc-400 hover:bg-zinc-100 hover:text-zinc-700 dark:hover:bg-zinc-800 dark:hover:text-zinc-200 rounded-full p-2 -mr-2 transition-colors`,onClick:e=>e.stopPropagation(),children:(0,J.jsx)(B,{size:18})})]}),(0,J.jsxs)(`div`,{className:`break-words text-zinc-900 dark:text-zinc-100 mt-1 whitespace-pre-line text-[15px] leading-relaxed`,children:[I(r,a),F(o),m&&(0,J.jsx)(en,{poll:m,onVote:()=>p&&p(`Voted!`)}),s&&(0,J.jsx)(`div`,{className:`mt-3 border border-zinc-200 dark:border-zinc-700 rounded-2xl overflow-hidden bg-white dark:bg-zinc-900 hover:bg-zinc-50 dark:hover:bg-zinc-800 transition-colors cursor-pointer`,onClick:e=>e.stopPropagation(),children:(0,J.jsx)(rn,{...s})})]}),(0,J.jsx)(`div`,{className:`mt-3 flex w-full flex-wrap items-center justify-between gap-3 pr-4`,children:(0,J.jsxs)(`div`,{className:`flex items-center gap-x-6`,children:[(0,J.jsx)(on,{icon:j,count:b.comments,onClick:l}),(0,J.jsx)(on,{icon:U,count:b.mirrors,active:y,onClick:C,activeColorClass:`text-emerald-500`}),(0,J.jsx)(on,{icon:g,count:b.likes,active:v,onClick:S,activeColorClass:`text-rose-500`})]})})]})]})]})},wn=Cn,Tn=w(),En=()=>{let e=(0,Tn.c)(3),t;e[0]===Symbol.for(`react.memo_cache_sentinel`)?(t=(0,J.jsx)(`div`,{className:`size-11 rounded-full bg-zinc-200 dark:bg-zinc-800 shrink-0`}),e[0]=t):t=e[0];let n;e[1]===Symbol.for(`react.memo_cache_sentinel`)?(n=(0,J.jsx)(`div`,{className:`h-4 bg-zinc-200 dark:bg-zinc-800 rounded w-1/3`}),e[1]=n):n=e[1];let r;return e[2]===Symbol.for(`react.memo_cache_sentinel`)?(r=(0,J.jsx)(`div`,{className:`px-5 pt-4 pb-3 border-b border-zinc-100 dark:border-zinc-800 animate-pulse`,children:(0,J.jsxs)(`div`,{className:`flex items-start gap-x-3`,children:[t,(0,J.jsxs)(`div`,{className:`flex-1 space-y-3`,children:[n,(0,J.jsxs)(`div`,{className:`space-y-2`,children:[(0,J.jsx)(`div`,{className:`h-3 bg-zinc-200 dark:bg-zinc-800 rounded w-full`}),(0,J.jsx)(`div`,{className:`h-3 bg-zinc-200 dark:bg-zinc-800 rounded w-5/6`})]}),(0,J.jsx)(`div`,{className:`h-48 bg-zinc-200 dark:bg-zinc-800 rounded-xl w-full`})]})]})}),e[2]=r):r=e[2],r},Dn=w(),On=e=>{let t=(0,Dn.c)(35),{onStoryClick:n,onAddStory:r}=e,{currentUser:i}=Y(),{addToast:a}=X(),o=z(),s;t[0]===Symbol.for(`react.memo_cache_sentinel`)?(s={queryKey:[`posts`],queryFn:De},t[0]=s):s=t[0];let{data:c,isLoading:l}=f(s),u;t[1]===c?u=t[2]:(u=c===void 0?[]:c,t[1]=c,t[2]=u);let d=u,p;t[3]===Symbol.for(`react.memo_cache_sentinel`)?(p={queryKey:[`stories`],queryFn:We},t[3]=p):p=t[3];let{data:m,isLoading:h}=f(p),g;t[4]===m?g=t[5]:(g=m===void 0?[]:m,t[4]=m,t[5]=g);let _=g,v;t[6]===d?v=t[7]:(v=d.filter(kn),t[6]=d,t[7]=v);let y=v,b;t[8]===o?b=t[9]:(b=e=>{o(`/post/${e}`)},t[8]=o,t[9]=b);let x=b,S;t[10]===o?S=t[11]:(S=e=>{o(`/u/${e}`)},t[10]=o,t[11]=S);let C=S;if(l||h){let e;return t[12]===Symbol.for(`react.memo_cache_sentinel`)?(e=(0,J.jsxs)(`div`,{className:`border-y md:border border-zinc-100 dark:border-zinc-800 bg-white dark:bg-black rounded-none md:rounded-xl overflow-hidden min-h-screen`,children:[(0,J.jsxs)(`div`,{className:`flex gap-3 overflow-x-auto no-scrollbar py-4 px-4 bg-white dark:bg-black border-b border-zinc-100 dark:border-zinc-800`,children:[(0,J.jsx)(`div`,{className:`size-16 rounded-full bg-zinc-100 dark:bg-zinc-900 animate-pulse shrink-0`}),(0,J.jsx)(`div`,{className:`size-16 rounded-full bg-zinc-100 dark:bg-zinc-900 animate-pulse shrink-0`}),(0,J.jsx)(`div`,{className:`size-16 rounded-full bg-zinc-100 dark:bg-zinc-900 animate-pulse shrink-0`})]}),[1,2,3].map(An)]}),t[12]=e):e=t[12],e}let w;t[13]!==i||t[14]!==r?(w=i&&(0,J.jsx)(Xt,{user:i,isAddStory:!0,onClick:r}),t[13]=i,t[14]=r,t[15]=w):w=t[15];let T;if(t[16]!==n||t[17]!==_){let e;t[19]===n?e=t[20]:(e=e=>(0,J.jsx)(Xt,{user:e.user,onClick:()=>n(e)},e.id),t[19]=n,t[20]=e),T=_.map(e),t[16]=n,t[17]=_,t[18]=T}else T=t[18];let E;t[21]!==w||t[22]!==T?(E=(0,J.jsxs)(`div`,{className:`flex gap-4 overflow-x-auto no-scrollbar py-4 px-4 bg-white dark:bg-black border-b border-zinc-100 dark:border-zinc-800`,children:[w,T]}),t[21]=w,t[22]=T,t[23]=E):E=t[23];let D;t[24]!==a||t[25]!==i||t[26]!==x||t[27]!==C||t[28]!==y?(D=y.length>0?y.map(e=>(0,J.jsx)(wn,{...e,currentUser:i,showToast:a,onClick:()=>x(e.id),onUserClick:C},e.id)):(0,J.jsxs)(`div`,{className:`p-20 text-center text-zinc-500`,children:[(0,J.jsx)(`p`,{className:`text-lg font-medium`,children:`No posts yet.`}),(0,J.jsx)(`p`,{className:`text-sm`,children:`Be the first to share something amazing!`})]}),t[24]=a,t[25]=i,t[26]=x,t[27]=C,t[28]=y,t[29]=D):D=t[29];let O;t[30]===D?O=t[31]:(O=(0,J.jsx)(`div`,{className:`border-y md:border border-zinc-100 dark:border-zinc-800 bg-white dark:bg-black rounded-none md:rounded-xl overflow-hidden min-h-screen shadow-sm pb-24`,children:D}),t[30]=D,t[31]=O);let k;return t[32]!==E||t[33]!==O?(k=(0,J.jsxs)(`div`,{children:[E,O]}),t[32]=E,t[33]=O,t[34]=k):k=t[34],k};function kn(e){return!e.parent_id}function An(e){return(0,J.jsx)(En,{},e)}var jn=w(),Mn=e=>{let t=(0,jn.c)(36),{profile:n,onUserClick:r,isCommunity:i}=e,a=i===void 0?!1:i,o;t[0]!==r||t[1]!==n.handle?(o=()=>r(n.handle),t[0]=r,t[1]=n.handle,t[2]=o):o=t[2];let s=`size-12 object-cover border border-zinc-200 dark:border-zinc-800 shadow-sm ${a?`rounded-2xl`:`rounded-full`}`,c;t[3]!==n.avatar||t[4]!==n.handle||t[5]!==s?(c=(0,J.jsx)(`img`,{src:n.avatar,className:s,alt:n.handle}),t[3]=n.avatar,t[4]=n.handle,t[5]=s,t[6]=c):c=t[6];let l;t[7]===n.name?l=t[8]:(l=(0,J.jsx)(`span`,{className:`font-bold text-zinc-900 dark:text-white group-hover:underline leading-none`,children:n.name}),t[7]=n.name,t[8]=l);let u;t[9]===n.verified?u=t[10]:(u=n.verified&&(0,J.jsx)(Qt,{}),t[9]=n.verified,t[10]=u);let d;t[11]!==l||t[12]!==u?(d=(0,J.jsxs)(`div`,{className:`flex items-center gap-1`,children:[l,u]}),t[11]=l,t[12]=u,t[13]=d):d=t[13];let f;t[14]===n.handle?f=t[15]:(f=(0,J.jsxs)(`span`,{className:`text-sm text-zinc-500 mt-0.5`,children:[`@`,n.handle]}),t[14]=n.handle,t[15]=f);let p;t[16]!==a||t[17]!==n.members?(p=a&&n.members&&(0,J.jsxs)(`span`,{className:`text-xs text-zinc-400 mt-1`,children:[n.members,` members`]}),t[16]=a,t[17]=n.members,t[18]=p):p=t[18];let m;t[19]!==a||t[20]!==n.followers?(m=!a&&n.followers&&(0,J.jsxs)(`span`,{className:`text-xs text-zinc-400 mt-1`,children:[n.followers,` followers`]}),t[19]=a,t[20]=n.followers,t[21]=m):m=t[21];let h;t[22]!==m||t[23]!==d||t[24]!==f||t[25]!==p?(h=(0,J.jsxs)(`div`,{className:`flex flex-col`,children:[d,f,p,m]}),t[22]=m,t[23]=d,t[24]=f,t[25]=p,t[26]=h):h=t[26];let g;t[27]!==h||t[28]!==c?(g=(0,J.jsxs)(`div`,{className:`flex items-center gap-3`,children:[c,h]}),t[27]=h,t[28]=c,t[29]=g):g=t[29];let _=a?`Join`:`Follow`,v;t[30]===_?v=t[31]:(v=(0,J.jsx)(Z,{variant:`outline`,className:`!w-auto !py-1.5 !px-4 text-sm font-bold rounded-full border-zinc-200 dark:border-zinc-700 hover:bg-zinc-100 dark:hover:bg-zinc-800`,onClick:Nn,children:_}),t[30]=_,t[31]=v);let y;return t[32]!==g||t[33]!==v||t[34]!==o?(y=(0,J.jsxs)(`div`,{className:`flex items-center justify-between p-4 border-b border-zinc-100 dark:border-zinc-800 hover:bg-zinc-50 dark:hover:bg-zinc-900/40 transition-colors group cursor-pointer`,onClick:o,children:[g,v]}),t[32]=g,t[33]=v,t[34]=o,t[35]=y):y=t[35],y};function Nn(e){e.stopPropagation()}var Pn=w(),Fn=()=>{let e=(0,Pn.c)(56),{currentUser:t}=Y(),{addToast:n}=X(),r=z(),[i,a]=(0,K.useState)(`Users`),[o,s]=(0,K.useState)(``),c;e[0]===Symbol.for(`react.memo_cache_sentinel`)?(c={queryKey:[`posts`],queryFn:De},e[0]=c):c=e[0];let{data:l,isLoading:u}=f(c),d;e[1]===l?d=e[2]:(d=l===void 0?[]:l,e[1]=l,e[2]=d);let p=d,m;e[3]===Symbol.for(`react.memo_cache_sentinel`)?(m={queryKey:[`profiles`],queryFn:Ae},e[3]=m):m=e[3];let{data:h,isLoading:g}=f(m),_;e[4]===h?_=e[5]:(_=h===void 0?{}:h,e[4]=h,e[5]=_);let v=_,y;e[6]===Symbol.for(`react.memo_cache_sentinel`)?(y=[`Users`,`Communities`,`Reels`],e[6]=y):y=e[6];let b=y,x;e[7]!==v||e[8]!==o?(x=Object.values(v).filter(In),o&&(x=x.filter(e=>e.name?.toLowerCase().includes(o.toLowerCase())||e.handle?.toLowerCase().includes(o.toLowerCase()))),e[7]=v,e[8]=o,e[9]=x):x=e[9];let S=x,C;e[10]!==v||e[11]!==o?(C=Object.values(v).filter(Ln),o&&(C=C.filter(e=>e.name?.toLowerCase().includes(o.toLowerCase())||e.handle?.toLowerCase().includes(o.toLowerCase()))),e[10]=v,e[11]=o,e[12]=C):C=e[12];let w=C,T;if(e[13]!==p||e[14]!==o){if(T=p.filter(Rn),o){let t;e[16]===o?t=e[17]:(t=e=>e.content?.toLowerCase().includes(o.toLowerCase()),e[16]=o,e[17]=t),T=T.filter(t)}e[13]=p,e[14]=o,e[15]=T}else T=e[15];let E=T,D;e[18]===r?D=e[19]:(D=e=>{r(`/post/${e}`)},e[18]=r,e[19]=D);let O=D,k;e[20]===r?k=e[21]:(k=e=>{r(`/u/${e}`)},e[20]=r,e[21]=k);let A=k;if(u||g){let t;return e[22]===Symbol.for(`react.memo_cache_sentinel`)?(t=(0,J.jsx)(`div`,{className:`border-y md:border border-zinc-100 dark:border-zinc-800 bg-white dark:bg-black rounded-none md:rounded-xl overflow-hidden min-h-screen`,children:[1,2,3].map(zn)}),e[22]=t):t=e[22],t}let j;e[23]===Symbol.for(`react.memo_cache_sentinel`)?(j=()=>s(``),e[23]=j):j=e[23];let M;e[24]===i?M=e[25]:(M=i.toLowerCase(),e[24]=i,e[25]=M);let N=`Search ${M}...`,P;e[26]!==o||e[27]!==N?(P=(0,J.jsx)(`div`,{className:`p-4`,children:(0,J.jsx)(vt,{value:o,onChange:s,onClear:j,placeholder:N})}),e[26]=o,e[27]=N,e[28]=P):P=e[28];let F;e[29]===i?F=e[30]:(F=(0,J.jsx)(`ul`,{className:`flex list-none justify-around px-5`,children:b.map(e=>(0,J.jsx)(`li`,{onClick:()=>a(e),className:`relative cursor-pointer py-4 px-2 text-sm font-semibold transition-all border-b-2 whitespace-nowrap flex-1 text-center ${i===e?`text-black dark:text-white border-black dark:border-white`:`text-zinc-500 border-transparent hover:text-zinc-800 dark:hover:text-zinc-300`}`,children:e},e))}),e[29]=i,e[30]=F);let I;e[31]!==P||e[32]!==F?(I=(0,J.jsxs)(`div`,{className:`sticky top-0 bg-white/90 dark:bg-black/90 backdrop-blur-md z-10 border-b border-zinc-100 dark:border-zinc-800`,children:[P,F]}),e[31]=P,e[32]=F,e[33]=I):I=e[33];let L;e[34]!==i||e[35]!==A||e[36]!==S?(L=i===`Users`&&(0,J.jsx)(`div`,{className:`divide-y divide-zinc-100 dark:divide-zinc-800`,children:S.length>0?S.map(e=>(0,J.jsx)(Mn,{profile:e,onUserClick:A},e.handle)):(0,J.jsx)(`div`,{className:`p-20 text-center text-zinc-500`,children:(0,J.jsx)(`p`,{className:`font-bold`,children:`No users found`})})}),e[34]=i,e[35]=A,e[36]=S,e[37]=L):L=e[37];let R;e[38]!==i||e[39]!==w||e[40]!==A?(R=i===`Communities`&&(0,J.jsx)(`div`,{className:`divide-y divide-zinc-100 dark:divide-zinc-800`,children:w.length>0?w.map(e=>(0,J.jsx)(Mn,{profile:e,onUserClick:A,isCommunity:!0},e.handle)):(0,J.jsx)(`div`,{className:`p-20 text-center text-zinc-500`,children:(0,J.jsx)(`p`,{className:`font-bold`,children:`No communities found`})})}),e[38]=i,e[39]=w,e[40]=A,e[41]=R):R=e[41];let B;e[42]!==i||e[43]!==n||e[44]!==t||e[45]!==O||e[46]!==A||e[47]!==E?(B=i===`Reels`&&(0,J.jsx)(`div`,{children:E.length>0?E.map(e=>(0,J.jsx)(wn,{...e,currentUser:t,showToast:n,onClick:()=>O(e.id),onUserClick:A},e.id)):(0,J.jsx)(`div`,{className:`p-20 text-center text-zinc-500`,children:(0,J.jsx)(`p`,{className:`font-bold`,children:`No reels found`})})}),e[42]=i,e[43]=n,e[44]=t,e[45]=O,e[46]=A,e[47]=E,e[48]=B):B=e[48];let V;e[49]!==L||e[50]!==R||e[51]!==B?(V=(0,J.jsxs)(`div`,{children:[L,R,B]}),e[49]=L,e[50]=R,e[51]=B,e[52]=V):V=e[52];let H;return e[53]!==I||e[54]!==V?(H=(0,J.jsxs)(`div`,{className:`border-y md:border border-zinc-100 dark:border-zinc-800 bg-white dark:bg-black rounded-none md:rounded-xl overflow-hidden min-h-screen shadow-sm pb-20`,children:[I,V]}),e[53]=I,e[54]=V,e[55]=H):H=e[55],H};function In(e){return e.type!==`community`}function Ln(e){return e.type===`community`}function Rn(e){return e.type===`video`}function zn(e){return(0,J.jsx)(En,{},e)}var Bn=w(),Vn=e=>{let t=(0,Bn.c)(50),{reel:n}=e,r=(0,K.useRef)(null),[i,a]=(0,K.useState)(!1),o=(0,K.useRef)(0),s=Array.isArray(n.media)?n.media[0]?.src||n.media[0]?.url:n.media?.src||n.media?.url||n.url,c,l;t[0]===Symbol.for(`react.memo_cache_sentinel`)?(c=()=>{let e=new IntersectionObserver(e=>{let[t]=e;r.current?.plyr&&(t.isIntersecting?r.current.plyr.play().catch(()=>{r.current.plyr.muted=!0,r.current.plyr.play()}):r.current.plyr.pause())},{threshold:.8}),t=r.current?.elements?.container;return t&&e.observe(t),()=>{t&&e.unobserve(t)}},l=[],t[0]=c,t[1]=l):(c=t[0],l=t[1]),(0,K.useEffect)(c,l);let u;t[2]===Symbol.for(`react.memo_cache_sentinel`)?(u=()=>{let e=Date.now();e-o.current<300&&(a(!0),setTimeout(()=>a(!1),1e3)),o.current=e},t[2]=u):u=t[2];let d=u,f;t[3]===s?f=t[4]:(f={type:`video`,sources:[{src:s,type:`video/mp4`}]},t[3]=s,t[4]=f);let p;t[5]===Symbol.for(`react.memo_cache_sentinel`)?(p={controls:[],loop:{active:!0},clickToPlay:!0,ratio:`9:16`},t[5]=p):p=t[5];let m;t[6]===f?m=t[7]:(m={source:f,options:p},t[6]=f,t[7]=m);let h=m,_;t[8]===h?_=t[9]:(_=(0,J.jsx)(`div`,{className:`w-full h-full max-w-[450px]`,children:(0,J.jsx)(le,{ref:r,...h})}),t[8]=h,t[9]=_);let v;t[10]===i?v=t[11]:(v=i&&(0,J.jsx)(W.div,{initial:{scale:0,opacity:0},animate:{scale:1.5,opacity:1},exit:{scale:2,opacity:0},className:`absolute inset-0 flex items-center justify-center pointer-events-none z-50`,children:(0,J.jsx)(g,{size:100,fill:`white`,className:`text-white drop-shadow-2xl`})}),t[10]=i,t[11]=v);let y;t[12]===v?y=t[13]:(y=(0,J.jsx)(ae,{children:v}),t[12]=v,t[13]=y);let b;t[14]===Symbol.for(`react.memo_cache_sentinel`)?(b=(0,J.jsx)(`div`,{className:`absolute inset-0 bg-gradient-to-b from-black/20 via-transparent to-black/60 pointer-events-none`}),t[14]=b):b=t[14];let x=n.user?.avatar,S;t[15]===x?S=t[16]:(S=(0,J.jsx)(`img`,{src:x,className:`size-10 rounded-full border-2 border-white object-cover`,alt:``}),t[15]=x,t[16]=S);let C=n.user?.handle,w;t[17]===C?w=t[18]:(w=(0,J.jsxs)(`span`,{className:`font-bold`,children:[`@`,C]}),t[17]=C,t[18]=w);let T;t[19]===Symbol.for(`react.memo_cache_sentinel`)?(T=(0,J.jsx)(`button`,{className:`bg-white text-black text-xs font-bold px-3 py-1 rounded-full ml-2 hover:scale-105 active:scale-95 transition-all`,children:`Follow`}),t[19]=T):T=t[19];let E;t[20]!==S||t[21]!==w?(E=(0,J.jsxs)(`div`,{className:`flex items-center gap-2 mb-3 pointer-events-auto`,children:[S,w,T]}),t[20]=S,t[21]=w,t[22]=E):E=t[22];let D;t[23]===n.content?D=t[24]:(D=(0,J.jsx)(`p`,{className:`text-sm mb-3 line-clamp-2`,children:n.content}),t[23]=n.content,t[24]=D);let k;t[25]===Symbol.for(`react.memo_cache_sentinel`)?(k=(0,J.jsx)(O,{size:14,className:`animate-spin-slow`}),t[25]=k):k=t[25];let A=n.user?.handle,M;t[26]===A?M=t[27]:(M=(0,J.jsxs)(`div`,{className:`flex items-center gap-2 text-xs opacity-90`,children:[k,(0,J.jsxs)(`span`,{children:[`Original Audio - `,A]})]}),t[26]=A,t[27]=M);let P;t[28]!==E||t[29]!==D||t[30]!==M?(P=(0,J.jsxs)(`div`,{className:`absolute bottom-20 left-4 right-16 text-white pointer-events-none`,children:[E,D,M]}),t[28]=E,t[29]=D,t[30]=M,t[31]=P):P=t[31];let F;t[32]===Symbol.for(`react.memo_cache_sentinel`)?(F=(0,J.jsx)(`button`,{className:`p-3 bg-zinc-800/50 rounded-full text-white backdrop-blur-md hover:bg-zinc-700 transition-colors active:scale-90`,children:(0,J.jsx)(g,{size:28})}),t[32]=F):F=t[32];let I=n.stats?.likes||0,L;t[33]===I?L=t[34]:(L=(0,J.jsxs)(`div`,{className:`flex flex-col items-center gap-1`,children:[F,(0,J.jsx)(`span`,{className:`text-white text-xs font-bold`,children:I})]}),t[33]=I,t[34]=L);let R;t[35]===Symbol.for(`react.memo_cache_sentinel`)?(R=(0,J.jsx)(`button`,{className:`p-3 bg-zinc-800/50 rounded-full text-white backdrop-blur-md hover:bg-zinc-700 transition-colors active:scale-90`,children:(0,J.jsx)(j,{size:28})}),t[35]=R):R=t[35];let z=n.stats?.comments||0,B;t[36]===z?B=t[37]:(B=(0,J.jsxs)(`div`,{className:`flex flex-col items-center gap-1`,children:[R,(0,J.jsx)(`span`,{className:`text-white text-xs font-bold`,children:z})]}),t[36]=z,t[37]=B);let V;t[38]===Symbol.for(`react.memo_cache_sentinel`)?(V=(0,J.jsx)(`button`,{className:`p-3 bg-zinc-800/50 rounded-full text-white backdrop-blur-md hover:bg-zinc-700 transition-colors active:scale-90`,children:(0,J.jsx)(N,{size:28})}),t[38]=V):V=t[38];let H=n.stats?.shares||0,U;t[39]===H?U=t[40]:(U=(0,J.jsxs)(`div`,{className:`flex flex-col items-center gap-1`,children:[V,(0,J.jsx)(`span`,{className:`text-white text-xs font-bold`,children:H})]}),t[39]=H,t[40]=U);let ee;t[41]!==L||t[42]!==B||t[43]!==U?(ee=(0,J.jsxs)(`div`,{className:`absolute bottom-20 right-2 flex flex-col items-center gap-6 z-10`,children:[L,B,U]}),t[41]=L,t[42]=B,t[43]=U,t[44]=ee):ee=t[44];let te;return t[45]!==P||t[46]!==ee||t[47]!==_||t[48]!==y?(te=(0,J.jsxs)(`div`,{className:`relative h-screen w-full bg-black snap-start flex items-center justify-center overflow-hidden`,onClick:d,children:[_,y,b,P,ee]}),t[45]=P,t[46]=ee,t[47]=_,t[48]=y,t[49]=te):te=t[49],te},Hn=w(),Un=()=>{let e=(0,Hn.c)(10),{posts:t,loading:n}=st(),r,a,o;if(e[0]!==n||e[1]!==t){o=Symbol.for(`react.early_return_sentinel`);bb0:{let s=t.filter(Wn);if(n){let t;e[5]===Symbol.for(`react.memo_cache_sentinel`)?(t=(0,J.jsx)(`div`,{className:`h-screen w-full flex items-center justify-center bg-black`,children:(0,J.jsx)(i,{size:40,className:`animate-spin text-white`})}),e[5]=t):t=e[5],o=t;break bb0}if(s.length===0){let t;e[6]===Symbol.for(`react.memo_cache_sentinel`)?(t=(0,J.jsx)(`div`,{className:`h-screen w-full flex flex-col items-center justify-center bg-black text-white gap-4`,children:(0,J.jsx)(`p`,{className:`text-zinc-500`,children:`No reels found.`})}),e[6]=t):t=e[6],o=t;break bb0}r=`h-screen w-full snap-y snap-mandatory overflow-y-auto no-scrollbar bg-black md:rounded-xl`,a=s.map(Gn)}e[0]=n,e[1]=t,e[2]=r,e[3]=a,e[4]=o}else r=e[2],a=e[3],o=e[4];if(o!==Symbol.for(`react.early_return_sentinel`))return o;let s;return e[7]!==r||e[8]!==a?(s=(0,J.jsx)(`div`,{className:r,children:a}),e[7]=r,e[8]=a,e[9]=s):s=e[9],s};function Wn(e){return e.type===`video`||e.category===`video`}function Gn(e){return(0,J.jsx)(Vn,{reel:e},e.id)}var Kn=w(),qn=e=>{let t=(0,Kn.c)(18),{conversations:n,onSelect:r,selectedId:i,searchQuery:a,onSearchChange:o}=e,s;t[0]===Symbol.for(`react.memo_cache_sentinel`)?(s=(0,J.jsx)(re,{size:18,className:`absolute left-3 top-2.5 text-zinc-400 group-focus-within:text-violet-500`}),t[0]=s):s=t[0];let c;t[1]===o?c=t[2]:(c=e=>o(e.target.value),t[1]=o,t[2]=c);let l;t[3]!==a||t[4]!==c?(l=(0,J.jsx)(`div`,{className:`p-4 border-b border-zinc-100 dark:border-zinc-800`,children:(0,J.jsxs)(`div`,{className:`relative group`,children:[s,(0,J.jsx)(`input`,{type:`text`,placeholder:`Search messages...`,className:`w-full bg-zinc-100 dark:bg-zinc-900 border-none rounded-xl py-2 pl-10 pr-4 text-sm outline-none focus:ring-1 focus:ring-violet-500 transition-all`,value:a,onChange:c})]})}),t[3]=a,t[4]=c,t[5]=l):l=t[5];let u;if(t[6]!==n||t[7]!==r||t[8]!==i){let e;t[10]!==r||t[11]!==i?(e=e=>(0,J.jsxs)(`div`,{onClick:()=>r(e),className:`flex items-center gap-3 p-4 cursor-pointer transition-colors hover:bg-zinc-50 dark:hover:bg-zinc-900 ${i===e.id?`bg-zinc-50 dark:bg-zinc-900 border-r-2 border-violet-500`:``}`,children:[(0,J.jsx)(`img`,{src:e.user.avatar,className:`size-12 rounded-full object-cover shrink-0`,alt:``}),(0,J.jsxs)(`div`,{className:`flex-1 min-w-0`,children:[(0,J.jsxs)(`div`,{className:`flex justify-between items-center mb-0.5`,children:[(0,J.jsx)(`span`,{className:`font-bold dark:text-white truncate`,children:e.user.name}),(0,J.jsx)(`span`,{className:`text-xs text-zinc-500 whitespace-nowrap ml-2`,children:e.time})]}),(0,J.jsxs)(`div`,{className:`flex justify-between items-center`,children:[(0,J.jsx)(`p`,{className:`text-zinc-500 text-sm truncate pr-2`,children:e.lastMessage}),e.unread>0&&(0,J.jsx)(`span`,{className:`bg-violet-600 text-white text-[10px] font-bold size-5 rounded-full flex items-center justify-center shrink-0`,children:e.unread})]})]})]},e.id),t[10]=r,t[11]=i,t[12]=e):e=t[12],u=n.map(e),t[6]=n,t[7]=r,t[8]=i,t[9]=u}else u=t[9];let d;t[13]===u?d=t[14]:(d=(0,J.jsx)(`div`,{className:`flex-1 overflow-y-auto`,children:u}),t[13]=u,t[14]=d);let f;return t[15]!==l||t[16]!==d?(f=(0,J.jsxs)(`div`,{className:`flex-1 flex flex-col min-w-0 bg-white dark:bg-black`,children:[l,d]}),t[15]=l,t[16]=d,t[17]=f):f=t[17],f},Jn=w(),Yn=e=>{let t=(0,Jn.c)(61),{conversation:n,messages:r,onBack:a,onSendMessage:o,isLoading:s}=e,[c,l]=(0,K.useState)(``),u=(0,K.useRef)(null),d;t[0]===Symbol.for(`react.memo_cache_sentinel`)?(d=()=>{u.current&&(u.current.scrollTop=u.current.scrollHeight)},t[0]=d):d=t[0];let f;t[1]===r?f=t[2]:(f=[r],t[1]=r,t[2]=f),(0,K.useEffect)(d,f);let p;t[3]!==n.id||t[4]!==o||t[5]!==c?(p=e=>{e.preventDefault(),c.trim()&&(o(n.id,c),l(``))},t[3]=n.id,t[4]=o,t[5]=c,t[6]=p):p=t[6];let h=p,g;t[7]===Symbol.for(`react.memo_cache_sentinel`)?(g=(0,J.jsx)(S,{size:20}),t[7]=g):g=t[7];let _;t[8]===a?_=t[9]:(_=(0,J.jsx)(`button`,{onClick:a,className:`md:hidden p-1 rounded-full hover:bg-zinc-100 dark:hover:bg-zinc-800 dark:text-white transition-colors`,children:g}),t[8]=a,t[9]=_);let v;t[10]===n.user.avatar?v=t[11]:(v=(0,J.jsx)(`img`,{src:n.user.avatar,className:`size-10 rounded-full object-cover border border-zinc-200 dark:border-zinc-700`,alt:``}),t[10]=n.user.avatar,t[11]=v);let y;t[12]===n.user.name?y=t[13]:(y=(0,J.jsx)(`div`,{className:`font-bold dark:text-white`,children:n.user.name}),t[12]=n.user.name,t[13]=y);let b;t[14]===Symbol.for(`react.memo_cache_sentinel`)?(b=(0,J.jsx)(`div`,{className:`text-xs text-emerald-500 font-medium`,children:`Online`}),t[14]=b):b=t[14];let x;t[15]===y?x=t[16]:(x=(0,J.jsxs)(`div`,{children:[y,b]}),t[15]=y,t[16]=x);let C;t[17]!==_||t[18]!==v||t[19]!==x?(C=(0,J.jsxs)(`div`,{className:`flex items-center gap-3`,children:[_,v,x]}),t[17]=_,t[18]=v,t[19]=x,t[20]=C):C=t[20];let w;t[21]===Symbol.for(`react.memo_cache_sentinel`)?(w=(0,J.jsx)(`button`,{className:`p-2 hover:bg-zinc-100 dark:hover:bg-zinc-800 rounded-full dark:text-zinc-400`,children:(0,J.jsx)(m,{size:20})}),t[21]=w):w=t[21];let T;t[22]===C?T=t[23]:(T=(0,J.jsxs)(`div`,{className:`p-4 border-b border-zinc-100 dark:border-zinc-800 flex items-center justify-between shrink-0 bg-white/80 dark:bg-black/80 backdrop-blur-md sticky top-0 z-10`,children:[C,w]}),t[22]=C,t[23]=T);let E;t[24]===n.user.avatar?E=t[25]:(E=(0,J.jsx)(`img`,{src:n.user.avatar,className:`size-20 rounded-full mx-auto mb-3 border-4 border-zinc-50 dark:border-zinc-900 shadow-sm`,alt:``}),t[24]=n.user.avatar,t[25]=E);let D;t[26]===n.user.name?D=t[27]:(D=(0,J.jsx)(`h4`,{className:`font-bold dark:text-white text-lg`,children:n.user.name}),t[26]=n.user.name,t[27]=D);let O;t[28]===n.user.handle?O=t[29]:(O=(0,J.jsxs)(`p`,{className:`text-sm text-zinc-500`,children:[`@`,n.user.handle]}),t[28]=n.user.handle,t[29]=O);let k;t[30]===n.user.handle?k=t[31]:(k=(0,J.jsxs)(`p`,{className:`text-xs text-zinc-400 mt-4 max-w-xs mx-auto`,children:[`This is the beginning of your direct message history with `,(0,J.jsxs)(`span`,{className:`font-bold`,children:[`@`,n.user.handle]})]}),t[30]=n.user.handle,t[31]=k);let A;t[32]!==E||t[33]!==D||t[34]!==O||t[35]!==k?(A=(0,J.jsxs)(`div`,{className:`text-center py-8`,children:[E,D,O,k]}),t[32]=E,t[33]=D,t[34]=O,t[35]=k,t[36]=A):A=t[36];let j;t[37]!==s||t[38]!==r?(j=s&&r.length===0?(0,J.jsx)(`div`,{className:`flex justify-center p-8`,children:(0,J.jsx)(i,{className:`animate-spin text-violet-500`,size:32})}):r.map(Xn),t[37]=s,t[38]=r,t[39]=j):j=t[39];let M;t[40]!==A||t[41]!==j?(M=(0,J.jsxs)(`div`,{className:`flex-1 overflow-y-auto p-4 space-y-4`,ref:u,children:[A,j]}),t[40]=A,t[41]=j,t[42]=M):M=t[42];let N;t[43]===Symbol.for(`react.memo_cache_sentinel`)?(N=(0,J.jsx)(`button`,{type:`button`,className:`p-2 text-zinc-500 hover:text-violet-600 transition-colors`,children:(0,J.jsx)(ue,{size:20})}),t[43]=N):N=t[43];let P;t[44]===Symbol.for(`react.memo_cache_sentinel`)?(P=e=>l(e.target.value),t[44]=P):P=t[44];let L;t[45]===c?L=t[46]:(L=(0,J.jsx)(`input`,{type:`text`,className:`flex-1 bg-transparent border-none outline-none dark:text-white py-1 px-1`,placeholder:`Start a new message`,value:c,onChange:P}),t[45]=c,t[46]=L);let R;t[47]===Symbol.for(`react.memo_cache_sentinel`)?(R=(0,J.jsx)(`button`,{type:`button`,className:`p-2 text-zinc-500 hover:text-violet-600 transition-colors`,children:(0,J.jsx)(I,{size:20})}),t[47]=R):R=t[47];let z;t[48]===c?z=t[49]:(z=c.trim(),t[48]=c,t[49]=z);let B=!z,V;t[50]===Symbol.for(`react.memo_cache_sentinel`)?(V=(0,J.jsx)(F,{size:18}),t[50]=V):V=t[50];let H;t[51]===B?H=t[52]:(H=(0,J.jsx)(Z,{type:`submit`,className:`size-10 !p-0 rounded-xl`,disabled:B,children:V}),t[51]=B,t[52]=H);let U;t[53]!==h||t[54]!==L||t[55]!==H?(U=(0,J.jsx)(`div`,{className:`p-4 border-t border-zinc-100 dark:border-zinc-800 bg-white dark:bg-black shrink-0`,children:(0,J.jsxs)(`form`,{onSubmit:h,className:`flex items-center gap-2 bg-zinc-100 dark:bg-zinc-900 p-2 rounded-2xl border border-transparent focus-within:border-violet-500 transition-all`,children:[N,L,R,H]})}),t[53]=h,t[54]=L,t[55]=H,t[56]=U):U=t[56];let W;return t[57]!==T||t[58]!==M||t[59]!==U?(W=(0,J.jsxs)(`div`,{className:`flex-1 flex flex-col h-full bg-white dark:bg-black md:border-l md:border-zinc-100 dark:md:border-zinc-800`,children:[T,M,U]}),t[57]=T,t[58]=M,t[59]=U,t[60]=W):W=t[60],W};function Xn(e){return(0,J.jsx)(`div`,{className:`flex ${e.sender===`me`?`justify-end`:`justify-start`}`,children:(0,J.jsxs)(`div`,{className:`max-w-[75%] px-4 py-2.5 rounded-2xl text-[15px] shadow-sm ${e.sender===`me`?`bg-violet-600 text-white rounded-tr-none`:`bg-zinc-100 dark:bg-zinc-800 dark:text-white rounded-tl-none`}`,children:[(0,J.jsx)(`p`,{children:e.text}),(0,J.jsx)(`div`,{className:`text-[10px] mt-1 ${e.sender===`me`?`text-violet-200`:`text-zinc-400`}`,children:e.time})]})},e.id)}var Zn=w();const Qn=e=>{let t=(0,Zn.c)(33),n=d(),r;t[0]===Symbol.for(`react.memo_cache_sentinel`)?(r={},t[0]=r):r=t[0];let[i,a]=(0,K.useState)(r),o=e?.id,s;t[1]===o?s=t[2]:(s=[`conversations`,o],t[1]=o,t[2]=s);let l;t[3]===e?.id?l=t[4]:(l=()=>Pe(e?.id),t[3]=e?.id,t[4]=l);let u=!!e?.id,p;t[5]!==s||t[6]!==l||t[7]!==u?(p={queryKey:s,queryFn:l,enabled:u},t[5]=s,t[6]=l,t[7]=u,t[8]=p):p=t[8];let{data:m,isLoading:h}=f(p),g;t[9]===m?g=t[10]:(g=m===void 0?[]:m,t[9]=m,t[10]=g);let _=g,v,y;t[11]!==e||t[12]!==n?(v=()=>{if(!e?.id)return;let t=q.channel(`user_messages:${e.id}`).on(`postgres_changes`,{event:`INSERT`,schema:`public`,table:`messages`},t=>{let r=t.new;a(e=>({...e,[r.conversation_id]:[...e[r.conversation_id]||[],r]})),n.invalidateQueries([`conversations`,e.id])}).subscribe();return()=>q.removeChannel(t)},y=[e,n],t[11]=e,t[12]=n,t[13]=v,t[14]=y):(v=t[13],y=t[14]),(0,K.useEffect)(v,y);let b;t[15]===e?b=t[16]:(b=t=>{let{convId:n,text:r}=t;return Ie(n,e.id,r)},t[15]=e,t[16]=b);let x;t[17]===n?x=t[18]:(x=(e,t)=>{let{convId:r}=t;n.invalidateQueries([`messages`,r])},t[17]=n,t[18]=x);let S;t[19]!==b||t[20]!==x?(S={mutationFn:b,onSuccess:x},t[19]=b,t[20]=x,t[21]=S):S=t[21];let C=c(S),w;t[22]!==e?.id||t[23]!==i?(w=(t,n)=>{let r=n===void 0?[]:n,a=i[t]||[],o=[...r];return a.forEach(e=>{o.find(t=>t.id===e.id)||o.push(e)}),o.sort($n).map(t=>({id:t.id,sender:t.sender_id===e?.id?`me`:`them`,text:t.content,time:new Date(t.created_at).toLocaleTimeString([],{hour:`2-digit`,minute:`2-digit`})}))},t[22]=e?.id,t[23]=i,t[24]=w):w=t[24];let T=w,E;t[25]===C?E=t[26]:(E=(e,t)=>C.mutate({convId:e,text:t}),t[25]=C,t[26]=E);let D;return t[27]!==_||t[28]!==T||t[29]!==h||t[30]!==C.isPending||t[31]!==E?(D={conversations:_,isConvLoading:h,sendMessage:E,getMessagesForConversation:T,isSending:C.isPending},t[27]=_,t[28]=T,t[29]=h,t[30]=C.isPending,t[31]=E,t[32]=D):D=t[32],D};function $n(e,t){return new Date(e.created_at)-new Date(t.created_at)}var er=w(),tr=()=>{let e=(0,er.c)(37),{currentUser:t}=Y(),[n,r]=(0,K.useState)(null),[a,o]=(0,K.useState)(``),{conversations:s,isConvLoading:c,sendMessage:l,getMessagesForConversation:u}=Qn(t),d=n?.id,p;e[0]===d?p=e[1]:(p=[`messages`,d],e[0]=d,e[1]=p);let m;e[2]===n?.id?m=e[3]:(m=()=>Fe(n?.id),e[2]=n?.id,e[3]=m);let h=!!n?.id,g;e[4]!==p||e[5]!==m||e[6]!==h?(g={queryKey:p,queryFn:m,enabled:h},e[4]=p,e[5]=m,e[6]=h,e[7]=g):g=e[7];let{data:_,isLoading:v}=f(g),y;e[8]===_?y=e[9]:(y=_===void 0?[]:_,e[8]=_,e[9]=y);let x=y,S=n?.id,C;e[10]!==x||e[11]!==u||e[12]!==S?(C=u(S,x),e[10]=x,e[11]=u,e[12]=S,e[13]=C):C=e[13];let w=C;if(!t){let t;return e[14]===Symbol.for(`react.memo_cache_sentinel`)?(t=(0,J.jsxs)(`div`,{className:`flex flex-col items-center justify-center h-screen gap-4 p-8 text-center bg-white dark:bg-black md:rounded-xl md:border border-zinc-100 dark:border-zinc-800`,children:[(0,J.jsx)(`div`,{className:`bg-zinc-100 dark:bg-zinc-900 p-4 rounded-full`,children:(0,J.jsx)(R,{size:40,className:`text-zinc-400`})}),(0,J.jsx)(`h3`,{className:`text-xl font-bold dark:text-white`,children:`Sign in to message others`}),(0,J.jsx)(`p`,{className:`text-zinc-500 max-w-xs`,children:`Start decentralized conversations with anyone on the network.`})]}),e[14]=t):t=e[14],t}if(c){let t;return e[15]===Symbol.for(`react.memo_cache_sentinel`)?(t=(0,J.jsx)(`div`,{className:`flex h-screen items-center justify-center bg-white dark:bg-black md:rounded-xl md:border border-zinc-100 dark:border-zinc-800`,children:(0,J.jsx)(i,{className:`animate-spin text-violet-500`,size:32})}),e[15]=t):t=e[15],t}let T;if(e[16]!==s||e[17]!==a){let t;e[19]===a?t=e[20]:(t=e=>e.user?.name?.toLowerCase().includes(a.toLowerCase())||e.user?.handle?.toLowerCase().includes(a.toLowerCase()),e[19]=a,e[20]=t),T=s.filter(t),e[16]=s,e[17]=a,e[18]=T}else T=e[18];let E=T,D=`w-full md:w-80 flex flex-col border-r border-zinc-100 dark:border-zinc-800 ${n?`hidden md:flex`:`flex`}`,O;e[21]===Symbol.for(`react.memo_cache_sentinel`)?(O=(0,J.jsx)(`div`,{className:`p-4 border-b border-zinc-100 dark:border-zinc-800`,children:(0,J.jsx)(`h2`,{className:`text-xl font-bold dark:text-white`,children:`Messages`})}),e[21]=O):O=e[21];let k=n?.id,A;e[22]!==E||e[23]!==a||e[24]!==k?(A=(0,J.jsx)(qn,{conversations:E,onSelect:r,selectedId:k,searchQuery:a,onSearchChange:o}),e[22]=E,e[23]=a,e[24]=k,e[25]=A):A=e[25];let j;e[26]!==D||e[27]!==A?(j=(0,J.jsxs)(`div`,{className:D,children:[O,A]}),e[26]=D,e[27]=A,e[28]=j):j=e[28];let M;e[29]!==v||e[30]!==w||e[31]!==n||e[32]!==l?(M=n?(0,J.jsx)(Yn,{conversation:n,messages:w,onBack:()=>r(null),onSendMessage:l,isLoading:v}):(0,J.jsxs)(`div`,{className:`hidden md:flex flex-1 items-center justify-center text-zinc-500 flex-col gap-4`,children:[(0,J.jsx)(`div`,{className:`bg-zinc-50 dark:bg-zinc-900 p-6 rounded-full`,children:(0,J.jsx)(b,{size:48,className:`text-zinc-300`})}),(0,J.jsxs)(`div`,{className:`text-center`,children:[(0,J.jsx)(`h3`,{className:`text-xl font-bold text-zinc-900 dark:text-white`,children:`Select a message`}),(0,J.jsx)(`p`,{children:`Choose from your existing conversations or start a new one.`})]})]}),e[29]=v,e[30]=w,e[31]=n,e[32]=l,e[33]=M):M=e[33];let N;return e[34]!==j||e[35]!==M?(N=(0,J.jsxs)(`div`,{className:`flex h-screen bg-white dark:bg-black overflow-hidden md:rounded-xl md:border border-zinc-100 dark:border-zinc-800`,children:[j,M]}),e[34]=j,e[35]=M,e[36]=N):N=e[36],N},nr=w(),rr=()=>{let e=(0,nr.c)(17),{currentUser:t}=Y(),n=t?.id,r;e[0]===n?r=e[1]:(r=[`notifications`,n],e[0]=n,e[1]=r);let a;e[2]===t?.id?a=e[3]:(a=()=>Ne(t?.id),e[2]=t?.id,e[3]=a);let o=!!t?.id,s;e[4]!==r||e[5]!==a||e[6]!==o?(s={queryKey:r,queryFn:a,enabled:o},e[4]=r,e[5]=a,e[6]=o,e[7]=s):s=e[7];let{data:c,isLoading:l}=f(s),u;e[8]===c?u=e[9]:(u=c===void 0?[]:c,e[8]=c,e[9]=u);let d=u;if(l){let t;return e[10]===Symbol.for(`react.memo_cache_sentinel`)?(t=(0,J.jsx)(`div`,{className:`flex items-center justify-center min-h-[400px]`,children:(0,J.jsx)(i,{size:32,className:`animate-spin text-violet-500`})}),e[10]=t):t=e[10],t}if(!t){let t;return e[11]===Symbol.for(`react.memo_cache_sentinel`)?(t=(0,J.jsxs)(`div`,{className:`flex flex-col items-center justify-center min-h-[400px] gap-4 p-8 text-center`,children:[(0,J.jsx)(`div`,{className:`bg-zinc-100 dark:bg-zinc-900 p-4 rounded-full`,children:(0,J.jsx)(R,{size:40,className:`text-zinc-400`})}),(0,J.jsx)(`h3`,{className:`text-xl font-bold dark:text-white`,children:`Sign in to see notifications`}),(0,J.jsx)(`p`,{className:`text-zinc-500 max-w-xs`,children:`Join the conversation and keep track of who's engaging with your content.`})]}),e[11]=t):t=e[11],t}let p=ir,m;e[12]===Symbol.for(`react.memo_cache_sentinel`)?(m=(0,J.jsx)(`div`,{className:`p-4 border-b border-zinc-100 dark:border-zinc-800 sticky top-0 bg-white/80 dark:bg-black/80 backdrop-blur-md z-10`,children:(0,J.jsx)(`h2`,{className:`text-xl font-bold dark:text-white`,children:`Notifications`})}),e[12]=m):m=e[12];let h;e[13]===d?h=e[14]:(h=d.length>0?d.map(e=>(0,J.jsxs)(`div`,{className:`p-4 border-b border-zinc-100 dark:border-zinc-800 flex items-start gap-4 hover:bg-zinc-50 dark:hover:bg-zinc-900 transition-colors cursor-pointer`,children:[(0,J.jsx)(`div`,{className:`shrink-0 pt-1`,children:p(e.type)}),(0,J.jsxs)(`div`,{className:`flex-1`,children:[(0,J.jsxs)(`div`,{className:`flex items-center gap-2 mb-1`,children:[(0,J.jsxs)(`span`,{className:`font-bold text-sm dark:text-white`,children:[`@`,e.user]}),(0,J.jsx)(`span`,{className:`text-zinc-500 text-xs`,children:e.created_at?new Date(e.created_at).toLocaleDateString():`Recent`})]}),(0,J.jsxs)(`p`,{className:`text-zinc-600 dark:text-zinc-400 text-[15px]`,children:[e.type===`like`&&`liked your post`,e.type===`follow`&&`followed you`,e.type===`mention`&&`mentioned you in a post`,e.type===`collect`&&`collected your post`,e.type===`comment`&&`commented on your post`,e.type===`repost`&&`reposted your post`]})]})]},e.id)):(0,J.jsx)(`div`,{className:`p-16 text-center text-zinc-500`,children:(0,J.jsx)(`p`,{className:`font-medium`,children:`No notifications yet.`})}),e[13]=d,e[14]=h);let g;return e[15]===h?g=e[16]:(g=(0,J.jsxs)(`div`,{className:`border-y md:border border-zinc-100 dark:border-zinc-800 bg-white dark:bg-black rounded-none md:rounded-xl overflow-hidden min-h-screen shadow-sm pb-20`,children:[m,h]}),e[15]=h,e[16]=g),g};function ir(e){switch(e){case`like`:return(0,J.jsx)(g,{size:20,className:`text-rose-500 fill-rose-500`});case`follow`:return(0,J.jsx)(se,{size:20,className:`text-blue-500`});case`mention`:return(0,J.jsx)(l,{size:20,className:`text-emerald-500`});case`collect`:return(0,J.jsx)(x,{size:20,className:`text-violet-500`});case`comment`:return(0,J.jsx)(me,{size:20,className:`text-violet-500`});case`repost`:return(0,J.jsx)(x,{size:20,className:`text-amber-500`});default:return(0,J.jsx)(l,{size:20,className:`text-zinc-500`})}}const ar=(e,t,n)=>{let[r,i]=(0,K.useState)(!1),[a,o]=(0,K.useState)({followers:0,following:0}),[s,c]=(0,K.useState)(!1);return(0,K.useEffect)(()=>{e&&(Ue(e).then(o),t&&He(t,e).then(i))},[e,t]),{isFollowing:r,stats:a,loading:s,handleFollow:async()=>{if(!t)return n(`Please login to follow!`,`error`);if(t===e)return n(`You cannot follow yourself!`,`error`);c(!0);try{let r=await Ve(t,e);i(r),o(e=>({...e,followers:r?e.followers+1:e.followers-1})),n(r?`Followed`:`Unfollowed`)}catch(e){console.error(`Failed to toggle follow:`,e),n(`Failed to update follow status`,`error`)}finally{c(!1)}}}};var or=w(),sr=e=>{let t=(0,or.c)(45),{profile:n,currentUser:i,isCurrentUser:a,onEditProfile:o,showToast:s,isCommunity:c}=e,{isFollowing:l,stats:u,loading:d,handleFollow:f}=ar(n.id,i?.id,s),p;t[0]===n.cover?p=t[1]:(p=n.cover&&(0,J.jsx)(`img`,{src:n.cover,className:`h-full w-full object-cover transition-opacity duration-500`,alt:`Cover`}),t[0]=n.cover,t[1]=p);let m;t[2]!==n.avatar||t[3]!==n.handle?(m=(0,J.jsx)(`div`,{className:`absolute -bottom-12 sm:-bottom-16 left-4 sm:left-6`,children:(0,J.jsx)(`div`,{className:`p-1 bg-white dark:bg-black rounded-full overflow-hidden shadow-xl ring-4 ring-white dark:ring-black`,children:(0,J.jsx)(`img`,{src:n.avatar,className:`size-24 sm:size-32 rounded-full object-cover`,alt:n.handle})})}),t[2]=n.avatar,t[3]=n.handle,t[4]=m):m=t[4];let h;t[5]!==p||t[6]!==m?(h=(0,J.jsxs)(`div`,{className:`relative h-32 sm:h-48 w-full bg-zinc-200 dark:bg-zinc-800`,children:[p,m]}),t[5]=p,t[6]=m,t[7]=h):h=t[7];let g;t[8]===Symbol.for(`react.memo_cache_sentinel`)?(g=(0,J.jsx)(`div`,{className:`flex-1 min-w-0 pr-4`}),t[8]=g):g=t[8];let _;t[9]!==f||t[10]!==a||t[11]!==l||t[12]!==d||t[13]!==o||t[14]!==n?(_=(0,J.jsxs)(`div`,{className:`flex justify-between items-start`,children:[g,(0,J.jsx)(`div`,{className:`flex gap-2 shrink-0`,children:a?(0,J.jsx)(Z,{variant:`secondary`,onClick:()=>o(n),className:`text-sm px-5`,children:`Edit profile`}):(0,J.jsxs)(J.Fragment,{children:[(0,J.jsx)(`button`,{className:`rounded-full p-2 border border-zinc-200 dark:border-zinc-700 hover:bg-zinc-50 dark:hover:bg-zinc-900 text-zinc-700 dark:text-zinc-300 dark:border-zinc-800 transition-colors`,children:(0,J.jsx)(b,{size:20})}),(0,J.jsx)(`button`,{className:`rounded-full p-2 border border-zinc-200 dark:border-zinc-700 hover:bg-zinc-50 dark:hover:bg-zinc-900 text-zinc-700 dark:text-zinc-300 dark:border-zinc-800 transition-colors`,children:(0,J.jsx)(r,{size:20})}),(0,J.jsx)(Z,{variant:l?`secondary`:`primary`,onClick:f,className:`text-sm px-6 min-w-[100px]`,disabled:d,children:d?(0,J.jsx)(Loader2,{size:16,className:`animate-spin mx-auto`}):l?`Following`:`Follow`}),(0,J.jsx)(`button`,{className:`rounded-full p-2 hover:bg-zinc-100 text-zinc-700 dark:text-zinc-300 dark:hover:bg-zinc-800 transition-colors`,children:(0,J.jsx)(B,{size:20})})]})})]}),t[9]=f,t[10]=a,t[11]=l,t[12]=d,t[13]=o,t[14]=n,t[15]=_):_=t[15];let v;t[16]===n.verified?v=t[17]:(v=n.verified&&(0,J.jsx)(Qt,{}),t[16]=n.verified,t[17]=v);let y;t[18]!==n.name||t[19]!==v?(y=(0,J.jsx)(`div`,{className:`flex items-center gap-1.5`,children:(0,J.jsxs)(`h3`,{className:`text-xl sm:text-2xl font-extrabold truncate dark:text-white flex items-center gap-1`,children:[n.name,v]})}),t[18]=n.name,t[19]=v,t[20]=y):y=t[20];let x;t[21]!==c||t[22]!==n.handle?(x=!c&&(0,J.jsx)(`div`,{className:`flex items-center space-x-3`,children:(0,J.jsxs)(`span`,{className:`text-zinc-500 font-medium text-sm px-1.5 py-0.5 -ml-1.5 rounded-md dark:text-zinc-400`,children:[`@`,n.handle]})}),t[21]=c,t[22]=n.handle,t[23]=x):x=t[23];let S;t[24]!==y||t[25]!==x?(S=(0,J.jsxs)(`div`,{className:`space-y-0.5`,children:[y,x]}),t[24]=y,t[25]=x,t[26]=S):S=t[26];let C;t[27]===n.bio?C=t[28]:(C=(0,J.jsx)(`div`,{className:`whitespace-pre-line text-zinc-900 dark:text-zinc-100 leading-relaxed text-sm sm:text-[15px]`,children:n.bio}),t[27]=n.bio,t[28]=C);let w;t[29]!==n.location||t[30]!==n.website?(w=(n.website||n.location)&&(0,J.jsxs)(`div`,{className:`flex flex-wrap gap-x-5 gap-y-2 text-sm pt-1`,children:[n.location&&(0,J.jsxs)(`div`,{className:`flex items-center gap-2 text-zinc-600 dark:text-zinc-400`,children:[(0,J.jsx)(pe,{size:14}),(0,J.jsx)(`span`,{children:n.location})]}),n.website&&(0,J.jsxs)(`div`,{className:`flex items-center gap-2 text-zinc-600 dark:text-zinc-400`,children:[(0,J.jsx)(fe,{size:14}),(0,J.jsx)(`a`,{href:`https://${n.website}`,target:`_blank`,rel:`noreferrer`,className:`text-violet-600 hover:underline font-semibold text-black dark:text-white`,children:n.website})]})]}),t[29]=n.location,t[30]=n.website,t[31]=w):w=t[31];let T;t[32]!==c||t[33]!==n.members||t[34]!==u?(T=(0,J.jsx)(`div`,{className:`flex gap-4 sm:gap-6 text-sm pt-2`,children:c?(0,J.jsxs)(`button`,{className:`flex gap-x-1 hover:underline group`,children:[(0,J.jsx)(`span`,{className:`font-bold text-zinc-900 dark:text-white group-hover:text-violet-600`,children:n.members}),(0,J.jsx)(`span`,{className:`text-zinc-500 dark:text-zinc-400`,children:`Members`})]}):(0,J.jsxs)(J.Fragment,{children:[(0,J.jsxs)(`button`,{className:`flex gap-x-1 hover:underline group`,children:[(0,J.jsx)(`span`,{className:`font-bold text-zinc-900 dark:text-white group-hover:text-violet-600`,children:u.following}),(0,J.jsx)(`span`,{className:`text-zinc-500 dark:text-zinc-400`,children:`Following`})]}),(0,J.jsxs)(`button`,{className:`flex gap-x-1 hover:underline group`,children:[(0,J.jsx)(`span`,{className:`font-bold text-zinc-900 dark:text-white group-hover:text-violet-600`,children:u.followers}),(0,J.jsx)(`span`,{className:`text-zinc-500 dark:text-zinc-400`,children:`Followers`})]})]})}),t[32]=c,t[33]=n.members,t[34]=u,t[35]=T):T=t[35];let E;t[36]!==C||t[37]!==w||t[38]!==T||t[39]!==_||t[40]!==S?(E=(0,J.jsxs)(`div`,{className:`flex flex-col p-4 sm:p-6 pt-16 sm:pt-20 space-y-4`,children:[_,S,C,w,T]}),t[36]=C,t[37]=w,t[38]=T,t[39]=_,t[40]=S,t[41]=E):E=t[41];let D;return t[42]!==E||t[43]!==h?(D=(0,J.jsxs)(`div`,{className:`flex flex-col`,children:[h,E]}),t[42]=E,t[43]=h,t[44]=D):D=t[44],D},cr=w(),lr=e=>{let t=(0,cr.c)(55),{onEditProfile:n}=e,{handle:r}=A(),a=z(),{profiles:o,currentUser:s,getProfileByHandle:c}=Y(),{getUserPosts:l}=st(),{addToast:u}=X(),[d,f]=(0,K.useState)(`Feed`),[p,m]=(0,K.useState)(!o[r]),[h,g]=(0,K.useState)(o[r]),_,v;t[0]!==c||t[1]!==r||t[2]!==o?(_=()=>{(async()=>{o[r]?g(o[r]):(m(!0),g(await c(r)),m(!1))})()},v=[r,o,c],t[0]=c,t[1]=r,t[2]=o,t[3]=_,t[4]=v):(_=t[3],v=t[4]),(0,K.useEffect)(_,v);let y;t[5]!==d||t[6]!==l||t[7]!==r?(y=l(r,d.toLowerCase()),t[5]=d,t[6]=l,t[7]=r,t[8]=y):y=t[8];let b=y,x;t[9]===a?x=t[10]:(x=e=>{a(`/post/${e}`)},t[9]=a,t[10]=x);let C=x,w;t[11]!==r||t[12]!==a?(w=e=>{e!==r&&a(`/u/${e}`)},t[11]=r,t[12]=a,t[13]=w):w=t[13];let T=w;if(p){let e;return t[14]===Symbol.for(`react.memo_cache_sentinel`)?(e=(0,J.jsx)(`div`,{className:`flex items-center justify-center min-h-screen`,children:(0,J.jsx)(i,{size:40,className:`animate-spin text-violet-500`})}),t[14]=e):e=t[14],e}let E;t[15]!==r||t[16]!==h?(E=h||{name:r,handle:r,avatar:`https://static.hey.xyz/images/brands/lens.svg`,cover:`https://static.hey.xyz/images/hero.webp`,bio:`Profile not found`,following:`0`,followers:`0`},t[15]=r,t[16]=h,t[17]=E):E=t[17];let D=E,O;t[18]===a?O=t[19]:(O=()=>a(-1),t[18]=a,t[19]=O);let k;t[20]===Symbol.for(`react.memo_cache_sentinel`)?(k=(0,J.jsx)(S,{size:22}),t[20]=k):k=t[20];let j;t[21]===O?j=t[22]:(j=(0,J.jsx)(`button`,{onClick:O,className:`p-1 rounded-full hover:bg-zinc-100 dark:hover:bg-zinc-800 dark:text-white transition-colors`,children:k}),t[21]=O,t[22]=j);let M;t[23]===D.name?M=t[24]:(M=(0,J.jsx)(`h5`,{className:`text-lg font-bold dark:text-white leading-none`,children:D.name}),t[23]=D.name,t[24]=M);let N=b?b.length:0,P;t[25]===N?P=t[26]:(P=(0,J.jsxs)(`span`,{className:`text-xs text-zinc-500 mt-0.5`,children:[N,` Posts`]}),t[25]=N,t[26]=P);let F;t[27]!==M||t[28]!==P?(F=(0,J.jsxs)(`div`,{className:`flex flex-col`,children:[M,P]}),t[27]=M,t[28]=P,t[29]=F):F=t[29];let I;t[30]!==F||t[31]!==j?(I=(0,J.jsx)(`div`,{className:`sticky top-0 bg-white/90 dark:bg-black/90 backdrop-blur-md z-20 border-b border-zinc-100 dark:border-zinc-800 px-4 py-3 md:hidden`,children:(0,J.jsxs)(`div`,{className:`flex items-center gap-x-4`,children:[j,F]})}),t[30]=F,t[31]=j,t[32]=I):I=t[32];let L=s?.handle===D.handle,R;t[33]!==u||t[34]!==s||t[35]!==D||t[36]!==n||t[37]!==L?(R=(0,J.jsx)(sr,{profile:D,currentUser:s,isCurrentUser:L,onEditProfile:n,showToast:u}),t[33]=u,t[34]=s,t[35]=D,t[36]=n,t[37]=L,t[38]=R):R=t[38];let B;t[39]===Symbol.for(`react.memo_cache_sentinel`)?(B=[`Feed`,`Replies`,`Media`,`Collected`],t[39]=B):B=t[39];let V;t[40]===d?V=t[41]:(V=(0,J.jsx)(`div`,{className:`sticky top-[60px] md:top-0 bg-white dark:bg-black z-10 border-b border-zinc-100 dark:border-zinc-800`,children:(0,J.jsx)(`ul`,{className:`flex list-none justify-between px-5`,children:B.map(e=>(0,J.jsx)(`li`,{onClick:()=>f(e),className:`relative cursor-pointer py-3.5 text-sm font-semibold transition-colors border-b-2 flex-1 text-center ${d===e?`text-black dark:text-white border-black dark:border-white`:`text-zinc-500 border-transparent hover:bg-zinc-50 dark:hover:bg-zinc-900`}`,children:e},e))})}),t[40]=d,t[41]=V);let H;t[42]!==u||t[43]!==s||t[44]!==C||t[45]!==T||t[46]!==b?(H=b.length>0?b.map(e=>(0,J.jsx)(wn,{currentUser:s,showToast:u,...e,onClick:()=>C(e.id),onUserClick:T},e.id)):(0,J.jsxs)(`div`,{className:`p-16 text-center text-zinc-500 flex flex-col items-center gap-4`,children:[(0,J.jsx)(`div`,{className:`bg-zinc-50 dark:bg-zinc-900 p-4 rounded-full`,children:(0,J.jsx)(re,{size:32,className:`text-zinc-300`})}),(0,J.jsx)(`p`,{className:`font-medium`,children:`No posts found`})]}),t[42]=u,t[43]=s,t[44]=C,t[45]=T,t[46]=b,t[47]=H):H=t[47];let U;t[48]===H?U=t[49]:(U=(0,J.jsx)(`div`,{children:H}),t[48]=H,t[49]=U);let W;return t[50]!==I||t[51]!==R||t[52]!==V||t[53]!==U?(W=(0,J.jsx)(`div`,{className:`border-zinc-100 dark:border-zinc-800 bg-white dark:bg-black rounded-none md:rounded-xl overflow-hidden min-h-screen pb-20`,children:(0,J.jsxs)(`div`,{className:`border-y md:border-b-0 border-zinc-100 dark:border-zinc-800`,children:[I,R,V,U]})}),t[50]=I,t[51]=R,t[52]=V,t[53]=U,t[54]=W):W=t[54],W},ur=w(),dr=()=>{let e=(0,ur.c)(34),{id:t}=A(),n=z(),{currentUser:r}=Y(),{addToast:i}=X(),a,o;e[0]===t?(a=e[1],o=e[2]):(a=[`post`,t],o=()=>Oe(t),e[0]=t,e[1]=a,e[2]=o);let s=!!t,c;e[3]!==a||e[4]!==o||e[5]!==s?(c={queryKey:a,queryFn:o,enabled:s},e[3]=a,e[4]=o,e[5]=s,e[6]=c):c=e[6];let{data:l,isLoading:u,isError:d}=f(c);if(u){let t;return e[7]===Symbol.for(`react.memo_cache_sentinel`)?(t=(0,J.jsx)(`div`,{className:`border-y md:border border-zinc-100 dark:border-zinc-800 bg-white dark:bg-black rounded-none md:rounded-xl overflow-hidden min-h-screen`,children:(0,J.jsx)(En,{})}),e[7]=t):t=e[7],t}if(d||!l){let t;e[8]===Symbol.for(`react.memo_cache_sentinel`)?(t=(0,J.jsx)(`p`,{className:`text-zinc-500`,children:`Post not found`}),e[8]=t):t=e[8];let r;return e[9]===n?r=e[10]:(r=(0,J.jsxs)(`div`,{className:`p-10 text-center`,children:[t,(0,J.jsx)(`button`,{onClick:()=>n(-1),className:`text-violet-500 mt-4 underline font-bold`,children:`Go back`})]}),e[9]=n,e[10]=r),r}let p;e[11]===l.comments?p=e[12]:(p=()=>l.comments||Ke.mockComments,e[11]=l.comments,e[12]=p);let m=p,h;e[13]===n?h=e[14]:(h=()=>n(-1),e[13]=n,e[14]=h);let g;e[15]===Symbol.for(`react.memo_cache_sentinel`)?(g=(0,J.jsx)(S,{size:20,strokeWidth:2.5}),e[15]=g):g=e[15];let _;e[16]===h?_=e[17]:(_=(0,J.jsx)(`button`,{onClick:h,className:`p-2 rounded-full hover:bg-zinc-100 dark:hover:bg-zinc-800 dark:text-white transition-colors`,children:g}),e[16]=h,e[17]=_);let v;e[18]===Symbol.for(`react.memo_cache_sentinel`)?(v=(0,J.jsx)(`h5`,{className:`text-xl font-bold dark:text-white`,children:`Post`}),e[18]=v):v=e[18];let y;e[19]===_?y=e[20]:(y=(0,J.jsx)(`div`,{className:`sticky top-0 bg-white/90 dark:bg-black/90 backdrop-blur-md z-20 border-b border-zinc-100 dark:border-zinc-800 px-4 py-3`,children:(0,J.jsxs)(`div`,{className:`flex items-center gap-x-4`,children:[_,v]})}),e[19]=_,e[20]=y);let b;e[21]===m?b=e[22]:(b=m(),e[21]=m,e[22]=b);let x;e[23]===n?x=e[24]:(x=e=>n(`/u/${e}`),e[23]=n,e[24]=x);let C;e[25]!==i||e[26]!==r||e[27]!==l||e[28]!==b||e[29]!==x?(C=(0,J.jsx)(wn,{...l,isDetail:!0,currentUser:r,initialComments:b,showToast:i,onUserClick:x}),e[25]=i,e[26]=r,e[27]=l,e[28]=b,e[29]=x,e[30]=C):C=e[30];let w;return e[31]!==C||e[32]!==y?(w=(0,J.jsx)(`div`,{className:`border-y md:border border-zinc-100 dark:border-zinc-800 bg-white dark:bg-black rounded-none md:rounded-xl overflow-hidden min-h-screen shadow-sm mb-20 animate-in slide-in-from-right-5 duration-300`,children:(0,J.jsxs)(`div`,{className:`border-b border-zinc-100 dark:border-zinc-800`,children:[y,C]})}),e[31]=C,e[32]=y,e[33]=w):w=e[33],w},fr=w();const pr=()=>{let e=(0,fr.c)(2),{pathname:t}=oe(),n;return e[0]===t?n=e[1]:(n=[t],e[0]=t,e[1]=n),(0,K.useEffect)(mr,n),null};function mr(){window.scrollTo(0,0)}var hr=w();function gr(){let e=(0,hr.c)(48),n=oe(),{currentUser:r,authMode:i,setAuthMode:a}=Y(),{darkMode:o}=Qe(),{isOpen:s,images:c,currentIndex:l,closeLightbox:u,setIndex:d}=dt(),[f,p]=(0,K.useState)(!1),[m,h]=(0,K.useState)(!1),[g,_]=(0,K.useState)(!1),v;e[0]===Symbol.for(`react.memo_cache_sentinel`)?(v={},e[0]=v):v=e[0];let[y,b]=(0,K.useState)(v),[x,S]=(0,K.useState)(null);if(i){let t=o?`dark`:``,n;e[1]===a?n=e[2]:(n=()=>a(null),e[1]=a,e[2]=n);let r;e[3]!==i||e[4]!==a?(r=()=>a(i===`login`?`signup`:`login`),e[3]=i,e[4]=a,e[5]=r):r=e[5];let s;e[6]!==i||e[7]!==n||e[8]!==r?(s=(0,J.jsx)(`div`,{className:`min-h-screen bg-white dark:bg-black flex items-center justify-center p-4`,children:(0,J.jsx)($,{children:(0,J.jsx)(qt,{type:i,onComplete:n,onSwitch:r})})}),e[6]=i,e[7]=n,e[8]=r,e[9]=s):s=e[9];let c;return e[10]!==t||e[11]!==s?(c=(0,J.jsx)(`div`,{className:t,children:s}),e[10]=t,e[11]=s,e[12]=c):c=e[12],c}let C;e[13]===Symbol.for(`react.memo_cache_sentinel`)?(C=(0,J.jsx)(pr,{}),e[13]=C):C=e[13];let w;e[14]===Symbol.for(`react.memo_cache_sentinel`)?(w=(0,J.jsx)(jt,{}),e[14]=w):w=e[14];let T;e[15]===Symbol.for(`react.memo_cache_sentinel`)?(T=(0,J.jsx)(G,{path:`/`,element:(0,J.jsx)($,{children:(0,J.jsx)(On,{onStoryClick:S,onAddStory:()=>_(!0)})})}),e[15]=T):T=e[15];let E;e[16]===Symbol.for(`react.memo_cache_sentinel`)?(E=(0,J.jsx)(G,{path:`/home`,element:(0,J.jsx)(t,{to:`/`,replace:!0})}),e[16]=E):E=e[16];let D;e[17]===Symbol.for(`react.memo_cache_sentinel`)?(D=(0,J.jsx)(G,{path:`/explore`,element:(0,J.jsx)($,{children:(0,J.jsx)(Fn,{})})}),e[17]=D):D=e[17];let O;e[18]===Symbol.for(`react.memo_cache_sentinel`)?(O=(0,J.jsx)(G,{path:`/reels`,element:(0,J.jsx)($,{children:(0,J.jsx)(Un,{})})}),e[18]=O):O=e[18];let k;e[19]===Symbol.for(`react.memo_cache_sentinel`)?(k=(0,J.jsx)(G,{path:`/messages`,element:(0,J.jsx)($,{children:(0,J.jsx)(tr,{})})}),e[19]=k):k=e[19];let A;e[20]===Symbol.for(`react.memo_cache_sentinel`)?(A=(0,J.jsx)(G,{path:`/notifications`,element:(0,J.jsx)($,{children:(0,J.jsx)(rr,{})})}),e[20]=A):A=e[20];let j;e[21]===Symbol.for(`react.memo_cache_sentinel`)?(j=(0,J.jsx)(G,{path:`/post/:id`,element:(0,J.jsx)($,{children:(0,J.jsx)(dr,{})})}),e[21]=j):j=e[21];let M;e[22]===Symbol.for(`react.memo_cache_sentinel`)?(M=(0,J.jsx)(G,{path:`/u/:handle`,element:(0,J.jsx)($,{children:(0,J.jsx)(lr,{onEditProfile:e=>{b(e),h(!0)}})})}),e[22]=M):M=e[22];let N;e[23]===Symbol.for(`react.memo_cache_sentinel`)?(N=(0,J.jsxs)(G,{element:w,children:[T,E,D,O,k,A,j,M,(0,J.jsx)(G,{path:`*`,element:(0,J.jsx)(t,{to:`/explore`})})]}),e[23]=N):N=e[23];let P;e[24]===n?P=e[25]:(P=(0,J.jsx)(ae,{mode:`wait`,children:(0,J.jsx)(ee,{location:n,children:N},n.pathname)}),e[24]=n,e[25]=P);let F;e[26]!==y||e[27]!==m||e[28]!==f||e[29]!==g?(F=(0,J.jsx)(Bt,{isPostModalOpen:f,setIsPostModalOpen:p,isEditProfileOpen:m,setIsEditProfileOpen:h,isStoryModalOpen:g,setIsStoryModalOpen:_,editProfileData:y,setEditProfileData:b}),e[26]=y,e[27]=m,e[28]=f,e[29]=g,e[30]=F):F=e[30];let I;e[31]===x?I=e[32]:(I=x&&(0,J.jsx)(Ht,{story:x,onClose:()=>S(null)}),e[31]=x,e[32]=I);let R;e[33]!==u||e[34]!==l||e[35]!==c||e[36]!==s||e[37]!==d?(R=s&&(0,J.jsx)(Wt,{images:c,currentIndex:l,onClose:u,onNavigate:d}),e[33]=u,e[34]=l,e[35]=c,e[36]=s,e[37]=d,e[38]=R):R=e[38];let z;e[39]!==r||e[40]!==n.pathname?(z=r&&![`/messages`,`/reels`].includes(n.pathname)&&(0,J.jsx)(`button`,{onClick:()=>p(!0),className:`fixed bottom-24 right-6 md:bottom-10 md:right-10 z-50 bg-zinc-950 dark:bg-white text-white dark:text-zinc-950 size-14 md:size-16 rounded-full flex items-center justify-center shadow-2xl hover:scale-110 active:scale-90 transition-all cursor-pointer group`,title:`Create Post`,children:(0,J.jsx)(L,{size:32,className:`group-hover:rotate-90 transition-transform duration-300`})}),e[39]=r,e[40]=n.pathname,e[41]=z):z=e[41];let B;return e[42]!==P||e[43]!==F||e[44]!==I||e[45]!==R||e[46]!==z?(B=(0,J.jsxs)(J.Fragment,{children:[C,P,F,I,R,z]}),e[42]=P,e[43]=F,e[44]=I,e[45]=R,e[46]=z,e[47]=B):B=e[47],B}var _r=new ge;(0,ye.createRoot)(document.getElementById(`root`)).render((0,J.jsx)(K.StrictMode,{children:(0,J.jsx)(ie,{client:_r,children:(0,J.jsx)(T,{children:(0,J.jsx)(Ze,{children:(0,J.jsx)(Je,{children:(0,J.jsx)(ot,{children:(0,J.jsx)(it,{children:(0,J.jsx)(ut,{children:(0,J.jsx)(gr,{})})})})})})})})}));
//# sourceMappingURL=index-BP5R0LHa.js.map
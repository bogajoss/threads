import{a as de}from"./rolldown-runtime-BaZ8gS7u.js";import{T as xe,s as me,u as he,y as fe}from"./framework-DIDnLsp9.js";import"./database-DlIwwAmc.js";import{$t as pe,Bt as ue,En as je,Jn as be,Nn as ve,Qn as ge,Xn as ze,Zt as Ne,_n as b,mn as ke}from"./ui-libs-BbdIqPKe.js";import{$ as we,G as ye,H as _e,K as Ce,L as Fe,M as Pe,N as Me,Ot as Se,Q as Le,R as Ie,U as oe,V as Te,W as re,_ as $e,b as De,c as Ue,d as We,et as Ee,f as Ae,l as Oe,m as Be,s as qe,u as He,ut as ce,v as Ve,x as Ge,y as ne}from"./index-DONeHNx1.js";import{n as Qe}from"./post-E8BOuOPo.js";import{n as Re,t as Xe}from"./linkify-DBRQwEj8.js";import{l as Je}from"./hooks-CqpOLrQP.js";var Ke=me(),Ze=de(xe(),1),s=de(he(),1),Ye=({profile:t,currentUser:e,isCurrentUser:Q,onEditProfile:se,showToast:o,isCommunity:J,onShowFollowers:d,onShowFollowing:R})=>{const{isFollowing:v,stats:p,loading:g,handleFollow:z}=Me(t,e?.id,o),u=fe(),[x,n]=(0,Ze.useState)(!1),N=async()=>{if(!e){o("Please sign in to message users");return}n(!0);try{u(`/messages/${await Se(e.id,t.id)}`)}catch(l){console.error("Failed to start conversation:",l),o("Failed to open chat")}finally{n(!1)}};return(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsxs)("div",{className:"relative h-32 w-full bg-zinc-200 dark:bg-zinc-800 sm:h-48",children:[t.cover&&(0,s.jsx)("img",{src:t.cover,className:"h-full w-full object-cover transition-opacity duration-500",alt:"Cover"}),(0,s.jsx)("div",{className:"absolute -bottom-12 left-4 sm:-bottom-16 sm:left-6",children:(0,s.jsx)("div",{className:"relative rounded-full bg-white p-1 shadow-xl ring-4 ring-white dark:bg-black dark:ring-black",children:(0,s.jsxs)(Le,{className:"size-24 sm:size-32",children:[(0,s.jsx)(Ee,{src:t.avatar,alt:t.handle,className:"object-cover"}),(0,s.jsx)(we,{className:"text-4xl font-bold",children:t.handle?.[0]?.toUpperCase()})]})})})]}),(0,s.jsxs)("div",{className:"flex flex-col space-y-4 p-4 pt-16 sm:p-6 sm:pt-20",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsx)("div",{className:"min-w-0 flex-1 pr-4"}),(0,s.jsx)("div",{className:"flex shrink-0 gap-2",children:Q?(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:()=>se?.(t),className:"flex size-10 items-center justify-center rounded-full border border-zinc-200 text-zinc-700 transition-all hover:bg-zinc-50 active:scale-95 dark:border-zinc-700 dark:text-zinc-300 dark:hover:bg-zinc-900",title:"Edit Profile",children:(0,s.jsx)(qe,{size:20})}),(0,s.jsx)("button",{onClick:()=>u("/settings"),className:"rounded-full border border-zinc-200 p-2 text-zinc-700 transition-all hover:bg-zinc-50 active:scale-95 dark:border-zinc-700 dark:text-zinc-300 dark:hover:bg-zinc-900",title:"Settings",children:(0,s.jsx)(Ae,{size:20})})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{onClick:N,disabled:x,className:"rounded-full border border-zinc-200 p-2 text-zinc-700 transition-colors hover:bg-zinc-50 disabled:opacity-50 dark:border-zinc-700 dark:text-zinc-300 dark:hover:bg-zinc-900",children:x?(0,s.jsx)(b,{size:20,className:"animate-spin"}):(0,s.jsx)(ke,{size:20})}),(0,s.jsx)("button",{className:"rounded-full border border-zinc-200 p-2 text-zinc-700 transition-colors hover:bg-zinc-50 dark:border-zinc-700 dark:text-zinc-300 dark:hover:bg-zinc-900",children:(0,s.jsx)(be,{size:20})}),(0,s.jsx)(ce,{variant:v?"secondary":"primary",onClick:z,className:"flex min-w-0 items-center gap-2 px-4 text-sm sm:min-w-[100px]",disabled:g,children:g?(0,s.jsx)(b,{size:16,className:"mx-auto animate-spin"}):v?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(Oe,{size:18}),(0,s.jsx)("span",{className:"hidden sm:inline",children:"Following"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(Ue,{size:18}),(0,s.jsx)("span",{className:"hidden sm:inline",children:"Follow"})]})}),(0,s.jsxs)(Te,{children:[(0,s.jsx)(Ce,{asChild:!0,children:(0,s.jsx)("button",{className:"rounded-full p-2 text-zinc-700 transition-colors hover:bg-zinc-100 dark:text-zinc-300 dark:hover:bg-zinc-800",children:(0,s.jsx)(ve,{size:20})})}),(0,s.jsxs)(_e,{align:"end",className:"w-48",children:[(0,s.jsxs)(oe,{children:[(0,s.jsxs)(re,{className:"cursor-pointer gap-2",onClick:()=>{navigator.clipboard.writeText(window.location.href),o("Profile link copied!")},children:[(0,s.jsx)(Ne,{size:16}),"Share Profile"]}),(0,s.jsxs)(re,{className:"cursor-pointer gap-2",onClick:()=>o("User reported"),children:[(0,s.jsx)(je,{size:16}),"Report user"]})]}),(0,s.jsx)(ye,{}),(0,s.jsx)(oe,{children:(0,s.jsxs)(re,{variant:"destructive",className:"cursor-pointer gap-2",onClick:()=>o("User blocked"),children:[(0,s.jsx)(ze,{size:16}),"Block user"]})})]})]})]})})]}),(0,s.jsxs)("div",{className:"space-y-0.5",children:[(0,s.jsxs)("div",{className:"mt-1 flex items-center gap-1.5",children:[(0,s.jsx)("h1",{className:"text-xl font-extrabold text-zinc-900 dark:text-zinc-100",children:t.name}),t.verified&&(0,s.jsx)(Be,{size:20,className:"text-blue-500"})]}),!J&&(0,s.jsx)("div",{className:"flex items-center space-x-3",children:(0,s.jsxs)("span",{className:"-ml-1.5 rounded-md px-1.5 py-0.5 text-sm font-medium text-zinc-500 dark:text-zinc-400",children:["@",t.handle]})})]}),(0,s.jsx)("div",{className:"whitespace-pre-line text-sm leading-relaxed text-zinc-900 dark:text-zinc-100 sm:text-[15px]",children:(0,s.jsx)(Re,{options:{...Xe,render:({attributes:l,content:m})=>{const{href:r,...c}=l,k=!r.startsWith("/")&&(r.startsWith("http")||r.startsWith("www"));return r.startsWith("/u/")||r.startsWith("/tags/")||r.startsWith("/c/")||r.startsWith("/explore")?(0,s.jsx)("span",{...c,className:"cursor-pointer font-bold text-rose-500 hover:underline dark:text-rose-400",onClick:X=>{X.stopPropagation(),u(r)},children:m},m):(0,s.jsx)("a",{href:r,...c,target:k?"_blank":void 0,rel:k?"noopener noreferrer":void 0,children:m},m)}},children:t.bio})}),(t.website||t.location)&&(0,s.jsxs)("div",{className:"flex flex-wrap gap-x-5 gap-y-2 pt-1 text-sm",children:[t.location&&(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)(We,{size:14}),t.location]}),t.website&&(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)(He,{size:14}),(0,s.jsx)("a",{href:`https://${t.website}`,target:"_blank",rel:"noreferrer",className:"font-semibold text-black hover:underline dark:text-white",children:t.website})]})]}),(0,s.jsx)("div",{className:"relative z-10 flex gap-4 pt-2 text-sm sm:gap-6",children:J?(0,s.jsxs)("button",{className:"group flex cursor-pointer gap-x-1",children:[(0,s.jsx)("span",{className:"font-bold text-zinc-900 dark:text-white",children:t.members}),(0,s.jsx)("span",{className:"text-zinc-500 dark:text-zinc-400",children:"Members"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("button",{onClick:l=>{l.preventDefault(),l.stopPropagation(),R()},className:"group flex cursor-pointer gap-x-1",children:[(0,s.jsx)("span",{className:"font-bold text-zinc-900 dark:text-white",children:p.following}),(0,s.jsx)("span",{className:"text-zinc-500 dark:text-zinc-400",children:"Following"})]}),(0,s.jsxs)("button",{onClick:l=>{l.preventDefault(),l.stopPropagation(),d()},className:"group flex cursor-pointer gap-x-1",children:[(0,s.jsx)("span",{className:"font-bold text-zinc-900 dark:text-white",children:p.followers}),(0,s.jsx)("span",{className:"text-zinc-500 dark:text-zinc-400",children:"Followers"})]})]})})]})]})},es=Ye,ss=t=>{const e=(0,Ke.c)(87),{onEditProfile:Q}=t,{handle:se,profile:o,loading:J,activeProfileTab:d,setActiveProfileTab:R,loadingPosts:v,isFetchingMorePosts:p,hasMorePosts:g,filteredPosts:z,isFollowModalOpen:u,setIsFollowModalOpen:x,followModalType:n,followListData:N,isListLoading:l,isFetchingMoreFollows:m,hasMoreFollows:r,openFollowModal:c,handlePostClick:k,handleUserClick:X,loadUserPosts:te,currentUser:j,addToast:w,navigate:y}=Je();if(J){let i;return e[0]===Symbol.for("react.memo_cache_sentinel")?(i=(0,s.jsx)("div",{className:"flex min-h-screen items-center justify-center",children:(0,s.jsx)(b,{size:40,className:"animate-spin text-violet-500"})}),e[0]=i):i=e[0],i}if(!o){const i=`Try searching for another. The user @${se} could not be found.`;let f;return e[1]!==i?(f=(0,s.jsx)("div",{className:"flex min-h-[600px] items-center justify-center overflow-hidden rounded-none border-zinc-100 bg-white dark:bg-black md:rounded-xl",children:(0,s.jsx)(Fe,{title:"Account doesn't exist",message:i,icon:ue})}),e[1]=i,e[2]=f):f=e[2],f}const a=o;let K;e[3]!==d||e[4]!==w||e[5]!==j||e[6]!==a.handle||e[7]!==z||e[8]!==k||e[9]!==X||e[10]!==g||e[11]!==p||e[12]!==te||e[13]!==v?(K=i=>{const f=i===void 0?!1:i;return v?(0,s.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,s.jsx)(b,{className:"animate-spin text-violet-500",size:32})}):z.length>0?(0,s.jsxs)(s.Fragment,{children:[z.map(le=>(0,s.jsx)(Qe,{currentUser:j,showToast:w,...le,onClick:()=>k(le.id),onUserClick:X},le.id)),g&&(0,s.jsx)("div",{className:"flex justify-center p-6",children:(0,s.jsxs)(ce,{variant:"secondary",className:"w-full max-w-xs",onClick:()=>te(!0),disabled:p,children:[p&&(0,s.jsx)(b,{size:18,className:"mr-2 animate-spin"}),"Load more posts"]})})]}):f?null:(0,s.jsxs)("div",{className:"flex animate-in fade-in flex-col items-center gap-4 p-20 text-center text-zinc-500 duration-500",children:[(0,s.jsx)("div",{className:"mb-2 rounded-full bg-zinc-50 p-6 ring-1 ring-zinc-100 dark:bg-zinc-900 dark:ring-zinc-800",children:(0,s.jsx)(pe,{size:40,className:"text-zinc-300 dark:text-zinc-700"})}),(0,s.jsx)("h3",{className:"text-xl font-bold dark:text-white",children:d==="collections"?"No collections yet":"No posts yet"}),(0,s.jsx)("p",{className:"max-w-[250px] text-sm text-zinc-500 dark:text-zinc-400",children:d==="collections"?"Saved posts and curated collections will appear here.":`When @${a.handle} shares posts, they will appear here.`})]})},e[3]=d,e[4]=w,e[5]=j,e[6]=a.handle,e[7]=z,e[8]=k,e[9]=X,e[10]=g,e[11]=p,e[12]=te,e[13]=v,e[14]=K):K=e[14];const h=K;let _;e[15]!==y?(_=()=>y(-1),e[15]=y,e[16]=_):_=e[16];let Z;e[17]===Symbol.for("react.memo_cache_sentinel")?(Z=(0,s.jsx)(ge,{size:22}),e[17]=Z):Z=e[17];let C;e[18]!==_?(C=(0,s.jsx)("button",{onClick:_,className:"rounded-full p-1 transition-colors hover:bg-zinc-100 dark:text-white dark:hover:bg-zinc-800",children:Z}),e[18]=_,e[19]=C):C=e[19];let F;e[20]!==a.name?(F=(0,s.jsx)("h5",{className:"text-lg font-bold leading-none dark:text-white",children:a.name}),e[20]=a.name,e[21]=F):F=e[21];const ae=a.follower_count||0;let P;e[22]!==ae?(P=(0,s.jsxs)("span",{className:"mt-0.5 text-xs text-zinc-500",children:[ae," Followers"]}),e[22]=ae,e[23]=P):P=e[23];let M;e[24]!==F||e[25]!==P?(M=(0,s.jsxs)("div",{className:"flex flex-col",children:[F,P]}),e[24]=F,e[25]=P,e[26]=M):M=e[26];let S;e[27]!==C||e[28]!==M?(S=(0,s.jsx)("div",{className:"sticky top-0 z-20 border-b border-zinc-100 bg-white/90 p-4 py-3 backdrop-blur-md dark:border-zinc-800 dark:bg-black/90 md:hidden",children:(0,s.jsxs)("div",{className:"flex items-center gap-x-4",children:[C,M]})}),e[27]=C,e[28]=M,e[29]=S):S=e[29];const ie=j?.handle===a.handle;let L,I;e[30]!==c?(L=()=>c("Followers"),I=()=>c("Following"),e[30]=c,e[31]=L,e[32]=I):(L=e[31],I=e[32]);let T;e[33]!==w||e[34]!==j||e[35]!==a||e[36]!==Q||e[37]!==ie||e[38]!==L||e[39]!==I?(T=(0,s.jsx)(es,{profile:a,currentUser:j,isCurrentUser:ie,onEditProfile:Q,showToast:w,onShowFollowers:L,onShowFollowing:I}),e[33]=w,e[34]=j,e[35]=a,e[36]=Q,e[37]=ie,e[38]=L,e[39]=I,e[40]=T):T=e[40];let Y;e[41]===Symbol.for("react.memo_cache_sentinel")?(Y=(0,s.jsx)("div",{className:"sticky top-[60px] z-10 border-b border-zinc-100 bg-white/90 backdrop-blur-md dark:border-zinc-800 dark:bg-black/90 md:top-0",children:(0,s.jsx)(De,{className:"hide-scrollbar h-auto w-full justify-start overflow-x-auto rounded-none bg-transparent p-0 px-2",children:["feed","collections","media"].map(ts)})}),e[41]=Y):Y=e[41];let $;e[42]!==h?($=h(),e[42]=h,e[43]=$):$=e[43];let D;e[44]!==$?(D=(0,s.jsx)(ne,{value:"feed",className:"m-0 border-none",children:$}),e[44]=$,e[45]=D):D=e[45];let U;e[46]!==a.id||e[47]!==a.name?(U=(0,s.jsx)($e,{name:a.name,number:a.id}),e[46]=a.id,e[47]=a.name,e[48]=U):U=e[48];let W;e[49]!==h?(W=h(!0),e[49]=h,e[50]=W):W=e[50];let E;e[51]!==U||e[52]!==W?(E=(0,s.jsxs)(ne,{value:"collections",className:"m-0 border-none",children:[U,W]}),e[51]=U,e[52]=W,e[53]=E):E=e[53];let A;e[54]!==h?(A=h(),e[54]=h,e[55]=A):A=e[55];let O;e[56]!==A?(O=(0,s.jsx)(ne,{value:"media",className:"m-0 border-none",children:A}),e[56]=A,e[57]=O):O=e[57];let B;e[58]!==d||e[59]!==R||e[60]!==D||e[61]!==E||e[62]!==O?(B=(0,s.jsxs)(Ve,{value:d,onValueChange:R,className:"w-full",children:[Y,D,E,O]}),e[58]=d,e[59]=R,e[60]=D,e[61]=E,e[62]=O,e[63]=B):B=e[63];let q;e[64]!==T||e[65]!==B||e[66]!==S?(q=(0,s.jsxs)("div",{className:"border-y border-zinc-100 dark:border-zinc-800 md:border-b-0",children:[S,T,B]}),e[64]=T,e[65]=B,e[66]=S,e[67]=q):q=e[67];let H;e[68]!==x?(H=()=>x(!1),e[68]=x,e[69]=H):H=e[69];let V;e[70]!==N||e[71]!==n||e[72]!==r||e[73]!==m||e[74]!==l||e[75]!==y||e[76]!==c||e[77]!==x?(V=(0,s.jsx)("div",{className:"flex max-h-[75vh] flex-col overflow-y-auto",children:(0,s.jsx)("div",{className:"min-h-[300px]",children:l?(0,s.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,s.jsx)(b,{className:"animate-spin text-violet-500",size:32})}):N.length>0?(0,s.jsxs)("div",{className:"divide-y divide-zinc-100 dark:divide-zinc-800",children:[N.map(i=>(0,s.jsx)(Pe,{profile:i,onUserClick:f=>{x(!1),y(`/u/${f}`)}},i.id)),r&&(0,s.jsx)("div",{className:"flex justify-center p-4",children:(0,s.jsxs)(ce,{variant:"secondary",className:"w-full text-xs",onClick:()=>c(n,!0),disabled:m,children:[m?(0,s.jsx)(b,{size:14,className:"mr-2 animate-spin"}):null,"Load more"]})})]}):(0,s.jsx)("div",{className:"flex flex-col items-center justify-center py-20 text-zinc-500",children:(0,s.jsxs)("p",{className:"font-medium",children:["No ",n.toLowerCase()," yet."]})})})}),e[70]=N,e[71]=n,e[72]=r,e[73]=m,e[74]=l,e[75]=y,e[76]=c,e[77]=x,e[78]=V):V=e[78];let G;e[79]!==n||e[80]!==u||e[81]!==H||e[82]!==V?(G=(0,s.jsx)(Ie,{isOpen:u,onClose:H,title:n,className:"sm:max-w-md",children:V}),e[79]=n,e[80]=u,e[81]=H,e[82]=V,e[83]=G):G=e[83];let ee;return e[84]!==q||e[85]!==G?(ee=(0,s.jsxs)("div",{className:"min-h-screen overflow-hidden rounded-none border-zinc-100 bg-white pb-20 dark:bg-black dark:border-zinc-800 md:rounded-xl",children:[q,G]}),e[84]=q,e[85]=G,e[86]=ee):ee=e[86],ee},xs=ss;function ts(t){return(0,s.jsx)(Ge,{value:t,className:"flex-1 whitespace-nowrap rounded-none border-b-2 px-4 py-4 text-sm font-bold capitalize text-zinc-500 transition-all data-[state=active]:border-black data-[state=active]:text-black dark:data-[state=active]:border-white dark:data-[state=active]:text-white",children:t==="feed"?"Posts":t},t)}export{xs as default};

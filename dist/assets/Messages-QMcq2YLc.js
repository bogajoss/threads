const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/VoiceMessage-BGgubOzp.js","assets/framework-CsA6nn9m.js","assets/rolldown-runtime-BaZ8gS7u.js","assets/framework-sg0yWRLc.css","assets/ui-libs-DmKhZXsk.js","assets/media-libs-Btb8RX-I.js","assets/media-libs-CqCaMccn.css","assets/VoiceMessage-C8_YBK7V.js","assets/index-BLtnolqX.js","assets/database-BiY55TQY.js","assets/query-QyXblnmD.js","assets/animations-T0TOZv2c.js","assets/index-CXHIXvNm.css"])))=>i.map(i=>d[i]);
import{a as je}from"./rolldown-runtime-BaZ8gS7u.js";import{C as Me,E as _e,b as ze,c as q,d as Ge}from"./framework-CsA6nn9m.js";import"./database-BiY55TQY.js";import{Bt as fe,Fn as Re,Ft as pe,Ht as be,Mt as Te,Ot as Pe,Qt as ue,Sn as $e,Un as Ae,Ut as Ie,Wn as Oe,Wt as Ee,Xn as Ue,Xt as ge,Yt as Le,_n as Ne,an as Fe,dn as De,kt as me,ln as He,rn as ke,tn as Ye,xn as qe,zt as Ve}from"./ui-libs-DmKhZXsk.js";import"./media-libs-Btb8RX-I.js";import{a as We,i as ne}from"./animations-T0TOZv2c.js";import{$ as le,B as Be,P as Xe,Q as Ke,R as Ze,W as Je,Z as Qe,an as ve,b as et,et as tt,ht as st,it as se,mt as it,n as rt,nt as ie,on as L,r as lt,rt as re,t as nt,tt as at,y as we,z as ct}from"./index-BLtnolqX.js";import"./VoiceMessage-C8_YBK7V.js";import{t as ot}from"./text-processing-DFvQvkgt.js";import{t as dt}from"./linkify-BIniK2-v.js";import{a as xt,d as mt,f as ut}from"./hooks-BZV9a-er.js";var ht=q(),I=je(_e(),1),t=je(Ge(),1),ft=s=>{const e=(0,ht.c)(60),{conv:i,selectedId:a,onSelect:h,onlineUsers:o}=s;let x;e[0]!==i.isGroup||e[1]!==i.user||e[2]!==o?(x=!i.isGroup&&i.user?o.has(i.user.id):!1,e[0]=i.isGroup,e[1]=i.user,e[2]=o,e[3]=x):x=e[3];const u=x,c=a===i.id,m=i.unread>0,b=i.isGroup?i.name:i.user?.name,d=i.isGroup?i.avatar:i.user?.avatar;let l;e[4]!==i||e[5]!==h?(l=()=>h(i),e[4]=i,e[5]=h,e[6]=l):l=e[6];const $=c?"bg-violet-500/10 dark:bg-violet-500/20":"hover:bg-zinc-100 dark:hover:bg-zinc-800/50";let _;e[7]!==$?(_=L("group relative flex cursor-pointer items-center gap-4 p-3 mx-1 md:mx-2 rounded-2xl transition-all duration-200",$),e[7]=$,e[8]=_):_=e[8];const R=c?"border-violet-500/30":"border-transparent group-hover:border-zinc-200 dark:group-hover:border-zinc-700";let z;e[9]!==R?(z=L("size-[52px] border-2 transition-all",R),e[9]=R,e[10]=z):z=e[10];const N=b||"";let w;e[11]!==d||e[12]!==N?(w=(0,t.jsx)(se,{src:d,alt:N,className:"object-cover"}),e[11]=d,e[12]=N,e[13]=w):w=e[13];let S;e[14]!==b?.[0]?(S=b?.[0]?.toUpperCase(),e[14]=b?.[0],e[15]=S):S=e[15];let g;e[16]!==S?(g=(0,t.jsx)(re,{className:"bg-zinc-100 text-zinc-500 font-bold text-lg dark:bg-zinc-800 dark:text-zinc-400",children:S}),e[16]=S,e[17]=g):g=e[17];let v;e[18]!==g||e[19]!==z||e[20]!==w?(v=(0,t.jsxs)(ie,{className:z,children:[w,g]}),e[18]=g,e[19]=z,e[20]=w,e[21]=v):v=e[21];let C;e[22]!==u?(C=u&&(0,t.jsx)("span",{className:"absolute bottom-0.5 right-0.5 size-3.5 rounded-full border-[2.5px] border-white bg-emerald-500 ring-0 dark:border-black"}),e[22]=u,e[23]=C):C=e[23];let M;e[24]!==v||e[25]!==C?(M=(0,t.jsxs)("div",{className:"relative",children:[v,C]}),e[24]=v,e[25]=C,e[26]=M):M=e[26];const A=m?"text-zinc-900 dark:text-white":"text-zinc-700 dark:text-zinc-200";let f;e[27]!==A?(f=L("truncate text-[15px] font-semibold",A),e[27]=A,e[28]=f):f=e[28];let T;e[29]!==b||e[30]!==f?(T=(0,t.jsx)("span",{className:f,children:b}),e[29]=b,e[30]=f,e[31]=T):T=e[31];const y=m?"text-violet-600 dark:text-violet-400":"text-zinc-400";let j;e[32]!==y?(j=L("ml-2 whitespace-nowrap text-[11px] font-medium",y),e[32]=y,e[33]=j):j=e[33];let O;e[34]!==i.time||e[35]!==j?(O=(0,t.jsx)("span",{className:j,children:i.time}),e[34]=i.time,e[35]=j,e[36]=O):O=e[36];let r;e[37]!==T||e[38]!==O?(r=(0,t.jsxs)("div",{className:"flex items-center justify-between mb-0.5",children:[T,O]}),e[37]=T,e[38]=O,e[39]=r):r=e[39];const k=m?"font-semibold text-zinc-900 dark:text-zinc-100":"text-zinc-500 dark:text-zinc-400 group-hover:text-zinc-600 dark:group-hover:text-zinc-300";let n;e[40]!==k?(n=L("truncate whitespace-nowrap text-[13px] leading-relaxed flex-1",k),e[40]=k,e[41]=n):n=e[41];const G=i.currentUserSent?"You: ":"",P=i.lastMessage?.length>27?i.lastMessage.substring(0,27)+"...":i.lastMessage;let p;e[42]!==n||e[43]!==G||e[44]!==P?(p=(0,t.jsxs)("p",{className:n,children:[G,P]}),e[42]=n,e[43]=G,e[44]=P,e[45]=p):p=e[45];let E;e[46]!==i.unread||e[47]!==m?(E=m&&(0,t.jsx)("span",{className:"flex size-5 shrink-0 items-center justify-center rounded-full bg-violet-600 text-[10px] font-bold text-white shadow-sm shadow-violet-500/30",children:i.unread}),e[46]=i.unread,e[47]=m,e[48]=E):E=e[48];let H;e[49]!==p||e[50]!==E?(H=(0,t.jsxs)("div",{className:"flex items-center justify-between gap-2 min-w-0",children:[p,E]}),e[49]=p,e[50]=E,e[51]=H):H=e[51];let D;e[52]!==r||e[53]!==H?(D=(0,t.jsxs)("div",{className:"min-w-0 flex-1 py-1",children:[r,H]}),e[52]=r,e[53]=H,e[54]=D):D=e[54];let Y;return e[55]!==M||e[56]!==l||e[57]!==D||e[58]!==_?(Y=(0,t.jsxs)("div",{onClick:l,className:_,children:[M,D]}),e[55]=M,e[56]=l,e[57]=D,e[58]=_,e[59]=Y):Y=e[59],Y},pt=({conversations:s,userResults:e=[],onSelect:i,onStartNew:a,selectedId:h,searchQuery:o,onSearchChange:x,onlineUsers:u=new Set,onRefresh:c})=>{const[m,b]=(0,I.useState)(!1),d=s.filter(l=>u.has(l.user?.id));return(0,t.jsxs)("div",{className:"flex min-w-0 flex-1 flex-col overflow-hidden bg-white dark:bg-black h-full",children:[(0,t.jsxs)("div",{className:"px-4 md:px-5 pt-5 pb-2 shrink-0 w-full overflow-hidden",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-5 min-w-0",children:[(0,t.jsx)("h2",{className:"text-2xl font-black tracking-tight text-zinc-900 dark:text-white truncate",children:"Chats"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{onClick:()=>b(!0),className:"rounded-full bg-zinc-100 p-2.5 text-zinc-600 transition-colors hover:bg-zinc-200 dark:bg-zinc-900 dark:text-zinc-400 dark:hover:bg-zinc-800",title:"New Group",children:(0,t.jsx)(Te,{size:20})}),(0,t.jsx)("button",{className:"rounded-full bg-zinc-100 p-2.5 text-zinc-600 transition-colors hover:bg-zinc-200 dark:bg-zinc-900 dark:text-zinc-400 dark:hover:bg-zinc-800",children:(0,t.jsx)(Ie,{size:20})})]})]}),(0,t.jsxs)("div",{className:"relative group min-w-0",children:[(0,t.jsx)(ge,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-zinc-400 group-focus-within:text-violet-500 transition-colors",size:18}),(0,t.jsx)("input",{type:"text",value:o,onChange:l=>x(l.target.value),placeholder:"Search Messenger",className:"w-full rounded-2xl border-none bg-zinc-100 py-3 pl-12 pr-4 text-base font-medium text-zinc-900 placeholder:text-zinc-500 transition-all focus:bg-white focus:ring-2 focus:ring-violet-500/20 focus:shadow-md dark:bg-zinc-900 dark:text-white dark:focus:bg-black"})]})]}),(0,t.jsx)("div",{className:"flex-1 min-h-0 overflow-hidden",children:(0,t.jsx)(we,{onRefresh:c||(async()=>{}),disabled:!c,className:"h-full",children:(0,t.jsx)(Xe,{className:"h-full min-w-0",children:(0,t.jsxs)("div",{className:"flex flex-col pb-4 min-w-0",children:[!o&&d.length>0&&(0,t.jsx)("div",{className:"mb-4 mt-2 min-w-0 w-full overflow-hidden",children:(0,t.jsxs)("div",{className:"flex gap-4 overflow-x-auto px-4 md:px-5 pb-4 pt-2 no-scrollbar w-full",children:[(0,t.jsxs)("div",{className:"flex flex-col items-center gap-2 min-w-[64px] cursor-pointer group",children:[(0,t.jsxs)("div",{className:"relative flex size-[60px] items-center justify-center rounded-full bg-zinc-50 border border-zinc-200 dark:bg-zinc-900 dark:border-zinc-800 group-hover:bg-zinc-100 dark:group-hover:bg-zinc-800 transition-colors",children:[(0,t.jsx)(pe,{size:24,className:"text-zinc-400"}),(0,t.jsx)("div",{className:"absolute bottom-0 right-0 size-5 bg-white dark:bg-black rounded-full flex items-center justify-center",children:(0,t.jsx)("div",{className:"size-4 bg-zinc-200 dark:bg-zinc-700 rounded-full flex items-center justify-center",children:(0,t.jsx)("span",{className:"text-[10px] text-zinc-500 font-bold",children:"+"})})})]}),(0,t.jsx)("span",{className:"text-[11px] font-medium text-zinc-500",children:"Your Story"})]}),d.map(l=>(0,t.jsxs)("div",{onClick:()=>i(l),className:"flex flex-col items-center gap-2 cursor-pointer group min-w-[64px] transition-transform active:scale-95",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"absolute -inset-[3px] rounded-full bg-gradient-to-tr from-violet-500 via-fuchsia-500 to-orange-500 opacity-90 p-[2px]"}),(0,t.jsx)("div",{className:"relative rounded-full border-[3px] border-white dark:border-black p-[2px] bg-white dark:bg-black",children:(0,t.jsxs)(ie,{className:"size-[50px]",children:[(0,t.jsx)(se,{src:l.user?.avatar,className:"object-cover"}),(0,t.jsx)(re,{children:l.user?.name?.[0]})]})}),(0,t.jsx)("span",{className:"absolute bottom-1 right-1 size-3.5 rounded-full border-[2.5px] border-white bg-emerald-500 dark:border-black"})]}),(0,t.jsx)("span",{className:"w-full truncate text-center text-[11px] font-medium text-zinc-600 dark:text-zinc-400 group-hover:text-zinc-900 dark:group-hover:text-white transition-colors",children:l.user?.name.split(" ")[0]})]},l.id))]})}),(0,t.jsx)("div",{className:"px-2 space-y-1",children:s.length>0&&s.filter(l=>l.lastMessage!=="No messages yet"||l.id===h||o).map(l=>(0,t.jsx)(ft,{conv:l,selectedId:h,onSelect:i,onlineUsers:u},l.id))}),e.length>0&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"px-6 py-3 mt-2 text-xs font-bold uppercase tracking-wider text-zinc-400",children:"More People"}),(0,t.jsx)("div",{className:"px-2 space-y-1",children:e.map(l=>(0,t.jsxs)("div",{onClick:()=>a(l),className:"flex cursor-pointer items-center gap-4 px-3 py-2 rounded-2xl transition-colors hover:bg-zinc-100 dark:hover:bg-zinc-800/50",children:[(0,t.jsxs)(ie,{className:"size-10",children:[(0,t.jsx)(se,{src:l.avatar,className:"object-cover"}),(0,t.jsx)(re,{children:l.name?.[0]?.toUpperCase()})]}),(0,t.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,t.jsx)("div",{className:"truncate text-sm font-bold text-zinc-900 dark:text-white",children:l.name}),(0,t.jsxs)("div",{className:"truncate text-xs text-zinc-500",children:["@",l.handle]})]}),(0,t.jsx)("button",{className:"flex size-8 items-center justify-center rounded-full bg-violet-50 text-violet-600 dark:bg-violet-900/20 dark:text-violet-400",children:(0,t.jsx)(pe,{size:16})})]},l.id))})]}),s.length===0&&e.length===0&&o&&(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center px-6",children:[(0,t.jsx)("div",{className:"mb-4 rounded-full bg-zinc-100 p-4 dark:bg-zinc-900",children:(0,t.jsx)(ge,{className:"text-zinc-400",size:24})}),(0,t.jsxs)("p",{className:"text-zinc-500",children:['No results found for "',o,'"']})]})]})})})}),(0,t.jsx)(lt,{isOpen:m,onClose:()=>b(!1),onCreated:l=>{i({id:l,isGroup:!0})}})]})},bt=pt,gt=q(),vt=s=>{const e=(0,gt.c)(51),{conversation:i,isOnline:a,onBack:h,onOpenSettings:o}=s,x=ze(),u=ut(i.user?.lastSeen),c=i.isGroup?i.name:i.user?.name,m=i.isGroup?i.avatar:i.user?.avatar;let b;e[0]===Symbol.for("react.memo_cache_sentinel")?(b=(0,t.jsx)(Ue,{size:24}),e[0]=b):b=e[0];let d;e[1]!==h?(d=(0,t.jsx)("button",{onClick:h,className:"mr-1 -ml-2.5 rounded-full p-2.5 text-zinc-600 transition-colors hover:bg-zinc-100 dark:text-zinc-300 dark:hover:bg-zinc-800 md:hidden",children:b}),e[1]=h,e[2]=d):d=e[2];let l;e[3]!==i.isGroup||e[4]!==i.user||e[5]!==x?(l=()=>!i.isGroup&&i.user&&x(`/u/${i.user.handle}`),e[3]=i.isGroup,e[4]=i.user,e[5]=x,e[6]=l):l=e[6];const $=c||"";let _;e[7]!==m||e[8]!==$?(_=(0,t.jsx)(se,{src:m,alt:$,className:"object-cover"}),e[7]=m,e[8]=$,e[9]=_):_=e[9];let R;e[10]!==c?.[0]?(R=c?.[0]?.toUpperCase(),e[10]=c?.[0],e[11]=R):R=e[11];let z;e[12]!==R?(z=(0,t.jsx)(re,{children:R}),e[12]=R,e[13]=z):z=e[13];let N;e[14]!==_||e[15]!==z?(N=(0,t.jsxs)(ie,{className:"size-10 border-2 border-white shadow-sm dark:border-zinc-800",children:[_,z]}),e[14]=_,e[15]=z,e[16]=N):N=e[16];let w;e[17]!==i.isGroup||e[18]!==a?(w=a&&!i.isGroup&&(0,t.jsx)("span",{className:"absolute bottom-0 right-0 size-3 rounded-full border-2 border-white bg-emerald-500 dark:border-black"}),e[17]=i.isGroup,e[18]=a,e[19]=w):w=e[19];let S;e[20]!==l||e[21]!==N||e[22]!==w?(S=(0,t.jsxs)("div",{className:"relative cursor-pointer",onClick:l,children:[N,w]}),e[20]=l,e[21]=N,e[22]=w,e[23]=S):S=e[23];let g;e[24]!==i.isGroup||e[25]!==i.user||e[26]!==x?(g=()=>!i.isGroup&&i.user&&x(`/u/${i.user.handle}`),e[24]=i.isGroup,e[25]=i.user,e[26]=x,e[27]=g):g=e[27];let v;e[28]!==c?(v=(0,t.jsx)("h3",{className:"text-sm font-bold text-zinc-900 dark:text-white",children:c}),e[28]=c,e[29]=v):v=e[29];let C;e[30]!==i.isGroup||e[31]!==i.user?.lastSeen||e[32]!==a||e[33]!==u?(C=i.isGroup?"Group Chat":a?(0,t.jsx)("span",{className:"text-emerald-500",children:"Active now"}):i.user?.lastSeen?`Last seen ${u}`:"Offline",e[30]=i.isGroup,e[31]=i.user?.lastSeen,e[32]=a,e[33]=u,e[34]=C):C=e[34];let M;e[35]!==C?(M=(0,t.jsx)("span",{className:"text-[11px] font-medium text-zinc-500",children:C}),e[35]=C,e[36]=M):M=e[36];let A;e[37]!==g||e[38]!==v||e[39]!==M?(A=(0,t.jsxs)("div",{className:"flex flex-col cursor-pointer",onClick:g,children:[v,M]}),e[37]=g,e[38]=v,e[39]=M,e[40]=A):A=e[40];let f;e[41]!==S||e[42]!==A||e[43]!==d?(f=(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[d,S,A]}),e[41]=S,e[42]=A,e[43]=d,e[44]=f):f=e[44];let T;e[45]===Symbol.for("react.memo_cache_sentinel")?(T=(0,t.jsx)(qe,{size:20}),e[45]=T):T=e[45];let y;e[46]!==o?(y=(0,t.jsx)("div",{className:"flex items-center gap-1",children:(0,t.jsx)("button",{onClick:o,className:"rounded-full p-2.5 text-zinc-400 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors",children:T})}),e[46]=o,e[47]=y):y=e[47];let j;return e[48]!==f||e[49]!==y?(j=(0,t.jsxs)("div",{className:"sticky top-0 z-30 flex shrink-0 items-center justify-between border-b border-zinc-100 bg-white/75 px-4 py-3 backdrop-blur-xl dark:border-zinc-800 dark:bg-black/75",children:[f,y]}),e[48]=f,e[49]=y,e[50]=j):j=e[50],j},jt=vt,zt=q();const Nt=(s,e,i)=>{const a=(0,zt.c)(7),h=e===void 0?40:e,o=i===void 0?120:i,x=(0,I.useRef)(null);let u;a[0]!==o||a[1]!==h?(u=()=>{const m=x.current;if(m){m.style.height="auto";const b=m.scrollHeight;m.style.height=`${Math.min(Math.max(b,h),o)}px`}},a[0]=o,a[1]=h,a[2]=u):u=a[2];let c;return a[3]!==o||a[4]!==h||a[5]!==s?(c=[s,h,o],a[3]=o,a[4]=h,a[5]=s,a[6]=c):c=a[6],(0,I.useEffect)(u,c),x};var kt=q(),wt=s=>{const e=(0,kt.c)(71),{onSendMessage:i,onTyping:a,replyingTo:h,setReplyingTo:o,editingMessage:x,setEditingMessage:u}=s,[c,m]=(0,I.useState)("");let b;e[0]===Symbol.for("react.memo_cache_sentinel")?(b=[],e[0]=b):b=e[0];const[d,l]=(0,I.useState)(b),[$,_]=(0,I.useState)(!1),R=(0,I.useRef)(null),z=(0,I.useRef)(null),N=Nt(c);let w;e[1]!==x||e[2]!==o||e[3]!==N?(w=()=>{x&&(m(x.text),o(null),N.current&&N.current.focus())},e[1]=x,e[2]=o,e[3]=N,e[4]=w):w=e[4];let S;e[5]!==x?(S=[x],e[5]=x,e[6]=S):S=e[6],I.useEffect(w,S);const{isRecording:g,recordingTime:v,startRecording:C,stopRecording:M,cancelRecording:A,audioBlob:f,audioUrl:T,clearAudio:y}=mt(),[j,O]=(0,I.useState)(!1),r=(0,I.useRef)(null),k=St;let n;e[7]!==a?(n=U=>{const F=U.target.value;m(F),a&&(a(!0),z.current&&clearTimeout(z.current),z.current=setTimeout(()=>{a(!1)},2e3))},e[7]=a,e[8]=n):n=e[8];const G=n;let P;e[9]!==d||e[10]!==f||e[11]!==y||e[12]!==i||e[13]!==a||e[14]!==v||e[15]!==o||e[16]!==c?(P=U=>{if(U&&U.preventDefault(),f){i("",[],f,v),y();return}!c.trim()&&d.length===0||(a&&(z.current&&clearTimeout(z.current),a(!1)),i(c,d),m(""),l([]),o(null))},e[9]=d,e[10]=f,e[11]=y,e[12]=i,e[13]=a,e[14]=v,e[15]=o,e[16]=c,e[17]=P):P=e[17];const p=P;let E;e[18]!==T||e[19]!==j?(E=()=>{T&&(r.current||(r.current=new Audio(T),r.current.onended=()=>O(!1)),j?r.current.pause():r.current.play(),O(!j))},e[18]=T,e[19]=j,e[20]=E):E=e[20];const H=E;let D,Y;e[21]!==f?(D=()=>{!f&&r.current&&(r.current.pause(),r.current=null,O(!1))},Y=[f],e[21]=f,e[22]=D,e[23]=Y):(D=e[22],Y=e[23]),I.useEffect(D,Y);let ae;e[24]===Symbol.for("react.memo_cache_sentinel")?(ae=U=>{if(!U.target.files)return;const F=Array.from(U.target.files);l(te=>[...te,...F])},e[24]=ae):ae=e[24];const ye=ae;let ce;e[25]===Symbol.for("react.memo_cache_sentinel")?(ce=U=>{const F=U.clipboardData.files;if(F&&F.length>0){const te=Array.from(F).filter(Ct);te.length>0&&(U.preventDefault(),l(he=>[...he,...te]))}},e[25]=ce):ce=e[25];const Se=ce;let V;e[26]!==h||e[27]!==o?(V=h&&(0,t.jsxs)(ne.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"flex items-center justify-between mb-2 px-4 py-2 bg-zinc-50 dark:bg-zinc-900 rounded-xl border border-zinc-100 dark:border-zinc-800",children:[(0,t.jsxs)("div",{className:"text-sm flex items-center gap-2",children:[(0,t.jsx)(ue,{size:14,className:"text-violet-500"}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("span",{className:"text-xs font-bold text-violet-500 block mb-0.5",children:["Replying to"," ",h.sender==="me"?"yourself":h.senderName]}),(0,t.jsx)("p",{className:"line-clamp-1 text-zinc-500",children:h.text})]})]}),(0,t.jsx)("button",{onClick:()=>o(null),children:(0,t.jsx)(me,{size:16,className:"text-zinc-400"})})]}),e[26]=h,e[27]=o,e[28]=V):V=e[28];let W;e[29]!==x||e[30]!==u?(W=x&&(0,t.jsxs)(ne.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"flex items-center justify-between mb-2 px-4 py-2 bg-zinc-50 dark:bg-zinc-900 rounded-xl border border-zinc-100 dark:border-zinc-800",children:[(0,t.jsxs)("div",{className:"text-sm flex items-center gap-2",children:[(0,t.jsx)(ke,{size:14,className:"text-violet-500"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-xs font-bold text-violet-500 block mb-0.5",children:"Edit Message"}),(0,t.jsx)("p",{className:"line-clamp-1 text-zinc-500",children:x.text})]})]}),(0,t.jsx)("button",{onClick:()=>{u(null),m("")},children:(0,t.jsx)(me,{size:16,className:"text-zinc-400"})})]}),e[29]=x,e[30]=u,e[31]=W):W=e[31];let B;e[32]!==V||e[33]!==W?(B=(0,t.jsxs)(We,{children:[V,W]}),e[32]=V,e[33]=W,e[34]=B):B=e[34];let X;e[35]!==d?(X=d.length>0&&(0,t.jsx)("div",{className:"flex gap-2 mb-2 px-1",children:d.map((U,F)=>(0,t.jsxs)("div",{className:"relative size-16 rounded-lg overflow-hidden border border-zinc-200",children:[(0,t.jsx)("img",{src:URL.createObjectURL(U),className:"size-full object-cover"}),(0,t.jsx)("button",{onClick:()=>l(te=>te.filter((he,Ce)=>Ce!==F)),className:"absolute top-0 right-0 bg-black/50 text-white p-0.5",children:(0,t.jsx)(me,{size:12})})]},F))}),e[35]=d,e[36]=X):X=e[36];const xe=g?"bg-zinc-900 border-zinc-800 shadow-2xl scale-[1.02] ring-4 ring-red-500/10":f?"bg-violet-50 dark:bg-violet-900/20 border-violet-200 dark:border-violet-800 shadow-sm":"bg-zinc-100 dark:bg-zinc-900 border-transparent focus-within:ring-2 focus-within:ring-violet-500/20 focus-within:bg-white dark:focus-within:bg-zinc-900 focus-within:border-violet-200 dark:focus-within:border-violet-900";let K;e[37]!==xe?(K=L("flex-1 flex items-center gap-2 rounded-[28px] px-2 py-2 transition-all duration-300 overflow-hidden border",xe),e[37]=xe,e[38]=K):K=e[38];let Z;e[39]!==f||e[40]!==A||e[41]!==y||e[42]!==p||e[43]!==G||e[44]!==$||e[45]!==j||e[46]!==g||e[47]!==v||e[48]!==c||e[49]!==N||e[50]!==H?(Z=g?(0,t.jsxs)("div",{className:"flex-1 flex items-center gap-4 px-3 py-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2.5 bg-red-500/10 px-3 py-1.5 rounded-full border border-red-500/20",children:[(0,t.jsx)(ne.div,{animate:{scale:[1,1.2,1]},transition:{repeat:1/0,duration:1.5},className:"size-2.5 rounded-full bg-red-500 shadow-[0_0_8px_rgba(239,68,68,0.5)]"}),(0,t.jsx)("span",{className:"text-sm font-bold tabular-nums text-red-500",children:k(v)})]}),(0,t.jsx)("div",{className:"flex-1 h-6 flex items-center justify-center gap-1 opacity-80",children:(0,t.jsx)("div",{className:"w-full h-1 bg-white/20 rounded-full overflow-hidden",children:(0,t.jsx)(ne.div,{animate:{x:["-100%","100%"]},transition:{repeat:1/0,duration:1,ease:"linear"},className:"w-1/2 h-full bg-white/40"})})}),(0,t.jsx)("button",{type:"button",onClick:A,className:"p-2 text-zinc-400 hover:text-white transition-colors hover:bg-white/10 rounded-full",children:(0,t.jsx)(fe,{size:20})})]}):f?(0,t.jsxs)("div",{className:"flex-1 flex items-center gap-3 px-2 py-1",children:[(0,t.jsx)("button",{type:"button",onClick:H,className:"size-9 flex shrink-0 items-center justify-center rounded-full bg-violet-500 text-white hover:bg-violet-600 transition-colors",children:j?(0,t.jsx)(be,{size:14,fill:"currentColor"}):(0,t.jsx)(Ye,{size:18,fill:"currentColor",className:"ml-0.5"})}),(0,t.jsxs)("div",{className:"flex-1 flex flex-col justify-center",children:[(0,t.jsx)("div",{className:"text-xs font-bold text-violet-600 dark:text-violet-400",children:"Voice Message Preview"}),(0,t.jsx)("div",{className:"text-[11px] font-medium text-zinc-500 tabular-nums",children:k(v)})]}),(0,t.jsx)("button",{type:"button",onClick:y,className:"p-2 text-zinc-400 hover:text-red-500 transition-colors rounded-full hover:bg-red-50 dark:hover:bg-red-950/30",children:(0,t.jsx)(fe,{size:20})})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex items-center gap-0.5 ml-1",children:[(0,t.jsxs)(Ze,{open:$,onOpenChange:_,children:[(0,t.jsx)(Be,{asChild:!0,children:(0,t.jsx)("button",{type:"button",className:"p-2 text-zinc-400 hover:text-yellow-500 transition-colors",children:(0,t.jsx)(Ee,{size:22})})}),(0,t.jsx)(ct,{className:"w-full p-0 border-none bg-transparent shadow-none",side:"top",align:"start",children:(0,t.jsx)(Je,{onEmojiSelect:U=>m(F=>F+U.emoji)})})]}),(0,t.jsx)("button",{type:"button",className:"p-2 text-zinc-400 hover:text-violet-600 transition-colors rounded-full hover:bg-zinc-200/50 dark:hover:bg-zinc-800",onClick:()=>R.current?.click(),children:(0,t.jsx)($e,{size:22})}),(0,t.jsx)("button",{type:"button",className:"hidden sm:block p-2 text-zinc-400 hover:text-violet-600 transition-colors rounded-full hover:bg-zinc-200/50 dark:hover:bg-zinc-800",children:(0,t.jsx)(Fe,{size:20})})]}),(0,t.jsx)("textarea",{ref:N,value:c,onChange:G,onKeyDown:U=>{U.key==="Enter"&&!U.shiftKey&&(U.preventDefault(),p())},onPaste:Se,placeholder:"Message...",className:"flex-1 bg-transparent border-none outline-none text-base resize-none py-2.5 min-h-[40px] text-zinc-900 dark:text-white placeholder:text-zinc-500",rows:1})]}),e[39]=f,e[40]=A,e[41]=y,e[42]=p,e[43]=G,e[44]=$,e[45]=j,e[46]=g,e[47]=v,e[48]=c,e[49]=N,e[50]=H,e[51]=Z):Z=e[51];let J;e[52]!==d.length||e[53]!==f||e[54]!==g||e[55]!==C||e[56]!==M||e[57]!==c?(J=c.trim()||d.length>0||f?(0,t.jsx)("button",{type:"submit",className:"p-2 mr-1 rounded-full bg-violet-600 text-white hover:bg-violet-700 hover:scale-105 transition-all shadow-sm",children:(0,t.jsx)(Le,{size:18,className:"translate-x-0.5 translate-y-0.5"})}):g?(0,t.jsx)("button",{type:"button",onClick:M,className:"p-2.5 mr-1 rounded-full bg-red-500 text-white hover:bg-red-600 transition-all shadow-[0_0_15px_rgba(239,68,68,0.4)] hover:scale-110 active:scale-95",children:(0,t.jsx)(be,{size:16,fill:"currentColor"})}):(0,t.jsx)("button",{type:"button",onClick:C,className:"p-2 mr-1 text-zinc-400 hover:text-violet-600 dark:hover:text-violet-400 transition-colors",children:(0,t.jsx)(He,{size:22})}),e[52]=d.length,e[53]=f,e[54]=g,e[55]=C,e[56]=M,e[57]=c,e[58]=J):J=e[58];let Q;e[59]!==p||e[60]!==K||e[61]!==Z||e[62]!==J?(Q=(0,t.jsxs)("form",{className:K,onSubmit:p,children:[Z,J]}),e[59]=p,e[60]=K,e[61]=Z,e[62]=J,e[63]=Q):Q=e[63];let oe;e[64]===Symbol.for("react.memo_cache_sentinel")?(oe=(0,t.jsx)("input",{type:"file",ref:R,onChange:ye,className:"hidden",multiple:!0,accept:"image/*"}),e[64]=oe):oe=e[64];let ee;e[65]!==Q?(ee=(0,t.jsxs)("div",{className:"flex items-end gap-2",children:[Q,oe]}),e[65]=Q,e[66]=ee):ee=e[66];let de;return e[67]!==B||e[68]!==X||e[69]!==ee?(de=(0,t.jsxs)("div",{className:"shrink-0 p-3 md:p-4 bg-white dark:bg-black border-t border-zinc-100 dark:border-zinc-800",children:[B,X,ee]}),e[67]=B,e[68]=X,e[69]=ee,e[70]=de):de=e[70],de},yt=wt;function St(s){return`${Math.floor(s/60)}:${(s%60).toString().padStart(2,"0")}`}function Ct(s){return s.type.startsWith("image/")}var Wt=q(),Mt=q(),_t=s=>{const e=(0,Mt.c)(10),{reactions:i,currentUser:a,onToggle:h}=s;let o;e[0]!==i?(o=i===void 0?[]:i,e[0]=i,e[1]=o):o=e[1];const x=o;let u;e[2]!==a?.id||e[3]!==x?(u={},x.forEach(d=>{u[d.emoji]||(u[d.emoji]={count:0,me:!1}),u[d.emoji].count=u[d.emoji].count+1,d.user_id===a?.id&&(u[d.emoji].me=!0)}),e[2]=a?.id,e[3]=x,e[4]=u):u=e[4];const c=u;if(x.length===0)return null;let m;e[5]!==c?(m=Object.entries(c),e[5]=c,e[6]=m):m=e[6];let b;return e[7]!==h||e[8]!==m?(b=(0,t.jsx)("div",{className:"flex flex-wrap gap-1",children:m.map(d=>{const[l,$]=d;return(0,t.jsxs)("button",{onClick:_=>{_.stopPropagation(),h(l)},className:L("pointer-events-auto flex items-center gap-1 rounded-full border px-1.5 py-0.5 text-[11px] font-bold shadow-sm transition-all hover:scale-110 active:scale-90",$.me?"bg-violet-50 border-violet-200 text-violet-600 dark:bg-violet-900/30 dark:border-violet-800 dark:text-violet-400":"bg-white border-zinc-100 text-zinc-700 dark:bg-zinc-800 dark:border-zinc-700 dark:text-zinc-300"),children:[(0,t.jsx)("span",{className:"leading-none",children:l}),$.count>1&&(0,t.jsx)("span",{className:"text-[10px] leading-none opacity-80",children:$.count})]},l)})}),e[7]=h,e[8]=m,e[9]=b):b=e[9],b},Gt=_t,Rt=I.lazy(()=>Me(()=>import("./VoiceMessage-BGgubOzp.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12]))),Tt=({conversation:s,messages:e,currentUser:i,onBack:a,onSendMessage:h,onEditMessage:o,onDeleteMessage:x,onToggleReaction:u,onTyping:c,onRefresh:m,isLoading:b,isTyping:d,isOnline:l})=>{const $=ze(),{openLightbox:_}=st(),[R,z]=(0,I.useState)(null),[N,w]=(0,I.useState)(null),[S,g]=(0,I.useState)(!1),v=(0,I.useRef)(null),C=s.isGroup?s.name:s.user?.name,M=s.isGroup?s.avatar:s.user?.avatar;(0,I.useEffect)(()=>{v.current&&(v.current.scrollTop=v.current.scrollHeight)},[e,d,R,N]);const A=async(r,k,n,G)=>{if(N){o?.(N.id,r),w(null);return}if(n&&G){try{const p=await ve(new File([n],`voice-message-${Date.now()}.webm`,{type:n.type}));h(s.id,"Voice message","voice",[{url:p.url,duration:G}],R?.id)}catch(p){console.error("Failed to send voice message:",p)}return}let P=[];if(k.length>0)try{P=await Promise.all(k.map(p=>ve(p)))}catch(p){console.error("Upload failed:",p);return}h(s.id,r,P.length>0?"image":"text",P,R?.id),z(null)},f=r=>{!r.media||r.media.length===0||_(r.media.map(k=>k.url),0)},T=(0,I.useMemo)(()=>{const r=e.filter(k=>k.sender==="me");return r.length>0?r[r.length-1].id:null},[e]),y=r=>e.find(k=>k.id===r),j=(r,k)=>r===0?!1:e[r-1].sender===k.sender,O=(r,k)=>r===e.length-1?!1:e[r+1].sender===k.sender;return(0,t.jsxs)("div",{className:"relative flex h-full w-full flex-col overflow-hidden bg-white/50 dark:bg-black/50 md:border-l md:border-zinc-200/50 dark:md:border-zinc-800/50",children:[(0,t.jsx)(jt,{conversation:s,isOnline:l,onBack:a,onOpenSettings:()=>g(!0)}),(0,t.jsx)("div",{className:"flex-1 min-h-0 overflow-hidden",children:(0,t.jsx)(we,{onRefresh:m||(async()=>{}),disabled:!m,className:"h-full",children:(0,t.jsx)("div",{className:"h-full overflow-y-auto px-3 md:px-4 py-4",ref:v,children:(0,t.jsxs)("div",{className:"flex flex-col min-h-full justify-end",children:[e.length<5&&(0,t.jsxs)("div",{className:"py-12 flex flex-col items-center justify-center opacity-80 mb-auto",children:[(0,t.jsxs)(ie,{className:"size-24 border-4 border-zinc-100 dark:border-zinc-800 mb-4 bg-zinc-50 dark:bg-zinc-900",children:[(0,t.jsx)(se,{src:M,className:"object-cover"}),(0,t.jsx)(re,{className:"text-4xl",children:C?.[0]})]}),(0,t.jsx)("h2",{className:"text-xl font-bold dark:text-white",children:C}),(0,t.jsx)("p",{className:"text-zinc-500 text-sm mb-4",children:s.isGroup?"Group chat on Sysm":"You're friends on Sysm"}),!s.isGroup&&s.user?.handle&&(0,t.jsx)(it,{variant:"outline",className:"rounded-full h-8 text-xs",onClick:()=>$(`/u/${s.user.handle}`),children:"View Profile"})]}),b&&e.length===0?(0,t.jsx)("div",{className:"flex justify-center p-8",children:(0,t.jsx)(Ne,{className:"animate-spin text-violet-500",size:32})}):(0,t.jsx)("div",{className:"space-y-[2px]",children:e.map((r,k)=>{const n=r.sender==="me",G=j(k,r),P=O(k,r);return(0,t.jsx)(ne.div,{id:`msg-${r.id}`,initial:{opacity:0,y:10,scale:.95},animate:{opacity:1,y:0,scale:1},className:L("flex w-full",n?"justify-end":"justify-start",!P&&"mb-4"),children:(0,t.jsxs)("div",{className:L("flex max-w-[75%] md:max-w-[65%] items-end gap-2 group",n?"flex-row-reverse":"flex-row"),children:[!n&&(0,t.jsx)("div",{className:"w-7 shrink-0",children:P?null:(0,t.jsxs)(ie,{className:"size-7 border border-zinc-100 shadow-sm dark:border-zinc-800",children:[(0,t.jsx)(se,{src:r.senderAvatar||M}),(0,t.jsx)(re,{children:(r.senderName||C)?.[0]})]})}),(0,t.jsxs)("div",{className:L("relative flex flex-col",n?"items-end":"items-start"),children:[(0,t.jsxs)(Qe,{children:[(0,t.jsx)(at,{onClick:p=>{const E=new MouseEvent("contextmenu",{bubbles:!0,cancelable:!0,view:window,button:2,buttons:2,clientX:p.clientX,clientY:p.clientY});p.currentTarget.dispatchEvent(E)},children:(0,t.jsxs)("div",{className:L("relative px-4 py-2.5 shadow-sm text-[15px] leading-[1.4]",n?"bg-gradient-to-br from-violet-600 to-indigo-600 text-white":"bg-white text-zinc-900 dark:bg-zinc-800 dark:text-white border border-zinc-200/50 dark:border-zinc-700/50",!P&&!G&&"rounded-[22px]",n&&!P&&G&&"rounded-[22px] rounded-tr-md",n&&P&&!G&&"rounded-[22px] rounded-br-md",n&&P&&G&&"rounded-[22px] rounded-r-md",!n&&!P&&G&&"rounded-[22px] rounded-tl-md",!n&&P&&!G&&"rounded-[22px] rounded-bl-md",!n&&P&&G&&"rounded-[22px] rounded-l-md"),children:[r.replyToId&&(0,t.jsxs)("div",{className:L("mb-1.5 -mx-1 px-3 py-1.5 rounded-xl text-xs border-l-2 cursor-pointer",n?"bg-black/10 border-white/40 text-white/90":"bg-zinc-100 border-zinc-300 text-zinc-600 dark:bg-zinc-700 dark:border-zinc-500 dark:text-zinc-300"),onClick:p=>{p.stopPropagation();const E=document.getElementById(`msg-${r.replyToId}`);E&&E.scrollIntoView({behavior:"smooth",block:"center"})},children:[(0,t.jsxs)("div",{className:"flex items-center gap-1.5 mb-0.5 opacity-75",children:[(0,t.jsx)(ue,{size:10}),(0,t.jsx)("span",{className:"font-bold",children:"Reply"})]}),(0,t.jsx)("div",{className:"truncate opacity-90",children:y(r.replyToId)?.text||"Attachment"})]}),r.media?.length>0&&r.type!=="voice"&&(0,t.jsx)("div",{className:"grid gap-1 mb-1 overflow-hidden rounded-lg",children:r.media.map((p,E)=>(0,t.jsx)("img",{src:p.url,className:"max-h-64 object-cover w-full rounded-md cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>f(r)},E))}),r.type==="voice"?(0,t.jsx)(I.Suspense,{fallback:(0,t.jsxs)("div",{className:"flex h-[44px] w-[200px] items-center gap-2 py-1 px-1 opacity-50",children:[(0,t.jsx)("div",{className:"size-9 shrink-0 rounded-full bg-zinc-200 animate-pulse dark:bg-zinc-700"}),(0,t.jsx)("div",{className:"flex-1 h-3 bg-zinc-200 animate-pulse dark:bg-zinc-700 rounded-sm"})]}),children:(0,t.jsx)(Rt,{url:r.media?.[0]?.url||r.text,duration:r.media?.[0]?.duration,isMe:n})}):(0,t.jsx)("div",{className:"whitespace-pre-wrap break-words",children:(0,t.jsx)(ot,{options:{...dt,className:n?"text-white underline":"text-violet-600 dark:text-violet-400 underline"},children:r.text})}),(0,t.jsxs)("div",{className:L("flex justify-end items-center gap-1 mt-0.5 select-none",n?"text-white/70":"text-zinc-400"),children:[(0,t.jsx)("span",{className:"text-[9px] font-medium",children:r.time}),n&&r.id===T&&(r.isRead?(0,t.jsx)(Oe,{size:12,className:"text-white"}):(0,t.jsx)(Ae,{size:12,className:"text-white/60"}))]})]})}),(0,t.jsxs)(Ke,{className:"w-48",children:[(0,t.jsx)("div",{className:"flex items-center justify-between p-1 border-b border-zinc-100 dark:border-zinc-800 mb-1",children:["â¤ï¸","ðŸ˜‚","ðŸ˜®","ðŸ˜¢","ðŸ™","ðŸ‘"].map(p=>(0,t.jsx)(le,{onSelect:()=>u?.(r.id,p),className:"flex-1 justify-center p-2 text-lg hover:scale-125 transition-transform active:scale-90 focus:bg-transparent cursor-pointer",children:p},p))}),(0,t.jsxs)(le,{onSelect:()=>{navigator.clipboard.writeText(r.text)},children:[(0,t.jsx)(Re,{size:14,className:"mr-2"})," Copy"]}),(0,t.jsxs)(le,{onSelect:()=>z(r),children:[(0,t.jsx)(ue,{size:14,className:"mr-2"})," Reply"]}),n&&(0,t.jsxs)(le,{onSelect:()=>w(r),children:[(0,t.jsx)(ke,{size:14,className:"mr-2"})," Edit"]}),(0,t.jsx)(tt,{}),(0,t.jsxs)(le,{onSelect:()=>x&&x(r.id),className:"text-red-500 focus:text-red-500 focus:bg-red-50 dark:focus:bg-red-950/30 cursor-pointer",children:[(0,t.jsx)(Ve,{size:14,className:"mr-2"})," Delete"]})]})]}),r.reactions&&r.reactions.length>0&&(0,t.jsx)("div",{className:L("mt-1 flex",n?"justify-end":"justify-start"),children:(0,t.jsx)(Gt,{reactions:r.reactions,currentUser:i,onToggle:p=>u?.(r.id,p)})})]})]})},r.id)})}),d&&(0,t.jsx)("div",{className:"flex items-center gap-2 mt-2 ml-9",children:(0,t.jsx)("div",{className:"bg-zinc-100 dark:bg-zinc-800 px-4 py-2.5 rounded-[22px] rounded-tl-md",children:(0,t.jsx)(et,{})})})]})})})}),(0,t.jsx)(yt,{onSendMessage:A,onTyping:c,replyingTo:R,setReplyingTo:z,editingMessage:N,setEditingMessage:w}),s.isGroup?(0,t.jsx)(rt,{isOpen:S,onClose:()=>g(!1),conversation:s,onUpdate:r=>{g(!1)}}):(0,t.jsx)(nt,{isOpen:S,onClose:()=>g(!1),user:s.user,conversationId:s.id})]})},Pt=Tt,$t=q(),At=()=>{const s=(0,$t.c)(36),{id:e,currentUser:i,onlineUsers:a,msgSearchQuery:h,setMsgSearchQuery:o,userSearchResults:x,filteredConversations:u,selectedConversation:c,localMessages:m,isConvLoading:b,isMsgLoading:d,currentIsTyping:l,otherUserIsOnline:$,handleStartConversation:_,handleSelectConversation:R,refetchConversations:z,refetchMessages:N,sendMessage:w,editMessage:S,onDeleteMessage:g,onToggleReaction:v,sendTypingStatus:C,navigate:M}=xt();if(!i){let n;s[0]===Symbol.for("react.memo_cache_sentinel")?(n=(0,t.jsx)("div",{className:"rounded-3xl bg-zinc-50 p-6 dark:bg-zinc-900",children:(0,t.jsx)(Pe,{size:48,className:"text-zinc-300 dark:text-zinc-600"})}),s[0]=n):n=s[0];let G;return s[1]===Symbol.for("react.memo_cache_sentinel")?(G=(0,t.jsxs)("div",{className:"flex h-[100dvh] flex-col items-center justify-center gap-6 border-zinc-100 bg-white p-8 text-center dark:border-zinc-800 dark:bg-black md:h-[calc(100vh-1.5rem)] md:rounded-2xl md:border",children:[n,(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h3",{className:"text-2xl font-black tracking-tight dark:text-white",children:"Sign in to message"}),(0,t.jsx)("p",{className:"max-w-xs text-zinc-500 font-medium",children:"Join the conversation. Sign up or log in to start chatting."})]})]}),s[1]=G):G=s[1],G}if(b){let n;return s[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,t.jsx)("div",{className:"flex h-[100dvh] items-center justify-center border-zinc-100 bg-white dark:border-zinc-800 dark:bg-black md:h-[calc(100vh-1.5rem)] md:rounded-2xl md:border",children:(0,t.jsx)(Ne,{className:"animate-spin text-violet-500",size:32})}),s[2]=n):n=s[2],n}const A=`flex ${e?"h-[100dvh]":"h-[calc(100dvh-4rem)]"} w-full max-w-full box-border overscroll-none overflow-x-hidden overflow-y-hidden bg-white shadow-2xl shadow-zinc-200/50 dark:border-zinc-800 dark:bg-black dark:shadow-none md:h-[calc(100vh-1.5rem)] md:rounded-3xl md:border md:border-zinc-200/50`,f=`flex-col md:flex md:w-[400px] ${c?"hidden":"flex"} h-full min-h-0 min-w-0 flex-1 md:flex-none bg-white dark:bg-black border-r border-zinc-100 dark:border-zinc-800 z-10`,T=e??null;let y;s[3]!==z?(y=async()=>await z(),s[3]=z,s[4]=y):y=s[4];let j;s[5]!==u||s[6]!==R||s[7]!==_||s[8]!==h||s[9]!==a||s[10]!==o||s[11]!==T||s[12]!==y||s[13]!==x?(j=(0,t.jsx)(bt,{conversations:u,userResults:x,onSelect:R,onStartNew:_,selectedId:T,searchQuery:h,onSearchChange:o,onlineUsers:a,onRefresh:y}),s[5]=u,s[6]=R,s[7]=_,s[8]=h,s[9]=a,s[10]=o,s[11]=T,s[12]=y,s[13]=x,s[14]=j):j=s[14];let O;s[15]!==f||s[16]!==j?(O=(0,t.jsx)("div",{className:f,children:j}),s[15]=f,s[16]=j,s[17]=O):O=s[17];let r;s[18]!==l||s[19]!==i||s[20]!==S||s[21]!==d||s[22]!==m||s[23]!==M||s[24]!==g||s[25]!==v||s[26]!==$||s[27]!==N||s[28]!==c||s[29]!==w||s[30]!==C?(r=c?(0,t.jsx)(Pt,{conversation:c,messages:m,currentUser:i,onBack:()=>M("/messages"),onSendMessage:w,onEditMessage:S,onDeleteMessage:g,onToggleReaction:v,onTyping:n=>C(c.id,n),onRefresh:async()=>await N(),isLoading:d,isTyping:!!l,isOnline:!!$}):(0,t.jsxs)("div",{className:"hidden flex-1 flex-col items-center justify-center gap-6 text-zinc-500 md:flex bg-zinc-50/30 dark:bg-zinc-900/10",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"absolute -inset-10 rounded-full bg-violet-500/5 blur-3xl dark:bg-violet-500/10"}),(0,t.jsx)("div",{className:"relative rounded-[2.5rem] bg-white p-10 shadow-xl shadow-zinc-200/50 dark:bg-zinc-900/50 dark:shadow-none ring-1 ring-zinc-100 dark:ring-zinc-800",children:(0,t.jsx)(De,{size:80,className:"text-violet-500 stroke-[1.5]"})})]}),(0,t.jsxs)("div",{className:"text-center max-w-sm px-4 space-y-3",children:[(0,t.jsx)("h3",{className:"text-3xl font-black tracking-tighter text-zinc-900 dark:text-white",children:"Your Messages"}),(0,t.jsx)("p",{className:"text-zinc-500 font-medium text-lg",children:"Send private photos and messages to a friend or group."})]})]}),s[18]=l,s[19]=i,s[20]=S,s[21]=d,s[22]=m,s[23]=M,s[24]=g,s[25]=v,s[26]=$,s[27]=N,s[28]=c,s[29]=w,s[30]=C,s[31]=r):r=s[31];let k;return s[32]!==A||s[33]!==O||s[34]!==r?(k=(0,t.jsxs)("div",{className:A,children:[O,r]}),s[32]=A,s[33]=O,s[34]=r,s[35]=k):k=s[35],k},Bt=At;export{Bt as default};

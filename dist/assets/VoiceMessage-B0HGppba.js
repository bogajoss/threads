import{a as z}from"./rolldown-runtime-BaZ8gS7u.js";import{E as k,c as I,d as V}from"./framework-CsA6nn9m.js";import{in as G,tn as L,vn as W}from"./ui-libs-Dw1mhyv2.js";import{t as A}from"./media-libs-Btb8RX-I.js";import{ln as M}from"./index-BG-BzCgj.js";var B=I(),a=z(k(),1),r=z(V(),1),F=f=>{const e=(0,B.c)(24),{url:m,duration:u,isMe:s}=f,v=(0,a.useRef)(null),P=(0,a.useRef)(null),[d,w]=(0,a.useState)(!1),[p,q]=(0,a.useState)(!1),[R,b]=(0,a.useState)(0),[D,E]=(0,a.useState)(u||0);let x,h;e[0]!==u||e[1]!==s||e[2]!==m?(x=()=>{if(!v.current)return;const t=A.create({container:v.current,waveColor:s?"rgba(255, 255, 255, 0.35)":"rgba(135, 116, 225, 0.25)",progressColor:s?"#ffffff":"#8774e1",cursorColor:"transparent",barWidth:2,barGap:3,barRadius:2,height:28,normalize:!0,url:m});return P.current=t,t.on("ready",()=>{q(!0),u||E(t.getDuration())}),t.on("play",()=>w(!0)),t.on("pause",()=>w(!1)),t.on("finish",()=>{w(!1),t.setTime(0),b(0)}),t.on("audioprocess",()=>b(t.getCurrentTime())),t.on("interaction",()=>b(t.getCurrentTime())),()=>t.destroy()},h=[m,s,u],e[0]=u,e[1]=s,e[2]=m,e[3]=x,e[4]=h):(x=e[3],h=e[4]),(0,a.useEffect)(x,h);let g;e[5]===Symbol.for("react.memo_cache_sentinel")?(g=t=>{t.stopPropagation(),P.current?.playPause()},e[5]=g):g=e[5];const $=g,T=H,j=!p,C=s?"bg-white/20 text-white":"bg-[#8774e1] text-white";let i;e[6]!==C?(i=M("size-10 flex shrink-0 items-center justify-center rounded-full transition-all active:scale-90",C),e[6]=C,e[7]=i):i=e[7];let n;e[8]!==d||e[9]!==p?(n=p?d?(0,r.jsx)(G,{size:20,fill:"currentColor"}):(0,r.jsx)(L,{size:20,fill:"currentColor",className:"ml-0.5"}):(0,r.jsx)(W,{size:18,className:"animate-spin"}),e[8]=d,e[9]=p,e[10]=n):n=e[10];let o;e[11]!==j||e[12]!==i||e[13]!==n?(o=(0,r.jsx)("button",{type:"button",onClick:$,disabled:j,className:i,children:n}),e[11]=j,e[12]=i,e[13]=n,e[14]=o):o=e[14];let _;e[15]===Symbol.for("react.memo_cache_sentinel")?(_=(0,r.jsx)("div",{className:"h-7 w-full overflow-hidden",children:(0,r.jsx)("div",{ref:v,className:"w-full cursor-pointer"})}),e[15]=_):_=e[15];const S=s?"text-white/80":"text-[#8774e1]";let l;e[16]!==S?(l=M("text-[11px] font-medium mt-0.5 select-none tabular-nums",S),e[16]=S,e[17]=l):l=e[17];const N=d||R>0?T(R):T(D);let c;e[18]!==l||e[19]!==N?(c=(0,r.jsxs)("div",{className:"flex-1 flex flex-col justify-center min-w-0",children:[_,(0,r.jsx)("div",{className:l,children:N})]}),e[18]=l,e[19]=N,e[20]=c):c=e[20];let y;return e[21]!==c||e[22]!==o?(y=(0,r.jsxs)("div",{className:"flex items-center gap-3 py-1 min-w-[220px] md:min-w-[280px]",children:[o,c]}),e[21]=c,e[22]=o,e[23]=y):y=e[23],y},X=F;function H(f){return`${Math.floor(f/60)}:${Math.floor(f%60).toString().padStart(2,"0")}`}export{X as t};

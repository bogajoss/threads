import{a as u}from"./rolldown-runtime-BaZ8gS7u.js";import{E as g,c as v,d as N}from"./framework-CsA6nn9m.js";import"./database-BiY55TQY.js";import{Kn as j,Mr as w,Pn as k,Vn as x,Zn as y}from"./ui-libs-DL7QAo1d.js";import"./media-libs-Btb8RX-I.js";import{at as z,dn as _,ht as C,it as A,p as L,rt as M}from"./index-B_49bypF.js";import{i as S}from"./hooks-DqXO2GYg.js";var q=v(),V=u(g(),1),t=u(N(),1),F=()=>{const e=(0,q.c)(17),{notifications:r,isLoading:p,isFetchingMore:l,hasMore:a,loadNotifications:m,handleNotificationClick:h}=S(),f=I,b=$;if(p&&r.length===0){let s;return e[0]===Symbol.for("react.memo_cache_sentinel")?(s=(0,t.jsx)("div",{className:"flex h-[50vh] items-center justify-center",children:(0,t.jsx)(x,{className:"h-8 w-8 animate-spin text-violet-600"})}),e[0]=s):s=e[0],s}let o;e[1]===Symbol.for("react.memo_cache_sentinel")?(o=(0,t.jsx)("div",{className:"sticky top-0 z-10 border-b border-zinc-100 bg-white/80 p-4 backdrop-blur-md dark:bg-black/80 dark:border-zinc-800",children:(0,t.jsx)("h2",{className:"text-xl font-bold dark:text-white",children:"Notifications"})}),e[1]=o):o=e[1];let i;e[2]!==h||e[3]!==r?(i=r.length>0?(0,t.jsx)("div",{className:"divide-y divide-zinc-100 dark:divide-zinc-800",children:r.map(s=>(0,t.jsxs)("div",{onClick:()=>h(s),className:`flex cursor-pointer gap-4 p-4 transition-colors hover:bg-zinc-50 dark:hover:bg-zinc-900/50 ${s.is_read?"":"bg-violet-50/30 dark:bg-violet-900/10"}`,children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)(M,{className:"h-12 w-12 border border-zinc-100 dark:border-zinc-800",children:[(0,t.jsx)(z,{src:s.avatar}),(0,t.jsx)(A,{children:s.user?.[0]?.toUpperCase()||"?"})]}),(0,t.jsx)("div",{className:"absolute -bottom-1 -right-1 rounded-full bg-white p-1 shadow-sm dark:bg-zinc-900",children:f(s.type)})]}),(0,t.jsx)("div",{className:"flex flex-1 flex-col gap-1",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"text-sm dark:text-zinc-100",children:[(0,t.jsxs)("span",{className:"font-bold",children:["@",s.user]})," ",b(s)]}),(0,t.jsx)("span",{className:"text-xs text-zinc-500",children:_(s.created_at)})]})})]},s.id))}):(0,t.jsx)("div",{className:"p-16 text-center text-zinc-500",children:(0,t.jsx)("p",{className:"font-medium",children:"No notifications yet."})}),e[2]=h,e[3]=r,e[4]=i):i=e[4];let n;e[5]!==a||e[6]!==l||e[7]!==m||e[8]!==r.length?(n=r.length>0&&a&&(0,t.jsx)("div",{className:"flex justify-center p-4",children:(0,t.jsx)(C,{variant:"ghost",onClick:()=>m(),disabled:l,className:"text-sm",children:l?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(x,{className:"mr-2 h-4 w-4 animate-spin"}),"Loading..."]}):"Load more"})}),e[5]=a,e[6]=l,e[7]=m,e[8]=r.length,e[9]=n):n=e[9];let c;e[10]!==a||e[11]!==r.length?(c=r.length>0&&!a&&(0,t.jsx)("div",{className:"p-8 text-center text-sm text-zinc-500",children:"You've caught up with everything!"}),e[10]=a,e[11]=r.length,e[12]=c):c=e[12];let d;return e[13]!==i||e[14]!==n||e[15]!==c?(d=(0,t.jsxs)("div",{className:"min-h-screen rounded-none border-y border-zinc-100 bg-white pb-20 shadow-sm dark:bg-black dark:border-zinc-800 md:rounded-xl md:border",children:[o,i,n,c]}),e[13]=i,e[14]=n,e[15]=c,e[16]=d):d=e[16],d},Y=F;function I(e){switch(e){case"like":return(0,t.jsx)(y,{className:"h-4 w-4 fill-red-500 text-red-500"});case"mention":return(0,t.jsx)(w,{className:"h-4 w-4 text-violet-500"});case"repost":return(0,t.jsx)(j,{className:"h-4 w-4 text-green-500"});case"comment":return(0,t.jsx)(k,{className:"h-4 w-4 text-blue-500"});case"follow":return(0,t.jsx)(L,{className:"h-4 w-4 text-zinc-500"});default:return null}}function $(e){switch(e.type){case"like":return"liked your post";case"mention":return"mentioned you in a post";case"repost":return"reposted your post";case"comment":return"replied to your post";case"follow":return"started following you";default:return"interacted with you"}}export{Y as default};

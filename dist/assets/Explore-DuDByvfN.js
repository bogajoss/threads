import{a as K}from"./rolldown-runtime-BaZ8gS7u.js";import{E as Y,c as Z,d as ee}from"./framework-CsA6nn9m.js";import"./database-BiY55TQY.js";import{Jn as V,Mt as se,On as W,bn as _,tn as te}from"./ui-libs-DEbj3_uz.js";import"./media-libs-Btb8RX-I.js";import"./animations-T0TOZv2c.js";import{C as ae,D as ie,E as I,L as G,P as re,T as ne,gt as J,o as le}from"./index-BYMfKdTH.js";import"./VideoPlayer-s-5JkaAE.js";import{n as de}from"./post-DSqExfHz.js";import"./text-processing-DFvQvkgt.js";import"./linkify-BIniK2-v.js";import{s as oe}from"./hooks-ChHy5H51.js";var ce=Z(),Ce=K(Y(),1),s=K(ee(),1),me=()=>{const e=(0,ce.c)(61),{currentUser:n,searchQuery:i,setSearchQuery:l,activeTab:a,setActiveTab:$,isCreateModalOpen:E,setIsCreateModalOpen:d,communitiesData:R,isCommunitiesLoading:X,isFetchingMoreCommunities:C,hasMoreCommunities:F,postsData:g,isPostsLoading:y,isFetchingMorePosts:w,hasMorePosts:D,filteredCommunities:N,usersData:k,isUsersLoading:M,isFetchingMoreUsers:U,hasMoreUsers:O,handleCommunityClick:q,loadCommunities:Q,loadPosts:A,loadUsers:B,navigate:r}=oe();if((X||y||M)&&!R.length&&!g.length&&!k.length){let t;return e[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,s.jsx)("div",{className:"min-h-screen overflow-hidden rounded-none border-y border-zinc-100 bg-white dark:bg-black dark:border-zinc-800 md:rounded-xl md:border",children:[1,2,3].map(xe)}),e[0]=t):t=e[0],t}let o;e[1]!==l?(o=()=>l(""),e[1]=l,e[2]=o):o=e[2];let c;e[3]!==i||e[4]!==l||e[5]!==o?(c=(0,s.jsx)(re,{value:i,onChange:l,onClear:o,placeholder:"Search communities or posts...",className:"flex-1"}),e[3]=i,e[4]=l,e[5]=o,e[6]=c):c=e[6];let m;e[7]!==n||e[8]!==d?(m=n&&(0,s.jsx)("button",{onClick:()=>d(!0),className:"flex size-11 shrink-0 items-center justify-center rounded-xl bg-zinc-950 text-white shadow-sm transition-all hover:scale-105 active:scale-95 dark:bg-white dark:text-zinc-950",title:"Create Community",children:(0,s.jsx)(te,{size:22,strokeWidth:3})}),e[7]=n,e[8]=d,e[9]=m):m=e[9];let x;e[10]!==c||e[11]!==m?(x=(0,s.jsxs)("div",{className:"flex gap-2 p-4",children:[c,m]}),e[10]=c,e[11]=m,e[12]=x):x=e[12];let L;e[13]===Symbol.for("react.memo_cache_sentinel")?(L=(0,s.jsxs)(I,{value:"communities",className:"flex h-full gap-2 rounded-none border-b-2 border-transparent px-2 font-bold text-zinc-500 transition-all data-[state=active]:border-violet-600 data-[state=active]:bg-transparent data-[state=active]:text-zinc-950 dark:data-[state=active]:text-white",children:[(0,s.jsx)(se,{size:18}),"Communities"]}),e[13]=L):L=e[13];let P;e[14]===Symbol.for("react.memo_cache_sentinel")?(P=(0,s.jsxs)(I,{value:"posts",className:"flex h-full gap-2 rounded-none border-b-2 border-transparent px-2 font-bold text-zinc-500 transition-all data-[state=active]:border-violet-600 data-[state=active]:bg-transparent data-[state=active]:text-zinc-950 dark:data-[state=active]:text-white",children:[(0,s.jsx)(W,{size:18}),"Posts"]}),e[14]=P):P=e[14];let S;e[15]===Symbol.for("react.memo_cache_sentinel")?(S=(0,s.jsxs)(ne,{className:"gap-8 rounded-none border-none bg-transparent p-0 px-4 w-full h-12",children:[L,P,(0,s.jsxs)(I,{value:"users",className:"flex h-full gap-2 rounded-none border-b-2 border-transparent px-2 font-bold text-zinc-500 transition-all data-[state=active]:border-violet-600 data-[state=active]:bg-transparent data-[state=active]:text-zinc-950 dark:data-[state=active]:text-white",children:[(0,s.jsx)(V,{size:18}),"Users"]})]}),e[15]=S):S=e[15];let f;e[16]!==a||e[17]!==$?(f=(0,s.jsx)("div",{className:"border-t border-zinc-100 px-1 dark:border-zinc-800",children:(0,s.jsx)(ae,{value:a,onValueChange:$,className:"w-full",children:S})}),e[16]=a,e[17]=$,e[18]=f):f=e[18];let u;e[19]!==x||e[20]!==f?(u=(0,s.jsxs)("div",{className:"sticky top-0 z-10 border-b border-zinc-100 bg-white/90 backdrop-blur-md dark:bg-black/90 dark:border-zinc-800",children:[x,f]}),e[19]=x,e[20]=f,e[21]=u):u=e[21];let h;e[22]!==a||e[23]!==N||e[24]!==q||e[25]!==F||e[26]!==C||e[27]!==Q?(h=a==="communities"&&(0,s.jsxs)("div",{className:"divide-y divide-zinc-100 dark:divide-zinc-800",children:[N.length>0?N.map(t=>(0,s.jsx)(G,{profile:t,onUserClick:q,isCommunity:!0},t.handle)):(0,s.jsx)("div",{className:"p-20 text-center text-zinc-500",children:(0,s.jsx)("p",{className:"font-bold",children:"No communities found"})}),F&&N.length>0&&(0,s.jsx)("div",{className:"flex justify-center border-t border-zinc-100 p-6 dark:border-zinc-800",children:(0,s.jsxs)(J,{variant:"secondary",className:"w-full",onClick:()=>Q(),disabled:C,children:[C&&(0,s.jsx)(_,{size:18,className:"mr-2 animate-spin"}),"Load more"]})})]}),e[22]=a,e[23]=N,e[24]=q,e[25]=F,e[26]=C,e[27]=Q,e[28]=h):h=e[28];let b;e[29]!==a||e[30]!==n||e[31]!==D||e[32]!==w||e[33]!==y||e[34]!==A||e[35]!==r||e[36]!==g||e[37]!==i?(b=a==="posts"&&(0,s.jsx)("div",{className:"divide-y divide-zinc-100 dark:divide-zinc-800",children:g.length>0?(0,s.jsxs)(s.Fragment,{children:[g.map(t=>(0,s.jsx)(de,{currentUser:n,...t,onClick:()=>r(`/p/${t.id}`),onUserClick:H=>r(`/u/${H}`)},t.feed_id||t.id)),D&&(0,s.jsx)("div",{className:"flex justify-center border-t border-zinc-100 p-6 dark:border-zinc-800",children:(0,s.jsxs)(J,{variant:"secondary",className:"w-full max-w-xs",onClick:()=>A(),disabled:w,children:[" ",w&&(0,s.jsx)(_,{size:18,className:"mr-2 animate-spin"}),"Load more"]})})]}):y?(0,s.jsx)("div",{className:"flex justify-center p-20",children:(0,s.jsx)(_,{className:"animate-spin text-violet-500",size:32})}):(0,s.jsxs)("div",{className:"flex flex-col items-center gap-3 p-20 text-center text-zinc-500",children:[(0,s.jsx)("div",{className:"rounded-full bg-zinc-50 p-4 dark:bg-zinc-900",children:(0,s.jsx)(W,{size:32,className:"text-zinc-300"})}),(0,s.jsx)("p",{className:"font-bold",children:i?`No posts found matching "${i}"`:"No posts found"})]})}),e[29]=a,e[30]=n,e[31]=D,e[32]=w,e[33]=y,e[34]=A,e[35]=r,e[36]=g,e[37]=i,e[38]=b):b=e[38];let p;e[39]!==a||e[40]!==O||e[41]!==U||e[42]!==M||e[43]!==B||e[44]!==r||e[45]!==i||e[46]!==k?(p=a==="users"&&(0,s.jsx)("div",{className:"divide-y divide-zinc-100 dark:divide-zinc-800",children:k.length>0?(0,s.jsxs)(s.Fragment,{children:[k.map(t=>(0,s.jsx)(G,{profile:t,onUserClick:H=>r(`/u/${H}`)},t.id)),O&&(0,s.jsx)("div",{className:"flex justify-center border-t border-zinc-100 p-6 dark:border-zinc-800",children:(0,s.jsxs)(J,{variant:"secondary",className:"w-full max-w-xs",onClick:()=>B(),disabled:U,children:[U&&(0,s.jsx)(_,{size:18,className:"mr-2 animate-spin"}),"Load more"]})})]}):M?(0,s.jsx)("div",{className:"flex justify-center p-20",children:(0,s.jsx)(_,{className:"animate-spin text-violet-500",size:32})}):(0,s.jsxs)("div",{className:"flex flex-col items-center gap-3 p-20 text-center text-zinc-500",children:[(0,s.jsx)("div",{className:"rounded-full bg-zinc-50 p-4 dark:bg-zinc-900",children:(0,s.jsx)(V,{size:32,className:"text-zinc-300"})}),(0,s.jsx)("p",{className:"font-bold",children:i?`No users found matching "${i}"`:"No users found"})]})}),e[39]=a,e[40]=O,e[41]=U,e[42]=M,e[43]=B,e[44]=r,e[45]=i,e[46]=k,e[47]=p):p=e[47];let v;e[48]!==b||e[49]!==p||e[50]!==h?(v=(0,s.jsxs)("div",{className:"min-h-screen",children:[h,b,p]}),e[48]=b,e[49]=p,e[50]=h,e[51]=v):v=e[51];let j;e[52]!==d?(j=()=>d(!1),e[52]=d,e[53]=j):j=e[53];let z;e[54]!==E||e[55]!==j?(z=(0,s.jsx)(le,{isOpen:E,onClose:j}),e[54]=E,e[55]=j,e[56]=z):z=e[56];let T;return e[57]!==v||e[58]!==z||e[59]!==u?(T=(0,s.jsxs)("div",{className:"min-h-screen overflow-hidden rounded-none border-y border-zinc-100 bg-white pb-20 shadow-sm dark:bg-black dark:border-zinc-800 md:rounded-xl md:border",children:[u,v,z]}),e[57]=v,e[58]=z,e[59]=u,e[60]=T):T=e[60],T},ye=me;function xe(e){return(0,s.jsx)(ie,{},e)}export{ye as default};

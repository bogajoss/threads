import{a as pe}from"./rolldown-runtime-BaZ8gS7u.js";import{c as be,s as ge}from"./animations-DZuN0xpW.js";import{_ as ve,c as ze}from"./framework-YRQI4BOE.js";import"./database-Bh-Nv8Zy.js";import{En as ke,Gn as le,It as Ne,Ln as we,Qt as re,Rn as oe,Sn as ye,dr as ne,en as Fe,pr as Pe,ur as _e}from"./ui-libs-dHBs5Tk6.js";import"./media-libs-CqtNZWFg.js";import{B as Ce,Ct as te,F as Me,Fn as ce,G as de,K as Se,L as Te,M as Ie,N as $e,Nt as Le,P as Ue,Pn as xe,Q as Be,Qt as De,R as Ae,St as me,Tt as Ee,W as Oe,Xt as Re,Z as qe,Zt as Ge,bt as Qe,dn as He,en as ie,ht as Ve,in as We,j as Xe,jn as he,lt as Ze,m as Ke,mt as fe,q as Je,tn as Ye,ut as es,wt as ss,xt as ts}from"./index-Dq2Ooid_.js";import"./VideoPlayer-BQ4nDHdA.js";import{n as as}from"./post-CTAte90E.js";import"./text-processing-COMFTedg.js";import{t as ns}from"./rich-text-CgpDHLPl.js";import{n as ae,t as is}from"./actionsheet-DajeF8l7.js";import{t as je}from"./skeleton-profile-D_fRChRf.js";var ls=ze(),ue=pe(be(),1),s=pe(ge(),1),rs=({profile:e,currentUser:f,isCurrentUser:E,onEditProfile:K,isCommunity:o,onShowFollowers:O,onShowFollowing:R})=>{const{addToast:i}=We(),u=ve(),{openReport:m}=Ye(),[p,c]=(0,ue.useState)(!1),[d,l]=(0,ue.useState)(!1),q=Le("(min-width: 1024px)"),{isFollowing:j,stats:b,loading:g,handleFollow:G}=es(e||{},f?.id);if(!e)return(0,s.jsx)(je,{});const Q=async()=>{if(!f){i("Please sign in to message users","info");return}c(!0);try{u(`/m/${await He(f.id,e.id)}`)}catch(r){console.error("Failed to start conversation:",r),i("Failed to open chat","error")}finally{c(!1)}};return(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsxs)("div",{className:"relative h-32 w-full bg-zinc-200 dark:bg-zinc-800 sm:h-48",children:[e.cover&&(0,s.jsx)("img",{src:ce(e.cover,e.isPro),className:"h-full w-full object-cover transition-opacity duration-500",alt:"Cover"}),(0,s.jsx)("div",{className:"absolute -bottom-12 left-4 sm:-bottom-16 sm:left-6",children:(0,s.jsx)("div",{className:"relative rounded-full bg-white p-1 shadow-xl ring-4 ring-white dark:bg-black dark:ring-black",children:(0,s.jsxs)(Re,{className:"size-24 sm:size-32",children:[(0,s.jsx)(De,{src:ce(e.avatar,e.isPro),alt:e.handle,className:"object-cover"}),(0,s.jsx)(Ge,{className:"text-4xl font-bold",children:e.handle?.[0]?.toUpperCase()})]})})})]}),(0,s.jsxs)("div",{className:"flex flex-col space-y-4 p-4 pt-16 sm:p-6 sm:pt-20",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsx)("div",{className:"min-w-0 flex-1 pr-4"}),(0,s.jsx)("div",{className:"flex shrink-0 gap-2",children:E?(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:()=>K?.(e),className:"flex size-10 items-center justify-center rounded-full border border-zinc-200 text-zinc-700 transition-all hover:bg-zinc-50 active:scale-95 dark:border-zinc-700 dark:text-zinc-300 dark:hover:bg-zinc-900",title:"Edit Profile","aria-label":"Edit Profile",children:(0,s.jsx)(Xe,{size:20})}),(0,s.jsx)("button",{onClick:()=>u("/settings"),className:"rounded-full border border-zinc-200 p-2 text-zinc-700 transition-all hover:bg-zinc-50 active:scale-95 dark:border-zinc-700 dark:text-zinc-300 dark:hover:bg-zinc-900",title:"Settings","aria-label":"Settings",children:(0,s.jsx)(Ae,{size:20})})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{onClick:Q,disabled:p,className:"rounded-full border border-zinc-200 p-2 text-zinc-700 transition-colors hover:bg-zinc-50 disabled:opacity-50 dark:border-zinc-700 dark:text-zinc-300 dark:hover:bg-zinc-900 flex items-center justify-center min-w-[36px]","aria-label":"Message",children:p?(0,s.jsx)(ke,{size:18,className:"animate-spin"}):(0,s.jsx)(ye,{size:20})}),(0,s.jsx)("button",{className:"rounded-full border border-zinc-200 p-2 text-zinc-700 transition-colors hover:bg-zinc-50 dark:border-zinc-700 dark:text-zinc-300 dark:hover:bg-zinc-900","aria-label":"Notifications",children:(0,s.jsx)(_e,{size:20})}),(0,s.jsx)(ie,{variant:j?"secondary":"primary",onClick:G,className:"flex min-w-0 items-center gap-2 px-4 text-sm sm:min-w-[100px]",loading:g,children:j?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)($e,{size:18}),(0,s.jsx)("span",{className:"hidden sm:inline",children:"Following"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(Ie,{size:18}),(0,s.jsx)("span",{className:"hidden sm:inline",children:"Follow"})]})}),q?(0,s.jsxs)(Qe,{children:[(0,s.jsx)(Ee,{asChild:!0,children:(0,s.jsx)("button",{className:"rounded-full p-2 text-zinc-700 transition-colors hover:bg-zinc-100 dark:text-zinc-300 dark:hover:bg-zinc-800","aria-label":"More options",children:(0,s.jsx)(le,{size:20})})}),(0,s.jsxs)(ts,{align:"end",className:"w-48",children:[(0,s.jsxs)(me,{children:[(0,s.jsxs)(te,{className:"cursor-pointer gap-2",onClick:()=>{he(`${xe()}/profile/${e.handle||e.id}`).then(()=>i("Profile link copied!")).catch(()=>i("Failed to copy link","error"))},children:[(0,s.jsx)(re,{size:16}),"Share Profile"]}),(0,s.jsxs)(te,{className:"cursor-pointer gap-2",onClick:()=>m(o?"community":"user",e.id),children:[(0,s.jsx)(oe,{size:16}),"Report ",o?"community":"user"]})]}),(0,s.jsx)(ss,{}),(0,s.jsx)(me,{children:(0,s.jsxs)(te,{variant:"destructive",className:"cursor-pointer gap-2",onClick:()=>i("User blocked","info"),children:[(0,s.jsx)(ne,{size:16}),"Block user"]})})]})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{onClick:()=>l(!0),className:"rounded-full p-2 text-zinc-700 transition-colors hover:bg-zinc-100 dark:text-zinc-300 dark:hover:bg-zinc-800","aria-label":"More options",children:(0,s.jsx)(le,{size:20})}),(0,s.jsxs)(is,{isOpen:d,onClose:()=>l(!1),children:[(0,s.jsx)(ae,{icon:(0,s.jsx)(re,{size:18}),onClick:()=>{he(`${xe()}/profile/${e.handle||e.id}`).then(()=>{i("Profile link copied!"),l(!1)}).catch(()=>{i("Failed to copy link","error"),l(!1)})},children:"Share Profile"}),(0,s.jsxs)(ae,{icon:(0,s.jsx)(oe,{size:18}),onClick:()=>{m(o?"community":"user",e.id),l(!1)},children:["Report ",o?"community":"user"]}),(0,s.jsx)(ae,{variant:"destructive",icon:(0,s.jsx)(ne,{size:18}),onClick:()=>{i("User blocked","info"),l(!1)},children:"Block user"})]})]})]})})]}),(0,s.jsxs)("div",{className:"space-y-0.5",children:[(0,s.jsxs)("div",{className:"mt-1 flex items-center gap-1.5",children:[(0,s.jsx)("h1",{className:"text-xl font-extrabold text-zinc-900 dark:text-zinc-100",children:e.name}),e.verified&&(0,s.jsx)(Ce,{size:20}),e.isPro&&(0,s.jsx)(Te,{size:20}),e.isBanned&&(0,s.jsxs)("span",{className:"flex items-center gap-1 rounded-full bg-rose-100 px-2 py-0.5 text-[10px] font-black uppercase tracking-wider text-rose-600 dark:bg-rose-500/10 dark:text-rose-500",children:[(0,s.jsx)(we,{size:10}),"Banned"]})]}),!o&&(0,s.jsx)("div",{className:"flex items-center space-x-3",children:(0,s.jsxs)("span",{className:"-ml-1.5 rounded-md px-1.5 py-0.5 text-sm font-medium text-zinc-500 dark:text-zinc-400",children:["@",e.handle]})})]}),(0,s.jsx)("div",{className:"whitespace-pre-line text-sm leading-relaxed text-zinc-900 dark:text-zinc-100 sm:text-[15px]",children:(0,s.jsx)(ns,{content:e.bio,className:"text-zinc-900 dark:text-zinc-100"})}),(e.website||e.location)&&(0,s.jsxs)("div",{className:"flex flex-wrap gap-x-5 gap-y-2 pt-1 text-sm",children:[e.location&&(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)(Me,{size:14}),e.location]}),e.website&&(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)(Ue,{size:14}),(0,s.jsx)("a",{href:`https://${e.website}`,target:"_blank",rel:"noreferrer",className:"font-semibold text-blue-600 hover:underline dark:text-blue-400",children:e.website})]})]}),(0,s.jsx)("div",{className:"relative z-10 flex gap-4 pt-2 text-sm sm:gap-6",children:o?(0,s.jsxs)("button",{className:"group flex cursor-pointer gap-x-1",children:[(0,s.jsx)("span",{className:"font-bold text-zinc-900 dark:text-white",children:e.members}),(0,s.jsx)("span",{className:"text-zinc-500 dark:text-zinc-400",children:"Members"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("button",{onClick:r=>{r.preventDefault(),r.stopPropagation(),R()},className:"group flex cursor-pointer gap-x-1",children:[(0,s.jsx)("span",{className:"font-bold text-zinc-900 dark:text-white",children:b.following}),(0,s.jsx)("span",{className:"text-zinc-500 dark:text-zinc-400",children:"Following"})]}),(0,s.jsxs)("button",{onClick:r=>{r.preventDefault(),r.stopPropagation(),O()},className:"group flex cursor-pointer gap-x-1",children:[(0,s.jsx)("span",{className:"font-bold text-zinc-900 dark:text-white",children:b.followers}),(0,s.jsx)("span",{className:"text-zinc-500 dark:text-zinc-400",children:"Followers"})]})]})})]})]})},os=rs,cs=()=>{const e=(0,ls.c)(80),{handle:f,profile:E,loading:K,activeProfileTab:o,setActiveProfileTab:O,loadingPosts:R,isFetchingMorePosts:i,hasMorePosts:u,filteredPosts:m,isFollowModalOpen:p,setIsFollowModalOpen:c,followModalType:d,followListData:l,isListLoading:q,isFetchingMoreFollows:j,hasMoreFollows:b,openFollowModal:g,fetchNextFollows:G,handlePostClick:Q,handleUserClick:r,loadUserPosts:J,currentUser:h,navigate:x}=Ke();if(K){let t;return e[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,s.jsx)(je,{}),e[0]=t):t=e[0],t}if(!E){const t=`Try searching for another. The user @${f} could not be found.`;let n;return e[1]!==t?(n=(0,s.jsx)("div",{className:"flex min-h-[600px] items-center justify-center overflow-hidden rounded-none border-zinc-100 bg-background md:rounded-xl",children:(0,s.jsx)(fe,{title:"Account doesn't exist",message:t,icon:Ne})}),e[1]=t,e[2]=n):n=e[2],n}if(E.isBanned){const t=`The user @${f} has been suspended for violating our community guidelines.`;let n;return e[3]!==t?(n=(0,s.jsx)("div",{className:"flex min-h-[600px] items-center justify-center overflow-hidden rounded-none border-zinc-100 bg-background md:rounded-xl",children:(0,s.jsx)(fe,{title:"This account is banned",message:t,icon:ne})}),e[3]=t,e[4]=n):n=e[4],n}const a=E;let H;e[5]!==h||e[6]!==a.handle||e[7]!==m||e[8]!==Q||e[9]!==r||e[10]!==u||e[11]!==i||e[12]!==J||e[13]!==R?(H=t=>{const n=t===void 0?!1:t;return R?(0,s.jsx)("div",{className:"flex flex-col",children:[1,2,3].map(ds)}):m.length>0?(0,s.jsxs)(s.Fragment,{children:[m.map(Z=>(0,s.jsx)(as,{currentUser:h,...Z,onClick:()=>Q(Z.id),onUserClick:r},Z.feed_id||Z.id)),u&&(0,s.jsx)("div",{className:"flex justify-center p-6",children:(0,s.jsx)(ie,{variant:"secondary",className:"w-full max-w-xs",onClick:()=>J(),loading:i,children:"Load more posts"})})]}):n?null:(0,s.jsxs)("div",{className:"flex animate-in fade-in flex-col items-center gap-4 p-20 text-center text-zinc-500 duration-500",children:[(0,s.jsx)("div",{className:"mb-2 rounded-full bg-zinc-50 p-6 ring-1 ring-zinc-100 dark:bg-zinc-900 dark:ring-zinc-800",children:(0,s.jsx)(Fe,{size:40,className:"text-zinc-300 dark:text-zinc-700"})}),(0,s.jsx)("h3",{className:"text-xl font-bold dark:text-white",children:"No posts yet"}),(0,s.jsxs)("p",{className:"max-w-[250px] text-sm text-zinc-500 dark:text-zinc-400",children:["When @",a.handle," shares posts, they will appear here."]})]})},e[5]=h,e[6]=a.handle,e[7]=m,e[8]=Q,e[9]=r,e[10]=u,e[11]=i,e[12]=J,e[13]=R,e[14]=H):H=e[14];const v=H;let z;e[15]!==x?(z=()=>x(-1),e[15]=x,e[16]=z):z=e[16];let V;e[17]===Symbol.for("react.memo_cache_sentinel")?(V=(0,s.jsx)(Pe,{size:22}),e[17]=V):V=e[17];let k;e[18]!==z?(k=(0,s.jsx)("button",{onClick:z,className:"rounded-full p-1 transition-colors hover:bg-zinc-100 dark:text-white dark:hover:bg-zinc-800",children:V}),e[18]=z,e[19]=k):k=e[19];let N;e[20]!==a.name?(N=(0,s.jsx)("h5",{className:"text-lg font-bold leading-none dark:text-white",children:a.name}),e[20]=a.name,e[21]=N):N=e[21];const Y=a.follower_count||0;let w;e[22]!==Y?(w=(0,s.jsxs)("span",{className:"mt-0.5 text-xs text-zinc-500",children:[Y," Followers"]}),e[22]=Y,e[23]=w):w=e[23];let y;e[24]!==N||e[25]!==w?(y=(0,s.jsxs)("div",{className:"flex flex-col",children:[N,w]}),e[24]=N,e[25]=w,e[26]=y):y=e[26];let F;e[27]!==k||e[28]!==y?(F=(0,s.jsx)("div",{className:"sticky top-0 z-20 border-b border-zinc-100 bg-white/90 p-4 py-3 backdrop-blur-md dark:border-zinc-800 dark:bg-black/90 md:hidden",children:(0,s.jsxs)("div",{className:"flex items-center gap-x-4",children:[k,y]})}),e[27]=k,e[28]=y,e[29]=F):F=e[29];const ee=h?.handle===a.handle;let P;e[30]!==x?(P=()=>x("/edit-profile"),e[30]=x,e[31]=P):P=e[31];let _,C;e[32]!==g?(_=()=>g("Followers"),C=()=>g("Following"),e[32]=g,e[33]=_,e[34]=C):(_=e[33],C=e[34]);let M;e[35]!==h||e[36]!==a||e[37]!==P||e[38]!==_||e[39]!==C||e[40]!==ee?(M=(0,s.jsx)(os,{profile:a,currentUser:h,isCurrentUser:ee,onEditProfile:P,onShowFollowers:_,onShowFollowing:C}),e[35]=h,e[36]=a,e[37]=P,e[38]=_,e[39]=C,e[40]=ee,e[41]=M):M=e[41];let W;e[42]===Symbol.for("react.memo_cache_sentinel")?(W=(0,s.jsx)("div",{className:"sticky top-[60px] z-10 border-b border-zinc-100 bg-white/90 backdrop-blur-md dark:border-zinc-800 dark:bg-black/90 md:top-0",children:(0,s.jsx)(Se,{className:"hide-scrollbar h-auto w-full justify-start overflow-x-auto rounded-none bg-transparent p-0 px-2",children:["feed","media"].map(xs)})}),e[42]=W):W=e[42];let S;e[43]!==v?(S=v(),e[43]=v,e[44]=S):S=e[44];let T;e[45]!==S?(T=(0,s.jsx)(de,{value:"feed",className:"m-0 border-none",children:S}),e[45]=S,e[46]=T):T=e[46];let I;e[47]!==v?(I=v(),e[47]=v,e[48]=I):I=e[48];let $;e[49]!==I?($=(0,s.jsx)(de,{value:"media",className:"m-0 border-none",children:I}),e[49]=I,e[50]=$):$=e[50];let L;e[51]!==o||e[52]!==O||e[53]!==T||e[54]!==$?(L=(0,s.jsxs)(Oe,{value:o,onValueChange:O,className:"w-full",children:[W,T,$]}),e[51]=o,e[52]=O,e[53]=T,e[54]=$,e[55]=L):L=e[55];let U;e[56]!==M||e[57]!==L||e[58]!==F?(U=(0,s.jsxs)("div",{className:"border-y border-zinc-100 dark:border-zinc-800 md:border-b-0",children:[F,M,L]}),e[56]=M,e[57]=L,e[58]=F,e[59]=U):U=e[59];let B;e[60]!==c?(B=()=>c(!1),e[60]=c,e[61]=B):B=e[61];const se=d==="Followers"?`People who follow @${a.handle}`:`People @${a.handle} follows`;let D;e[62]!==G||e[63]!==l||e[64]!==d||e[65]!==b||e[66]!==j||e[67]!==q||e[68]!==x||e[69]!==c?(D=(0,s.jsx)("div",{className:"flex max-h-[75vh] flex-col overflow-y-auto",children:(0,s.jsx)("div",{className:"min-h-[300px]",children:q?(0,s.jsx)("div",{className:"flex flex-col",children:[1,2,3,4,5].map(ms)}):l.length>0?(0,s.jsxs)("div",{className:"divide-y divide-zinc-100 dark:divide-zinc-800",children:[l.map(t=>(0,s.jsx)(Ze,{profile:t,onUserClick:n=>{c(!1),x(`/u/${n}`)}},t.id)),b&&(0,s.jsx)("div",{className:"flex justify-center p-4",children:(0,s.jsx)(ie,{variant:"secondary",className:"w-full text-xs",onClick:()=>G(),loading:j,children:"Load more"})})]}):(0,s.jsx)("div",{className:"flex flex-col items-center justify-center py-20 text-zinc-500",children:(0,s.jsxs)("p",{className:"font-medium",children:["No ",d.toLowerCase()," yet."]})})})}),e[62]=G,e[63]=l,e[64]=d,e[65]=b,e[66]=j,e[67]=q,e[68]=x,e[69]=c,e[70]=D):D=e[70];let A;e[71]!==d||e[72]!==p||e[73]!==B||e[74]!==se||e[75]!==D?(A=(0,s.jsx)(Ve,{isOpen:p,onClose:B,title:d,description:se,className:"sm:max-w-md",children:D}),e[71]=d,e[72]=p,e[73]=B,e[74]=se,e[75]=D,e[76]=A):A=e[76];let X;return e[77]!==U||e[78]!==A?(X=(0,s.jsxs)("div",{className:"min-h-screen overflow-hidden rounded-none border-zinc-100 bg-white pb-20 dark:bg-black dark:border-zinc-800 md:rounded-xl",children:[U,A]}),e[77]=U,e[78]=A,e[79]=X):X=e[79],X},Fs=cs;function ds(e){return(0,s.jsx)(Be,{},e)}function xs(e){return(0,s.jsx)(Je,{value:e,className:"flex-1 whitespace-nowrap rounded-none border-b-2 px-4 py-4 text-sm font-bold capitalize text-zinc-500 transition-all data-[state=active]:border-black data-[state=active]:text-black dark:data-[state=active]:border-white dark:data-[state=active]:text-white",children:e==="feed"?"Posts":e},e)}function ms(e){return(0,s.jsx)(qe,{},e)}export{Fs as default};

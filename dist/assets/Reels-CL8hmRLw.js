import{a as K}from"./rolldown-runtime-BaZ8gS7u.js";import{_ as Y,c as Z,l as ee,w as te}from"./framework-3lkjbTvb.js";import"./database-COznt_u0.js";import{Mt as le,jt as re,mr as se,or as ae,rr as oe}from"./ui-libs-oBja7Jpd.js";import"./media-libs-C98UjHPF.js";import{en as ie,s as ne,tn as ce,z as J}from"./index-BknzezBr.js";import{n as F,t as ue}from"./post-aDZbD460.js";import"./text-processing-BMF44JzJ.js";import"./VideoPlayer-ZxUYM3BN.js";import"./actionsheet-5TrJ80vx.js";var me=Z(),g=K(te(),1),l=K(ee(),1),fe=()=>{const e=(0,me.c)(60),t=Y(),H=(0,g.useRef)(t.pathname);let k;e[0]!==t.pathname?(k=()=>{const r=H.current,s=t.pathname,V=de;V(r)&&!V(s)&&(document.querySelectorAll(".plyr").forEach(pe),document.querySelectorAll("video").forEach(he),F()),H.current=s},e[0]=t.pathname,e[1]=k):k=e[1];let j;e[2]!==t?(j=[t],e[2]=t,e[3]=j):j=e[3],(0,g.useEffect)(k,j);let N;e[4]===Symbol.for("react.memo_cache_sentinel")?(N=[],e[4]=N):N=e[4],(0,g.useEffect)(ve,N);const{reels:_,loading:O,loadingMore:W,activeReelId:o,volume:a,setVolume:I,containerRef:P,setReelRef:w,navigate:$,scrollToNext:B,scrollToPrev:D}=ne(),[G,S]=(0,g.useState)(!1),i=(0,g.useRef)(null);let R;e[5]!==$?(R=()=>{document.querySelectorAll(".plyr").forEach(_e),document.querySelectorAll("video").forEach(we),F(),$(-1)},e[5]=$,e[6]=R):R=e[6];const n=R;let T;e[7]===Symbol.for("react.memo_cache_sentinel")?(T=r=>{r?.type==="click"?S(ge):S(!0),i.current&&clearTimeout(i.current),i.current=setTimeout(()=>S(!1),4e3)},e[7]=T):T=e[7];const U=T;if(O){let r;return e[8]===Symbol.for("react.memo_cache_sentinel")?(r=(0,l.jsx)("div",{className:"flex h-[100dvh] w-full items-center justify-center bg-black",children:(0,l.jsx)(J,{})}),e[8]=r):r=e[8],r}if(_.length===0){let r;e[9]===Symbol.for("react.memo_cache_sentinel")?(r=(0,l.jsx)("p",{className:"text-zinc-500",children:"No reels found."}),e[9]=r):r=e[9];let s;return e[10]!==n?(s=(0,l.jsxs)("div",{className:"flex h-[100dvh] w-full flex-col items-center justify-center gap-4 bg-black text-white",children:[r,(0,l.jsx)("button",{onClick:n,className:"rounded-full bg-white px-4 py-2 text-sm font-bold text-black",children:"Go Back"})]}),e[10]=n,e[11]=s):s=e[11],s}let E;e[12]===Symbol.for("react.memo_cache_sentinel")?(E=(0,l.jsx)(se,{size:24,strokeWidth:2.5}),e[12]=E):E=e[12];let c;e[13]!==n?(c=(0,l.jsx)("button",{onClick:n,className:"absolute left-6 top-[max(1.5rem,env(safe-area-inset-top)+1.5rem)] z-50 rounded-full border border-white/10 bg-black/20 p-2.5 text-white shadow-xl backdrop-blur-md transition-all hover:bg-black/40 active:scale-90",title:"Back",children:E}),e[13]=n,e[14]=c):c=e[14];let z;e[15]===Symbol.for("react.memo_cache_sentinel")?(z=()=>U(),e[15]=z):z=e[15];let u;e[16]!==a?(u=(0,l.jsx)("button",{onClick:U,onMouseEnter:z,className:"rounded-full border border-white/10 bg-black/20 p-2.5 text-white shadow-xl backdrop-blur-md transition-all hover:bg-black/40 active:scale-90",title:"Volume",children:a===0?(0,l.jsx)(re,{size:24,strokeWidth:2.5}):(0,l.jsx)(le,{size:24,strokeWidth:2.5})}),e[16]=a,e[17]=u):u=e[17];let m;e[18]!==I||e[19]!==G||e[20]!==a?(m=G&&(0,l.jsx)(ie.div,{initial:{opacity:0,y:10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.95},onMouseEnter:()=>{i.current&&clearTimeout(i.current)},onMouseLeave:()=>{i.current=setTimeout(()=>S(!1),2e3)},className:"flex h-32 w-10 items-center justify-center rounded-full border border-white/10 bg-black/20 p-2 shadow-xl backdrop-blur-md",children:(0,l.jsx)("input",{type:"range",min:"0",max:"100",value:a*100,onChange:r=>{I(Number(r.target.value)/100),U()},className:"h-24 w-1 cursor-pointer appearance-none rounded-lg bg-white/20 accent-white transition-all hover:bg-white/30",style:{writingMode:"vertical-lr",direction:"rtl",WebkitAppearance:"slider-vertical"}})}),e[18]=I,e[19]=G,e[20]=a,e[21]=m):m=e[21];let f;e[22]!==m?(f=(0,l.jsx)(ce,{children:m}),e[22]=m,e[23]=f):f=e[23];let d;e[24]!==f||e[25]!==u?(d=(0,l.jsxs)("div",{className:"absolute right-6 top-[max(1.5rem,env(safe-area-inset-top)+1.5rem)] z-50 flex flex-col items-center gap-2",children:[u,f]}),e[24]=f,e[25]=u,e[26]=d):d=e[26];let A;e[27]===Symbol.for("react.memo_cache_sentinel")?(A=(0,l.jsx)(oe,{size:28,strokeWidth:3,className:"transition-transform group-hover:-translate-y-0.5"}),e[27]=A):A=e[27];let p;e[28]!==D?(p=(0,l.jsx)("button",{onClick:D,className:"group rounded-full border border-white/10 bg-black/20 p-3 text-white shadow-xl backdrop-blur-md transition-all hover:bg-black/40 active:scale-90",title:"Previous Reel",children:A}),e[28]=D,e[29]=p):p=e[29];let q;e[30]===Symbol.for("react.memo_cache_sentinel")?(q=(0,l.jsx)(ae,{size:28,strokeWidth:3,className:"transition-transform group-hover:translate-y-0.5"}),e[30]=q):q=e[30];let h;e[31]!==B?(h=(0,l.jsx)("button",{onClick:B,className:"group rounded-full border border-white/10 bg-black/20 p-3 text-white shadow-xl backdrop-blur-md transition-all hover:bg-black/40 active:scale-90",title:"Next Reel",children:q}),e[31]=B,e[32]=h):h=e[32];let b;e[33]!==p||e[34]!==h?(b=(0,l.jsxs)("div",{className:"absolute right-6 top-1/2 z-50 hidden -translate-y-1/2 flex-col gap-4 md:flex",children:[p,h]}),e[33]=p,e[34]=h,e[35]=b):b=e[35];let C;e[36]!==o?(C=r=>r.id===o,e[36]=o,e[37]=C):C=e[37];const x=_.findIndex(C);let M;if(e[38]!==x||e[39]!==o||e[40]!==_||e[41]!==w||e[42]!==a){let r;e[44]!==x||e[45]!==o||e[46]!==w||e[47]!==a?(r=(s,V)=>(0,l.jsx)("div",{ref:Q=>w(s.id,Q),"data-id":s.id,className:"snap-start snap-always h-full w-full",children:(0,l.jsx)(ue,{reel:s,isActive:o===s.id,volume:a,shouldLoad:x===-1||Math.abs(x-V)<=1})},s.feed_id||s.id),e[44]=x,e[45]=o,e[46]=w,e[47]=a,e[48]=r):r=e[48],M=_.map(r),e[38]=x,e[39]=o,e[40]=_,e[41]=w,e[42]=a,e[43]=M}else M=e[43];const X=M;let y;e[49]!==W?(y=W&&(0,l.jsx)("div",{className:"flex h-[100dvh] w-full snap-start items-center justify-center bg-black",children:(0,l.jsx)(J,{})}),e[49]=W,e[50]=y):y=e[50];let v;e[51]!==P||e[52]!==X||e[53]!==y?(v=(0,l.jsxs)("div",{ref:P,className:"no-scrollbar h-full w-full snap-y snap-mandatory overflow-y-auto",children:[X,y]}),e[51]=P,e[52]=X,e[53]=y,e[54]=v):v=e[54];let L;return e[55]!==d||e[56]!==b||e[57]!==v||e[58]!==c?(L=(0,l.jsxs)("div",{className:"relative h-[100dvh] w-full overflow-hidden bg-black md:rounded-xl",children:[c,d,b,v]}),e[55]=d,e[56]=b,e[57]=v,e[58]=c,e[59]=L):L=e[59],L},Ce=fe;function de(e){return e.startsWith("/r")}function pe(e){const t=e.plyr;t&&typeof t.pause=="function"&&(t.pause(),t.currentTime=0,t.muted=!0)}function he(e){e.paused||(e.pause(),e.currentTime=0)}function be(e){const t=e.plyr;t&&typeof t.pause=="function"&&(t.pause(),t.currentTime=0,t.muted=!0)}function xe(e){e.paused||(e.pause(),e.currentTime=0)}function ye(){document.querySelectorAll(".plyr").forEach(be),document.querySelectorAll("video").forEach(xe),F()}function ve(){return ye}function _e(e){const t=e.plyr;t&&typeof t.pause=="function"&&(t.pause(),t.currentTime=0,t.muted=!0)}function we(e){e.paused||(e.pause(),e.currentTime=0)}function ge(e){return!e}export{Ce as default};

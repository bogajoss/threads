import{a as ce}from"./rolldown-runtime-BaZ8gS7u.js";import{T as he,s as be,u as ue}from"./framework-DIDnLsp9.js";import"./database-DlIwwAmc.js";import{Lt as ae,Xn as pe,hn as D,nn as je}from"./ui-libs-NviTY6uf.js";import{L as ge,c as ve,dt as re,f as ze,l as Ne,n as ke,s as ye,t as we}from"./index-B0vM2eEQ.js";import{n as _e}from"./post-BBmzLc_q.js";import"./linkify-DSSf-wBZ.js";import{c as Ce}from"./hooks-C5icFmhq.js";var Me=be(),oe=ce(he(),1),t=ce(ue(),1),Pe=de=>{const e=(0,Me.c)(99),{onPostInCommunity:G}=de,[H,le]=(0,oe.useState)(!1),[K,ne]=(0,oe.useState)(!1),{community:s,loading:me,isMember:n,userRole:xe,isJoining:a,communityPosts:T,loadingPosts:Q,isFetchingMorePosts:L,hasMorePosts:V,handleJoinToggle:W,loadCommunityPosts:Y,currentUser:Z,addToast:ee,navigate:l}=Ce(),J=xe==="admin",te=n&&(!s?.isPrivate||J);if(me){let i;return e[0]===Symbol.for("react.memo_cache_sentinel")?(i=(0,t.jsx)("div",{className:"flex min-h-screen items-center justify-center",children:(0,t.jsx)(D,{size:40,className:"animate-spin text-violet-500"})}),e[0]=i):i=e[0],i}if(!s){let i;return e[1]===Symbol.for("react.memo_cache_sentinel")?(i=(0,t.jsx)("div",{className:"flex min-h-[600px] items-center justify-center overflow-hidden rounded-none bg-white dark:bg-black md:rounded-xl",children:(0,t.jsx)(ge,{title:"Community doesn't exist",message:"Try searching for another. The community could not be found.",icon:ae})}),e[1]=i):i=e[1],i}let r;e[2]!==l?(r=()=>l(-1),e[2]=l,e[3]=r):r=e[3];let U;e[4]===Symbol.for("react.memo_cache_sentinel")?(U=(0,t.jsx)(pe,{size:22}),e[4]=U):U=e[4];let o;e[5]!==r?(o=(0,t.jsx)("button",{onClick:r,className:"rounded-full p-1 transition-colors hover:bg-zinc-100 dark:text-white dark:hover:bg-zinc-800",children:U}),e[5]=r,e[6]=o):o=e[6];let c;e[7]!==s.name?(c=(0,t.jsx)("h5",{className:"text-lg font-bold leading-none dark:text-white",children:s.name}),e[7]=s.name,e[8]=c):c=e[8];let d;e[9]!==s.membersCount?(d=(0,t.jsxs)("span",{className:"mt-0.5 text-xs text-zinc-500",children:[s.membersCount," Members"]}),e[9]=s.membersCount,e[10]=d):d=e[10];let m;e[11]!==c||e[12]!==d?(m=(0,t.jsxs)("div",{className:"flex flex-col",children:[c,d]}),e[11]=c,e[12]=d,e[13]=m):m=e[13];let x;e[14]!==o||e[15]!==m?(x=(0,t.jsx)("div",{className:"sticky top-0 z-20 border-b border-zinc-100 bg-white/90 px-4 py-3 backdrop-blur-md dark:border-zinc-800 dark:bg-black/90",children:(0,t.jsxs)("div",{className:"flex items-center gap-x-4",children:[o,m]})}),e[14]=o,e[15]=m,e[16]=x):x=e[16];let f;e[17]!==s.cover?(f=(0,t.jsx)("div",{className:"relative h-32 overflow-hidden bg-zinc-100 dark:bg-zinc-900 sm:h-52",children:s.cover?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("img",{src:s.cover,className:"h-full w-full object-cover",alt:""}),(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/40 to-transparent"})]}):(0,t.jsx)("div",{className:"h-full w-full bg-gradient-to-br from-violet-500/20 to-fuchsia-500/20"})}),e[17]=s.cover,e[18]=f):f=e[18];let h;e[19]!==s.avatar?(h=(0,t.jsx)("div",{className:"size-24 overflow-hidden rounded-3xl border-4 border-white bg-zinc-100 shadow-xl dark:border-black dark:bg-zinc-800 sm:size-32",children:(0,t.jsx)("img",{src:s.avatar,className:"size-full object-cover",alt:""})}),e[19]=s.avatar,e[20]=h):h=e[20];let b;e[21]!==J?(b=J&&(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{onClick:()=>le(!0),className:"flex size-10 items-center justify-center rounded-full border border-zinc-200 text-zinc-700 transition-all hover:bg-zinc-50 active:scale-95 dark:border-zinc-800 dark:text-zinc-300 dark:hover:bg-zinc-900",title:"Edit Community",children:(0,t.jsx)(ye,{size:20})}),(0,t.jsx)("button",{onClick:()=>ne(!0),className:"flex size-10 items-center justify-center rounded-full border border-zinc-200 text-zinc-700 transition-all hover:bg-zinc-50 active:scale-95 dark:border-zinc-800 dark:text-zinc-300 dark:hover:bg-zinc-900",title:"Settings",children:(0,t.jsx)(ze,{size:20})})]}),e[21]=J,e[22]=b):b=e[22];const se=n?"outline":"primary",ie=`flex h-10 items-center justify-center gap-2 rounded-full px-4 font-bold transition-all ${n?"border-zinc-200 hover:border-rose-100 hover:bg-rose-50 hover:text-rose-500 dark:border-zinc-800 dark:hover:bg-rose-900/20":"bg-zinc-950 text-white hover:scale-105 dark:bg-white dark:text-zinc-950"}`;let u;e[23]!==a||e[24]!==n?(u=a?(0,t.jsx)(D,{size:18,className:"animate-spin"}):n?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(Ne,{size:18}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"Joined"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ve,{size:18}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"Join"})]}),e[23]=a,e[24]=n,e[25]=u):u=e[25];let p;e[26]!==W||e[27]!==a||e[28]!==se||e[29]!==ie||e[30]!==u?(p=(0,t.jsx)(re,{variant:se,onClick:W,disabled:a,className:ie,children:u}),e[26]=W,e[27]=a,e[28]=se,e[29]=ie,e[30]=u,e[31]=p):p=e[31];let j;e[32]!==b||e[33]!==p?(j=(0,t.jsxs)("div",{className:"flex gap-2 pb-1",children:[b,p]}),e[32]=b,e[33]=p,e[34]=j):j=e[34];let g;e[35]!==j||e[36]!==h?(g=(0,t.jsxs)("div",{className:"relative z-10 -mt-12 mb-4 flex items-end justify-between sm:-mt-16",children:[h,j]}),e[35]=j,e[36]=h,e[37]=g):g=e[37];let v;e[38]!==s.name?(v=(0,t.jsx)("h1",{className:"text-2xl font-black leading-tight tracking-tight dark:text-white sm:text-3xl",children:s.name}),e[38]=s.name,e[39]=v):v=e[39];let z;e[40]!==s.handle?(z=(0,t.jsxs)("p",{className:"text-sm font-bold text-zinc-500 sm:text-base",children:["c/",s.handle]}),e[40]=s.handle,e[41]=z):z=e[41];let N;e[42]!==s.description?(N=s.description&&(0,t.jsx)("p",{className:"mt-4 max-w-2xl text-[15px] leading-relaxed dark:text-zinc-300 sm:text-base",children:s.description}),e[42]=s.description,e[43]=N):N=e[43];let k;e[44]!==s.membersCount?(k=(0,t.jsx)("span",{className:"text-base font-extrabold text-zinc-900 transition-colors dark:text-white",children:s.membersCount}),e[44]=s.membersCount,e[45]=k):k=e[45];let q;e[46]===Symbol.for("react.memo_cache_sentinel")?(q=(0,t.jsx)("span",{className:"font-medium text-zinc-500 dark:text-zinc-400",children:"Members"}),e[46]=q):q=e[46];let y;e[47]!==k?(y=(0,t.jsxs)("button",{className:"group flex cursor-pointer items-baseline gap-x-1.5",children:[k,q]}),e[47]=k,e[48]=y):y=e[48];let w;e[49]!==s.postsCount?(w=(0,t.jsx)("span",{className:"text-base font-extrabold text-zinc-900 transition-colors dark:text-white",children:s.postsCount}),e[49]=s.postsCount,e[50]=w):w=e[50];let A;e[51]===Symbol.for("react.memo_cache_sentinel")?(A=(0,t.jsx)("span",{className:"font-medium text-zinc-500 dark:text-zinc-400",children:"Posts"}),e[51]=A):A=e[51];let _;e[52]!==w?(_=(0,t.jsxs)("button",{className:"group flex cursor-pointer items-baseline gap-x-1.5",children:[w,A]}),e[52]=w,e[53]=_):_=e[53];let C;e[54]!==y||e[55]!==_?(C=(0,t.jsxs)("div",{className:"relative z-10 flex gap-4 pt-2 text-sm sm:gap-6",children:[y,_]}),e[54]=y,e[55]=_,e[56]=C):C=e[56];let M;e[57]!==v||e[58]!==z||e[59]!==N||e[60]!==C?(M=(0,t.jsxs)("div",{className:"space-y-1",children:[v,z,N,C]}),e[57]=v,e[58]=z,e[59]=N,e[60]=C,e[61]=M):M=e[61];let P;e[62]!==g||e[63]!==M?(P=(0,t.jsxs)("div",{className:"px-4 pb-6",children:[g,M]}),e[62]=g,e[63]=M,e[64]=P):P=e[64];let S;e[65]!==P||e[66]!==f?(S=(0,t.jsxs)("div",{className:"relative",children:[f,P]}),e[65]=P,e[66]=f,e[67]=S):S=e[67];let F;e[68]!==ee||e[69]!==s.name||e[70]!==T||e[71]!==Z||e[72]!==V||e[73]!==L||e[74]!==Y||e[75]!==Q||e[76]!==l?(F=(0,t.jsx)("div",{className:"border-t border-zinc-100 dark:border-zinc-800",children:Q?(0,t.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,t.jsx)(D,{className:"animate-spin text-violet-500",size:32})}):T.length>0?(0,t.jsxs)(t.Fragment,{children:[T.map(i=>(0,t.jsx)(_e,{currentUser:Z,showToast:ee,...i,onClick:()=>l(`/post/${i.id}`),onUserClick:fe=>l(`/u/${fe}`)},i.feed_id||i.id)),V&&(0,t.jsx)("div",{className:"flex justify-center p-6",children:(0,t.jsxs)(re,{variant:"secondary",className:"w-full max-w-xs",onClick:()=>Y(),disabled:L,children:[L&&(0,t.jsx)(D,{size:18,className:"mr-2 animate-spin"}),"Load more"]})})]}):(0,t.jsxs)("div",{className:"flex flex-col items-center gap-4 p-20 text-center text-zinc-500",children:[(0,t.jsx)("div",{className:"mb-2 rounded-full bg-zinc-50 p-6 dark:bg-zinc-900",children:(0,t.jsx)(ae,{size:40,className:"text-zinc-300"})}),(0,t.jsx)("h3",{className:"text-xl font-bold dark:text-white",children:"No posts here yet"}),(0,t.jsxs)("p",{className:"text-sm max-w-[250px]",children:["Be the first to share something in ",s.name,"!"]})]})}),e[68]=ee,e[69]=s.name,e[70]=T,e[71]=Z,e[72]=V,e[73]=L,e[74]=Y,e[75]=Q,e[76]=l,e[77]=F):F=e[77];let I;e[78]!==S||e[79]!==F||e[80]!==x?(I=(0,t.jsxs)("div",{className:"relative",children:[x,S,F]}),e[78]=S,e[79]=F,e[80]=x,e[81]=I):I=e[81];let $;e[82]!==te||e[83]!==s||e[84]!==G?($=te&&(0,t.jsx)("button",{onClick:()=>G(s),className:"group fixed bottom-20 right-5 z-50 flex size-12 cursor-pointer items-center justify-center rounded-full bg-zinc-950 text-white shadow-2xl transition-all hover:scale-110 active:scale-90 dark:bg-white dark:text-zinc-950 md:hidden",title:`Post to ${s.name}`,children:(0,t.jsx)(je,{size:28,className:"duration-300 transition-transform group-hover:rotate-90"})}),e[82]=te,e[83]=s,e[84]=G,e[85]=$):$=e[85];let B;e[86]===Symbol.for("react.memo_cache_sentinel")?(B=()=>le(!1),e[86]=B):B=e[86];let E;e[87]!==s||e[88]!==H?(E=(0,t.jsx)(ke,{isOpen:H,onClose:B,community:s,onUpdate:Se}),e[87]=s,e[88]=H,e[89]=E):E=e[89];let R;e[90]===Symbol.for("react.memo_cache_sentinel")?(R=()=>ne(!1),e[90]=R):R=e[90];let O;e[91]!==s||e[92]!==K?(O=(0,t.jsx)(we,{isOpen:K,onClose:R,community:s}),e[91]=s,e[92]=K,e[93]=O):O=e[93];let X;return e[94]!==I||e[95]!==$||e[96]!==E||e[97]!==O?(X=(0,t.jsxs)("div",{className:"min-h-screen overflow-hidden rounded-none border-zinc-100 bg-white pb-20 dark:border-zinc-800 dark:bg-black md:rounded-xl",children:[I,$,E,O]}),e[94]=I,e[95]=$,e[96]=E,e[97]=O,e[98]=X):X=e[98],X},Ue=Pe;function Se(){window.location.reload()}export{Ue as default};

import{n as u}from"./rolldown-runtime-2JzG8er9.js";import{s as N,u as g,w as v}from"./framework-pMVb9Z5_.js";import"./database-ApDMvJcm.js";import{Gt as p,Zt as z,ht as k,qt as _,xn as h,zt as y}from"./ui-libs-Dldhg1Ot.js";import{$ as w,H as S,Lt as q,Q as A,Z as C}from"./index-D1z-Zp4U.js";import{i as L}from"./hooks-DcgzPp2Z.js";var $=N(),E=u(v(),1),s=u(g(),1),M=()=>{const e=(0,$.c)(18),{currentUser:f,notifications:r,isLoading:b,isFetchingMore:l,hasMore:a,loadNotifications:m,handleNotificationClick:x}=L();if(b){let t;return e[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,s.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,s.jsx)(p,{size:32,className:"animate-spin text-violet-500"})}),e[0]=t):t=e[0],t}if(!f){let t;return e[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-[400px] gap-4 p-8 text-center",children:[(0,s.jsx)("div",{className:"bg-zinc-100 dark:bg-zinc-900 p-4 rounded-full",children:(0,s.jsx)(h,{size:40,className:"text-zinc-400"})}),(0,s.jsx)("h3",{className:"text-xl font-bold dark:text-white",children:"Sign in to see notifications"}),(0,s.jsx)("p",{className:"text-zinc-500 max-w-xs",children:"Join the conversation and keep track of who's engaging with your content."})]}),e[1]=t):t=e[1],t}const j=U;let o;e[2]===Symbol.for("react.memo_cache_sentinel")?(o=(0,s.jsx)("div",{className:"p-4 border-b border-zinc-100 dark:border-zinc-800 sticky top-0 bg-white/80 dark:bg-black/80 backdrop-blur-md z-10",children:(0,s.jsx)("h2",{className:"text-xl font-bold dark:text-white",children:"Notifications"})}),e[2]=o):o=e[2];let i;e[3]!==x||e[4]!==r?(i=r.length>0?r.map(t=>(0,s.jsxs)("div",{onClick:()=>x(t),className:`p-4 border-b border-zinc-100 dark:border-zinc-800 flex items-start gap-4 hover:bg-zinc-50 dark:hover:bg-zinc-900 transition-colors cursor-pointer ${t.is_read?"":"bg-violet-50/30 dark:bg-violet-500/5"}`,children:[(0,s.jsx)("div",{className:"shrink-0 pt-1",children:j(t.type)}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-1",children:[(0,s.jsxs)(C,{className:"size-8",children:[(0,s.jsx)(w,{src:t.avatar}),(0,s.jsx)(A,{children:t.user?.[0]?.toUpperCase()})]}),(0,s.jsxs)("div",{className:"flex-1 flex justify-between items-center",children:[(0,s.jsxs)("span",{className:"font-bold text-sm dark:text-white truncate",children:["@",t.user]}),(0,s.jsx)("span",{className:"text-zinc-500 text-xs whitespace-nowrap",children:q(t.created_at)})]})]}),(0,s.jsxs)("p",{className:"text-zinc-600 dark:text-zinc-400 text-[15px] ml-11",children:[t.type==="like"&&"liked your post",t.type==="follow"&&"followed you",t.type==="mention"&&"mentioned you in a post",t.type==="comment"&&"commented on your post",t.type==="repost"&&"reposted your post"]})]}),!t.is_read&&(0,s.jsx)("div",{className:"size-2 rounded-full bg-violet-500 mt-2 shrink-0 shadow-[0_0_8px_rgba(139,92,246,0.5)]"})]},t.id)):(0,s.jsx)("div",{className:"p-16 text-center text-zinc-500",children:(0,s.jsx)("p",{className:"font-medium",children:"No notifications yet."})}),e[3]=x,e[4]=r,e[5]=i):i=e[5];let n;e[6]!==a||e[7]!==l||e[8]!==m||e[9]!==r.length?(n=r.length>0&&a&&(0,s.jsx)("div",{className:"p-6 flex justify-center border-t border-zinc-100 dark:border-zinc-800",children:(0,s.jsxs)(S,{variant:"secondary",className:"w-full max-w-xs",onClick:()=>m(!0),disabled:l,children:[l?(0,s.jsx)(p,{size:18,className:"animate-spin mr-2"}):null,"Load more"]})}),e[6]=a,e[7]=l,e[8]=m,e[9]=r.length,e[10]=n):n=e[10];let c;e[11]!==a||e[12]!==r.length?(c=r.length>0&&!a&&(0,s.jsx)("div",{className:"p-8 text-center text-zinc-500 text-sm",children:"You've caught up with everything!"}),e[11]=a,e[12]=r.length,e[13]=c):c=e[13];let d;return e[14]!==i||e[15]!==n||e[16]!==c?(d=(0,s.jsxs)("div",{className:"border-y md:border border-zinc-100 dark:border-zinc-800 bg-white dark:bg-black rounded-none md:rounded-xl overflow-hidden min-h-screen pb-20 shadow-sm",children:[o,i,n,c]}),e[14]=i,e[15]=n,e[16]=c,e[17]=d):d=e[17],d},G=M;function U(e){switch(e){case"like":return(0,s.jsx)(z,{size:20,className:"text-rose-500 fill-rose-500"});case"follow":return(0,s.jsx)(k,{size:20,className:"text-blue-500"});case"mention":return(0,s.jsx)(h,{size:20,className:"text-emerald-500"});case"comment":return(0,s.jsx)(y,{size:20,className:"text-violet-500"});case"repost":return(0,s.jsx)(_,{size:20,className:"text-amber-500"});default:return(0,s.jsx)(h,{size:20,className:"text-zinc-500"})}}export{G as default};

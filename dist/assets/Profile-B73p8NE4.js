import{a as ne}from"./rolldown-runtime-BaZ8gS7u.js";import{o as ce,s as de}from"./animations-pEILWrFP.js";import{_ as xe,c as me}from"./framework-di2JoXyY.js";import"./database-CdmW3A7f.js";import{Mn as he,Pt as fe,Rn as pe,Xt as ue,Zt as je,_n as be,ir as ge,rr as ve,sr as ke}from"./ui-libs-yzUERV1o.js";import"./media-libs-D2H42K39.js";import{$ as ze,A as we,C as Ne,E as ye,H as _e,J as Ce,Q as Fe,T as Pe,U as Me,Wt as Se,_ as Te,d as Ie,dt as Le,et as le,f as Ue,h as $e,j as De,lt as We,m as Ee,nt as Ae,p as Oe,q as qe,rt as Be,tt as ae,ut as He,w as ie,wt as Re,xt as re,y as Ve}from"./index-u6tlbqzW.js";import"./VideoPlayer-C9XAx2Bv.js";import{n as Xe}from"./post-CABUV7iy.js";import{t as Ge}from"./text-processing-C3TjCoM3.js";import{t as Je}from"./linkify-FEcu8M-7.js";import{l as Qe}from"./hooks-BGEUoyYU.js";import{t as oe}from"./skeleton-profile-IFgTTvcu.js";var Ze=me(),Ke=ne(de(),1),s=ne(ce(),1),Ye=({profile:t,currentUser:e,isCurrentUser:O,onEditProfile:J,isCommunity:q,onShowFollowers:Q,onShowFollowing:B})=>{const{addToast:n}=Re(),m=xe(),[h,j]=(0,Ke.useState)(!1),{isFollowing:f,stats:b,loading:o,handleFollow:c}=Me(t||{},e?.id);if(!t)return(0,s.jsx)(oe,{});const g=async()=>{if(!e){n("Please sign in to message users","info");return}j(!0);try{m(`/m/${await Se(e.id,t.id)}`)}catch(r){console.error("Failed to start conversation:",r),n("Failed to open chat","error")}finally{j(!1)}};return(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsxs)("div",{className:"relative h-32 w-full bg-zinc-200 dark:bg-zinc-800 sm:h-48",children:[t.cover&&(0,s.jsx)("img",{src:t.cover,className:"h-full w-full object-cover transition-opacity duration-500",alt:"Cover"}),(0,s.jsx)("div",{className:"absolute -bottom-12 left-4 sm:-bottom-16 sm:left-6",children:(0,s.jsx)("div",{className:"relative rounded-full bg-white p-1 shadow-xl ring-4 ring-white dark:bg-black dark:ring-black",children:(0,s.jsxs)(We,{className:"size-24 sm:size-32",children:[(0,s.jsx)(Le,{src:t.avatar,alt:t.handle,className:"object-cover"}),(0,s.jsx)(He,{className:"text-4xl font-bold",children:t.handle?.[0]?.toUpperCase()})]})})})]}),(0,s.jsxs)("div",{className:"flex flex-col space-y-4 p-4 pt-16 sm:p-6 sm:pt-20",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsx)("div",{className:"min-w-0 flex-1 pr-4"}),(0,s.jsx)("div",{className:"flex shrink-0 gap-2",children:O?(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:()=>J?.(t),className:"flex size-10 items-center justify-center rounded-full border border-zinc-200 text-zinc-700 transition-all hover:bg-zinc-50 active:scale-95 dark:border-zinc-700 dark:text-zinc-300 dark:hover:bg-zinc-900",title:"Edit Profile",children:(0,s.jsx)(Ie,{size:20})}),(0,s.jsx)("button",{onClick:()=>m("/settings"),className:"rounded-full border border-zinc-200 p-2 text-zinc-700 transition-all hover:bg-zinc-50 active:scale-95 dark:border-zinc-700 dark:text-zinc-300 dark:hover:bg-zinc-900",title:"Settings",children:(0,s.jsx)(Te,{size:20})})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{onClick:g,disabled:h,className:"rounded-full border border-zinc-200 p-2 text-zinc-700 transition-colors hover:bg-zinc-50 disabled:opacity-50 dark:border-zinc-700 dark:text-zinc-300 dark:hover:bg-zinc-900",children:h?(0,s.jsx)("span",{className:"animate-pulse",children:"..."}):(0,s.jsx)(be,{size:20})}),(0,s.jsx)("button",{className:"rounded-full border border-zinc-200 p-2 text-zinc-700 transition-colors hover:bg-zinc-50 dark:border-zinc-700 dark:text-zinc-300 dark:hover:bg-zinc-900",children:(0,s.jsx)(ve,{size:20})}),(0,s.jsx)(re,{variant:f?"secondary":"primary",onClick:c,className:"flex min-w-0 items-center gap-2 px-4 text-sm sm:min-w-[100px]",disabled:o,children:o?(0,s.jsx)("span",{className:"mx-auto animate-pulse",children:"..."}):f?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(Oe,{size:18}),(0,s.jsx)("span",{className:"hidden sm:inline",children:"Following"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(Ue,{size:18}),(0,s.jsx)("span",{className:"hidden sm:inline",children:"Follow"})]})}),(0,s.jsxs)(Fe,{children:[(0,s.jsx)(Be,{asChild:!0,children:(0,s.jsx)("button",{className:"rounded-full p-2 text-zinc-700 transition-colors hover:bg-zinc-100 dark:text-zinc-300 dark:hover:bg-zinc-800",children:(0,s.jsx)(pe,{size:20})})}),(0,s.jsxs)(ze,{align:"end",className:"w-48",children:[(0,s.jsxs)(le,{children:[(0,s.jsxs)(ae,{className:"cursor-pointer gap-2",onClick:()=>{navigator.clipboard.writeText(window.location.href),n("Profile link copied!")},children:[(0,s.jsx)(ue,{size:16}),"Share Profile"]}),(0,s.jsxs)(ae,{className:"cursor-pointer gap-2",onClick:()=>n("User reported","info"),children:[(0,s.jsx)(he,{size:16}),"Report user"]})]}),(0,s.jsx)(Ae,{}),(0,s.jsx)(le,{children:(0,s.jsxs)(ae,{variant:"destructive",className:"cursor-pointer gap-2",onClick:()=>n("User blocked","info"),children:[(0,s.jsx)(ge,{size:16}),"Block user"]})})]})]})]})})]}),(0,s.jsxs)("div",{className:"space-y-0.5",children:[(0,s.jsxs)("div",{className:"mt-1 flex items-center gap-1.5",children:[(0,s.jsx)("h1",{className:"text-xl font-extrabold text-zinc-900 dark:text-zinc-100",children:t.name}),t.verified&&(0,s.jsx)(Ve,{size:20,className:"text-blue-500"})]}),!q&&(0,s.jsx)("div",{className:"flex items-center space-x-3",children:(0,s.jsxs)("span",{className:"-ml-1.5 rounded-md px-1.5 py-0.5 text-sm font-medium text-zinc-500 dark:text-zinc-400",children:["@",t.handle]})})]}),(0,s.jsx)("div",{className:"whitespace-pre-line text-sm leading-relaxed text-zinc-900 dark:text-zinc-100 sm:text-[15px]",children:(0,s.jsx)(Ge,{options:{...Je,render:({attributes:r,content:d})=>{const{href:l,...p}=r,v=!l.startsWith("/")&&(l.startsWith("http")||l.startsWith("www"));return l.startsWith("/u/")||l.startsWith("/tags/")||l.startsWith("/c/")||l.startsWith("/explore")?(0,s.jsx)("span",{...p,className:"cursor-pointer font-bold text-rose-500 hover:underline dark:text-rose-400",onClick:H=>{H.stopPropagation(),m(l)},children:d},d):(0,s.jsx)("a",{href:l,...p,target:v?"_blank":void 0,rel:v?"noopener noreferrer":void 0,children:d},d)}},children:t.bio})}),(t.website||t.location)&&(0,s.jsxs)("div",{className:"flex flex-wrap gap-x-5 gap-y-2 pt-1 text-sm",children:[t.location&&(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)($e,{size:14}),t.location]}),t.website&&(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)(Ee,{size:14}),(0,s.jsx)("a",{href:`https://${t.website}`,target:"_blank",rel:"noreferrer",className:"font-semibold text-black hover:underline dark:text-white",children:t.website})]})]}),(0,s.jsx)("div",{className:"relative z-10 flex gap-4 pt-2 text-sm sm:gap-6",children:q?(0,s.jsxs)("button",{className:"group flex cursor-pointer gap-x-1",children:[(0,s.jsx)("span",{className:"font-bold text-zinc-900 dark:text-white",children:t.members}),(0,s.jsx)("span",{className:"text-zinc-500 dark:text-zinc-400",children:"Members"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("button",{onClick:r=>{r.preventDefault(),r.stopPropagation(),B()},className:"group flex cursor-pointer gap-x-1",children:[(0,s.jsx)("span",{className:"font-bold text-zinc-900 dark:text-white",children:b.following}),(0,s.jsx)("span",{className:"text-zinc-500 dark:text-zinc-400",children:"Following"})]}),(0,s.jsxs)("button",{onClick:r=>{r.preventDefault(),r.stopPropagation(),Q()},className:"group flex cursor-pointer gap-x-1",children:[(0,s.jsx)("span",{className:"font-bold text-zinc-900 dark:text-white",children:b.followers}),(0,s.jsx)("span",{className:"text-zinc-500 dark:text-zinc-400",children:"Followers"})]})]})})]})]})},es=Ye,ss=t=>{const e=(0,Ze.c)(76),{onEditProfile:O}=t,{handle:J,profile:q,loading:Q,activeProfileTab:B,setActiveProfileTab:n,loadingPosts:m,isFetchingMorePosts:h,hasMorePosts:j,filteredPosts:f,isFollowModalOpen:b,setIsFollowModalOpen:o,followModalType:c,followListData:g,isListLoading:r,isFetchingMoreFollows:d,hasMoreFollows:l,openFollowModal:p,fetchNextFollows:v,handlePostClick:H,handleUserClick:Z,loadUserPosts:K,currentUser:u,navigate:k}=Qe();if(Q){let a;return e[0]===Symbol.for("react.memo_cache_sentinel")?(a=(0,s.jsx)(oe,{}),e[0]=a):a=e[0],a}if(!q){const a=`Try searching for another. The user @${J} could not be found.`;let x;return e[1]!==a?(x=(0,s.jsx)("div",{className:"flex min-h-[600px] items-center justify-center overflow-hidden rounded-none border-zinc-100 bg-white dark:bg-black md:rounded-xl",children:(0,s.jsx)(qe,{title:"Account doesn't exist",message:a,icon:fe})}),e[1]=a,e[2]=x):x=e[2],x}const i=q;let R;e[3]!==u||e[4]!==i.handle||e[5]!==f||e[6]!==H||e[7]!==Z||e[8]!==j||e[9]!==h||e[10]!==K||e[11]!==m?(R=a=>{const x=a===void 0?!1:a;return m?(0,s.jsx)("div",{className:"flex flex-col",children:[1,2,3].map(ts)}):f.length>0?(0,s.jsxs)(s.Fragment,{children:[f.map(te=>(0,s.jsx)(Xe,{currentUser:u,...te,onClick:()=>H(te.id),onUserClick:Z},te.id)),j&&(0,s.jsx)("div",{className:"flex justify-center p-6",children:(0,s.jsxs)(re,{variant:"secondary",className:"w-full max-w-xs",onClick:()=>K(),disabled:h,children:[h&&(0,s.jsx)("span",{className:"mr-2 animate-pulse",children:"..."}),"Load more posts"]})})]}):x?null:(0,s.jsxs)("div",{className:"flex animate-in fade-in flex-col items-center gap-4 p-20 text-center text-zinc-500 duration-500",children:[(0,s.jsx)("div",{className:"mb-2 rounded-full bg-zinc-50 p-6 ring-1 ring-zinc-100 dark:bg-zinc-900 dark:ring-zinc-800",children:(0,s.jsx)(je,{size:40,className:"text-zinc-300 dark:text-zinc-700"})}),(0,s.jsx)("h3",{className:"text-xl font-bold dark:text-white",children:"No posts yet"}),(0,s.jsxs)("p",{className:"max-w-[250px] text-sm text-zinc-500 dark:text-zinc-400",children:["When @",i.handle," shares posts, they will appear here."]})]})},e[3]=u,e[4]=i.handle,e[5]=f,e[6]=H,e[7]=Z,e[8]=j,e[9]=h,e[10]=K,e[11]=m,e[12]=R):R=e[12];const z=R;let w;e[13]!==k?(w=()=>k(-1),e[13]=k,e[14]=w):w=e[14];let V;e[15]===Symbol.for("react.memo_cache_sentinel")?(V=(0,s.jsx)(ke,{size:22}),e[15]=V):V=e[15];let N;e[16]!==w?(N=(0,s.jsx)("button",{onClick:w,className:"rounded-full p-1 transition-colors hover:bg-zinc-100 dark:text-white dark:hover:bg-zinc-800",children:V}),e[16]=w,e[17]=N):N=e[17];let y;e[18]!==i.name?(y=(0,s.jsx)("h5",{className:"text-lg font-bold leading-none dark:text-white",children:i.name}),e[18]=i.name,e[19]=y):y=e[19];const Y=i.follower_count||0;let _;e[20]!==Y?(_=(0,s.jsxs)("span",{className:"mt-0.5 text-xs text-zinc-500",children:[Y," Followers"]}),e[20]=Y,e[21]=_):_=e[21];let C;e[22]!==y||e[23]!==_?(C=(0,s.jsxs)("div",{className:"flex flex-col",children:[y,_]}),e[22]=y,e[23]=_,e[24]=C):C=e[24];let F;e[25]!==N||e[26]!==C?(F=(0,s.jsx)("div",{className:"sticky top-0 z-20 border-b border-zinc-100 bg-white/90 p-4 py-3 backdrop-blur-md dark:border-zinc-800 dark:bg-black/90 md:hidden",children:(0,s.jsxs)("div",{className:"flex items-center gap-x-4",children:[N,C]})}),e[25]=N,e[26]=C,e[27]=F):F=e[27];const ee=u?.handle===i.handle;let P,M;e[28]!==p?(P=()=>p("Followers"),M=()=>p("Following"),e[28]=p,e[29]=P,e[30]=M):(P=e[29],M=e[30]);let S;e[31]!==u||e[32]!==i||e[33]!==O||e[34]!==ee||e[35]!==P||e[36]!==M?(S=(0,s.jsx)(es,{profile:i,currentUser:u,isCurrentUser:ee,onEditProfile:O,onShowFollowers:P,onShowFollowing:M}),e[31]=u,e[32]=i,e[33]=O,e[34]=ee,e[35]=P,e[36]=M,e[37]=S):S=e[37];let X;e[38]===Symbol.for("react.memo_cache_sentinel")?(X=(0,s.jsx)("div",{className:"sticky top-[60px] z-10 border-b border-zinc-100 bg-white/90 backdrop-blur-md dark:border-zinc-800 dark:bg-black/90 md:top-0",children:(0,s.jsx)(Pe,{className:"hide-scrollbar h-auto w-full justify-start overflow-x-auto rounded-none bg-transparent p-0 px-2",children:["feed","media"].map(as)})}),e[38]=X):X=e[38];let T;e[39]!==z?(T=z(),e[39]=z,e[40]=T):T=e[40];let I;e[41]!==T?(I=(0,s.jsx)(ie,{value:"feed",className:"m-0 border-none",children:T}),e[41]=T,e[42]=I):I=e[42];let L;e[43]!==z?(L=z(),e[43]=z,e[44]=L):L=e[44];let U;e[45]!==L?(U=(0,s.jsx)(ie,{value:"media",className:"m-0 border-none",children:L}),e[45]=L,e[46]=U):U=e[46];let $;e[47]!==B||e[48]!==n||e[49]!==I||e[50]!==U?($=(0,s.jsxs)(Ne,{value:B,onValueChange:n,className:"w-full",children:[X,I,U]}),e[47]=B,e[48]=n,e[49]=I,e[50]=U,e[51]=$):$=e[51];let D;e[52]!==S||e[53]!==$||e[54]!==F?(D=(0,s.jsxs)("div",{className:"border-y border-zinc-100 dark:border-zinc-800 md:border-b-0",children:[F,S,$]}),e[52]=S,e[53]=$,e[54]=F,e[55]=D):D=e[55];let W;e[56]!==o?(W=()=>o(!1),e[56]=o,e[57]=W):W=e[57];const se=c==="Followers"?`People who follow @${i.handle}`:`People @${i.handle} follows`;let E;e[58]!==v||e[59]!==g||e[60]!==c||e[61]!==l||e[62]!==d||e[63]!==r||e[64]!==k||e[65]!==o?(E=(0,s.jsx)("div",{className:"flex max-h-[75vh] flex-col overflow-y-auto",children:(0,s.jsx)("div",{className:"min-h-[300px]",children:r?(0,s.jsx)("div",{className:"flex flex-col",children:[1,2,3,4,5].map(rs)}):g.length>0?(0,s.jsxs)("div",{className:"divide-y divide-zinc-100 dark:divide-zinc-800",children:[g.map(a=>(0,s.jsx)(_e,{profile:a,onUserClick:x=>{o(!1),k(`/u/${x}`)}},a.id)),l&&(0,s.jsx)("div",{className:"flex justify-center p-4",children:(0,s.jsxs)(re,{variant:"secondary",className:"w-full text-xs",onClick:()=>v(),disabled:d,children:[d?(0,s.jsx)("span",{className:"mr-2 animate-pulse",children:"..."}):null,"Load more"]})})]}):(0,s.jsx)("div",{className:"flex flex-col items-center justify-center py-20 text-zinc-500",children:(0,s.jsxs)("p",{className:"font-medium",children:["No ",c.toLowerCase()," yet."]})})})}),e[58]=v,e[59]=g,e[60]=c,e[61]=l,e[62]=d,e[63]=r,e[64]=k,e[65]=o,e[66]=E):E=e[66];let A;e[67]!==c||e[68]!==b||e[69]!==W||e[70]!==se||e[71]!==E?(A=(0,s.jsx)(Ce,{isOpen:b,onClose:W,title:c,description:se,className:"sm:max-w-md",children:E}),e[67]=c,e[68]=b,e[69]=W,e[70]=se,e[71]=E,e[72]=A):A=e[72];let G;return e[73]!==D||e[74]!==A?(G=(0,s.jsxs)("div",{className:"min-h-screen overflow-hidden rounded-none border-zinc-100 bg-white pb-20 dark:bg-black dark:border-zinc-800 md:rounded-xl",children:[D,A]}),e[73]=D,e[74]=A,e[75]=G):G=e[75],G},bs=ss;function ts(t){return(0,s.jsx)(De,{},t)}function as(t){return(0,s.jsx)(ye,{value:t,className:"flex-1 whitespace-nowrap rounded-none border-b-2 px-4 py-4 text-sm font-bold capitalize text-zinc-500 transition-all data-[state=active]:border-black data-[state=active]:text-black dark:data-[state=active]:border-white dark:data-[state=active]:text-white",children:t==="feed"?"Posts":t},t)}function rs(t){return(0,s.jsx)(we,{},t)}export{bs as default};

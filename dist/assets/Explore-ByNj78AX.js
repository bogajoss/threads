import{a as B}from"./rolldown-runtime-BaZ8gS7u.js";import{c as K,s as O}from"./animations-DZuN0xpW.js";import{c as R}from"./framework-YRQI4BOE.js";import"./database-Bh-Nv8Zy.js";import{Pn as V,Pt as X,Qn as W,an as Z}from"./ui-libs-Cxlst_z9.js";import"./media-libs-CqtNZWFg.js";import{J as H,Jt as Q,U as ee,V as te,W as J,Y,ot as A,rt as se,u as ie}from"./index-NOTJz5gA.js";import"./VideoPlayer-Blkwgzcs.js";import{n as ae}from"./post-YNZzg936.js";import"./text-processing-COMFTedg.js";import"./rich-text-MkvegxpO.js";import"./actionsheet-BucNEznV.js";var re=R(),ke=B(K(),1),t=B(O(),1),ne=()=>{const e=(0,re.c)(56),{currentUser:n,searchQuery:a,setSearchQuery:l,activeTab:s,setActiveTab:w,communitiesData:G,isCommunitiesLoading:I,isFetchingMoreCommunities:U,hasMoreCommunities:P,postsData:v,isPostsLoading:z,isFetchingMorePosts:S,hasMorePosts:L,filteredCommunities:j,usersData:g,isUsersLoading:N,isFetchingMoreUsers:M,hasMoreUsers:$,handleCommunityClick:T,loadCommunities:F,loadPosts:E,loadUsers:q,navigate:r}=ie();if((I||z||N)&&!G.length&&!v.length&&!g.length){let i;return e[0]!==s?(i=(0,t.jsx)("div",{className:"min-h-screen bg-background md:rounded-xl",children:s==="posts"?[1,2,3].map(le):[1,2,3,4,5,6].map(ce)}),e[0]=s,e[1]=i):i=e[1],i}let c;e[2]!==l?(c=()=>l(""),e[2]=l,e[3]=c):c=e[3];let d;e[4]!==a||e[5]!==l||e[6]!==c?(d=(0,t.jsx)(se,{value:a,onChange:l,onClear:c,placeholder:"Search communities or posts...",className:"flex-1"}),e[4]=a,e[5]=l,e[6]=c,e[7]=d):d=e[7];let o;e[8]!==n||e[9]!==r?(o=n&&(0,t.jsx)("button",{onClick:()=>r("/create-community"),className:"flex size-11 shrink-0 items-center justify-center rounded-xl bg-zinc-950 text-white shadow-sm transition-all hover:scale-105 active:scale-95 dark:bg-white dark:text-zinc-950",title:"Create Community",children:(0,t.jsx)(Z,{size:22,strokeWidth:3})}),e[8]=n,e[9]=r,e[10]=o):o=e[10];let m;e[11]!==d||e[12]!==o?(m=(0,t.jsxs)("div",{className:"flex gap-2 p-4",children:[d,o]}),e[11]=d,e[12]=o,e[13]=m):m=e[13];let k;e[14]===Symbol.for("react.memo_cache_sentinel")?(k=(0,t.jsx)(J,{value:"communities",className:"flex flex-1 h-full items-center justify-center rounded-none border-b-2 border-transparent font-bold text-zinc-500 transition-all data-[state=active]:border-violet-600 data-[state=active]:bg-transparent data-[state=active]:text-zinc-950 dark:data-[state=active]:text-white",title:"Communities",children:(0,t.jsx)(X,{size:22})}),e[14]=k):k=e[14];let _;e[15]===Symbol.for("react.memo_cache_sentinel")?(_=(0,t.jsx)(J,{value:"posts",className:"flex flex-1 h-full items-center justify-center rounded-none border-b-2 border-transparent font-bold text-zinc-500 transition-all data-[state=active]:border-violet-600 data-[state=active]:bg-transparent data-[state=active]:text-zinc-950 dark:data-[state=active]:text-white",title:"Posts",children:(0,t.jsx)(V,{size:22})}),e[15]=_):_=e[15];let C;e[16]===Symbol.for("react.memo_cache_sentinel")?(C=(0,t.jsxs)(ee,{className:"flex w-full h-12 gap-0 border-none bg-transparent p-0 px-4",children:[k,_,(0,t.jsx)(J,{value:"users",className:"flex flex-1 h-full items-center justify-center rounded-none border-b-2 border-transparent font-bold text-zinc-500 transition-all data-[state=active]:border-violet-600 data-[state=active]:bg-transparent data-[state=active]:text-zinc-950 dark:data-[state=active]:text-white",title:"Users",children:(0,t.jsx)(W,{size:22})})]}),e[16]=C):C=e[16];let x;e[17]!==s||e[18]!==w?(x=(0,t.jsx)("div",{className:"border-t border-zinc-50 px-1 dark:border-zinc-900/50",children:(0,t.jsx)(te,{value:s,onValueChange:w,className:"w-full",children:C})}),e[17]=s,e[18]=w,e[19]=x):x=e[19];let u;e[20]!==m||e[21]!==x?(u=(0,t.jsxs)("div",{className:"sticky top-0 z-10 border-b border-zinc-50 bg-white/90 backdrop-blur-md dark:bg-black/90 dark:border-zinc-900/50",children:[m,x]}),e[20]=m,e[21]=x,e[22]=u):u=e[22];let f;e[23]!==s||e[24]!==j||e[25]!==T||e[26]!==P||e[27]!==U||e[28]!==F?(f=s==="communities"&&(0,t.jsxs)("div",{className:"divide-y divide-zinc-50 dark:divide-zinc-900/50",children:[j.length>0?j.map(i=>(0,t.jsx)(A,{profile:i,onUserClick:T,isCommunity:!0},i.handle)):(0,t.jsx)("div",{className:"p-20 text-center text-zinc-500",children:(0,t.jsx)("p",{className:"font-bold",children:"No communities found"})}),P&&j.length>0&&(0,t.jsx)("div",{className:"flex justify-center border-t border-zinc-50 p-6 dark:border-zinc-900/50",children:(0,t.jsx)(Q,{variant:"secondary",className:"w-full",onClick:()=>F(),loading:U,children:"Load more"})})]}),e[23]=s,e[24]=j,e[25]=T,e[26]=P,e[27]=U,e[28]=F,e[29]=f):f=e[29];let h;e[30]!==s||e[31]!==n||e[32]!==L||e[33]!==S||e[34]!==z||e[35]!==E||e[36]!==r||e[37]!==v||e[38]!==a?(h=s==="posts"&&(0,t.jsx)("div",{className:"divide-y divide-zinc-50 dark:divide-zinc-900/50",children:v.length>0?(0,t.jsxs)(t.Fragment,{children:[v.map(i=>(0,t.jsx)(ae,{currentUser:n,...i,onClick:()=>r(`/p/${i.id}`),onUserClick:D=>r(`/u/${D}`)},i.feed_id||i.id)),L&&(0,t.jsx)("div",{className:"flex justify-center border-t border-zinc-50 p-6 dark:border-zinc-900/50",children:(0,t.jsx)(Q,{variant:"secondary",className:"w-full max-w-xs",onClick:()=>E(),loading:S,children:"Load more"})})]}):z?(0,t.jsx)("div",{className:"flex flex-col",children:[1,2,3].map(de)}):(0,t.jsxs)("div",{className:"flex flex-col items-center gap-3 p-20 text-center text-zinc-500",children:[(0,t.jsx)("div",{className:"rounded-full bg-zinc-50 p-4 dark:bg-zinc-900",children:(0,t.jsx)(V,{size:32,className:"text-zinc-300"})}),(0,t.jsx)("p",{className:"font-bold",children:a?`No posts found matching "${a}"`:"No posts found"})]})}),e[30]=s,e[31]=n,e[32]=L,e[33]=S,e[34]=z,e[35]=E,e[36]=r,e[37]=v,e[38]=a,e[39]=h):h=e[39];let p;e[40]!==s||e[41]!==$||e[42]!==M||e[43]!==N||e[44]!==q||e[45]!==r||e[46]!==a||e[47]!==g?(p=s==="users"&&(0,t.jsx)("div",{className:"divide-y divide-zinc-50 dark:divide-zinc-900/50",children:g.length>0?(0,t.jsxs)(t.Fragment,{children:[g.map(i=>(0,t.jsx)(A,{profile:i,onUserClick:D=>r(`/u/${D}`)},i.id)),$&&(0,t.jsx)("div",{className:"flex justify-center border-t border-zinc-50 p-6 dark:border-zinc-900/50",children:(0,t.jsx)(Q,{variant:"secondary",className:"w-full max-w-xs",onClick:()=>q(),loading:M,children:"Load more"})})]}):N?(0,t.jsx)("div",{className:"flex flex-col",children:[1,2,3,4,5].map(oe)}):(0,t.jsxs)("div",{className:"flex flex-col items-center gap-3 p-20 text-center text-zinc-500",children:[(0,t.jsx)("div",{className:"rounded-full bg-zinc-50 p-4 dark:bg-zinc-900",children:(0,t.jsx)(W,{size:32,className:"text-zinc-300"})}),(0,t.jsx)("p",{className:"font-bold",children:a?`No users found matching "${a}"`:"No users found"})]})}),e[40]=s,e[41]=$,e[42]=M,e[43]=N,e[44]=q,e[45]=r,e[46]=a,e[47]=g,e[48]=p):p=e[48];let b;e[49]!==h||e[50]!==p||e[51]!==f?(b=(0,t.jsxs)("div",{className:"min-h-screen",children:[f,h,p]}),e[49]=h,e[50]=p,e[51]=f,e[52]=b):b=e[52];let y;return e[53]!==b||e[54]!==u?(y=(0,t.jsxs)("div",{className:"min-h-screen bg-white pb-20 dark:bg-black md:rounded-xl",children:[u,b]}),e[53]=b,e[54]=u,e[55]=y):y=e[55],y},_e=ne;function le(e){return(0,t.jsx)(Y,{},e)}function ce(e){return(0,t.jsx)(H,{},e)}function de(e){return(0,t.jsx)(Y,{},e)}function oe(e){return(0,t.jsx)(H,{},e)}export{_e as default};

import{a as z}from"./rolldown-runtime-BaZ8gS7u.js";import{o as E,s as I}from"./animations-pEILWrFP.js";import{c as V}from"./framework-di2JoXyY.js";import{an as G,nn as W}from"./ui-libs-yzUERV1o.js";import{t as A}from"./media-libs-D2H42K39.js";import{_n as M}from"./index-soDPyNUO.js";var B=V(),a=z(I(),1),r=z(E(),1),F=f=>{const e=(0,B.c)(24),{url:m,duration:u,isMe:s}=f,b=(0,a.useRef)(null),P=(0,a.useRef)(null),[p,v]=(0,a.useState)(!1),[d,q]=(0,a.useState)(!1),[R,w]=(0,a.useState)(0),[D,$]=(0,a.useState)(u||0);let x,h;e[0]!==u||e[1]!==s||e[2]!==m?(x=()=>{if(!b.current)return;const t=A.create({container:b.current,waveColor:s?"rgba(255, 255, 255, 0.35)":"rgba(135, 116, 225, 0.25)",progressColor:s?"#ffffff":"#8774e1",cursorColor:"transparent",barWidth:2,barGap:3,barRadius:2,height:28,normalize:!0,url:m});return P.current=t,t.on("ready",()=>{q(!0),u||$(t.getDuration())}),t.on("play",()=>v(!0)),t.on("pause",()=>v(!1)),t.on("finish",()=>{v(!1),t.setTime(0),w(0)}),t.on("audioprocess",()=>w(t.getCurrentTime())),t.on("interaction",()=>w(t.getCurrentTime())),()=>t.destroy()},h=[m,s,u],e[0]=u,e[1]=s,e[2]=m,e[3]=x,e[4]=h):(x=e[3],h=e[4]),(0,a.useEffect)(x,h);let _;e[5]===Symbol.for("react.memo_cache_sentinel")?(_=t=>{t.stopPropagation(),P.current?.playPause()},e[5]=_):_=e[5];const k=_,T=H,j=!d,C=s?"bg-white/20 text-white":"bg-[#8774e1] text-white";let n;e[6]!==C?(n=M("size-10 flex shrink-0 items-center justify-center rounded-full transition-all active:scale-90",C),e[6]=C,e[7]=n):n=e[7];let o;e[8]!==p||e[9]!==d?(o=d?p?(0,r.jsx)(G,{size:20,fill:"currentColor"}):(0,r.jsx)(W,{size:20,fill:"currentColor",className:"ml-0.5"}):(0,r.jsx)("span",{className:"animate-pulse font-bold",children:"..."}),e[8]=p,e[9]=d,e[10]=o):o=e[10];let i;e[11]!==j||e[12]!==n||e[13]!==o?(i=(0,r.jsx)("button",{type:"button",onClick:k,disabled:j,className:n,children:o}),e[11]=j,e[12]=n,e[13]=o,e[14]=i):i=e[14];let g;e[15]===Symbol.for("react.memo_cache_sentinel")?(g=(0,r.jsx)("div",{className:"h-7 w-full overflow-hidden",children:(0,r.jsx)("div",{ref:b,className:"w-full cursor-pointer"})}),e[15]=g):g=e[15];const S=s?"text-white/80":"text-[#8774e1]";let l;e[16]!==S?(l=M("text-[11px] font-medium mt-0.5 select-none tabular-nums",S),e[16]=S,e[17]=l):l=e[17];const N=p||R>0?T(R):T(D);let c;e[18]!==l||e[19]!==N?(c=(0,r.jsxs)("div",{className:"flex-1 flex flex-col justify-center min-w-0",children:[g,(0,r.jsx)("div",{className:l,children:N})]}),e[18]=l,e[19]=N,e[20]=c):c=e[20];let y;return e[21]!==c||e[22]!==i?(y=(0,r.jsxs)("div",{className:"flex items-center gap-3 py-1 min-w-[220px] md:min-w-[280px]",children:[i,c]}),e[21]=c,e[22]=i,e[23]=y):y=e[23],y},X=F;function H(f){return`${Math.floor(f/60)}:${Math.floor(f%60).toString().padStart(2,"0")}`}export{X as t};

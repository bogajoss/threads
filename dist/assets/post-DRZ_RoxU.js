import{a as yt}from"./rolldown-runtime-BaZ8gS7u.js";import{c as G,d as Ut,l as Ot,n as Bt,v as kt,w as Vt}from"./framework-3lkjbTvb.js";import{r as Wt}from"./query-CZHA9T67.js";import{$n as Ht,$t as qt,At as de,Bn as Qt,Fn as Ge,Kn as Gt,Ln as we,Lt as Xe,Nn as je,Rn as Xt,Tn as Jt,Un as Kt,Vn as Zt,Vt as Je,Wn as Ce,Zt as Ke,_n as zt,an as _e,bn as Yt,cn as es,dn as ts,in as ss,ln as ls,mn as is,on as Ze,rn as Se,wn as as,zt as ns}from"./ui-libs-DgV3EAwD.js";import{n as rs}from"./media-libs-C98UjHPF.js";import{$t as Ye,Cn as os,Ct as cs,Dn as et,Dt as ds,Et as ms,F as fs,Fn as $e,Ft as us,H as ye,I as xs,Jt as Te,K as hs,Ln as ce,M as Nt,N as ps,Nn as gs,On as bs,Q as vs,Qt as tt,Rn as Pe,Sn as js,St as ys,Tn as wt,Tt as re,U as ks,Un as st,Vn as lt,Wt as Ct,Xt as it,Yt as at,Z as zs,Zt as nt,_n as Ns,_t,an as se,cn as ws,en as rt,fn as St,g as ot,gn as ct,in as le,j as Cs,kn as _s,ln as Ss,nn as dt,pn as $s,qt as q,rn as ie,sn as $t,tn as mt,un as Re,v as Ts,vn as Ps,wn as Fs,z as Rs,zn as ge}from"./index-BffymkWT.js";import{i as Ms,n as Me,r as Es}from"./VideoPlayer-lz7gTNmg.js";import{n as oe,t as Is}from"./actionsheet-0H7XQXdq.js";var Ls=G(),z=yt(Vt(),1),t=yt(Ot(),1),Ds=l=>{const e=(0,Ls.c)(37),{isComment:s,liked:r,reposted:i,handleLike:n,handleRepost:c,handleCommentClick:a,handleShareClick:o,isDetail:h}=l;if(h!==void 0&&h){let w;e[0]!==n||e[1]!==r?(w=(0,t.jsx)(K,{icon:je,label:"Like",type:"like",onClick:n,active:r}),e[0]=n,e[1]=r,e[2]=w):w=e[2];let C;e[3]!==c||e[4]!==s||e[5]!==i?(C=!s&&(0,t.jsx)(K,{icon:Se,label:"Repost",type:"repost",onClick:c,active:i}),e[3]=c,e[4]=s,e[5]=i,e[6]=C):C=e[6];let _;e[7]!==a?(_=(0,t.jsx)(K,{icon:Nt,label:"Comment",type:"comment",onClick:a}),e[7]=a,e[8]=_):_=e[8];let $;e[9]!==o||e[10]!==s?($=!s&&(0,t.jsx)(K,{icon:ye,label:"Share",type:"share",onClick:o}),e[9]=o,e[10]=s,e[11]=$):$=e[11];let f;return e[12]!==w||e[13]!==C||e[14]!==_||e[15]!==$?(f=(0,t.jsxs)("div",{className:"mt-5 flex w-full items-center justify-around py-2",children:[w,C,_,$]}),e[12]=w,e[13]=C,e[14]=_,e[15]=$,e[16]=f):f=e[16],f}const p=`flex items-center gap-x-1.5 ${s?"mt-2":"mt-3.5"}`,m=s?16:18;let u;e[17]!==n||e[18]!==r||e[19]!==m?(u=(0,t.jsx)(K,{icon:je,size:m,type:"like",onClick:n,active:r}),e[17]=n,e[18]=r,e[19]=m,e[20]=u):u=e[20];const b=s?16:18;let x;e[21]!==a||e[22]!==b?(x=(0,t.jsx)(K,{icon:zt,size:b,type:"comment",onClick:a}),e[21]=a,e[22]=b,e[23]=x):x=e[23];const v=s?16:18;let g;e[24]!==c||e[25]!==i||e[26]!==v?(g=(0,t.jsx)(K,{icon:Se,size:v,type:"repost",onClick:c,active:i}),e[24]=c,e[25]=i,e[26]=v,e[27]=g):g=e[27];let d;e[28]!==o||e[29]!==s?(d=!s&&o&&(0,t.jsx)(K,{icon:ye,type:"share",onClick:o}),e[28]=o,e[29]=s,e[30]=d):d=e[30];let y;return e[31]!==p||e[32]!==u||e[33]!==x||e[34]!==g||e[35]!==d?(y=(0,t.jsxs)("div",{className:p,children:[u,x,g,d]}),e[31]=p,e[32]=u,e[33]=x,e[34]=g,e[35]=d,e[36]=y):y=e[36],y},ft=Ds,As=G(),Us=l=>{const e=(0,As.c)(38),{views:s,likes:r,comments:i,isDetail:n,isComment:c,onRepliesClick:a}=l,o=n===void 0?!1:n,h=c===void 0?!1:c;if(o){const g=s||0;let d;e[0]!==g?(d=(0,t.jsx)("span",{className:"font-bold text-black dark:text-white",children:g}),e[0]=g,e[1]=d):d=e[1];let y;e[2]===Symbol.for("react.memo_cache_sentinel")?(y=(0,t.jsx)("span",{className:"opacity-70",children:"Views"}),e[2]=y):y=e[2];let w;e[3]!==d?(w=(0,t.jsxs)("div",{className:"flex items-center gap-x-1",children:[d," ",y]}),e[3]=d,e[4]=w):w=e[4];const C=r||0;let _;e[5]!==C?(_=(0,t.jsx)("span",{className:"font-bold text-black dark:text-white",children:C}),e[5]=C,e[6]=_):_=e[6];let $;e[7]===Symbol.for("react.memo_cache_sentinel")?($=(0,t.jsx)("span",{className:"opacity-70",children:"Likes"}),e[7]=$):$=e[7];let f;e[8]!==_?(f=(0,t.jsxs)("div",{className:"flex items-center gap-x-1",children:[_," ",$]}),e[8]=_,e[9]=f):f=e[9];const S=i||0;let M;e[10]!==S?(M=(0,t.jsx)("span",{className:"font-bold text-black dark:text-white",children:S}),e[10]=S,e[11]=M):M=e[11];let k;e[12]===Symbol.for("react.memo_cache_sentinel")?(k=(0,t.jsx)("span",{className:"opacity-70",children:"Comments"}),e[12]=k):k=e[12];let j;e[13]!==M?(j=(0,t.jsxs)("div",{className:"flex items-center gap-x-1",children:[M," ",k]}),e[13]=M,e[14]=j):j=e[14];let T;return e[15]!==f||e[16]!==j||e[17]!==w?(T=(0,t.jsxs)("div",{className:"mt-5 flex items-center gap-x-6 border-b border-zinc-100 pb-4 text-sm text-zinc-500 dark:border-zinc-800 dark:text-zinc-400",children:[w,f,j]}),e[15]=f,e[16]=j,e[17]=w,e[18]=T):T=e[18],T}if(i===0&&r===0&&(s===0||h))return null;const p=`mt-2 flex items-center gap-x-2 px-0.5 ${h?"text-[12px]":"text-[14px]"} font-medium text-zinc-500 dark:text-zinc-400`;let m;e[19]!==i||e[20]!==h||e[21]!==r||e[22]!==s?(m=s>0&&!h&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("span",{className:"hover:underline",children:[s," ",s===1?"view":"views"]}),(i>0||r>0)&&(0,t.jsx)("span",{className:"opacity-50",children:"·"})]}),e[19]=i,e[20]=h,e[21]=r,e[22]=s,e[23]=m):m=e[23];let u;e[24]!==i||e[25]!==a?(u=i>0&&(0,t.jsxs)("button",{className:"hover:underline",onClick:g=>{g.stopPropagation(),a&&a(g)},children:[i," ",i===1?"reply":"replies"]}),e[24]=i,e[25]=a,e[26]=u):u=e[26];let b;e[27]!==i||e[28]!==r?(b=i>0&&r>0&&(0,t.jsx)("span",{className:"opacity-50",children:"·"}),e[27]=i,e[28]=r,e[29]=b):b=e[29];let x;e[30]!==r?(x=r>0&&(0,t.jsxs)("button",{className:"hover:underline",children:[r," ",r===1?"like":"likes"]}),e[30]=r,e[31]=x):x=e[31];let v;return e[32]!==p||e[33]!==m||e[34]!==u||e[35]!==b||e[36]!==x?(v=(0,t.jsxs)("div",{className:p,children:[m,u,b,x]}),e[32]=p,e[33]=m,e[34]=u,e[35]=b,e[36]=x,e[37]=v):v=e[37],v},ut=Us,Os=G(),Bs=l=>{const e=(0,Os.c)(48),{user:s,timeAgo:r,community:i,onUserClick:n,actionsMenu:c,isComment:a,isDetail:o,showAvatar:h}=l,p=h===void 0?!1:h,m=kt();let u;e[0]!==n||e[1]!==s.handle?(u=I=>{I.stopPropagation(),n&&n(s.handle)},e[0]=n,e[1]=s.handle,e[2]=u):u=e[2];const b=u;let x;e[3]!==i||e[4]!==m?(x=I=>{I.stopPropagation(),i&&m(`/c/${i.handle}`)},e[3]=i,e[4]=m,e[5]=x):x=e[5];const v=x,g=`flex items-center justify-between ${o?"pb-5":"min-h-[40px] mb-2"}`;let d;e[6]!==b||e[7]!==a||e[8]!==o||e[9]!==p||e[10]!==s.avatar||e[11]!==s.handle?(d=p&&(0,t.jsx)("button",{className:"shrink-0",onClick:b,children:(0,t.jsxs)(ie,{className:`${o?"size-12":a?"size-8":"size-10"} border-0 shadow-sm`,children:[(0,t.jsx)(se,{src:s.avatar,alt:s.handle,className:"object-cover"}),(0,t.jsx)(le,{className:"text-xs",children:s.handle[0]?.toUpperCase()})]})}),e[6]=b,e[7]=a,e[8]=o,e[9]=p,e[10]=s.avatar,e[11]=s.handle,e[12]=d):d=e[12];const y=`flex shrink-0 items-center gap-1 font-bold text-zinc-900 hover:underline dark:text-white ${o?"text-base sm:text-lg":a?"text-[14px]":"text-[15px]"}`;let w;e[13]!==s.handle?(w=(0,t.jsx)("span",{className:"max-w-[150px] truncate sm:max-w-none",children:s.handle}),e[13]=s.handle,e[14]=w):w=e[14];let C;e[15]!==a||e[16]!==o||e[17]!==s.role?(C=s.role==="admin"&&(0,t.jsx)(Cs,{size:o?28:a?22:24}),e[15]=a,e[16]=o,e[17]=s.role,e[18]=C):C=e[18];let _;e[19]!==a||e[20]!==o||e[21]!==s.verified?(_=s.verified&&(0,t.jsx)(ks,{size:o?16:a?12:14}),e[19]=a,e[20]=o,e[21]=s.verified,e[22]=_):_=e[22];let $;e[23]!==b||e[24]!==y||e[25]!==w||e[26]!==C||e[27]!==_?($=(0,t.jsxs)("button",{className:y,onClick:b,children:[w,C,_]}),e[23]=b,e[24]=y,e[25]=w,e[26]=C,e[27]=_,e[28]=$):$=e[28];let f;e[29]!==i||e[30]!==v||e[31]!==o?(f=i&&(0,t.jsxs)("div",{className:"flex min-w-0 items-center gap-1 text-zinc-500",children:[(0,t.jsx)(ps,{size:o?14:12,className:"shrink-0 text-zinc-400"}),(0,t.jsxs)("button",{className:`flex items-center gap-1 font-bold text-zinc-900 hover:underline dark:text-zinc-100 ${o?"text-[14px] sm:text-[15px]":"text-[13px]"}`,onClick:v,children:[(0,t.jsxs)(ie,{className:"size-3.5 shrink-0 border border-zinc-200 bg-zinc-100 dark:border-zinc-700 dark:bg-zinc-800",children:[(0,t.jsx)(se,{src:i.avatar,alt:i.name,className:"object-cover"}),(0,t.jsx)(le,{className:"text-[6px] font-bold text-zinc-500",children:i.name?.[0]?.toUpperCase()})]}),(0,t.jsx)("span",{className:"max-w-[150px] truncate sm:max-w-none",children:i.name})]})]}),e[29]=i,e[30]=v,e[31]=o,e[32]=f):f=e[32];let S;e[33]!==$||e[34]!==f?(S=(0,t.jsx)("div",{className:"flex min-w-0 flex-1 flex-col",children:(0,t.jsx)("div",{className:"flex flex-wrap items-center gap-x-1.5 leading-none",children:(0,t.jsxs)("div",{className:"flex min-w-0 max-w-full items-center gap-1.5",children:[$,f]})})}),e[33]=$,e[34]=f,e[35]=S):S=e[35];let M;e[36]!==S||e[37]!==d?(M=(0,t.jsxs)("div",{className:"flex items-center gap-x-3.5 flex-1 min-w-0",children:[d,S]}),e[36]=S,e[37]=d,e[38]=M):M=e[38];const k=r||"Recent";let j;e[39]!==k?(j=(0,t.jsx)("span",{className:"whitespace-nowrap text-[12px] text-zinc-500 dark:text-zinc-400",children:k}),e[39]=k,e[40]=j):j=e[40];let T;e[41]!==c||e[42]!==j?(T=(0,t.jsxs)("div",{className:"-mt-1 flex items-center gap-2.5",children:[j,c]}),e[41]=c,e[42]=j,e[43]=T):T=e[43];let E;return e[44]!==M||e[45]!==T||e[46]!==g?(E=(0,t.jsxs)("div",{className:g,children:[M,T]}),e[44]=M,e[45]=T,e[46]=g,e[47]=E):E=e[47],E},xt=Bs,Vs=G(),Ws=l=>{const e=(0,Vs.c)(40),{content:s,isDetail:r,isEditing:i,editedContent:n,setEditedContent:c,onCancelEdit:a,onSaveEdit:o,isUpdating:h,contentClass:p}=l,[m,u]=(0,z.useState)(!1),b=typeof s=="string"&&st(s);if(i&&c){let S;e[0]!==c?(S=U=>c(U.target.value),e[0]=c,e[1]=S):S=e[1];const M=`min-h-[100px] w-full rounded-xl border-zinc-200 bg-zinc-50 focus:ring-violet-500 dark:border-zinc-800 dark:bg-zinc-900 ${st(n||"")?"font-bangla text-lg":"font-english"}`;let k;e[2]!==n||e[3]!==S||e[4]!==M?(k=(0,t.jsx)(hs,{value:n,onChange:S,className:M,autoFocus:!0}),e[2]=n,e[3]=S,e[4]=M,e[5]=k):k=e[5];let j;e[6]!==a?(j=(0,t.jsx)("button",{onClick:a,className:"px-4 py-1.5 text-sm font-bold text-zinc-500 transition-colors hover:text-zinc-700 dark:hover:text-zinc-300",children:"Cancel"}),e[6]=a,e[7]=j):j=e[7];let T;e[8]!==s||e[9]!==n||e[10]!==h?(T=h||!n?.trim()||n===s,e[8]=s,e[9]=n,e[10]=h,e[11]=T):T=e[11];const E=h?"Saving...":"Save";let I;e[12]!==o||e[13]!==T||e[14]!==E?(I=(0,t.jsx)("button",{onClick:o,disabled:T,className:"rounded-full bg-violet-600 px-4 py-1.5 text-sm font-bold text-white transition-all hover:bg-violet-700 disabled:opacity-50 active:scale-95",children:E}),e[12]=o,e[13]=T,e[14]=E,e[15]=I):I=e[15];let L;e[16]!==j||e[17]!==I?(L=(0,t.jsxs)("div",{className:"flex justify-end gap-2",children:[j,I]}),e[16]=j,e[17]=I,e[18]=L):L=e[18];let A;return e[19]!==k||e[20]!==L?(A=(0,t.jsxs)("div",{className:"mt-2 flex flex-col gap-2",onClick:Hs,children:[k,L]}),e[19]=k,e[20]=L,e[21]=A):A=e[21],A}const x=!r&&s.length>280;let v;e[22]!==s||e[23]!==m||e[24]!==x?(v=x&&!m?s.substring(0,280):s,e[22]=s,e[23]=m,e[24]=x,e[25]=v):v=e[25];const g=v,d=r?"text-lg leading-relaxed sm:text-xl sm:leading-8 mt-1":"text-[15px] leading-snug mt-0.5",y=b?"font-bangla text-[1.15em]":"font-english";let w;e[26]!==p||e[27]!==d||e[28]!==y?(w=ce("whitespace-pre-line break-words",d,y,p),e[26]=p,e[27]=d,e[28]=y,e[29]=w):w=e[29];let C;e[30]!==g?(C=(0,t.jsx)(Me,{content:g}),e[30]=g,e[31]=C):C=e[31];const _=x&&!m&&"...";let $;e[32]!==m||e[33]!==x?($=x&&(0,t.jsx)("button",{onClick:S=>{S.stopPropagation(),u(!m)},className:"ml-1 cursor-pointer font-bold text-rose-600 hover:underline dark:text-rose-400",children:m?"Show less":"See more"}),e[32]=m,e[33]=x,e[34]=$):$=e[34];let f;return e[35]!==w||e[36]!==C||e[37]!==_||e[38]!==$?(f=(0,t.jsxs)("div",{className:w,children:[C,_,$]}),e[35]=w,e[36]=C,e[37]=_,e[38]=$,e[39]=f):f=e[39],f},ht=Ws;function Hs(l){return l.stopPropagation()}var qs=G(),Qs=l=>{const e=(0,qs.c)(28),{media:s,isEditing:r,editedMedia:i,setEditedMedia:n,newFiles:c,setNewFiles:a}=l;let o;e[0]!==i?(o=i===void 0?[]:i,e[0]=i,e[1]=o):o=e[1];const h=o;let p;e[2]!==c?(p=c===void 0?[]:c,e[2]=c,e[3]=p):p=e[3];const m=p,u=(0,z.useRef)(null);if(r&&n&&a){let x;if(e[4]!==h||e[5]!==n){let C;e[7]!==n?(C=(_,$)=>(0,t.jsxs)("div",{className:"group relative aspect-square overflow-hidden rounded-xl border border-zinc-200 dark:border-zinc-800",children:[_.type==="video"?(0,t.jsx)("div",{className:"flex size-full items-center justify-center bg-zinc-100 dark:bg-zinc-900",children:(0,t.jsx)(Xt,{size:24,className:"text-zinc-400"})}):(0,t.jsx)("img",{src:_.url||_.src,className:"size-full object-cover",alt:""}),(0,t.jsx)("button",{onClick:f=>{f.stopPropagation(),n(S=>S.filter((M,k)=>k!==$))},className:"absolute right-1.5 top-1.5 flex size-7 items-center justify-center rounded-full bg-black/60 text-white transition-colors hover:bg-black",children:(0,t.jsx)(de,{size:16})})]},`old-${$}`),e[7]=n,e[8]=C):C=e[8],x=h.map(C),e[4]=h,e[5]=n,e[6]=x}else x=e[6];let v;if(e[9]!==m||e[10]!==a){let C;e[12]!==a?(C=(_,$)=>(0,t.jsxs)("div",{className:"group relative aspect-square overflow-hidden rounded-xl border-2 border-dashed border-violet-500 bg-violet-50/10",children:[_.type.startsWith("image/")?(0,t.jsx)("img",{src:URL.createObjectURL(_),className:"size-full object-cover",alt:""}):(0,t.jsx)("div",{className:"flex size-full items-center justify-center",children:(0,t.jsx)(as,{size:24,className:"animate-spin text-violet-500"})}),(0,t.jsx)("button",{onClick:f=>{f.stopPropagation(),a(S=>S.filter((M,k)=>k!==$))},className:"absolute right-1.5 top-1.5 flex size-7 items-center justify-center rounded-full bg-black/60 text-white transition-colors hover:bg-black",children:(0,t.jsx)(de,{size:16})}),(0,t.jsx)("div",{className:"absolute bottom-1 left-1 rounded bg-violet-600 px-1 text-[8px] font-bold text-white",children:"NEW"})]},`new-${$}`),e[12]=a,e[13]=C):C=e[13],v=m.map(C),e[9]=m,e[10]=a,e[11]=v}else v=e[11];let g;e[14]!==h.length||e[15]!==m.length?(g=h.length+m.length<4&&(0,t.jsxs)("button",{onClick:C=>{C.stopPropagation(),u.current?.click()},className:"relative flex aspect-square flex-col items-center justify-center gap-1 rounded-xl border-2 border-dashed border-zinc-200 text-zinc-400 transition-all hover:border-violet-500 hover:bg-violet-50/5 hover:text-violet-500 dark:border-zinc-800",children:[(0,t.jsx)(ss,{size:20}),(0,t.jsx)("span",{className:"text-[10px] font-bold",children:"Add Media"})]}),e[14]=h.length,e[15]=m.length,e[16]=g):g=e[16];let d;e[17]!==x||e[18]!==v||e[19]!==g?(d=(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2 sm:grid-cols-3",children:[x,v,g]}),e[17]=x,e[18]=v,e[19]=g,e[20]=d):d=e[20];let y;e[21]!==a?(y=(0,t.jsx)("input",{type:"file",ref:u,onChange:C=>{if(C.target.files){const _=Array.from(C.target.files);a($=>[...$,..._])}},multiple:!0,className:"hidden",accept:"image/*,video/*"}),e[21]=a,e[22]=y):y=e[22];let w;return e[23]!==d||e[24]!==y?(w=(0,t.jsxs)("div",{className:"mt-3 space-y-3",children:[d,y]}),e[23]=d,e[24]=y,e[25]=w):w=e[25],w}if(!s||s.length===0)return null;let b;return e[26]!==s?(b=(0,t.jsx)(gl,{items:s}),e[26]=s,e[27]=b):b=e[27],b},pt=Qs,Gs=G(),Xs=l=>{const e=(0,Gs.c)(48),{icon:s,count:r,label:i,onClick:n,active:c,activeColorClass:a,size:o,type:h}=l,p=o===void 0?18:o,m=h===void 0?"default":h;let u,b,x,v,g,d,y;if(e[0]!==c||e[1]!==a||e[2]!==r||e[3]!==i||e[4]!==n||e[5]!==m){const L={like:{hoverBg:"group-hover:bg-rose-500/10",hoverText:"group-hover:text-rose-500",activeText:"text-rose-500",activeFill:"fill-rose-500"},repost:{hoverBg:"group-hover:bg-emerald-500/10",hoverText:"group-hover:text-emerald-500",activeText:"text-emerald-500",activeFill:"fill-emerald-500"},comment:{hoverBg:"group-hover:bg-sky-500/10",hoverText:"group-hover:text-sky-500",activeText:"text-sky-500",activeFill:"fill-sky-500"},share:{hoverBg:"group-hover:bg-violet-500/10",hoverText:"group-hover:text-violet-500",activeText:"text-violet-500",activeFill:"fill-violet-500"},default:{hoverBg:"group-hover:bg-zinc-500/10",hoverText:"group-hover:text-zinc-500",activeText:"text-zinc-900 dark:text-white",activeFill:"fill-current"}};b=L[m]||L.default;const A=a||b.activeText;u=q.button,e[13]===Symbol.for("react.memo_cache_sentinel")?(v={scale:.85},e[13]=v):v=e[13],e[14]!==n?(g=U=>{U.stopPropagation(),n&&n(U)},e[14]=n,e[15]=g):g=e[15],d=`${i} ${r!==void 0?`(${r})`:""}`,y=ce("group -ml-2 flex items-center gap-x-0.5 rounded-xl px-2 py-1.5 text-[12px] font-bold transition-all sm:gap-x-1 sm:text-[13px]",c?A:"text-zinc-500",!c&&b.hoverText),x=ce("rounded-full p-2 transition-all duration-200",!c&&b.hoverBg),e[0]=c,e[1]=a,e[2]=r,e[3]=i,e[4]=n,e[5]=m,e[6]=u,e[7]=b,e[8]=x,e[9]=v,e[10]=g,e[11]=d,e[12]=y}else u=e[6],b=e[7],x=e[8],v=e[9],g=e[10],d=e[11],y=e[12];let w;e[16]!==c?(w=c?{scale:[1,1.4,1],rotate:[0,15,0]}:{scale:1},e[16]=c,e[17]=w):w=e[17];let C;e[18]===Symbol.for("react.memo_cache_sentinel")?(C={duration:.45,type:"spring",stiffness:300,damping:15},e[18]=C):C=e[18];const _=c?2.5:2,$=c&&b.activeFill;let f;e[19]!==$?(f=ce("transition-colors duration-200",$),e[19]=$,e[20]=f):f=e[20];let S;e[21]!==s||e[22]!==p||e[23]!==_||e[24]!==f?(S=(0,t.jsx)(s,{size:p,strokeWidth:_,className:f}),e[21]=s,e[22]=p,e[23]=_,e[24]=f,e[25]=S):S=e[25];let M;e[26]!==S||e[27]!==w?(M=(0,t.jsx)(q.div,{animate:w,transition:C,children:S}),e[26]=S,e[27]=w,e[28]=M):M=e[28];let k;e[29]!==M||e[30]!==x?(k=(0,t.jsx)("div",{className:x,children:M}),e[29]=M,e[30]=x,e[31]=k):k=e[31];let j;e[32]!==i?(j=i&&(0,t.jsx)("span",{className:"hidden xs:inline",children:i}),e[32]=i,e[33]=j):j=e[33];let T;e[34]!==c||e[35]!==r?(T=r!=null&&(0,t.jsx)(q.span,{initial:{opacity:0,y:5},animate:{opacity:1,y:0},exit:{opacity:0,y:-5},className:ce("transition-all",c?"font-black":"font-bold"),children:r||0},r),e[34]=c,e[35]=r,e[36]=T):T=e[36];let E;e[37]!==T?(E=(0,t.jsx)(Te,{mode:"wait",children:T}),e[37]=T,e[38]=E):E=e[38];let I;return e[39]!==u||e[40]!==k||e[41]!==j||e[42]!==E||e[43]!==v||e[44]!==g||e[45]!==d||e[46]!==y?(I=(0,t.jsxs)(u,{whileTap:v,onClick:g,"aria-label":d,className:y,children:[k,j,E]}),e[39]=u,e[40]=k,e[41]=j,e[42]=E,e[43]=v,e[44]=g,e[45]=d,e[46]=y,e[47]=I):I=e[47],I},K=Xs,Js=G(),Ks=l=>{const e=(0,Js.c)(18),{poll:s,onVote:r}=l,i=s.options.reduce(Zs,0),[n,c]=(0,z.useState)(null);let a;e[0]!==r||e[1]!==n?(a=x=>{n||(c(x),r&&r(x))},e[0]=r,e[1]=n,e[2]=a):a=e[2];const o=a;let h;if(e[3]!==o||e[4]!==s.options||e[5]!==i||e[6]!==n){let x;e[8]!==o||e[9]!==i||e[10]!==n?(x=(v,g)=>{const d=i>0?Math.round((v.votes+(n===v.id?1:0))/(i+(n?1:0))*100):0,y=n===v.id;return(0,t.jsxs)("div",{onClick:()=>o(v.id),className:`relative h-10 w-full overflow-hidden rounded-xl border cursor-pointer ${y?"border-violet-500 dark:border-violet-500":"border-zinc-200 dark:border-zinc-700"}`,children:[n&&(0,t.jsx)("div",{className:"absolute left-0 top-0 h-full bg-zinc-200 transition-all duration-500 dark:bg-zinc-800",style:{width:`${d}%`}}),(0,t.jsxs)("div",{className:"absolute inset-0 z-10 flex items-center justify-between px-4",children:[(0,t.jsxs)("span",{className:`text-sm font-medium ${y?"font-bold text-violet-600":"text-zinc-700 dark:text-zinc-200"}`,children:[v.text," ",y&&(0,t.jsx)(Ht,{size:14,className:"mb-0.5 inline ml-1"})]}),n&&(0,t.jsxs)("span",{className:"text-sm font-bold text-zinc-900 dark:text-white",children:[d,"%"]})]})]},v.id||g)},e[8]=o,e[9]=i,e[10]=n,e[11]=x):x=e[11],h=s.options.map(x),e[3]=o,e[4]=s.options,e[5]=i,e[6]=n,e[7]=h}else h=e[7];const p=i+(n?1:0),m=n?"6 days left":"Click to vote";let u;e[12]!==p||e[13]!==m?(u=(0,t.jsxs)("div",{className:"pl-1 text-xs text-zinc-500 dark:text-zinc-400",children:[p," votes •"," ",m]}),e[12]=p,e[13]=m,e[14]=u):u=e[14];let b;return e[15]!==h||e[16]!==u?(b=(0,t.jsxs)("div",{className:"mt-3 space-y-2",children:[h,u]}),e[15]=h,e[16]=u,e[17]=b):b=e[17],b},gt=Ks;function Zs(l,e){return l+e.votes}var Ys=G(),el=l=>{const e=(0,Ys.c)(25),{user:s,time:r,content:i}=l;let n;e[0]!==s.avatar||e[1]!==s.handle?(n=(0,t.jsx)(se,{src:s.avatar,alt:s.handle}),e[0]=s.avatar,e[1]=s.handle,e[2]=n):n=e[2];let c;e[3]!==s.handle[0]?(c=s.handle[0]?.toUpperCase(),e[3]=s.handle[0],e[4]=c):c=e[4];let a;e[5]!==c?(a=(0,t.jsx)(le,{children:c}),e[5]=c,e[6]=a):a=e[6];let o;e[7]!==n||e[8]!==a?(o=(0,t.jsxs)(ie,{className:"size-6",children:[n,a]}),e[7]=n,e[8]=a,e[9]=o):o=e[9];let h;e[10]!==s.handle?(h=(0,t.jsx)("span",{className:"text-sm font-semibold",children:s.handle}),e[10]=s.handle,e[11]=h):h=e[11];let p;e[12]!==o||e[13]!==h?(p=(0,t.jsxs)("div",{className:"flex items-center gap-x-2",children:[o,h]}),e[12]=o,e[13]=h,e[14]=p):p=e[14];let m;e[15]!==r?(m=(0,t.jsx)("span",{className:"text-xs text-zinc-500 sm:text-sm",children:r}),e[15]=r,e[16]=m):m=e[16];let u;e[17]!==p||e[18]!==m?(u=(0,t.jsxs)("div",{className:"mb-2 flex items-center justify-between gap-x-2",children:[p,m]}),e[17]=p,e[18]=m,e[19]=u):u=e[19];let b;e[20]!==i?(b=(0,t.jsx)(Me,{content:i,className:"text-sm text-zinc-800 dark:text-zinc-300"}),e[20]=i,e[21]=b):b=e[21];let x;return e[22]!==u||e[23]!==b?(x=(0,t.jsxs)("div",{className:"p-4",children:[u,b]}),e[22]=u,e[23]=b,e[24]=x):x=e[24],x},bt=el,tl=G(),sl=l=>{const e=(0,tl.c)(60),{currentUser:s,newComment:r,setNewComment:i,handleSubmitComment:n,loading:c,selectedFiles:a,setSelectedFiles:o,isUploading:h}=l;let p;e[0]!==a?(p=a===void 0?[]:a,e[0]=a,e[1]=p):p=e[1];const m=p,u=(0,z.useRef)(null);let b;e[2]!==o?(b=R=>{if(R.target.files){const D=Array.from(R.target.files);o&&o(B=>[...B,...D])}},e[2]=o,e[3]=b):b=e[3];const x=b;let v;e[4]!==o?(v=R=>{o&&o(D=>D.filter((B,Y)=>Y!==R))},e[4]=o,e[5]=v):v=e[5];const g=v;let d;e[6]!==m?(d=m.map(ll),e[6]=m,e[7]=d):d=e[7];const y=d;let w,C;e[8]!==y?(w=()=>()=>{y.forEach(il)},C=[y],e[8]=y,e[9]=w,e[10]=C):(w=e[9],C=e[10]),(0,z.useEffect)(w,C);let _;e[11]!==o?(_=R=>{const D=R.clipboardData.files;if(D&&D.length>0){const B=Array.from(D).filter(al);B.length>0&&(R.preventDefault(),o&&o(Y=>[...Y,...B]))}},e[11]=o,e[12]=_):_=e[12];const $=_;if(!s){let R;return e[13]===Symbol.for("react.memo_cache_sentinel")?(R=(0,t.jsx)("div",{className:"border-y border-zinc-100 bg-zinc-50/30 p-6 text-center dark:border-zinc-800 dark:bg-zinc-900/10",children:(0,t.jsx)("p",{className:"text-sm text-zinc-500",children:"Please login to join the conversation."})}),e[13]=R):R=e[13],R}let f;e[14]!==s.avatar||e[15]!==s.handle?(f=(0,t.jsx)(se,{src:s.avatar,alt:s.handle,className:"object-cover"}),e[14]=s.avatar,e[15]=s.handle,e[16]=f):f=e[16];let S;e[17]!==s.handle?.[0]?(S=s.handle?.[0]?.toUpperCase(),e[17]=s.handle?.[0],e[18]=S):S=e[18];let M;e[19]!==S?(M=(0,t.jsx)(le,{children:S}),e[19]=S,e[20]=M):M=e[20];let k;e[21]!==M||e[22]!==f?(k=(0,t.jsxs)(ie,{className:"size-9 border border-zinc-200 dark:border-zinc-700",children:[f,M]}),e[21]=M,e[22]=f,e[23]=k):k=e[23];let j;e[24]!==i?(j=R=>i(R.target.value),e[24]=i,e[25]=j):j=e[25];let T;e[26]!==$||e[27]!==r||e[28]!==j?(T=(0,t.jsx)("textarea",{id:"comment-input",className:"min-h-[60px] w-full resize-none bg-transparent text-base outline-none placeholder:text-zinc-500 dark:text-white",placeholder:"Post your reply...",value:r,onChange:j,onPaste:$}),e[26]=$,e[27]=r,e[28]=j,e[29]=T):T=e[29];let E;e[30]!==y||e[31]!==g||e[32]!==m?(E=m.length>0&&(0,t.jsx)("div",{className:"mt-2 mb-2 flex flex-wrap gap-2",children:m.map((R,D)=>(0,t.jsxs)("div",{className:"relative size-20 overflow-hidden rounded-xl border border-zinc-200 dark:border-zinc-800",children:[R.type.startsWith("image/")?(0,t.jsx)("img",{src:y[D],className:"size-full object-cover",alt:""}):(0,t.jsx)("div",{className:"flex size-full items-center justify-center bg-zinc-100 dark:bg-zinc-800",children:(0,t.jsx)(ls,{size:20,className:"text-zinc-500"})}),(0,t.jsx)("button",{onClick:()=>g(D),className:"absolute right-1 top-1 rounded-full bg-black/60 p-1 text-white transition-colors hover:bg-black",children:(0,t.jsx)(de,{size:12})})]},D))}),e[30]=y,e[31]=g,e[32]=m,e[33]=E):E=e[33];let I;e[34]===Symbol.for("react.memo_cache_sentinel")?(I=()=>u.current?.click(),e[34]=I):I=e[34];let L;e[35]===Symbol.for("react.memo_cache_sentinel")?(L=(0,t.jsx)("button",{type:"button",onClick:I,className:"rounded-full p-2 text-violet-600 transition-colors hover:bg-violet-50 dark:hover:bg-zinc-800",title:"Attach media",children:(0,t.jsx)(Rs,{size:20})}),e[35]=L):L=e[35];let A;e[36]!==x?(A=(0,t.jsxs)("div",{className:"flex gap-1 text-violet-600",children:[L,(0,t.jsx)("input",{type:"file",ref:u,onChange:x,multiple:!0,className:"hidden",accept:"image/*,video/*,application/pdf"})]}),e[36]=x,e[37]=A):A=e[37];const U=c||h?"primary":"animated";let V;e[38]!==h||e[39]!==c?(V=!(c||h)&&(0,t.jsx)(ye,{size:20}),e[38]=h,e[39]=c,e[40]=V):V=e[40];const Q=c||h;let W;e[41]!==r||e[42]!==m.length?(W=!r.trim()&&m.length===0,e[41]=r,e[42]=m.length,e[43]=W):W=e[43];let O;e[44]!==n||e[45]!==U||e[46]!==V||e[47]!==Q||e[48]!==W?(O=(0,t.jsx)(Ct,{variant:U,icon:V,className:"min-w-[70px] !w-auto",onClick:n,loading:Q,disabled:W,children:"Reply"}),e[44]=n,e[45]=U,e[46]=V,e[47]=Q,e[48]=W,e[49]=O):O=e[49];let J;e[50]!==A||e[51]!==O?(J=(0,t.jsxs)("div",{className:"mt-2 flex items-center justify-between border-t border-zinc-100 pt-3 dark:border-zinc-800",children:[A,O]}),e[50]=A,e[51]=O,e[52]=J):J=e[52];let N;e[53]!==T||e[54]!==E||e[55]!==J?(N=(0,t.jsxs)("div",{className:"flex-1",children:[T,E,J]}),e[53]=T,e[54]=E,e[55]=J,e[56]=N):N=e[56];let P;return e[57]!==k||e[58]!==N?(P=(0,t.jsx)("div",{className:"border-y border-zinc-100 bg-zinc-50/30 p-4 dark:border-zinc-800 dark:bg-zinc-900/10",children:(0,t.jsxs)("div",{className:"flex gap-3",children:[k,N]})}),e[57]=k,e[58]=N,e[59]=P):P=e[59],P},Tt=z.memo(sl);function ll(l){return URL.createObjectURL(l)}function il(l){return URL.revokeObjectURL(l)}function al(l){return l.type.startsWith("image/")}var nl=G(),rl=l=>{const e=(0,nl.c)(30),{url:s}=l;let r,i;e[0]!==s?(r=["link-preview",s],i=()=>$s(s),e[0]=s,e[1]=r,e[2]=i):(r=e[1],i=e[2]);const n=!!s;let c;e[3]!==r||e[4]!==i||e[5]!==n?(c={queryKey:r,queryFn:i,staleTime:864e5,enabled:n},e[3]=r,e[4]=i,e[5]=n,e[6]=c):c=e[6];const{data:a,isLoading:o,isError:h}=Wt(c);if(o){let w;return e[7]===Symbol.for("react.memo_cache_sentinel")?(w=(0,t.jsx)("div",{className:"mt-3 flex h-24 animate-pulse items-center justify-center overflow-hidden rounded-2xl border border-zinc-100 bg-zinc-50 dark:border-zinc-800 dark:bg-zinc-900/50",children:(0,t.jsx)(Ge,{className:"animate-spin text-zinc-300 dark:text-zinc-700",size:24})}),e[7]=w):w=e[7],w}if(h||!a||!a.title&&!a.image)return null;let p;e[8]!==a.image||e[9]!==a.title?(p=a.image&&(0,t.jsx)("div",{className:"aspect-[1.91/1] w-full overflow-hidden border-b border-zinc-100 bg-zinc-100 dark:border-zinc-800 dark:bg-zinc-900",children:(0,t.jsx)("img",{src:a.image,alt:a.title??void 0,className:"h-full w-full object-cover transition-transform duration-500 group-hover:scale-[1.02]",onError:cl})}),e[8]=a.image,e[9]=a.title,e[10]=p):p=e[10];let m;e[11]===Symbol.for("react.memo_cache_sentinel")?(m=(0,t.jsx)(Ge,{size:12}),e[11]=m):m=e[11];let u;e[12]!==a.siteName?(u=(0,t.jsxs)("div",{className:"flex items-center gap-1.5 text-xs font-bold uppercase tracking-wider text-zinc-600",children:[m,(0,t.jsx)("span",{children:a.siteName})]}),e[12]=a.siteName,e[13]=u):u=e[13];let b;e[14]!==a.title?(b=(0,t.jsx)("div",{className:"line-clamp-2 text-[15px] font-bold leading-snug transition-colors group-hover:text-violet-700 dark:text-white",children:a.title}),e[14]=a.title,e[15]=b):b=e[15];let x;e[16]!==a.description?(x=a.description&&(0,t.jsx)("p",{className:"line-clamp-2 text-xs leading-relaxed text-zinc-600 dark:text-zinc-400",children:a.description}),e[16]=a.description,e[17]=x):x=e[17];let v;e[18]===Symbol.for("react.memo_cache_sentinel")?(v=(0,t.jsx)(Kt,{size:10}),e[18]=v):v=e[18];let g;e[19]!==s?(g=(0,t.jsxs)("div",{className:"flex items-center gap-1 pt-1 text-[11px] font-medium text-zinc-500",children:[v,(0,t.jsx)("span",{className:"truncate",children:s})]}),e[19]=s,e[20]=g):g=e[20];let d;e[21]!==g||e[22]!==u||e[23]!==b||e[24]!==x?(d=(0,t.jsxs)("div",{className:"space-y-1 p-3.5",children:[u,b,x,g]}),e[21]=g,e[22]=u,e[23]=b,e[24]=x,e[25]=d):d=e[25];let y;return e[26]!==d||e[27]!==p||e[28]!==s?(y=(0,t.jsxs)("a",{href:s,target:"_blank",rel:"noopener noreferrer",className:"group mt-3 flex flex-col overflow-hidden rounded-2xl border border-zinc-100 bg-white shadow-sm transition-all hover:bg-zinc-50 dark:border-zinc-800 dark:bg-zinc-950 dark:hover:bg-zinc-900",onClick:ol,children:[p,d]}),e[26]=d,e[27]=p,e[28]=s,e[29]=y):y=e[29],y},vt=rl;function ol(l){return l.stopPropagation()}function cl(l){return l.target.style.display="none"}var dl=G(),ml=l=>{const e=(0,dl.c)(15),{file:s}=l;let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r=(0,t.jsx)("div",{className:"flex size-10 items-center justify-center rounded-xl bg-violet-100 text-violet-600 dark:bg-violet-900/30",children:(0,t.jsx)(Qt,{size:20})}),e[0]=r):r=e[0];let i;e[1]!==s.name?(i=(0,t.jsx)("div",{className:"truncate text-sm font-bold dark:text-white",children:s.name}),e[1]=s.name,e[2]=i):i=e[2];let n;e[3]!==s.size?(n=s.size!==void 0&&(0,t.jsxs)("div",{className:"text-xs uppercase text-zinc-500",children:[(s.size/1024/1024).toFixed(2)," MB"]}),e[3]=s.size,e[4]=n):n=e[4];let c;e[5]!==i||e[6]!==n?(c=(0,t.jsxs)("div",{className:"min-w-0 flex-1",children:[i,n]}),e[5]=i,e[6]=n,e[7]=c):c=e[7];let a;e[8]===Symbol.for("react.memo_cache_sentinel")?(a=(0,t.jsx)(Gt,{size:18}),e[8]=a):a=e[8];let o;e[9]!==s.name||e[10]!==s.url?(o=(0,t.jsx)("a",{href:s.url,download:s.name,className:"p-2 text-zinc-400 transition-colors hover:text-violet-600",onClick:ul,children:a}),e[9]=s.name,e[10]=s.url,e[11]=o):o=e[11];let h;return e[12]!==c||e[13]!==o?(h=(0,t.jsxs)("div",{className:"group mt-3 flex items-center gap-3 rounded-2xl border border-zinc-100 bg-zinc-50/50 p-3 transition-colors hover:border-violet-500/30 dark:border-zinc-800 dark:bg-zinc-900/10",children:[r,c,o]}),e[12]=c,e[13]=o,e[14]=h):h=e[14],h},fl=ml;function ul(l){return l.stopPropagation()}var Ee=G(),xl=l=>{const e=(0,Ee.c)(18),{item:s,onClick:r}=l,[i,n]=(0,z.useState)(!1);let c,a,o;e[0]===Symbol.for("react.memo_cache_sentinel")?(c={scale:1.02},a={scale:.98},o={type:"spring",stiffness:400,damping:25},e[0]=c,e[1]=a,e[2]=o):(c=e[0],a=e[1],o=e[2]);let h;e[3]!==i?(h=!i&&(0,t.jsx)("div",{className:"absolute inset-0 animate-pulse bg-zinc-200 dark:bg-zinc-800"}),e[3]=i,e[4]=h):h=e[4];const p=s.url||s.src;let m;e[5]===Symbol.for("react.memo_cache_sentinel")?(m={opacity:0,scale:1.1,filter:"blur(10px)"},e[5]=m):m=e[5];let u;e[6]!==i?(u=i?{opacity:1,scale:1,filter:"blur(0px)"}:{},e[6]=i,e[7]=u):u=e[7];let b;e[8]===Symbol.for("react.memo_cache_sentinel")?(b={duration:.5,ease:"easeOut"},e[8]=b):b=e[8];let x;e[9]===Symbol.for("react.memo_cache_sentinel")?(x=()=>n(!0),e[9]=x):x=e[9];let v;e[10]!==p||e[11]!==u?(v=(0,t.jsx)(q.img,{src:p,initial:m,animate:u,transition:b,className:"size-full object-cover transition-transform duration-500 group-hover:scale-105",alt:"",loading:"lazy",onLoad:x}),e[10]=p,e[11]=u,e[12]=v):v=e[12];let g;e[13]===Symbol.for("react.memo_cache_sentinel")?(g=(0,t.jsx)("div",{className:"absolute inset-0 bg-black/0 transition-colors group-hover:bg-black/10"}),e[13]=g):g=e[13];let d;return e[14]!==r||e[15]!==v||e[16]!==h?(d=(0,t.jsxs)(q.div,{whileHover:c,whileTap:a,transition:o,className:"group relative size-full overflow-hidden",onClick:r,children:[h,v,g]}),e[14]=r,e[15]=v,e[16]=h,e[17]=d):d=e[17],d},hl=l=>{const e=(0,Ee.c)(21),{item:s,onClick:r}=l,[i,n]=(0,z.useState)(!1);let c,a,o;e[0]===Symbol.for("react.memo_cache_sentinel")?(c={scale:1.02},a={scale:.98},o={type:"spring",stiffness:400,damping:25},e[0]=c,e[1]=a,e[2]=o):(c=e[0],a=e[1],o=e[2]);let h;e[3]!==i?(h=!i&&(0,t.jsx)("div",{className:"absolute inset-0 animate-pulse bg-zinc-200 dark:bg-zinc-800"}),e[3]=i,e[4]=h):h=e[4];let p;e[5]!==s.poster||e[6]!==i?(p=s.poster&&(0,t.jsx)(q.img,{src:s.poster,initial:{opacity:0,scale:1.1,filter:"blur(10px)"},animate:i?{opacity:1,scale:1,filter:"blur(0px)"}:{},transition:{duration:.5,ease:"easeOut"},className:"size-full object-cover transition-transform duration-500 group-hover:scale-105",alt:"",loading:"lazy",onLoad:()=>n(!0)}),e[5]=s.poster,e[6]=i,e[7]=p):p=e[7];let m;e[8]!==s.poster?(m=!s.poster&&(0,t.jsx)("div",{className:"flex size-full items-center justify-center bg-zinc-100 dark:bg-zinc-900",onMouseEnter:()=>n(!0),children:(0,t.jsx)("div",{className:"size-full bg-zinc-800/20"})}),e[8]=s.poster,e[9]=m):m=e[9];let u;e[10]===Symbol.for("react.memo_cache_sentinel")?(u=(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 via-transparent to-transparent opacity-80"}),e[10]=u):u=e[10];let b;e[11]===Symbol.for("react.memo_cache_sentinel")?(b=(0,t.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,t.jsx)("div",{className:"flex size-14 items-center justify-center rounded-full bg-white/15 backdrop-blur-md ring-1 ring-white/30 transition-all group-hover:bg-white/25 group-hover:scale-110 group-active:scale-95 shadow-2xl",children:(0,t.jsx)(_e,{className:"ml-1 size-7 text-white fill-white drop-shadow-xl",strokeWidth:0})})}),e[11]=b):b=e[11];let x;e[12]===Symbol.for("react.memo_cache_sentinel")?(x=(0,t.jsx)(_e,{className:"size-2.5 fill-white",strokeWidth:0}),e[12]=x):x=e[12];const v=s.duration||"0:00";let g;e[13]!==v?(g=(0,t.jsx)("div",{className:"absolute bottom-3 left-3 flex items-center gap-2",children:(0,t.jsxs)("div",{className:"flex items-center gap-1.5 rounded-lg bg-black/40 px-2 py-1 text-[11px] font-bold text-white backdrop-blur-md border border-white/10 shadow-lg",children:[x,(0,t.jsx)("span",{className:"tabular-nums tracking-wider",children:v})]})}),e[13]=v,e[14]=g):g=e[14];let d;return e[15]!==r||e[16]!==g||e[17]!==h||e[18]!==p||e[19]!==m?(d=(0,t.jsxs)(q.div,{whileHover:c,whileTap:a,transition:o,className:"group relative size-full overflow-hidden",onClick:r,children:[h,p,m,u,b,g]}),e[15]=r,e[16]=g,e[17]=h,e[18]=p,e[19]=m,e[20]=d):d=e[20],d},pl=l=>{const e=(0,Ee.c)(3),{items:s}=l,r=s===void 0?[]:s,{openLightbox:i}=ws();if(!r||Array.isArray(r)&&r.length===0)return null;const n=Array.isArray(r)?r:[r],c=n.filter(bl),a=n.filter(vl),o=c.some(jl),h=x=>{i(c,x)},p="mt-2 space-y-2",m=c.length>0&&(0,t.jsx)("div",{className:`grid gap-2 overflow-hidden rounded-2xl border border-zinc-100 dark:border-zinc-800 ${c.length===1?"grid-cols-1":c.length===2?o?"aspect-[8/9] grid-cols-1 grid-rows-2":"aspect-[16/9] grid-cols-2":(c.length===3,"aspect-[16/9] grid-cols-2 grid-rows-2")}`,children:c.map((x,v)=>(0,t.jsx)("div",{className:`relative cursor-pointer overflow-hidden bg-zinc-100 dark:bg-zinc-900 group ${c.length===3&&v===0?"row-span-2":""}`,children:x.type==="video"?(0,t.jsx)(hl,{item:x,onClick:g=>{g.stopPropagation(),h(v)}}):(0,t.jsx)(xl,{item:x,onClick:g=>{g.stopPropagation(),h(v)}})},v))}),u=a.map(yl);let b;return e[0]!==m||e[1]!==u?(b=(0,t.jsxs)("div",{className:p,children:[m,u]}),e[0]=m,e[1]=u,e[2]=b):b=e[2],b},gl=pl;function bl(l){return l.type==="image"||l.type==="video"}function vl(l){return l.type==="file"}function jl(l){return l.type==="video"}function yl(l,e){return(0,t.jsx)(fl,{file:l},e)}var kl=({isOpen:l,onClose:e,url:s,title:r="Share",overlayClassName:i})=>{const[n,c]=(0,z.useState)(!1),[a,o]=(0,z.useState)(""),[h,p]=(0,z.useState)([]),[m,u]=(0,z.useState)(!1),[b,x]=(0,z.useState)(null),{addToast:v}=Re(),{currentUser:g}=St(),d=(0,z.useCallback)(async()=>{if(g){u(!0);try{p((await ct(g.id)).map(f=>f.user).filter(f=>f!==null).slice(0,5))}catch(f){console.error("Failed to fetch conversations:",f)}finally{u(!1)}}},[g]);(0,z.useEffect)(()=>{l&&g?d():(o(""),p([]))},[l,g,d]);const y=(0,z.useCallback)(async()=>{if(g){u(!0);try{p((await ct(g.id)).map(f=>f.user).filter(f=>f!==null&&(f.name?.toLowerCase().includes(a.toLowerCase())||f.handle.toLowerCase().includes(a.toLowerCase()))))}catch(f){console.error("Search failed:",f)}finally{u(!1)}}},[a,g]);(0,z.useEffect)(()=>{const f=setTimeout(()=>{a.trim()&&l?y():!a.trim()&&l&&d()},300);return()=>clearTimeout(f)},[a,l,y,d]);const w=async f=>{f&&f.stopPropagation();try{await Pe(s),c(!0),v("Link copied to clipboard!","success"),setTimeout(()=>c(!1),2e3)}catch(S){console.error("Failed to copy:",S),v("Failed to copy link","error")}},C=async f=>{if(g){x(f.id);try{await Ps(await Ns(g.id,f.id),g.id,s,"text"),v(`Sent to ${f.name||f.handle}!`,"success")}catch(S){console.error("Failed to send message:",S),v("Failed to send message","error")}finally{x(null)}}},_=[{name:"X",icon:ns,color:"bg-black text-white",href:`https://twitter.com/intent/tweet?url=${encodeURIComponent(s)}`},{name:"Facebook",icon:Zt,color:"bg-[#1877F2] text-white",href:`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(s)}`},{name:"LinkedIn",icon:Jt,color:"bg-[#0A66C2] text-white",href:`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(s)}`},{name:"WhatsApp",icon:is,color:"bg-[#25D366] text-white",href:`https://wa.me/?text=${encodeURIComponent(s)}`},{name:"Email",icon:Yt,color:"bg-zinc-600 text-white",href:`mailto:?body=${encodeURIComponent(s)}`}],$=async()=>{if(navigator.share)try{await navigator.share({title:r,url:s})}catch(f){f.name!=="AbortError"&&console.error("Native share failed:",f)}else w()};return(0,t.jsx)(_t,{isOpen:l,onClose:e,className:"max-w-[360px] overflow-hidden rounded-[32px] border border-black/10 bg-white/75 p-0 shadow-2xl backdrop-blur-xl dark:border-white/10 dark:bg-zinc-900/75 sm:max-w-[380px]",overlayClassName:i,children:(0,t.jsxs)("div",{className:"flex h-full flex-col",children:[(0,t.jsx)("div",{className:"flex items-center justify-center pt-6 pb-2",children:(0,t.jsx)("h2",{className:"text-[17px] font-semibold text-zinc-900 dark:text-zinc-50",children:r})}),(0,t.jsx)("div",{className:"px-5 py-3",children:(0,t.jsxs)("div",{className:"group relative",children:[(0,t.jsx)(qt,{className:"absolute left-3.5 top-1/2 size-4 -translate-y-1/2 text-zinc-400 transition-colors group-focus-within:text-violet-500"}),(0,t.jsx)("input",{type:"text",placeholder:"Search people...",value:a,onChange:f=>o(f.target.value),className:"w-full rounded-2xl border border-black/5 bg-black/5 py-3 pl-11 pr-4 text-[15px] outline-none transition-all focus:bg-white/50 focus:ring-4 focus:ring-violet-500/10 dark:border-white/5 dark:bg-white/5 dark:focus:bg-black/50"})]})}),(0,t.jsx)("div",{className:"no-scrollbar flex min-h-[110px] items-center gap-4 overflow-x-auto px-5 py-4",children:m?(0,t.jsx)("div",{className:"flex flex-1 justify-center",children:(0,t.jsx)("span",{className:"animate-pulse text-[13px] font-medium text-zinc-400",children:"Loading..."})}):h.length>0?h.map(f=>(0,t.jsxs)("button",{onClick:()=>C(f),disabled:b!==null,className:"group flex shrink-0 flex-col items-center gap-2 transition-transform active:scale-95 disabled:opacity-50",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"size-16 overflow-hidden rounded-full border-2 border-white/50 shadow-sm dark:border-zinc-800/50 bg-zinc-100 dark:bg-zinc-800",children:(0,t.jsx)("img",{src:f.avatar||`https://api.dicebear.com/7.x/avataaars/svg?seed=${f.handle}`,alt:f.handle,className:"size-full object-cover"})}),b===f.id&&(0,t.jsx)("div",{className:"absolute inset-0 flex items-center justify-center rounded-full bg-black/40",children:(0,t.jsx)("span",{className:"animate-pulse text-white font-bold",children:"..."})})]}),(0,t.jsx)("span",{className:"max-w-[70px] truncate text-[11px] font-medium text-zinc-500 dark:text-zinc-400",children:f.name?.split(" ")[0]||f.handle})]},f.id)):(0,t.jsx)("div",{className:"flex-1 py-2 text-center",children:(0,t.jsx)("span",{className:"text-xs text-zinc-400",children:"No people found"})})}),(0,t.jsx)("div",{className:"mx-5 h-px bg-black/5 dark:bg-white/5"}),(0,t.jsxs)("div",{className:"grid grid-cols-5 gap-3 px-5 py-6",children:[_.map(f=>(0,t.jsxs)("a",{href:f.href,target:"_blank",rel:"noopener noreferrer",className:"group flex flex-col items-center gap-2.5",children:[(0,t.jsx)("div",{className:`size-12 ${f.color} flex items-center justify-center rounded-[18px] shadow-sm ring-1 ring-black/5 transition-all group-hover:-translate-y-1 group-hover:scale-105 group-hover:shadow-lg dark:ring-white/5`,children:(0,t.jsx)(f.icon,{size:22,strokeWidth:2.5})}),(0,t.jsx)("span",{className:"text-[10px] font-bold uppercase tracking-wider text-zinc-500/80 dark:text-zinc-400/80",children:f.name})]},f.name)),(0,t.jsxs)("button",{onClick:$,className:"group flex flex-col items-center gap-2.5",children:[(0,t.jsx)("div",{className:"flex size-12 items-center justify-center rounded-[18px] border border-black/10 bg-white/50 text-zinc-600 shadow-sm transition-all group-hover:-translate-y-1 group-hover:scale-105 dark:border-white/10 dark:bg-white/5 dark:text-zinc-300",children:(0,t.jsx)(Ce,{size:22,strokeWidth:2.5})}),(0,t.jsx)("span",{className:"text-[10px] font-bold uppercase tracking-wider text-zinc-500/80 dark:text-zinc-400/80",children:"More"})]})]}),(0,t.jsx)("div",{className:"px-5 pb-6",children:(0,t.jsxs)("div",{className:"group relative flex items-center overflow-hidden rounded-2xl border border-black/10 bg-white/40 dark:border-white/10 dark:bg-black/20",children:[(0,t.jsx)("input",{type:"text",readOnly:!0,value:s,className:"w-full bg-transparent py-4 pl-4 pr-16 text-[14px] font-medium text-zinc-600 outline-none dark:text-zinc-300"}),(0,t.jsx)("button",{onClick:w,className:`absolute right-1 text-[13px] font-bold active:scale-95 transition-all px-4 h-10 rounded-xl leading-none ${n?"text-emerald-500":"text-violet-600 hover:text-violet-700 dark:text-violet-400"}`,children:n?"Copied":"Copy"})]})}),(0,t.jsx)("div",{className:"border-t border-black/10 dark:border-white/10",children:(0,t.jsx)("button",{onClick:e,className:"flex h-16 w-full items-center justify-center text-[19px] font-medium text-zinc-500 transition-colors active:bg-black/5 dark:text-zinc-400 dark:active:bg-white/5",children:"Close"})})]})})},Pt=kl,Ft=G(),zl=l=>{const e=(0,Ft.c)(6),{avatars:s}=l;if(!s||s.length===0)return null;let r,i;if(e[0]!==s){const c=s.slice(0,3);r="relative mt-2.5 h-8 w-8",i=c.map((a,o)=>{let h,p;return c.length===1?(h="top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2",p="size-5"):c.length===2?(p="size-4.5",h=o===0?"top-0 right-0":"bottom-0 left-0"):(p=o===0?"size-4.5":"size-3.5",o===0?h="top-0 left-1/2 -translate-x-1/2":o===1?h="bottom-0.5 left-0":h="bottom-0.5 right-0"),(0,t.jsx)("div",{className:`absolute rounded-full border-2 border-white bg-zinc-100 dark:border-black dark:bg-zinc-800 overflow-hidden shadow-md transition-transform hover:scale-110 ${h} ${p}`,style:{zIndex:10-o},children:(0,t.jsx)("img",{src:a,alt:"",className:"h-full w-full object-cover",loading:"lazy"})},o)}),e[0]=s,e[1]=r,e[2]=i}else r=e[1],i=e[2];let n;return e[3]!==r||e[4]!==i?(n=(0,t.jsx)("div",{className:r,children:i}),e[3]=r,e[4]=i,e[5]=n):n=e[5],n},jt=l=>{const e=(0,Ft.c)(70),{id:s,user:r,isCurrentUser:i,isComment:n,onEdit:c,onDelete:a,addToast:o,trigger:h}=l,{openReport:p}=$t(),[m,u]=(0,z.useState)(!1);if(us("(min-width: 1024px)")){let k;e[0]!==h?(k=(0,t.jsx)(ds,{asChild:!0,onClick:_l,children:(0,t.jsx)("div",{className:"cursor-pointer outline-none",children:h})}),e[0]=h,e[1]=k):k=e[1];let j;e[2]!==o||e[3]!==s||e[4]!==n?(j=!n&&(0,t.jsxs)(re,{onClick:O=>{O.stopPropagation(),Pe(`${lt()}/p/${s}`).then(()=>{o("Link copied"),u(!1)}).catch(()=>{o("Failed to copy link","error")})},children:[(0,t.jsx)(Ke,{className:"mr-2 h-4 w-4"}),(0,t.jsx)("span",{children:"Copy link"})]}),e[2]=o,e[3]=s,e[4]=n,e[5]=j):j=e[5];let T;e[6]!==s||e[7]!==p?(T=O=>{O.stopPropagation(),p("post",s),u(!1)},e[6]=s,e[7]=p,e[8]=T):T=e[8];let E;e[9]===Symbol.for("react.memo_cache_sentinel")?(E=(0,t.jsx)(we,{className:"mr-2 h-4 w-4"}),e[9]=E):E=e[9];const I=n?"comment":"post";let L;e[10]!==I?(L=(0,t.jsxs)("span",{children:["Report ",I]}),e[10]=I,e[11]=L):L=e[11];let A;e[12]!==T||e[13]!==L?(A=(0,t.jsxs)(re,{onClick:T,children:[E,L]}),e[12]=T,e[13]=L,e[14]=A):A=e[14];let U;e[15]!==i||e[16]!==p||e[17]!==r?(U=!i&&(0,t.jsxs)(re,{onClick:O=>{O.stopPropagation(),p("user",r.id),u(!1)},children:[(0,t.jsx)(Xe,{className:"mr-2 h-4 w-4"}),(0,t.jsxs)("span",{children:["Report @",r.handle]})]}),e[15]=i,e[16]=p,e[17]=r,e[18]=U):U=e[18];let V;e[19]!==n||e[20]!==i||e[21]!==a||e[22]!==c?(V=i&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ms,{}),(0,t.jsxs)(re,{onClick:O=>{O.stopPropagation(),c(),u(!1)},children:[(0,t.jsx)(Ze,{className:"mr-2 h-4 w-4"}),(0,t.jsxs)("span",{children:["Edit ",n?"Comment":"Post"]})]}),(0,t.jsxs)(re,{className:"text-red-500 focus:text-red-500",onClick:O=>{O.stopPropagation(),a(),u(!1)},children:[(0,t.jsx)(Je,{className:"mr-2 h-4 w-4"}),(0,t.jsxs)("span",{children:["Delete ",n?"comment":"post"]})]})]}),e[19]=n,e[20]=i,e[21]=a,e[22]=c,e[23]=V):V=e[23];let Q;e[24]!==j||e[25]!==A||e[26]!==U||e[27]!==V?(Q=(0,t.jsxs)(cs,{align:"end",className:"w-56",onClick:Sl,children:[j,A,U,V]}),e[24]=j,e[25]=A,e[26]=U,e[27]=V,e[28]=Q):Q=e[28];let W;return e[29]!==m||e[30]!==k||e[31]!==Q?(W=(0,t.jsx)("div",{onClick:Cl,children:(0,t.jsxs)(ys,{open:m,onOpenChange:u,modal:!0,children:[k,Q]})}),e[29]=m,e[30]=k,e[31]=Q,e[32]=W):W=e[32],W}let b;e[33]===Symbol.for("react.memo_cache_sentinel")?(b=k=>{k.stopPropagation(),u(!0)},e[33]=b):b=e[33];let x;e[34]!==h?(x=(0,t.jsx)("div",{onClick:b,className:"cursor-pointer",children:h}),e[34]=h,e[35]=x):x=e[35];let v;e[36]===Symbol.for("react.memo_cache_sentinel")?(v=()=>u(!1),e[36]=v):v=e[36];let g;e[37]!==o||e[38]!==s||e[39]!==n?(g=!n&&(0,t.jsx)(oe,{icon:(0,t.jsx)(Ke,{size:18}),onClick:k=>{k.stopPropagation(),Pe(`${lt()}/p/${s}`).then(()=>{o("Link copied"),u(!1)}).catch(()=>{o("Failed to copy link","error")})},children:"Copy link"}),e[37]=o,e[38]=s,e[39]=n,e[40]=g):g=e[40];let d;e[41]===Symbol.for("react.memo_cache_sentinel")?(d=(0,t.jsx)(we,{size:18}),e[41]=d):d=e[41];let y;e[42]!==s||e[43]!==p?(y=k=>{k.stopPropagation(),p("post",s),u(!1)},e[42]=s,e[43]=p,e[44]=y):y=e[44];const w=n?"comment":"post";let C;e[45]!==y||e[46]!==w?(C=(0,t.jsxs)(oe,{icon:d,onClick:y,children:["Report ",w]}),e[45]=y,e[46]=w,e[47]=C):C=e[47];let _;e[48]!==i||e[49]!==p||e[50]!==r?(_=!i&&(0,t.jsxs)(oe,{icon:(0,t.jsx)(Xe,{size:18}),onClick:k=>{k.stopPropagation(),p("user",r.id),u(!1)},children:["Report @",r.handle]}),e[48]=i,e[49]=p,e[50]=r,e[51]=_):_=e[51];let $;e[52]!==n||e[53]!==i||e[54]!==c?($=i&&(0,t.jsxs)(oe,{icon:(0,t.jsx)(Ze,{size:18}),onClick:k=>{k.stopPropagation(),c(),u(!1)},children:["Edit ",n?"Comment":"Post"]}),e[52]=n,e[53]=i,e[54]=c,e[55]=$):$=e[55];let f;e[56]!==n||e[57]!==i||e[58]!==a?(f=i&&(0,t.jsxs)(oe,{variant:"destructive",icon:(0,t.jsx)(Je,{size:18}),onClick:k=>{k.stopPropagation(),a(),u(!1)},children:["Delete ",n?"comment":"post"]}),e[56]=n,e[57]=i,e[58]=a,e[59]=f):f=e[59];let S;e[60]!==m||e[61]!==$||e[62]!==f||e[63]!==g||e[64]!==C||e[65]!==_?(S=(0,t.jsx)("div",{onClick:$l,children:(0,t.jsxs)(Is,{isOpen:m,onClose:v,children:[g,C,_,$,f]})}),e[60]=m,e[61]=$,e[62]=f,e[63]=g,e[64]=C,e[65]=_,e[66]=S):S=e[66];let M;return e[67]!==S||e[68]!==x?(M=(0,t.jsxs)(t.Fragment,{children:[x,S]}),e[67]=S,e[68]=x,e[69]=M):M=e[69],M},Fe=({id:l,user:e,timeAgo:s,content:r,contentClass:i,media:n,quotedPost:c,stats:a,onClick:o,repostedBy:h,onUserClick:p,currentUser:m,poll:u,isDetail:b,initialComments:x,onDelete:v,onUpdate:g,isComment:d,onReply:y,community:w,parent_id:C,post_id:_,commenterAvatars:$=[]})=>{const f=kt(),{addToast:S}=Re(),{liked:M,reposted:k,localStats:j,setLocalStats:T,handleLike:E,handleRepost:I}=Ts(_||l,a,m),{deletePost:L,updatePost:A}=Ss(),{comments:U,fetchNextPage:V,hasNextPage:Q,isFetchingNextPage:W,addComment:O,deleteComment:J,updateComment:N,isSubmitting:P}=ot(_||l,x),[R,D]=(0,z.useState)(""),[B,Y]=(0,z.useState)([]),[Rt,Le]=(0,z.useState)(!1),[De,ae]=(0,z.useState)(!1),[me,ee]=(0,z.useState)(!1),[Z,fe]=(0,z.useState)(r),[ue,xe]=(0,z.useState)(n||[]),[he,ne]=(0,z.useState)([]),[Ae,Ue]=(0,z.useState)(!1),[Mt,ke]=(0,z.useState)(!1),[ze,pe]=(0,z.useState)(null),[Ne,Oe]=(0,z.useState)(!1),{comments:Et,refetch:Be}=ot(_||l,void 0,Ne?l:void 0),{ref:Ve,inView:We}=Bt({threshold:.5,triggerOnce:!0});(0,z.useEffect)(()=>{if(We&&!d&&l&&!l.startsWith("temp-")){const F=setTimeout(()=>{wt(l).catch(console.error)},1500);return()=>clearTimeout(F)}},[We,l,d]);const It=(0,z.useCallback)(async()=>{!l||!_&&!l||j.comments===0||(Oe(!0),Be())},[l,_,j.comments,Be]),He=async()=>{const F=JSON.stringify(ue)!==JSON.stringify(n||[])||he.length>0;if(!Z.trim()||Z===r&&!F){ee(!1);return}Ue(!0);try{const H=[];for(const te of he){const At=await $e(te);H.push(At)}const X=[...ue,...H];d?await N({commentId:l,content:Z,media:X}):await A(l,{content:Z,media:X}),ne([]),ee(!1),S(`${d?"Comment":"Post"} updated`),g&&g(l,Z,X)}catch(H){console.error(`Failed to update ${d?"comment":"post"}:`,H),S(`Failed to update ${d?"comment":"post"}`)}finally{Ue(!1)}},qe=async F=>{F&&F.stopPropagation();try{d?await J(l):await L(l),S(`${d?"Comment":"Post"} deleted successfully`),v&&v(l)}catch(H){console.error(`Failed to delete ${d?"comment":"post"}:`,H),S(`Failed to delete ${d?"comment":"post"}`)}finally{ae(!1)}},Lt=async F=>{if(F.preventDefault(),!(!R.trim()&&B.length===0||!m)){Le(!0);try{const H=[];for(const X of B){const te=await $e(X);H.push(te)}await O({userId:m.id,content:R,media:H,replyToId:ze?.id}),D(""),Y([]),pe(null),T(X=>({...X,comments:(X.comments||0)+1})),S("Reply posted!")}catch(H){console.error("Failed to post comment:",H),S("Failed to post reply.")}finally{Le(!1)}}},Qe=m?.handle===e.handle,Dt=(F,H)=>{pe(H?{handle:F,id:d?C||l:H}:null),D(X=>{const te=`@${F} `;return X.includes(te)?X:te+X}),document.getElementById("comment-input")?.focus()};return b?(0,t.jsxs)(q.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:"flex flex-col",ref:Ve,children:[(0,t.jsxs)("article",{className:"p-6 dark:bg-black",children:[(0,t.jsx)(xt,{user:e,timeAgo:s,community:w,onUserClick:p,isDetail:!0,showAvatar:!0,actionsMenu:(0,t.jsx)(jt,{id:l,user:e,isCurrentUser:Qe,isComment:d,onEdit:()=>ee(!0),onDelete:()=>ae(!0),addToast:S,trigger:(0,t.jsx)("button",{"aria-label":"More options",className:"rounded-full p-2 text-zinc-500 transition-colors hover:bg-zinc-100 dark:hover:bg-zinc-800",children:(0,t.jsx)(Ce,{size:20})})})}),(0,t.jsx)(ht,{content:r,isDetail:!0,isEditing:me,editedContent:Z,setEditedContent:fe,onCancelEdit:()=>{ee(!1),fe(r),xe(n||[]),ne([])},onSaveEdit:He,isUpdating:Ae,contentClass:i}),ge(r)&&(0,t.jsx)(vt,{url:ge(r)}),(0,t.jsx)(pt,{media:n,isEditing:me,editedMedia:ue,setEditedMedia:xe,newFiles:he,setNewFiles:ne}),u&&(0,t.jsx)(gt,{poll:u,onVote:F=>bs(l,F,m.id)}),c&&(0,t.jsx)("div",{className:"mt-5 overflow-hidden rounded-2xl border border-zinc-200 shadow-sm dark:border-zinc-700",children:(0,t.jsx)(bt,{...c})}),(0,t.jsx)(ut,{views:j.views||0,likes:j.likes||0,comments:j.comments||0,isDetail:!0}),(0,t.jsx)("div",{className:"my-4"}),(0,t.jsx)(ft,{liked:M,reposted:k,handleLike:E,handleRepost:I,handleCommentClick:()=>document.getElementById("comment-input")?.focus(),handleShareClick:()=>ke(!0),isDetail:!0,isComment:d})]}),ze&&(0,t.jsxs)("div",{className:"flex items-center justify-between bg-zinc-50 px-5 py-2 dark:bg-zinc-900/50",children:[(0,t.jsxs)("span",{className:"text-sm text-zinc-500",children:["Replying to"," ",(0,t.jsxs)("span",{className:"font-bold text-violet-600",children:["@",ze.handle]})]}),(0,t.jsx)("button",{onClick:()=>pe(null),className:"text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-200",children:(0,t.jsx)(de,{size:16})})]}),(0,t.jsx)(Tt,{currentUser:m,newComment:R,setNewComment:D,handleSubmitComment:Lt,loading:P,selectedFiles:B,setSelectedFiles:Y,isUploading:Rt}),(0,t.jsxs)("div",{className:"divide-y divide-zinc-100 dark:divide-zinc-800",children:[(0,t.jsx)("div",{className:"divide-y divide-zinc-100 dark:divide-zinc-800",children:(0,t.jsxs)(t.Fragment,{children:[Q&&U.length>0&&(0,t.jsxs)("button",{onClick:()=>V(),disabled:W,className:"flex w-full items-center justify-center gap-2 py-3 text-sm font-bold text-violet-600 transition-colors hover:bg-zinc-50 dark:hover:bg-zinc-900",children:[W&&(0,t.jsx)("span",{className:"animate-spin",children:"⌛"}),"View more replies"]}),U.map(F=>(0,t.jsx)(Fe,{...F,isComment:!0,post_id:l,onReply:Dt,onUserClick:p,currentUser:m,stats:{likes:F.stats?.likes||0,comments:F.stats?.comments||0,reposts:F.stats?.reposts||0},timeAgo:F.timeAgo||F.created_at},F.id))]})}),(0,t.jsx)(at,{open:De,onOpenChange:ae,children:(0,t.jsxs)(tt,{onClick:F=>F.stopPropagation(),children:[(0,t.jsxs)(mt,{children:[(0,t.jsx)(dt,{children:"Are you absolutely sure?"}),(0,t.jsx)(Ye,{children:"This action cannot be undone. This will permanently delete your post and all its comments."})]}),(0,t.jsxs)(rt,{children:[(0,t.jsx)(nt,{onClick:F=>F.stopPropagation(),children:"Cancel"}),(0,t.jsx)(it,{onClick:qe,className:"bg-rose-500 hover:bg-rose-600",children:"Delete"})]})]})})]})]}):(0,t.jsxs)(q.article,{initial:{opacity:0,y:10},whileInView:{opacity:1,y:0},viewport:{once:!0,margin:"-50px"},transition:{duration:.4,ease:"easeOut"},ref:Ve,onClick:o,className:`px-5 transition-all ${d?"py-3 bg-transparent hover:bg-zinc-50/30 dark:hover:bg-zinc-800/20":"py-5 bg-white hover:bg-zinc-50/30 dark:bg-black dark:hover:bg-white/[0.02]"} ${o?"cursor-pointer":""}`,children:[h&&(0,t.jsxs)("div",{className:"mb-2.5 ml-1 flex items-center space-x-1.5 text-[13px] font-semibold text-zinc-600",children:[(0,t.jsx)(Se,{size:14,className:"text-zinc-500"}),(0,t.jsxs)("span",{className:"flex cursor-pointer items-center text-zinc-700 hover:underline dark:text-zinc-300",onClick:F=>{F.stopPropagation(),p&&p(h.handle)},children:[h.handle," Reposted"]})]}),(0,t.jsxs)("div",{className:"flex items-start gap-x-3.5",children:[(0,t.jsxs)("div",{className:"flex shrink-0 flex-col items-center self-stretch pt-0.5",children:[(0,t.jsx)("div",{className:"cursor-pointer",onClick:F=>{F.stopPropagation(),p&&p(e.handle)},children:(0,t.jsxs)(ie,{className:`${d?"size-8":"size-10"} border-0 shadow-sm`,children:[(0,t.jsx)(se,{src:e.avatar,alt:e.handle,className:"object-cover"}),(0,t.jsx)(le,{className:"text-xs",children:e.handle[0]?.toUpperCase()})]})}),(!d&&j.comments>0||d&&!C&&j.comments>0)&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"mt-2 w-0.5 flex-1 rounded-full bg-zinc-100 dark:bg-zinc-800"}),!d&&(0,t.jsx)(zl,{avatars:$.length>0?$:(U||[]).slice(0,3).map(F=>F.user.avatar)})]})]}),(0,t.jsxs)("div",{className:"flex min-w-0 flex-1 flex-col",children:[(0,t.jsx)(xt,{user:e,timeAgo:s,community:w,onUserClick:p,isComment:d,actionsMenu:(0,t.jsx)(jt,{id:l,user:e,isCurrentUser:Qe,isComment:d,onEdit:()=>ee(!0),onDelete:()=>ae(!0),addToast:S,trigger:(0,t.jsx)("button",{"aria-label":"More options",className:"rounded-full p-2 text-zinc-500 transition-colors hover:bg-zinc-100 group-hover:bg-zinc-100 dark:hover:bg-zinc-800 dark:group-hover:bg-zinc-800/50",children:(0,t.jsx)(Ce,{size:18})})})}),(0,t.jsx)(ht,{content:r,isEditing:me,editedContent:Z,setEditedContent:fe,onCancelEdit:()=>{ee(!1),fe(r),xe(n||[]),ne([])},onSaveEdit:He,isUpdating:Ae,contentClass:i}),ge(r)&&(0,t.jsx)(vt,{url:ge(r)}),(0,t.jsx)(pt,{media:n,isEditing:me,editedMedia:ue,setEditedMedia:xe,newFiles:he,setNewFiles:ne}),u&&(0,t.jsx)(gt,{poll:u}),c&&(0,t.jsx)("div",{className:"mt-3 overflow-hidden rounded-2xl border border-zinc-200 shadow-sm transition-all hover:bg-zinc-50 dark:border-zinc-800 dark:hover:bg-zinc-900",onClick:F=>{F.stopPropagation(),f(`/p/${c.id}`)},children:(0,t.jsx)(bt,{...c})}),(0,t.jsx)(ft,{liked:M,reposted:k,handleLike:E,handleRepost:I,handleCommentClick:F=>{if(F?.stopPropagation(),y){const H=d&&C||l;y(e.handle,H)}else o&&o()},handleShareClick:F=>{F?.stopPropagation(),ke(!0)},isComment:d}),(0,t.jsx)(ut,{views:j.views||0,likes:j.likes||0,comments:j.comments||0,isComment:d,onRepliesClick:()=>{Ne?Oe(!1):It()}}),Ne&&(0,t.jsxs)("div",{className:"relative mt-2 space-y-0",children:[(0,t.jsx)("div",{className:"absolute left-[19px] top-0 bottom-4 w-0.5 bg-zinc-100 dark:bg-zinc-800"}),(0,t.jsx)("div",{className:"flex flex-col",children:Et.map(F=>(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"absolute left-[19px] top-5 h-0.5 w-4 bg-zinc-100 dark:bg-zinc-800"}),(0,t.jsx)("div",{className:"pl-6",children:(0,t.jsx)(Fe,{...F,isComment:!0,post_id:_||l,onReply:y,onUserClick:p,currentUser:m,stats:{likes:F.stats?.likes||0,comments:F.stats?.comments||0,reposts:F.stats?.reposts||0},timeAgo:F.timeAgo||F.created_at})})]},F.id))})]}),(0,t.jsx)(Pt,{isOpen:Mt,onClose:()=>ke(!1),url:Es(l),title:"Share Post",overlayClassName:"z-[9999]"}),(0,t.jsx)(at,{open:De,onOpenChange:ae,children:(0,t.jsxs)(tt,{onClick:F=>F.stopPropagation(),children:[(0,t.jsxs)(mt,{children:[(0,t.jsx)(dt,{children:"Are you absolutely sure?"}),(0,t.jsx)(Ye,{children:"This action cannot be undone. This will permanently delete your post and all its comments."})]}),(0,t.jsxs)(rt,{children:[(0,t.jsx)(nt,{onClick:F=>F.stopPropagation(),children:"Cancel"}),(0,t.jsx)(it,{onClick:qe,className:"bg-rose-500 hover:bg-rose-600",children:"Delete"})]})]})})]})]})]})};function Nl(l,e){const s=!l.media&&!e.media||l.media?.length===e.media?.length&&l.media?.every((i,n)=>i.url===e.media?.[n].url),r=l.repostedBy?.handle===e.repostedBy?.handle;return l.id===e.id&&l.content===e.content&&l.timeAgo===e.timeAgo&&l.user.id===e.user.id&&l.user.avatar===e.user.avatar&&l.stats.likes===e.stats.likes&&l.stats.comments===e.stats.comments&&l.stats.reposts===e.stats.reposts&&l.currentUser?.id===e.currentUser?.id&&!!s&&!!r}var wl=z.memo(Fe,Nl);function Cl(l){return l.stopPropagation()}function _l(l){return l.stopPropagation()}function Sl(l){return l.stopPropagation()}function $l(l){return l.stopPropagation()}var Ie=null;const be=l=>{Ie=l},ve=()=>Ie,Ol=()=>{Ie=null};var Tl=z.memo(({reel:l,isActive:e,volume:s,shouldLoad:r=!0})=>{const{currentUser:i}=St(),{addToast:n}=Re(),{openReport:c}=$t(),a=(0,z.useRef)(null),[o,h]=(0,z.useState)(!1),[p,m]=(0,z.useState)(!1),[u,b]=(0,z.useState)(!1),[x,v]=(0,z.useState)(!1),[g,d]=(0,z.useState)(null),[y,w]=(0,z.useState)(!1),[C,_]=(0,z.useState)(l.stats?.likes||0),[$,f]=(0,z.useState)(!1),[S,M]=(0,z.useState)(0),[k,j]=(0,z.useState)(!1),T=(0,z.useRef)(null);(0,z.useEffect)(()=>{if(e&&l.id&&!l.id.toString().startsWith("temp-")){const N=setTimeout(()=>{wt(l.id).catch(console.error)},1500);return()=>clearTimeout(N)}},[e,l.id]);const E=(0,z.useMemo)(()=>Array.isArray(l.media)?l.media[0]?.src||l.media[0]?.url:l.media?.src||l.media?.url||l.url,[l.media,l.url]);(0,z.useEffect)(()=>{v(!1),j(!1);const N=a.current?.plyr;if(N&&typeof N.on=="function"){const P=()=>v(!0),R=()=>j(!0);N.on("ready",P),N.on("canplay",P),N.on("loadeddata",P),N.on("playing",R);const D=setTimeout(()=>{!k&&e&&j(!0)},3e3);return()=>{clearTimeout(D),typeof N.off=="function"&&(N.off("ready",P),N.off("canplay",P),N.off("loadeddata",P),N.off("playing",R))}}else{const P=setTimeout(()=>{v(!0),e&&j(!0)},1500);return()=>clearTimeout(P)}},[E,e,k]);const I=(0,z.useRef)(null);(0,z.useEffect)(()=>{const N=a.current,P=N?.plyr;if(I.current&&(clearTimeout(I.current),I.current=null),!(!P||!x))return e?I.current=setTimeout(()=>{I.current=null;const R=a.current?.plyr;if(R&&typeof R.play=="function"){const D=ve();D&&D!==R&&(D.pause(),typeof D.currentTime<"u"&&(D.currentTime=0)),R.play().catch(()=>{const B=a.current?.plyr;B&&(B.muted=!0,B.play().catch(()=>{}))}).then(()=>{be(R)})}},50):typeof P.pause=="function"&&(P.pause(),typeof P.currentTime<"u"&&(P.currentTime=0),ve()===P&&be(null)),()=>{I.current&&(clearTimeout(I.current),I.current=null);const R=N?.plyr;R&&typeof R.pause=="function"&&(R.pause(),typeof R.currentTime<"u"&&(R.currentTime=0),ve()===R&&be(null))}},[e,x]),(0,z.useEffect)(()=>{const N=a.current;return()=>{I.current&&(clearTimeout(I.current),I.current=null);const P=N?.plyr;P&&(P.pause(),P.currentTime=0,ve()===P&&be(null)),v(!1),j(!1),M(0)}},[]),(0,z.useEffect)(()=>{if(!i?.id||!e)return;(async()=>{try{const[P,R]=await Promise.all([os(l.id,i.id),_s(i.id,l.user?.id)]);w(P),f(R)}catch(P){console.error("Failed to check interaction status:",P)}})()},[l.id,i?.id,e,l.user?.id]),(0,z.useEffect)(()=>{const N=a.current?.plyr;N&&(N.muted=s===0,N.volume=s)},[s,x]),(0,z.useEffect)(()=>{const N=a.current?.plyr;if(!N||!e)return;const P=()=>{const R=N.currentTime,D=N.duration;D>0&&M(R/D*100)};if(typeof N.on=="function")return N.on("timeupdate",P),()=>{typeof N.off=="function"&&N.off("timeupdate",P)}},[e]);const L=N=>{N.stopPropagation();const P=N.currentTarget.getBoundingClientRect(),R=N.clientX-P.left,D=Math.min(Math.max(0,R/P.width),1),B=a.current?.plyr;B&&B.duration&&(B.currentTime=D*B.duration,M(D*100))};(0,z.useEffect)(()=>()=>{T.current&&clearTimeout(T.current)},[]);const A=N=>{const P=N.target;P.closest("button")||P.closest("a")||P.closest(".plyr__controls")||(T.current?(clearTimeout(T.current),T.current=null,V()):T.current=setTimeout(()=>{T.current=null,U()},250))},U=()=>{const N=a.current?.plyr;N&&(N.paused?(N.play().catch(()=>{}),d("play")):(N.pause(),d("pause")),setTimeout(()=>d(null),800))},V=async()=>{if(i&&(h(!0),setTimeout(()=>h(!1),800),!y)){w(!0),_(N=>N+1);try{await et(l.id,i.id)}catch{w(!1),_(N=>N-1)}}},Q=async N=>{if(N.stopPropagation(),!i)return;const P=!y;w(P),_(R=>P?R+1:R-1);try{await et(l.id,i.id)}catch{w(!P),_(R=>P?R-1:R+1)}},W=async N=>{if(N.stopPropagation(),!i)return;const P=!$;f(P);try{await gs(i.id,l.user?.id)}catch{f(!P)}},O=N=>{N.stopPropagation(),b(!0)},J=(0,z.useMemo)(()=>({source:{type:"video",sources:[{src:E,type:"video/mp4"}]},options:{controls:[],loop:{active:!0},clickToPlay:!1,ratio:"9:16",autoplay:!1,playsinline:!0,muted:!0}}),[E]);return(0,t.jsxs)("div",{"data-id":l.id,className:"reel-item relative flex h-[100dvh] w-full snap-start items-center justify-center overflow-hidden bg-black cursor-pointer select-none",onClick:A,children:[(0,t.jsxs)("div",{className:"relative flex h-full w-full max-w-[450px] items-center justify-center",children:[(0,t.jsx)("div",{className:"w-full",children:r?(0,t.jsx)(rs,{ref:a,...J}):(0,t.jsx)("div",{className:"aspect-[9/16] w-full bg-zinc-900",children:(0,t.jsx)("img",{src:l.media?.[0]?.preview||l.media?.[0]?.thumbnail||E,className:"h-full w-full object-cover opacity-50 blur-xl",alt:"Reel preview"})})}),!k&&(0,t.jsx)("div",{className:"absolute inset-0 z-[60] flex items-center justify-center bg-zinc-900 pointer-events-none",children:(0,t.jsx)(vs,{})}),(0,t.jsx)(Te,{children:o&&(0,t.jsx)(q.div,{initial:{scale:0,opacity:0},animate:{scale:[0,1.2,1],opacity:1},exit:{scale:1.5,opacity:0},transition:{duration:.5,type:"spring",stiffness:400,damping:20},className:"pointer-events-none absolute inset-0 z-50 flex items-center justify-center",children:(0,t.jsx)(je,{size:120,fill:"white",className:"text-white drop-shadow-[0_0_30px_rgba(255,255,255,0.4)]"})})}),(0,t.jsx)(Te,{children:g&&(0,t.jsx)(q.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},exit:{scale:1.5,opacity:0},transition:{duration:.4},className:"absolute inset-0 z-50 flex items-center justify-center",onClick:N=>{N.stopPropagation(),U()},children:(0,t.jsx)("div",{className:"rounded-full border border-white/20 bg-white/10 p-8 shadow-2xl backdrop-blur-md cursor-pointer hover:bg-white/20 transition-colors",children:g==="play"?(0,t.jsx)(_e,{size:50,fill:"white",className:"ml-1.5 text-white"}):(0,t.jsx)(es,{size:50,fill:"white",className:"text-white"})})})}),(0,t.jsx)("div",{className:"pointer-events-none absolute inset-0 bg-gradient-to-b from-black/20 via-transparent to-black/60"}),(0,t.jsxs)("div",{className:"pointer-events-none absolute bottom-6 left-4 right-16 text-white",children:[(0,t.jsxs)("div",{className:"pointer-events-auto mb-3 flex items-center gap-2",children:[(0,t.jsxs)(Ut,{to:`/u/${l.user?.handle}`,className:"flex items-center gap-2 transition-opacity hover:opacity-80 active:scale-95",onClick:N=>N.stopPropagation(),children:[(0,t.jsxs)(ie,{className:"size-10 border-2 border-white",children:[(0,t.jsx)(se,{src:l.user?.avatar,alt:l.user?.handle,className:"object-cover"}),(0,t.jsx)(le,{children:l.user?.handle?.[0]?.toUpperCase()})]}),(0,t.jsxs)("span",{className:"font-bold",children:["@",l.user?.handle]})]}),i?.id!==l.user?.id&&(0,t.jsx)("button",{className:`ml-2 flex items-center gap-1.5 rounded-full px-3 py-1.5 text-xs font-bold transition-all active:scale-95 ${$?"border border-white/50 bg-transparent text-white":"bg-white text-black hover:bg-zinc-200"}`,onClick:W,children:$?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(xs,{size:14}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"Following"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(fs,{size:14}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"Follow"})]})})]}),(0,t.jsx)(Me,{content:l.content,className:"mb-3 line-clamp-2 text-sm text-white"}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-xs opacity-90",children:[(0,t.jsx)(ts,{size:14,className:"animate-spin-slow"}),(0,t.jsxs)("span",{children:["Original Audio - ",l.user?.handle]})]})]}),(0,t.jsxs)("div",{className:"absolute bottom-6 right-2 z-10 flex flex-col items-center gap-6",children:[(0,t.jsxs)("div",{className:"pointer-events-auto flex flex-col items-center gap-1",children:[(0,t.jsx)(q.button,{whileTap:{scale:.8},className:`rounded-full p-3 backdrop-blur-md transition-all ${y?"bg-rose-500/20 text-rose-500":"bg-zinc-800/50 text-white hover:bg-zinc-700"}`,onClick:Q,children:(0,t.jsx)(q.div,{animate:y?{scale:[1,1.3,1]}:{scale:1},transition:{duration:.3},children:(0,t.jsx)(je,{size:28,fill:y?"currentColor":"none"})})}),(0,t.jsx)("span",{className:"text-xs font-bold text-white",children:C})]}),(0,t.jsxs)("div",{className:"pointer-events-auto flex flex-col items-center gap-1",children:[(0,t.jsx)(q.button,{whileTap:{scale:.8},className:"rounded-full bg-zinc-800/50 p-3 text-white backdrop-blur-md transition-colors hover:bg-zinc-700",onClick:N=>{N.stopPropagation(),m(!0)},children:(0,t.jsx)(Nt,{size:28})}),(0,t.jsx)("span",{className:"text-xs font-bold text-white",children:l.stats?.comments||0})]}),(0,t.jsxs)("div",{className:"pointer-events-auto flex flex-col items-center gap-1",children:[(0,t.jsx)(q.button,{whileTap:{scale:.8},className:"rounded-full bg-zinc-800/50 p-3 text-white backdrop-blur-md transition-colors hover:bg-zinc-700",onClick:O,children:(0,t.jsx)(ye,{size:28})}),(0,t.jsx)("span",{className:"text-xs font-bold text-white",children:l.stats?.shares||0})]}),(0,t.jsx)("div",{className:"pointer-events-auto flex flex-col items-center gap-1",children:(0,t.jsx)(q.button,{whileTap:{scale:.8},className:"rounded-full bg-zinc-800/50 p-3 text-white backdrop-blur-md transition-colors hover:bg-rose-500/20 hover:text-rose-500",onClick:N=>{N.stopPropagation(),c("reel",l.id)},children:(0,t.jsx)(we,{size:28})})})]}),(0,t.jsx)("div",{className:"absolute bottom-0 left-0 z-50 h-[3px] w-full bg-white/20 hover:h-[8px] transition-all cursor-pointer group",onClick:L,children:(0,t.jsx)("div",{className:"h-full bg-white shadow-[0_0_8px_rgba(255,255,255,0.8)] transition-all duration-100 ease-linear relative",style:{width:`${S}%`},children:(0,t.jsx)("div",{className:"absolute right-0 top-1/2 -translate-y-1/2 size-3 bg-white rounded-full shadow-lg scale-0 group-hover:scale-100 transition-transform"})})})]}),(0,t.jsx)(Fl,{isOpen:p,onClose:()=>m(!1),reelId:l.id,currentUser:i,showToast:n}),(0,t.jsx)(Pt,{isOpen:u,onClose:()=>b(!1),url:Ms(l.id),title:"Share Reel",overlayClassName:"z-[9999]"})]})},(l,e)=>l.isActive===e.isActive&&l.reel.id===e.reel.id&&l.volume===e.volume&&l.shouldLoad===e.shouldLoad),Bl=Tl,Pl=({isOpen:l,onClose:e,reelId:s,currentUser:r,showToast:i})=>{const[n,c]=(0,z.useState)([]),[a,o]=(0,z.useState)(!1),[h,p]=(0,z.useState)(!1),[m,u]=(0,z.useState)(""),[b,x]=(0,z.useState)([]),[v,g]=(0,z.useState)(!1),[d,y]=(0,z.useState)(!0),[w,C]=(0,z.useState)(!1),[_,$]=(0,z.useState)(null),f=(0,z.useRef)(n);(0,z.useEffect)(()=>{f.current=n},[n]);const S=(0,z.useCallback)(async(k=!1)=>{if(!(!s||s.startsWith("temp-"))){k?C(!0):o(!0);try{const j=f.current,T=await Fs(s,k&&j.length>0?j[j.length-1].created_at:null,10);T.length<10?y(!1):y(!0),c(k?E=>[...E,...T]:T)}catch(j){console.error("Failed to load comments:",j),i&&i("Failed to load comments","error")}finally{o(!1),C(!1)}}},[s,i]);(0,z.useEffect)(()=>{l&&s?S():(c([]),y(!0))},[l,s,S]);const M=async k=>{if(k.preventDefault(),!(!m.trim()&&b.length===0||!r)){p(!0),g(!0);try{const j=[];for(const T of b){const E=await $e(T);j.push(E)}await js(s,r.id,m,j,_?.id),u(""),x([]),$(null),i&&i("Reply posted!"),S()}catch(j){console.error("Failed to post comment:",j),i&&i("Failed to post reply.","error")}finally{p(!1),g(!1)}}};return(0,t.jsx)(_t,{isOpen:l,onClose:e,title:"Comments",className:"max-sm:h-[95dvh] h-[85vh] overflow-hidden !p-0 sm:max-w-xl",children:(0,t.jsxs)("div",{className:"flex h-full flex-col overflow-hidden bg-white dark:bg-zinc-900",children:[(0,t.jsx)("div",{className:"mx-auto my-3 h-1.5 w-12 shrink-0 rounded-full bg-zinc-200 dark:bg-zinc-800 sm:hidden"}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto scroll-smooth scrollbar-thin scrollbar-thumb-zinc-200 dark:scrollbar-thumb-zinc-800",children:a?(0,t.jsx)("div",{className:"flex flex-col",children:[1,2,3].map(k=>(0,t.jsx)(zs,{},k))}):n.length>0?(0,t.jsxs)("div",{className:"flex flex-col",children:[n.map(k=>(0,t.jsx)(wl,{...k,isComment:!0,post_id:s,currentUser:r,showToast:i,onReply:(j,T)=>{$(T?{handle:j,id:T}:null),u(E=>E.includes(`@${j}`)?E:E+`@${j} `)},onDelete:j=>c(T=>T.filter(E=>E.id!==j)),onUpdate:(j,T,E)=>c(I=>I.map(L=>L.id===j?{...L,content:T,media:E}:L))},k.id)),d&&(0,t.jsx)("div",{className:"flex justify-center border-t border-zinc-100 py-4 dark:border-zinc-800",children:(0,t.jsx)(Ct,{variant:"ghost",onClick:()=>S(!0),loading:w,className:"text-violet-600 font-bold",children:"View more replies"})})]}):(0,t.jsxs)("div",{className:"flex h-full min-h-[300px] flex-col items-center justify-center p-8 text-center text-zinc-500",children:[(0,t.jsx)("div",{className:"mb-4 flex size-16 items-center justify-center rounded-full bg-zinc-100 dark:bg-zinc-900",children:(0,t.jsx)(zt,{size:32,className:"text-zinc-400"})}),(0,t.jsx)("p",{className:"text-lg font-bold dark:text-zinc-300",children:"No comments yet"}),(0,t.jsx)("p",{className:"text-sm dark:text-zinc-500",children:"Be the first to share what you think!"})]})}),(0,t.jsxs)("div",{className:"shrink-0 border-t border-zinc-100 bg-white pb-safe dark:border-zinc-800 dark:bg-zinc-900",children:[_&&(0,t.jsxs)("div",{className:"flex items-center justify-between border-b border-zinc-50 bg-zinc-50/50 px-4 py-2 dark:border-zinc-800/50 dark:bg-zinc-900/50",children:[(0,t.jsxs)("span",{className:"text-xs text-zinc-500",children:["Replying to"," ",(0,t.jsxs)("span",{className:"font-bold text-violet-600",children:["@",_.handle]})]}),(0,t.jsx)("button",{onClick:()=>$(null),className:"text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-200",children:(0,t.jsx)(de,{size:14})})]}),(0,t.jsx)(Tt,{currentUser:r,newComment:m,setNewComment:u,handleSubmitComment:M,loading:h,selectedFiles:b,setSelectedFiles:x,isUploading:v})]})]})})},Fl=Pl;export{Ol as n,wl as r,Bl as t};

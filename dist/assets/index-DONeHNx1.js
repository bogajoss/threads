const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Home-DJaOctqf.js","assets/framework-DIDnLsp9.js","assets/rolldown-runtime-BaZ8gS7u.js","assets/framework-sg0yWRLc.css","assets/ui-libs-BbdIqPKe.js","assets/ui-libs-CqCaMccn.css","assets/database-DlIwwAmc.js","assets/linkify-DBRQwEj8.js","assets/post-E8BOuOPo.js","assets/query-DNidMcz3.js","assets/hooks-CqpOLrQP.js","assets/Explore-RjzlyPUU.js","assets/Reels-CbhhUy8I.js","assets/Messages-Q3ZEUuLp.js","assets/Notifications-Dn1H98zK.js","assets/Profile-BUyeZm2N.js","assets/Community-CV56xbD0.js","assets/PostDetails-DT-UtGS3.js","assets/Settings-N7b-P8pJ.js","assets/HashtagFeed-CjqgopUe.js"])))=>i.map(i=>d[i]);
import{a as Wn}from"./rolldown-runtime-BaZ8gS7u.js";import{C as To,S as ft,T as Io,_ as Po,a as Lo,d as Fo,f as es,g as We,h as Oo,i as Bo,m as hr,p as ts,r as Ho,s as ie,u as Uo,v as vn,w as ns,y as bn}from"./framework-DIDnLsp9.js";import{a as Jt,i as qo,n as qt,o as Wo,r as Ct,t as rs}from"./query-DNidMcz3.js";import{t as Vo}from"./database-DlIwwAmc.js";import{$ as th,$n as Yo,$t as ss,A as Qo,At as as,B as Ko,Bn as Xo,C as os,Ct as nh,D as is,Dt as ls,E as rh,Et as cs,F as ds,Fn as Zo,Ft as Mt,G as Go,H as sh,Hn as us,I as fs,J as Jo,K as $o,Kn as ei,Kt as ti,L as ni,Ln as ms,M as hs,Mt as ri,N as si,Nt as ai,O as oi,Ot as ii,P as ps,Q as gs,Qn as li,R as ah,Rn as ci,Rt as di,S as vs,Sn as ui,St as bs,T as fi,Tn as pr,Tt as xs,U as ys,Un as ws,V as js,Vn as xn,W as ks,Wn as Vn,Wt as mi,Xt as hi,Y as pi,Z as Cs,_ as _s,_n as mt,_t as Ns,a as Ss,at as zs,b as gi,bn as vi,bt as bi,c as xi,cn as yi,ct as oh,d as wi,dt as ji,en as ki,er as Ci,et as As,f as Es,ft as Rs,g as Ms,gt as Ds,h as Ts,ht as Is,i as _i,it as ih,j as Ps,jt as lh,k as Ni,kn as Si,kt as zi,l as Ls,lt as Fs,m as Ai,mt as Os,n as Bs,nt as Hs,o as Us,ot as Ei,p as Ri,pt as qs,q as Mi,qn as gr,qt as Di,r as Ws,rn as Qt,rt as Ti,s as ch,st as Vs,tt as Ys,u as Ii,un as Pi,ut as Qs,v as Ks,vt as Xs,w as Li,wt as Fi,x as Oi,xn as Bi,xt as Hi,y as Ui,yt as Zs,z as Gs,zn as Js,zt as Tn}from"./ui-libs-BbdIqPKe.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}})();var qi=To(),g=Wn(Io(),1),Wi="https://dbkcedktqhueqnulnosq.supabase.co",Vi="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRia2NlZGt0cWh1ZXFudWxub3NxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njg5NzE1NTQsImV4cCI6MjA4NDU0NzU1NH0.m_Tv-H7o5mL1Nac6TH-S1JkS1x7ZN1AK_4Mt1hZlkvU";const Q=Vo(Wi,Vi);var Yi=ie();function $(...n){return Yo(Ci(n))}const Qi=()=>{const n=(0,Yi.c)(2),{pathname:e}=vn();let t;return n[0]!==e?(t=[e],n[0]=e,n[1]=t):t=n[1],(0,g.useEffect)(Xi,t),null},_n=n=>typeof n!="string"?!1:/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(n),Ki=(n,e)=>{const t=document.createElement("canvas"),r=n.naturalWidth/n.width,s=n.naturalHeight/n.height;t.width=e.width*r,t.height=e.height*s;const a=t.getContext("2d");return a?(a.imageSmoothingEnabled=!0,a.imageSmoothingQuality="high",a.drawImage(n,e.x*r,e.y*s,e.width*r,e.height*s,0,0,e.width*r,e.height*s),new Promise((o,i)=>{t.toBlob(d=>{if(!d){i(new Error("Canvas is empty"));return}o(d)},"image/jpeg",.95)})):Promise.reject(new Error("No 2d context"))},$s=n=>{if(!n)return"";const e=typeof n=="string"?new Date(n):n,t=new Date().getTime()-e.getTime(),r=Math.floor(t/1e3),s=Math.floor(r/60),a=Math.floor(s/60),o=Math.floor(a/24);return r<60?"Just now":s<60?`${s}m ago`:a<24?`${a}h ago`:o<7?`${o}d ago`:e.toLocaleDateString(void 0,{day:"2-digit",month:"2-digit",year:"2-digit"})},dh=n=>typeof n!="string"?!1:/[\u0980-\u09FF]/.test(n),uh=n=>{if(!n)return null;const e=n.match(/(https?:\/\/[^\s]+)/g);return e?e[0]:null};function Xi(){window.scrollTo(0,0)}const _t=n=>n?{id:n.id,handle:n.username,name:n.display_name,avatar:n.avatar_url||"/default-avatar.webp",cover:n.cover_url||"/welcome-banner.webp",verified:n.is_verified,bio:n.bio,location:n.location,website:n.website,follower_count:n.follower_count||0,following_count:n.following_count||0,lastSeen:n.last_seen_at}:null,Nt=n=>{if(!n)return null;const e=n.reposter_id||n.reposter_data?.id||n.reposted_by?.id,t=Math.random().toString(36).substring(2,9),r=`${n.feed_id||(e?`${n.id}-${e}`:`${n.id}-orig`)}-${t}`,s=_t(n.author_data||n.user);return s?{...n,feed_id:r,stats:{comments:n.comments_count||0,likes:n.likes_count||0,reposts:n.mirrors_count||0,shares:n.shares_count||0},user:s,community:n.community_data||n.communities?{...n.community_data||n.communities,avatar:(n.community_data||n.communities).avatar_url||(n.community_data||n.communities).avatar}:null,repostedBy:n.reposter_data?{handle:n.reposter_data.username,name:n.reposter_data.display_name,id:n.reposter_data.id}:n.reposted_by?{handle:n.reposted_by.username,name:n.reposted_by.display_name,id:n.reposted_by.id}:null,timeAgo:$s(n.created_at)}:null},ea=n=>{if(!n)return null;const e=_t(n.user);return e?{...n,stats:{likes:n.likes_count||0},user:e,timeAgo:$s(n.created_at)}:null},Zi=n=>n?{...n,user:n.actor?.username,avatar:n.actor?.avatar_url||"/default-avatar.webp"}:null,ta=n=>{if(!n)return null;const e=_t(n.user);return e?{...n,media:n.media_url,user:e}:null},$t=n=>n?{id:n.id,handle:n.handle,name:n.name,description:n.description,avatar:n.avatar_url||"/default-avatar.webp",cover:n.cover_url||"/welcome-banner.webp",membersCount:n.members_count||0,postsCount:n.posts_count||0,isPrivate:n.is_private,createdAt:n.created_at,type:"community",creatorId:n.creator_id}:null,na=n=>n?{id:n.id,conversation_id:n.conversation_id,sender_id:n.sender_id,content:n.content,type:n.type||"text",media:n.media||[],reply_to_id:n.reply_to_id,is_read:n.is_read,created_at:n.created_at}:null,Gi=(n,e)=>{if(!n||!n.conversation)return null;const t=n.conversation,r=t.participants.find(a=>a.user?.id!==e)||t.participants[0],s=t.messages?.filter(a=>!a.is_read&&a.sender_id!==e).length||0;return{id:t.id,user:_t(r?.user),lastMessage:t.last_message_content||"No messages yet",lastMessageAt:t.last_message_at,time:t.last_message_at?new Date(t.last_message_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"",unread:s}},fh=async(n,e=10)=>{const{data:t,error:r}=await Q.from("users").select("*").or(`username.ilike.%${n}%,display_name.ilike.%${n}%`).limit(e);if(r)throw r;return(t||[]).map(_t).filter(s=>s!==null)},ra=async(n,e="id")=>{let t=Q.from("users").select("*");e==="id"?t=t.eq("id",n):t=t.ilike("username",n);const{data:r,error:s}=await t.maybeSingle();if(s)throw s;return r?_t(r):null},Ji=n=>ra(n,"username"),At=async n=>{if(!n)return;const{error:e}=await Q.from("users").update({last_seen_at:new Date().toISOString()}).eq("id",n);if(e)throw e},$i=async(n,e)=>{const t={display_name:e.name,username:e.handle,avatar_url:e.avatar,bio:e.bio,cover_url:e.cover,website:e.website,location:e.location};Object.keys(t).forEach(s=>t[s]===void 0&&delete t[s]);const{error:r}=await Q.from("users").update(t).eq("id",n);if(r)throw r},el=async(n,e)=>{const{data:t}=await Q.from("follows").select("*").eq("follower_id",n).eq("following_id",e).maybeSingle();return t?(await Q.from("follows").delete().eq("follower_id",n).eq("following_id",e),!1):(await Q.from("follows").insert([{follower_id:n,following_id:e}]),!0)},tl=async(n,e)=>{if(!n)return!1;const{data:t}=await Q.from("follows").select("*").eq("follower_id",n).eq("following_id",e).maybeSingle();return!!t},mh=async(n,e=null,t=10)=>{let r=Q.from("follows").select(`
      created_at,
      user:users!follower_id (
        id,
        username,
        display_name,
        avatar_url,
        is_verified,
        bio
      )
    `).eq("following_id",n).order("created_at",{ascending:!1}).limit(t);e&&(r=r.lt("created_at",e));const{data:s,error:a}=await r;if(a)throw a;return(s||[]).map(o=>({..._t(o.user),followed_at:o.created_at}))},hh=async(n,e=null,t=10)=>{let r=Q.from("follows").select(`
      created_at,
      user:users!following_id (
        id,
        username,
        display_name,
        avatar_url,
        is_verified,
        bio
      )
    `).eq("follower_id",n).order("created_at",{ascending:!1}).limit(t);e&&(r=r.lt("created_at",e));const{data:s,error:a}=await r;if(a)throw a;return(s||[]).map(o=>({..._t(o.user),followed_at:o.created_at}))},nl=async n=>{const{data:e,error:t}=await Q.from("users").select("follower_count, following_count").eq("id",n).maybeSingle();return t||!e?{followers:0,following:0}:{followers:e.follower_count||0,following:e.following_count||0}};const rl=async(n=null,e=10)=>{let t=Q.from("unified_posts").select("*").order("sort_timestamp",{ascending:!1}).limit(e);n&&(t=t.lt("sort_timestamp",n));const{data:r,error:s}=await t;if(s)throw s;return(r||[]).map(Nt).filter(a=>a!==null)},ph=async n=>{const{data:e,error:t}=await Q.from("posts").select(`
            *,
            user:users!user_id (
                id,
                username,
                display_name,
                avatar_url,
                is_verified,
                bio,
                location,
                website,
                follower_count,
                following_count
            ),
            communities (
                id,
                handle,
                name,
                avatar_url
            ),
            quoted_post:posts!quoted_post_id (
                *,
                user:users!user_id (
                    id,
                    username,
                    display_name,
                    avatar_url,
                    is_verified
                )
            )
        `).eq("id",n).single();if(t)throw t;return Nt(e)},gh=async(n,e=null,t=10)=>{let r=Q.from("unified_posts").select("*").or(`user_id.eq.${n},reposter_id.eq.${n}`).order("sort_timestamp",{ascending:!1}).limit(t);e&&(r=r.lt("sort_timestamp",e));const{data:s,error:a}=await r;if(a)throw a;return(s||[]).map(Nt).filter(o=>o!==null)},sl=async({content:n,media:e=[],type:t="text",userId:r,poll:s=null,parentId:a=null,communityId:o=null})=>{const{data:i,error:d}=await Q.from("posts").insert([{user_id:r,content:n,media:e,type:t,poll:s,parent_id:a,community_id:o}]).select(`
            *,
            user:users!user_id (
                id,
                username,
                display_name,
                avatar_url,
                is_verified
            ),
            communities:community_id (
                id,
                handle,
                name,
                avatar_url
            )
        `);if(d)throw d;return Nt(i?.[0])},al=async n=>{const{error:e}=await Q.from("posts").delete().eq("id",n);if(e)throw e},ol=async(n,e)=>{const{error:t}=await Q.from("posts").update(e).eq("id",n);if(t)throw t},vh=async(n,e=null,t=10)=>{let r=Q.from("comments").select(`
            *,
            user:users!user_id (
                id,
                username,
                display_name,
                avatar_url,
                is_verified
            )
        `).eq("post_id",n).order("created_at",{ascending:!0}).limit(t);e&&(r=r.gt("created_at",e));const{data:s,error:a}=await r;if(a)throw a;return(s||[]).map(ea).filter(o=>o!==null)},bh=async(n,e,t,r=[])=>{const{data:s,error:a}=await Q.from("comments").insert([{post_id:n,user_id:e,content:t,media:r}]).select(`
            *,
            user:users!user_id (
                id,
                username,
                display_name,
                avatar_url,
                is_verified
            )
        `);if(a)throw a;return ea(s?.[0])},xh=async(n,e)=>{if(!n||!e)return!1;const{data:t}=await Q.from("likes").select("post_id").eq("post_id",n).eq("user_id",e).limit(1);return t&&t.length>0?(await Q.from("likes").delete().eq("post_id",n).eq("user_id",e),!1):(await Q.from("likes").insert([{post_id:n,user_id:e}]),!0)},yh=async(n,e)=>{if(!e||!n)return!1;const{data:t,error:r}=await Q.from("likes").select("post_id").eq("post_id",n).eq("user_id",e).limit(1);return r?(console.error("Error checking like status:",r),!1):t&&t.length>0},wh=async(n,e)=>{if(!n||!e)return!1;const{data:t}=await Q.from("reposts").select("post_id").eq("post_id",n).eq("user_id",e).limit(1);return t&&t.length>0?(await Q.from("reposts").delete().eq("post_id",n).eq("user_id",e),!1):(await Q.from("reposts").insert([{post_id:n,user_id:e}]),!0)},jh=async(n,e)=>{if(!e||!n)return!1;const{data:t,error:r}=await Q.from("reposts").select("post_id").eq("post_id",n).eq("user_id",e).limit(1);return r?(console.error("Error checking repost status:",r),!1):t&&t.length>0},kh=async(n,e=null,t=10,r=!1)=>{let s=Q.from("unified_posts").select("*").ilike("content",`%${n}%`);r&&(s=s.not("community_id","is",null).is("reposter_id",null)),s=s.order("sort_timestamp",{ascending:!1}).limit(t),e&&(s=s.lt("sort_timestamp",e));const{data:a,error:o}=await s;if(o)throw o;return(a||[]).map(Nt).filter(i=>i!==null)},Ch=async(n=null,e=10)=>{let t=Q.from("unified_posts").select("*").not("community_id","is",null).is("reposter_id",null).order("sort_timestamp",{ascending:!1}).limit(e);n&&(t=t.lt("sort_timestamp",n));const{data:r,error:s}=await t;if(s)throw s;return(r||[]).map(Nt).filter(a=>a!==null)},_h=async(n=null,e=10)=>{let t=Q.from("unified_posts").select("*").eq("type","video").order("sort_timestamp",{ascending:!1}).limit(e);n&&(t=t.lt("sort_timestamp",n));const{data:r,error:s}=await t;if(s)throw s;return(r||[]).map(Nt).filter(a=>a!==null)},Nh=async(n,e)=>{const{data:t}=await Q.from("conversation_participants").select("conversation_id").eq("user_id",n),r=(t||[]).map(i=>i.conversation_id),{data:s}=await Q.from("conversation_participants").select("conversation_id").eq("user_id",e).in("conversation_id",r).maybeSingle();if(s)return s.conversation_id;const{data:a,error:o}=await Q.from("conversations").insert({}).select().single();if(o)throw o;return await Q.from("conversation_participants").insert([{conversation_id:a.id,user_id:n},{conversation_id:a.id,user_id:e}]),a.id},il=async n=>{if(!n)return 0;const{data:e}=await Q.from("conversation_participants").select("conversation_id").eq("user_id",n),t=e?.map(a=>a.conversation_id)||[];if(t.length===0)return 0;const{count:r,error:s}=await Q.from("messages").select("*",{count:"exact",head:!0}).eq("is_read",!1).neq("sender_id",n).in("conversation_id",t);if(s)throw s;return r||0},ll=async(n,e)=>{if(!n||!e)return;const{error:t}=await Q.from("messages").update({is_read:!0}).eq("conversation_id",n).neq("sender_id",e).eq("is_read",!1);if(t)throw t},cl=async n=>{if(!n)return[];const{data:e,error:t}=await Q.from("conversation_participants").select(`
            conversation:conversations (
                id,
                last_message_at,
                last_message_content,
                participants:conversation_participants (
                    user:users (
                        id,
                        username,
                        display_name,
                        avatar_url,
                        last_seen_at
                    )
                ),
                messages (
                    id,
                    is_read,
                    sender_id
                )
            )
        `).eq("user_id",n);if(t)throw t;return(e||[]).map(r=>Gi(r,n)).filter(r=>r!==null).sort((r,s)=>r.lastMessageAt?s.lastMessageAt?new Date(s.lastMessageAt).getTime()-new Date(r.lastMessageAt).getTime():-1:1)},dl=async(n,e=null,t=20)=>{let r=Q.from("messages").select("*").eq("conversation_id",n).order("created_at",{ascending:!1}).limit(t);e&&(r=r.lt("created_at",e));const{data:s,error:a}=await r;if(a)throw a;return(s||[]).map(na).filter(o=>o!==null)},ul=async n=>{const{data:e,error:t}=await Q.from("message_reactions").select("*, message:messages!inner(conversation_id)").eq("message.conversation_id",n);if(t)throw t;return(e||[]).map(r=>({id:r.id,message_id:r.message_id,user_id:r.user_id,emoji:r.emoji,created_at:r.created_at}))},fl=async(n,e,t)=>{const{data:r}=await Q.from("message_reactions").select("*").eq("message_id",n).eq("user_id",e).maybeSingle();return r?r.emoji===t?(await Q.from("message_reactions").delete().eq("id",r.id),{action:"removed",emoji:t}):(await Q.from("message_reactions").update({emoji:t}).eq("id",r.id),{action:"updated",emoji:t}):(await Q.from("message_reactions").insert([{message_id:n,user_id:e,emoji:t}]),{action:"added",emoji:t})},ml=async(n,e,t,r="text",s=[],a=null)=>{const{data:o,error:i}=await Q.from("messages").insert([{conversation_id:n,sender_id:e,content:t,type:r,media:s,reply_to_id:a}]).select();if(i)throw i;return await Q.from("conversations").update({last_message_at:new Date().toISOString(),last_message_content:r==="image"||s&&s.length>0?"Sent an image":t}).eq("id",n),na(o?.[0])},hl=async n=>{const{error:e}=await Q.from("messages").delete().eq("id",n);if(e)throw e},Sh=async(n,e=null,t=10)=>{if(!n)return[];let r=Q.from("notifications").select(`
            *,
            actor:users!actor_id (
                username,
                avatar_url
            )
        `).eq("recipient_id",n).order("created_at",{ascending:!1}).limit(t);e&&(r=r.lt("created_at",e));const{data:s,error:a}=await r;if(a)throw a;return(s||[]).map(Zi).filter(o=>o!==null)},zh=async n=>{const{error:e}=await Q.from("notifications").update({is_read:!0}).eq("recipient_id",n).eq("is_read",!1);if(e)throw e},pl=async n=>{if(!n)return 0;const{count:e,error:t}=await Q.from("notifications").select("*",{count:"exact",head:!0}).eq("recipient_id",n).eq("is_read",!1);if(t)throw t;return e||0},Ah=async()=>{const{data:n,error:e}=await Q.from("stories").select(`
            *,
            user:users!user_id (
                id,
                username,
                display_name,
                avatar_url,
                is_verified
            )
        `).gt("expires_at",new Date().toISOString()).order("created_at",{ascending:!1});if(e)throw e;return(n||[]).map(ta).filter(t=>t!==null)},gl=async(n,e,t="image")=>{const{data:r,error:s}=await Q.from("stories").insert([{user_id:n,media_url:e,type:t}]).select(`
            *,
            user:users!user_id (
                id,
                username,
                display_name,
                avatar_url,
                is_verified
            )
        `);if(s)throw s;return ta(r?.[0])},Eh=async(n=null,e=10)=>{let t=Q.from("communities").select("*").order("created_at",{ascending:!1}).limit(e);n&&(t=t.lt("created_at",n));const{data:r,error:s}=await t;if(s)throw s;return(r||[]).map($t).filter(a=>a!==null)},Rh=async n=>{const{data:e,error:t}=await Q.from("communities").select("*").eq("handle",n).single();if(t)throw t;return $t(e)},Mh=async(n,e=null,t=10)=>{let r=Q.from("unified_posts").select("*").eq("community_id",n).is("reposter_id",null).order("sort_timestamp",{ascending:!1}).limit(t);e&&(r=r.lt("sort_timestamp",e));const{data:s,error:a}=await r;if(a)throw a;return(s||[]).map(Nt).filter(o=>o!==null)},vl=async(n,e)=>{const{data:t}=await Q.from("community_members").select("*").eq("community_id",n).eq("user_id",e).maybeSingle();if(t){const{error:r}=await Q.from("community_members").delete().eq("community_id",n).eq("user_id",e);if(r)throw r;return!1}else{const{error:r}=await Q.from("community_members").insert([{community_id:n,user_id:e}]);if(r)throw r;return!0}},bl=async(n,e)=>{if(!e)return null;const{data:t}=await Q.from("community_members").select("*").eq("community_id",n).eq("user_id",e).maybeSingle();return t},xl=async n=>{if(!n)return[];const{data:e,error:t}=await Q.from("community_members").select(`
      role,
      communities (*)
    `).eq("user_id",n);if(t)throw t;return(e||[]).map(r=>({...$t(r.communities),myRole:r.role}))},yl=async n=>{const{data:e,error:t}=await Q.from("communities").insert([n]).select().single();if(t)throw t;return $t(e)},wl=async(n,e)=>{const{data:t,error:r}=await Q.from("communities").update(e).eq("id",n).select().single();if(r)throw r;return $t(t)},jl=async(n,e="")=>{let t=Q.from("community_members").select(`
      role,
      user_id,
      users:user_id!inner (
        id,
        username,
        display_name,
        avatar_url,
        is_verified
      )
    `).eq("community_id",n);e&&(t=t.or(`username.ilike.%${e}%,display_name.ilike.%${e}%`,{foreignTable:"users"}));const{data:r,error:s}=await t.limit(20);if(s)throw s;return(r||[]).map(a=>({role:a.role,userId:a.user_id,user:a.users}))},kl=async(n,e,t)=>{const{data:r,error:s}=await Q.from("community_members").update({role:t}).eq("community_id",n).eq("user_id",e).select().single();if(s)throw s;return r},Cl=async(n=5)=>{const{data:e,error:t}=await Q.from("hashtags").select("*").order("usage_count",{ascending:!1}).limit(n);if(t)throw t;return e||[]},_l=async n=>{try{const e=`https://api.allorigins.win/raw?url=${encodeURIComponent(n)}`,t=await fetch(e);if(!t.ok)throw new Error("Failed to fetch preview");const r=await t.text(),s=new DOMParser().parseFromString(r,"text/html"),a=o=>s.querySelector(`meta[property="${o}"]`)?.getAttribute("content")||s.querySelector(`meta[name="${o}"]`)?.getAttribute("content");return{title:a("og:title")||s.title||n,description:a("og:description")||a("description")||"",image:a("og:image")||a("twitter:image")||"",siteName:a("og:site_name")||new URL(n).hostname,url:n}}catch(e){return console.error("Link preview error:",e),null}},Dh=async n=>{if(!n)return null;try{const{data:e}=await Q.from("link_previews").select("*").eq("url",n).maybeSingle();if(e)return Q.from("link_previews").update({last_used_at:new Date().toISOString()}).eq("url",n).then(()=>{}),{title:e.title,description:e.description,image:e.image,siteName:e.site_name,url:e.url};const t=await _l(n);return t?(Q.from("link_previews").insert([{url:t.url,title:t.title,description:t.description,image:t.image,site_name:t.siteName}]).then(({error:r})=>{r&&console.error("Cache save error:",r)}),t):null}catch(e){return console.error("Link preview cache error:",e),null}};function Nl(n,e){return e.forEach((function(t){t&&typeof t!="string"&&!Array.isArray(t)&&Object.keys(t).forEach((function(r){if(r!=="default"&&!(r in n)){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}}))})),Object.freeze(n)}function sa(n,e){return new Promise((function(t,r){let s;return Sl(n).then((function(a){try{return s=a,t(new Blob([e.slice(0,2),s,e.slice(2)],{type:"image/jpeg"}))}catch(o){return r(o)}}),r)}))}var Sl=n=>new Promise(((e,t)=>{const r=new FileReader;r.addEventListener("load",(({target:{result:s}})=>{const a=new DataView(s);let o=0;if(a.getUint16(o)!==65496)return t("not a valid JPEG");for(o+=2;;){const i=a.getUint16(o);if(i===65498)break;const d=a.getUint16(o+2);if(i===65505&&a.getUint32(o+4)===1165519206){const m=o+10;let u;switch(a.getUint16(m)){case 18761:u=!0;break;case 19789:u=!1;break;default:return t("TIFF header contains invalid endian")}if(a.getUint16(m+2,u)!==42)return t("TIFF header contains invalid version");const c=a.getUint32(m+4,u),f=m+c+2+12*a.getUint16(m+c,u);for(let h=m+c+2;h<f;h+=12)if(a.getUint16(h,u)==274){if(a.getUint16(h+2,u)!==3)return t("Orientation data type is invalid");if(a.getUint32(h+4,u)!==1)return t("Orientation data count is invalid");a.setUint16(h+8,1,u);break}return e(s.slice(o,o+2+d))}o+=2+d}return e(new Blob)})),r.readAsArrayBuffer(n)})),cn={},zl={get exports(){return cn},set exports(n){cn=n}};(function(n){var e,t,r={};zl.exports=r,r.parse=function(s,a){for(var o=r.bin.readUshort,i=r.bin.readUint,d=0,m={},u=new Uint8Array(s),c=u.length-4;i(u,c)!=101010256;)c--;d=c,d+=4;var f=o(u,d+=4);o(u,d+=2);var h=i(u,d+=2),p=i(u,d+=4);d+=4,d=p;for(var b=0;b<f;b++){i(u,d),d+=4,d+=4,d+=4,i(u,d+=4),h=i(u,d+=4);var x=i(u,d+=4),v=o(u,d+=4),_=o(u,d+2),N=o(u,d+4);d+=6;var S=i(u,d+=8);d+=4,d+=v+_+N,r._readLocal(u,S,m,h,x,a)}return m},r._readLocal=function(s,a,o,i,d,m){var u=r.bin.readUshort,c=r.bin.readUint;c(s,a),u(s,a+=4),u(s,a+=2);var f=u(s,a+=2);c(s,a+=2),c(s,a+=4),a+=4;var h=u(s,a+=8),p=u(s,a+=2);a+=2;var b=r.bin.readUTF8(s,a,h);if(a+=h,a+=p,m)o[b]={size:d,csize:i};else{var x=new Uint8Array(s.buffer,a);if(f==0)o[b]=new Uint8Array(x.buffer.slice(a,a+i));else{if(f!=8)throw"unknown compression method: "+f;var v=new Uint8Array(d);r.inflateRaw(x,v),o[b]=v}}},r.inflateRaw=function(s,a){return r.F.inflate(s,a)},r.inflate=function(s,a){return s[0],s[1],r.inflateRaw(new Uint8Array(s.buffer,s.byteOffset+2,s.length-6),a)},r.deflate=function(s,a){a??={level:6};var o=0,i=new Uint8Array(50+Math.floor(1.1*s.length));i[o]=120,i[o+1]=156,o+=2,o=r.F.deflateRaw(s,i,o,a.level);var d=r.adler(s,0,s.length);return i[o+0]=d>>>24&255,i[o+1]=d>>>16&255,i[o+2]=d>>>8&255,i[o+3]=d>>>0&255,new Uint8Array(i.buffer,0,o+4)},r.deflateRaw=function(s,a){a??={level:6};var o=new Uint8Array(50+Math.floor(1.1*s.length)),i=r.F.deflateRaw(s,o,i,a.level);return new Uint8Array(o.buffer,0,i)},r.encode=function(s,a){a??=!1;var o=0,i=r.bin.writeUint,d=r.bin.writeUshort,m={};for(var u in s){var c=!r._noNeed(u)&&!a,f=s[u],h=r.crc.crc(f,0,f.length);m[u]={cpr:c,usize:f.length,crc:h,file:c?r.deflateRaw(f):f}}for(var u in m)o+=m[u].file.length+30+46+2*r.bin.sizeUTF8(u);o+=22;var p=new Uint8Array(o),b=0,x=[];for(var u in m){var v=m[u];x.push(b),b=r._writeHeader(p,b,u,v,0)}var _=0,N=b;for(var u in m)v=m[u],x.push(b),b=r._writeHeader(p,b,u,v,1,x[_++]);var S=b-N;return i(p,b,101010256),b+=4,d(p,b+=4,_),d(p,b+=2,_),i(p,b+=2,S),i(p,b+=4,N),b+=4,b+=2,p.buffer},r._noNeed=function(s){var a=s.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(a)!=-1},r._writeHeader=function(s,a,o,i,d,m){var u=r.bin.writeUint,c=r.bin.writeUshort,f=i.file;return u(s,a,d==0?67324752:33639248),a+=4,d==1&&(a+=2),c(s,a,20),c(s,a+=2,0),c(s,a+=2,i.cpr?8:0),u(s,a+=2,0),u(s,a+=4,i.crc),u(s,a+=4,f.length),u(s,a+=4,i.usize),c(s,a+=4,r.bin.sizeUTF8(o)),c(s,a+=2,0),a+=2,d==1&&(a+=2,a+=2,u(s,a+=6,m),a+=4),a+=r.bin.writeUTF8(s,a,o),d==0&&(s.set(f,a),a+=f.length),a},r.crc={table:(function(){for(var s=new Uint32Array(256),a=0;a<256;a++){for(var o=a,i=0;i<8;i++)1&o?o=3988292384^o>>>1:o>>>=1;s[a]=o}return s})(),update:function(s,a,o,i){for(var d=0;d<i;d++)s=r.crc.table[255&(s^a[o+d])]^s>>>8;return s},crc:function(s,a,o){return 4294967295^r.crc.update(4294967295,s,a,o)}},r.adler=function(s,a,o){for(var i=1,d=0,m=a,u=a+o;m<u;){for(var c=Math.min(m+5552,u);m<c;)d+=i+=s[m++];i%=65521,d%=65521}return d<<16|i},r.bin={readUshort:function(s,a){return s[a]|s[a+1]<<8},writeUshort:function(s,a,o){s[a]=255&o,s[a+1]=o>>8&255},readUint:function(s,a){return 16777216*s[a+3]+(s[a+2]<<16|s[a+1]<<8|s[a])},writeUint:function(s,a,o){s[a]=255&o,s[a+1]=o>>8&255,s[a+2]=o>>16&255,s[a+3]=o>>24&255},readASCII:function(s,a,o){for(var i="",d=0;d<o;d++)i+=String.fromCharCode(s[a+d]);return i},writeASCII:function(s,a,o){for(var i=0;i<o.length;i++)s[a+i]=o.charCodeAt(i)},pad:function(s){return s.length<2?"0"+s:s},readUTF8:function(s,a,o){for(var i,d="",m=0;m<o;m++)d+="%"+r.bin.pad(s[a+m].toString(16));try{i=decodeURIComponent(d)}catch{return r.bin.readASCII(s,a,o)}return i},writeUTF8:function(s,a,o){for(var i=o.length,d=0,m=0;m<i;m++){var u=o.charCodeAt(m);if((4294967168&u)==0)s[a+d]=u,d++;else if((4294965248&u)==0)s[a+d]=192|u>>6,s[a+d+1]=128|u>>0&63,d+=2;else if((4294901760&u)==0)s[a+d]=224|u>>12,s[a+d+1]=128|u>>6&63,s[a+d+2]=128|u>>0&63,d+=3;else{if((4292870144&u)!=0)throw"e";s[a+d]=240|u>>18,s[a+d+1]=128|u>>12&63,s[a+d+2]=128|u>>6&63,s[a+d+3]=128|u>>0&63,d+=4}}return d},sizeUTF8:function(s){for(var a=s.length,o=0,i=0;i<a;i++){var d=s.charCodeAt(i);if((4294967168&d)==0)o++;else if((4294965248&d)==0)o+=2;else if((4294901760&d)==0)o+=3;else{if((4292870144&d)!=0)throw"e";o+=4}}return o}},r.F={},r.F.deflateRaw=function(s,a,o,i){var d=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][i],m=r.F.U,u=r.F._goodIndex;r.F._hash;var c=r.F._putsE,f=0,h=o<<3,p=0,b=s.length;if(i==0){for(;f<b;)c(a,h,f+(M=Math.min(65535,b-f))==b?1:0),h=r.F._copyExact(s,f,M,a,h+8),f+=M;return h>>>3}var x=m.lits,v=m.strt,_=m.prev,N=0,S=0,E=0,k=0,T=0,y=0;for(b>2&&(v[y=r.F._hash(s,0)]=0),f=0;f<b;f++){if(T=y,f+1<b-2){y=r.F._hash(s,f+1);var w=f+1&32767;_[w]=v[y],v[y]=w}if(p<=f){(N>14e3||S>26697)&&b-f>100&&(p<f&&(x[N]=f-p,N+=2,p=f),h=r.F._writeBlock(f==b-1||p==b?1:0,x,N,k,s,E,f-E,a,h),N=S=k=0,E=f);var A=0;f<b-2&&(A=r.F._bestMatch(s,f,_,T,Math.min(d[2],b-f),d[3]));var M=A>>>16,R=65535&A;if(A!=0){R=65535&A;var D=u(M=A>>>16,m.of0);m.lhst[257+D]++;var z=u(R,m.df0);m.dhst[z]++,k+=m.exb[D]+m.dxb[z],x[N]=M<<23|f-p,x[N+1]=R<<16|D<<8|z,N+=2,p=f+M}else m.lhst[s[f]]++;S++}}for(E==f&&s.length!=0||(p<f&&(x[N]=f-p,N+=2,p=f),h=r.F._writeBlock(1,x,N,k,s,E,f-E,a,h),N=0,S=0,N=S=k=0,E=f);(7&h)!=0;)h++;return h>>>3},r.F._bestMatch=function(s,a,o,i,d,m){var u=32767&a,c=o[u],f=u-c+32768&32767;if(c==u||i!=r.F._hash(s,a-f))return 0;for(var h=0,p=0,b=Math.min(32767,a);f<=b&&--m!=0&&c!=u;){if(h==0||s[a+h]==s[a+h-f]){var x=r.F._howLong(s,a,f);if(x>h){if(p=f,(h=x)>=d)break;f+2<x&&(x=f+2);for(var v=0,_=0;_<x-2;_++){var N=a-f+_+32768&32767,S=N-o[N]+32768&32767;S>v&&(v=S,c=N)}}}f+=(u=c)-(c=o[u])+32768&32767}return h<<16|p},r.F._howLong=function(s,a,o){if(s[a]!=s[a-o]||s[a+1]!=s[a+1-o]||s[a+2]!=s[a+2-o])return 0;var i=a,d=Math.min(s.length,a+258);for(a+=3;a<d&&s[a]==s[a-o];)a++;return a-i},r.F._hash=function(s,a){return(s[a]<<8|s[a+1])+(s[a+2]<<4)&65535},r.saved=0,r.F._writeBlock=function(s,a,o,i,d,m,u,c,f){var h,p,b,x,v,_,N,S,E,k=r.F.U,T=r.F._putsF,y=r.F._putsE;k.lhst[256]++,p=(h=r.F.getTrees())[0],b=h[1],x=h[2],v=h[3],_=h[4],N=h[5],S=h[6],E=h[7];var w=32+((f+3&7)==0?0:8-(f+3&7))+(u<<3),A=i+r.F.contSize(k.fltree,k.lhst)+r.F.contSize(k.fdtree,k.dhst),M=i+r.F.contSize(k.ltree,k.lhst)+r.F.contSize(k.dtree,k.dhst);M+=14+3*N+r.F.contSize(k.itree,k.ihst)+(2*k.ihst[16]+3*k.ihst[17]+7*k.ihst[18]);for(var R=0;R<286;R++)k.lhst[R]=0;for(R=0;R<30;R++)k.dhst[R]=0;for(R=0;R<19;R++)k.ihst[R]=0;var D=w<A&&w<M?0:A<M?1:2;if(T(c,f,s),T(c,f+1,D),f+=3,D==0){for(;(7&f)!=0;)f++;f=r.F._copyExact(d,m,u,c,f)}else{var z,L;if(D==1&&(z=k.fltree,L=k.fdtree),D==2){r.F.makeCodes(k.ltree,p),r.F.revCodes(k.ltree,p),r.F.makeCodes(k.dtree,b),r.F.revCodes(k.dtree,b),r.F.makeCodes(k.itree,x),r.F.revCodes(k.itree,x),z=k.ltree,L=k.dtree,y(c,f,v-257),y(c,f+=5,_-1),y(c,f+=5,N-4),f+=4;for(var j=0;j<N;j++)y(c,f+3*j,k.itree[1+(k.ordr[j]<<1)]);f+=3*N,f=r.F._codeTiny(S,k.itree,c,f),f=r.F._codeTiny(E,k.itree,c,f)}for(var C=m,P=0;P<o;P+=2){for(var I=a[P],F=I>>>23,q=C+(8388607&I);C<q;)f=r.F._writeLit(d[C++],z,c,f);if(F!=0){var H=a[P+1],U=H>>16,B=H>>8&255,O=255&H;y(c,f=r.F._writeLit(257+B,z,c,f),F-k.of0[B]),f+=k.exb[B],T(c,f=r.F._writeLit(O,L,c,f),U-k.df0[O]),f+=k.dxb[O],C+=F}}f=r.F._writeLit(256,z,c,f)}return f},r.F._copyExact=function(s,a,o,i,d){var m=d>>>3;return i[m]=o,i[m+1]=o>>>8,i[m+2]=255-i[m],i[m+3]=255-i[m+1],m+=4,i.set(new Uint8Array(s.buffer,a,o),m),d+(o+4<<3)},r.F.getTrees=function(){for(var s=r.F.U,a=r.F._hufTree(s.lhst,s.ltree,15),o=r.F._hufTree(s.dhst,s.dtree,15),i=[],d=r.F._lenCodes(s.ltree,i),m=[],u=r.F._lenCodes(s.dtree,m),c=0;c<i.length;c+=2)s.ihst[i[c]]++;for(c=0;c<m.length;c+=2)s.ihst[m[c]]++;for(var f=r.F._hufTree(s.ihst,s.itree,7),h=19;h>4&&s.itree[1+(s.ordr[h-1]<<1)]==0;)h--;return[a,o,f,d,u,h,i,m]},r.F.getSecond=function(s){for(var a=[],o=0;o<s.length;o+=2)a.push(s[o+1]);return a},r.F.nonZero=function(s){for(var a="",o=0;o<s.length;o+=2)s[o+1]!=0&&(a+=(o>>1)+",");return a},r.F.contSize=function(s,a){for(var o=0,i=0;i<a.length;i++)o+=a[i]*s[1+(i<<1)];return o},r.F._codeTiny=function(s,a,o,i){for(var d=0;d<s.length;d+=2){var m=s[d],u=s[d+1];i=r.F._writeLit(m,a,o,i);var c=m==16?2:m==17?3:7;m>15&&(r.F._putsE(o,i,u,c),i+=c)}return i},r.F._lenCodes=function(s,a){for(var o=s.length;o!=2&&s[o-1]==0;)o-=2;for(var i=0;i<o;i+=2){var d=s[i+1],m=i+3<o?s[i+3]:-1,u=i+5<o?s[i+5]:-1,c=i==0?-1:s[i-1];if(d==0&&m==d&&u==d){for(var f=i+5;f+2<o&&s[f+2]==d;)f+=2;(h=Math.min(f+1-i>>>1,138))<11?a.push(17,h-3):a.push(18,h-11),i+=2*h-2}else if(d==c&&m==d&&u==d){for(f=i+5;f+2<o&&s[f+2]==d;)f+=2;var h=Math.min(f+1-i>>>1,6);a.push(16,h-3),i+=2*h-2}else a.push(d,0)}return o>>>1},r.F._hufTree=function(s,a,o){var i=[],d=s.length,m=a.length,u=0;for(u=0;u<m;u+=2)a[u]=0,a[u+1]=0;for(u=0;u<d;u++)s[u]!=0&&i.push({lit:u,f:s[u]});var c=i.length,f=i.slice(0);if(c==0)return 0;if(c==1){var h=i[0].lit;return f=h==0?1:0,a[1+(h<<1)]=1,a[1+(f<<1)]=1,1}i.sort((function(S,E){return S.f-E.f}));var p=i[0],b=i[1],x=0,v=1,_=2;for(i[0]={lit:-1,f:p.f+b.f,l:p,r:b,d:0};v!=c-1;)p=x!=v&&(_==c||i[x].f<i[_].f)?i[x++]:i[_++],b=x!=v&&(_==c||i[x].f<i[_].f)?i[x++]:i[_++],i[v++]={lit:-1,f:p.f+b.f,l:p,r:b};var N=r.F.setDepth(i[v-1],0);for(N>o&&(r.F.restrictDepth(f,o,N),N=o),u=0;u<c;u++)a[1+(f[u].lit<<1)]=f[u].d;return N},r.F.setDepth=function(s,a){return s.lit!=-1?(s.d=a,a):Math.max(r.F.setDepth(s.l,a+1),r.F.setDepth(s.r,a+1))},r.F.restrictDepth=function(s,a,o){var i=0,d=1<<o-a,m=0;for(s.sort((function(c,f){return f.d==c.d?c.f-f.f:f.d-c.d})),i=0;i<s.length&&s[i].d>a;i++){var u=s[i].d;s[i].d=a,m+=d-(1<<o-u)}for(m>>>=o-a;m>0;)(u=s[i].d)<a?(s[i].d++,m-=1<<a-u-1):i++;for(;i>=0;i--)s[i].d==a&&m<0&&(s[i].d--,m++);m!=0&&console.log("debt left")},r.F._goodIndex=function(s,a){var o=0;return a[16|o]<=s&&(o|=16),a[8|o]<=s&&(o|=8),a[4|o]<=s&&(o|=4),a[2|o]<=s&&(o|=2),a[1|o]<=s&&(o|=1),o},r.F._writeLit=function(s,a,o,i){return r.F._putsF(o,i,a[s<<1]),i+a[1+(s<<1)]},r.F.inflate=function(s,a){var o=Uint8Array;if(s[0]==3&&s[1]==0)return a||new o(0);var i=r.F,d=i._bitsF,m=i._bitsE,u=i._decodeTiny,c=i.makeCodes,f=i.codes2map,h=i._get17,p=i.U,b=a==null;b&&(a=new o(s.length>>>2<<3));for(var x,v,_=0,N=0,S=0,E=0,k=0,T=0,y=0,w=0,A=0;_==0;)if(_=d(s,A,1),N=d(s,A+1,2),A+=3,N!=0){if(b&&(a=r.F._check(a,w+(1<<17))),N==1&&(x=p.flmap,v=p.fdmap,T=511,y=31),N==2){S=m(s,A,5)+257,E=m(s,A+5,5)+1,k=m(s,A+10,4)+4,A+=14;for(var M=0;M<38;M+=2)p.itree[M]=0,p.itree[M+1]=0;var R=1;for(M=0;M<k;M++){var D=m(s,A+3*M,3);p.itree[1+(p.ordr[M]<<1)]=D,D>R&&(R=D)}A+=3*k,c(p.itree,R),f(p.itree,R,p.imap),x=p.lmap,v=p.dmap,A=u(p.imap,(1<<R)-1,S+E,s,A,p.ttree);var z=i._copyOut(p.ttree,0,S,p.ltree);T=(1<<z)-1;var L=i._copyOut(p.ttree,S,E,p.dtree);y=(1<<L)-1,c(p.ltree,z),f(p.ltree,z,x),c(p.dtree,L),f(p.dtree,L,v)}for(;;){var j=x[h(s,A)&T];A+=15&j;var C=j>>>4;if(!(C>>>8))a[w++]=C;else{if(C==256)break;var P=w+C-254;if(C>264){var I=p.ldef[C-257];P=w+(I>>>3)+m(s,A,7&I),A+=7&I}var F=v[h(s,A)&y];A+=15&F;var q=F>>>4,H=p.ddef[q],U=(H>>>4)+d(s,A,15&H);for(A+=15&H,b&&(a=r.F._check(a,w+(1<<17)));w<P;)a[w]=a[w++-U],a[w]=a[w++-U],a[w]=a[w++-U],a[w]=a[w++-U];w=P}}}else{(7&A)!=0&&(A+=8-(7&A));var B=4+(A>>>3),O=s[B-4]|s[B-3]<<8;b&&(a=r.F._check(a,w+O)),a.set(new o(s.buffer,s.byteOffset+B,O),w),A=B+O<<3,w+=O}return a.length==w?a:a.slice(0,w)},r.F._check=function(s,a){var o=s.length;if(a<=o)return s;var i=new Uint8Array(Math.max(o<<1,a));return i.set(s,0),i},r.F._decodeTiny=function(s,a,o,i,d,m){for(var u=r.F._bitsE,c=r.F._get17,f=0;f<o;){var h=s[c(i,d)&a];d+=15&h;var p=h>>>4;if(p<=15)m[f]=p,f++;else{var b=0,x=0;p==16?(x=3+u(i,d,2),d+=2,b=m[f-1]):p==17?(x=3+u(i,d,3),d+=3):p==18&&(x=11+u(i,d,7),d+=7);for(var v=f+x;f<v;)m[f]=b,f++}}return d},r.F._copyOut=function(s,a,o,i){for(var d=0,m=0,u=i.length>>>1;m<o;){var c=s[m+a];i[m<<1]=0,i[1+(m<<1)]=c,c>d&&(d=c),m++}for(;m<u;)i[m<<1]=0,i[1+(m<<1)]=0,m++;return d},r.F.makeCodes=function(s,a){for(var o,i,d,m,u=r.F.U,c=s.length,f=u.bl_count,h=0;h<=a;h++)f[h]=0;for(h=1;h<c;h+=2)f[s[h]]++;var p=u.next_code;for(o=0,f[0]=0,i=1;i<=a;i++)o=o+f[i-1]<<1,p[i]=o;for(d=0;d<c;d+=2)(m=s[d+1])!=0&&(s[d]=p[m],p[m]++)},r.F.codes2map=function(s,a,o){for(var i=s.length,d=r.F.U.rev15,m=0;m<i;m+=2)if(s[m+1]!=0)for(var u=m>>1,c=s[m+1],f=u<<4|c,h=a-c,p=s[m]<<h,b=p+(1<<h);p!=b;)o[d[p]>>>15-a]=f,p++},r.F.revCodes=function(s,a){for(var o=r.F.U.rev15,i=15-a,d=0;d<s.length;d+=2)s[d]=o[s[d]<<a-s[d+1]]>>>i},r.F._putsE=function(s,a,o){o<<=7&a;var i=a>>>3;s[i]|=o,s[i+1]|=o>>>8},r.F._putsF=function(s,a,o){o<<=7&a;var i=a>>>3;s[i]|=o,s[i+1]|=o>>>8,s[i+2]|=o>>>16},r.F._bitsE=function(s,a,o){return(s[a>>>3]|s[1+(a>>>3)]<<8)>>>(7&a)&(1<<o)-1},r.F._bitsF=function(s,a,o){return(s[a>>>3]|s[1+(a>>>3)]<<8|s[2+(a>>>3)]<<16)>>>(7&a)&(1<<o)-1},r.F._get17=function(s,a){return(s[a>>>3]|s[1+(a>>>3)]<<8|s[2+(a>>>3)]<<16)>>>(7&a)},r.F._get25=function(s,a){return(s[a>>>3]|s[1+(a>>>3)]<<8|s[2+(a>>>3)]<<16|s[3+(a>>>3)]<<24)>>>(7&a)},r.F.U=(e=Uint16Array,t=Uint32Array,{next_code:new e(16),bl_count:new e(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new e(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new t(32),flmap:new e(512),fltree:[],fdmap:new e(32),fdtree:[],lmap:new e(32768),ltree:[],ttree:[],dmap:new e(32768),dtree:[],imap:new e(512),itree:[],rev15:new e(32768),lhst:new t(286),dhst:new t(30),ihst:new t(19),lits:new t(15e3),strt:new e(65536),prev:new e(32768)}),(function(){for(var s=r.F.U,a=0;a<32768;a++){var o=a;o=(4278255360&(o=(4042322160&(o=(3435973836&(o=(2863311530&o)>>>1|(1431655765&o)<<1))>>>2|(858993459&o)<<2))>>>4|(252645135&o)<<4))>>>8|(16711935&o)<<8,s.rev15[a]=(o>>>16|o<<16)>>>17}function i(d,m,u){for(;m--!=0;)d.push(0,u)}for(a=0;a<32;a++)s.ldef[a]=s.of0[a]<<3|s.exb[a],s.ddef[a]=s.df0[a]<<4|s.dxb[a];i(s.fltree,144,8),i(s.fltree,112,9),i(s.fltree,24,7),i(s.fltree,8,8),r.F.makeCodes(s.fltree,9),r.F.codes2map(s.fltree,9,s.flmap),r.F.revCodes(s.fltree,9),i(s.fdtree,32,5),r.F.makeCodes(s.fdtree,5),r.F.codes2map(s.fdtree,5,s.fdmap),r.F.revCodes(s.fdtree,5),i(s.itree,19,0),i(s.ltree,286,0),i(s.dtree,30,0),i(s.ttree,320,0)})()})();var Al=Nl({__proto__:null,default:cn},[cn]),at=(function(){var n={nextZero(u,c){for(;u[c]!=0;)c++;return c},readUshort:(u,c)=>u[c]<<8|u[c+1],writeUshort(u,c,f){u[c]=f>>8&255,u[c+1]=255&f},readUint:(u,c)=>16777216*u[c]+(u[c+1]<<16|u[c+2]<<8|u[c+3]),writeUint(u,c,f){u[c]=f>>24&255,u[c+1]=f>>16&255,u[c+2]=f>>8&255,u[c+3]=255&f},readASCII(u,c,f){let h="";for(let p=0;p<f;p++)h+=String.fromCharCode(u[c+p]);return h},writeASCII(u,c,f){for(let h=0;h<f.length;h++)u[c+h]=f.charCodeAt(h)},readBytes(u,c,f){const h=[];for(let p=0;p<f;p++)h.push(u[c+p]);return h},pad:u=>u.length<2?`0${u}`:u,readUTF8(u,c,f){let h,p="";for(let b=0;b<f;b++)p+=`%${n.pad(u[c+b].toString(16))}`;try{h=decodeURIComponent(p)}catch{return n.readASCII(u,c,f)}return h}};function e(u,c,f,h){const p=c*f,b=a(h),x=Math.ceil(c*b/8),v=new Uint8Array(4*p),_=new Uint32Array(v.buffer),{ctype:N}=h,{depth:S}=h,E=n.readUshort;if(N==6){const I=p<<2;if(S==8)for(var k=0;k<I;k+=4)v[k]=u[k],v[k+1]=u[k+1],v[k+2]=u[k+2],v[k+3]=u[k+3];if(S==16)for(k=0;k<I;k++)v[k]=u[k<<1]}else if(N==2){const I=h.tabs.tRNS;if(I==null){if(S==8)for(k=0;k<p;k++){var T=3*k;_[k]=255<<24|u[T+2]<<16|u[T+1]<<8|u[T]}if(S==16)for(k=0;k<p;k++)T=6*k,_[k]=255<<24|u[T+4]<<16|u[T+2]<<8|u[T]}else{var y=I[0];const F=I[1],q=I[2];if(S==8)for(k=0;k<p;k++){var w=k<<2;T=3*k,_[k]=255<<24|u[T+2]<<16|u[T+1]<<8|u[T],u[T]==y&&u[T+1]==F&&u[T+2]==q&&(v[w+3]=0)}if(S==16)for(k=0;k<p;k++)w=k<<2,T=6*k,_[k]=255<<24|u[T+4]<<16|u[T+2]<<8|u[T],E(u,T)==y&&E(u,T+2)==F&&E(u,T+4)==q&&(v[w+3]=0)}}else if(N==3){const I=h.tabs.PLTE,F=h.tabs.tRNS,q=F?F.length:0;if(S==1)for(var A=0;A<f;A++){var M=A*x,R=A*c;for(k=0;k<c;k++){w=R+k<<2;var D=3*(z=u[M+(k>>3)]>>7-((7&k)<<0)&1);v[w]=I[D],v[w+1]=I[D+1],v[w+2]=I[D+2],v[w+3]=z<q?F[z]:255}}if(S==2)for(A=0;A<f;A++)for(M=A*x,R=A*c,k=0;k<c;k++)w=R+k<<2,D=3*(z=u[M+(k>>2)]>>6-((3&k)<<1)&3),v[w]=I[D],v[w+1]=I[D+1],v[w+2]=I[D+2],v[w+3]=z<q?F[z]:255;if(S==4)for(A=0;A<f;A++)for(M=A*x,R=A*c,k=0;k<c;k++)w=R+k<<2,D=3*(z=u[M+(k>>1)]>>4-((1&k)<<2)&15),v[w]=I[D],v[w+1]=I[D+1],v[w+2]=I[D+2],v[w+3]=z<q?F[z]:255;if(S==8)for(k=0;k<p;k++){var z;w=k<<2,D=3*(z=u[k]),v[w]=I[D],v[w+1]=I[D+1],v[w+2]=I[D+2],v[w+3]=z<q?F[z]:255}}else if(N==4){if(S==8)for(k=0;k<p;k++){w=k<<2;var L=u[j=k<<1];v[w]=L,v[w+1]=L,v[w+2]=L,v[w+3]=u[j+1]}if(S==16)for(k=0;k<p;k++){var j;w=k<<2,L=u[j=k<<2],v[w]=L,v[w+1]=L,v[w+2]=L,v[w+3]=u[j+2]}}else if(N==0)for(y=h.tabs.tRNS?h.tabs.tRNS:-1,A=0;A<f;A++){const I=A*x,F=A*c;if(S==1)for(var C=0;C<c;C++){var P=(L=255*(u[I+(C>>>3)]>>>7-(7&C)&1))==255*y?0:255;_[F+C]=P<<24|L<<16|L<<8|L}else if(S==2)for(C=0;C<c;C++)P=(L=85*(u[I+(C>>>2)]>>>6-((3&C)<<1)&3))==85*y?0:255,_[F+C]=P<<24|L<<16|L<<8|L;else if(S==4)for(C=0;C<c;C++)P=(L=17*(u[I+(C>>>1)]>>>4-((1&C)<<2)&15))==17*y?0:255,_[F+C]=P<<24|L<<16|L<<8|L;else if(S==8)for(C=0;C<c;C++)P=(L=u[I+C])==y?0:255,_[F+C]=P<<24|L<<16|L<<8|L;else if(S==16)for(C=0;C<c;C++)L=u[I+(C<<1)],P=E(u,I+(C<<1))==y?0:255,_[F+C]=P<<24|L<<16|L<<8|L}return v}function t(u,c,f,h){const p=a(u),b=Math.ceil(f*p/8),x=new Uint8Array((b+1+u.interlace)*h);return c=u.tabs.CgBI?s(c,x):r(c,x),u.interlace==0?c=o(c,u,0,f,h):u.interlace==1&&(c=(function(_,N){const S=N.width,E=N.height,k=a(N),T=k>>3,y=Math.ceil(S*k/8),w=new Uint8Array(E*y);let A=0;const M=[0,0,4,0,2,0,1],R=[0,4,0,2,0,1,0],D=[8,8,8,4,4,2,2],z=[8,8,4,4,2,2,1];let L=0;for(;L<7;){const C=D[L],P=z[L];let I=0,F=0,q=M[L];for(;q<E;)q+=C,F++;let H=R[L];for(;H<S;)H+=P,I++;const U=Math.ceil(I*k/8);o(_,N,A,I,F);let B=0,O=M[L];for(;O<E;){let V=R[L],X=A+B*U<<3;for(;V<S;){var j;if(k==1&&(j=(j=_[X>>3])>>7-(7&X)&1,w[O*y+(V>>3)]|=j<<7-((7&V)<<0)),k==2&&(j=(j=_[X>>3])>>6-(7&X)&3,w[O*y+(V>>2)]|=j<<6-((3&V)<<1)),k==4&&(j=(j=_[X>>3])>>4-(7&X)&15,w[O*y+(V>>1)]|=j<<4-((1&V)<<2)),k>=8){const Y=O*y+V*T;for(let W=0;W<T;W++)w[Y+W]=_[(X>>3)+W]}X+=k,V+=P}B++,O+=C}I*F!=0&&(A+=F*(1+U)),L+=1}return w})(c,u)),c}function r(u,c){return s(new Uint8Array(u.buffer,2,u.length-6),c)}var s=(function(){const u={H:{}};return u.H.N=function(c,f){const h=Uint8Array;let p,b,x=0,v=0,_=0,N=0,S=0,E=0,k=0,T=0,y=0;if(c[0]==3&&c[1]==0)return f||new h(0);const w=u.H,A=w.b,M=w.e,R=w.R,D=w.n,z=w.A,L=w.Z,j=w.m,C=f==null;for(C&&(f=new h(c.length>>>2<<5));x==0;)if(x=A(c,y,1),v=A(c,y+1,2),y+=3,v!=0){if(C&&(f=u.H.W(f,T+(1<<17))),v==1&&(p=j.J,b=j.h,E=511,k=31),v==2){_=M(c,y,5)+257,N=M(c,y+5,5)+1,S=M(c,y+10,4)+4,y+=14;let I=1;for(var P=0;P<38;P+=2)j.Q[P]=0,j.Q[P+1]=0;for(P=0;P<S;P++){const H=M(c,y+3*P,3);j.Q[1+(j.X[P]<<1)]=H,H>I&&(I=H)}y+=3*S,D(j.Q,I),z(j.Q,I,j.u),p=j.w,b=j.d,y=R(j.u,(1<<I)-1,_+N,c,y,j.v);const F=w.V(j.v,0,_,j.C);E=(1<<F)-1;const q=w.V(j.v,_,N,j.D);k=(1<<q)-1,D(j.C,F),z(j.C,F,p),D(j.D,q),z(j.D,q,b)}for(;;){const I=p[L(c,y)&E];y+=15&I;const F=I>>>4;if(!(F>>>8))f[T++]=F;else{if(F==256)break;{let q=T+F-254;if(F>264){const V=j.q[F-257];q=T+(V>>>3)+M(c,y,7&V),y+=7&V}const H=b[L(c,y)&k];y+=15&H;const U=H>>>4,B=j.c[U],O=(B>>>4)+A(c,y,15&B);for(y+=15&B;T<q;)f[T]=f[T++-O],f[T]=f[T++-O],f[T]=f[T++-O],f[T]=f[T++-O];T=q}}}}else{(7&y)!=0&&(y+=8-(7&y));const I=4+(y>>>3),F=c[I-4]|c[I-3]<<8;C&&(f=u.H.W(f,T+F)),f.set(new h(c.buffer,c.byteOffset+I,F),T),y=I+F<<3,T+=F}return f.length==T?f:f.slice(0,T)},u.H.W=function(c,f){const h=c.length;if(f<=h)return c;const p=new Uint8Array(h<<1);return p.set(c,0),p},u.H.R=function(c,f,h,p,b,x){const v=u.H.e,_=u.H.Z;let N=0;for(;N<h;){const S=c[_(p,b)&f];b+=15&S;const E=S>>>4;if(E<=15)x[N]=E,N++;else{let k=0,T=0;E==16?(T=3+v(p,b,2),b+=2,k=x[N-1]):E==17?(T=3+v(p,b,3),b+=3):E==18&&(T=11+v(p,b,7),b+=7);const y=N+T;for(;N<y;)x[N]=k,N++}}return b},u.H.V=function(c,f,h,p){let b=0,x=0;const v=p.length>>>1;for(;x<h;){const _=c[x+f];p[x<<1]=0,p[1+(x<<1)]=_,_>b&&(b=_),x++}for(;x<v;)p[x<<1]=0,p[1+(x<<1)]=0,x++;return b},u.H.n=function(c,f){const h=u.H.m,p=c.length;let b,x,v,_;const N=h.j;for(var S=0;S<=f;S++)N[S]=0;for(S=1;S<p;S+=2)N[c[S]]++;const E=h.K;for(b=0,N[0]=0,x=1;x<=f;x++)b=b+N[x-1]<<1,E[x]=b;for(v=0;v<p;v+=2)_=c[v+1],_!=0&&(c[v]=E[_],E[_]++)},u.H.A=function(c,f,h){const p=c.length,b=u.H.m.r;for(let x=0;x<p;x+=2)if(c[x+1]!=0){const v=x>>1,_=c[x+1],N=v<<4|_,S=f-_;let E=c[x]<<S;const k=E+(1<<S);for(;E!=k;)h[b[E]>>>15-f]=N,E++}},u.H.l=function(c,f){const h=u.H.m.r,p=15-f;for(let b=0;b<c.length;b+=2)c[b]=h[c[b]<<f-c[b+1]]>>>p},u.H.M=function(c,f,h){h<<=7&f;const p=f>>>3;c[p]|=h,c[p+1]|=h>>>8},u.H.I=function(c,f,h){h<<=7&f;const p=f>>>3;c[p]|=h,c[p+1]|=h>>>8,c[p+2]|=h>>>16},u.H.e=function(c,f,h){return(c[f>>>3]|c[1+(f>>>3)]<<8)>>>(7&f)&(1<<h)-1},u.H.b=function(c,f,h){return(c[f>>>3]|c[1+(f>>>3)]<<8|c[2+(f>>>3)]<<16)>>>(7&f)&(1<<h)-1},u.H.Z=function(c,f){return(c[f>>>3]|c[1+(f>>>3)]<<8|c[2+(f>>>3)]<<16)>>>(7&f)},u.H.i=function(c,f){return(c[f>>>3]|c[1+(f>>>3)]<<8|c[2+(f>>>3)]<<16|c[3+(f>>>3)]<<24)>>>(7&f)},u.H.m=(function(){const c=Uint16Array,f=Uint32Array;return{K:new c(16),j:new c(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new c(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new f(32),J:new c(512),_:[],h:new c(32),$:[],w:new c(32768),C:[],v:[],d:new c(32768),D:[],u:new c(512),Q:[],r:new c(32768),s:new f(286),Y:new f(30),a:new f(19),t:new f(15e3),k:new c(65536),g:new c(32768)}})(),(function(){const c=u.H.m;for(var f=0;f<32768;f++){let p=f;p=(2863311530&p)>>>1|(1431655765&p)<<1,p=(3435973836&p)>>>2|(858993459&p)<<2,p=(4042322160&p)>>>4|(252645135&p)<<4,p=(4278255360&p)>>>8|(16711935&p)<<8,c.r[f]=(p>>>16|p<<16)>>>17}function h(p,b,x){for(;b--!=0;)p.push(0,x)}for(f=0;f<32;f++)c.q[f]=c.S[f]<<3|c.T[f],c.c[f]=c.p[f]<<4|c.z[f];h(c._,144,8),h(c._,112,9),h(c._,24,7),h(c._,8,8),u.H.n(c._,9),u.H.A(c._,9,c.J),u.H.l(c._,9),h(c.$,32,5),u.H.n(c.$,5),u.H.A(c.$,5,c.h),u.H.l(c.$,5),h(c.Q,19,0),h(c.C,286,0),h(c.D,30,0),h(c.v,320,0)})(),u.H.N})();function a(u){return[1,null,3,1,2,null,4][u.ctype]*u.depth}function o(u,c,f,h,p){let b=a(c);const x=Math.ceil(h*b/8);let v,_;b=Math.ceil(b/8);let N=u[f],S=0;if(N>1&&(u[f]=[0,0,1][N-2]),N==3)for(S=b;S<x;S++)u[S+1]=u[S+1]+(u[S+1-b]>>>1)&255;for(let E=0;E<p;E++)if(v=f+E*x,_=v+E+1,N=u[_-1],S=0,N==0)for(;S<x;S++)u[v+S]=u[_+S];else if(N==1){for(;S<b;S++)u[v+S]=u[_+S];for(;S<x;S++)u[v+S]=u[_+S]+u[v+S-b]}else if(N==2)for(;S<x;S++)u[v+S]=u[_+S]+u[v+S-x];else if(N==3){for(;S<b;S++)u[v+S]=u[_+S]+(u[v+S-x]>>>1);for(;S<x;S++)u[v+S]=u[_+S]+(u[v+S-x]+u[v+S-b]>>>1)}else{for(;S<b;S++)u[v+S]=u[_+S]+i(0,u[v+S-x],0);for(;S<x;S++)u[v+S]=u[_+S]+i(u[v+S-b],u[v+S-x],u[v+S-b-x])}return u}function i(u,c,f){const h=u+c-f,p=h-u,b=h-c,x=h-f;return p*p<=b*b&&p*p<=x*x?u:b*b<=x*x?c:f}function d(u,c,f){f.width=n.readUint(u,c),c+=4,f.height=n.readUint(u,c),c+=4,f.depth=u[c],c++,f.ctype=u[c],c++,f.compress=u[c],c++,f.filter=u[c],c++,f.interlace=u[c],c++}function m(u,c,f,h,p,b,x,v,_){const N=Math.min(c,p),S=Math.min(f,b);let E=0,k=0;for(let L=0;L<S;L++)for(let j=0;j<N;j++)if(x>=0&&v>=0?(E=L*c+j<<2,k=(v+L)*p+x+j<<2):(E=(-v+L)*c-x+j<<2,k=L*p+j<<2),_==0)h[k]=u[E],h[k+1]=u[E+1],h[k+2]=u[E+2],h[k+3]=u[E+3];else if(_==1){var T=u[E+3]*.00392156862745098,y=u[E]*T,w=u[E+1]*T,A=u[E+2]*T,M=h[k+3]*(1/255),R=h[k]*M,D=h[k+1]*M,z=h[k+2]*M;const C=1-T,P=T+M*C,I=P==0?0:1/P;h[k+3]=255*P,h[k+0]=(y+R*C)*I,h[k+1]=(w+D*C)*I,h[k+2]=(A+z*C)*I}else if(_==2)T=u[E+3],y=u[E],w=u[E+1],A=u[E+2],M=h[k+3],R=h[k],D=h[k+1],z=h[k+2],T==M&&y==R&&w==D&&A==z?(h[k]=0,h[k+1]=0,h[k+2]=0,h[k+3]=0):(h[k]=y,h[k+1]=w,h[k+2]=A,h[k+3]=T);else if(_==3){if(T=u[E+3],y=u[E],w=u[E+1],A=u[E+2],M=h[k+3],R=h[k],D=h[k+1],z=h[k+2],T==M&&y==R&&w==D&&A==z)continue;if(T<220&&M>20)return!1}return!0}return{decode:function(c){const f=new Uint8Array(c);let h=8;const p=n,b=p.readUshort,x=p.readUint,v={tabs:{},frames:[]},_=new Uint8Array(f.length);let N,S=0,E=0;const k=[137,80,78,71,13,10,26,10];for(var T=0;T<8;T++)if(f[T]!=k[T])throw"The input is not a PNG file!";for(;h<f.length;){const L=p.readUint(f,h);h+=4;const j=p.readASCII(f,h,4);if(h+=4,j=="IHDR")d(f,h,v);else if(j=="iCCP"){for(var y=h;f[y]!=0;)y++;p.readASCII(f,h,y-h),f[y+1];const C=f.slice(y+2,h+L);let P=null;try{P=r(C)}catch{P=s(C)}v.tabs[j]=P}else if(j=="CgBI")v.tabs[j]=f.slice(h,h+4);else if(j=="IDAT"){for(T=0;T<L;T++)_[S+T]=f[h+T];S+=L}else if(j=="acTL")v.tabs[j]={num_frames:x(f,h),num_plays:x(f,h+4)},N=new Uint8Array(f.length);else if(j=="fcTL"){E!=0&&((z=v.frames[v.frames.length-1]).data=t(v,N.slice(0,E),z.rect.width,z.rect.height),E=0);const C={x:x(f,h+12),y:x(f,h+16),width:x(f,h+4),height:x(f,h+8)};let P=b(f,h+22);P=b(f,h+20)/(P==0?100:P);const I={rect:C,delay:Math.round(1e3*P),dispose:f[h+24],blend:f[h+25]};v.frames.push(I)}else if(j=="fdAT"){for(T=0;T<L-4;T++)N[E+T]=f[h+T+4];E+=L-4}else if(j=="pHYs")v.tabs[j]=[p.readUint(f,h),p.readUint(f,h+4),f[h+8]];else if(j=="cHRM")for(v.tabs[j]=[],T=0;T<8;T++)v.tabs[j].push(p.readUint(f,h+4*T));else if(j=="tEXt"||j=="zTXt"){v.tabs[j]??(v.tabs[j]={});var w=p.nextZero(f,h),A=p.readASCII(f,h,w-h),M=h+L-w-1;if(j=="tEXt")D=p.readASCII(f,w+1,M);else{var R=r(f.slice(w+2,w+2+M));D=p.readUTF8(R,0,R.length)}v.tabs[j][A]=D}else if(j=="iTXt"){v.tabs[j]??(v.tabs[j]={}),w=0,y=h,w=p.nextZero(f,y),A=p.readASCII(f,y,w-y);const C=f[y=w+1];var D;f[y+1],y+=2,w=p.nextZero(f,y),p.readASCII(f,y,w-y),y=w+1,w=p.nextZero(f,y),p.readUTF8(f,y,w-y),M=L-((y=w+1)-h),C==0?D=p.readUTF8(f,y,M):(R=r(f.slice(y,y+M)),D=p.readUTF8(R,0,R.length)),v.tabs[j][A]=D}else if(j=="PLTE")v.tabs[j]=p.readBytes(f,h,L);else if(j=="hIST"){const C=v.tabs.PLTE.length/3;for(v.tabs[j]=[],T=0;T<C;T++)v.tabs[j].push(b(f,h+2*T))}else if(j=="tRNS")v.ctype==3?v.tabs[j]=p.readBytes(f,h,L):v.ctype==0?v.tabs[j]=b(f,h):v.ctype==2&&(v.tabs[j]=[b(f,h),b(f,h+2),b(f,h+4)]);else if(j=="gAMA")v.tabs[j]=p.readUint(f,h)/1e5;else if(j=="sRGB")v.tabs[j]=f[h];else if(j=="bKGD")v.ctype==0||v.ctype==4?v.tabs[j]=[b(f,h)]:v.ctype==2||v.ctype==6?v.tabs[j]=[b(f,h),b(f,h+2),b(f,h+4)]:v.ctype==3&&(v.tabs[j]=f[h]);else if(j=="IEND")break;h+=L,p.readUint(f,h),h+=4}var z;return E!=0&&((z=v.frames[v.frames.length-1]).data=t(v,N.slice(0,E),z.rect.width,z.rect.height)),v.data=t(v,_,v.width,v.height),delete v.compress,delete v.interlace,delete v.filter,v},toRGBA8:function(c){const f=c.width,h=c.height;if(c.tabs.acTL==null)return[e(c.data,f,h,c).buffer];const p=[];c.frames[0].data??(c.frames[0].data=c.data);const b=f*h*4,x=new Uint8Array(b),v=new Uint8Array(b),_=new Uint8Array(b);for(let S=0;S<c.frames.length;S++){const E=c.frames[S],k=E.rect.x,T=E.rect.y,y=E.rect.width,w=E.rect.height,A=e(E.data,y,w,c);if(S!=0)for(var N=0;N<b;N++)_[N]=x[N];if(E.blend==0?m(A,y,w,x,f,h,k,T,0):E.blend==1&&m(A,y,w,x,f,h,k,T,1),p.push(x.buffer.slice(0)),E.dispose!=0){if(E.dispose==1)m(v,y,w,x,f,h,k,T,0);else if(E.dispose==2)for(N=0;N<b;N++)x[N]=_[N]}}return p},_paeth:i,_copyTile:m,_bin:n}})();(function(){const{_copyTile:n}=at,{_bin:e}=at,t=at._paeth;var r={table:(function(){const y=new Uint32Array(256);for(let w=0;w<256;w++){let A=w;for(let M=0;M<8;M++)1&A?A=3988292384^A>>>1:A>>>=1;y[w]=A}return y})(),update(y,w,A,M){for(let R=0;R<M;R++)y=r.table[255&(y^w[A+R])]^y>>>8;return y},crc:(y,w,A)=>4294967295^r.update(4294967295,y,w,A)};function s(y,w,A,M){w[A]+=y[0]*M>>4,w[A+1]+=y[1]*M>>4,w[A+2]+=y[2]*M>>4,w[A+3]+=y[3]*M>>4}function a(y){return Math.max(0,Math.min(255,y))}function o(y,w){const A=y[0]-w[0],M=y[1]-w[1],R=y[2]-w[2],D=y[3]-w[3];return A*A+M*M+R*R+D*D}function i(y,w,A,M,R,D,z){z??=1;const L=M.length,j=[];for(var C=0;C<L;C++){const O=M[C];j.push([O>>>0&255,O>>>8&255,O>>>16&255,O>>>24&255])}for(C=0;C<L;C++){let O=4294967295;for(var P=0,I=0;I<L;I++){var F=o(j[C],j[I]);I!=C&&F<O&&(O=F,P=I)}}const q=new Uint32Array(R.buffer),H=new Int16Array(w*A*4),U=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(C=0;C<U.length;C++)U[C]=255*((U[C]+.5)/16-.5);for(let O=0;O<A;O++)for(let V=0;V<w;V++){var B;C=4*(O*w+V),z!=2?B=[a(y[C]+H[C]),a(y[C+1]+H[C+1]),a(y[C+2]+H[C+2]),a(y[C+3]+H[C+3])]:(F=U[4*(3&O)+(3&V)],B=[a(y[C]+F),a(y[C+1]+F),a(y[C+2]+F),a(y[C+3]+F)]),P=0;let X=16777215;for(I=0;I<L;I++){const G=o(B,j[I]);G<X&&(X=G,P=I)}const Y=j[P],W=[B[0]-Y[0],B[1]-Y[1],B[2]-Y[2],B[3]-Y[3]];z==1&&(V!=w-1&&s(W,H,C+4,7),O!=A-1&&(V!=0&&s(W,H,C+4*w-4,3),s(W,H,C+4*w,5),V!=w-1&&s(W,H,C+4*w+4,1))),D[C>>2]=P,q[C>>2]=M[P]}}function d(y,w,A,M,R){R??={};const{crc:D}=r,z=e.writeUint,L=e.writeUshort,j=e.writeASCII;let C=8;const P=y.frames.length>1;let I,F=!1,q=33+(P?20:0);if(R.sRGB!=null&&(q+=13),R.pHYs!=null&&(q+=21),R.iCCP!=null&&(I=pako.deflate(R.iCCP),q+=21+I.length+4),y.ctype==3){for(var H=y.plte.length,U=0;U<H;U++)y.plte[U]>>>24!=255&&(F=!0);q+=8+3*H+4+(F?8+1*H+4:0)}for(var B=0;B<y.frames.length;B++)P&&(q+=38),q+=(Y=y.frames[B]).cimg.length+12,B!=0&&(q+=4);q+=12;const O=new Uint8Array(q),V=[137,80,78,71,13,10,26,10];for(U=0;U<8;U++)O[U]=V[U];if(z(O,C,13),C+=4,j(O,C,"IHDR"),C+=4,z(O,C,w),C+=4,z(O,C,A),C+=4,O[C]=y.depth,C++,O[C]=y.ctype,C++,O[C]=0,C++,O[C]=0,C++,O[C]=0,C++,z(O,C,D(O,C-17,17)),C+=4,R.sRGB!=null&&(z(O,C,1),C+=4,j(O,C,"sRGB"),C+=4,O[C]=R.sRGB,C++,z(O,C,D(O,C-5,5)),C+=4),R.iCCP!=null){const W=13+I.length;z(O,C,W),C+=4,j(O,C,"iCCP"),C+=4,j(O,C,"ICC profile"),C+=11,C+=2,O.set(I,C),C+=I.length,z(O,C,D(O,C-(W+4),W+4)),C+=4}if(R.pHYs!=null&&(z(O,C,9),C+=4,j(O,C,"pHYs"),C+=4,z(O,C,R.pHYs[0]),C+=4,z(O,C,R.pHYs[1]),C+=4,O[C]=R.pHYs[2],C++,z(O,C,D(O,C-13,13)),C+=4),P&&(z(O,C,8),C+=4,j(O,C,"acTL"),C+=4,z(O,C,y.frames.length),C+=4,z(O,C,R.loop!=null?R.loop:0),C+=4,z(O,C,D(O,C-12,12)),C+=4),y.ctype==3){for(z(O,C,3*(H=y.plte.length)),C+=4,j(O,C,"PLTE"),C+=4,U=0;U<H;U++){const W=3*U,G=y.plte[U],K=255&G,J=G>>>8&255,ue=G>>>16&255;O[C+W+0]=K,O[C+W+1]=J,O[C+W+2]=ue}if(C+=3*H,z(O,C,D(O,C-3*H-4,3*H+4)),C+=4,F){for(z(O,C,H),C+=4,j(O,C,"tRNS"),C+=4,U=0;U<H;U++)O[C+U]=y.plte[U]>>>24&255;C+=H,z(O,C,D(O,C-H-4,H+4)),C+=4}}let X=0;for(B=0;B<y.frames.length;B++){var Y=y.frames[B];P&&(z(O,C,26),C+=4,j(O,C,"fcTL"),C+=4,z(O,C,X++),C+=4,z(O,C,Y.rect.width),C+=4,z(O,C,Y.rect.height),C+=4,z(O,C,Y.rect.x),C+=4,z(O,C,Y.rect.y),C+=4,L(O,C,M[B]),C+=2,L(O,C,1e3),C+=2,O[C]=Y.dispose,C++,O[C]=Y.blend,C++,z(O,C,D(O,C-30,30)),C+=4);const W=Y.cimg;z(O,C,(H=W.length)+(B==0?0:4)),C+=4;const G=C;j(O,C,B==0?"IDAT":"fdAT"),C+=4,B!=0&&(z(O,C,X++),C+=4),O.set(W,C),C+=H,z(O,C,D(O,G,C-G)),C+=4}return z(O,C,0),C+=4,j(O,C,"IEND"),C+=4,z(O,C,D(O,C-4,4)),C+=4,O.buffer}function m(y,w,A){for(let M=0;M<y.frames.length;M++){const R=y.frames[M];R.rect.width;const D=R.rect.height,z=new Uint8Array(D*R.bpl+D);R.cimg=h(R.img,D,R.bpp,R.bpl,z,w,A)}}function u(y,w,A,M,R){const D=R[0],z=R[1],L=R[2],j=R[3],C=R[4],P=R[5];let I=6,F=8,q=255;for(var H=0;H<y.length;H++){const ge=new Uint8Array(y[H]);for(var U=ge.length,B=0;B<U;B+=4)q&=ge[B+3]}const O=q!=255,V=(function(ae,he,re,je,ke,le){const pe=[];for(var fe=0;fe<ae.length;fe++){const oe=new Uint8Array(ae[fe]),Se=new Uint32Array(oe.buffer);var se;let Ne=0,Ae=0,Me=he,De=re,Ge=je?1:0;if(fe!=0){const ne=le||je||fe==1||pe[fe-2].dispose!=0?1:2;let _e=0,ze=1e9;for(let Re=0;Re<ne;Re++){var de=new Uint8Array(ae[fe-1-Re]);const Ie=new Uint32Array(ae[fe-1-Re]);let Te=he,Ee=re,Z=-1,xe=-1;for(let Ce=0;Ce<re;Ce++)for(let be=0;be<he;be++)Se[ye=Ce*he+be]!=Ie[ye]&&(be<Te&&(Te=be),be>Z&&(Z=be),Ce<Ee&&(Ee=Ce),Ce>xe&&(xe=Ce));Z==-1&&(Te=Ee=Z=xe=0),ke&&((1&Te)==1&&Te--,(1&Ee)==1&&Ee--);const ve=(Z-Te+1)*(xe-Ee+1);ve<ze&&(ze=ve,_e=Re,Ne=Te,Ae=Ee,Me=Z-Te+1,De=xe-Ee+1)}de=new Uint8Array(ae[fe-1-_e]),_e==1&&(pe[fe-1].dispose=2),se=new Uint8Array(Me*De*4),n(de,he,re,se,Me,De,-Ne,-Ae,0),Ge=n(oe,he,re,se,Me,De,-Ne,-Ae,3)?1:0,Ge==1?f(oe,he,re,se,{x:Ne,y:Ae,width:Me,height:De}):n(oe,he,re,se,Me,De,-Ne,-Ae,0)}else se=oe.slice(0);pe.push({rect:{x:Ne,y:Ae,width:Me,height:De},img:se,blend:Ge,dispose:0})}if(je)for(fe=0;fe<pe.length;fe++){if((ce=pe[fe]).blend==1)continue;const oe=ce.rect,Se=pe[fe-1].rect,Ne=Math.min(oe.x,Se.x),Ae=Math.min(oe.y,Se.y),Me={x:Ne,y:Ae,width:Math.max(oe.x+oe.width,Se.x+Se.width)-Ne,height:Math.max(oe.y+oe.height,Se.y+Se.height)-Ae};pe[fe-1].dispose=1,fe-1!=0&&c(ae,he,re,pe,fe-1,Me,ke),c(ae,he,re,pe,fe,Me,ke)}let me=0;if(ae.length!=1)for(var ye=0;ye<pe.length;ye++){var ce;me+=(ce=pe[ye]).rect.width*ce.rect.height}return pe})(y,w,A,D,z,L),X={},Y=[],W=[];if(M!=0){const ge=[];for(B=0;B<V.length;B++)ge.push(V[B].img.buffer);const ae=b((function(je){let ke=0;for(var le=0;le<je.length;le++)ke+=je[le].byteLength;const pe=new Uint8Array(ke);let fe=0;for(le=0;le<je.length;le++){const se=new Uint8Array(je[le]),de=se.length;for(let me=0;me<de;me+=4){let ye=se[me],ce=se[me+1],oe=se[me+2];const Se=se[me+3];Se==0&&(ye=ce=oe=0),pe[fe+me]=ye,pe[fe+me+1]=ce,pe[fe+me+2]=oe,pe[fe+me+3]=Se}fe+=de}return pe.buffer})(ge),M);for(B=0;B<ae.plte.length;B++)Y.push(ae.plte[B].est.rgba);let he=0;for(B=0;B<V.length;B++){const re=(K=V[B]).img.length;var G=new Uint8Array(ae.inds.buffer,he>>2,re>>2);W.push(G);const je=new Uint8Array(ae.abuf,he,re);P&&i(K.img,K.rect.width,K.rect.height,Y,je,G),K.img.set(je),he+=re}}else for(H=0;H<V.length;H++){var K=V[H];const ge=new Uint32Array(K.img.buffer);var J=K.rect.width;for(U=ge.length,G=new Uint8Array(U),W.push(G),B=0;B<U;B++){const ae=ge[B];if(B!=0&&ae==ge[B-1])G[B]=G[B-1];else if(B>J&&ae==ge[B-J])G[B]=G[B-J];else{let he=X[ae];if(he==null&&(X[ae]=he=Y.length,Y.push(ae),Y.length>=300))break;G[B]=he}}}const ue=Y.length;for(ue<=256&&C==0&&(F=ue<=2?1:ue<=4?2:ue<=16?4:8,F=Math.max(F,j)),H=0;H<V.length;H++){(K=V[H]).rect.x,K.rect.y,J=K.rect.width;const ge=K.rect.height;let ae=K.img;new Uint32Array(ae.buffer);let he=4*J,re=4;if(ue<=256&&C==0){he=Math.ceil(F*J/8);var ee=new Uint8Array(he*ge);const je=W[H];for(let ke=0;ke<ge;ke++){B=ke*he;const le=ke*J;if(F==8)for(var te=0;te<J;te++)ee[B+te]=je[le+te];else if(F==4)for(te=0;te<J;te++)ee[B+(te>>1)]|=je[le+te]<<4-4*(1&te);else if(F==2)for(te=0;te<J;te++)ee[B+(te>>2)]|=je[le+te]<<6-2*(3&te);else if(F==1)for(te=0;te<J;te++)ee[B+(te>>3)]|=je[le+te]<<7-1*(7&te)}ae=ee,I=3,re=1}else if(O==0&&V.length==1){ee=new Uint8Array(J*ge*3);const je=J*ge;for(B=0;B<je;B++){const ke=3*B,le=4*B;ee[ke]=ae[le],ee[ke+1]=ae[le+1],ee[ke+2]=ae[le+2]}ae=ee,I=2,re=3,he=3*J}K.img=ae,K.bpl=he,K.bpp=re}return{ctype:I,depth:F,plte:Y,frames:V}}function c(y,w,A,M,R,D,z){const L=Uint8Array,j=Uint32Array,C=new L(y[R-1]),P=new j(y[R-1]),I=R+1<y.length?new L(y[R+1]):null,F=new L(y[R]),q=new j(F.buffer);let H=w,U=A,B=-1,O=-1;for(let X=0;X<D.height;X++)for(let Y=0;Y<D.width;Y++){const W=D.x+Y,G=D.y+X,K=G*w+W,J=q[K];J==0||M[R-1].dispose==0&&P[K]==J&&(I==null||I[4*K+3]!=0)||(W<H&&(H=W),W>B&&(B=W),G<U&&(U=G),G>O&&(O=G))}B==-1&&(H=U=B=O=0),z&&((1&H)==1&&H--,(1&U)==1&&U--),D={x:H,y:U,width:B-H+1,height:O-U+1};const V=M[R];V.rect=D,V.blend=1,V.img=new Uint8Array(D.width*D.height*4),M[R-1].dispose==0?(n(C,w,A,V.img,D.width,D.height,-D.x,-D.y,0),f(F,w,A,V.img,D)):n(F,w,A,V.img,D.width,D.height,-D.x,-D.y,0)}function f(y,w,A,M,R){n(y,w,A,M,R.width,R.height,-R.x,-R.y,2)}function h(y,w,A,M,R,D,z){const L=[];let j,C=[0,1,2,3,4];D!=-1?C=[D]:(w*M>5e5||A==1)&&(C=[0]),z&&(j={level:0});const P=Al;for(var I=0;I<C.length;I++){for(let H=0;H<w;H++)p(R,y,H,M,A,C[I]);L.push(P.deflate(R,j))}let F,q=1e9;for(I=0;I<L.length;I++)L[I].length<q&&(F=I,q=L[I].length);return L[F]}function p(y,w,A,M,R,D){const z=A*M;let L=z+A;if(y[L]=D,L++,D==0)if(M<500)for(var j=0;j<M;j++)y[L+j]=w[z+j];else y.set(new Uint8Array(w.buffer,z,M),L);else if(D==1){for(j=0;j<R;j++)y[L+j]=w[z+j];for(j=R;j<M;j++)y[L+j]=w[z+j]-w[z+j-R]+256&255}else if(A==0){for(j=0;j<R;j++)y[L+j]=w[z+j];if(D==2)for(j=R;j<M;j++)y[L+j]=w[z+j];if(D==3)for(j=R;j<M;j++)y[L+j]=w[z+j]-(w[z+j-R]>>1)+256&255;if(D==4)for(j=R;j<M;j++)y[L+j]=w[z+j]-t(w[z+j-R],0,0)+256&255}else{if(D==2)for(j=0;j<M;j++)y[L+j]=w[z+j]+256-w[z+j-M]&255;if(D==3){for(j=0;j<R;j++)y[L+j]=w[z+j]+256-(w[z+j-M]>>1)&255;for(j=R;j<M;j++)y[L+j]=w[z+j]+256-(w[z+j-M]+w[z+j-R]>>1)&255}if(D==4){for(j=0;j<R;j++)y[L+j]=w[z+j]+256-t(0,w[z+j-M],0)&255;for(j=R;j<M;j++)y[L+j]=w[z+j]+256-t(w[z+j-R],w[z+j-M],w[z+j-R-M])&255}}}function b(y,w){const A=new Uint8Array(y),M=A.slice(0),R=new Uint32Array(M.buffer),D=x(M,w),z=D[0],L=D[1],j=A.length,C=new Uint8Array(j>>2);let P;if(A.length<2e7)for(var I=0;I<j;I+=4)P=v(z,F=A[I]*(1/255),q=A[I+1]*(1/255),H=A[I+2]*(1/255),U=A[I+3]*(1/255)),C[I>>2]=P.ind,R[I>>2]=P.est.rgba;else for(I=0;I<j;I+=4){var F=A[I]*.00392156862745098,q=A[I+1]*(1/255),H=A[I+2]*(1/255),U=A[I+3]*(1/255);for(P=z;P.left;)P=_(P.est,F,q,H,U)<=0?P.left:P.right;C[I>>2]=P.ind,R[I>>2]=P.est.rgba}return{abuf:M.buffer,inds:C,plte:L}}function x(y,w,A){A??=1e-4;const M=new Uint32Array(y.buffer),R={i0:0,i1:y.length,bst:null,est:null,tdst:0,left:null,right:null};R.bst=E(y,R.i0,R.i1),R.est=k(R.bst);const D=[R];for(;D.length<w;){let L=0,j=0;for(var z=0;z<D.length;z++)D[z].est.L>L&&(L=D[z].est.L,j=z);if(L<A)break;const C=D[j],P=N(y,M,C.i0,C.i1,C.est.e,C.est.eMq255);if(C.i0>=P||C.i1<=P){C.est.L=0;continue}const I={i0:C.i0,i1:P,bst:null,est:null,tdst:0,left:null,right:null};I.bst=E(y,I.i0,I.i1),I.est=k(I.bst);const F={i0:P,i1:C.i1,bst:null,est:null,tdst:0,left:null,right:null};for(F.bst={R:[],m:[],N:C.bst.N-I.bst.N},z=0;z<16;z++)F.bst.R[z]=C.bst.R[z]-I.bst.R[z];for(z=0;z<4;z++)F.bst.m[z]=C.bst.m[z]-I.bst.m[z];F.est=k(F.bst),C.left=I,C.right=F,D[j]=I,D.push(F)}for(D.sort(((L,j)=>j.bst.N-L.bst.N)),z=0;z<D.length;z++)D[z].ind=z;return[R,D]}function v(y,w,A,M,R){if(y.left==null)return y.tdst=(function(I,F,q,H,U){const B=F-I[0],O=q-I[1],V=H-I[2],X=U-I[3];return B*B+O*O+V*V+X*X})(y.est.q,w,A,M,R),y;const D=_(y.est,w,A,M,R);let z=y.left,L=y.right;D>0&&(z=y.right,L=y.left);const j=v(z,w,A,M,R);if(j.tdst<=D*D)return j;const C=v(L,w,A,M,R);return C.tdst<j.tdst?C:j}function _(y,w,A,M,R){const{e:D}=y;return D[0]*w+D[1]*A+D[2]*M+D[3]*R-y.eMq}function N(y,w,A,M,R,D){for(M-=4;A<M;){for(;S(y,A,R)<=D;)A+=4;for(;S(y,M,R)>D;)M-=4;if(A>=M)break;const z=w[A>>2];w[A>>2]=w[M>>2],w[M>>2]=z,A+=4,M-=4}for(;S(y,A,R)>D;)A-=4;return A+4}function S(y,w,A){return y[w]*A[0]+y[w+1]*A[1]+y[w+2]*A[2]+y[w+3]*A[3]}function E(y,w,A){const M=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],R=[0,0,0,0],D=A-w>>2;for(let z=w;z<A;z+=4){const L=y[z]*.00392156862745098,j=y[z+1]*(1/255),C=y[z+2]*(1/255),P=y[z+3]*(1/255);R[0]+=L,R[1]+=j,R[2]+=C,R[3]+=P,M[0]+=L*L,M[1]+=L*j,M[2]+=L*C,M[3]+=L*P,M[5]+=j*j,M[6]+=j*C,M[7]+=j*P,M[10]+=C*C,M[11]+=C*P,M[15]+=P*P}return M[4]=M[1],M[8]=M[2],M[9]=M[6],M[12]=M[3],M[13]=M[7],M[14]=M[11],{R:M,m:R,N:D}}function k(y){const{R:w}=y,{m:A}=y,{N:M}=y,R=A[0],D=A[1],z=A[2],L=A[3],j=M==0?0:1/M,C=[w[0]-R*R*j,w[1]-R*D*j,w[2]-R*z*j,w[3]-R*L*j,w[4]-D*R*j,w[5]-D*D*j,w[6]-D*z*j,w[7]-D*L*j,w[8]-z*R*j,w[9]-z*D*j,w[10]-z*z*j,w[11]-z*L*j,w[12]-L*R*j,w[13]-L*D*j,w[14]-L*z*j,w[15]-L*L*j],P=C,I=T;let F=[Math.random(),Math.random(),Math.random(),Math.random()],q=0,H=0;if(M!=0)for(let B=0;B<16&&(F=I.multVec(P,F),H=Math.sqrt(I.dot(F,F)),F=I.sml(1/H,F),!(B!=0&&Math.abs(H-q)<1e-9));B++)q=H;const U=[R*j,D*j,z*j,L*j];return{Cov:C,q:U,e:F,L:q,eMq255:I.dot(I.sml(255,U),F),eMq:I.dot(F,U),rgba:(Math.round(255*U[3])<<24|Math.round(255*U[2])<<16|Math.round(255*U[1])<<8|Math.round(255*U[0])<<0)>>>0}}var T={multVec:(y,w)=>[y[0]*w[0]+y[1]*w[1]+y[2]*w[2]+y[3]*w[3],y[4]*w[0]+y[5]*w[1]+y[6]*w[2]+y[7]*w[3],y[8]*w[0]+y[9]*w[1]+y[10]*w[2]+y[11]*w[3],y[12]*w[0]+y[13]*w[1]+y[14]*w[2]+y[15]*w[3]],dot:(y,w)=>y[0]*w[0]+y[1]*w[1]+y[2]*w[2]+y[3]*w[3],sml:(y,w)=>[y*w[0],y*w[1],y*w[2],y*w[3]]};at.encode=function(w,A,M,R,D,z,L){R??=0,L??=!1;const j=u(w,A,M,R,[!1,!1,!1,0,L,!1]);return m(j,-1),d(j,A,M,D,z)},at.encodeLL=function(w,A,M,R,D,z,L,j){const C={ctype:0+(R==1?0:2)+(D==0?0:4),depth:z,frames:[]},P=(R+D)*z,I=P*A;for(let F=0;F<w.length;F++)C.frames.push({rect:{x:0,y:0,width:A,height:M},img:new Uint8Array(w[F]),blend:0,dispose:1,bpp:Math.ceil(P/8),bpl:Math.ceil(I/8)});return m(C,0,!0),d(C,A,M,L,j)},at.encode.compress=u,at.encode.dither=i,at.quantize=b,at.quantize.getKDtree=x,at.quantize.getNearest=v})();var aa={toArrayBuffer(n,e){const t=n.width,r=n.height,s=t<<2,a=n.getContext("2d").getImageData(0,0,t,r),o=new Uint32Array(a.data.buffer),i=(32*t+31)/32<<2,d=i*r,m=122+d,u=new ArrayBuffer(m),c=new DataView(u),f=1<<20;let h,p,b,x,v=f,_=0,N=0,S=0;function E(y){c.setUint16(N,y,!0),N+=2}function k(y){c.setUint32(N,y,!0),N+=4}function T(y){N+=y}E(19778),k(m),T(4),k(122),k(108),k(t),k(-r>>>0),E(1),E(32),k(3),k(d),k(2835),k(2835),T(8),k(16711680),k(65280),k(255),k(4278190080),k(1466527264),(function y(){for(;_<r&&v>0;){for(x=122+_*i,h=0;h<s;)v--,p=o[S++],b=p>>>24,c.setUint32(x+h,p<<8|b),h+=4;_++}S<o.length?(v=f,setTimeout(y,aa._dly)):e(u)})()},toBlob(n,e){this.toArrayBuffer(n,(t=>{e(new Blob([t],{type:"image/bmp"}))}))},_dly:9},Ye={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},El={[Ye.CHROME]:16384,[Ye.FIREFOX]:11180,[Ye.DESKTOP_SAFARI]:16384,[Ye.IE]:8192,[Ye.IOS]:4096,[Ye.ETC]:8192},Yn=typeof window<"u",oa=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,dn=Yn&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),Rl=(Yn||oa)&&(dn&&dn.getOriginalSymbol(window,"File")||typeof File<"u"&&File),ia=(Yn||oa)&&(dn&&dn.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function Qn(n,e,t=Date.now()){return new Promise((r=>{const s=n.split(","),a=s[0].match(/:(.*?);/)[1],o=globalThis.atob(s[1]);let i=o.length;const d=new Uint8Array(i);for(;i--;)d[i]=o.charCodeAt(i);const m=new Blob([d],{type:a});m.name=e,m.lastModified=t,r(m)}))}function la(n){return new Promise(((e,t)=>{const r=new ia;r.onload=()=>e(r.result),r.onerror=s=>t(s),r.readAsDataURL(n)}))}function ca(n){return new Promise(((e,t)=>{const r=new Image;r.onload=()=>e(r),r.onerror=s=>t(s),r.src=n}))}function Et(){if(Et.cachedResult!==void 0)return Et.cachedResult;let n=Ye.ETC;const{userAgent:e}=navigator;return/Chrom(e|ium)/i.test(e)?n=Ye.CHROME:/iP(ad|od|hone)/i.test(e)&&/WebKit/i.test(e)?n=Ye.IOS:/Safari/i.test(e)?n=Ye.DESKTOP_SAFARI:/Firefox/i.test(e)?n=Ye.FIREFOX:(/MSIE/i.test(e)||document.documentMode)&&(n=Ye.IE),Et.cachedResult=n,Et.cachedResult}function da(n,e){const t=El[Et()];let r=n,s=e,a=r*s;const o=r>s?s/r:r/s;for(;a>t*t;){const i=(t+r)/2,d=(t+s)/2;i<d?(s=d,r=d*o):(s=i*o,r=i),a=r*s}return{width:r,height:s}}function yn(n,e){let t,r;try{if(t=new OffscreenCanvas(n,e),r=t.getContext("2d"),r===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{t=document.createElement("canvas"),r=t.getContext("2d")}return t.width=n,t.height=e,[t,r]}function ua(n,e){const{width:t,height:r}=da(n.width,n.height),[s,a]=yn(t,r);return e&&/jpe?g/.test(e)&&(a.fillStyle="white",a.fillRect(0,0,s.width,s.height)),a.drawImage(n,0,0,s.width,s.height),s}function an(){return an.cachedResult!==void 0||(an.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),an.cachedResult}function un(n,e={}){return new Promise((function(t,r){let s,a;var o=function(){try{return a=ua(s,e.fileType||n.type),t([s,a])}catch(d){return r(d)}},i=function(d){try{var m=function(u){try{throw u}catch(c){return r(c)}};try{let u;return la(n).then((function(c){try{return u=c,ca(u).then((function(f){try{return s=f,(function(){try{return o()}catch(h){return r(h)}})()}catch(h){return m(h)}}),m)}catch(f){return m(f)}}),m)}catch(u){m(u)}}catch(u){return r(u)}};try{if(an()||[Ye.DESKTOP_SAFARI,Ye.MOBILE_SAFARI].includes(Et()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(n).then((function(d){try{return s=d,o()}catch{return i()}}),i)}catch{i()}}))}function fn(n,e,t,r,s=1){return new Promise((function(a,o){let i;if(e==="image/png"){let m,u,c;return m=n.getContext("2d"),{data:u}=m.getImageData(0,0,n.width,n.height),c=at.encode([u.buffer],n.width,n.height,4096*s),i=new Blob([c],{type:e}),i.name=t,i.lastModified=r,d.call(this)}{let m=function(){return d.call(this)};if(e==="image/bmp")return new Promise((u=>aa.toBlob(n,u))).then(function(u){try{return i=u,i.name=t,i.lastModified=r,m.call(this)}catch(c){return o(c)}}.bind(this),o);{let u=function(){return m.call(this)};if(typeof OffscreenCanvas=="function"&&n instanceof OffscreenCanvas)return n.convertToBlob({type:e,quality:s}).then(function(c){try{return i=c,i.name=t,i.lastModified=r,u.call(this)}catch(f){return o(f)}}.bind(this),o);{let c;return c=n.toDataURL(e,s),Qn(c,t,r).then(function(f){try{return i=f,u.call(this)}catch(h){return o(h)}}.bind(this),o)}}}function d(){return a(i)}}))}function ct(n){n.width=0,n.height=0}function Tt(){return new Promise((function(n,e){let t,r,s,a;return Tt.cachedResult!==void 0?n(Tt.cachedResult):Qn("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then((function(o){try{return t=o,un(t).then((function(i){try{return r=i[1],fn(r,t.type,t.name,t.lastModified).then((function(d){try{return s=d,ct(r),un(s).then((function(m){try{return a=m[0],Tt.cachedResult=a.width===1&&a.height===2,n(Tt.cachedResult)}catch(u){return e(u)}}),e)}catch(m){return e(m)}}),e)}catch(d){return e(d)}}),e)}catch(i){return e(i)}}),e)}))}function fa(n){return new Promise(((e,t)=>{const r=new ia;r.onload=s=>{const a=new DataView(s.target.result);if(a.getUint16(0,!1)!=65496)return e(-2);const o=a.byteLength;let i=2;for(;i<o;){if(a.getUint16(i+2,!1)<=8)return e(-1);const d=a.getUint16(i,!1);if(i+=2,d==65505){if(a.getUint32(i+=2,!1)!=1165519206)return e(-1);const m=a.getUint16(i+=6,!1)==18761;i+=a.getUint32(i+4,m);const u=a.getUint16(i,m);i+=2;for(let c=0;c<u;c++)if(a.getUint16(i+12*c,m)==274)return e(a.getUint16(i+12*c+8,m))}else{if((65280&d)!=65280)break;i+=a.getUint16(i,!1)}}return e(-1)},r.onerror=s=>t(s),r.readAsArrayBuffer(n)}))}function ma(n,e){const{width:t}=n,{height:r}=n,{maxWidthOrHeight:s}=e;let a,o=n;return isFinite(s)&&(t>s||r>s)&&([o,a]=yn(t,r),t>r?(o.width=s,o.height=r/t*s):(o.width=t/r*s,o.height=s),a.drawImage(n,0,0,o.width,o.height),ct(n)),o}function ha(n,e){const{width:t}=n,{height:r}=n,[s,a]=yn(t,r);switch(e>4&&e<9?(s.width=r,s.height=t):(s.width=t,s.height=r),e){case 2:a.transform(-1,0,0,1,t,0);break;case 3:a.transform(-1,0,0,-1,t,r);break;case 4:a.transform(1,0,0,-1,0,r);break;case 5:a.transform(0,1,1,0,0,0);break;case 6:a.transform(0,1,-1,0,r,0);break;case 7:a.transform(0,-1,-1,0,r,t);break;case 8:a.transform(0,-1,1,0,0,t)}return a.drawImage(n,0,0,t,r),ct(n),s}function vr(n,e,t=0){return new Promise((function(r,s){let a,o,i,d,m,u,c,f,h,p,b,x,v,_,N,S,E,k,T,y;function w(M=5){if(e.signal&&e.signal.aborted)throw e.signal.reason;a+=M,e.onProgress(Math.min(a,100))}function A(M){if(e.signal&&e.signal.aborted)throw e.signal.reason;a=Math.min(Math.max(M,a),100),e.onProgress(a)}return a=t,o=e.maxIteration||10,i=1024*e.maxSizeMB*1024,w(),un(n,e).then(function(M){try{return[,d]=M,w(),m=ma(d,e),w(),new Promise((function(R,D){var z;if(!(z=e.exifOrientation))return fa(n).then(function(j){try{return z=j,L.call(this)}catch(C){return D(C)}}.bind(this),D);function L(){return R(z)}return L.call(this)})).then(function(R){try{return u=R,w(),Tt().then(function(D){try{return c=D?m:ha(m,u),w(),f=e.initialQuality||1,h=e.fileType||n.type,fn(c,h,n.name,n.lastModified,f).then(function(z){try{{let j=function(){if(o--&&(N>i||N>v)){let P,I;return P=y?.95*T.width:T.width,I=y?.95*T.height:T.height,[E,k]=yn(P,I),k.drawImage(T,0,0,P,I),f*=h==="image/png"?.85:.95,fn(E,h,n.name,n.lastModified,f).then((function(F){try{return S=F,ct(T),T=E,N=S.size,A(Math.min(99,Math.floor((_-N)/(_-i)*100))),j}catch(q){return s(q)}}),s)}return[1]},C=function(){return ct(T),ct(E),ct(m),ct(c),ct(d),A(100),r(S)};if(p=z,w(),b=p.size>i,x=p.size>n.size,!b&&!x)return A(100),r(p);var L;return v=n.size,_=p.size,N=_,T=c,y=!e.alwaysKeepResolution&&b,(L=function(P){for(;P;){if(P.then)return void P.then(L,s);try{if(P.pop){if(P.length)return P.pop()?C.call(this):P;P=j}else P=P.call(this)}catch(I){return s(I)}}}.bind(this))(j)}}catch(j){return s(j)}}.bind(this),s)}catch(z){return s(z)}}.bind(this),s)}catch(D){return s(D)}}.bind(this),s)}catch(R){return s(R)}}.bind(this),s)}))}var Ml=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`,Nn;function Dl(n,e){return new Promise(((t,r)=>{Nn||(Nn=(function(o){const i=[];return typeof o=="function"?i.push(`(${o})()`):i.push(o),URL.createObjectURL(new Blob(i))})(Ml));const s=new Worker(Nn);s.addEventListener("message",(function(o){if(e.signal&&e.signal.aborted)s.terminate();else if(o.data.progress===void 0){if(o.data.error)return r(new Error(o.data.error)),void s.terminate();t(o.data.file),s.terminate()}else e.onProgress(o.data.progress)})),s.addEventListener("error",r),e.signal&&e.signal.addEventListener("abort",(()=>{r(e.signal.reason),s.terminate()})),s.postMessage({file:n,imageCompressionLibUrl:e.libURL,options:{...e,onProgress:void 0,signal:void 0}})}))}function qe(n,e){return new Promise((function(t,r){let s,a,o,i,d,m;if(s={...e},o=0,{onProgress:i}=s,s.maxSizeMB=s.maxSizeMB||Number.POSITIVE_INFINITY,d=typeof s.useWebWorker!="boolean"||s.useWebWorker,delete s.useWebWorker,s.onProgress=h=>{o=h,typeof i=="function"&&i(o)},!(n instanceof Blob||n instanceof Rl))return r(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(n.type))return r(new Error("The file given is not an image"));if(m=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!d||typeof Worker!="function"||m)return vr(n,s).then(function(h){try{return a=h,f.call(this)}catch(p){return r(p)}}.bind(this),r);var u=function(){try{return f.call(this)}catch(h){return r(h)}}.bind(this),c=function(h){try{return vr(n,s).then((function(p){try{return a=p,u()}catch(b){return r(b)}}),r)}catch(p){return r(p)}};try{return s.libURL=s.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",Dl(n,s).then((function(h){try{return a=h,u()}catch{return c()}}),c)}catch{c()}function f(){try{a.name=n.name,a.lastModified=n.lastModified}catch{}try{s.preserveExif&&n.type==="image/jpeg"&&(!s.fileType||s.fileType&&s.fileType===n.type)&&(a=sa(n,a))}catch{}return t(a)}}))}qe.getDataUrlFromFile=la,qe.getFilefromDataUrl=Qn,qe.loadImage=ca,qe.drawImageInCanvas=ua,qe.drawFileInCanvas=un,qe.canvasToFile=fn,qe.getExifOrientation=fa,qe.handleMaxWidthOrHeight=ma,qe.followExifOrientation=ha,qe.cleanupCanvasMemory=ct,qe.isAutoOrientationInBrowser=Tt,qe.approximateBelowMaximumCanvasSizeOfBrowser=da,qe.copyExifWithoutOrientation=sa,qe.getBrowserName=Et,qe.version="2.0.2";const Tl=async(n,e={})=>{if(!n.type.startsWith("image/"))return n;const t={maxSizeMB:1,maxWidthOrHeight:1920,useWebWorker:!0,initialQuality:.8,fileType:"image/webp",...e};try{const r=await qe(n,t);return console.log(`Original size: ${(n.size/1024/1024).toFixed(2)} MB`),console.log(`Compressed size: ${(r.size/1024/1024).toFixed(2)} MB`),r}catch(r){return console.error("Image compression failed:",r),n}},Il=(n,e=1)=>new Promise((t,r)=>{const s=document.createElement("video");s.preload="metadata",s.src=URL.createObjectURL(n),s.muted=!0,s.playsInline=!0,s.onloadedmetadata=()=>{s.currentTime=e},s.onseeked=()=>{const a=document.createElement("canvas");a.width=s.videoWidth,a.height=s.videoHeight;const o=a.getContext("2d");if(!o){URL.revokeObjectURL(s.src),r(new Error("Could not get canvas context"));return}o.drawImage(s,0,0,a.width,a.height),a.toBlob(i=>{if(!i){URL.revokeObjectURL(s.src),r(new Error("Could not create blob"));return}const d=new File([i],"thumbnail.webp",{type:"image/webp"});URL.revokeObjectURL(s.src),t(d)},"image/webp",.7)},s.onerror=a=>r(a)}),Rt=async(n,e="media",t=null)=>{let r=n,s=n.name.split(".").pop(),a=null;if(n.type.startsWith("image/"))try{r=await Tl(n),s="webp"}catch(u){console.error("Image compression failed, uploading original:",u)}if(n.type.startsWith("video/"))try{t?a=(await Rt(t,e)).url:a=(await Rt(await Il(n),e)).url}catch(u){console.error("Failed to handle video poster:",u)}const o=`${`${crypto.randomUUID()}.${s}`}`,{data:i,error:d}=await Q.storage.from(e).upload(o,r);if(d)throw d;const{data:{publicUrl:m}}=Q.storage.from(e).getPublicUrl(i.path);return{url:m,poster:a,name:n.name,type:n.type.startsWith("image/")?"image":n.type.startsWith("video/")?"video":"file",size:r.size}};var l=Wn(Uo(),1),pa=(0,g.createContext)(void 0);const Pl=({children:n})=>{const[e,t]=(0,g.useState)(null),[r,s]=(0,g.useState)(null),[a,o]=(0,g.useState)({}),[i,d]=(0,g.useState)(!0),m=(0,g.useCallback)(async x=>{try{const v=await ra(x.id);v?(t(v),o(_=>({..._,[v.handle.toLowerCase()]:v}))):t({id:x.id,name:x.email?.split("@")[0]||"User",handle:x.email?.split("@")[0]||"user",avatar:"/default-avatar.webp",verified:!1,cover:"/welcome-banner.webp",bio:null,location:null,website:null,follower_count:0,following_count:0,lastSeen:new Date().toISOString()})}catch(v){console.error("Error fetching user profile:",v)}finally{d(!1)}},[]);(0,g.useEffect)(()=>{if(!e?.id)return;At(e.id);const x=setInterval(()=>At(e.id),3e4),v=()=>{document.visibilityState==="visible"&&At(e.id)};return window.addEventListener("visibilitychange",v),window.addEventListener("beforeunload",()=>At(e.id)),()=>{clearInterval(x),window.removeEventListener("visibilitychange",v),window.removeEventListener("beforeunload",()=>At(e.id))}},[e?.id]),(0,g.useEffect)(()=>{Q.auth.getSession().then(({data:{session:v}})=>{v?m(v.user):d(!1)});const{data:{subscription:x}}=Q.auth.onAuthStateChange((v,_)=>{_?m(_.user):(t(null),d(!1))});return()=>x.unsubscribe()},[m]);const u=(0,g.useCallback)(async({email:x,password:v})=>{const{data:_,error:N}=await Q.auth.signInWithPassword({email:x,password:v});if(N)throw N;return s(null),_},[]),c=(0,g.useCallback)(async({email:x,password:v,username:_,name:N})=>{const{data:{user:S},error:E}=await Q.auth.signUp({email:x,password:v,options:{data:{username:_.toLowerCase(),name:N}}});if(E)throw E;return s(null),S},[]),f=(0,g.useCallback)(async()=>{await Q.auth.signOut(),t(null),s(null)},[]),h=(0,g.useCallback)(async x=>{e&&(await $i(e.id,x),await m(e))},[e,m]),p=(0,g.useCallback)(async x=>{const v=x.toLowerCase(),_=await Ji(x);return _?(o(N=>({...N,[v]:_})),_):null},[]),b=(0,g.useMemo)(()=>({currentUser:e,authMode:r,setAuthMode:s,profiles:a,login:u,signup:c,logout:f,updateProfile:h,getProfileByHandle:p,loading:i}),[e,r,a,u,c,f,h,p,i]);return(0,l.jsx)(pa.Provider,{value:b,children:!i&&n})},$e=()=>{const n=(0,g.useContext)(pa);if(!n)throw new Error("useAuth must be used within an AuthProvider");return n};var Ll=ie(),ga=(0,g.createContext)(void 0);const Fl=n=>{const e=(0,Ll.c)(10),{children:t}=n,{currentUser:r}=$e();let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s=new Set,e[0]=s):s=e[0];const[a,o]=(0,g.useState)(s);let i;e[1]!==r?(i=()=>{if(!r?.id)return;const f=Q.channel("global_presence",{config:{presence:{key:r.id}}});return f.on("presence",{event:"sync"},()=>{const h=f.presenceState(),p=new Set;Object.keys(h).forEach(b=>p.add(b)),o(p)}).subscribe(async h=>{h==="SUBSCRIBED"&&(await f.track({userId:r.id,online_at:new Date().toISOString()}),At(r.id))}),()=>{r?.id&&At(r.id),Q.removeChannel(f),o(new Set)}},e[1]=r,e[2]=i):i=e[2];const d=r?.id;let m;e[3]!==d?(m=[d],e[3]=d,e[4]=m):m=e[4],(0,g.useEffect)(i,m);let u;e[5]!==a?(u={onlineUsers:a},e[5]=a,e[6]=u):u=e[6];let c;return e[7]!==t||e[8]!==u?(c=(0,l.jsx)(ga.Provider,{value:u,children:t}),e[7]=t,e[8]=u,e[9]=c):c=e[9],c},Ol=()=>{const n=(0,g.useContext)(ga);if(!n)throw new Error("usePresence must be used within a PresenceProvider");return n};var Bl=ie(),va=(0,g.createContext)(void 0);const Hl=n=>{const e=(0,Bl.c)(17),{children:t}=n,[r,s]=(0,g.useState)(Ul),[a,o]=(0,g.useState)(ql),[i,d]=(0,g.useState)(Wl);let m,u;e[0]!==r?(m=()=>{localStorage.setItem("theme",r?"dark":"light"),r?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},u=[r],e[0]=r,e[1]=m,e[2]=u):(m=e[1],u=e[2]),(0,g.useEffect)(m,u);let c,f;e[3]!==a?(c=()=>{localStorage.setItem("font-size",a),document.documentElement.style.setProperty("--app-font-size",{small:"14px",base:"16px",large:"18px"}[a])},f=[a],e[3]=a,e[4]=c,e[5]=f):(c=e[4],f=e[5]),(0,g.useEffect)(c,f);let h,p;e[6]!==i?(h=()=>{localStorage.setItem("data-saver",String(i))},p=[i],e[6]=i,e[7]=h,e[8]=p):(h=e[7],p=e[8]),(0,g.useEffect)(h,p);let b;e[9]===Symbol.for("react.memo_cache_sentinel")?(b=()=>s(Vl),e[9]=b):b=e[9];const x=b;let v;e[10]!==r||e[11]!==i||e[12]!==a?(v={darkMode:r,setDarkMode:s,toggleDarkMode:x,fontSize:a,setFontSize:o,dataSaver:i,setDataSaver:d},e[10]=r,e[11]=i,e[12]=a,e[13]=v):v=e[13];const _=v;let N;return e[14]!==t||e[15]!==_?(N=(0,l.jsx)(va.Provider,{value:_,children:t}),e[14]=t,e[15]=_,e[16]=N):N=e[16],N},Kn=()=>{const n=(0,g.useContext)(va);if(!n)throw new Error("useTheme must be used within a ThemeProvider");return n};function Ul(){const n=localStorage.getItem("theme");return n==="dark"||!n&&window.matchMedia("(prefers-color-scheme: dark)").matches}function ql(){return localStorage.getItem("font-size")||"base"}function Wl(){return localStorage.getItem("data-saver")==="true"}function Vl(n){return!n}var Yl=Wn(ns(),1);function Ql(n){if(!n||typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",e.appendChild(t),t.styleSheet?t.styleSheet.cssText=n:t.appendChild(document.createTextNode(n))}var Kl=n=>{switch(n){case"success":return Gl;case"info":return $l;case"warning":return Jl;case"error":return ec;default:return null}},Xl=Array(12).fill(0),Zl=({visible:n,className:e})=>g.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":n},g.createElement("div",{className:"sonner-spinner"},Xl.map((t,r)=>g.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),Gl=g.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},g.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),Jl=g.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},g.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),$l=g.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},g.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),ec=g.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},g.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),tc=g.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},g.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),g.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),nc=()=>{const[n,e]=g.useState(document.hidden);return g.useEffect(()=>{const t=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",t),()=>window.removeEventListener("visibilitychange",t)},[]),n},In=1,rc=class{constructor(){this.subscribe=n=>(this.subscribers.push(n),()=>{const e=this.subscribers.indexOf(n);this.subscribers.splice(e,1)}),this.publish=n=>{this.subscribers.forEach(e=>e(n))},this.addToast=n=>{this.publish(n),this.toasts=[...this.toasts,n]},this.create=n=>{var e;const{message:t,...r}=n,s=typeof n?.id=="number"||((e=n.id)==null?void 0:e.length)>0?n.id:In++,a=this.toasts.find(i=>i.id===s),o=n.dismissible===void 0?!0:n.dismissible;return this.dismissedToasts.has(s)&&this.dismissedToasts.delete(s),a?this.toasts=this.toasts.map(i=>i.id===s?(this.publish({...i,...n,id:s,title:t}),{...i,...n,id:s,dismissible:o,title:t}):i):this.addToast({title:t,...r,dismissible:o,id:s}),s},this.dismiss=n=>(n?(this.dismissedToasts.add(n),requestAnimationFrame(()=>this.subscribers.forEach(e=>e({id:n,dismiss:!0})))):this.toasts.forEach(e=>{this.subscribers.forEach(t=>t({id:e.id,dismiss:!0}))}),n),this.message=(n,e)=>this.create({...e,message:n}),this.error=(n,e)=>this.create({...e,message:n,type:"error"}),this.success=(n,e)=>this.create({...e,type:"success",message:n}),this.info=(n,e)=>this.create({...e,type:"info",message:n}),this.warning=(n,e)=>this.create({...e,type:"warning",message:n}),this.loading=(n,e)=>this.create({...e,type:"loading",message:n}),this.promise=(n,e)=>{if(!e)return;let t;e.loading!==void 0&&(t=this.create({...e,promise:n,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));const r=Promise.resolve(n instanceof Function?n():n);let s=t!==void 0,a;const o=r.then(async d=>{if(a=["resolve",d],g.isValidElement(d))s=!1,this.create({id:t,type:"default",message:d});else if(ac(d)&&!d.ok){s=!1;const m=typeof e.error=="function"?await e.error(`HTTP error! status: ${d.status}`):e.error,u=typeof e.description=="function"?await e.description(`HTTP error! status: ${d.status}`):e.description,c=typeof m=="object"&&!g.isValidElement(m)?m:{message:m};this.create({id:t,type:"error",description:u,...c})}else if(d instanceof Error){s=!1;const m=typeof e.error=="function"?await e.error(d):e.error,u=typeof e.description=="function"?await e.description(d):e.description,c=typeof m=="object"&&!g.isValidElement(m)?m:{message:m};this.create({id:t,type:"error",description:u,...c})}else if(e.success!==void 0){s=!1;const m=typeof e.success=="function"?await e.success(d):e.success,u=typeof e.description=="function"?await e.description(d):e.description,c=typeof m=="object"&&!g.isValidElement(m)?m:{message:m};this.create({id:t,type:"success",description:u,...c})}}).catch(async d=>{if(a=["reject",d],e.error!==void 0){s=!1;const m=typeof e.error=="function"?await e.error(d):e.error,u=typeof e.description=="function"?await e.description(d):e.description,c=typeof m=="object"&&!g.isValidElement(m)?m:{message:m};this.create({id:t,type:"error",description:u,...c})}}).finally(()=>{s&&(this.dismiss(t),t=void 0),e.finally==null||e.finally.call(e)}),i=()=>new Promise((d,m)=>o.then(()=>a[0]==="reject"?m(a[1]):d(a[1])).catch(m));return typeof t!="string"&&typeof t!="number"?{unwrap:i}:Object.assign(t,{unwrap:i})},this.custom=(n,e)=>{const t=e?.id||In++;return this.create({jsx:n(t),id:t,...e}),t},this.getActiveToasts=()=>this.toasts.filter(n=>!this.dismissedToasts.has(n.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Ve=new rc,sc=(n,e)=>{const t=e?.id||In++;return Ve.addToast({title:n,...e,id:t}),t},ac=n=>n&&typeof n=="object"&&"ok"in n&&typeof n.ok=="boolean"&&"status"in n&&typeof n.status=="number",oc=sc,ic=()=>Ve.toasts,lc=()=>Ve.getActiveToasts(),Sn=Object.assign(oc,{success:Ve.success,info:Ve.info,warning:Ve.warning,error:Ve.error,custom:Ve.custom,message:Ve.message,promise:Ve.promise,dismiss:Ve.dismiss,loading:Ve.loading},{getHistory:ic,getToasts:lc});Ql("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function rn(n){return n.label!==void 0}var cc=3,dc="24px",uc="16px",br=4e3,fc=356,mc=14,hc=45,pc=200;function lt(...n){return n.filter(Boolean).join(" ")}function gc(n){const[e,t]=n.split("-"),r=[];return e&&r.push(e),t&&r.push(t),r}var vc=n=>{var e,t,r,s,a,o,i,d,m;const{invert:u,toast:c,unstyled:f,interacting:h,setHeights:p,visibleToasts:b,heights:x,index:v,toasts:_,expanded:N,removeToast:S,defaultRichColors:E,closeButton:k,style:T,cancelButtonStyle:y,actionButtonStyle:w,className:A="",descriptionClassName:M="",duration:R,position:D,gap:z,expandByDefault:L,classNames:j,icons:C,closeButtonAriaLabel:P="Close toast"}=n,[I,F]=g.useState(null),[q,H]=g.useState(null),[U,B]=g.useState(!1),[O,V]=g.useState(!1),[X,Y]=g.useState(!1),[W,G]=g.useState(!1),[K,J]=g.useState(!1),[ue,ee]=g.useState(0),[te,ge]=g.useState(0),ae=g.useRef(c.duration||R||br),he=g.useRef(null),re=g.useRef(null),je=v===0,ke=v+1<=b,le=c.type,pe=c.dismissible!==!1,fe=c.className||"",se=c.descriptionClassName||"",de=g.useMemo(()=>x.findIndex(Z=>Z.toastId===c.id)||0,[x,c.id]),me=g.useMemo(()=>{var Z;return(Z=c.closeButton)!=null?Z:k},[c.closeButton,k]),ye=g.useMemo(()=>c.duration||R||br,[c.duration,R]),ce=g.useRef(0),oe=g.useRef(0),Se=g.useRef(0),Ne=g.useRef(null),[Ae,Me]=D.split("-"),De=g.useMemo(()=>x.reduce((Z,xe,ve)=>ve>=de?Z:Z+xe.height,0),[x,de]),Ge=nc(),ne=c.invert||u,_e=le==="loading";oe.current=g.useMemo(()=>de*z+De,[de,De]),g.useEffect(()=>{ae.current=ye},[ye]),g.useEffect(()=>{B(!0)},[]),g.useEffect(()=>{const Z=re.current;if(Z){const xe=Z.getBoundingClientRect().height;return ge(xe),p(ve=>[{toastId:c.id,height:xe,position:c.position},...ve]),()=>p(ve=>ve.filter(Ce=>Ce.toastId!==c.id))}},[p,c.id]),g.useLayoutEffect(()=>{if(!U)return;const Z=re.current,xe=Z.style.height;Z.style.height="auto";const ve=Z.getBoundingClientRect().height;Z.style.height=xe,ge(ve),p(Ce=>Ce.find(be=>be.toastId===c.id)?Ce.map(be=>be.toastId===c.id?{...be,height:ve}:be):[{toastId:c.id,height:ve,position:c.position},...Ce])},[U,c.title,c.description,p,c.id,c.jsx,c.action,c.cancel]);const ze=g.useCallback(()=>{V(!0),ee(oe.current),p(Z=>Z.filter(xe=>xe.toastId!==c.id)),setTimeout(()=>{S(c)},pc)},[c,S,p,oe]);g.useEffect(()=>{if(c.promise&&le==="loading"||c.duration===1/0||c.type==="loading")return;let Z;return N||h||Ge?(()=>{if(Se.current<ce.current){const Ce=new Date().getTime()-ce.current;ae.current=ae.current-Ce}Se.current=new Date().getTime()})():ae.current!==1/0&&(ce.current=new Date().getTime(),Z=setTimeout(()=>{c.onAutoClose==null||c.onAutoClose.call(c,c),ze()},ae.current)),()=>clearTimeout(Z)},[N,h,c,le,Ge,ze]),g.useEffect(()=>{c.delete&&(ze(),c.onDismiss==null||c.onDismiss.call(c,c))},[ze,c.delete]);function Re(){var Z;if(C?.loading){var xe;return g.createElement("div",{className:lt(j?.loader,c==null||(xe=c.classNames)==null?void 0:xe.loader,"sonner-loader"),"data-visible":le==="loading"},C.loading)}return g.createElement(Zl,{className:lt(j?.loader,c==null||(Z=c.classNames)==null?void 0:Z.loader),visible:le==="loading"})}const Ie=c.icon||C?.[le]||Kl(le);var Te,Ee;return g.createElement("li",{tabIndex:0,ref:re,className:lt(A,fe,j?.toast,c==null||(e=c.classNames)==null?void 0:e.toast,j?.default,j?.[le],c==null||(t=c.classNames)==null?void 0:t[le]),"data-sonner-toast":"","data-rich-colors":(Te=c.richColors)!=null?Te:E,"data-styled":!(c.jsx||c.unstyled||f),"data-mounted":U,"data-promise":!!c.promise,"data-swiped":K,"data-removed":O,"data-visible":ke,"data-y-position":Ae,"data-x-position":Me,"data-index":v,"data-front":je,"data-swiping":X,"data-dismissible":pe,"data-type":le,"data-invert":ne,"data-swipe-out":W,"data-swipe-direction":q,"data-expanded":!!(N||L&&U),"data-testid":c.testId,style:{"--index":v,"--toasts-before":v,"--z-index":_.length-v,"--offset":`${O?ue:oe.current}px`,"--initial-height":L?"auto":`${te}px`,...T,...c.style},onDragEnd:()=>{Y(!1),F(null),Ne.current=null},onPointerDown:Z=>{Z.button!==2&&(_e||!pe||(he.current=new Date,ee(oe.current),Z.target.setPointerCapture(Z.pointerId),Z.target.tagName!=="BUTTON"&&(Y(!0),Ne.current={x:Z.clientX,y:Z.clientY})))},onPointerUp:()=>{var Z,xe,ve;if(W||!pe)return;Ne.current=null;const Ce=Number(((Z=re.current)==null?void 0:Z.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),be=Number(((xe=re.current)==null?void 0:xe.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Fe=new Date().getTime()-((ve=he.current)==null?void 0:ve.getTime()),et=I==="x"?Ce:be,He=Math.abs(et)/Fe;if(Math.abs(et)>=hc||He>.11){ee(oe.current),c.onDismiss==null||c.onDismiss.call(c,c),H(I==="x"?Ce>0?"right":"left":be>0?"down":"up"),ze(),G(!0);return}else{var Oe,rt;(Oe=re.current)==null||Oe.style.setProperty("--swipe-amount-x","0px"),(rt=re.current)==null||rt.style.setProperty("--swipe-amount-y","0px")}J(!1),Y(!1),F(null)},onPointerMove:Z=>{var xe,ve,Ce;if(!Ne.current||!pe||((xe=window.getSelection())==null?void 0:xe.toString().length)>0)return;const be=Z.clientY-Ne.current.y,Fe=Z.clientX-Ne.current.x;var et;const He=(et=n.swipeDirections)!=null?et:gc(D);!I&&(Math.abs(Fe)>1||Math.abs(be)>1)&&F(Math.abs(Fe)>Math.abs(be)?"x":"y");let Oe={x:0,y:0};const rt=ht=>1/(1.5+Math.abs(ht)/20);if(I==="y"){if(He.includes("top")||He.includes("bottom"))if(He.includes("top")&&be<0||He.includes("bottom")&&be>0)Oe.y=be;else{const ht=be*rt(be);Oe.y=Math.abs(ht)<Math.abs(be)?ht:be}}else if(I==="x"&&(He.includes("left")||He.includes("right")))if(He.includes("left")&&Fe<0||He.includes("right")&&Fe>0)Oe.x=Fe;else{const ht=Fe*rt(Fe);Oe.x=Math.abs(ht)<Math.abs(Fe)?ht:Fe}(Math.abs(Oe.x)>0||Math.abs(Oe.y)>0)&&J(!0),(ve=re.current)==null||ve.style.setProperty("--swipe-amount-x",`${Oe.x}px`),(Ce=re.current)==null||Ce.style.setProperty("--swipe-amount-y",`${Oe.y}px`)}},me&&!c.jsx&&le!=="loading"?g.createElement("button",{"aria-label":P,"data-disabled":_e,"data-close-button":!0,onClick:_e||!pe?()=>{}:()=>{ze(),c.onDismiss==null||c.onDismiss.call(c,c)},className:lt(j?.closeButton,c==null||(r=c.classNames)==null?void 0:r.closeButton)},(Ee=C?.close)!=null?Ee:tc):null,(le||c.icon||c.promise)&&c.icon!==null&&(C?.[le]!==null||c.icon)?g.createElement("div",{"data-icon":"",className:lt(j?.icon,c==null||(s=c.classNames)==null?void 0:s.icon)},c.promise||c.type==="loading"&&!c.icon?c.icon||Re():null,c.type!=="loading"?Ie:null):null,g.createElement("div",{"data-content":"",className:lt(j?.content,c==null||(a=c.classNames)==null?void 0:a.content)},g.createElement("div",{"data-title":"",className:lt(j?.title,c==null||(o=c.classNames)==null?void 0:o.title)},c.jsx?c.jsx:typeof c.title=="function"?c.title():c.title),c.description?g.createElement("div",{"data-description":"",className:lt(M,se,j?.description,c==null||(i=c.classNames)==null?void 0:i.description)},typeof c.description=="function"?c.description():c.description):null),g.isValidElement(c.cancel)?c.cancel:c.cancel&&rn(c.cancel)?g.createElement("button",{"data-button":!0,"data-cancel":!0,style:c.cancelButtonStyle||y,onClick:Z=>{rn(c.cancel)&&pe&&(c.cancel.onClick==null||c.cancel.onClick.call(c.cancel,Z),ze())},className:lt(j?.cancelButton,c==null||(d=c.classNames)==null?void 0:d.cancelButton)},c.cancel.label):null,g.isValidElement(c.action)?c.action:c.action&&rn(c.action)?g.createElement("button",{"data-button":!0,"data-action":!0,style:c.actionButtonStyle||w,onClick:Z=>{rn(c.action)&&(c.action.onClick==null||c.action.onClick.call(c.action,Z),!Z.defaultPrevented&&ze())},className:lt(j?.actionButton,c==null||(m=c.classNames)==null?void 0:m.actionButton)},c.action.label):null)};function xr(){if(typeof window>"u"||typeof document>"u")return"ltr";const n=document.documentElement.getAttribute("dir");return n==="auto"||!n?window.getComputedStyle(document.documentElement).direction:n}function bc(n,e){const t={};return[n,e].forEach((r,s)=>{const a=s===1,o=a?"--mobile-offset":"--offset",i=a?uc:dc;function d(m){["top","right","bottom","left"].forEach(u=>{t[`${o}-${u}`]=typeof m=="number"?`${m}px`:m})}typeof r=="number"||typeof r=="string"?d(r):typeof r=="object"?["top","right","bottom","left"].forEach(m=>{r[m]===void 0?t[`${o}-${m}`]=i:t[`${o}-${m}`]=typeof r[m]=="number"?`${r[m]}px`:r[m]}):d(i)}),t}var xc=g.forwardRef(function(e,t){const{id:r,invert:s,position:a="bottom-right",hotkey:o=["altKey","KeyT"],expand:i,closeButton:d,className:m,offset:u,mobileOffset:c,theme:f="light",richColors:h,duration:p,style:b,visibleToasts:x=cc,toastOptions:v,dir:_=xr(),gap:N=mc,icons:S,containerAriaLabel:E="Notifications"}=e,[k,T]=g.useState([]),y=g.useMemo(()=>r?k.filter(U=>U.toasterId===r):k.filter(U=>!U.toasterId),[k,r]),w=g.useMemo(()=>Array.from(new Set([a].concat(y.filter(U=>U.position).map(U=>U.position)))),[y,a]),[A,M]=g.useState([]),[R,D]=g.useState(!1),[z,L]=g.useState(!1),[j,C]=g.useState(f!=="system"?f:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),P=g.useRef(null),I=o.join("+").replace(/Key/g,"").replace(/Digit/g,""),F=g.useRef(null),q=g.useRef(!1),H=g.useCallback(U=>{T(B=>{var O;return(O=B.find(V=>V.id===U.id))!=null&&O.delete||Ve.dismiss(U.id),B.filter(({id:V})=>V!==U.id)})},[]);return g.useEffect(()=>Ve.subscribe(U=>{if(U.dismiss){requestAnimationFrame(()=>{T(B=>B.map(O=>O.id===U.id?{...O,delete:!0}:O))});return}setTimeout(()=>{Yl.flushSync(()=>{T(B=>{const O=B.findIndex(V=>V.id===U.id);return O!==-1?[...B.slice(0,O),{...B[O],...U},...B.slice(O+1)]:[U,...B]})})})}),[k]),g.useEffect(()=>{if(f!=="system"){C(f);return}if(f==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?C("dark"):C("light")),typeof window>"u")return;const U=window.matchMedia("(prefers-color-scheme: dark)");try{U.addEventListener("change",({matches:B})=>{C(B?"dark":"light")})}catch{U.addListener(({matches:O})=>{try{C(O?"dark":"light")}catch(V){console.error(V)}})}},[f]),g.useEffect(()=>{k.length<=1&&D(!1)},[k]),g.useEffect(()=>{const U=B=>{var O;if(o.every(X=>B[X]||B.code===X)){var V;D(!0),(V=P.current)==null||V.focus()}B.code==="Escape"&&(document.activeElement===P.current||(O=P.current)!=null&&O.contains(document.activeElement))&&D(!1)};return document.addEventListener("keydown",U),()=>document.removeEventListener("keydown",U)},[o]),g.useEffect(()=>{if(P.current)return()=>{F.current&&(F.current.focus({preventScroll:!0}),F.current=null,q.current=!1)}},[P.current]),g.createElement("section",{ref:t,"aria-label":`${E} ${I}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},w.map((U,B)=>{var O;const[V,X]=U.split("-");return y.length?g.createElement("ol",{key:U,dir:_==="auto"?xr():_,tabIndex:-1,ref:P,className:m,"data-sonner-toaster":!0,"data-sonner-theme":j,"data-y-position":V,"data-x-position":X,style:{"--front-toast-height":`${((O=A[0])==null?void 0:O.height)||0}px`,"--width":`${fc}px`,"--gap":`${N}px`,...b,...bc(u,c)},onBlur:Y=>{q.current&&!Y.currentTarget.contains(Y.relatedTarget)&&(q.current=!1,F.current&&(F.current.focus({preventScroll:!0}),F.current=null))},onFocus:Y=>{Y.target instanceof HTMLElement&&Y.target.dataset.dismissible==="false"||q.current||(q.current=!0,F.current=Y.relatedTarget)},onMouseEnter:()=>D(!0),onMouseMove:()=>D(!0),onMouseLeave:()=>{z||D(!1)},onDragEnd:()=>D(!1),onPointerDown:Y=>{Y.target instanceof HTMLElement&&Y.target.dataset.dismissible==="false"||L(!0)},onPointerUp:()=>L(!1)},y.filter(Y=>!Y.position&&B===0||Y.position===U).map((Y,W)=>{var G,K;return g.createElement(vc,{key:Y.id,icons:S,index:W,toast:Y,defaultRichColors:h,duration:(G=v?.duration)!=null?G:p,className:v?.className,descriptionClassName:v?.descriptionClassName,invert:s,visibleToasts:x,closeButton:(K=v?.closeButton)!=null?K:d,interacting:z,position:U,style:v?.style,unstyled:v?.unstyled,classNames:v?.classNames,cancelButtonStyle:v?.cancelButtonStyle,actionButtonStyle:v?.actionButtonStyle,closeButtonAriaLabel:v?.closeButtonAriaLabel,removeToast:H,toasts:y.filter(J=>J.position==Y.position),heights:A.filter(J=>J.position==Y.position),setHeights:M,expandByDefault:i,gap:N,expanded:R,swipeDirections:e.swipeDirections})})):null}))}),yc=(n,e,t,r,s,a,o,i)=>{let d=document.documentElement,m=["light","dark"];function u(h){(Array.isArray(n)?n:[n]).forEach(p=>{let b=p==="class",x=b&&a?s.map(v=>a[v]||v):s;b?(d.classList.remove(...x),d.classList.add(a&&a[h]?a[h]:h)):d.setAttribute(p,h)}),c(h)}function c(h){i&&m.includes(h)&&(d.style.colorScheme=h)}function f(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(r)u(r);else try{let h=localStorage.getItem(e)||t;u(o&&h==="system"?f():h)}catch{}};var wc=g.createContext(void 0),jc={setTheme:n=>{},themes:[]},kc=()=>{var n;return(n=g.useContext(wc))!=null?n:jc};var Th=g.memo(({forcedTheme:n,storageKey:e,attribute:t,enableSystem:r,enableColorScheme:s,defaultTheme:a,value:o,themes:i,nonce:d,scriptProps:m})=>{let u=JSON.stringify([t,e,a,n,i,o,r,s]).slice(1,-1);return g.createElement("script",{...m,suppressHydrationWarning:!0,nonce:typeof window>"u"?d:"",dangerouslySetInnerHTML:{__html:`(${yc.toString()})(${u})`}})});var Cc=ie(),_c=n=>{const e=(0,Cc.c)(8);let t;e[0]!==n?({...t}=n,e[0]=n,e[1]=t):t=e[1];const{theme:r}=kc(),s=r===void 0?"system":r;let a,o,i;e[2]===Symbol.for("react.memo_cache_sentinel")?(a={classNames:{toast:"group toast group-[.toaster]:bg-white group-[.toaster]:text-zinc-950 group-[.toaster]:border-zinc-200 group-[.toaster]:shadow-lg dark:group-[.toaster]:bg-zinc-950 dark:group-[.toaster]:text-zinc-50 dark:group-[.toaster]:border-zinc-800",description:"group-[.toast]:text-zinc-500 dark:group-[.toast]:text-zinc-400",actionButton:"group-[.toast]:bg-zinc-900 group-[.toast]:text-zinc-50 dark:group-[.toast]:bg-zinc-50 dark:group-[.toast]:text-zinc-900",cancelButton:"group-[.toast]:bg-zinc-100 group-[.toast]:text-zinc-500 dark:group-[.toast]:bg-zinc-800 dark:group-[.toast]:text-zinc-400"}},o={success:(0,l.jsx)(ci,{className:"size-4"}),info:(0,l.jsx)(vi,{className:"size-4"}),warning:(0,l.jsx)(mi,{className:"size-4"}),error:(0,l.jsx)(yi,{className:"size-4"}),loading:(0,l.jsx)(mt,{className:"size-4 animate-spin"})},i={"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)","--border-radius":"var(--radius)"},e[2]=a,e[3]=o,e[4]=i):(a=e[2],o=e[3],i=e[4]);let d;return e[5]!==t||e[6]!==s?(d=(0,l.jsx)(xc,{theme:s,className:"toaster group",toastOptions:a,icons:o,style:i,...t}),e[5]=t,e[6]=s,e[7]=d):d=e[7],d},Nc=ie(),ba=(0,g.createContext)(void 0);const Sc=n=>{const e=(0,Nc.c)(4),{children:t}=n,r=zc;let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s={addToast:r},e[0]=s):s=e[0];let a;e[1]===Symbol.for("react.memo_cache_sentinel")?(a=(0,l.jsx)(_c,{position:"bottom-center",toastOptions:{className:"rounded-full font-bold"}}),e[1]=a):a=e[1];let o;return e[2]!==t?(o=(0,l.jsxs)(ba.Provider,{value:s,children:[t,a]}),e[2]=t,e[3]=o):o=e[3],o},St=()=>{const n=(0,g.useContext)(ba);if(!n)throw new Error("useToast must be used within a ToastProvider");return n};function zc(n,e){const t=e===void 0?"success":e;t==="error"?Sn.error(n):t==="info"?Sn.info(n):Sn.success(n)}var Ac=ie(),xa=(0,g.createContext)(void 0);const Ec=n=>{const e=(0,Ac.c)(37),{children:t}=n,r=Jt();let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s=["posts","feed"],e[0]=s):s=e[0];let a;e[1]===Symbol.for("react.memo_cache_sentinel")?(a={queryKey:s,queryFn:Mc,initialPageParam:null,getNextPageParam:Dc},e[1]=a):a=e[1];const{data:o,fetchNextPage:i,hasNextPage:d,isFetchingNextPage:m,isLoading:u,refetch:c}=rs(a);let f;e[2]!==o?.pages?(f=o?.pages.flatMap(Tc)||[],e[2]=o?.pages,e[3]=f):f=e[3];const h=f;let p;e[4]!==r?(p={mutationFn:sl,onSuccess:()=>{r.invalidateQueries({queryKey:["posts","feed"]})}},e[4]=r,e[5]=p):p=e[5];const b=qt(p);let x;e[6]!==r?(x={mutationFn:al,onMutate:async q=>{await r.cancelQueries({queryKey:["posts","feed"]});const H=r.getQueryData(["posts","feed"]);return r.setQueryData(["posts","feed"],U=>U&&{...U,pages:U.pages.map(B=>B.filter(O=>O.id!==q))}),{previousPosts:H}},onError:(q,H,U)=>{U?.previousPosts&&r.setQueryData(["posts","feed"],U.previousPosts)},onSuccess:()=>{r.invalidateQueries({queryKey:["posts","feed"]})}},e[6]=r,e[7]=x):x=e[7];const v=qt(x);let _;e[8]!==r?(_={mutationFn:Ic,onSuccess:()=>{r.invalidateQueries({queryKey:["posts","feed"]})}},e[8]=r,e[9]=_):_=e[9];const N=qt(_);let S;e[10]!==b?(S=async q=>await b.mutateAsync(q),e[10]=b,e[11]=S):S=e[11];const E=S;let k;e[12]!==v?(k=async q=>{await v.mutateAsync(q)},e[12]=v,e[13]=k):k=e[13];const T=k;let y;e[14]!==N?(y=async(q,H)=>{await N.mutateAsync({postId:q,data:H})},e[14]=N,e[15]=y):y=e[15];const w=y,A=Pc;let M;e[16]!==h?(M=q=>h.find(H=>H.id===q),e[16]=h,e[17]=M):M=e[17];const R=M;let D;e[18]!==h?(D=(q,H)=>{const U=H===void 0?"feed":H,B=h.filter(O=>!!(O.user?.handle===q||O.repostedBy&&O.repostedBy.handle===q));return U==="feed"?B.filter(Lc):U==="media"?B.filter(Fc):B},e[18]=h,e[19]=D):D=e[19];const z=D;let L;e[20]!==c?(L=()=>c(),e[20]=c,e[21]=L):L=e[21];const j=L,C=d||!1;let P;e[22]!==E||e[23]!==T||e[24]!==i||e[25]!==R||e[26]!==z||e[27]!==m||e[28]!==u||e[29]!==h||e[30]!==j||e[31]!==C||e[32]!==w?(P={posts:h,setPosts:A,addPost:E,deletePost:T,updatePost:w,getPostById:R,getUserPosts:z,loading:u,hasMore:C,isFetchingNextPage:m,fetchNextPage:i,refreshPosts:j},e[22]=E,e[23]=T,e[24]=i,e[25]=R,e[26]=z,e[27]=m,e[28]=u,e[29]=h,e[30]=j,e[31]=C,e[32]=w,e[33]=P):P=e[33];const I=P;let F;return e[34]!==t||e[35]!==I?(F=(0,l.jsx)(xa.Provider,{value:I,children:t}),e[34]=t,e[35]=I,e[36]=F):F=e[36],F},Rc=()=>{const n=(0,g.useContext)(xa);if(!n)throw new Error("usePosts must be used within a PostProvider");return n};function Mc(n){const{pageParam:e}=n;return rl(e,10)}function Dc(n){if(!(!n||n.length<10))return n[n.length-1].sort_timestamp||n[n.length-1].created_at}function Tc(n){return n}function Ic(n){const{postId:e,data:t}=n;return ol(e,t)}function Pc(n){console.warn("setPosts is deprecated in favor of React Query cache updates")}function Lc(n){return n.parent_id===null}function Fc(n){return n.parent_id===null&&(n.type==="video"||n.type==="image"||(n.media?.length||0)>0)}var Oc=ie(),ya=(0,g.createContext)(void 0);const Bc=n=>{const e=(0,Oc.c)(9),{children:t}=n;let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r={isOpen:!1,images:[],currentIndex:0},e[0]=r):r=e[0];const[s,a]=(0,g.useState)(r);let o;e[1]===Symbol.for("react.memo_cache_sentinel")?(o=(p,b)=>{const x=b===void 0?0:b;a({isOpen:!0,images:Array.isArray(p)?p:[p],currentIndex:x})},e[1]=o):o=e[1];const i=o;let d;e[2]===Symbol.for("react.memo_cache_sentinel")?(d=()=>{a(Uc)},e[2]=d):d=e[2];const m=d;let u;e[3]===Symbol.for("react.memo_cache_sentinel")?(u=p=>{a(b=>({...b,currentIndex:p}))},e[3]=u):u=e[3];const c=u;let f;e[4]!==s?(f={...s,openLightbox:i,closeLightbox:m,setIndex:c},e[4]=s,e[5]=f):f=e[5];let h;return e[6]!==t||e[7]!==f?(h=(0,l.jsx)(ya.Provider,{value:f,children:t}),e[6]=t,e[7]=f,e[8]=h):h=e[8],h},Hc=()=>{const n=(0,g.useContext)(ya);if(!n)throw new Error("useLightbox must be used within a LightboxProvider");return n};function Uc(n){return{...n,isOpen:!1}}var qc=ie(),Wc=n=>{const e=(0,qc.c)(12);let t,r,s,a;e[0]!==n?({children:t,variant:s,className:a,...r}=n,e[0]=n,e[1]=t,e[2]=r,e[3]=s,e[4]=a):(t=e[1],r=e[2],s=e[3],a=e[4]);const o=s===void 0?"primary":s,i=a===void 0?"":a;let d;e[5]===Symbol.for("react.memo_cache_sentinel")?(d={primary:"text-white hover:text-white bg-zinc-900 hover:bg-zinc-800 border border-zinc-900 dark:bg-white dark:text-black dark:border-white dark:hover:bg-zinc-200",secondary:"text-zinc-900 border border-zinc-300 hover:border-zinc-400 bg-transparent hover:bg-zinc-50 dark:text-white dark:border-zinc-700 dark:hover:border-zinc-600 dark:hover:bg-zinc-900",outline:"text-zinc-900 border border-zinc-300 hover:border-zinc-400 bg-white dark:bg-transparent dark:text-white dark:border-zinc-700 dark:hover:bg-zinc-900",danger:"text-white bg-red-500 hover:bg-red-600 border border-red-500",ghost:"text-zinc-500 hover:bg-zinc-100 dark:text-zinc-400 dark:hover:bg-zinc-800 border-transparent"},e[5]=d):d=e[5];const m=`rounded-full font-bold inline-flex items-center justify-center relative overflow-hidden px-4 py-1.5 transition-all duration-200 active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed disabled:active:scale-100 touch-manipulation ${d[o]} ${i}`;let u;e[6]!==t?(u=(0,l.jsx)("div",{className:"flex items-center gap-x-1.5",children:t}),e[6]=t,e[7]=u):u=e[7];let c;return e[8]!==r||e[9]!==m||e[10]!==u?(c=(0,l.jsx)("button",{className:m,...r,children:u}),e[8]=r,e[9]=m,e[10]=u,e[11]=c):c=e[11],c},Qe=Wc,Vc=class extends g.Component{state={hasError:!1,error:null};static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,e){console.error("Uncaught error:",n,e)}render(){return this.state.hasError?(0,l.jsxs)("div",{className:"flex h-screen w-full flex-col items-center justify-center bg-white p-4 text-center dark:bg-black",children:[(0,l.jsx)("h2",{className:"mb-2 text-2xl font-bold text-zinc-900 dark:text-white",children:"Something went wrong"}),(0,l.jsx)("p",{className:"mb-6 max-w-md text-zinc-500 dark:text-zinc-400",children:this.state.error?.message||"An unexpected error occurred."}),(0,l.jsx)(Qe,{onClick:()=>window.location.reload(),className:"rounded-full bg-violet-600 px-6 py-2 font-bold text-white hover:bg-violet-700",children:"Reload Page"})]}):this.props.children}},Yc=Vc,Qc=ie(),wa=(0,g.createContext)(void 0);const Kc=n=>{const e=(0,Qc.c)(15),{children:t}=n,[r,s]=(0,g.useState)(null);let a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a=new Map,e[0]=a):a=e[0];const o=(0,g.useRef)(a);let i;e[1]!==r?(i=(b,x,v)=>{x===0?o.current.has(b)&&o.current.delete(b):o.current.set(b,{ratio:x,...v});let _=null,N=.5;for(const[S,E]of o.current.entries())E.ratio>N&&(N=E.ratio,_=S);_!==r&&s(_)},e[1]=r,e[2]=i):i=e[2];const d=i;let m,u;e[3]!==r?(m=()=>{o.current.forEach((b,x)=>{x===r?b.play():b.pause()})},u=[r],e[3]=r,e[4]=m,e[5]=u):(m=e[4],u=e[5]),(0,g.useEffect)(m,u);let c;e[6]!==r?(c=b=>{o.current.delete(b),r===b&&s(null)},e[6]=r,e[7]=c):c=e[7];const f=c;let h;e[8]!==r||e[9]!==d||e[10]!==f?(h={reportVisibility:d,unregister:f,activeVideoId:r},e[8]=r,e[9]=d,e[10]=f,e[11]=h):h=e[11];let p;return e[12]!==t||e[13]!==h?(p=(0,l.jsx)(wa.Provider,{value:h,children:t}),e[12]=t,e[13]=h,e[14]=p):p=e[14],p},Ih=()=>{const n=(0,g.useContext)(wa);if(!n)throw new Error("useVideoPlayback must be used within a VideoPlaybackProvider");return n};var zt=ie(),Ph=Hi;var Xc=bi,ja=g.forwardRef((n,e)=>{const t=(0,zt.c)(9);let r,s;t[0]!==n?({className:r,...s}=n,t[0]=n,t[1]=r,t[2]=s):(r=t[1],s=t[2]);let a;t[3]!==r?(a=$("fixed inset-0 z-50 bg-black/50 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),t[3]=r,t[4]=a):a=t[4];let o;return t[5]!==s||t[6]!==e||t[7]!==a?(o=(0,l.jsx)(Zs,{className:a,...s,ref:e}),t[5]=s,t[6]=e,t[7]=a,t[8]=o):o=t[8],o});ja.displayName=Zs.displayName;var Zc=g.forwardRef((n,e)=>{const t=(0,zt.c)(10);let r,s;t[0]!==n?({className:r,...s}=n,t[0]=n,t[1]=r,t[2]=s):(r=t[1],s=t[2]);let a;t[3]===Symbol.for("react.memo_cache_sentinel")?(a=(0,l.jsx)(ja,{}),t[3]=a):a=t[3];let o;t[4]!==r?(o=$("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border border-zinc-200 bg-white p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg dark:border-zinc-800 dark:bg-zinc-950",r),t[4]=r,t[5]=o):o=t[5];let i;return t[6]!==s||t[7]!==e||t[8]!==o?(i=(0,l.jsxs)(Xc,{children:[a,(0,l.jsx)(Ns,{ref:e,className:o,...s})]}),t[6]=s,t[7]=e,t[8]=o,t[9]=i):i=t[9],i});Zc.displayName=Ns.displayName;var Gc=n=>{const e=(0,zt.c)(8);let t,r;e[0]!==n?({className:t,...r}=n,e[0]=n,e[1]=t,e[2]=r):(t=e[1],r=e[2]);let s;e[3]!==t?(s=$("flex flex-col space-y-2 text-center sm:text-left",t),e[3]=t,e[4]=s):s=e[4];let a;return e[5]!==r||e[6]!==s?(a=(0,l.jsx)("div",{className:s,...r}),e[5]=r,e[6]=s,e[7]=a):a=e[7],a};Gc.displayName="AlertDialogHeader";var Jc=n=>{const e=(0,zt.c)(8);let t,r;e[0]!==n?({className:t,...r}=n,e[0]=n,e[1]=t,e[2]=r):(t=e[1],r=e[2]);let s;e[3]!==t?(s=$("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),e[3]=t,e[4]=s):s=e[4];let a;return e[5]!==r||e[6]!==s?(a=(0,l.jsx)("div",{className:s,...r}),e[5]=r,e[6]=s,e[7]=a):a=e[7],a};Jc.displayName="AlertDialogFooter";var $c=g.forwardRef((n,e)=>{const t=(0,zt.c)(9);let r,s;t[0]!==n?({className:r,...s}=n,t[0]=n,t[1]=r,t[2]=s):(r=t[1],s=t[2]);let a;t[3]!==r?(a=$("text-lg font-semibold",r),t[3]=r,t[4]=a):a=t[4];let o;return t[5]!==s||t[6]!==e||t[7]!==a?(o=(0,l.jsx)(bs,{ref:e,className:a,...s}),t[5]=s,t[6]=e,t[7]=a,t[8]=o):o=t[8],o});$c.displayName=bs.displayName;var ed=g.forwardRef((n,e)=>{const t=(0,zt.c)(9);let r,s;t[0]!==n?({className:r,...s}=n,t[0]=n,t[1]=r,t[2]=s):(r=t[1],s=t[2]);let a;t[3]!==r?(a=$("text-sm text-zinc-500 dark:text-zinc-400",r),t[3]=r,t[4]=a):a=t[4];let o;return t[5]!==s||t[6]!==e||t[7]!==a?(o=(0,l.jsx)(Xs,{ref:e,className:a,...s}),t[5]=s,t[6]=e,t[7]=a,t[8]=o):o=t[8],o});ed.displayName=Xs.displayName;var td=g.forwardRef((n,e)=>{const t=(0,zt.c)(9);let r,s;t[0]!==n?({className:r,...s}=n,t[0]=n,t[1]=r,t[2]=s):(r=t[1],s=t[2]);let a;t[3]!==r?(a=$("inline-flex items-center justify-center rounded-md bg-zinc-900 px-4 py-2 text-sm font-medium text-zinc-50 shadow transition-colors hover:bg-zinc-900/90 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-zinc-950 disabled:pointer-events-none disabled:opacity-50 dark:bg-zinc-50 dark:text-zinc-900 dark:hover:bg-zinc-50/90 dark:focus-visible:ring-zinc-300",r),t[3]=r,t[4]=a):a=t[4];let o;return t[5]!==s||t[6]!==e||t[7]!==a?(o=(0,l.jsx)(Is,{ref:e,className:a,...s}),t[5]=s,t[6]=e,t[7]=a,t[8]=o):o=t[8],o});td.displayName=Is.displayName;var nd=g.forwardRef((n,e)=>{const t=(0,zt.c)(9);let r,s;t[0]!==n?({className:r,...s}=n,t[0]=n,t[1]=r,t[2]=s):(r=t[1],s=t[2]);let a;t[3]!==r?(a=$("inline-flex items-center justify-center rounded-md border border-zinc-200 bg-white px-4 py-2 text-sm font-medium shadow-sm transition-colors hover:bg-zinc-100 hover:text-zinc-900 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-zinc-950 disabled:pointer-events-none disabled:opacity-50 dark:border-zinc-800 dark:bg-zinc-950 dark:hover:bg-zinc-800 dark:hover:text-zinc-50 dark:focus-visible:ring-zinc-300",r),t[3]=r,t[4]=a):a=t[4];let o;return t[5]!==s||t[6]!==e||t[7]!==a?(o=(0,l.jsx)(Ds,{ref:e,className:a,...s}),t[5]=s,t[6]=e,t[7]=a,t[8]=o):o=t[8],o});nd.displayName=Ds.displayName;var Xn=ie(),pt=g.forwardRef((n,e)=>{const t=(0,Xn.c)(9);let r,s;t[0]!==n?({className:r,...s}=n,t[0]=n,t[1]=r,t[2]=s):(r=t[1],s=t[2]);let a;t[3]!==r?(a=$("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",r),t[3]=r,t[4]=a):a=t[4];let o;return t[5]!==s||t[6]!==e||t[7]!==a?(o=(0,l.jsx)(Os,{ref:e,className:a,...s}),t[5]=s,t[6]=e,t[7]=a,t[8]=o):o=t[8],o});pt.displayName=Os.displayName;var gt=g.forwardRef((n,e)=>{const t=(0,Xn.c)(9);let r,s;t[0]!==n?({className:r,...s}=n,t[0]=n,t[1]=r,t[2]=s):(r=t[1],s=t[2]);let a;t[3]!==r?(a=$("aspect-square h-full w-full",r),t[3]=r,t[4]=a):a=t[4];let o;return t[5]!==s||t[6]!==e||t[7]!==a?(o=(0,l.jsx)(qs,{ref:e,className:a,...s}),t[5]=s,t[6]=e,t[7]=a,t[8]=o):o=t[8],o});gt.displayName=qs.displayName;var vt=g.forwardRef((n,e)=>{const t=(0,Xn.c)(9);let r,s;t[0]!==n?({className:r,...s}=n,t[0]=n,t[1]=r,t[2]=s):(r=t[1],s=t[2]);let a;t[3]!==r?(a=$("flex h-full w-full items-center justify-center rounded-full bg-zinc-100 dark:bg-zinc-800",r),t[3]=r,t[4]=a):a=t[4];let o;return t[5]!==s||t[6]!==e||t[7]!==a?(o=(0,l.jsx)(Rs,{ref:e,className:a,...s}),t[5]=s,t[6]=e,t[7]=a,t[8]=o):o=t[8],o});vt.displayName=Rs.displayName;var bt=ie(),Lh=Ei,Fh=ji;var rd=g.forwardRef((n,e)=>{const t=(0,bt.c)(14);let r,s,a,o;t[0]!==n?({className:s,inset:a,children:r,...o}=n,t[0]=n,t[1]=r,t[2]=s,t[3]=a,t[4]=o):(r=t[1],s=t[2],a=t[3],o=t[4]);const i=a&&"pl-8";let d;t[5]!==s||t[6]!==i?(d=$("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-zinc-100 focus:text-zinc-900 data-[state=open]:bg-zinc-100 data-[state=open]:text-zinc-900 dark:focus:bg-zinc-800 dark:focus:text-zinc-50 dark:data-[state=open]:bg-zinc-800 dark:data-[state=open]:text-zinc-50",i,s),t[5]=s,t[6]=i,t[7]=d):d=t[7];let m;t[8]===Symbol.for("react.memo_cache_sentinel")?(m=(0,l.jsx)(xn,{className:"ml-auto h-4 w-4"}),t[8]=m):m=t[8];let u;return t[9]!==r||t[10]!==o||t[11]!==e||t[12]!==d?(u=(0,l.jsxs)(Qs,{ref:e,className:d,...o,children:[r,m]}),t[9]=r,t[10]=o,t[11]=e,t[12]=d,t[13]=u):u=t[13],u});rd.displayName=Qs.displayName;var sd=g.forwardRef((n,e)=>{const t=(0,bt.c)(9);let r,s;t[0]!==n?({className:r,...s}=n,t[0]=n,t[1]=r,t[2]=s):(r=t[1],s=t[2]);let a;t[3]!==r?(a=$("z-50 min-w-[8rem] overflow-hidden rounded-md border border-zinc-200 bg-white p-1 text-zinc-950 shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 dark:border-zinc-800 dark:bg-zinc-950 dark:text-zinc-50",r),t[3]=r,t[4]=a):a=t[4];let o;return t[5]!==s||t[6]!==e||t[7]!==a?(o=(0,l.jsx)(Fs,{ref:e,className:a,...s}),t[5]=s,t[6]=e,t[7]=a,t[8]=o):o=t[8],o});sd.displayName=Fs.displayName;var ad=g.forwardRef((n,e)=>{const t=(0,bt.c)(9);let r,s;t[0]!==n?({className:r,...s}=n,t[0]=n,t[1]=r,t[2]=s):(r=t[1],s=t[2]);let a;t[3]!==r?(a=$("z-50 min-w-[8rem] overflow-hidden rounded-md border border-zinc-200 bg-white p-1 text-zinc-950 shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 dark:border-zinc-800 dark:bg-zinc-950 dark:text-zinc-50",r),t[3]=r,t[4]=a):a=t[4];let o;return t[5]!==s||t[6]!==e||t[7]!==a?(o=(0,l.jsx)(Ti,{children:(0,l.jsx)(gs,{ref:e,className:a,...s})}),t[5]=s,t[6]=e,t[7]=a,t[8]=o):o=t[8],o});ad.displayName=gs.displayName;var od=g.forwardRef((n,e)=>{const t=(0,bt.c)(11);let r,s,a;t[0]!==n?({className:r,inset:s,...a}=n,t[0]=n,t[1]=r,t[2]=s,t[3]=a):(r=t[1],s=t[2],a=t[3]);const o=s&&"pl-8";let i;t[4]!==r||t[5]!==o?(i=$("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-zinc-100 focus:text-zinc-900 data-[disabled]:pointer-events-none data-[disabled]:opacity-50 dark:focus:bg-zinc-800 dark:focus:text-zinc-50",o,r),t[4]=r,t[5]=o,t[6]=i):i=t[6];let d;return t[7]!==a||t[8]!==e||t[9]!==i?(d=(0,l.jsx)(As,{ref:e,className:i,...a}),t[7]=a,t[8]=e,t[9]=i,t[10]=d):d=t[10],d});od.displayName=As.displayName;var id=g.forwardRef((n,e)=>{const t=(0,bt.c)(14);let r,s,a,o;t[0]!==n?({className:a,children:s,checked:r,...o}=n,t[0]=n,t[1]=r,t[2]=s,t[3]=a,t[4]=o):(r=t[1],s=t[2],a=t[3],o=t[4]);let i;t[5]!==a?(i=$("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-zinc-100 focus:text-zinc-900 data-[disabled]:pointer-events-none data-[disabled]:opacity-50 dark:focus:bg-zinc-800 dark:focus:text-zinc-50",a),t[5]=a,t[6]=i):i=t[6];let d;t[7]===Symbol.for("react.memo_cache_sentinel")?(d=(0,l.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,l.jsx)(Ys,{children:(0,l.jsx)(Vn,{className:"h-4 w-4"})})}),t[7]=d):d=t[7];let m;return t[8]!==r||t[9]!==s||t[10]!==o||t[11]!==e||t[12]!==i?(m=(0,l.jsxs)(Cs,{ref:e,className:i,checked:r,...o,children:[d,s]}),t[8]=r,t[9]=s,t[10]=o,t[11]=e,t[12]=i,t[13]=m):m=t[13],m});id.displayName=Cs.displayName;var ld=g.forwardRef((n,e)=>{const t=(0,bt.c)(12);let r,s,a;t[0]!==n?({className:s,children:r,...a}=n,t[0]=n,t[1]=r,t[2]=s,t[3]=a):(r=t[1],s=t[2],a=t[3]);let o;t[4]!==s?(o=$("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-zinc-100 focus:text-zinc-900 data-[disabled]:pointer-events-none data-[disabled]:opacity-50 dark:focus:bg-zinc-800 dark:focus:text-zinc-50",s),t[4]=s,t[5]=o):o=t[5];let i;t[6]===Symbol.for("react.memo_cache_sentinel")?(i=(0,l.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,l.jsx)(Ys,{children:(0,l.jsx)(ms,{className:"h-2 w-2 fill-current"})})}),t[6]=i):i=t[6];let d;return t[7]!==r||t[8]!==a||t[9]!==e||t[10]!==o?(d=(0,l.jsxs)(zs,{ref:e,className:o,...a,children:[i,r]}),t[7]=r,t[8]=a,t[9]=e,t[10]=o,t[11]=d):d=t[11],d});ld.displayName=zs.displayName;var cd=g.forwardRef((n,e)=>{const t=(0,bt.c)(11);let r,s,a;t[0]!==n?({className:r,inset:s,...a}=n,t[0]=n,t[1]=r,t[2]=s,t[3]=a):(r=t[1],s=t[2],a=t[3]);const o=s&&"pl-8";let i;t[4]!==r||t[5]!==o?(i=$("px-2 py-1.5 text-sm font-semibold text-zinc-950 dark:text-zinc-50",o,r),t[4]=r,t[5]=o,t[6]=i):i=t[6];let d;return t[7]!==a||t[8]!==e||t[9]!==i?(d=(0,l.jsx)(Hs,{ref:e,className:i,...a}),t[7]=a,t[8]=e,t[9]=i,t[10]=d):d=t[10],d});cd.displayName=Hs.displayName;var dd=g.forwardRef((n,e)=>{const t=(0,bt.c)(9);let r,s;t[0]!==n?({className:r,...s}=n,t[0]=n,t[1]=r,t[2]=s):(r=t[1],s=t[2]);let a;t[3]!==r?(a=$("-mx-1 my-1 h-px bg-zinc-200 dark:bg-zinc-800",r),t[3]=r,t[4]=a):a=t[4];let o;return t[5]!==s||t[6]!==e||t[7]!==a?(o=(0,l.jsx)(Vs,{ref:e,className:a,...s}),t[5]=s,t[6]=e,t[7]=a,t[8]=o):o=t[8],o});dd.displayName=Vs.displayName;var ud=n=>{const e=(0,bt.c)(8);let t,r;e[0]!==n?({className:t,...r}=n,e[0]=n,e[1]=t,e[2]=r):(t=e[1],r=e[2]);let s;e[3]!==t?(s=$("ml-auto text-xs tracking-widest text-zinc-500 dark:text-zinc-400",t),e[3]=t,e[4]=s):s=e[4];let a;return e[5]!==r||e[6]!==s?(a=(0,l.jsx)("span",{className:s,...r}),e[5]=r,e[6]=s,e[7]=a):a=e[7],a};ud.displayName="ContextMenuShortcut";var Pt=ie(),ka=zi;var fd=ii;var Ca=g.forwardRef((n,e)=>{const t=(0,Pt.c)(9);let r,s;t[0]!==n?({className:r,...s}=n,t[0]=n,t[1]=r,t[2]=s):(r=t[1],s=t[2]);let a;t[3]!==r?(a=$("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),t[3]=r,t[4]=a):a=t[4];let o;return t[5]!==s||t[6]!==e||t[7]!==a?(o=(0,l.jsx)(ls,{ref:e,className:a,...s}),t[5]=s,t[6]=e,t[7]=a,t[8]=o):o=t[8],o});Ca.displayName=ls.displayName;var Zn=g.forwardRef((n,e)=>{const t=(0,Pt.c)(30);let r,s,a,o;t[0]!==n?({className:s,children:r,onDragClose:a,...o}=n,t[0]=n,t[1]=r,t[2]=s,t[3]=a,t[4]=o):(r=t[1],s=t[2],a=t[3],o=t[4]);const i=$o(),d=Jo(0);let m,u;t[5]===Symbol.for("react.memo_cache_sentinel")?(m=[0,200],u=[1,.5],t[5]=m,t[6]=u):(m=t[5],u=t[6]);const c=Mi(d,m,u);let f;t[7]!==i||t[8]!==a?(f=async(T,y)=>{y.offset.y>150||y.velocity.y>500?a?a():document.querySelector("[data-dialog-close]")?.click():i.start({y:0,transition:{type:"spring",stiffness:300,damping:30}})},t[7]=i,t[8]=a,t[9]=f):f=t[9];const h=f;let p;t[10]===Symbol.for("react.memo_cache_sentinel")?(p=(0,l.jsx)(Ca,{}),t[10]=p):p=t[10];let b,x;t[11]===Symbol.for("react.memo_cache_sentinel")?(b={top:0,bottom:0},x={top:0,bottom:.8},t[11]=b,t[12]=x):(b=t[11],x=t[12]);let v;t[13]!==c||t[14]!==d?(v={y:d,opacity:c},t[13]=c,t[14]=d,t[15]=v):v=t[15];let _;t[16]!==s?(_=$("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border border-zinc-200 bg-white p-6 shadow-lg duration-700 ease-[cubic-bezier(0.32,0.72,0,1)] data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:slide-out-to-bottom-full data-[state=open]:slide-in-from-bottom-full rounded-3xl dark:border-zinc-800 dark:bg-zinc-950",s),t[16]=s,t[17]=_):_=t[17];let N;t[18]===Symbol.for("react.memo_cache_sentinel")?(N=(0,l.jsx)("div",{className:"flex w-full items-center justify-center pt-2 pb-1 shrink-0",children:(0,l.jsx)("div",{className:"h-1.5 w-12 rounded-full bg-zinc-200 dark:bg-zinc-800"})}),t[18]=N):N=t[18];let S;t[19]===Symbol.for("react.memo_cache_sentinel")?(S=(0,l.jsxs)(Fi,{"data-dialog-close":!0,className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-white transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-zinc-950 focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-zinc-100 data-[state=open]:text-zinc-500 dark:ring-offset-zinc-950 dark:focus:ring-zinc-300 dark:data-[state=open]:bg-zinc-800 dark:data-[state=open]:text-zinc-400",children:[(0,l.jsx)(Mt,{className:"h-4 w-4"}),(0,l.jsx)("span",{className:"sr-only",children:"Close"})]}),t[19]=S):S=t[19];let E;t[20]!==r||t[21]!==i||t[22]!==h||t[23]!==v||t[24]!==_?(E=(0,l.jsxs)(pi.div,{drag:"y",dragConstraints:b,dragElastic:x,onDragEnd:h,animate:i,style:v,className:_,children:[N,r,S]}),t[20]=r,t[21]=i,t[22]=h,t[23]=v,t[24]=_,t[25]=E):E=t[25];let k;return t[26]!==o||t[27]!==e||t[28]!==E?(k=(0,l.jsxs)(fd,{children:[p,(0,l.jsx)(xs,{ref:e,asChild:!0,...o,children:E})]}),t[26]=o,t[27]=e,t[28]=E,t[29]=k):k=t[29],k});Zn.displayName=xs.displayName;var Gn=n=>{const e=(0,Pt.c)(8);let t,r;e[0]!==n?({className:t,...r}=n,e[0]=n,e[1]=t,e[2]=r):(t=e[1],r=e[2]);let s;e[3]!==t?(s=$("flex flex-col space-y-1.5 text-center sm:text-left",t),e[3]=t,e[4]=s):s=e[4];let a;return e[5]!==r||e[6]!==s?(a=(0,l.jsx)("div",{className:s,...r}),e[5]=r,e[6]=s,e[7]=a):a=e[7],a};Gn.displayName="DialogHeader";var Jn=n=>{const e=(0,Pt.c)(8);let t,r;e[0]!==n?({className:t,...r}=n,e[0]=n,e[1]=t,e[2]=r):(t=e[1],r=e[2]);let s;e[3]!==t?(s=$("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),e[3]=t,e[4]=s):s=e[4];let a;return e[5]!==r||e[6]!==s?(a=(0,l.jsx)("div",{className:s,...r}),e[5]=r,e[6]=s,e[7]=a):a=e[7],a};Jn.displayName="DialogFooter";var $n=g.forwardRef((n,e)=>{const t=(0,Pt.c)(9);let r,s;t[0]!==n?({className:r,...s}=n,t[0]=n,t[1]=r,t[2]=s):(r=t[1],s=t[2]);let a;t[3]!==r?(a=$("text-lg font-semibold leading-none tracking-tight",r),t[3]=r,t[4]=a):a=t[4];let o;return t[5]!==s||t[6]!==e||t[7]!==a?(o=(0,l.jsx)(as,{ref:e,className:a,...s}),t[5]=s,t[6]=e,t[7]=a,t[8]=o):o=t[8],o});$n.displayName=as.displayName;var _a=g.forwardRef((n,e)=>{const t=(0,Pt.c)(9);let r,s;t[0]!==n?({className:r,...s}=n,t[0]=n,t[1]=r,t[2]=s):(r=t[1],s=t[2]);let a;t[3]!==r?(a=$("text-sm text-zinc-500 dark:text-zinc-400",r),t[3]=r,t[4]=a):a=t[4];let o;return t[5]!==s||t[6]!==e||t[7]!==a?(o=(0,l.jsx)(cs,{ref:e,className:a,...s}),t[5]=s,t[6]=e,t[7]=a,t[8]=o):o=t[8],o});_a.displayName=cs.displayName;var xt=ie(),md=Ko,hd=Go,Oh=si;var pd=g.forwardRef((n,e)=>{const t=(0,xt.c)(14);let r,s,a,o;t[0]!==n?({className:s,inset:a,children:r,...o}=n,t[0]=n,t[1]=r,t[2]=s,t[3]=a,t[4]=o):(r=t[1],s=t[2],a=t[3],o=t[4]);const i=a&&"pl-8";let d;t[5]!==s||t[6]!==i?(d=$("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-zinc-100 data-[state=open]:bg-zinc-100 dark:focus:bg-zinc-800 dark:data-[state=open]:bg-zinc-800",i,s),t[5]=s,t[6]=i,t[7]=d):d=t[7];let m;t[8]===Symbol.for("react.memo_cache_sentinel")?(m=(0,l.jsx)(xn,{className:"ml-auto h-4 w-4"}),t[8]=m):m=t[8];let u;return t[9]!==r||t[10]!==o||t[11]!==e||t[12]!==d?(u=(0,l.jsxs)(ks,{ref:e,className:d,...o,children:[r,m]}),t[9]=r,t[10]=o,t[11]=e,t[12]=d,t[13]=u):u=t[13],u});pd.displayName=ks.displayName;var gd=g.forwardRef((n,e)=>{const t=(0,xt.c)(9);let r,s;t[0]!==n?({className:r,...s}=n,t[0]=n,t[1]=r,t[2]=s):(r=t[1],s=t[2]);let a;t[3]!==r?(a=$("z-50 min-w-[8rem] overflow-hidden rounded-md border border-zinc-200 bg-white p-1 text-zinc-950 shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 dark:border-zinc-800 dark:bg-zinc-950 dark:text-zinc-50",r),t[3]=r,t[4]=a):a=t[4];let o;return t[5]!==s||t[6]!==e||t[7]!==a?(o=(0,l.jsx)(ys,{ref:e,className:a,...s}),t[5]=s,t[6]=e,t[7]=a,t[8]=o):o=t[8],o});gd.displayName=ys.displayName;var Na=g.forwardRef((n,e)=>{const t=(0,xt.c)(11);let r,s,a;t[0]!==n?({className:r,sideOffset:a,...s}=n,t[0]=n,t[1]=r,t[2]=s,t[3]=a):(r=t[1],s=t[2],a=t[3]);const o=a===void 0?4:a;let i;t[4]!==r?(i=$("z-50 min-w-[8rem] overflow-hidden rounded-md border border-zinc-200 bg-white p-1 text-zinc-950 shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 dark:border-zinc-800 dark:bg-zinc-950 dark:text-zinc-50",r),t[4]=r,t[5]=i):i=t[5];let d;return t[6]!==s||t[7]!==e||t[8]!==o||t[9]!==i?(d=(0,l.jsx)(ni,{children:(0,l.jsx)(hs,{ref:e,sideOffset:o,className:i,...s})}),t[6]=s,t[7]=e,t[8]=o,t[9]=i,t[10]=d):d=t[10],d});Na.displayName=hs.displayName;var Pn=g.forwardRef((n,e)=>{const t=(0,xt.c)(13);let r,s,a,o;t[0]!==n?({className:r,inset:s,variant:o,...a}=n,t[0]=n,t[1]=r,t[2]=s,t[3]=a,t[4]=o):(r=t[1],s=t[2],a=t[3],o=t[4]);const i=o==="destructive"&&"text-rose-600 focus:bg-rose-50 focus:text-rose-600 dark:text-rose-500 dark:focus:bg-rose-950",d=s&&"pl-8";let m;t[5]!==r||t[6]!==i||t[7]!==d?(m=$("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-zinc-100 focus:text-zinc-900 data-[disabled]:pointer-events-none data-[disabled]:opacity-50 dark:focus:bg-zinc-800 dark:focus:text-zinc-50",i,d,r),t[5]=r,t[6]=i,t[7]=d,t[8]=m):m=t[8];let u;return t[9]!==a||t[10]!==e||t[11]!==m?(u=(0,l.jsx)(ps,{ref:e,className:m,...a}),t[9]=a,t[10]=e,t[11]=m,t[12]=u):u=t[12],u});Pn.displayName=ps.displayName;var vd=g.forwardRef((n,e)=>{const t=(0,xt.c)(14);let r,s,a,o;t[0]!==n?({className:a,children:s,checked:r,...o}=n,t[0]=n,t[1]=r,t[2]=s,t[3]=a,t[4]=o):(r=t[1],s=t[2],a=t[3],o=t[4]);let i;t[5]!==a?(i=$("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-zinc-100 focus:text-zinc-900 data-[disabled]:pointer-events-none data-[disabled]:opacity-50 dark:focus:bg-zinc-800 dark:focus:text-zinc-50",a),t[5]=a,t[6]=i):i=t[6];let d;t[7]===Symbol.for("react.memo_cache_sentinel")?(d=(0,l.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,l.jsx)(ds,{children:(0,l.jsx)(Vn,{className:"h-4 w-4"})})}),t[7]=d):d=t[7];let m;return t[8]!==r||t[9]!==s||t[10]!==o||t[11]!==e||t[12]!==i?(m=(0,l.jsxs)(Ps,{ref:e,className:i,checked:r,...o,children:[d,s]}),t[8]=r,t[9]=s,t[10]=o,t[11]=e,t[12]=i,t[13]=m):m=t[13],m});vd.displayName=Ps.displayName;var bd=g.forwardRef((n,e)=>{const t=(0,xt.c)(12);let r,s,a;t[0]!==n?({className:s,children:r,...a}=n,t[0]=n,t[1]=r,t[2]=s,t[3]=a):(r=t[1],s=t[2],a=t[3]);let o;t[4]!==s?(o=$("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-zinc-100 focus:text-zinc-900 data-[disabled]:pointer-events-none data-[disabled]:opacity-50 dark:focus:bg-zinc-800 dark:focus:text-zinc-50",s),t[4]=s,t[5]=o):o=t[5];let i;t[6]===Symbol.for("react.memo_cache_sentinel")?(i=(0,l.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,l.jsx)(ds,{children:(0,l.jsx)(ms,{className:"h-2 w-2 fill-current"})})}),t[6]=i):i=t[6];let d;return t[7]!==r||t[8]!==a||t[9]!==e||t[10]!==o?(d=(0,l.jsxs)(Gs,{ref:e,className:o,...a,children:[i,r]}),t[7]=r,t[8]=a,t[9]=e,t[10]=o,t[11]=d):d=t[11],d});bd.displayName=Gs.displayName;var xd=g.forwardRef((n,e)=>{const t=(0,xt.c)(11);let r,s,a;t[0]!==n?({className:r,inset:s,...a}=n,t[0]=n,t[1]=r,t[2]=s,t[3]=a):(r=t[1],s=t[2],a=t[3]);const o=s&&"pl-8";let i;t[4]!==r||t[5]!==o?(i=$("px-2 py-1.5 text-sm font-semibold",o,r),t[4]=r,t[5]=o,t[6]=i):i=t[6];let d;return t[7]!==a||t[8]!==e||t[9]!==i?(d=(0,l.jsx)(fs,{ref:e,className:i,...a}),t[7]=a,t[8]=e,t[9]=i,t[10]=d):d=t[10],d});xd.displayName=fs.displayName;var yd=g.forwardRef((n,e)=>{const t=(0,xt.c)(9);let r,s;t[0]!==n?({className:r,...s}=n,t[0]=n,t[1]=r,t[2]=s):(r=t[1],s=t[2]);let a;t[3]!==r?(a=$("-mx-1 my-1 h-px bg-zinc-100 dark:bg-zinc-800",r),t[3]=r,t[4]=a):a=t[4];let o;return t[5]!==s||t[6]!==e||t[7]!==a?(o=(0,l.jsx)(js,{ref:e,className:a,...s}),t[5]=s,t[6]=e,t[7]=a,t[8]=o):o=t[8],o});yd.displayName=js.displayName;var wd=n=>{const e=(0,xt.c)(8);let t,r;e[0]!==n?({className:t,...r}=n,e[0]=n,e[1]=t,e[2]=r):(t=e[1],r=e[2]);let s;e[3]!==t?(s=$("ml-auto text-xs tracking-widest opacity-60",t),e[3]=t,e[4]=s):s=e[4];let a;return e[5]!==r||e[6]!==s?(a=(0,l.jsx)("span",{className:s,...r}),e[5]=r,e[6]=s,e[7]=a):a=e[7],a};wd.displayName="DropdownMenuShortcut";var jd=Object.defineProperty,kd=(n,e)=>{for(var t in e)jd(n,t,{get:e[t],enumerable:!0})},yt={};kd(yt,{ActiveEmoji:()=>Ka,Empty:()=>Qa,List:()=>Wa,Loading:()=>Ya,Root:()=>La,Search:()=>Fa,SkinTone:()=>Xa,SkinToneSelector:()=>Va,Viewport:()=>Oa});var Sa="'Apple Color Emoji', 'Noto Color Emoji', 'Twemoji Mozilla', 'Android Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', EmojiSymbols, sans-serif",er=["none","light","medium-light","medium","medium-dark","dark"];function zn(n){return n.charAt(0).toUpperCase()+n.slice(1)}var st=2,Ue=null;function yr(n){try{Ue??=document.createElement("canvas").getContext("2d",{willReadFrequently:!0})}catch{}if(!Ue||(queueMicrotask(()=>{Ue&&(Ue=null)}),Ue.canvas.width=st,Ue.canvas.height=st,Ue.font=`2px ${Sa}`,Ue.textBaseline="middle",Ue.measureText(n).width>=st*2))return!1;Ue.fillStyle="#00f",Ue.fillText(n,0,0);let e=Ue.getImageData(0,0,st,st).data;Ue.clearRect(0,0,st,st),Ue.fillStyle="#f00",Ue.fillText(n,0,0);let t=Ue.getImageData(0,0,st,st).data;for(let r=0;r<st*st*4;r+=4)if(e[r]!==t[r]||e[r+1]!==t[r+1]||e[r+2]!==t[r+2])return!1;return!0}function wr(n,e,t){try{let r=n.getItem(e);if(!r)throw new Error(`No value found for "${e}".`);return t(JSON.parse(r))}catch{return null}}function za(n,e,t){n.setItem(e,JSON.stringify(t))}function jr(n){return e=>e===void 0?void 0:n(e)}function kr(n){return e=>e===null?null:n(e)}function Be(n){if(typeof n!="string")throw new Error;return n}function on(n){if(typeof n!="number")throw new Error;return n}function Aa(n){if(typeof n!="boolean")throw new Error;return n}function wt(n){return e=>{if(typeof e!="object"||e===null)throw new Error;let t={};for(let r in n){let s=e[r];s===void 0&&n[r](void 0),t[r]=n[r](s)}return t}}function An(n){return e=>{if(!Array.isArray(e))throw new Error;return e.length>0&&n(e[0]),e}}var Ea=(n,e)=>`${n}/${e}/data.json`,Ra=(n,e)=>`${n}/${e}/messages.json`,Cd=["bn","da","de","en-gb","en","es-mx","es","et","fi","fr","hi","hu","it","ja","ko","lt","ms","nb","nl","pl","pt","ru","sv","th","uk","vi","zh-hant","zh"],Cr="en",Ma=n=>`frimousse/data/${n}`,_r="frimousse/metadata";async function Nr(n,e){try{return(await fetch(n,{method:"HEAD",signal:e})).headers.get("etag")}catch{return null}}async function _d(n,e,t){let[{emojis:r,emojisEtag:s},{messages:a,messagesEtag:o}]=await Promise.all([fetch(Ea(n,e),{signal:t}).then(async i=>({emojis:await i.json(),emojisEtag:i.headers.get("etag")})),fetch(Ra(n,e),{signal:t}).then(async i=>({messages:await i.json(),messagesEtag:i.headers.get("etag")}))]);return{emojis:r,messages:a,emojisEtag:s,messagesEtag:o}}async function Nd(n,e,t){let[r,s]=await Promise.all([Nr(Ea(n,e),t),Nr(Ra(n,e),t)]);return{emojisEtag:r,messagesEtag:s}}function Sd(n){return n.skins?n.skins.filter(e=>typeof e.tone=="number").reduce((e,t)=>{let r=er[t.tone];return e[r]=t.emoji,e},{}):void 0}async function Sr(n,e,t){let{emojis:r,emojisEtag:s,messages:a,messagesEtag:o}=await _d(n,e,t),i=a.subgroups.find(h=>h.key==="country-flag"||h.key==="subdivision-flag"),d=a.groups.filter(h=>h.key!=="component"),m=r.filter(h=>"group"in h),u=d.map(h=>({index:h.order,label:zn(h.message)})),c=a.skinTones.reduce((h,p)=>(h[p.key]=zn(p.message),h),{}),f={locale:e,emojis:m.map(h=>({emoji:h.emoji,category:h.group,version:h.version,label:zn(h.label),tags:h.tags??[],countryFlag:i&&h.subgroup===i.order||void 0,skins:Sd(h)})),categories:u,skinTones:c};return za(localStorage,Ma(e),{data:f,metadata:{emojisEtag:s,messagesEtag:o}}),f}function zd(n,e){let t=new Map;for(let o of n)t.has(o.version)||t.set(o.version,o.emoji);let r=[...t.keys()].sort((o,i)=>i-o),s=r[0]??0,a=yr("");if(typeof e=="number")return{emojiVersion:e,countryFlags:a};for(let o of r)if(yr(t.get(o)))return{emojiVersion:o,countryFlags:a};return{emojiVersion:s,countryFlags:a}}var Ad=wt({emojiVersion:on,countryFlags:Aa}),Ed=wt({data:wt({locale:Be,emojis:An(wt({emoji:Be,category:on,label:Be,version:on,tags:An(Be),countryFlag:jr(Aa),skins:jr(wt({light:Be,"medium-light":Be,medium:Be,"medium-dark":Be,dark:Be}))})),categories:An(wt({index:on,label:Be})),skinTones:wt({light:Be,"medium-light":Be,medium:Be,"medium-dark":Be,dark:Be})}),metadata:wt({emojisEtag:kr(Be),messagesEtag:kr(Be)})});async function Rd({locale:n,emojiVersion:e,emojibaseUrl:t,signal:r}){let s=typeof t=="string"?t:`https://cdn.jsdelivr.net/npm/emojibase-data@${typeof e=="number"?Math.floor(e):"latest"}`,a=wr(sessionStorage,_r,Ad),o=wr(localStorage,Ma(n),Ed),i;if(!o)i=await Sr(s,n,r);else if(a)i=o.data;else try{let{emojisEtag:d,messagesEtag:m}=await Nd(s,n,r);i=!d||!m||d!==o.metadata.emojisEtag||m!==o.metadata.messagesEtag?await Sr(s,n,r):o.data}catch{i=o.data}return a??=zd(i.emojis,e),za(sessionStorage,_r,a),{locale:n,emojis:i.emojis.filter(d=>{let m=d.version<=a.emojiVersion;return d.countryFlag?m&&a.countryFlags:m}),categories:i.categories,skinTones:i.skinTones}}function zr(n){return Cd.includes(n)?n:(console.warn(`Locale "${n}" is not supported, using "${Cr}" instead.`),Cr)}function Ar(n){return er.includes(n)?n:(console.warn(`Skin tone "${n}" is not valid, using "none" instead.`),"none")}function Md(n,e){let t=[];if(e<=0)return t;for(let r=0,s=n.length;r<s;r+=e)t.push(n.slice(r,r+e));return t}function Dd(n,e){if(!e)return n;let t=e.toLowerCase().trim(),r=new WeakMap;return n.filter(s=>{let a=0;s.label.toLowerCase().includes(t)&&(a+=10);for(let o of s.tags)o.toLowerCase().includes(t)&&(a+=1);return a>0?(r.set(s,a),!0):!1}).sort((s,a)=>(r.get(a)??0)-(r.get(s)??0))}function Td(n,e,t,r){let s=Dd(n.emojis,r),a=[],o=[],i=[],d={},m=0,u=0;for(let c of s)d[c.category]||(d[c.category]=[]),d[c.category].push({emoji:t&&t!=="none"&&c.skins?c.skins[t]:c.emoji,label:c.label});for(let c of n.categories){let f=d[c.index];if(!f||f.length===0)continue;let h=Md(Array.from(f),e).map(p=>({categoryIndex:m,emojis:p}));a.push(...h),o.push({label:c.label,rowsCount:h.length,startRowIndex:u}),i.push(u),m++,u+=h.length}return{count:s.length,categories:o,categoriesStartRowIndices:i,rows:a,skinTones:n.skinTones}}function Id(n){let e={},t=null,r=null,s=new Set,a=()=>{if(t){e=t,t=null;for(let m of s)m(e)}r=null},o=()=>t??e,i=m=>{t??=e,Object.assign(t,typeof m=="function"?m(o()):m),r||(r=requestAnimationFrame(a))},d=m=>(s.add(m),()=>s.delete(m));return e=n(i,o),{get:o,set:i,subscribe:d}}function Pd(n){let[e]=(0,g.useState)(n);return e}function Ld(n){let e=(0,g.createContext)(null);return{useStore:()=>{let t=(0,g.useContext)(e);if(!t)throw new Error(n);return t},Provider:({store:t,children:r})=>(0,l.jsx)(e.Provider,{value:t,children:r})}}function Je(n,e,t=Object.is){let[r,s]=(0,g.useState)(()=>e(n.get()));return(0,g.useEffect)(()=>n.subscribe(()=>{let a=e(n.get());s(o=>t(o,a)?o:a)}),[n,e,t]),(0,g.useDebugValue)(r),r}function dt(n,e,t){return Je(n,(0,g.useCallback)(r=>r[e],[e]),t)}var Er=2;function Fd(n,e,t,r,s){let a=0;return Id((o,i)=>({locale:e,columns:t,sticky:r,skinTone:s,onEmojiSelect:n,data:null,search:"",interaction:"none",activeColumnIndex:0,activeRowIndex:0,rowHeight:null,categoryHeaderHeight:null,viewportWidth:null,viewportHeight:null,viewportCurrentCategoryIndex:null,viewportStartCategoryIndex:0,viewportStartRowIndex:0,viewportEndRowIndex:0,rootRef:null,searchRef:null,viewportRef:null,listRef:null,updateViewportState:d=>{let m=i(),u=d?.data??m.data,c=d?.categoryHeaderHeight??m.categoryHeaderHeight,f=d?.rowHeight??m.rowHeight,h=d?.viewportHeight??m.viewportHeight;if(!u||u.rows.length===0||!c||!f||!h)return o({...d,viewportStartCategoryIndex:0,viewportStartRowIndex:0,viewportEndRowIndex:0});let p=0,b=0;for(let y of u.categories)if(b++*c+y.startRowIndex*f<a)p+=c;else break;let x=u.categories.length*c+u.rows.length*f,v=Math.floor(Er*f/2),_=Math.ceil(Er*f/2),N=Math.min(a-p-v,x-h),S=N+h+_,E=Math.max(0,Math.floor(N/f)),k=Math.min(u.rows.length-1,Math.ceil(S/f)),T=u.rows[E]?.categoryIndex;return o(T===void 0&&d?d:{...d,viewportStartCategoryIndex:T,viewportStartRowIndex:E,viewportEndRowIndex:k})},onDataChange:d=>{i().updateViewportState({data:d,activeColumnIndex:0,activeRowIndex:0})},onSearchChange:d=>{o({search:d,interaction:d?"keyboard":"none"})},onActiveEmojiChange:(d,m,u)=>{if(o({interaction:d,activeColumnIndex:m,activeRowIndex:u}),d!=="keyboard")return;let{listRef:c,viewportRef:f,sticky:h,rowHeight:p,viewportHeight:b,categoryHeaderHeight:x}=i(),v=c?.current,_=f?.current;if(!v||!_||!p||!x||!b)return;let N=u;N===0&&_.scrollTo({top:0,behavior:"instant"});let S=v.querySelector(`[aria-rowindex="${N}"]`);if(!(S instanceof HTMLElement))return;let E=S.offsetTop,k=getComputedStyle(S),T=Number.parseFloat(k.scrollMarginTop),y=Number.parseFloat(k.scrollMarginBottom),w=a+T;h&&E<a+b/2&&(w+=x);let A=w+b-y;(E<w||E+p>A)&&_.scrollTo({top:Math.max(E<w+x?E-Math.max(h?x:0,T):E-b+p+y,0),behavior:"instant"})},onActiveEmojiReset:()=>{o({interaction:"none",activeColumnIndex:0,activeRowIndex:0})},onRowHeightChange:d=>{i().updateViewportState({rowHeight:d})},onCategoryHeaderHeightChange:d=>{i().updateViewportState({categoryHeaderHeight:d})},onViewportSizeChange:(d,m)=>{i().updateViewportState({viewportWidth:d,viewportHeight:m})},onViewportScroll:d=>{a=d,i().updateViewportState()}}))}var{useStore:Ke,Provider:Od}=Ld("EmojiPicker.Root is missing.");function Bd(n){return n.search}function tr(n){return n.interaction==="none"?void 0:n.data?.rows[n.activeRowIndex]?.emojis[n.activeColumnIndex]}function Hd(n){return n.data===void 0||typeof n.data?.count=="number"&&n.data.count===0}function Ud(n){return n.data===null||n.viewportHeight===null||n.rowHeight===null||n.categoryHeaderHeight===null}function Da(n){return n.data?.rows.length}function qd(n){return n.data?.categories.length}function Wd(n){return n.data?.categoriesStartRowIndices}function Vd(n){return n.data?.skinTones}function Ta(n,e){return n?.emoji===e?.emoji}function Yd(n,e){return n?.categoryIndex!==e?.categoryIndex||n?.emojis.length!==e?.emojis.length?!1:!!n?.emojis.every((t,r)=>Ta(t,e?.emojis[r]))}var Ht="",Rr=/\p{Emoji_Modifier_Base}/u,Qd=/\uFE0F$/,Kd=/\u{1F3FB}|\u{1F3FC}|\u{1F3FD}|\u{1F3FE}|\u{1F3FF}/gu,Xd={light:"","medium-light":"",medium:"","medium-dark":"",dark:""};function Zd(n,e){if(!n.split(Ht).some(r=>Rr.test(r)))return n;let t=n.split(Ht).map(r=>r.replace(Kd,"")).join(Ht);return e==="none"?t:t.split(Ht).map((r,s,a)=>{let o=a.length>1;return!Rr.test(r)||o&&r===""?r:r.replace(Qd,"")+Xd[e]}).join(Ht)}function Gd(n){return er.map(e=>({skinTone:e,emoji:Zd(n,e)}))}function Ia(){return(0,g.useDeferredValue)(Je(Ke(),tr,Ta))}function Pa(n=""){let e=Ke(),t=dt(e,"skinTone"),r=(0,g.useMemo)(()=>Gd(n),[n]);return[t,(0,g.useCallback)(s=>{e.set({skinTone:s})},[]),r]}function nr(n,e){if(Object.is(n,e))return!0;if(typeof n!="object"||typeof e!="object"||n===null||e===null||Array.isArray(n)!==Array.isArray(e))return!1;let t=Object.keys(n),r=Object.keys(e);return t.length!==r.length?!1:t.every(s=>s in e&&n[s]===e[s])}function Jd(...n){}function $d(n,e){let t=null;if(typeof window.requestIdleCallback=="function")t=window.requestIdleCallback(n,e);else{let r=Date.now();t=window.setTimeout(()=>{n({didTimeout:!1,timeRemaining:()=>Math.max(0,(e?.timeout??50)-(Date.now()-r))})},10)}return()=>{typeof window.cancelIdleCallback=="function"?window.cancelIdleCallback(t):window.clearTimeout(t)}}var ot=typeof window<"u"?g.useLayoutEffect:g.useEffect;function eu(n){let e=(0,g.useRef)(n);return ot(()=>{e.current=n}),(0,g.useCallback)((...t)=>e.current(...t),[])}function tu({emojiVersion:n,emojibaseUrl:e}){let[t,r]=(0,g.useState)(void 0),s=Ke(),a=dt(s,"locale"),o=dt(s,"columns"),i=dt(s,"skinTone"),d=dt(s,"search");return(0,g.useEffect)(()=>{let m=new AbortController,u=m.signal;return Rd({locale:a,emojiVersion:n,emojibaseUrl:e,signal:u}).then(c=>{r(c)}).catch(c=>{u.aborted||console.error(c)}),()=>{m.abort()}},[n,e,a]),(0,g.useEffect)(()=>{if(t)return $d(()=>{s.get().onDataChange(Td(t,o,i,d))},{timeout:100})},[t,o,i,d]),null}var La=(0,g.forwardRef)(({locale:n="en",columns:e=9,skinTone:t="none",onEmojiSelect:r=Jd,emojiVersion:s,emojibaseUrl:a,onFocusCapture:o,onBlurCapture:i,children:d,style:m,sticky:u=!0,...c},f)=>{let h=eu(r),p=Pd(()=>Fd(h,zr(n),e,u,Ar(t))),[b,x]=(0,g.useState)(!1),v=(0,g.useRef)(null),_=(0,g.useCallback)(E=>{E&&(v.current=E,p.set({rootRef:v}))},[]);ot(()=>{p.set({locale:zr(n)})},[n]),ot(()=>{p.set({columns:e})},[e]),ot(()=>{p.set({sticky:u})},[u]),ot(()=>{p.set({skinTone:Ar(t)})},[t]);let N=(0,g.useCallback)(E=>{o?.(E);let{searchRef:k,viewportRef:T}=p.get(),y=E.target===k?.current||E.target.hasAttribute("frimousse-search"),w=E.target===T?.current||E.target.hasAttribute("frimousse-viewport");E.isDefaultPrevented()||(x(y||w),E.isDefaultPrevented()||(x(y||w),w?p.get().onActiveEmojiChange("keyboard",0,0):y&&p.get().search===""&&p.set({interaction:"none"})))},[o]),S=(0,g.useCallback)(E=>{i?.(E),!E.isDefaultPrevented()&&!E.currentTarget.contains(E.relatedTarget)&&x(!1)},[i]);return ot(()=>{b||p.get().onActiveEmojiReset()},[b]),(0,g.useImperativeHandle)(f,()=>v.current),(0,g.useEffect)(()=>{if(!b)return;function E(k){if(k.defaultPrevented||!k.key.startsWith("Arrow")&&k.key!=="Enter")return;let{data:T,onEmojiSelect:y,onActiveEmojiChange:w,interaction:A,activeColumnIndex:M,activeRowIndex:R}=p.get();if(k.key==="Enter"){let D=tr(p.get());D&&(k.preventDefault(),y(D))}if(k.key.startsWith("Arrow")){let D=M,z=R;if(k.preventDefault(),A!=="none"){if(T?.rows&&T.rows.length>0)switch(k.key){case"ArrowLeft":if(D===0){let L=z-1,j=T.rows[L];j&&(z=L,D=j.emojis.length-1)}else D-=1;break;case"ArrowRight":if(D===T.rows[z].emojis.length-1){let L=z+1;T.rows[L]&&(z=L,D=0)}else D+=1;break;case"ArrowUp":{let L=T.rows[z-1];L&&(z-=1,L.emojis[D]||(D=L.emojis.length-1));break}case"ArrowDown":{let L=T.rows[z+1];L&&(z+=1,L.emojis[D]||(D=L.emojis.length-1));break}}w("keyboard",D,z)}else w("keyboard",0,0)}}return document.addEventListener("keydown",E),()=>{document.removeEventListener("keydown",E)}},[b]),ot(()=>{let E=null,k=null,T=null,y=null,w=p.subscribe(z=>{v.current&&(E!==z.viewportWidth&&(E=z.viewportWidth,v.current.style.setProperty("--frimousse-viewport-width",`${z.viewportWidth}px`)),k!==z.viewportHeight&&(k=z.viewportHeight,v.current.style.setProperty("--frimousse-viewport-height",`${z.viewportHeight}px`)),T!==z.rowHeight&&(T=z.rowHeight,v.current.style.setProperty("--frimousse-row-height",`${z.rowHeight}px`)),y!==z.categoryHeaderHeight&&(y=z.categoryHeaderHeight,v.current.style.setProperty("--frimousse-category-header-height",`${z.categoryHeaderHeight}px`)))}),{viewportWidth:A,viewportHeight:M,rowHeight:R,categoryHeaderHeight:D}=p.get();return A&&v.current.style.setProperty("--frimousse-viewport-width",`${A}px`),M&&v.current.style.setProperty("--frimousse-viewport-height",`${M}px`),R&&v.current.style.setProperty("--frimousse-row-height",`${R}px`),D&&v.current.style.setProperty("--frimousse-category-header-height",`${D}px`),w},[]),(0,l.jsx)("div",{"data-focused":b?"":void 0,"frimousse-root":"",onBlurCapture:S,onFocusCapture:N,...c,ref:_,style:{"--frimousse-emoji-font":Sa,...m},children:(0,l.jsxs)(Od,{store:p,children:[(0,l.jsx)(tu,{emojiVersion:s,emojibaseUrl:a}),d]})})}),Fa=(0,g.forwardRef)(({value:n,defaultValue:e,onChange:t,...r},s)=>{let a=Ke(),o=(0,g.useRef)(null),i=(0,g.useCallback)(c=>{c&&(o.current=c,a.set({searchRef:o}))},[]),d=typeof n=="string",m=(0,g.useRef)(d);(0,g.useEffect)(()=>{m.current=d},[d]),ot(()=>{a.set({search:typeof n=="string"?n:typeof e=="string"?e:""})},[]),ot(()=>{typeof n=="string"&&a.get().onSearchChange(n)},[n]);let u=(0,g.useCallback)(c=>{t?.(c),c.isDefaultPrevented()||a.get().onSearchChange(c.target.value)},[t]);return(0,g.useImperativeHandle)(s,()=>o.current),(0,l.jsx)("input",{autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",enterKeyHint:"done","frimousse-search":"",placeholder:"Search",spellCheck:!1,type:"search",...r,defaultValue:e,onChange:u,ref:i,value:n})}),nu=(0,g.memo)(()=>{let n=Ia();return n?(0,l.jsx)("div",{"aria-live":"polite",style:{border:0,clip:"rect(0, 0, 0, 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:1,wordWrap:"normal"},children:n.label}):null}),Oa=(0,g.forwardRef)(({children:n,onScroll:e,onKeyDown:t,style:r,...s},a)=>{let o=Ke(),i=(0,g.useRef)(null),d=(0,g.useCallback)(f=>{f&&(i.current=f,o.set({viewportRef:i}))},[]),m=Je(o,Da),u=Je(o,qd),c=(0,g.useCallback)(f=>{e?.(f),o.get().onViewportScroll(f.currentTarget.scrollTop)},[e]);return ot(()=>{if(!i.current)return;let f=new ResizeObserver(([h])=>{let p=h?.borderBoxSize[0]?.inlineSize??0,b=h?.borderBoxSize[0]?.blockSize??0,{onViewportSizeChange:x,viewportHeight:v,viewportWidth:_}=o.get();(v!==b||_!==p)&&x(p,b)});return f.observe(i.current),o.get().onViewportSizeChange(i.current.offsetWidth,i.current.clientHeight),()=>{f.disconnect()}},[]),(0,g.useImperativeHandle)(a,()=>i.current),(0,l.jsxs)("div",{"frimousse-viewport":"",...s,onScroll:c,ref:d,style:{position:"relative",boxSizing:"border-box",contain:"layout paint",containIntrinsicSize:typeof m=="number"&&typeof u=="number"?`var(--frimousse-viewport-width, auto) calc(${m} * var(--frimousse-row-height) + ${u} * var(--frimousse-category-header-height))`:void 0,overflowY:"auto",overscrollBehavior:"contain",scrollbarGutter:"stable",willChange:"scroll-position",...r},children:[(0,l.jsx)(nu,{}),n]})});function Ba(n,e,t){return{emoji:{...n,isActive:t},role:"gridcell","aria-colindex":e,"aria-selected":t||void 0,"aria-label":n.label,"data-active":t?"":void 0,"frimousse-emoji":"",style:{fontFamily:"var(--frimousse-emoji-font)"},tabIndex:-1}}function Ha(n,e=!1){return{role:e?void 0:"row","aria-rowindex":e?void 0:n,"frimousse-row":"",style:{contain:e?void 0:"content",height:e?void 0:"var(--frimousse-row-height)",display:"flex"}}}function Ua(n,e){return{"frimousse-category":"",style:{contain:"content",top:e?`calc(${n} * var(--frimousse-category-header-height) + ${e.startRowIndex} * var(--frimousse-row-height))`:void 0,height:e?`calc(var(--frimousse-category-header-height) + ${e.rowsCount} * var(--frimousse-row-height))`:void 0,width:"100%",pointerEvents:"none",position:"absolute"}}}function qa(n,e=!1,t=!0){return{category:n,"frimousse-category-header":"",style:{contain:e?void 0:"layout paint",height:e?void 0:"var(--frimousse-category-header-height)",pointerEvents:"auto",position:t?"sticky":void 0,top:0}}}function Mr(n,e,t,r){return{"frimousse-list-sizer":"",style:{position:"relative",boxSizing:"border-box",height:`calc(${n} * var(--frimousse-row-height) + ${e} * var(--frimousse-category-header-height))`,paddingTop:`calc(${t} * var(--frimousse-row-height) + ${r} * var(--frimousse-category-header-height))`}}}function Dr(n,e,t){return{"aria-colcount":n,"aria-rowcount":e,"frimousse-list":"",style:{"--frimousse-list-columns":n,...t},role:"grid"}}function ru(n){n.preventDefault()}var su=(0,g.memo)(({Emoji:n,emoji:e,columnIndex:t,rowIndex:r})=>{let s=Ke(),a=Je(s,m=>tr(m)?.emoji===e.emoji),o=(0,g.useCallback)(()=>{s.get().onEmojiSelect(e)},[e]),i=(0,g.useCallback)(()=>{s.get().onActiveEmojiChange("pointer",t,r)},[t,r]),d=(0,g.useCallback)(()=>{s.get().onActiveEmojiReset()},[]);return(0,l.jsx)(n,{...Ba(e,t,a),onClick:o,onPointerDown:ru,onPointerEnter:i,onPointerLeave:d})}),au=(0,g.memo)(({Row:n,Emoji:e,rowIndex:t})=>{let r=Je(Ke(),s=>s.data?.rows[t],Yd);return r?(0,l.jsx)(n,{...Ha(t),children:r.emojis.map((s,a)=>(0,l.jsx)(su,{Emoji:e,columnIndex:a,emoji:s,rowIndex:t},s.label))}):null}),ou=(0,g.memo)(({CategoryHeader:n,categoryIndex:e})=>{let t=Ke(),r=Je(t,a=>a.data?.categories[e],nr),s=dt(t,"sticky");return r?(0,l.jsx)("div",{...Ua(e,r),children:(0,l.jsx)(n,{...qa({label:r.label},!1,s)})}):null}),Tr=(0,g.memo)(({CategoryHeader:n,Row:e,Emoji:t})=>{let r=(0,g.useRef)(null),s=Ke(),a=dt(s,"columns"),o=(0,g.useMemo)(()=>Array(a).fill({emoji:"",label:""}),[a]),i=(0,g.useMemo)(()=>({label:"Category"}),[]),d=(0,g.useRef)(null),m=(0,g.useRef)(null);return ot(()=>{let u=r.current?.parentElement?.parentElement;if(!u||!d.current||!m.current)return;let c=new ResizeObserver(p=>{for(let b of p){let x=b.contentRect.height,{onRowHeightChange:v,onCategoryHeaderHeightChange:_,rowHeight:N,categoryHeaderHeight:S}=s.get();b.target===d.current&&N!==x&&v(x),b.target===m.current&&S!==x&&_(x)}});c.observe(u),c.observe(d.current),c.observe(m.current);let{onRowHeightChange:f,onCategoryHeaderHeightChange:h}=s.get();return f(d.current.clientHeight),h(m.current.clientHeight),()=>{c.disconnect()}},[]),(0,l.jsxs)("div",{"aria-hidden":!0,ref:r,style:{height:0,visibility:"hidden"},children:[(0,l.jsx)("div",{"frimousse-row-sizer":"",ref:d,children:(0,l.jsx)(e,{...Ha(-1,!0),children:o.map((u,c)=>(0,l.jsx)(t,{...Ba(u,c,!1)},c))})}),(0,l.jsx)("div",{...Ua(-1),children:(0,l.jsx)("div",{"frimousse-category-header-sizer":"",ref:m,children:(0,l.jsx)(n,{...qa(i,!0)})})})]})});function iu({category:n,...e}){return(0,l.jsx)("div",{...e,children:n.label})}function lu({emoji:n,...e}){return(0,l.jsx)("button",{type:"button",...e,children:n.emoji})}function cu({...n}){return(0,l.jsx)("div",{...n})}var Wa=(0,g.forwardRef)(({style:n,components:e,...t},r)=>{let s=Ke(),a=(0,g.useRef)(null),o=(0,g.useCallback)(v=>{v&&(a.current=v,s.set({listRef:a}))},[]),i=e?.CategoryHeader??iu,d=e?.Emoji??lu,m=e?.Row??cu,u=dt(s,"columns"),c=dt(s,"viewportStartRowIndex"),f=dt(s,"viewportEndRowIndex"),h=Je(s,Da),p=Je(s,Wd,nr),b=(0,g.useMemo)(()=>p?.filter(v=>v<c).length??0,[p,c]),x=p?.length??0;return(0,g.useImperativeHandle)(r,()=>a.current),!h||!p||x===0?(0,l.jsx)("div",{...Dr(u,0,n),...t,children:(0,l.jsx)("div",{...Mr(0,0,0,0),children:(0,l.jsx)(Tr,{CategoryHeader:i,Emoji:d,Row:m})})}):(0,l.jsx)("div",{...Dr(u,h,n),...t,ref:o,children:(0,l.jsxs)("div",{...Mr(h,x,c,b),children:[(0,l.jsx)(Tr,{CategoryHeader:i,Emoji:d,Row:m}),Array.from({length:f-c+1},(v,_)=>{let N=c+_;return(0,l.jsxs)(g.Fragment,{children:[p.indexOf(N)>=0&&(0,l.jsx)("div",{style:{height:"var(--frimousse-category-header-height)"}}),(0,l.jsx)(au,{Emoji:d,Row:m,rowIndex:N})]},N)}),Array.from({length:x},(v,_)=>(0,l.jsx)(ou,{CategoryHeader:i,categoryIndex:_},_))]})})}),Va=(0,g.forwardRef)(({emoji:n,onClick:e,"aria-label":t="Change skin tone",...r},s)=>{let a=Je(Ke(),Vd,nr),[o,i,d]=Pa(n),m=(0,g.useMemo)(()=>Math.max(0,d.findIndex(b=>b.skinTone===o)),[o,d]),u=d[m],c=d[(m+1)%d.length].skinTone,f=o==="none"?void 0:a?.[o],h=c==="none"?void 0:a?.[c],p=(0,g.useCallback)(b=>{e?.(b),b.isDefaultPrevented()||i(c)},[e,i,c]);return(0,l.jsx)("button",{type:"button",...r,"aria-label":t+(h?` (${h})`:""),"aria-live":"polite","aria-valuetext":f,"frimousse-skin-tone-selector":"",onClick:p,ref:s,children:u.emoji})});function Ya({children:n,...e}){return Je(Ke(),Ud)?(0,l.jsx)("span",{"frimousse-loading":"",...e,children:n}):null}function du({children:n}){return n({search:Je(Ke(),Bd)})}function Qa({children:n,...e}){return Je(Ke(),Hd)?(0,l.jsx)("span",{"frimousse-empty":"",...e,children:typeof n=="function"?(0,l.jsx)(du,{children:n}):n}):null}function Ka({children:n}){return n({emoji:Ia()})}function Xa({children:n,emoji:e}){let[t,r,s]=Pa(e);return n({skinTone:t,setSkinTone:r,skinToneVariations:s})}La.displayName="EmojiPicker.Root";Fa.displayName="EmojiPicker.Search";Oa.displayName="EmojiPicker.Viewport";Wa.displayName="EmojiPicker.List";Ya.displayName="EmojiPicker.Loading";Qa.displayName="EmojiPicker.Empty";Va.displayName="EmojiPicker.SkinToneSelector";Ka.displayName="EmojiPicker.ActiveEmoji";Xa.displayName="EmojiPicker.SkinTone";var uu=ie(),fu=n=>{const e=(0,uu.c)(10),{onEmojiSelect:t,className:r}=n;let s;e[0]!==r?(s=$("isolate flex h-[350px] w-[320px] flex-col overflow-hidden rounded-xl border border-zinc-200 bg-white shadow-xl dark:border-zinc-800 dark:bg-zinc-950",r),e[0]=r,e[1]=s):s=e[1];let a;e[2]===Symbol.for("react.memo_cache_sentinel")?(a=(0,l.jsx)(yt.Search,{className:"z-10 mx-3 mt-3 appearance-none rounded-lg border-none bg-zinc-100 px-3 py-2 text-sm outline-none placeholder:text-zinc-500 focus:ring-1 focus:ring-violet-500 dark:bg-zinc-900 dark:text-white",placeholder:"Search emojis..."}),e[2]=a):a=e[2];let o,i;e[3]===Symbol.for("react.memo_cache_sentinel")?(o=(0,l.jsx)(yt.Loading,{className:"absolute inset-0 flex items-center justify-center text-sm text-zinc-400 dark:text-zinc-500",children:"Loading"}),i=(0,l.jsx)(yt.Empty,{className:"absolute inset-0 flex items-center justify-center text-sm text-zinc-400 dark:text-zinc-500",children:"No emoji found."}),e[3]=o,e[4]=i):(o=e[3],i=e[4]);let d,m;e[5]===Symbol.for("react.memo_cache_sentinel")?(d=(0,l.jsxs)(yt.Viewport,{className:"relative flex-1 outline-none no-scrollbar",children:[o,i,(0,l.jsx)(yt.List,{className:"select-none pb-2",components:{CategoryHeader:mu,Row:hu,Emoji:pu}})]}),m=(0,l.jsx)(yt.ActiveEmoji,{children:gu}),e[5]=d,e[6]=m):(d=e[5],m=e[6]);let u;return e[7]!==t||e[8]!==s?(u=(0,l.jsxs)(yt.Root,{onEmojiSelect:t,className:s,children:[a,d,m]}),e[7]=t,e[8]=s,e[9]=u):u=e[9],u},Bh=fu;function mu(n){const{category:e,...t}=n;return(0,l.jsx)("div",{className:"bg-white/80 px-4 pb-1.5 pt-4 text-[11px] font-bold uppercase tracking-wider text-zinc-500 backdrop-blur-sm dark:bg-zinc-950/80 dark:text-zinc-400",...t,children:e.label})}function hu(n){const{children:e,...t}=n;return(0,l.jsx)("div",{className:"scroll-my-1 px-2",...t,children:e})}function pu(n){const{emoji:e,...t}=n;return(0,l.jsx)("button",{className:"flex aspect-square size-9 items-center justify-center rounded-lg text-xl transition-colors hover:bg-zinc-100 data-[active]:bg-violet-500/10 data-[active]:text-violet-500 dark:hover:bg-zinc-900 dark:data-[active]:bg-violet-500/20",...t,children:e.emoji})}function gu(n){const{emoji:e}=n;return(0,l.jsx)("div",{className:"flex items-center gap-3 border-t border-zinc-100 p-3 dark:border-zinc-800",children:e?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{className:"text-2xl",children:e.emoji}),(0,l.jsx)("span",{className:"truncate text-xs font-bold text-zinc-600 dark:text-zinc-400",children:e.label.replace(/:/g,"").replace(/_/g," ")})]}):(0,l.jsx)("span",{className:"text-xs font-medium text-zinc-400",children:"Select an emoji..."})})}var vu=ie(),bu=n=>{const e=(0,vu.c)(33),{src:t,isOpen:r,onClose:s,onCropComplete:a,aspect:o,circular:i}=n,[d,m]=(0,g.useState)(),[u,c]=(0,g.useState)(null),f=(0,g.useRef)(null);let h;e[0]!==o?(h=R=>{const{width:D,height:z}=R.currentTarget;m(o?Bo(Ho({unit:"%",width:100},o,D,z),D,z):{unit:"%",width:100,height:100,x:0,y:0})},e[0]=o,e[1]=h):h=e[1];const p=h;let b;e[2]!==u||e[3]!==s||e[4]!==a?(b=async()=>{if(u&&f.current)try{a(await Ki(f.current,u)),s()}catch(R){console.error("Error cropping image:",R)}},e[2]=u,e[3]=s,e[4]=a,e[5]=b):b=e[5];const x=b;let v;e[6]!==s?(v=R=>!R&&s(),e[6]=s,e[7]=v):v=e[7];let _;e[8]===Symbol.for("react.memo_cache_sentinel")?(_=(0,l.jsx)(Gn,{className:"shrink-0 p-4",children:(0,l.jsx)($n,{children:"Crop Image"})}),e[8]=_):_=e[8];let N,S;e[9]===Symbol.for("react.memo_cache_sentinel")?(N=R=>m(R),S=R=>c(R),e[9]=N,e[10]=S):(N=e[9],S=e[10]);let E;e[11]!==p||e[12]!==t?(E=(0,l.jsx)("img",{ref:f,src:t,alt:"Crop preview",onLoad:p,className:"block max-h-[60vh] w-auto"}),e[11]=p,e[12]=t,e[13]=E):E=e[13];let k;e[14]!==o||e[15]!==i||e[16]!==d||e[17]!==E?(k=(0,l.jsx)("div",{className:"flex max-h-[65vh] min-h-[300px] items-center justify-center overflow-auto bg-zinc-100/50 p-6 dark:bg-zinc-950/50",children:(0,l.jsx)(Lo,{crop:d,onChange:N,onComplete:S,aspect:o,circularCrop:i,className:"max-w-full shadow-2xl",children:E})}),e[14]=o,e[15]=i,e[16]=d,e[17]=E,e[18]=k):k=e[18];let T;e[19]!==s?(T=(0,l.jsx)(Qe,{variant:"outline",onClick:s,className:"!w-auto px-6",children:"Cancel"}),e[19]=s,e[20]=T):T=e[20];let y;e[21]!==x?(y=(0,l.jsx)(Qe,{onClick:x,className:"!w-auto px-6",children:"Apply Crop"}),e[21]=x,e[22]=y):y=e[22];let w;e[23]!==y||e[24]!==T?(w=(0,l.jsxs)(Jn,{className:"flex shrink-0 flex-row justify-end gap-2 bg-white p-4 dark:bg-zinc-900",children:[T,y]}),e[23]=y,e[24]=T,e[25]=w):w=e[25];let A;e[26]!==w||e[27]!==k?(A=(0,l.jsxs)(Zn,{className:"overflow-hidden bg-white p-0 sm:max-w-2xl dark:bg-zinc-900",children:[_,k,w]}),e[26]=w,e[27]=k,e[28]=A):A=e[28];let M;return e[29]!==r||e[30]!==A||e[31]!==v?(M=(0,l.jsx)(ka,{open:r,onOpenChange:v,children:A}),e[29]=r,e[30]=A,e[31]=v,e[32]=M):M=e[32],M},xu=bu,yu=ie(),wu=n=>{const e=(0,yu.c)(105),{images:t,currentIndex:r,onClose:s,onNavigate:a}=n,o=r===void 0?0:r,[i,d]=(0,g.useState)(1);let m;e[0]===Symbol.for("react.memo_cache_sentinel")?(m={x:0,y:0},e[0]=m):m=e[0];const[u,c]=(0,g.useState)(m),[f,h]=(0,g.useState)(!1);let p;e[1]===Symbol.for("react.memo_cache_sentinel")?(p={x:0,y:0},e[1]=p):p=e[1];const[b,x]=(0,g.useState)(p),[v,_]=(0,g.useState)(null),[N,S]=(0,g.useState)(null),E=(0,g.useRef)(null),k=(0,g.useRef)(null);let T;e[2]===Symbol.for("react.memo_cache_sentinel")?(T=()=>d(ku),e[2]=T):T=e[2];const y=T;let w;e[3]===Symbol.for("react.memo_cache_sentinel")?(w=()=>{d(ne=>{const _e=Math.max(ne-.5,1);return _e===1&&c({x:0,y:0}),_e})},e[3]=w):w=e[3];const A=w;let M;e[4]===Symbol.for("react.memo_cache_sentinel")?(M=()=>{d(1),c({x:0,y:0})},e[4]=M):M=e[4];const R=M;let D;e[5]!==o||e[6]!==a?(D=()=>{o>0&&(R(),a(o-1))},e[5]=o,e[6]=a,e[7]=D):D=e[7];const z=D;let L;e[8]!==o||e[9]!==t?.length||e[10]!==a?(L=()=>{o<(t?.length||0)-1&&(R(),a(o+1))},e[8]=o,e[9]=t?.length,e[10]=a,e[11]=L):L=e[11],t?.length;const j=L;let C;e[12]!==j||e[13]!==z||e[14]!==s?(C=()=>{const ne=_e=>{_e.key==="Escape"&&s(),_e.key==="ArrowLeft"&&z(),_e.key==="ArrowRight"&&j()};return window.addEventListener("keydown",ne),()=>window.removeEventListener("keydown",ne)},e[12]=j,e[13]=z,e[14]=s,e[15]=C):C=e[15];let P;if(e[16]!==o||e[17]!==j||e[18]!==z||e[19]!==s?(P=[o,s,z,j],e[16]=o,e[17]=j,e[18]=z,e[19]=s,e[20]=P):P=e[20],(0,g.useEffect)(C,P),!t||t.length===0)return null;const I=t[o],F=t.length>1;let q;e[21]!==u.x||e[22]!==u.y||e[23]!==i?(q=ne=>{i>1&&(h(!0),x({x:ne.clientX-u.x,y:ne.clientY-u.y}))},e[21]=u.x,e[22]=u.y,e[23]=i,e[24]=q):q=e[24];const H=q;let U;e[25]!==b||e[26]!==f||e[27]!==i?(U=ne=>{f&&i>1&&c({x:ne.clientX-b.x,y:ne.clientY-b.y})},e[25]=b,e[26]=f,e[27]=i,e[28]=U):U=e[28];const B=U;let O;e[29]===Symbol.for("react.memo_cache_sentinel")?(O=()=>h(!1),e[29]=O):O=e[29];const V=O;let X;e[30]!==u.x||e[31]!==u.y||e[32]!==i?(X=ne=>{ne.touches.length===1?(_({x:ne.touches[0].clientX,y:ne.touches[0].clientY,time:Date.now()}),i>1&&(h(!0),x({x:ne.touches[0].clientX-u.x,y:ne.touches[0].clientY-u.y}))):ne.touches.length===2&&S(Math.hypot(ne.touches[0].clientX-ne.touches[1].clientX,ne.touches[0].clientY-ne.touches[1].clientY))},e[30]=u.x,e[31]=u.y,e[32]=i,e[33]=X):X=e[33];const Y=X;let W;e[34]!==b||e[35]!==N||e[36]!==f||e[37]!==i?(W=ne=>{if(ne.touches.length===1)f&&i>1&&c({x:ne.touches[0].clientX-b.x,y:ne.touches[0].clientY-b.y});else if(ne.touches.length===2&&N){const _e=Math.hypot(ne.touches[0].clientX-ne.touches[1].clientX,ne.touches[0].clientY-ne.touches[1].clientY);d(Math.min(Math.max(i*(_e/N),1),4)),S(_e)}},e[34]=b,e[35]=N,e[36]=f,e[37]=i,e[38]=W):W=e[38];const G=W;let K;e[39]!==j||e[40]!==z||e[41]!==i||e[42]!==v?(K=ne=>{if(ne.touches.length<2&&S(null),h(!1),v&&i===1){const _e={x:ne.changedTouches[0].clientX,y:ne.changedTouches[0].clientY},ze=_e.x-v.x,Re=_e.y-v.y,Ie=Date.now()-v.time;Math.abs(ze)>50&&Math.abs(Re)<50&&Ie<300&&(ze>0?z():j())}_(null)},e[39]=j,e[40]=z,e[41]=i,e[42]=v,e[43]=K):K=e[43];const J=K;let ue;e[44]!==I?(ue=ne=>{ne.stopPropagation();const _e=document.createElement("a");_e.href=I,_e.download=`sysm-${Date.now()}.jpg`,document.body.appendChild(_e),_e.click(),document.body.removeChild(_e)},e[44]=I,e[45]=ue):ue=e[45];const ee=ue,te=F?`${o+1} / ${t.length}`:"Image View";let ge;e[46]!==te?(ge=(0,l.jsx)("div",{className:"flex flex-col",children:(0,l.jsx)("span",{className:"text-lg font-bold text-white drop-shadow-md",children:te})}),e[46]=te,e[47]=ge):ge=e[47];let ae;e[48]===Symbol.for("react.memo_cache_sentinel")?(ae=(0,l.jsx)("button",{onClick:A,className:"hidden rounded-full p-2 text-white transition-colors hover:bg-white/10 sm:block",children:(0,l.jsx)(ri,{size:20})}),e[48]=ae):ae=e[48];let he;e[49]===Symbol.for("react.memo_cache_sentinel")?(he=(0,l.jsx)("button",{onClick:y,className:"hidden rounded-full p-2 text-white transition-colors hover:bg-white/10 sm:block",children:(0,l.jsx)(ai,{size:20})}),e[49]=he):he=e[49];let re;e[50]===Symbol.for("react.memo_cache_sentinel")?(re=(0,l.jsx)("button",{onClick:R,className:"rounded-full p-2 text-white transition-colors hover:bg-white/10",children:(0,l.jsx)(ki,{size:20})}),e[50]=re):re=e[50];let je;e[51]===Symbol.for("react.memo_cache_sentinel")?(je=(0,l.jsx)(Zo,{size:20}),e[51]=je):je=e[51];let ke;e[52]!==ee?(ke=(0,l.jsx)("button",{onClick:ee,className:"rounded-full p-2 text-white transition-colors hover:bg-white/10",children:je}),e[52]=ee,e[53]=ke):ke=e[53];let le;e[54]===Symbol.for("react.memo_cache_sentinel")?(le=(0,l.jsx)("div",{className:"mx-1 hidden h-6 w-px bg-white/20 sm:block"}),e[54]=le):le=e[54];let pe;e[55]===Symbol.for("react.memo_cache_sentinel")?(pe=(0,l.jsx)(Mt,{size:24}),e[55]=pe):pe=e[55];let fe;e[56]!==s?(fe=(0,l.jsx)("button",{onClick:s,className:"rounded-full bg-white/10 p-2 text-white transition-all hover:bg-white/20",children:pe}),e[56]=s,e[57]=fe):fe=e[57];let se;e[58]!==ke||e[59]!==fe?(se=(0,l.jsxs)("div",{className:"flex items-center gap-1 sm:gap-3",onClick:Cu,children:[ae,he,re,ke,le,fe]}),e[58]=ke,e[59]=fe,e[60]=se):se=e[60];let de;e[61]!==ge||e[62]!==se?(de=(0,l.jsxs)("div",{className:"absolute left-0 right-0 top-0 z-20 flex items-center justify-between bg-gradient-to-b from-black/60 to-transparent p-4",children:[ge,se]}),e[61]=ge,e[62]=se,e[63]=de):de=e[63];let me;e[64]!==o||e[65]!==z||e[66]!==F||e[67]!==i?(me=F&&o>0&&i===1&&(0,l.jsx)("button",{onClick:ne=>{ne.stopPropagation(),z()},className:"absolute left-6 z-10 hidden rounded-full bg-white/5 p-4 text-white backdrop-blur-sm transition-all hover:bg-white/10 active:scale-90 md:flex",children:(0,l.jsx)(us,{size:32})}),e[64]=o,e[65]=z,e[66]=F,e[67]=i,e[68]=me):me=e[68];const ye=`translate(${u.x}px, ${u.y}px) scale(${i})`;let ce;e[69]!==ye?(ce={transform:ye},e[69]=ye,e[70]=ce):ce=e[70];let oe;e[71]!==I?(oe=(0,l.jsx)("img",{ref:k,src:I,className:"max-h-[85vh] max-w-[95vw] select-none rounded-sm object-contain shadow-2xl",alt:"",draggable:!1}),e[71]=I,e[72]=oe):oe=e[72];let Se;e[73]!==H||e[74]!==ce||e[75]!==oe?(Se=(0,l.jsx)("div",{className:"relative cursor-grab transition-transform duration-200 ease-out active:cursor-grabbing",style:ce,onMouseDown:H,onClick:_u,children:oe}),e[73]=H,e[74]=ce,e[75]=oe,e[76]=Se):Se=e[76];let Ne;e[77]!==o||e[78]!==j||e[79]!==F||e[80]!==t.length||e[81]!==i?(Ne=F&&o<t.length-1&&i===1&&(0,l.jsx)("button",{onClick:ne=>{ne.stopPropagation(),j()},className:"absolute right-6 z-10 hidden rounded-full bg-white/5 p-4 text-white backdrop-blur-sm transition-all hover:bg-white/10 active:scale-90 md:flex",children:(0,l.jsx)(xn,{size:32})}),e[77]=o,e[78]=j,e[79]=F,e[80]=t.length,e[81]=i,e[82]=Ne):Ne=e[82];let Ae;e[83]!==me||e[84]!==Se||e[85]!==Ne?(Ae=(0,l.jsxs)("div",{className:"relative flex h-full w-full items-center justify-center",children:[me,Se,Ne]}),e[83]=me,e[84]=Se,e[85]=Ne,e[86]=Ae):Ae=e[86];let Me;e[87]!==o||e[88]!==F||e[89]!==t||e[90]!==a?(Me=F&&(0,l.jsx)("div",{className:"hide-scrollbar absolute bottom-8 flex max-w-[90%] gap-3 overflow-x-auto rounded-2xl border border-white/10 bg-black/40 p-3 backdrop-blur-xl",onClick:Nu,children:t.map((ne,_e)=>(0,l.jsx)("button",{onClick:()=>{R(),a(_e)},className:`size-14 shrink-0 overflow-hidden rounded-xl border-2 transition-all ${_e===o?"scale-110 border-violet-500 shadow-lg shadow-violet-500/20":"border-transparent opacity-40 hover:opacity-100"}`,children:(0,l.jsx)("img",{src:ne,className:"size-full object-cover",alt:""})},_e))}),e[87]=o,e[88]=F,e[89]=t,e[90]=a,e[91]=Me):Me=e[91];let De;e[92]!==F||e[93]!==i?(De=i===1&&F&&(0,l.jsx)("div",{className:"absolute bottom-4 text-[10px] font-bold uppercase tracking-widest text-white/30 md:hidden",children:"Swipe to navigate"}),e[92]=F,e[93]=i,e[94]=De):De=e[94];let Ge;return e[95]!==B||e[96]!==J||e[97]!==G||e[98]!==Y||e[99]!==s||e[100]!==de||e[101]!==Ae||e[102]!==Me||e[103]!==De?(Ge=(0,l.jsxs)("div",{ref:E,className:"fixed inset-0 z-[100] flex touch-none flex-col items-center justify-center overflow-hidden bg-black/95 backdrop-blur-md",onMouseMove:B,onMouseUp:V,onMouseLeave:V,onTouchStart:Y,onTouchMove:G,onTouchEnd:J,onClick:s,children:[de,Ae,Me,De]}),e[95]=B,e[96]=J,e[97]=G,e[98]=Y,e[99]=s,e[100]=de,e[101]=Ae,e[102]=Me,e[103]=De,e[104]=Ge):Ge=e[104],Ge},ju=wu;function ku(n){return Math.min(n+.5,4)}function Cu(n){return n.stopPropagation()}function _u(n){return n.stopPropagation()}function Nu(n){return n.stopPropagation()}var Su=ie(),Za=g.forwardRef((n,e)=>{const t=(0,Su.c)(20);let r,s,a,o,i;t[0]!==n?({className:r,label:s,type:i,textarea:o,...a}=n,t[0]=n,t[1]=r,t[2]=s,t[3]=a,t[4]=o,t[5]=i):(r=t[1],s=t[2],a=t[3],o=t[4],i=t[5]);const d=o?"textarea":"input";let m;t[6]!==s?(m=s&&(0,l.jsx)("label",{className:"text-sm font-bold text-zinc-500 dark:text-zinc-400 ml-1",children:s}),t[6]=s,t[7]=m):m=t[7];const u=o&&"min-h-[100px] resize-none";let c;t[8]!==r||t[9]!==u?(c=$("flex w-full rounded-xl border border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-900 px-4 py-2.5 text-sm ring-offset-white file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-zinc-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-violet-500 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 dark:ring-offset-zinc-950 dark:text-white transition-all",u,r),t[8]=r,t[9]=u,t[10]=c):c=t[10];const f=e;let h;t[11]!==d||t[12]!==a||t[13]!==c||t[14]!==f||t[15]!==i?(h=(0,l.jsx)(d,{type:i,className:c,ref:f,...a}),t[11]=d,t[12]=a,t[13]=c,t[14]=f,t[15]=i,t[16]=h):h=t[16];let p;return t[17]!==m||t[18]!==h?(p=(0,l.jsxs)("div",{className:"w-full space-y-1.5",children:[m,h]}),t[17]=m,t[18]=h,t[19]=p):p=t[19],p});Za.displayName="Input";var kt=Za,zu=ie(),Au=n=>{const e=(0,zu.c)(28),{isOpen:t,onClose:r,title:s,children:a,footer:o,description:i,className:d}=n;let m;e[0]!==r?(m=E=>{E||r()},e[0]=r,e[1]=m):m=e[1];const u=m;let c;e[2]!==d?(c=$("flex max-h-[calc(100dvh-1rem)] flex-col gap-0 overflow-hidden bg-white p-0 sm:max-w-md dark:bg-zinc-900",d),e[2]=d,e[3]=c):c=e[3];const f=!s&&"sr-only";let h;e[4]!==f?(h=$("shrink-0 border-b border-zinc-100 px-5 py-4 dark:border-zinc-800",f),e[4]=f,e[5]=h):h=e[5];let p;e[6]!==s?(p=(0,l.jsx)($n,{className:"text-center text-lg font-bold",children:s}),e[6]=s,e[7]=p):p=e[7];let b;e[8]!==i?(b=i&&(0,l.jsx)(_a,{className:"text-center",children:i}),e[8]=i,e[9]=b):b=e[9];let x;e[10]!==h||e[11]!==p||e[12]!==b?(x=(0,l.jsxs)(Gn,{className:h,children:[p,b]}),e[10]=h,e[11]=p,e[12]=b,e[13]=x):x=e[13];let v;e[14]!==a?(v=(0,l.jsx)("div",{className:"flex min-h-0 flex-1 flex-col overflow-hidden",children:a}),e[14]=a,e[15]=v):v=e[15];let _;e[16]!==o?(_=o&&(0,l.jsx)(Jn,{className:"shrink-0 border-t border-zinc-100 bg-white px-5 py-4 dark:border-zinc-800 dark:bg-zinc-900",children:o}),e[16]=o,e[17]=_):_=e[17];let N;e[18]!==r||e[19]!==c||e[20]!==x||e[21]!==v||e[22]!==_?(N=(0,l.jsxs)(Zn,{onDragClose:r,className:c,children:[x,v,_]}),e[18]=r,e[19]=c,e[20]=x,e[21]=v,e[22]=_,e[23]=N):N=e[23];let S;return e[24]!==u||e[25]!==t||e[26]!==N?(S=(0,l.jsx)(ka,{open:t,onOpenChange:u,children:N}),e[24]=u,e[25]=t,e[26]=N,e[27]=S):S=e[27],S},Lt=Au,Eu=ie(),Ru=n=>{const e=(0,Eu.c)(20),{title:t,message:r,icon:s,showHome:a,showBack:o}=n,i=t===void 0?"Not Found":t,d=r===void 0?"The content you are looking for doesn't exist or has been removed.":r,m=s===void 0?Js:s,u=a===void 0?!0:a,c=o===void 0?!0:o,f=bn();let h;e[0]!==m?(h=(0,l.jsx)("div",{className:"mb-6 rounded-full bg-zinc-100 p-6 dark:bg-zinc-900",children:(0,l.jsx)(m,{size:48,className:"text-zinc-400 dark:text-zinc-600"})}),e[0]=m,e[1]=h):h=e[1];let p;e[2]!==i?(p=(0,l.jsx)("h2",{className:"mb-2 text-2xl font-black dark:text-white",children:i}),e[2]=i,e[3]=p):p=e[3];let b;e[4]!==d?(b=(0,l.jsx)("p",{className:"mb-8 max-w-xs leading-relaxed text-zinc-500 dark:text-zinc-400",children:d}),e[4]=d,e[5]=b):b=e[5];let x;e[6]!==f||e[7]!==c?(x=c&&(0,l.jsxs)(Qe,{variant:"secondary",onClick:()=>f(-1),className:"rounded-full px-6",children:[(0,l.jsx)(li,{size:18,className:"mr-2"}),"Go Back"]}),e[6]=f,e[7]=c,e[8]=x):x=e[8];let v;e[9]!==f||e[10]!==u?(v=u&&(0,l.jsxs)(Qe,{onClick:()=>f("/"),className:"rounded-full bg-zinc-900 px-6 text-white dark:bg-white dark:text-zinc-900",children:[(0,l.jsx)(ui,{size:18,className:"mr-2"}),"Home"]}),e[9]=f,e[10]=u,e[11]=v):v=e[11];let _;e[12]!==v||e[13]!==x?(_=(0,l.jsxs)("div",{className:"flex flex-wrap items-center justify-center gap-3",children:[x,v]}),e[12]=v,e[13]=x,e[14]=_):_=e[14];let N;return e[15]!==_||e[16]!==h||e[17]!==p||e[18]!==b?(N=(0,l.jsxs)("div",{className:"animate-in fade-in zoom-in-95 flex min-h-[400px] flex-col items-center justify-center p-8 text-center duration-300",children:[h,p,b,_]}),e[15]=_,e[16]=h,e[17]=p,e[18]=b,e[19]=N):N=e[19],N},Hh=Ru,Mu=ie(),Uh=Ni,qh=Qo;var Du=g.forwardRef((n,e)=>{const t=(0,Mu.c)(13);let r,s,a,o;t[0]!==n?({className:r,align:a,sideOffset:o,...s}=n,t[0]=n,t[1]=r,t[2]=s,t[3]=a,t[4]=o):(r=t[1],s=t[2],a=t[3],o=t[4]);const i=a===void 0?"center":a,d=o===void 0?4:o;let m;t[5]!==r?(m=$("z-50 w-72 rounded-md border border-zinc-200 bg-white p-4 text-zinc-950 shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 dark:border-zinc-800 dark:bg-zinc-950 dark:text-zinc-50",r),t[5]=r,t[6]=m):m=t[6];let u;return t[7]!==i||t[8]!==s||t[9]!==e||t[10]!==d||t[11]!==m?(u=(0,l.jsx)(oi,{children:(0,l.jsx)(is,{ref:e,align:i,sideOffset:d,className:m,...s})}),t[7]=i,t[8]=s,t[9]=e,t[10]=d,t[11]=m,t[12]=u):u=t[12],u});Du.displayName=is.displayName;var Tu=ie();const Iu=(n,e,t)=>{const r=(0,Tu.c)(61),s=n?.id,a=Jt(),o=n?.follower_count||0,i=n?.following_count||0;let d;r[0]!==o||r[1]!==i?(d={followers:o,following:i},r[0]=o,r[1]=i,r[2]=d):d=r[2];const[m,u]=(0,g.useState)(d);let c,f;r[3]!==n?(c=()=>{n&&u({followers:n.follower_count||0,following:n.following_count||0})},f=[n],r[3]=n,r[4]=c,r[5]=f):(c=r[4],f=r[5]),(0,g.useEffect)(c,f);let h;r[6]!==e||r[7]!==s?(h=s&&_n(s)&&e&&_n(e),r[6]=e,r[7]=s,r[8]=h):h=r[8];const p=h;let b,x;r[9]!==e||r[10]!==s?(b=["isFollowing",e,s],x=()=>tl(e,s),r[9]=e,r[10]=s,r[11]=b,r[12]=x):(b=r[11],x=r[12]);const v=!!p;let _;r[13]!==b||r[14]!==x||r[15]!==v?(_={queryKey:b,queryFn:x,enabled:v,staleTime:1/0},r[13]=b,r[14]=x,r[15]=v,r[16]=_):_=r[16];const{data:N}=Ct(_),S=N===void 0?!1:N;let E,k,T;r[17]!==s?(E=["followStats",s],k=async()=>{const I=await nl(s);return u(I),I},T=!!s&&_n(s),r[17]=s,r[18]=E,r[19]=k,r[20]=T):(E=r[18],k=r[19],T=r[20]);let y;r[21]!==E||r[22]!==k||r[23]!==T?(y={queryKey:E,queryFn:k,enabled:T,staleTime:6e4},r[21]=E,r[22]=k,r[23]=T,r[24]=y):y=r[24],Ct(y);let w;r[25]!==e||r[26]!==s?(w=()=>el(e,s),r[25]=e,r[26]=s,r[27]=w):w=r[27];let A;r[28]!==e||r[29]!==S||r[30]!==a||r[31]!==s?(A=async()=>{await a.cancelQueries({queryKey:["isFollowing",e,s]});const I=a.getQueryData(["isFollowing",e,s]);return a.setQueryData(["isFollowing",e,s],!S),u(F=>({...F,followers:S?Math.max(0,F.followers-1):F.followers+1})),{previousFollowing:I}},r[28]=e,r[29]=S,r[30]=a,r[31]=s,r[32]=A):A=r[32];let M;r[33]!==e||r[34]!==a||r[35]!==t||r[36]!==s?(M=(I,F,q)=>{q?.previousFollowing!==void 0&&(a.setQueryData(["isFollowing",e,s],q.previousFollowing),u(H=>({...H,followers:q.previousFollowing?H.followers+1:Math.max(0,H.followers-1)}))),t("Failed to update follow status","error")},r[33]=e,r[34]=a,r[35]=t,r[36]=s,r[37]=M):M=r[37];let R;r[38]!==e||r[39]!==a||r[40]!==s?(R=()=>{a.invalidateQueries({queryKey:["isFollowing",e,s]}),a.invalidateQueries({queryKey:["followStats",s]})},r[38]=e,r[39]=a,r[40]=s,r[41]=R):R=r[41];let D;r[42]!==t?(D=I=>{t(I?"Followed":"Unfollowed")},r[42]=t,r[43]=D):D=r[43];let z;r[44]!==w||r[45]!==A||r[46]!==M||r[47]!==R||r[48]!==D?(z={mutationFn:w,onMutate:A,onError:M,onSettled:R,onSuccess:D},r[44]=w,r[45]=A,r[46]=M,r[47]=R,r[48]=D,r[49]=z):z=r[49];const L=qt(z);let j;r[50]!==e||r[51]!==L||r[52]!==p||r[53]!==t||r[54]!==s?(j=async()=>{if(!e)return t("Please login to follow!","error");if(e===s)return t("You cannot follow yourself!","error");p&&L.mutate()},r[50]=e,r[51]=L,r[52]=p,r[53]=t,r[54]=s,r[55]=j):j=r[55];const C=j;let P;return r[56]!==L.isPending||r[57]!==C||r[58]!==S||r[59]!==m?(P={isFollowing:S,stats:m,loading:L.isPending,handleFollow:C,setStats:u},r[56]=L.isPending,r[57]=C,r[58]=S,r[59]=m,r[60]=P):P=r[60],P};var Pu=({profile:n,onUserClick:e,isCommunity:t=!1})=>{const{onlineUsers:r}=Ol(),{currentUser:s}=$e(),{addToast:a}=St(),o=r.has(n.id),[i,d]=(0,g.useState)(!1),[m,u]=(0,g.useState)(t),{isFollowing:c,loading:f,handleFollow:h}=Iu(t?null:n,s?.id,a);(0,g.useEffect)(()=>{t&&s&&n.id?bl(n.id,s.id).then(d).finally(()=>u(!1)):u(!1)},[t,s,n.id]);const p=async T=>{if(T.stopPropagation(),!s)return a("Please login to join communities","error");u(!0);try{const y=await vl(n.id,s.id);d(y),a(y?`Joined ${"name"in n?n.name:""}`:`Left ${"name"in n?n.name:""}`)}catch{a("Failed to update membership","error")}finally{u(!1)}},b=s?.id===n.id,x=t?m:f,v=n.handle,_=n.avatar,N=n.name,S="follower_count"in n?n.follower_count:0,E="membersCount"in n?n.membersCount:0,k="verified"in n?n.verified:!1;return(0,l.jsxs)("div",{className:"group flex cursor-pointer items-center justify-between border-b border-zinc-100 p-4 transition-colors hover:bg-zinc-50 dark:border-zinc-800 dark:hover:bg-zinc-900/40",onClick:()=>e(v),children:[(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsxs)(pt,{className:`size-12 border border-zinc-200 shadow-sm dark:border-zinc-800 ${t?"rounded-2xl":""}`,children:[(0,l.jsx)(gt,{src:_||void 0,alt:v,className:"object-cover"}),(0,l.jsx)(vt,{className:t?"rounded-2xl":"",children:v?.[0]?.toUpperCase()})]}),o&&!t&&(0,l.jsx)("span",{className:"absolute bottom-0 right-0 size-3 rounded-full border-2 border-white bg-emerald-500 shadow-sm dark:border-black"})]}),(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsxs)("span",{className:"flex items-center gap-1 truncate font-extrabold text-zinc-900 dark:text-zinc-100",children:[N,k&&(0,l.jsx)(no,{size:16,className:"shrink-0 text-blue-500"})]}),(0,l.jsxs)("span",{className:"mt-0.5 text-sm text-zinc-500",children:["@",v]}),t&&(0,l.jsxs)("span",{className:"mt-1 text-xs text-zinc-400",children:[E||0," members"]}),!t&&S!==void 0&&(0,l.jsxs)("span",{className:"mt-1 text-xs text-zinc-400",children:[S," followers"]})]})]}),!b&&(0,l.jsx)(Qe,{variant:t?i?"secondary":"outline":c?"secondary":"outline",className:"flex !w-auto items-center gap-1.5 rounded-full border-zinc-200 !px-4 !py-1.5 text-sm font-bold hover:bg-zinc-100 dark:border-zinc-700 dark:hover:bg-zinc-800",onClick:t?p:T=>{T.stopPropagation(),h()},disabled:x,children:x?(0,l.jsx)(mt,{className:"size-4 animate-spin"}):t?i?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(Lr,{size:16}),(0,l.jsx)("span",{className:"hidden sm:inline",children:"Joined"})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(Pr,{size:16}),(0,l.jsx)("span",{className:"hidden sm:inline",children:"Join"})]}):c?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(Lr,{size:16}),(0,l.jsx)("span",{className:"hidden sm:inline",children:"Following"})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(Pr,{size:16}),(0,l.jsx)("span",{className:"hidden sm:inline",children:"Follow"})]})})]})},Wh=Pu,Ga=ie(),Lu=g.forwardRef((n,e)=>{const t=(0,Ga.c)(15);let r,s,a;t[0]!==n?({className:s,children:r,...a}=n,t[0]=n,t[1]=r,t[2]=s,t[3]=a):(r=t[1],s=t[2],a=t[3]);let o;t[4]!==s?(o=$("relative overflow-hidden",s),t[4]=s,t[5]=o):o=t[5];let i;t[6]!==r?(i=(0,l.jsx)(fi,{className:"h-full w-full rounded-[inherit]",children:r}),t[6]=r,t[7]=i):i=t[7];let d,m;t[8]===Symbol.for("react.memo_cache_sentinel")?(d=(0,l.jsx)(Ja,{}),m=(0,l.jsx)(Oi,{}),t[8]=d,t[9]=m):(d=t[8],m=t[9]);let u;return t[10]!==a||t[11]!==e||t[12]!==o||t[13]!==i?(u=(0,l.jsxs)(vs,{ref:e,className:o,...a,children:[i,d,m]}),t[10]=a,t[11]=e,t[12]=o,t[13]=i,t[14]=u):u=t[14],u});Lu.displayName=vs.displayName;var Ja=g.forwardRef((n,e)=>{const t=(0,Ga.c)(14);let r,s,a;t[0]!==n?({className:r,orientation:a,...s}=n,t[0]=n,t[1]=r,t[2]=s,t[3]=a):(r=t[1],s=t[2],a=t[3]);const o=a===void 0?"vertical":a,i=o==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",d=o==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]";let m;t[4]!==r||t[5]!==i||t[6]!==d?(m=$("flex touch-none select-none transition-colors",i,d,r),t[4]=r,t[5]=i,t[6]=d,t[7]=m):m=t[7];let u;t[8]===Symbol.for("react.memo_cache_sentinel")?(u=(0,l.jsx)(Li,{className:"relative flex-1 rounded-full bg-zinc-200 dark:bg-zinc-800"}),t[8]=u):u=t[8];let c;return t[9]!==o||t[10]!==s||t[11]!==e||t[12]!==m?(c=(0,l.jsx)(os,{ref:e,orientation:o,className:m,...s,children:u}),t[9]=o,t[10]=s,t[11]=e,t[12]=m,t[13]=c):c=t[13],c});Ja.displayName=os.displayName;var Fu=ie(),Ou=n=>{const e=(0,Fu.c)(14),{value:t,onChange:r,onClear:s,placeholder:a,className:o}=n,i=a===void 0?"Search...":a,d=`relative group w-full ${o===void 0?"":o}`;let m;e[0]===Symbol.for("react.memo_cache_sentinel")?(m=(0,l.jsx)(ss,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 text-zinc-400 group-focus-within:text-violet-500 transition-colors"}),e[0]=m):m=e[0];let u;e[1]!==r?(u=p=>r(p.target.value),e[1]=r,e[2]=u):u=e[2];let c;e[3]!==i||e[4]!==u||e[5]!==t?(c=(0,l.jsx)("input",{className:"w-full rounded-full border border-zinc-100 dark:border-zinc-800 bg-zinc-50 dark:bg-zinc-900/50 text-zinc-900 dark:text-white px-11 py-2.5 text-sm outline-none focus:border-violet-500 focus:ring-1 focus:ring-violet-500 transition-all",placeholder:i,value:t,onChange:u}),e[3]=i,e[4]=u,e[5]=t,e[6]=c):c=e[6];let f;e[7]!==s||e[8]!==t?(f=t&&(0,l.jsx)("button",{onClick:s,className:"absolute right-4 top-1/2 -translate-y-1/2 text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-200 transition-colors",children:(0,l.jsx)(Mt,{size:16})}),e[7]=s,e[8]=t,e[9]=f):f=e[9];let h;return e[10]!==d||e[11]!==c||e[12]!==f?(h=(0,l.jsxs)("div",{className:d,children:[m,c,f]}),e[10]=d,e[11]=c,e[12]=f,e[13]=h):h=e[13],h},Ir=Ou,Dt=ie(),Vh=Ai;var Yh=Ui,Bu=g.forwardRef((n,e)=>{const t=(0,Dt.c)(12);let r,s,a;t[0]!==n?({className:s,children:r,...a}=n,t[0]=n,t[1]=r,t[2]=s,t[3]=a):(r=t[1],s=t[2],a=t[3]);let o;t[4]!==s?(o=$("flex h-9 w-full items-center justify-between rounded-md border border-zinc-200 bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-white placeholder:text-zinc-500 focus:outline-none focus:ring-1 focus:ring-zinc-950 disabled:cursor-not-allowed disabled:opacity-50 dark:border-zinc-800 dark:ring-offset-zinc-950 dark:focus:ring-zinc-300 [&>span]:line-clamp-1",s),t[4]=s,t[5]=o):o=t[5];let i;t[6]===Symbol.for("react.memo_cache_sentinel")?(i=(0,l.jsx)(xi,{asChild:!0,children:(0,l.jsx)(ws,{className:"h-4 w-4 opacity-50"})}),t[6]=i):i=t[6];let d;return t[7]!==r||t[8]!==a||t[9]!==e||t[10]!==o?(d=(0,l.jsxs)(Ks,{ref:e,className:o,...a,children:[r,i]}),t[7]=r,t[8]=a,t[9]=e,t[10]=o,t[11]=d):d=t[11],d});Bu.displayName=Ks.displayName;var $a=g.forwardRef((n,e)=>{const t=(0,Dt.c)(10);let r,s;t[0]!==n?({className:r,...s}=n,t[0]=n,t[1]=r,t[2]=s):(r=t[1],s=t[2]);let a;t[3]!==r?(a=$("flex cursor-default items-center justify-center py-1",r),t[3]=r,t[4]=a):a=t[4];let o;t[5]===Symbol.for("react.memo_cache_sentinel")?(o=(0,l.jsx)(Xo,{className:"h-4 w-4"}),t[5]=o):o=t[5];let i;return t[6]!==s||t[7]!==e||t[8]!==a?(i=(0,l.jsx)(Ms,{ref:e,className:a,...s,children:o}),t[6]=s,t[7]=e,t[8]=a,t[9]=i):i=t[9],i});$a.displayName=Ms.displayName;var eo=g.forwardRef((n,e)=>{const t=(0,Dt.c)(10);let r,s;t[0]!==n?({className:r,...s}=n,t[0]=n,t[1]=r,t[2]=s):(r=t[1],s=t[2]);let a;t[3]!==r?(a=$("flex cursor-default items-center justify-center py-1",r),t[3]=r,t[4]=a):a=t[4];let o;t[5]===Symbol.for("react.memo_cache_sentinel")?(o=(0,l.jsx)(ws,{className:"h-4 w-4"}),t[5]=o):o=t[5];let i;return t[6]!==s||t[7]!==e||t[8]!==a?(i=(0,l.jsx)(Ts,{ref:e,className:a,...s,children:o}),t[6]=s,t[7]=e,t[8]=a,t[9]=i):i=t[9],i});eo.displayName=Ts.displayName;var Hu=g.forwardRef((n,e)=>{const t=(0,Dt.c)(21);let r,s,a,o;t[0]!==n?({className:s,children:r,position:o,...a}=n,t[0]=n,t[1]=r,t[2]=s,t[3]=a,t[4]=o):(r=t[1],s=t[2],a=t[3],o=t[4]);const i=o===void 0?"popper":o,d=i==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1";let m;t[5]!==s||t[6]!==d?(m=$("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border border-zinc-200 bg-white text-zinc-950 shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 dark:border-zinc-800 dark:bg-zinc-950 dark:text-zinc-50",d,s),t[5]=s,t[6]=d,t[7]=m):m=t[7];let u;t[8]===Symbol.for("react.memo_cache_sentinel")?(u=(0,l.jsx)($a,{}),t[8]=u):u=t[8];const c=i==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]";let f;t[9]!==c?(f=$("p-1",c),t[9]=c,t[10]=f):f=t[10];let h;t[11]!==r||t[12]!==f?(h=(0,l.jsx)(gi,{className:f,children:r}),t[11]=r,t[12]=f,t[13]=h):h=t[13];let p;t[14]===Symbol.for("react.memo_cache_sentinel")?(p=(0,l.jsx)(eo,{}),t[14]=p):p=t[14];let b;return t[15]!==i||t[16]!==a||t[17]!==e||t[18]!==m||t[19]!==h?(b=(0,l.jsx)(Ri,{children:(0,l.jsxs)(Us,{ref:e,className:m,position:i,...a,children:[u,h,p]})}),t[15]=i,t[16]=a,t[17]=e,t[18]=m,t[19]=h,t[20]=b):b=t[20],b});Hu.displayName=Us.displayName;var Uu=g.forwardRef((n,e)=>{const t=(0,Dt.c)(9);let r,s;t[0]!==n?({className:r,...s}=n,t[0]=n,t[1]=r,t[2]=s):(r=t[1],s=t[2]);let a;t[3]!==r?(a=$("px-2 py-1.5 text-sm font-semibold",r),t[3]=r,t[4]=a):a=t[4];let o;return t[5]!==s||t[6]!==e||t[7]!==a?(o=(0,l.jsx)(Es,{ref:e,className:a,...s}),t[5]=s,t[6]=e,t[7]=a,t[8]=o):o=t[8],o});Uu.displayName=Es.displayName;var qu=g.forwardRef((n,e)=>{const t=(0,Dt.c)(14);let r,s,a;t[0]!==n?({className:s,children:r,...a}=n,t[0]=n,t[1]=r,t[2]=s,t[3]=a):(r=t[1],s=t[2],a=t[3]);let o;t[4]!==s?(o=$("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-zinc-100 focus:text-zinc-900 data-[disabled]:pointer-events-none data-[disabled]:opacity-50 dark:focus:bg-zinc-800 dark:focus:text-zinc-50",s),t[4]=s,t[5]=o):o=t[5];let i;t[6]===Symbol.for("react.memo_cache_sentinel")?(i=(0,l.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,l.jsx)(Ii,{children:(0,l.jsx)(Vn,{className:"h-4 w-4"})})}),t[6]=i):i=t[6];let d;t[7]!==r?(d=(0,l.jsx)(wi,{children:r}),t[7]=r,t[8]=d):d=t[8];let m;return t[9]!==a||t[10]!==e||t[11]!==o||t[12]!==d?(m=(0,l.jsxs)(Ls,{ref:e,className:o,...a,children:[i,d]}),t[9]=a,t[10]=e,t[11]=o,t[12]=d,t[13]=m):m=t[13],m});qu.displayName=Ls.displayName;var Wu=g.forwardRef((n,e)=>{const t=(0,Dt.c)(9);let r,s;t[0]!==n?({className:r,...s}=n,t[0]=n,t[1]=r,t[2]=s):(r=t[1],s=t[2]);let a;t[3]!==r?(a=$("-mx-1 my-1 h-px bg-zinc-100 dark:bg-zinc-800",r),t[3]=r,t[4]=a):a=t[4];let o;return t[5]!==s||t[6]!==e||t[7]!==a?(o=(0,l.jsx)(_s,{ref:e,className:a,...s}),t[5]=s,t[6]=e,t[7]=a,t[8]=o):o=t[8],o});Wu.displayName=_s.displayName;var Vu=ie(),Yu=n=>{const e=(0,Vu.c)(9),{className:t}=n,{setAuthMode:r}=$e();let s;e[0]!==t?(s=$("bg-[--card] border border-[--border] rounded-2xl p-8 flex flex-col items-center text-center gap-4 shadow-sm",t),e[0]=t,e[1]=s):s=e[1];let a,o;e[2]===Symbol.for("react.memo_cache_sentinel")?(a=(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("div",{className:"size-16 animate-spin rounded-full border-4 border-t-transparent border-amber-400 duration-[3000ms]"}),(0,l.jsx)("span",{className:"absolute inset-0 flex items-center justify-center text-2xl",children:""})]}),o=(0,l.jsx)("h2",{className:"mt-2 text-lg font-extrabold leading-tight text-[--foreground]",children:"Get your Sysm account now!"}),e[2]=a,e[3]=o):(a=e[2],o=e[3]);let i;e[4]!==r?(i=(0,l.jsx)("button",{onClick:()=>r("signup"),className:"w-full cursor-pointer rounded-full bg-zinc-950 py-2.5 text-sm font-black uppercase tracking-wider text-white shadow-lg transition-all hover:opacity-90 active:scale-95 dark:bg-white dark:text-zinc-950",children:"Signup now"}),e[4]=r,e[5]=i):i=e[5];let d;return e[6]!==s||e[7]!==i?(d=(0,l.jsxs)("div",{className:s,children:[a,o,i]}),e[6]=s,e[7]=i,e[8]=d):d=e[8],d},Qu=Yu,Ku=ie(),Xu=()=>{const n=(0,Ku.c)(3);let e;n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)("div",{className:"size-11 rounded-full bg-zinc-200 dark:bg-zinc-800 shrink-0"}),n[0]=e):e=n[0];let t;n[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,l.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,l.jsx)("div",{className:"h-4 bg-zinc-200 dark:bg-zinc-800 rounded w-1/3"}),(0,l.jsx)("div",{className:"h-4 bg-zinc-200 dark:bg-zinc-800 rounded w-16"})]}),n[1]=t):t=n[1];let r;return n[2]===Symbol.for("react.memo_cache_sentinel")?(r=(0,l.jsx)("div",{className:"px-5 pt-4 pb-3 border-b border-zinc-100 dark:border-zinc-800 animate-pulse",children:(0,l.jsxs)("div",{className:"flex items-start gap-x-3",children:[e,(0,l.jsxs)("div",{className:"flex-1 min-w-0",children:[t,(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("div",{className:"h-3 bg-zinc-200 dark:bg-zinc-800 rounded w-full"}),(0,l.jsx)("div",{className:"h-3 bg-zinc-200 dark:bg-zinc-800 rounded w-5/6"})]}),(0,l.jsx)("div",{className:"h-48 bg-zinc-200 dark:bg-zinc-800 rounded-xl w-full mt-3"})]})]})}),n[2]=r):r=n[2],r},Qh=Xu,rr=ie(),Zu=_i,to=g.forwardRef((n,e)=>{const t=(0,rr.c)(9);let r,s;t[0]!==n?({className:r,...s}=n,t[0]=n,t[1]=r,t[2]=s):(r=t[1],s=t[2]);let a;t[3]!==r?(a=$("inline-flex h-10 items-center justify-center rounded-md text-zinc-500 dark:text-zinc-400",r),t[3]=r,t[4]=a):a=t[4];let o;return t[5]!==s||t[6]!==e||t[7]!==a?(o=(0,l.jsx)(Ws,{ref:e,className:a,...s}),t[5]=s,t[6]=e,t[7]=a,t[8]=o):o=t[8],o});to.displayName=Ws.displayName;var Ln=g.forwardRef((n,e)=>{const t=(0,rr.c)(9);let r,s;t[0]!==n?({className:r,...s}=n,t[0]=n,t[1]=r,t[2]=s):(r=t[1],s=t[2]);let a;t[3]!==r?(a=$("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-white transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-zinc-950 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:text-zinc-950 dark:ring-offset-zinc-950 dark:focus-visible:ring-zinc-300 dark:data-[state=active]:text-zinc-50",r),t[3]=r,t[4]=a):a=t[4];let o;return t[5]!==s||t[6]!==e||t[7]!==a?(o=(0,l.jsx)(Ss,{ref:e,className:a,...s}),t[5]=s,t[6]=e,t[7]=a,t[8]=o):o=t[8],o});Ln.displayName=Ss.displayName;var Fn=g.forwardRef((n,e)=>{const t=(0,rr.c)(9);let r,s;t[0]!==n?({className:r,...s}=n,t[0]=n,t[1]=r,t[2]=s):(r=t[1],s=t[2]);let a;t[3]!==r?(a=$("mt-2 ring-offset-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-zinc-950 focus-visible:ring-offset-2 dark:ring-offset-zinc-950 dark:focus-visible:ring-zinc-300",r),t[3]=r,t[4]=a):a=t[4];let o;return t[5]!==s||t[6]!==e||t[7]!==a?(o=(0,l.jsx)(Bs,{ref:e,className:a,...s}),t[5]=s,t[6]=e,t[7]=a,t[8]=o):o=t[8],o});Fn.displayName=Bs.displayName;var Gu=ie(),Ju=n=>{const e=(0,Gu.c)(18),{name:t,number:r}=n,s=t===void 0?"BRUCE WAYNE":t,a=r===void 0?"9759 2484 5269 6576":r;let o;e[0]===Symbol.for("react.memo_cache_sentinel")?(o=(0,l.jsx)("style",{children:`
        .credit-card-container {
          perspective: 1000px;
          width: 240px;
          height: 154px;
        }
        .credit-card-inner {
          position: relative;
          width: 100%;
          height: 100%;
          text-align: center;
          transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
          transform-style: preserve-3d;
          cursor: pointer;
        }
        .credit-card-container:hover .credit-card-inner {
          transform: rotateY(180deg);
        }
        .credit-card-front, .credit-card-back {
          position: absolute;
          width: 100%;
          height: 100%;
          -webkit-backface-visibility: hidden;
          backface-visibility: hidden;
          border-radius: 1rem;
          display: flex;
          flex-direction: column;
          justify-content: center;
          background-color: #171717;
          box-shadow: 0 2px 2px rgba(0,0,0,0.4), 0 7px 13px -3px rgba(0,0,0,0.3), inset 0 -1px 0 rgba(0,0,0,0.2);
          color: white;
          overflow: hidden;
        }
        .credit-card-back {
          transform: rotateY(180deg);
        }
      `}),e[0]=o):o=e[0];let i;e[1]===Symbol.for("react.memo_cache_sentinel")?(i=(0,l.jsx)("p",{className:"absolute left-[18.6em] top-[2em] text-[0.5em] font-bold tracking-[.2em]",children:"VICTIMCARD"}),e[1]=i):i=e[1];let d;e[2]===Symbol.for("react.memo_cache_sentinel")?(d=(0,l.jsxs)("svg",{className:"absolute left-[11.7em] top-[6.8em]",xmlns:"http://www.w3.org/2000/svg",width:"36",height:"36",viewBox:"0 0 48 48",children:[(0,l.jsx)("path",{fill:"#ff9800",d:"M32 10A14 14 0 1 0 32 38A14 14 0 1 0 32 10Z"}),(0,l.jsx)("path",{fill:"#d50000",d:"M16 10A14 14 0 1 0 16 38A14 14 0 1 0 16 10Z"}),(0,l.jsx)("path",{fill:"#ff3d00",d:"M18,24c0,4.755,2.376,8.95,6,11.48c3.624-2.53,6-6.725,6-11.48s-2.376-8.95-6-11.48 C20.376,15.05,18,19.245,18,24z"})]}),e[2]=d):d=e[2];let m;e[3]===Symbol.for("react.memo_cache_sentinel")?(m=(0,l.jsx)("svg",{version:"1.1",className:"absolute left-[1.5em] top-[2.3em]",width:"30px",height:"30px",viewBox:"0 0 50 50",children:(0,l.jsx)("image",{width:"50",height:"50",x:"0",y:"0",href:`data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAMAAAAp4XiDAAAABGdBTUEAALGPC/xhBQAAACBjSFJN\r
                AAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAB6VBMVEUAAACNcTiVeUKVeUOY\r
                fEaafEeUeUSYfEWZfEaykleyklaXe0SWekSZZjOYfEWYe0WXfUWXe0WcgEicfkiXe0SVekSXekSW\r
                ekKYe0a9nF67m12ZfUWUeEaXfESVekOdgEmVeUWWekSniU+VeUKVeUOrjFKYfEWliE6WeESZe0GS\r
                e0WYfES7ml2Xe0WXeESUeEOWfEWcf0eWfESXe0SXfEWYekSVeUKXfEWxklawkVaZfEWWekOUekOW\r
                ekSYfESZe0eXekWYfEWZe0WZe0eVeUSWeETAnmDCoWLJpmbxy4P1zoXwyoLIpWbjvXjivnjgu3bf\r
                u3beunWvkFWxkle/nmDivXiWekTnwXvkwHrCoWOuj1SXe0TEo2TDo2PlwHratnKZfEbQrWvPrWua\r
                fUfbt3PJp2agg0v0zYX0zYSfgkvKp2frxX7mwHrlv3rsxn/yzIPgvHfduXWXe0XuyIDzzISsjVO1\r
                lVm0lFitjVPzzIPqxX7duna0lVncuHTLqGjvyIHeuXXxyYGZfUayk1iyk1e2lln1zYTEomO2llrb\r
                tnOafkjFpGSbfkfZtXLhvHfkv3nqxH3mwXujhU3KqWizlFilh06khk2fgkqsjlPHpWXJp2erjVOh\r
                g0yWe0SliE+XekShhEvAn2D///+gx8TWAAAARnRSTlMACVCTtsRl7Pv7+vxkBab7pZv5+ZlL/UnU\r
                /f3SJCVe+Fx39naA9/75XSMh0/3SSkia+pil/KRj7Pr662JPkrbP7OLQ0JFOijI1MwAAAAFiS0dE\r
                orDd34wAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAHdElNRQfnAg0IDx2lsiuJAAACLElEQVRIx2Ng\r
                GAXkAUYmZhZWPICFmYkRVQcbOwenmzse4MbFzc6DpIGXj8PD04sA8PbhF+CFaxEU8iWkAQT8hEVg\r
                OkTF/InR4eUVICYO1SIhCRMLDAoKDvFDVhUaEhwUFAjjSUlDdMiEhcOEItzdI6OiYxA6YqODIt3d\r
                I2DcuDBZsBY5eVTr4xMSYcyk5BRUOXkFsBZFJTQnp6alQxgZmVloUkrKYC0qqmji2WE5EEZuWB6a\r
                lKoKdi35YQUQRkFYPpFaCouKIYzi6EDitJSUlsGY5RWVRGjJLyxNy4ZxqtIqqvOxaVELQwZFZdkI\r
                JVU1RSiSalAt6rUwUBdWG1CP6pT6gNqwOrgCdQyHNYR5YQFhDXj8MiK1IAeyN6aORiyBjByVTc0F\r
                qBoKWpqwRCVSgilOaY2OaUPw29qjOzqLvTAchpos47u6EZyYnngUSRwpuTe6D+6qaFQdOPNLRzOM\r
                1dzhRZyW+CZouHk3dWLXglFcFIflQhj9YWjJGlZcaKAVSvjyPrRQ0oQVKDAQHlYFYUwIm4gqExGm\r
                BSkutaVQJeomwViTJqPK6OhCy2Q9sQBk8cY0DxjTJw0lAQWK6cOKfgNhpKK7ZMpUeF3jPa28BCET\r
                amiEqJKM+X1gxvWXpoUjVIVPnwErw71nmpgiqiQGBjNzbgs3j1nus+fMndc+Cwm0T52/oNR9lsdC\r
                S24ra7Tq1cbWjpXV3sHRCb1idXZ0sGdltXNxRateRwHRAACYHutzk/2I5QAAACV0RVh0ZGF0ZTpj\r
                cmVhdGUAMjAyMy0wMi0xM1QwODoxNToyOSswMDowMEUnN7UAAAAldEVYdGRhdGU6bW9kaWZ5ADIw\r
                MjMtMDItMTNUMDg6MTU6MjkrMDA6MDA0eo8JAAAAKHRFWHRkYXRlOnRpbWVzdGFtcAAyMDIzLTAy\r
                LTEzVDA4OjE1OjI5KzAwOjAwY2+u1gAAAABJRU5ErkJggg==`})}),e[3]=m):m=e[3];let u;e[4]===Symbol.for("react.memo_cache_sentinel")?(u=(0,l.jsx)("svg",{version:"1.1",className:"absolute left-[12.4em] top-[3.5em]",width:"20px",height:"20px",viewBox:"0 0 50 50",children:(0,l.jsx)("image",{width:"50",height:"50",x:"0",y:"0",href:`data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAQAAAC0NkA6AAAABGdBTUEAALGPC/xhBQAAACBjSFJN\r
                AAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAAAJcEhZ\r
                cwAACxMAAAsTAQCanBgAAAAHdElNRQfnAg0IEzgIwaKTAAADDklEQVRYw+1XS0iUURQ+f5qPyjQf\r
                lGRFEEFK76koKGxRbWyVVLSOgsCgwjZBJJYuKogSIoOonUK4q3U0WVBWFPZYiIE6kuArG3VGzK/F\r
                fPeMM/MLt99/NuHdfPd888/57jn3nvsQWWj/VcMlvMMd5KRTogqx9iCdIjUUmcGR9ImUYowyP3xN\r
                GQJoRLVaZ2DaZf8kyjEJALhI28ELioyiwC+Rc3QZwRYyO/DH51hQgWm6DMIh10KmD4u9O16K49it\r
                VoPOAmcGAWWOepXIRScAoJZ2Frro8oN+EyTT6lWkkg6msZfMSR35QTJmjU0g15tIGSJ08ZZMJkJk\r
                HpNZgSkyXosS13TkJpZ62mPIJvOSzC1bp8vRhhCakEk7G9/o4gmZdbpsTcKu0m63FbnBP9Qrc15z\r
                bkbemfgNDtEOI8NO5L5O9VYyRYgmJayZ9nPaxZrSjW4+F6Uw9yQqIiIZwhp2huQTf6OIvCZyGM6g\r
                DJBZbyXifJXr7FZjGXsdxADxI7HUJFB6iWvsIhFpkoiIiGTJfjJfiCuJg2ZEspq9EHGVpYgzKqwJ\r
                qSAOEwuJQ/pxPvE3cYltJCLdxBLiSKKIE5HxJKcTRNeadxfhDiuYw44zVs1dxKwRk/uCxIiQkxKB\r
                sSctRVAge9g1E15EHE6yRUaJecRxcWlukdRIbGFOSZCMWQA/iWauIP3slREHXPyliqBcrrD71Amz\r
                Z+rD1Mt2Yr8TZc/UR4/YtFnbijnHi3UrN9vKQ9rPaJf867ZiaqDB+czeKYmd3pNa6fuI75MiC0uX\r
                XSR5aEMf7s7a6r/PudVXkjFb/SsrCRfROk0Fx6+H1i9kkTGn/E1vEmt1m089fh+RKdQ5O+xNJPUi\r
                cUIjO0Dm7HwvErEr0YxeibL1StSh37STafE4I7zcBdRq1DiOkdmlTJVnkQTBTS7X1FYyvfO4piaI\r
                nKbDCDaT2anLudYXCRFsQBgAcIF2/Okwgvz5+Z4tsw118dzruvIvjhTB+HOuWy8UvovEH6beitBK\r
                xDyxm9MmISKCWrzB7bSlaqGlsf0FC0gMjzTg6GgAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMDIt\r
                MTNUMDg6MTk6NTYrMDA6MDCjlq7LAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTAyLTEzVDA4OjE5\r
                OjU2KzAwOjAw0ssWdwAAACh0RVh0ZGF0ZTp0aW1lc3RhbXAAMjAyMy0wMi0xM1QwODoxOTo1Nisw\r
                MDowMIXeN6gAAAAASUVORK5CYII=`})}),e[4]=u):u=e[4];let c;e[5]!==a?(c=(0,l.jsx)("p",{className:"absolute left-[1.6em] top-[8.3em] text-[.6em] font-bold uppercase tracking-wider",children:a}),e[5]=a,e[6]=c):c=e[6];let f;e[7]===Symbol.for("react.memo_cache_sentinel")?(f=(0,l.jsx)("p",{className:"absolute left-[3.2em] top-[13.6em] text-[0.5em] font-bold",children:"1 2 / 2 4"}),e[7]=f):f=e[7];let h;e[8]!==s?(h=(0,l.jsx)("p",{className:"absolute left-[2em] top-[16.1em] w-[160px] truncate text-left text-[0.5em] font-bold uppercase tracking-tighter",children:s}),e[8]=s,e[9]=h):h=e[9];let p;e[10]!==h||e[11]!==c?(p=(0,l.jsxs)("div",{className:"credit-card-front",children:[i,d,m,u,c,f,h]}),e[10]=h,e[11]=c,e[12]=p):p=e[12];let b,x;e[13]===Symbol.for("react.memo_cache_sentinel")?(b=(0,l.jsx)("div",{className:"absolute left-0 top-[2.4em] h-[1.5em] w-full bg-black bg-[repeating-linear-gradient(45deg,#303030,#303030_10px,#202020_10px,#202020_20px)]"}),x=(0,l.jsx)("div",{className:"absolute left-[0.8em] top-[5em] h-[0.8em] w-[8em] rounded-[2.5px] bg-white"}),e[13]=b,e[14]=x):(b=e[13],x=e[14]);let v;e[15]===Symbol.for("react.memo_cache_sentinel")?(v=(0,l.jsxs)("div",{className:"credit-card-back",children:[b,x,(0,l.jsx)("div",{className:"absolute left-[10em] top-[5em] h-[0.8em] w-[4.1em] rounded-[2.5px] bg-white",children:(0,l.jsx)("p",{className:"m-[.2em] text-center text-[0.5em] font-bold text-black",children:"***"})})]}),e[15]=v):v=e[15];let _;return e[16]!==p?(_=(0,l.jsxs)(l.Fragment,{children:[o,(0,l.jsx)("div",{className:"flex items-center justify-center p-8",children:(0,l.jsx)("div",{className:"credit-card-container",children:(0,l.jsxs)("div",{className:"credit-card-inner",children:[p,v]})})})]}),e[16]=p,e[17]=_):_=e[17],_},Kh=Ju,$u=ie(),e0=g.forwardRef((n,e)=>{const t=(0,$u.c)(9);let r,s;t[0]!==n?({className:r,...s}=n,t[0]=n,t[1]=r,t[2]=s):(r=t[1],s=t[2]);let a;t[3]!==r?(a=$("flex min-h-[80px] w-full rounded-md border border-zinc-200 bg-white px-3 py-2 text-sm ring-offset-white placeholder:text-zinc-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-zinc-950 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 dark:border-zinc-800 dark:bg-zinc-950 dark:ring-offset-zinc-950 dark:placeholder:text-zinc-400 dark:focus-visible:ring-zinc-300",r),t[3]=r,t[4]=a):a=t[4];let o;return t[5]!==s||t[6]!==e||t[7]!==a?(o=(0,l.jsx)("textarea",{className:a,ref:e,...s}),t[5]=s,t[6]=e,t[7]=a,t[8]=o):o=t[8],o});e0.displayName="Textarea";var t0=ie(),n0=n=>{const e=(0,t0.c)(7),{className:t}=n;let r;e[0]!==t?(r=$("flex items-center gap-1 px-1 py-1.5",t),e[0]=t,e[1]=r):r=e[1];let s,a,o;e[2]===Symbol.for("react.memo_cache_sentinel")?(s=(0,l.jsx)("div",{className:"size-1.5 rounded-full bg-zinc-400 dark:bg-zinc-500 animate-dot-pulse"}),a=(0,l.jsx)("div",{className:"size-1.5 rounded-full bg-zinc-400 dark:bg-zinc-500 animate-dot-pulse [animation-delay:0.2s]"}),o=(0,l.jsx)("div",{className:"size-1.5 rounded-full bg-zinc-400 dark:bg-zinc-500 animate-dot-pulse [animation-delay:0.4s]"}),e[2]=s,e[3]=a,e[4]=o):(s=e[2],a=e[3],o=e[4]);let i;return e[5]!==r?(i=(0,l.jsxs)("div",{className:r,children:[s,a,o]}),e[5]=r,e[6]=i):i=e[6],i},Xh=n0,Xe=ie();const Zh=n=>{const e=(0,Xe.c)(10);let t,r,s;e[0]!==n?({size:r,className:s,...t}=n,e[0]=n,e[1]=t,e[2]=r,e[3]=s):(t=e[1],r=e[2],s=e[3]);const a=r===void 0?24:r,o=s===void 0?"":s;let i,d;e[4]===Symbol.for("react.memo_cache_sentinel")?(i=(0,l.jsx)("path",{d:"M13.6006 21.0761L19.0608 17.9236C19.6437 17.5871 19.9346 17.4188 20.1465 17.1834C20.3341 16.9751 20.4759 16.7297 20.5625 16.4632C20.6602 16.1626 20.6602 15.8267 20.6602 15.1568V8.84268C20.6602 8.17277 20.6602 7.83694 20.5625 7.53638C20.4759 7.26982 20.3341 7.02428 20.1465 6.816C19.9355 6.58161 19.6453 6.41405 19.0674 6.08043L13.5996 2.92359C13.0167 2.58706 12.7259 2.41913 12.416 2.35328C12.1419 2.295 11.8584 2.295 11.5843 2.35328C11.2744 2.41914 10.9826 2.58706 10.3997 2.92359L4.93843 6.07666C4.35623 6.41279 4.06535 6.58073 3.85352 6.816C3.66597 7.02428 3.52434 7.26982 3.43773 7.53638C3.33984 7.83765 3.33984 8.17436 3.33984 8.84742V15.1524C3.33984 15.8254 3.33984 16.1619 3.43773 16.4632C3.52434 16.7297 3.66597 16.9751 3.85352 17.1834C4.06548 17.4188 4.35657 17.5871 4.93945 17.9236L10.3997 21.0761C10.9826 21.4126 11.2744 21.5806 11.5843 21.6465C11.8584 21.7047 12.1419 21.7047 12.416 21.6465C12.7259 21.5806 13.0177 21.4126 13.6006 21.0761Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),d=(0,l.jsx)("path",{d:"M9 11.9998C9 13.6566 10.3431 14.9998 12 14.9998C13.6569 14.9998 15 13.6566 15 11.9998C15 10.3429 13.6569 8.99976 12 8.99976C10.3431 8.99976 9 10.3429 9 11.9998Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e[4]=i,e[5]=d):(i=e[4],d=e[5]);let m;return e[6]!==o||e[7]!==t||e[8]!==a?(m=(0,l.jsxs)("svg",{width:a,height:a,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:o,...t,children:[i,d]}),e[6]=o,e[7]=t,e[8]=a,e[9]=m):m=e[9],m},no=n=>{const e=(0,Xe.c)(10);let t,r,s;e[0]!==n?({size:r,className:s,...t}=n,e[0]=n,e[1]=t,e[2]=r,e[3]=s):(t=e[1],r=e[2],s=e[3]);const a=r===void 0?24:r,o=s===void 0?"":s;let i,d;e[4]===Symbol.for("react.memo_cache_sentinel")?(i=(0,l.jsx)("path",{d:"M12 21C16.9706 21 21 16.9706 21 12C21 7.02944 16.9706 3 12 3C7.02944 3 3 7.02944 3 12C3 16.9706 7.02944 21 12 21Z",fill:"currentColor"}),d=(0,l.jsx)("path",{d:"M15 10L11 14L9 12",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e[4]=i,e[5]=d):(i=e[4],d=e[5]);let m;return e[6]!==o||e[7]!==t||e[8]!==a?(m=(0,l.jsxs)("svg",{width:a,height:a,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:o,...t,children:[i,d]}),e[6]=o,e[7]=t,e[8]=a,e[9]=m):m=e[9],m},r0=n=>{const e=(0,Xe.c)(9);let t,r,s;e[0]!==n?({size:r,className:s,...t}=n,e[0]=n,e[1]=t,e[2]=r,e[3]=s):(t=e[1],r=e[2],s=e[3]);const a=r===void 0?24:r,o=s===void 0?"":s;let i;e[4]===Symbol.for("react.memo_cache_sentinel")?(i=(0,l.jsx)("path",{d:"M12 8.00012L4 16.0001V20.0001L8 20.0001L16 12.0001M12 8.00012L14.8686 5.13146L14.8704 5.12976C15.2652 4.73488 15.463 4.53709 15.691 4.46301C15.8919 4.39775 16.1082 4.39775 16.3091 4.46301C16.5369 4.53704 16.7345 4.7346 17.1288 5.12892L18.8686 6.86872C19.2646 7.26474 19.4627 7.46284 19.5369 7.69117C19.6022 7.89201 19.6021 8.10835 19.5369 8.3092C19.4628 8.53736 19.265 8.73516 18.8695 9.13061L18.8686 9.13146L16 12.0001M12 8.00012L16 12.0001",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e[4]=i):i=e[4];let d;return e[5]!==o||e[6]!==t||e[7]!==a?(d=(0,l.jsx)("svg",{width:a,height:a,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:o,...t,children:i}),e[5]=o,e[6]=t,e[7]=a,e[8]=d):d=e[8],d},Pr=n=>{const e=(0,Xe.c)(9);let t,r,s;e[0]!==n?({size:r,className:s,...t}=n,e[0]=n,e[1]=t,e[2]=r,e[3]=s):(t=e[1],r=e[2],s=e[3]);const a=r===void 0?24:r,o=s===void 0?"":s;let i;e[4]===Symbol.for("react.memo_cache_sentinel")?(i=(0,l.jsx)("path",{d:"M15 19C15 16.7909 12.3137 15 9 15C5.68629 15 3 16.7909 3 19M19 16V13M19 13V10M19 13H16M19 13H22M9 12C6.79086 12 5 10.2091 5 8C5 5.79086 6.79086 4 9 4C11.2091 4 13 5.79086 13 8C13 10.2091 11.2091 12 9 12Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e[4]=i):i=e[4];let d;return e[5]!==o||e[6]!==t||e[7]!==a?(d=(0,l.jsx)("svg",{width:a,height:a,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:o,...t,children:i}),e[5]=o,e[6]=t,e[7]=a,e[8]=d):d=e[8],d},Lr=n=>{const e=(0,Xe.c)(9);let t,r,s;e[0]!==n?({size:r,className:s,...t}=n,e[0]=n,e[1]=t,e[2]=r,e[3]=s):(t=e[1],r=e[2],s=e[3]);const a=r===void 0?24:r,o=s===void 0?"":s;let i;e[4]===Symbol.for("react.memo_cache_sentinel")?(i=(0,l.jsx)("path",{d:"M15 19C15 16.7909 12.3137 15 9 15C5.68629 15 3 16.7909 3 19M21 10L17 14L15 12M9 12C6.79086 12 5 10.2091 5 8C5 5.79086 6.79086 4 9 4C11.2091 4 13 5.79086 13 8C13 10.2091 11.2091 12 9 12Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e[4]=i):i=e[4];let d;return e[5]!==o||e[6]!==t||e[7]!==a?(d=(0,l.jsx)("svg",{width:a,height:a,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:o,...t,children:i}),e[5]=o,e[6]=t,e[7]=a,e[8]=d):d=e[8],d},Gh=n=>{const e=(0,Xe.c)(10);let t,r,s;e[0]!==n?({size:r,className:s,...t}=n,e[0]=n,e[1]=t,e[2]=r,e[3]=s):(t=e[1],r=e[2],s=e[3]);const a=r===void 0?24:r,o=s===void 0?"":s;let i,d;e[4]===Symbol.for("react.memo_cache_sentinel")?(i=(0,l.jsx)("path",{d:"M5 9.92285C5 14.7747 9.24448 18.7869 11.1232 20.3252C11.3921 20.5454 11.5281 20.6568 11.7287 20.7132C11.8849 20.7572 12.1148 20.7572 12.271 20.7132C12.472 20.6567 12.6071 20.5463 12.877 20.3254C14.7557 18.7871 18.9999 14.7751 18.9999 9.9233C18.9999 8.08718 18.2625 6.32605 16.9497 5.02772C15.637 3.72939 13.8566 3 12.0001 3C10.1436 3 8.36301 3.7295 7.05025 5.02783C5.7375 6.32616 5 8.08674 5 9.92285Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),d=(0,l.jsx)("path",{d:"M10 9C10 10.1046 10.8954 11 12 11C13.1046 11 14 10.1046 14 9C14 7.89543 13.1046 7 12 7C10.8954 7 10 7.89543 10 9Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e[4]=i,e[5]=d):(i=e[4],d=e[5]);let m;return e[6]!==o||e[7]!==t||e[8]!==a?(m=(0,l.jsxs)("svg",{width:a,height:a,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:o,...t,children:[i,d]}),e[6]=o,e[7]=t,e[8]=a,e[9]=m):m=e[9],m},Jh=n=>{const e=(0,Xe.c)(9);let t,r,s;e[0]!==n?({size:r,className:s,...t}=n,e[0]=n,e[1]=t,e[2]=r,e[3]=s):(t=e[1],r=e[2],s=e[3]);const a=r===void 0?24:r,o=s===void 0?"":s;let i;e[4]===Symbol.for("react.memo_cache_sentinel")?(i=(0,l.jsx)("path",{d:"M10.0002 5H8.2002C7.08009 5 6.51962 5 6.0918 5.21799C5.71547 5.40973 5.40973 5.71547 5.21799 6.0918C5 6.51962 5 7.08009 5 8.2002V15.8002C5 16.9203 5 17.4801 5.21799 17.9079C5.40973 18.2842 5.71547 18.5905 6.0918 18.7822C6.5192 19 7.07899 19 8.19691 19H15.8031C16.921 19 17.48 19 17.9074 18.7822C18.2837 18.5905 18.5905 18.2839 18.7822 17.9076C19 17.4802 19 16.921 19 15.8031V14M20 9V4M20 4H15M20 4L13 11",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e[4]=i):i=e[4];let d;return e[5]!==o||e[6]!==t||e[7]!==a?(d=(0,l.jsx)("svg",{width:a,height:a,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:o,...t,children:i}),e[5]=o,e[6]=t,e[7]=a,e[8]=d):d=e[8],d},$h=n=>{const e=(0,Xe.c)(9);let t,r,s;e[0]!==n?({size:r,className:s,...t}=n,e[0]=n,e[1]=t,e[2]=r,e[3]=s):(t=e[1],r=e[2],s=e[3]);const a=r===void 0?24:r,o=s===void 0?"":s;let i;e[4]===Symbol.for("react.memo_cache_sentinel")?(i=(0,l.jsx)("path",{d:"M10.3078 13.6923L15.1539 8.84619M20.1113 5.88867L16.0207 19.1833C15.6541 20.3747 15.4706 20.9707 15.1544 21.1683C14.8802 21.3396 14.5406 21.3683 14.2419 21.2443C13.8975 21.1014 13.618 20.5433 13.0603 19.428L10.4694 14.2461C10.3809 14.0691 10.3366 13.981 10.2775 13.9043C10.225 13.8363 10.1645 13.7749 10.0965 13.7225C10.0215 13.6647 9.93486 13.6214 9.76577 13.5369L4.57192 10.9399C3.45662 10.3823 2.89892 10.1032 2.75601 9.75879C2.63207 9.4601 2.66033 9.12023 2.83169 8.84597C3.02928 8.52974 3.62523 8.34603 4.81704 7.97932L18.1116 3.88867C19.0486 3.60038 19.5173 3.45635 19.8337 3.57253C20.1094 3.67373 20.3267 3.89084 20.4279 4.16651C20.544 4.48283 20.3999 4.95126 20.1119 5.88729L20.1113 5.88867Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e[4]=i):i=e[4];let d;return e[5]!==o||e[6]!==t||e[7]!==a?(d=(0,l.jsx)("svg",{width:a,height:a,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:o,...t,children:i}),e[5]=o,e[6]=t,e[7]=a,e[8]=d):d=e[8],d},ro=n=>{const e=(0,Xe.c)(9);let t,r,s;e[0]!==n?({size:r,className:s,...t}=n,e[0]=n,e[1]=t,e[2]=r,e[3]=s):(t=e[1],r=e[2],s=e[3]);const a=r===void 0?24:r,o=s===void 0?"":s;let i;e[4]===Symbol.for("react.memo_cache_sentinel")?(i=(0,l.jsx)("path",{d:"M4 11.4522V16.8002C4 17.9203 4 18.4807 4.21799 18.9086C4.40973 19.2849 4.71547 19.5906 5.0918 19.7823C5.5192 20.0001 6.07899 20.0001 7.19691 20.0001H16.8031C17.921 20.0001 18.48 20.0001 18.9074 19.7823C19.2837 19.5906 19.5905 19.2849 19.7822 18.9086C20 18.4811 20 17.9216 20 16.8037V11.4522C20 10.9179 19.9995 10.6506 19.9346 10.4019C19.877 10.1816 19.7825 9.97307 19.6546 9.78464C19.5102 9.57201 19.3096 9.39569 18.9074 9.04383L14.1074 4.84383C13.3608 4.19054 12.9875 3.86406 12.5674 3.73982C12.1972 3.63035 11.8026 3.63035 11.4324 3.73982C11.0126 3.86397 10.6398 4.19014 9.89436 4.84244L5.09277 9.04383C4.69064 9.39569 4.49004 9.57201 4.3457 9.78464C4.21779 9.97307 4.12255 10.1816 4.06497 10.4019C4 10.6506 4 10.9179 4 11.4522Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e[4]=i):i=e[4];let d;return e[5]!==o||e[6]!==t||e[7]!==a?(d=(0,l.jsx)("svg",{width:a,height:a,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:o,...t,children:i}),e[5]=o,e[6]=t,e[7]=a,e[8]=d):d=e[8],d},so=n=>{const e=(0,Xe.c)(9);let t,r,s;e[0]!==n?({size:r,className:s,...t}=n,e[0]=n,e[1]=t,e[2]=r,e[3]=s):(t=e[1],r=e[2],s=e[3]);const a=r===void 0?24:r,o=s===void 0?"":s;let i;e[4]===Symbol.for("react.memo_cache_sentinel")?(i=(0,l.jsx)("path",{d:"M5.59961 19.9203L7.12357 18.7012L7.13478 18.6926C7.45249 18.4384 7.61281 18.3101 7.79168 18.2188C7.95216 18.1368 8.12328 18.0771 8.2998 18.0408C8.49877 18 8.70603 18 9.12207 18H17.8031C18.921 18 19.4806 18 19.908 17.7822C20.2843 17.5905 20.5905 17.2842 20.7822 16.9079C21 16.4805 21 15.9215 21 14.8036V7.19691C21 6.07899 21 5.5192 20.7822 5.0918C20.5905 4.71547 20.2837 4.40973 19.9074 4.21799C19.4796 4 18.9203 4 17.8002 4H6.2002C5.08009 4 4.51962 4 4.0918 4.21799C3.71547 4.40973 3.40973 4.71547 3.21799 5.0918C3 5.51962 3 6.08009 3 7.2002V18.6712C3 19.7369 3 20.2696 3.21846 20.5433C3.40845 20.7813 3.69644 20.9198 4.00098 20.9195C4.35115 20.9191 4.76744 20.5861 5.59961 19.9203Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e[4]=i):i=e[4];let d;return e[5]!==o||e[6]!==t||e[7]!==a?(d=(0,l.jsx)("svg",{width:a,height:a,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:o,...t,children:i}),e[5]=o,e[6]=t,e[7]=a,e[8]=d):d=e[8],d},ao=n=>{const e=(0,Xe.c)(9);let t,r,s;e[0]!==n?({size:r,className:s,...t}=n,e[0]=n,e[1]=t,e[2]=r,e[3]=s):(t=e[1],r=e[2],s=e[3]);const a=r===void 0?24:r,o=s===void 0?"":s;let i;e[4]===Symbol.for("react.memo_cache_sentinel")?(i=(0,l.jsx)("path",{d:"M6.89761 18.1618C8.28247 19.3099 10.0607 20 12.0001 20C16.4184 20 20.0001 16.4183 20.0001 12C20.0001 11.431 19.9407 10.8758 19.8278 10.3404M6.89761 18.1618C5.12756 16.6944 4.00014 14.4789 4.00014 12C4.00014 7.58172 7.58186 4 12.0001 4C15.8494 4 19.0637 6.71853 19.8278 10.3404M6.89761 18.1618C8.85314 17.7147 11.1796 16.7828 13.526 15.4281C16.2564 13.8517 18.4773 12.0125 19.8278 10.3404M6.89761 18.1618C4.46844 18.7171 2.61159 18.5243 1.99965 17.4644C1.36934 16.3726 2.19631 14.5969 3.99999 12.709M19.8278 10.3404C21.0796 8.79041 21.5836 7.38405 21.0522 6.46374C20.5134 5.53051 19.0095 5.26939 16.9997 5.59929",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e[4]=i):i=e[4];let d;return e[5]!==o||e[6]!==t||e[7]!==a?(d=(0,l.jsx)("svg",{width:a,height:a,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:o,...t,children:i}),e[5]=o,e[6]=t,e[7]=a,e[8]=d):d=e[8],d},oo=n=>{const e=(0,Xe.c)(10);let t,r,s;e[0]!==n?({size:r,className:s,...t}=n,e[0]=n,e[1]=t,e[2]=r,e[3]=s):(t=e[1],r=e[2],s=e[3]);const a=r===void 0?24:r,o=s===void 0?"":s;let i,d;e[4]===Symbol.for("react.memo_cache_sentinel")?(i=(0,l.jsx)("path",{d:"M3 12C3 16.9706 7.02944 21 12 21C16.9706 21 21 16.9706 21 12C21 7.02944 16.9706 3 12 3C7.02944 3 3 7.02944 3 12Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),d=(0,l.jsx)("path",{d:"M10 15V9L15 12L10 15Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e[4]=i,e[5]=d):(i=e[4],d=e[5]);let m;return e[6]!==o||e[7]!==t||e[8]!==a?(m=(0,l.jsxs)("svg",{width:a,height:a,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:o,...t,children:[i,d]}),e[6]=o,e[7]=t,e[8]=a,e[9]=m):m=e[9],m},io=n=>{const e=(0,Xe.c)(9);let t,r,s;e[0]!==n?({size:r,className:s,...t}=n,e[0]=n,e[1]=t,e[2]=r,e[3]=s):(t=e[1],r=e[2],s=e[3]);const a=r===void 0?24:r,o=s===void 0?"":s;let i;e[4]===Symbol.for("react.memo_cache_sentinel")?(i=(0,l.jsx)("path",{d:"M15 17V18C15 19.6569 13.6569 21 12 21C10.3431 21 9 19.6569 9 18V17M15 17H9M15 17H18.5905C18.973 17 19.1652 17 19.3201 16.9478C19.616 16.848 19.8475 16.6156 19.9473 16.3198C19.9997 16.1643 19.9997 15.9715 19.9997 15.5859C19.9997 15.4172 19.9995 15.3329 19.9863 15.2524C19.9614 15.1004 19.9024 14.9563 19.8126 14.8312C19.7651 14.7651 19.7047 14.7048 19.5858 14.5858L19.1963 14.1963C19.0706 14.0706 19 13.9001 19 13.7224V10C19 6.134 15.866 2.99999 12 3C8.13401 3.00001 5 6.13401 5 10V13.7224C5 13.9002 4.92924 14.0706 4.80357 14.1963L4.41406 14.5858C4.29477 14.7051 4.23504 14.765 4.1875 14.8312C4.09766 14.9564 4.03815 15.1004 4.0132 15.2524C4 15.3329 4 15.4172 4 15.586C4 15.9715 4 16.1642 4.05245 16.3197C4.15225 16.6156 4.3848 16.848 4.68066 16.9478C4.83556 17 5.02701 17 5.40956 17H9M18.0186 2.01367C19.3978 3.05299 20.4843 4.43177 21.1724 6.01574M5.98197 2.01367C4.60275 3.05299 3.5162 4.43177 2.82812 6.01574",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e[4]=i):i=e[4];let d;return e[5]!==o||e[6]!==t||e[7]!==a?(d=(0,l.jsx)("svg",{width:a,height:a,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:o,...t,children:i}),e[5]=o,e[6]=t,e[7]=a,e[8]=d):d=e[8],d},ep=n=>{const e=(0,Xe.c)(9);let t,r,s;e[0]!==n?({size:r,className:s,...t}=n,e[0]=n,e[1]=t,e[2]=r,e[3]=s):(t=e[1],r=e[2],s=e[3]);const a=r===void 0?24:r,o=s===void 0?"":s;let i;e[4]===Symbol.for("react.memo_cache_sentinel")?(i=(0,l.jsx)("path",{d:"M17 20C17 18.3431 14.7614 17 12 17C9.23858 17 7 18.3431 7 20M21 17.0004C21 15.7702 19.7659 14.7129 18 14.25M3 17.0004C3 15.7702 4.2341 14.7129 6 14.25M18 10.2361C18.6137 9.68679 19 8.8885 19 8C19 6.34315 17.6569 5 16 5C15.2316 5 14.5308 5.28885 14 5.76389M6 10.2361C5.38625 9.68679 5 8.8885 5 8C5 6.34315 6.34315 5 8 5C8.76835 5 9.46924 5.28885 10 5.76389M12 14C10.3431 14 9 12.6569 9 11C9 9.34315 10.3431 8 12 8C13.6569 8 15 9.34315 15 11C15 12.6569 13.6569 14 12 14Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e[4]=i):i=e[4];let d;return e[5]!==o||e[6]!==t||e[7]!==a?(d=(0,l.jsx)("svg",{width:a,height:a,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:o,...t,children:i}),e[5]=o,e[6]=t,e[7]=a,e[8]=d):d=e[8],d};var s0=ie();const lo=n=>{const e=(0,s0.c)(16),t=Jt(),r=n?.id;let s;e[0]!==r?(s=["unread_notifications_count",r],e[0]=r,e[1]=s):s=e[1];let a;e[2]!==n?.id?(a=()=>pl(n?.id||""),e[2]=n?.id,e[3]=a):a=e[3];const o=!!n?.id;let i;e[4]!==s||e[5]!==a||e[6]!==o?(i={queryKey:s,queryFn:a,enabled:o},e[4]=s,e[5]=a,e[6]=o,e[7]=i):i=e[7];const{data:d}=Ct(i),m=d===void 0?0:d;let u;e[8]!==n||e[9]!==t?(u=()=>{if(!n?.id)return;const p=Q.channel(`unread_count:${n.id}`).on("postgres_changes",{event:"*",schema:"public",table:"notifications",filter:`recipient_id=eq.${n.id}`},()=>{t.invalidateQueries({queryKey:["unread_notifications_count",n.id]}),t.invalidateQueries({queryKey:["notifications",n.id]})}).subscribe();return()=>{Q.removeChannel(p)}},e[8]=n,e[9]=t,e[10]=u):u=e[10];const c=n?.id;let f;e[11]!==t||e[12]!==c?(f=[c,t],e[11]=t,e[12]=c,e[13]=f):f=e[13],(0,g.useEffect)(u,f);let h;return e[14]!==m?(h={unreadCount:m},e[14]=m,e[15]=h):h=e[15],h};var a0=ie();const co=(n,e)=>{const t=(0,a0.c)(87),r=Jt();let s;t[0]===Symbol.for("react.memo_cache_sentinel")?(s={},t[0]=s):s=t[0];const[a,o]=(0,g.useState)(s),i=(0,g.useRef)(null),d=n?.id;let m;t[1]!==d?(m=["conversations",d],t[1]=d,t[2]=m):m=t[2];let u;t[3]!==n?.id?(u=()=>cl(n?.id||""),t[3]=n?.id,t[4]=u):u=t[4];const c=!!n?.id;let f;t[5]!==m||t[6]!==u||t[7]!==c?(f={queryKey:m,queryFn:u,enabled:c,staleTime:6e4},t[5]=m,t[6]=u,t[7]=c,t[8]=f):f=t[8];const{data:h,isLoading:p}=Ct(f);let b;t[9]!==h?(b=h===void 0?[]:h,t[9]=h,t[10]=b):b=t[10];const x=b,v=n?.id;let _;t[11]!==v?(_=["unread_messages_count",v],t[11]=v,t[12]=_):_=t[12];let N;t[13]!==n?.id?(N=()=>il(n?.id||""),t[13]=n?.id,t[14]=N):N=t[14];const S=!!n?.id;let E;t[15]!==N||t[16]!==S||t[17]!==_?(E={queryKey:_,queryFn:N,enabled:S,staleTime:6e4},t[15]=N,t[16]=S,t[17]=_,t[18]=E):E=t[18];const{data:k}=Ct(E),T=k===void 0?0:k;let y,w;t[19]!==e?(y=["messages",e],w=se=>{const{pageParam:de}=se;return dl(e,de,20)},t[19]=e,t[20]=y,t[21]=w):(y=t[20],w=t[21]);const A=!!e;let M;t[22]!==y||t[23]!==w||t[24]!==A?(M={queryKey:y,queryFn:w,initialPageParam:null,getNextPageParam:o0,enabled:A,refetchOnWindowFocus:!1},t[22]=y,t[23]=w,t[24]=A,t[25]=M):M=t[25];const{data:R,fetchNextPage:D,hasNextPage:z,isFetchingNextPage:L,isLoading:j}=rs(M);let C,P;t[26]!==e?(C=["reactions",e],P=()=>ul(e),t[26]=e,t[27]=C,t[28]=P):(C=t[27],P=t[28]);const I=!!e;let F;t[29]!==C||t[30]!==P||t[31]!==I?(F={queryKey:C,queryFn:P,enabled:I,staleTime:3e5},t[29]=C,t[30]=P,t[31]=I,t[32]=F):F=t[32];const{data:q}=Ct(F);let H;t[33]!==q?(H=q===void 0?[]:q,t[33]=q,t[34]=H):H=t[34];const U=H;let B;t[35]!==e||t[36]!==n||t[37]!==r?(B=()=>{if(!n?.id)return;const se=Q.channel(`user_messages:${n.id}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"messages"},me=>{const ye=me.new;ye.conversation_id===e&&r.invalidateQueries({queryKey:["messages",e]}),ye.sender_id!==n.id&&r.invalidateQueries({queryKey:["unread_messages_count",n.id]}),r.invalidateQueries({queryKey:["conversations",n.id]}),o(ce=>({...ce,[ye.conversation_id]:!1}))}).on("postgres_changes",{event:"DELETE",schema:"public",table:"messages"},()=>{r.invalidateQueries({queryKey:["messages"]}),r.invalidateQueries({queryKey:["conversations",n.id]})}).on("postgres_changes",{event:"*",schema:"public",table:"message_reactions"},()=>{r.invalidateQueries({queryKey:["reactions",e]})}).subscribe(),de=Q.channel("chat_typing_shared").on("broadcast",{event:"typing"},me=>{const{payload:ye}=me,{conversationId:ce,isTyping:oe,userId:Se}=ye;Se!==n.id&&o(Ne=>({...Ne,[ce]:oe}))}).subscribe();return i.current=de,()=>{Q.removeChannel(se),Q.removeChannel(de)}},t[35]=e,t[36]=n,t[37]=r,t[38]=B):B=t[38];const O=n?.id;let V;t[39]!==e||t[40]!==r||t[41]!==O?(V=[O,r,e],t[39]=e,t[40]=r,t[41]=O,t[42]=V):V=t[42],(0,g.useEffect)(B,V);let X;t[43]!==n?(X=se=>{const{convId:de,text:me,type:ye,media:ce,replyToId:oe}=se,Se=ye===void 0?"text":ye,Ne=ce===void 0?[]:ce,Ae=oe===void 0?null:oe;return ml(de,n.id,me,Se,Ne,Ae)},t[43]=n,t[44]=X):X=t[44];let Y;t[45]!==n||t[46]!==r?(Y=se=>{se&&(r.invalidateQueries({queryKey:["messages",se.conversation_id]}),r.invalidateQueries({queryKey:["conversations",n.id]}))},t[45]=n,t[46]=r,t[47]=Y):Y=t[47];let W;t[48]!==X||t[49]!==Y?(W={mutationFn:X,onSuccess:Y},t[48]=X,t[49]=Y,t[50]=W):W=t[50];const G=qt(W);let K;t[51]!==n?(K=(se,de)=>{i.current&&n&&i.current.send({type:"broadcast",event:"typing",payload:{conversationId:se,isTyping:de,userId:n.id}})},t[51]=n,t[52]=K):K=t[52];const J=K;let ue;t[53]!==n||t[54]!==r?(ue=async se=>{!n?.id||!se||(await ll(se,n.id),r.invalidateQueries({queryKey:["unread_messages_count",n.id]}),r.invalidateQueries({queryKey:["conversations",n.id]}))},t[53]=n,t[54]=r,t[55]=ue):ue=t[55];const ee=ue;let te;t[56]!==e||t[57]!==n||t[58]!==r?(te=async(se,de)=>{if(n?.id)try{await fl(se,n.id,de),r.invalidateQueries({queryKey:["reactions",e]})}catch(me){console.error("Failed to toggle reaction:",me)}},t[56]=e,t[57]=n,t[58]=r,t[59]=te):te=t[59];const ge=te;let ae;t[60]!==e||t[61]!==r?(ae=async se=>{try{await hl(se),r.invalidateQueries({queryKey:["messages",e]})}catch(de){console.error("Failed to delete message:",de)}},t[60]=e,t[61]=r,t[62]=ae):ae=t[62];const he=ae;let re;t[63]!==R?.pages?(re=[...R?.pages.flatMap(i0)||[]].reverse(),t[63]=R?.pages,t[64]=re):re=t[64];const je=re;let ke;t[65]!==n?.id?(ke=(se,de)=>{const me=se===void 0?[]:se,ye=de===void 0?[]:de;return me.map(ce=>({id:ce.id,sender:ce.sender_id===n?.id?"me":"them",text:ce.content,type:ce.type||"text",media:ce.media?Array.isArray(ce.media)?ce.media:[ce.media]:[],isRead:ce.is_read,replyToId:ce.reply_to_id,reactions:ye.filter(oe=>oe.message_id===ce.id),time:new Date(ce.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}))},t[65]=n?.id,t[66]=ke):ke=t[66],n?.id;const le=ke;let pe;t[67]!==G?(pe=(se,de,me,ye,ce)=>G.mutate({convId:se,text:de,type:me,media:ye,replyToId:ce}),t[67]=G,t[68]=pe):pe=t[68];let fe;return t[69]!==U||t[70]!==x||t[71]!==D||t[72]!==je||t[73]!==le||t[74]!==z||t[75]!==p||t[76]!==L||t[77]!==j||t[78]!==ee||t[79]!==he||t[80]!==ge||t[81]!==G.isPending||t[82]!==J||t[83]!==pe||t[84]!==a||t[85]!==T?(fe={conversations:x,unreadCount:T,isConvLoading:p,sendMessage:pe,sendTypingStatus:J,typingStatus:a,markAsRead:ee,formatMessages:le,onToggleReaction:ge,onDeleteMessage:he,conversationReactions:U,isSending:G.isPending,messages:je,isMsgLoading:j,fetchNextMessages:D,hasMoreMessages:z,isFetchingMoreMessages:L},t[69]=U,t[70]=x,t[71]=D,t[72]=je,t[73]=le,t[74]=z,t[75]=p,t[76]=L,t[77]=j,t[78]=ee,t[79]=he,t[80]=ge,t[81]=G.isPending,t[82]=J,t[83]=pe,t[84]=a,t[85]=T,t[86]=fe):fe=t[86],fe};function o0(n){if(!(!n||n.length<20))return n[n.length-1].created_at}function i0(n){return n}var l0=ie(),c0=n=>{const e=(0,l0.c)(23),{handleProfileClick:t}=n,{currentUser:r}=$e(),{unreadCount:s}=lo(r),{unreadCount:a}=co(r),o=vn();let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i=[{id:"home",icon:ro,path:"/"},{id:"community",icon:ao,path:"/community"},{id:"reels",icon:oo,path:"/reels"},{id:"messages",icon:so,path:"/messages"},{id:"notifications",icon:io,path:"/notifications"}],e[0]=i):i=e[0];const d=i;let m;e[1]!==a||e[2]!==s?(m=d.map(N=>(0,l.jsx)(ts,{to:N.path,"aria-label":N.id,className:u0,children:S=>{const{isActive:E}=S;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(N.icon,{size:26,strokeWidth:E?2.5:2}),N.id==="notifications"&&s>0&&(0,l.jsx)("span",{className:"absolute right-[30%] top-3 size-2 rounded-full bg-rose-500 ring-2 ring-white dark:ring-black"}),N.id==="messages"&&a>0&&(0,l.jsx)("span",{className:"absolute right-[30%] top-3 size-2 rounded-full bg-rose-500 ring-2 ring-white dark:ring-black"})]})}},N.id)),e[1]=a,e[2]=s,e[3]=m):m=e[3];let u;e[4]!==r||e[5]!==t?(u=()=>{r&&t(r.handle)},e[4]=r,e[5]=t,e[6]=u):u=e[6];const c=`size-7 border-2 ${o.pathname.startsWith("/u/")?"border-black dark:border-white":"border-transparent opacity-70"}`,f=r?.avatar||"/default-avatar.webp";let h;e[7]!==f?(h=(0,l.jsx)(gt,{src:f,alt:"Profile",className:"object-cover"}),e[7]=f,e[8]=h):h=e[8];let p;e[9]!==r?.handle?.[0]?(p=r?.handle?.[0]?.toUpperCase(),e[9]=r?.handle?.[0],e[10]=p):p=e[10];let b;e[11]!==p?(b=(0,l.jsx)(vt,{children:p}),e[11]=p,e[12]=b):b=e[12];let x;e[13]!==c||e[14]!==h||e[15]!==b?(x=(0,l.jsxs)(pt,{className:c,children:[h,b]}),e[13]=c,e[14]=h,e[15]=b,e[16]=x):x=e[16];let v;e[17]!==u||e[18]!==x?(v=(0,l.jsx)("button",{onClick:u,"aria-label":"My Profile",className:"flex h-full flex-1 flex-col items-center justify-center",children:x}),e[17]=u,e[18]=x,e[19]=v):v=e[19];let _;return e[20]!==v||e[21]!==m?(_=(0,l.jsxs)("nav",{className:"pb-safe fixed bottom-0 left-0 right-0 z-[40] flex h-16 items-center border-t border-zinc-100 bg-white/90 backdrop-blur-md dark:border-zinc-800 dark:bg-black/90 md:hidden",children:[m,v]}),e[20]=v,e[21]=m,e[22]=_):_=e[22],_},d0=c0;function u0(n){const{isActive:e}=n;return`relative flex h-full flex-1 flex-col items-center justify-center transition-all duration-200 ${e?"text-black dark:text-white":"text-zinc-400 opacity-70"}`}var f0=ie(),m0=()=>{const n=(0,f0.c)(5);let e,t;n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)("img",{src:"/welcome-banner.webp",alt:"Welcome Banner",fetchPriority:"high",loading:"eager",decoding:"async",className:"h-full w-full object-cover duration-700 group-hover:scale-105"}),t=(0,l.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-black/20 to-transparent"}),n[0]=e,n[1]=t):(e=n[0],t=n[1]);let r;n[2]===Symbol.for("react.memo_cache_sentinel")?(r=(0,l.jsx)("h1",{className:"mb-1 text-3xl font-black drop-shadow-lg sm:text-4xl",children:"Welcome to Sysm"}),n[2]=r):r=n[2];let s;n[3]===Symbol.for("react.memo_cache_sentinel")?(s=(0,l.jsxs)("div",{className:"absolute bottom-6 left-8 text-white",children:[r,(0,l.jsxs)("p",{className:"tracking-wide text-sm font-medium opacity-90 drop-shadow-md sm:text-base",children:["a social network built by"," ",(0,l.jsx)("a",{href:"https://t.me/systemadminbd",target:"_blank",rel:"noopener noreferrer",className:"hover:underline",children:"@Systemadminbd"})]})]}),n[3]=s):s=n[3];let a;return n[4]===Symbol.for("react.memo_cache_sentinel")?(a=(0,l.jsxs)("div",{className:"group relative mb-6 aspect-[21/9] w-full cursor-pointer overflow-hidden rounded-3xl sm:aspect-[2.5/1]",children:[e,t,s,(0,l.jsx)("div",{className:"absolute bottom-4 right-8",children:(0,l.jsx)("img",{src:"/logo.webp",className:"size-12 animate-pulse rounded-xl opacity-80",alt:"",loading:"lazy",decoding:"async"})})]}),n[4]=a):a=n[4],a},h0=m0,p0=ie(),g0=n=>{const e=(0,p0.c)(26),{onPostClick:t}=n,r=vn(),s=bn(),{darkMode:a}=Kn(),o=r.pathname==="/";let i;e[0]!==r.pathname?(i=r.pathname.startsWith("/reels")||r.pathname.startsWith("/messages")&&r.pathname.split("/").length>2,e[0]=r.pathname,e[1]=i):i=e[1];const d=i;let m;e[2]!==s?(m=E=>{s(`/u/${E}`)},e[2]=s,e[3]=m):m=e[3];const u=m,c=`min-h-screen bg-[--background] text-[--foreground] font-sans selection:bg-violet-500 selection:text-white transition-colors duration-200 ${a?"dark":""}`;let f;e[4]!==t?(f=(0,l.jsx)(j0,{onPostClick:t}),e[4]=t,e[5]=f):f=e[5];let h;e[6]!==o?(h=o&&(0,l.jsx)("div",{className:"w-full max-w-full overflow-hidden",children:(0,l.jsx)(h0,{})}),e[6]=o,e[7]=h):h=e[7];let p;e[8]===Symbol.for("react.memo_cache_sentinel")?(p=(0,l.jsx)("div",{className:"w-full",children:(0,l.jsx)(Oo,{})}),e[8]=p):p=e[8];let b;e[9]!==h?(b=(0,l.jsxs)("div",{className:"flex w-0 flex-1 flex-col overflow-x-hidden",children:[h,p]}),e[9]=h,e[10]=b):b=e[10];let x;e[11]!==r.pathname?(x=!r.pathname.startsWith("/messages")&&(0,l.jsx)(N0,{}),e[11]=r.pathname,e[12]=x):x=e[12];let v;e[13]!==b||e[14]!==x?(v=(0,l.jsxs)("main",{className:"flex flex-1 justify-center px-0 gap-x-0 md:px-2 md:py-3 md:gap-x-4 lg:gap-x-8",children:[b,x]}),e[13]=b,e[14]=x,e[15]=v):v=e[15];let _;e[16]!==f||e[17]!==v?(_=(0,l.jsxs)("div",{className:"mx-auto flex min-h-screen w-full max-w-[1500px] justify-center px-0 sm:px-0",children:[f,v]}),e[16]=f,e[17]=v,e[18]=_):_=e[18];let N;e[19]!==u||e[20]!==d?(N=!d&&(0,l.jsx)(d0,{handleProfileClick:u}),e[19]=u,e[20]=d,e[21]=N):N=e[21];let S;return e[22]!==_||e[23]!==N||e[24]!==c?(S=(0,l.jsxs)("div",{className:c,children:[_,N]}),e[22]=_,e[23]=N,e[24]=c,e[25]=S):S=e[25],S},v0=g0,b0=ie(),x0=n=>{const e=(0,b0.c)(2),{children:t}=n;let r;return e[0]!==t?(r=(0,l.jsx)("div",{className:"w-full animate-in fade-in slide-in-from-bottom-2 duration-700 ease-[cubic-bezier(0.22,1,0.36,1)] fill-mode-forwards",children:t}),e[0]=t,e[1]=r):r=e[1],r},tt=x0,y0=ie(),w0=n=>{const e=(0,y0.c)(18),{onPostClick:t}=n,{currentUser:r}=$e(),{unreadCount:s}=lo(r),{unreadCount:a}=co(r);let o,i,d,m,u;e[0]===Symbol.for("react.memo_cache_sentinel")?(o={id:"home",icon:ro,path:"/"},i={id:"community",icon:ao,path:"/community"},d={id:"reels",icon:oo,path:"/reels"},m={id:"messages",icon:so,path:"/messages"},u={id:"notifications",icon:io,path:"/notifications"},e[0]=o,e[1]=i,e[2]=d,e[3]=m,e[4]=u):(o=e[0],i=e[1],d=e[2],m=e[3],u=e[4]);const c=r?`/u/${r.handle}`:"/community";let f;e[5]!==c?(f=[o,i,d,m,u,{id:"profile",icon:Tn,path:c}],e[5]=c,e[6]=f):f=e[6];const h=f;let p;e[7]===Symbol.for("react.memo_cache_sentinel")?(p=(0,l.jsx)(es,{to:"/",className:"mb-8 transition-transform hover:scale-110",children:(0,l.jsx)("img",{src:"/logo.webp",alt:"Logo",className:"size-8 rounded-lg"})}),e[7]=p):p=e[7];let b;e[8]!==a||e[9]!==h||e[10]!==s?(b=h.map(_=>(0,l.jsxs)(ts,{to:_.path,"aria-label":_.id,className:k0,children:[(0,l.jsx)(_.icon,{size:26,strokeWidth:2.5}),_.id==="notifications"&&s>0&&(0,l.jsx)("span",{className:"absolute right-2 top-2 size-2 rounded-full bg-rose-500 ring-2 ring-white dark:ring-black"}),_.id==="messages"&&a>0&&(0,l.jsx)("span",{className:"absolute right-2 top-2 size-2 rounded-full bg-rose-500 ring-2 ring-white dark:ring-black"})]},_.id)),e[8]=a,e[9]=h,e[10]=s,e[11]=b):b=e[11];let x;e[12]!==r||e[13]!==t?(x=r&&(0,l.jsx)("button",{onClick:t,"aria-label":"Create Post",className:"mt-2 cursor-pointer rounded-xl bg-zinc-950 p-2.5 text-white shadow-lg transition-all duration-200 hover:scale-110 active:scale-95 dark:bg-white dark:text-zinc-950",title:"Create Post",children:(0,l.jsx)(Qt,{size:26,strokeWidth:2.5})}),e[12]=r,e[13]=t,e[14]=x):x=e[14];let v;return e[15]!==x||e[16]!==b?(v=(0,l.jsxs)("aside",{className:"sticky top-0 hidden h-screen w-[68px] shrink-0 flex-col items-center border-r border-zinc-100 bg-white py-5 transition-colors duration-200 dark:border-zinc-800 dark:bg-black md:flex",children:[p,(0,l.jsxs)("nav",{className:"flex w-full flex-col items-center gap-y-4",children:[b,x]})]}),e[15]=x,e[16]=b,e[17]=v):v=e[17],v},j0=w0;function k0(n){const{isActive:e}=n;return`relative rounded-xl border border-transparent p-2.5 transition-all duration-200 ${e?"border-zinc-200 bg-zinc-100 text-black dark:border-zinc-800 dark:bg-zinc-900 dark:text-white":"text-zinc-500 hover:bg-zinc-50 dark:hover:bg-zinc-900"}`}var C0=ie(),_0=()=>{const n=(0,C0.c)(49),{currentUser:e,setAuthMode:t}=$e(),{darkMode:r,toggleDarkMode:s}=Kn(),[a,o]=(0,g.useState)(""),i=bn();let d;n[0]===Symbol.for("react.memo_cache_sentinel")?(d={queryKey:["trending-hashtags"],queryFn:S0,staleTime:3e5,refetchInterval:6e4},n[0]=d):d=n[0];const{data:m}=Ct(d);let u;n[1]!==m?(u=m===void 0?[]:m,n[1]=m,n[2]=u):u=n[2];const c=u;let f;n[3]===Symbol.for("react.memo_cache_sentinel")?(f=[" 2026 Sysm","Terms","Privacy","Guidelines","Discord","Sysm","GitHub","Support","Status"],n[3]=f):f=n[3];const h=f;let p;n[4]!==r?(p=r?(0,l.jsx)(Di,{size:20}):(0,l.jsx)(Pi,{size:20}),n[4]=r,n[5]=p):p=n[5];let b;n[6]!==p||n[7]!==s?(b=(0,l.jsx)("button",{onClick:s,className:"cursor-pointer rounded-full border border-zinc-100 bg-zinc-50 p-3 text-zinc-500 transition-all hover:bg-zinc-100 dark:border-zinc-800 dark:bg-zinc-900 dark:text-zinc-400 dark:hover:bg-zinc-800",title:"Toggle Theme",children:p}),n[6]=p,n[7]=s,n[8]=b):b=n[8];const x=b;if(e){let M;n[9]===Symbol.for("react.memo_cache_sentinel")?(M=()=>o(""),n[9]=M):M=n[9];let R;n[10]!==a?(R=(0,l.jsx)("div",{className:"flex-1",children:(0,l.jsx)(Ir,{value:a,onChange:o,onClear:M})}),n[10]=a,n[11]=R):R=n[11];let D;n[12]!==R||n[13]!==x?(D=(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[R,x]}),n[12]=R,n[13]=x,n[14]=D):D=n[14];let z;n[15]===Symbol.for("react.memo_cache_sentinel")?(z=(0,l.jsx)("h3",{className:"px-4 pt-4 pb-2 text-xl font-black text-[--foreground]",children:"What's happening"}),n[15]=z):z=n[15];let L;if(n[16]!==i||n[17]!==c){let q;n[19]!==i?(q=H=>(0,l.jsxs)("div",{onClick:()=>i(`/tags/${H.name.replace(/^#/,"")}`),className:"group cursor-pointer px-4 py-3 transition-colors hover:bg-zinc-50 dark:hover:bg-zinc-900/50",children:[(0,l.jsx)("div",{className:"text-[13px] font-medium text-zinc-500 dark:text-zinc-400",children:"Trending"}),(0,l.jsxs)("div",{className:"text-[15px] font-bold text-[--foreground] group-hover:text-violet-500 transition-colors",children:["#",H.name.replace(/^#/,"")]}),(0,l.jsxs)("div",{className:"text-[13px] text-zinc-500 dark:text-zinc-400",children:[H.usage_count," posts"]})]},H.id),n[19]=i,n[20]=q):q=n[20],L=c.map(q),n[16]=i,n[17]=c,n[18]=L}else L=n[18];let j;n[21]!==c.length?(j=c.length===0&&(0,l.jsx)("p",{className:"px-4 py-6 text-sm text-zinc-500 text-center",children:"No trends yet"}),n[21]=c.length,n[22]=j):j=n[22];let C;n[23]===Symbol.for("react.memo_cache_sentinel")?(C=(0,l.jsx)("button",{className:"w-full px-4 py-4 text-left text-violet-500 hover:bg-zinc-50 dark:hover:bg-zinc-900/50 transition-colors text-sm font-medium",children:"Show more"}),n[23]=C):C=n[23];let P;n[24]!==L||n[25]!==j?(P=(0,l.jsxs)("div",{className:"rounded-2xl border border-[--border] bg-[--card] overflow-hidden",children:[z,(0,l.jsxs)("div",{className:"flex flex-col",children:[L,j,C]})]}),n[24]=L,n[25]=j,n[26]=P):P=n[26];let I;n[27]===Symbol.for("react.memo_cache_sentinel")?(I=(0,l.jsx)("div",{className:"flex flex-wrap gap-x-4 gap-y-2 px-2 pb-5 text-[13px] font-medium text-zinc-500",children:h.map(z0)}),n[27]=I):I=n[27];let F;return n[28]!==P||n[29]!==D?(F=(0,l.jsxs)("aside",{className:"sticky top-5 hidden max-h-screen w-[350px] shrink-0 flex-col gap-y-6 overflow-y-auto lg:flex",children:[D,P,I]}),n[28]=P,n[29]=D,n[30]=F):F=n[30],F}let v,_;n[31]!==t?(v=(0,l.jsx)("button",{onClick:()=>t("signup"),className:"cursor-pointer flex-1 rounded-full border border-[--border] bg-[--card] py-2.5 font-bold text-[--foreground] shadow-sm transition-colors hover:bg-zinc-50 dark:hover:bg-zinc-900",children:"Signup"}),_=()=>t("login"),n[31]=t,n[32]=v,n[33]=_):(v=n[32],_=n[33]);let N;n[34]===Symbol.for("react.memo_cache_sentinel")?(N=(0,l.jsx)("img",{src:"/logo.webp",alt:"",className:"size-4 rounded-sm"}),n[34]=N):N=n[34];let S;n[35]!==_?(S=(0,l.jsxs)("button",{onClick:_,className:"cursor-pointer flex flex-1 items-center justify-center gap-2 rounded-full bg-zinc-950 py-2.5 font-bold text-white transition-opacity hover:opacity-90 dark:bg-white dark:text-zinc-950",children:[N,"Login"]}),n[35]=_,n[36]=S):S=n[36];let E;n[37]!==v||n[38]!==S||n[39]!==x?(E=(0,l.jsxs)("div",{className:"flex gap-3",children:[v,S,x]}),n[37]=v,n[38]=S,n[39]=x,n[40]=E):E=n[40];let k;n[41]===Symbol.for("react.memo_cache_sentinel")?(k=()=>o(""),n[41]=k):k=n[41];let T;n[42]!==a?(T=(0,l.jsx)(Ir,{value:a,onChange:o,onClear:k}),n[42]=a,n[43]=T):T=n[43];let y;n[44]===Symbol.for("react.memo_cache_sentinel")?(y=(0,l.jsx)(Qu,{}),n[44]=y):y=n[44];let w;n[45]===Symbol.for("react.memo_cache_sentinel")?(w=(0,l.jsx)("div",{className:"flex flex-wrap gap-x-4 gap-y-2 px-2 pb-5 text-[13px] font-medium text-zinc-500",children:h.map(A0)}),n[45]=w):w=n[45];let A;return n[46]!==E||n[47]!==T?(A=(0,l.jsxs)("aside",{className:"sticky top-5 hidden w-[400px] shrink-0 flex-col gap-y-6 pr-4 lg:flex",children:[E,T,y,w]}),n[46]=E,n[47]=T,n[48]=A):A=n[48],A},N0=_0;function S0(){return Cl(5)}function z0(n){return(0,l.jsx)("a",{href:"#",className:"hover:underline",children:n},n)}function A0(n){return(0,l.jsx)("a",{href:"#",className:"hover:underline",children:n},n)}var tp=ie(),E0=({isOpen:n,onClose:e})=>{const{currentUser:t}=$e(),{addToast:r}=St(),s=bn(),[a,o]=(0,g.useState)({name:"",handle:"",description:"",isPrivate:!1}),[i,d]=(0,g.useState)(!1),m=async u=>{if(u.preventDefault(),!(!a.name||!a.handle||!t)){d(!0);try{const c=await yl({name:a.name,handle:a.handle.toLowerCase().replace(/[^a-z0-9_]/g,""),description:a.description,is_private:a.isPrivate,creator_id:t.id});if(!c)throw new Error("Failed to create community");const{error:f}=await Q.from("community_members").insert([{community_id:c.id,user_id:t.id,role:"admin"}]);if(f)throw f;r(`Community "${c.name}" created!`),e(),s(`/c/${c.handle}`)}catch(c){console.error(c),r(c.message||"Failed to create community","error")}finally{d(!1)}}};return(0,l.jsx)(Lt,{isOpen:n,onClose:()=>!i&&e(),title:"Create Community",className:"sm:max-w-md",children:(0,l.jsxs)("form",{onSubmit:m,className:"space-y-5",children:[(0,l.jsxs)("div",{className:"flex flex-col items-center justify-center rounded-2xl border-2 border-dashed border-zinc-200 bg-zinc-50 p-6 dark:border-zinc-800 dark:bg-zinc-900",children:[(0,l.jsx)("div",{className:"mb-3 flex size-20 items-center justify-center rounded-2xl bg-white shadow-sm dark:bg-black",children:(0,l.jsx)(di,{size:32,className:"text-violet-600"})}),(0,l.jsx)("p",{className:"max-w-[200px] text-center text-xs font-medium text-zinc-500",children:"Communities are where people with shared interests connect."})]}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"space-y-1.5",children:[(0,l.jsx)("label",{className:"ml-1 text-sm font-bold",children:"Community Name"}),(0,l.jsx)("input",{type:"text",required:!0,className:"w-full rounded-xl border border-zinc-200 bg-zinc-50 px-4 py-2.5 outline-none transition-all focus:border-violet-500 focus:ring-2 focus:ring-violet-500/20 dark:border-zinc-800 dark:bg-zinc-900",placeholder:"e.g. Photography Enthusiasts",value:a.name,onChange:u=>o({...a,name:u.target.value})})]}),(0,l.jsxs)("div",{className:"space-y-1.5",children:[(0,l.jsx)("label",{className:"ml-1 text-sm font-bold",children:"Handle"}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 font-medium text-zinc-500",children:"c/"}),(0,l.jsx)("input",{type:"text",required:!0,className:"w-full rounded-xl border border-zinc-200 bg-zinc-50 pl-8 pr-4 py-2.5 outline-none transition-all focus:border-violet-500 focus:ring-2 focus:ring-violet-500/20 dark:border-zinc-800 dark:bg-zinc-900",placeholder:"photography",value:a.handle,onChange:u=>o({...a,handle:u.target.value.toLowerCase().replace(/[^a-z0-9_]/g,"")})})]})]}),(0,l.jsxs)("div",{className:"space-y-1.5",children:[(0,l.jsx)("label",{className:"ml-1 text-sm font-bold",children:"Description (Optional)"}),(0,l.jsx)("textarea",{className:"min-h-[100px] w-full resize-none rounded-xl border border-zinc-200 bg-zinc-50 px-4 py-2.5 outline-none transition-all focus:border-violet-500 focus:ring-2 focus:ring-violet-500/20 dark:border-zinc-800 dark:bg-zinc-900",placeholder:"What is this community about?",value:a.description,onChange:u=>o({...a,description:u.target.value})})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between rounded-xl border border-zinc-200 bg-zinc-50 p-4 dark:border-zinc-800 dark:bg-zinc-900",children:[(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)("span",{className:"text-sm font-bold",children:"Private Community"}),(0,l.jsx)("span",{className:"text-[10px] text-zinc-500",children:"Only Admins can post in private communities"})]}),(0,l.jsx)("input",{type:"checkbox",className:"size-5 cursor-pointer rounded-md accent-violet-600",checked:a.isPrivate,onChange:u=>o({...a,isPrivate:u.target.checked})})]})]}),(0,l.jsxs)("div",{className:"flex gap-3 pt-2",children:[(0,l.jsx)(Qe,{type:"button",variant:"outline",className:"flex-1",onClick:e,disabled:i,children:"Cancel"}),(0,l.jsx)(Qe,{type:"submit",className:"flex-1",disabled:i||!a.name||!a.handle,children:i?(0,l.jsx)(mt,{size:18,className:"animate-spin"}):"Create"})]})]})})},np=E0;function R0(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return(0,g.useMemo)(()=>r=>{e.forEach(s=>s(r))},e)}var wn=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Ft(n){const e=Object.prototype.toString.call(n);return e==="[object Window]"||e==="[object global]"}function sr(n){return"nodeType"in n}function Ze(n){var e,t;return n?Ft(n)?n:sr(n)&&(e=(t=n.ownerDocument)==null?void 0:t.defaultView)!=null?e:window:window}function ar(n){const{Document:e}=Ze(n);return n instanceof e}function en(n){return Ft(n)?!1:n instanceof Ze(n).HTMLElement}function uo(n){return n instanceof Ze(n).SVGElement}function Ot(n){return n?Ft(n)?n.document:sr(n)?ar(n)?n:en(n)||uo(n)?n.ownerDocument:document:document:document}var ut=wn?g.useLayoutEffect:g.useEffect;function or(n){const e=(0,g.useRef)(n);return ut(()=>{e.current=n}),(0,g.useCallback)(function(){for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];return e.current==null?void 0:e.current(...r)},[])}function M0(){const n=(0,g.useRef)(null);return[(0,g.useCallback)((e,t)=>{n.current=setInterval(e,t)},[]),(0,g.useCallback)(()=>{n.current!==null&&(clearInterval(n.current),n.current=null)},[])]}function Kt(n,e){e===void 0&&(e=[n]);const t=(0,g.useRef)(n);return ut(()=>{t.current!==n&&(t.current=n)},e),t}function tn(n,e){const t=(0,g.useRef)();return(0,g.useMemo)(()=>{const r=n(t.current);return t.current=r,r},[...e])}function mn(n){const e=or(n),t=(0,g.useRef)(null);return[t,(0,g.useCallback)(r=>{r!==t.current&&e?.(r,t.current),t.current=r},[])]}function On(n){const e=(0,g.useRef)();return(0,g.useEffect)(()=>{e.current=n},[n]),e.current}var En={};function nn(n,e){return(0,g.useMemo)(()=>{if(e)return e;const t=En[n]==null?0:En[n]+1;return En[n]=t,n+"-"+t},[n,e])}function fo(n){return function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),s=1;s<t;s++)r[s-1]=arguments[s];return r.reduce((a,o)=>{const i=Object.entries(o);for(const[d,m]of i){const u=a[d];u!=null&&(a[d]=u+n*m)}return a},{...e})}}var It=fo(1),Xt=fo(-1);function D0(n){return"clientX"in n&&"clientY"in n}function ir(n){if(!n)return!1;const{KeyboardEvent:e}=Ze(n.target);return e&&n instanceof e}function T0(n){if(!n)return!1;const{TouchEvent:e}=Ze(n.target);return e&&n instanceof e}function Bn(n){if(T0(n)){if(n.touches&&n.touches.length){const{clientX:e,clientY:t}=n.touches[0];return{x:e,y:t}}else if(n.changedTouches&&n.changedTouches.length){const{clientX:e,clientY:t}=n.changedTouches[0];return{x:e,y:t}}}return D0(n)?{x:n.clientX,y:n.clientY}:null}var Zt=Object.freeze({Translate:{toString(n){if(!n)return;const{x:e,y:t}=n;return"translate3d("+(e?Math.round(e):0)+"px, "+(t?Math.round(t):0)+"px, 0)"}},Scale:{toString(n){if(!n)return;const{scaleX:e,scaleY:t}=n;return"scaleX("+e+") scaleY("+t+")"}},Transform:{toString(n){if(n)return[Zt.Translate.toString(n),Zt.Scale.toString(n)].join(" ")}},Transition:{toString(n){let{property:e,duration:t,easing:r}=n;return e+" "+t+"ms "+r}}}),Fr="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function I0(n){return n.matches(Fr)?n:n.querySelector(Fr)}var P0={display:"none"};function L0(n){let{id:e,value:t}=n;return g.createElement("div",{id:e,style:P0},t)}function F0(n){let{id:e,announcement:t,ariaLiveType:r="assertive"}=n;return g.createElement("div",{id:e,style:{position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"},role:"status","aria-live":r,"aria-atomic":!0},t)}function O0(){const[n,e]=(0,g.useState)("");return{announce:(0,g.useCallback)(t=>{t!=null&&e(t)},[]),announcement:n}}var Ut=ns(),mo=(0,g.createContext)(null);function B0(n){const e=(0,g.useContext)(mo);(0,g.useEffect)(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(n)},[n,e])}function H0(){const[n]=(0,g.useState)(()=>new Set),e=(0,g.useCallback)(t=>(n.add(t),()=>n.delete(t)),[n]);return[(0,g.useCallback)(t=>{let{type:r,event:s}=t;n.forEach(a=>{var o;return(o=a[r])==null?void 0:o.call(a,s)})},[n]),e]}var U0={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},q0={onDragStart(n){let{active:e}=n;return"Picked up draggable item "+e.id+"."},onDragOver(n){let{active:e,over:t}=n;return t?"Draggable item "+e.id+" was moved over droppable area "+t.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(n){let{active:e,over:t}=n;return t?"Draggable item "+e.id+" was dropped over droppable area "+t.id:"Draggable item "+e.id+" was dropped."},onDragCancel(n){let{active:e}=n;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function W0(n){let{announcements:e=q0,container:t,hiddenTextDescribedById:r,screenReaderInstructions:s=U0}=n;const{announce:a,announcement:o}=O0(),i=nn("DndLiveRegion"),[d,m]=(0,g.useState)(!1);if((0,g.useEffect)(()=>{m(!0)},[]),B0((0,g.useMemo)(()=>({onDragStart(c){let{active:f}=c;a(e.onDragStart({active:f}))},onDragMove(c){let{active:f,over:h}=c;e.onDragMove&&a(e.onDragMove({active:f,over:h}))},onDragOver(c){let{active:f,over:h}=c;a(e.onDragOver({active:f,over:h}))},onDragEnd(c){let{active:f,over:h}=c;a(e.onDragEnd({active:f,over:h}))},onDragCancel(c){let{active:f,over:h}=c;a(e.onDragCancel({active:f,over:h}))}}),[a,e])),!d)return null;const u=g.createElement(g.Fragment,null,g.createElement(L0,{id:r,value:s.draggable}),g.createElement(F0,{id:i,announcement:o}));return t?(0,Ut.createPortal)(u,t):u}var Pe;(function(n){n.DragStart="dragStart",n.DragMove="dragMove",n.DragEnd="dragEnd",n.DragCancel="dragCancel",n.DragOver="dragOver",n.RegisterDroppable="registerDroppable",n.SetDroppableDisabled="setDroppableDisabled",n.UnregisterDroppable="unregisterDroppable"})(Pe||(Pe={}));function hn(){}function Or(n,e){return(0,g.useMemo)(()=>({sensor:n,options:e??{}}),[n,e])}function V0(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return(0,g.useMemo)(()=>[...e].filter(r=>r!=null),[...e])}var it=Object.freeze({x:0,y:0});function ho(n,e){return Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2))}function po(n,e){let{data:{value:t}}=n,{data:{value:r}}=e;return t-r}function Y0(n,e){let{data:{value:t}}=n,{data:{value:r}}=e;return r-t}function Br(n){let{left:e,top:t,height:r,width:s}=n;return[{x:e,y:t},{x:e+s,y:t},{x:e,y:t+r},{x:e+s,y:t+r}]}function go(n,e){if(!n||n.length===0)return null;const[t]=n;return e?t[e]:t}function Hr(n,e,t){return e===void 0&&(e=n.left),t===void 0&&(t=n.top),{x:e+n.width*.5,y:t+n.height*.5}}var Q0=n=>{let{collisionRect:e,droppableRects:t,droppableContainers:r}=n;const s=Hr(e,e.left,e.top),a=[];for(const o of r){const{id:i}=o,d=t.get(i);if(d){const m=ho(Hr(d),s);a.push({id:i,data:{droppableContainer:o,value:m}})}}return a.sort(po)},K0=n=>{let{collisionRect:e,droppableRects:t,droppableContainers:r}=n;const s=Br(e),a=[];for(const o of r){const{id:i}=o,d=t.get(i);if(d){const m=Br(d),u=s.reduce((f,h,p)=>f+ho(m[p],h),0),c=Number((u/4).toFixed(4));a.push({id:i,data:{droppableContainer:o,value:c}})}}return a.sort(po)};function X0(n,e){const t=Math.max(e.top,n.top),r=Math.max(e.left,n.left),s=Math.min(e.left+e.width,n.left+n.width),a=Math.min(e.top+e.height,n.top+n.height),o=s-r,i=a-t;if(r<s&&t<a){const d=e.width*e.height,m=n.width*n.height,u=o*i,c=u/(d+m-u);return Number(c.toFixed(4))}return 0}var Z0=n=>{let{collisionRect:e,droppableRects:t,droppableContainers:r}=n;const s=[];for(const a of r){const{id:o}=a,i=t.get(o);if(i){const d=X0(i,e);d>0&&s.push({id:o,data:{droppableContainer:a,value:d}})}}return s.sort(Y0)};function G0(n,e,t){return{...n,scaleX:e&&t?e.width/t.width:1,scaleY:e&&t?e.height/t.height:1}}function vo(n,e){return n&&e?{x:n.left-e.left,y:n.top-e.top}:it}function J0(n){return function(t){for(var r=arguments.length,s=new Array(r>1?r-1:0),a=1;a<r;a++)s[a-1]=arguments[a];return s.reduce((o,i)=>({...o,top:o.top+n*i.y,bottom:o.bottom+n*i.y,left:o.left+n*i.x,right:o.right+n*i.x}),{...t})}}var $0=J0(1);function ef(n){if(n.startsWith("matrix3d(")){const e=n.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(n.startsWith("matrix(")){const e=n.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function tf(n,e,t){const r=ef(e);if(!r)return n;const{scaleX:s,scaleY:a,x:o,y:i}=r,d=n.left-o-(1-s)*parseFloat(t),m=n.top-i-(1-a)*parseFloat(t.slice(t.indexOf(" ")+1)),u=s?n.width/s:n.width,c=a?n.height/a:n.height;return{width:u,height:c,top:m,right:d+u,bottom:m+c,left:d}}var nf={ignoreTransform:!1};function Bt(n,e){e===void 0&&(e=nf);let t=n.getBoundingClientRect();if(e.ignoreTransform){const{transform:m,transformOrigin:u}=Ze(n).getComputedStyle(n);m&&(t=tf(t,m,u))}const{top:r,left:s,width:a,height:o,bottom:i,right:d}=t;return{top:r,left:s,width:a,height:o,bottom:i,right:d}}function Ur(n){return Bt(n,{ignoreTransform:!0})}function rf(n){const e=n.innerWidth,t=n.innerHeight;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}function sf(n,e){return e===void 0&&(e=Ze(n).getComputedStyle(n)),e.position==="fixed"}function af(n,e){e===void 0&&(e=Ze(n).getComputedStyle(n));const t=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(r=>{const s=e[r];return typeof s=="string"?t.test(s):!1})}function jn(n,e){const t=[];function r(s){if(e!=null&&t.length>=e||!s)return t;if(ar(s)&&s.scrollingElement!=null&&!t.includes(s.scrollingElement))return t.push(s.scrollingElement),t;if(!en(s)||uo(s)||t.includes(s))return t;const a=Ze(n).getComputedStyle(s);return s!==n&&af(s,a)&&t.push(s),sf(s,a)?t:r(s.parentNode)}return n?r(n):t}function bo(n){const[e]=jn(n,1);return e??null}function Rn(n){return!wn||!n?null:Ft(n)?n:sr(n)?ar(n)||n===Ot(n).scrollingElement?window:en(n)?n:null:null}function xo(n){return Ft(n)?n.scrollX:n.scrollLeft}function yo(n){return Ft(n)?n.scrollY:n.scrollTop}function Hn(n){return{x:xo(n),y:yo(n)}}var Le;(function(n){n[n.Forward=1]="Forward",n[n.Backward=-1]="Backward"})(Le||(Le={}));function wo(n){return!wn||!n?!1:n===document.scrollingElement}function jo(n){const e={x:0,y:0},t=wo(n)?{height:window.innerHeight,width:window.innerWidth}:{height:n.clientHeight,width:n.clientWidth},r={x:n.scrollWidth-t.width,y:n.scrollHeight-t.height};return{isTop:n.scrollTop<=e.y,isLeft:n.scrollLeft<=e.x,isBottom:n.scrollTop>=r.y,isRight:n.scrollLeft>=r.x,maxScroll:r,minScroll:e}}var of={x:.2,y:.2};function lf(n,e,t,r,s){let{top:a,left:o,right:i,bottom:d}=t;r===void 0&&(r=10),s===void 0&&(s=of);const{isTop:m,isBottom:u,isLeft:c,isRight:f}=jo(n),h={x:0,y:0},p={x:0,y:0},b={height:e.height*s.y,width:e.width*s.x};return!m&&a<=e.top+b.height?(h.y=Le.Backward,p.y=r*Math.abs((e.top+b.height-a)/b.height)):!u&&d>=e.bottom-b.height&&(h.y=Le.Forward,p.y=r*Math.abs((e.bottom-b.height-d)/b.height)),!f&&i>=e.right-b.width?(h.x=Le.Forward,p.x=r*Math.abs((e.right-b.width-i)/b.width)):!c&&o<=e.left+b.width&&(h.x=Le.Backward,p.x=r*Math.abs((e.left+b.width-o)/b.width)),{direction:h,speed:p}}function cf(n){if(n===document.scrollingElement){const{innerWidth:a,innerHeight:o}=window;return{top:0,left:0,right:a,bottom:o,width:a,height:o}}const{top:e,left:t,right:r,bottom:s}=n.getBoundingClientRect();return{top:e,left:t,right:r,bottom:s,width:n.clientWidth,height:n.clientHeight}}function ko(n){return n.reduce((e,t)=>It(e,Hn(t)),it)}function df(n){return n.reduce((e,t)=>e+xo(t),0)}function uf(n){return n.reduce((e,t)=>e+yo(t),0)}function ff(n,e){if(e===void 0&&(e=Bt),!n)return;const{top:t,left:r,bottom:s,right:a}=e(n);bo(n)&&(s<=0||a<=0||t>=window.innerHeight||r>=window.innerWidth)&&n.scrollIntoView({block:"center",inline:"center"})}var mf=[["x",["left","right"],df],["y",["top","bottom"],uf]],lr=class{constructor(n,e){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const t=jn(e),r=ko(t);this.rect={...n},this.width=n.width,this.height=n.height;for(const[s,a,o]of mf)for(const i of a)Object.defineProperty(this,i,{get:()=>{const d=o(t),m=r[s]-d;return this.rect[i]+m},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}},Wt=class{constructor(n){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(e=>{var t;return(t=this.target)==null?void 0:t.removeEventListener(...e)})},this.target=n}add(n,e,t){var r;(r=this.target)==null||r.addEventListener(n,e,t),this.listeners.push([n,e,t])}};function hf(n){const{EventTarget:e}=Ze(n);return n instanceof e?n:Ot(n)}function Mn(n,e){const t=Math.abs(n.x),r=Math.abs(n.y);return typeof e=="number"?Math.sqrt(t**2+r**2)>e:"x"in e&&"y"in e?t>e.x&&r>e.y:"x"in e?t>e.x:"y"in e?r>e.y:!1}var nt;(function(n){n.Click="click",n.DragStart="dragstart",n.Keydown="keydown",n.ContextMenu="contextmenu",n.Resize="resize",n.SelectionChange="selectionchange",n.VisibilityChange="visibilitychange"})(nt||(nt={}));function qr(n){n.preventDefault()}function pf(n){n.stopPropagation()}var we;(function(n){n.Space="Space",n.Down="ArrowDown",n.Right="ArrowRight",n.Left="ArrowLeft",n.Up="ArrowUp",n.Esc="Escape",n.Enter="Enter",n.Tab="Tab"})(we||(we={}));var Co={start:[we.Space,we.Enter],cancel:[we.Esc],end:[we.Space,we.Enter,we.Tab]},gf=(n,e)=>{let{currentCoordinates:t}=e;switch(n.code){case we.Right:return{...t,x:t.x+25};case we.Left:return{...t,x:t.x-25};case we.Down:return{...t,y:t.y+25};case we.Up:return{...t,y:t.y-25}}},cr=class{constructor(n){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=n;const{event:{target:e}}=n;this.props=n,this.listeners=new Wt(Ot(e)),this.windowListeners=new Wt(Ze(e)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(nt.Resize,this.handleCancel),this.windowListeners.add(nt.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(nt.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:n,onStart:e}=this.props,t=n.node.current;t&&ff(t),e(it)}handleKeyDown(n){if(ir(n)){const{active:e,context:t,options:r}=this.props,{keyboardCodes:s=Co,coordinateGetter:a=gf,scrollBehavior:o="smooth"}=r,{code:i}=n;if(s.end.includes(i)){this.handleEnd(n);return}if(s.cancel.includes(i)){this.handleCancel(n);return}const{collisionRect:d}=t.current,m=d?{x:d.left,y:d.top}:it;this.referenceCoordinates||(this.referenceCoordinates=m);const u=a(n,{active:e,context:t.current,currentCoordinates:m});if(u){const c=Xt(u,m),f={x:0,y:0},{scrollableAncestors:h}=t.current;for(const p of h){const b=n.code,{isTop:x,isRight:v,isLeft:_,isBottom:N,maxScroll:S,minScroll:E}=jo(p),k=cf(p),T={x:Math.min(b===we.Right?k.right-k.width/2:k.right,Math.max(b===we.Right?k.left:k.left+k.width/2,u.x)),y:Math.min(b===we.Down?k.bottom-k.height/2:k.bottom,Math.max(b===we.Down?k.top:k.top+k.height/2,u.y))},y=b===we.Right&&!v||b===we.Left&&!_,w=b===we.Down&&!N||b===we.Up&&!x;if(y&&T.x!==u.x){const A=p.scrollLeft+c.x,M=b===we.Right&&A<=S.x||b===we.Left&&A>=E.x;if(M&&!c.y){p.scrollTo({left:A,behavior:o});return}M?f.x=p.scrollLeft-A:f.x=b===we.Right?p.scrollLeft-S.x:p.scrollLeft-E.x,f.x&&p.scrollBy({left:-f.x,behavior:o});break}else if(w&&T.y!==u.y){const A=p.scrollTop+c.y,M=b===we.Down&&A<=S.y||b===we.Up&&A>=E.y;if(M&&!c.x){p.scrollTo({top:A,behavior:o});return}M?f.y=p.scrollTop-A:f.y=b===we.Down?p.scrollTop-S.y:p.scrollTop-E.y,f.y&&p.scrollBy({top:-f.y,behavior:o});break}}this.handleMove(n,It(Xt(u,this.referenceCoordinates),f))}}}handleMove(n,e){const{onMove:t}=this.props;n.preventDefault(),t(e)}handleEnd(n){const{onEnd:e}=this.props;n.preventDefault(),this.detach(),e()}handleCancel(n){const{onCancel:e}=this.props;n.preventDefault(),this.detach(),e()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}};cr.activators=[{eventName:"onKeyDown",handler:(n,e,t)=>{let{keyboardCodes:r=Co,onActivation:s}=e,{active:a}=t;const{code:o}=n.nativeEvent;if(r.start.includes(o)){const i=a.activatorNode.current;return i&&n.target!==i?!1:(n.preventDefault(),s?.({event:n.nativeEvent}),!0)}return!1}}];function Wr(n){return!!(n&&"distance"in n)}function Vr(n){return!!(n&&"delay"in n)}var dr=class{constructor(n,e,t){var r;t===void 0&&(t=hf(n.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=n,this.events=e;const{event:s}=n,{target:a}=s;this.props=n,this.events=e,this.document=Ot(a),this.documentListeners=new Wt(this.document),this.listeners=new Wt(t),this.windowListeners=new Wt(Ze(a)),this.initialCoordinates=(r=Bn(s))!=null?r:it,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:n,props:{options:{activationConstraint:e,bypassActivationConstraint:t}}}=this;if(this.listeners.add(n.move.name,this.handleMove,{passive:!1}),this.listeners.add(n.end.name,this.handleEnd),n.cancel&&this.listeners.add(n.cancel.name,this.handleCancel),this.windowListeners.add(nt.Resize,this.handleCancel),this.windowListeners.add(nt.DragStart,qr),this.windowListeners.add(nt.VisibilityChange,this.handleCancel),this.windowListeners.add(nt.ContextMenu,qr),this.documentListeners.add(nt.Keydown,this.handleKeydown),e){if(t!=null&&t({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Vr(e)){this.timeoutId=setTimeout(this.handleStart,e.delay),this.handlePending(e);return}if(Wr(e)){this.handlePending(e);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(n,e){const{active:t,onPending:r}=this.props;r(t,n,this.initialCoordinates,e)}handleStart(){const{initialCoordinates:n}=this,{onStart:e}=this.props;n&&(this.activated=!0,this.documentListeners.add(nt.Click,pf,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(nt.SelectionChange,this.removeTextSelection),e(n))}handleMove(n){var e;const{activated:t,initialCoordinates:r,props:s}=this,{onMove:a,options:{activationConstraint:o}}=s;if(!r)return;const i=(e=Bn(n))!=null?e:it,d=Xt(r,i);if(!t&&o){if(Wr(o)){if(o.tolerance!=null&&Mn(d,o.tolerance))return this.handleCancel();if(Mn(d,o.distance))return this.handleStart()}if(Vr(o)&&Mn(d,o.tolerance))return this.handleCancel();this.handlePending(o,d);return}n.cancelable&&n.preventDefault(),a(i)}handleEnd(){const{onAbort:n,onEnd:e}=this.props;this.detach(),this.activated||n(this.props.active),e()}handleCancel(){const{onAbort:n,onCancel:e}=this.props;this.detach(),this.activated||n(this.props.active),e()}handleKeydown(n){n.code===we.Esc&&this.handleCancel()}removeTextSelection(){var n;(n=this.document.getSelection())==null||n.removeAllRanges()}},vf={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}},ur=class extends dr{constructor(n){const{event:e}=n,t=Ot(e.target);super(n,vf,t)}};ur.activators=[{eventName:"onPointerDown",handler:(n,e)=>{let{nativeEvent:t}=n,{onActivation:r}=e;return!t.isPrimary||t.button!==0?!1:(r?.({event:t}),!0)}}];var bf={move:{name:"mousemove"},end:{name:"mouseup"}},Un;(function(n){n[n.RightClick=2]="RightClick"})(Un||(Un={}));var xf=class extends dr{constructor(n){super(n,bf,Ot(n.event.target))}};xf.activators=[{eventName:"onMouseDown",handler:(n,e)=>{let{nativeEvent:t}=n,{onActivation:r}=e;return t.button===Un.RightClick?!1:(r?.({event:t}),!0)}}];var Dn={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}},yf=class extends dr{constructor(n){super(n,Dn)}static setup(){return window.addEventListener(Dn.move.name,n,{capture:!1,passive:!1}),function(){window.removeEventListener(Dn.move.name,n)};function n(){}}};yf.activators=[{eventName:"onTouchStart",handler:(n,e)=>{let{nativeEvent:t}=n,{onActivation:r}=e;const{touches:s}=t;return s.length>1?!1:(r?.({event:t}),!0)}}];var Vt;(function(n){n[n.Pointer=0]="Pointer",n[n.DraggableRect=1]="DraggableRect"})(Vt||(Vt={}));var pn;(function(n){n[n.TreeOrder=0]="TreeOrder",n[n.ReversedTreeOrder=1]="ReversedTreeOrder"})(pn||(pn={}));function wf(n){let{acceleration:e,activator:t=Vt.Pointer,canScroll:r,draggingRect:s,enabled:a,interval:o=5,order:i=pn.TreeOrder,pointerCoordinates:d,scrollableAncestors:m,scrollableAncestorRects:u,delta:c,threshold:f}=n;const h=kf({delta:c,disabled:!a}),[p,b]=M0(),x=(0,g.useRef)({x:0,y:0}),v=(0,g.useRef)({x:0,y:0}),_=(0,g.useMemo)(()=>{switch(t){case Vt.Pointer:return d?{top:d.y,bottom:d.y,left:d.x,right:d.x}:null;case Vt.DraggableRect:return s}},[t,s,d]),N=(0,g.useRef)(null),S=(0,g.useCallback)(()=>{const k=N.current;if(!k)return;const T=x.current.x*v.current.x,y=x.current.y*v.current.y;k.scrollBy(T,y)},[]),E=(0,g.useMemo)(()=>i===pn.TreeOrder?[...m].reverse():m,[i,m]);(0,g.useEffect)(()=>{if(!a||!m.length||!_){b();return}for(const k of E){if(r?.(k)===!1)continue;const T=u[m.indexOf(k)];if(!T)continue;const{direction:y,speed:w}=lf(k,T,_,e,f);for(const A of["x","y"])h[A][y[A]]||(w[A]=0,y[A]=0);if(w.x>0||w.y>0){b(),N.current=k,p(S,o),x.current=w,v.current=y;return}}x.current={x:0,y:0},v.current={x:0,y:0},b()},[e,S,r,b,a,o,JSON.stringify(_),JSON.stringify(h),p,m,E,u,JSON.stringify(f)])}var jf={x:{[Le.Backward]:!1,[Le.Forward]:!1},y:{[Le.Backward]:!1,[Le.Forward]:!1}};function kf(n){let{delta:e,disabled:t}=n;const r=On(e);return tn(s=>{if(t||!r||!s)return jf;const a={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[Le.Backward]:s.x[Le.Backward]||a.x===-1,[Le.Forward]:s.x[Le.Forward]||a.x===1},y:{[Le.Backward]:s.y[Le.Backward]||a.y===-1,[Le.Forward]:s.y[Le.Forward]||a.y===1}}},[t,e,r])}function Cf(n,e){const t=e!=null?n.get(e):void 0,r=t?t.node.current:null;return tn(s=>{var a;return e==null?null:(a=r??s)!=null?a:null},[r,e])}function _f(n,e){return(0,g.useMemo)(()=>n.reduce((t,r)=>{const{sensor:s}=r,a=s.activators.map(o=>({eventName:o.eventName,handler:e(o.handler,r)}));return[...t,...a]},[]),[n,e])}var Gt;(function(n){n[n.Always=0]="Always",n[n.BeforeDragging=1]="BeforeDragging",n[n.WhileDragging=2]="WhileDragging"})(Gt||(Gt={}));var qn;(function(n){n.Optimized="optimized"})(qn||(qn={}));var Yr=new Map;function Nf(n,e){let{dragging:t,dependencies:r,config:s}=e;const[a,o]=(0,g.useState)(null),{frequency:i,measure:d,strategy:m}=s,u=(0,g.useRef)(n),c=x(),f=Kt(c),h=(0,g.useCallback)(function(v){v===void 0&&(v=[]),!f.current&&o(_=>_===null?v:_.concat(v.filter(N=>!_.includes(N))))},[f]),p=(0,g.useRef)(null),b=tn(v=>{if(c&&!t)return Yr;if(!v||v===Yr||u.current!==n||a!=null){const _=new Map;for(let N of n){if(!N)continue;if(a&&a.length>0&&!a.includes(N.id)&&N.rect.current){_.set(N.id,N.rect.current);continue}const S=N.node.current,E=S?new lr(d(S),S):null;N.rect.current=E,E&&_.set(N.id,E)}return _}return v},[n,a,t,c,d]);return(0,g.useEffect)(()=>{u.current=n},[n]),(0,g.useEffect)(()=>{c||h()},[t,c]),(0,g.useEffect)(()=>{a&&a.length>0&&o(null)},[JSON.stringify(a)]),(0,g.useEffect)(()=>{c||typeof i!="number"||p.current!==null||(p.current=setTimeout(()=>{h(),p.current=null},i))},[i,c,h,...r]),{droppableRects:b,measureDroppableContainers:h,measuringScheduled:a!=null};function x(){switch(m){case Gt.Always:return!1;case Gt.BeforeDragging:return t;default:return!t}}}function _o(n,e){return tn(t=>n?t||(typeof e=="function"?e(n):n):null,[e,n])}function Sf(n,e){return _o(n,e)}function zf(n){let{callback:e,disabled:t}=n;const r=or(e),s=(0,g.useMemo)(()=>{if(t||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:a}=window;return new a(r)},[r,t]);return(0,g.useEffect)(()=>()=>s?.disconnect(),[s]),s}function kn(n){let{callback:e,disabled:t}=n;const r=or(e),s=(0,g.useMemo)(()=>{if(t||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:a}=window;return new a(r)},[t]);return(0,g.useEffect)(()=>()=>s?.disconnect(),[s]),s}function Af(n){return new lr(Bt(n),n)}function Qr(n,e,t){e===void 0&&(e=Af);const[r,s]=(0,g.useState)(null);function a(){s(d=>{if(!n)return null;if(n.isConnected===!1){var m;return(m=d??t)!=null?m:null}const u=e(n);return JSON.stringify(d)===JSON.stringify(u)?d:u})}const o=zf({callback(d){if(n)for(const m of d){const{type:u,target:c}=m;if(u==="childList"&&c instanceof HTMLElement&&c.contains(n)){a();break}}}}),i=kn({callback:a});return ut(()=>{a(),n?(i?.observe(n),o?.observe(document.body,{childList:!0,subtree:!0})):(i?.disconnect(),o?.disconnect())},[n]),r}function Ef(n){return vo(n,_o(n))}var Kr=[];function Rf(n){const e=(0,g.useRef)(n),t=tn(r=>n?r&&r!==Kr&&n&&e.current&&n.parentNode===e.current.parentNode?r:jn(n):Kr,[n]);return(0,g.useEffect)(()=>{e.current=n},[n]),t}function Mf(n){const[e,t]=(0,g.useState)(null),r=(0,g.useRef)(n),s=(0,g.useCallback)(a=>{const o=Rn(a.target);o&&t(i=>i?(i.set(o,Hn(o)),new Map(i)):null)},[]);return(0,g.useEffect)(()=>{const a=r.current;if(n!==a){o(a);const i=n.map(d=>{const m=Rn(d);return m?(m.addEventListener("scroll",s,{passive:!0}),[m,Hn(m)]):null}).filter(d=>d!=null);t(i.length?new Map(i):null),r.current=n}return()=>{o(n),o(a)};function o(i){i.forEach(d=>{Rn(d)?.removeEventListener("scroll",s)})}},[s,n]),(0,g.useMemo)(()=>n.length?e?Array.from(e.values()).reduce((a,o)=>It(a,o),it):ko(n):it,[n,e])}function Xr(n,e){e===void 0&&(e=[]);const t=(0,g.useRef)(null);return(0,g.useEffect)(()=>{t.current=null},e),(0,g.useEffect)(()=>{const r=n!==it;r&&!t.current&&(t.current=n),!r&&t.current&&(t.current=null)},[n]),t.current?Xt(n,t.current):it}function Df(n){(0,g.useEffect)(()=>{if(!wn)return;const e=n.map(t=>{let{sensor:r}=t;return r.setup==null?void 0:r.setup()});return()=>{for(const t of e)t?.()}},n.map(e=>{let{sensor:t}=e;return t}))}function Tf(n,e){return(0,g.useMemo)(()=>n.reduce((t,r)=>{let{eventName:s,handler:a}=r;return t[s]=o=>{a(o,e)},t},{}),[n,e])}function No(n){return(0,g.useMemo)(()=>n?rf(n):null,[n])}var Zr=[];function If(n,e){e===void 0&&(e=Bt);const[t]=n,r=No(t?Ze(t):null),[s,a]=(0,g.useState)(Zr);function o(){a(()=>n.length?n.map(d=>wo(d)?r:new lr(e(d),d)):Zr)}const i=kn({callback:o});return ut(()=>{i?.disconnect(),o(),n.forEach(d=>i?.observe(d))},[n]),s}function Pf(n){if(!n)return null;if(n.children.length>1)return n;const e=n.children[0];return en(e)?e:n}function Lf(n){let{measure:e}=n;const[t,r]=(0,g.useState)(null),s=kn({callback:(0,g.useCallback)(i=>{for(const{target:d}of i)if(en(d)){r(m=>{const u=e(d);return m?{...m,width:u.width,height:u.height}:u});break}},[e])}),[a,o]=mn((0,g.useCallback)(i=>{const d=Pf(i);s?.disconnect(),d&&s?.observe(d),r(d?e(d):null)},[e,s]));return(0,g.useMemo)(()=>({nodeRef:a,rect:t,setRef:o}),[t,a,o])}var Ff=[{sensor:ur,options:{}},{sensor:cr,options:{}}],Of={current:{}},ln={draggable:{measure:Ur},droppable:{measure:Ur,strategy:Gt.WhileDragging,frequency:qn.Optimized},dragOverlay:{measure:Bt}},Yt=class extends Map{get(n){var e;return n!=null&&(e=super.get(n))!=null?e:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(n=>{let{disabled:e}=n;return!e})}getNodeFor(n){var e,t;return(e=(t=this.get(n))==null?void 0:t.node.current)!=null?e:void 0}},Bf={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Yt,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:hn},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:ln,measureDroppableContainers:hn,windowRect:null,measuringScheduled:!1},Hf={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:hn,draggableNodes:new Map,over:null,measureDroppableContainers:hn},Cn=(0,g.createContext)(Hf),So=(0,g.createContext)(Bf);function Uf(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Yt}}}function qf(n,e){switch(e.type){case Pe.DragStart:return{...n,draggable:{...n.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case Pe.DragMove:return n.draggable.active==null?n:{...n,draggable:{...n.draggable,translate:{x:e.coordinates.x-n.draggable.initialCoordinates.x,y:e.coordinates.y-n.draggable.initialCoordinates.y}}};case Pe.DragEnd:case Pe.DragCancel:return{...n,draggable:{...n.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Pe.RegisterDroppable:{const{element:t}=e,{id:r}=t,s=new Yt(n.droppable.containers);return s.set(r,t),{...n,droppable:{...n.droppable,containers:s}}}case Pe.SetDroppableDisabled:{const{id:t,key:r,disabled:s}=e,a=n.droppable.containers.get(t);if(!a||r!==a.key)return n;const o=new Yt(n.droppable.containers);return o.set(t,{...a,disabled:s}),{...n,droppable:{...n.droppable,containers:o}}}case Pe.UnregisterDroppable:{const{id:t,key:r}=e,s=n.droppable.containers.get(t);if(!s||r!==s.key)return n;const a=new Yt(n.droppable.containers);return a.delete(t),{...n,droppable:{...n.droppable,containers:a}}}default:return n}}function Wf(n){let{disabled:e}=n;const{active:t,activatorEvent:r,draggableNodes:s}=(0,g.useContext)(Cn),a=On(r),o=On(t?.id);return(0,g.useEffect)(()=>{if(!e&&!r&&a&&o!=null){if(!ir(a)||document.activeElement===a.target)return;const i=s.get(o);if(!i)return;const{activatorNode:d,node:m}=i;if(!d.current&&!m.current)return;requestAnimationFrame(()=>{for(const u of[d.current,m.current]){if(!u)continue;const c=I0(u);if(c){c.focus();break}}})}},[r,e,s,o,a]),null}function Vf(n,e){let{transform:t,...r}=e;return n!=null&&n.length?n.reduce((s,a)=>a({transform:s,...r}),t):t}function Yf(n){return(0,g.useMemo)(()=>({draggable:{...ln.draggable,...n?.draggable},droppable:{...ln.droppable,...n?.droppable},dragOverlay:{...ln.dragOverlay,...n?.dragOverlay}}),[n?.draggable,n?.droppable,n?.dragOverlay])}function Qf(n){let{activeNode:e,measure:t,initialRect:r,config:s=!0}=n;const a=(0,g.useRef)(!1),{x:o,y:i}=typeof s=="boolean"?{x:s,y:s}:s;ut(()=>{if(!o&&!i||!e){a.current=!1;return}if(a.current||!r)return;const d=e?.node.current;if(!d||d.isConnected===!1)return;const m=vo(t(d),r);if(o||(m.x=0),i||(m.y=0),a.current=!0,Math.abs(m.x)>0||Math.abs(m.y)>0){const u=bo(d);u&&u.scrollBy({top:m.y,left:m.x})}},[e,o,i,r,t])}var zo=(0,g.createContext)({...it,scaleX:1,scaleY:1}),jt;(function(n){n[n.Uninitialized=0]="Uninitialized",n[n.Initializing=1]="Initializing",n[n.Initialized=2]="Initialized"})(jt||(jt={}));var Kf=(0,g.memo)(function(e){var t,r,s,a;let{id:o,accessibility:i,autoScroll:d=!0,children:m,sensors:u=Ff,collisionDetection:c=Z0,measuring:f,modifiers:h,...p}=e;const[b,x]=(0,g.useReducer)(qf,void 0,Uf),[v,_]=H0(),[N,S]=(0,g.useState)(jt.Uninitialized),E=N===jt.Initialized,{draggable:{active:k,nodes:T,translate:y},droppable:{containers:w}}=b,A=k!=null?T.get(k):null,M=(0,g.useRef)({initial:null,translated:null}),R=(0,g.useMemo)(()=>{var ze;return k!=null?{id:k,data:(ze=A?.data)!=null?ze:Of,rect:M}:null},[k,A]),D=(0,g.useRef)(null),[z,L]=(0,g.useState)(null),[j,C]=(0,g.useState)(null),P=Kt(p,Object.values(p)),I=nn("DndDescribedBy",o),F=(0,g.useMemo)(()=>w.getEnabled(),[w]),q=Yf(f),{droppableRects:H,measureDroppableContainers:U,measuringScheduled:B}=Nf(F,{dragging:E,dependencies:[y.x,y.y],config:q.droppable}),O=Cf(T,k),V=(0,g.useMemo)(()=>j?Bn(j):null,[j]),X=_e(),Y=Sf(O,q.draggable.measure);Qf({activeNode:k!=null?T.get(k):null,config:X.layoutShiftCompensation,initialRect:Y,measure:q.draggable.measure});const W=Qr(O,q.draggable.measure,Y),G=Qr(O?O.parentElement:null),K=(0,g.useRef)({activatorEvent:null,active:null,activeNode:O,collisionRect:null,collisions:null,droppableRects:H,draggableNodes:T,draggingNode:null,draggingNodeRect:null,droppableContainers:w,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),J=w.getNodeFor((t=K.current.over)==null?void 0:t.id),ue=Lf({measure:q.dragOverlay.measure}),ee=(r=ue.nodeRef.current)!=null?r:O,te=E?(s=ue.rect)!=null?s:W:null,ge=!!(ue.nodeRef.current&&ue.rect),ae=Ef(ge?null:W),he=No(ee?Ze(ee):null),re=Rf(E?J??O:null),je=If(re),ke=Vf(h,{transform:{x:y.x-ae.x,y:y.y-ae.y,scaleX:1,scaleY:1},activatorEvent:j,active:R,activeNodeRect:W,containerNodeRect:G,draggingNodeRect:te,over:K.current.over,overlayNodeRect:ue.rect,scrollableAncestors:re,scrollableAncestorRects:je,windowRect:he}),le=V?It(V,y):null,pe=Mf(re),fe=Xr(pe),se=Xr(pe,[W]),de=It(ke,fe),me=te?$0(te,ke):null,ye=R&&me?c({active:R,collisionRect:me,droppableRects:H,droppableContainers:F,pointerCoordinates:le}):null,ce=go(ye,"id"),[oe,Se]=(0,g.useState)(null),Ne=G0(ge?ke:It(ke,se),(a=oe?.rect)!=null?a:null,W),Ae=(0,g.useRef)(null),Me=(0,g.useCallback)((ze,Re)=>{let{sensor:Ie,options:Te}=Re;if(D.current==null)return;const Ee=T.get(D.current);if(!Ee)return;const Z=ze.nativeEvent;Ae.current=new Ie({active:D.current,activeNode:Ee,event:Z,options:Te,context:K,onAbort(ve){if(!T.get(ve))return;const{onDragAbort:Ce}=P.current,be={id:ve};Ce?.(be),v({type:"onDragAbort",event:be})},onPending(ve,Ce,be,Fe){if(!T.get(ve))return;const{onDragPending:et}=P.current,He={id:ve,constraint:Ce,initialCoordinates:be,offset:Fe};et?.(He),v({type:"onDragPending",event:He})},onStart(ve){const Ce=D.current;if(Ce==null)return;const be=T.get(Ce);if(!be)return;const{onDragStart:Fe}=P.current,et={activatorEvent:Z,active:{id:Ce,data:be.data,rect:M}};(0,Ut.unstable_batchedUpdates)(()=>{Fe?.(et),S(jt.Initializing),x({type:Pe.DragStart,initialCoordinates:ve,active:Ce}),v({type:"onDragStart",event:et}),L(Ae.current),C(Z)})},onMove(ve){x({type:Pe.DragMove,coordinates:ve})},onEnd:xe(Pe.DragEnd),onCancel:xe(Pe.DragCancel)});function xe(ve){return async function(){const{active:be,collisions:Fe,over:et,scrollAdjustedTranslate:He}=K.current;let Oe=null;if(be&&He){const{cancelDrop:rt}=P.current;Oe={activatorEvent:Z,active:be,collisions:Fe,delta:He,over:et},ve===Pe.DragEnd&&typeof rt=="function"&&await Promise.resolve(rt(Oe))&&(ve=Pe.DragCancel)}D.current=null,(0,Ut.unstable_batchedUpdates)(()=>{x({type:ve}),S(jt.Uninitialized),Se(null),L(null),C(null),Ae.current=null;const rt=ve===Pe.DragEnd?"onDragEnd":"onDragCancel";if(Oe){const ht=P.current[rt];ht?.(Oe),v({type:rt,event:Oe})}})}}},[T]),De=_f(u,(0,g.useCallback)((ze,Re)=>(Ie,Te)=>{const Ee=Ie.nativeEvent,Z=T.get(Te);if(D.current!==null||!Z||Ee.dndKit||Ee.defaultPrevented)return;const xe={active:Z};ze(Ie,Re.options,xe)===!0&&(Ee.dndKit={capturedBy:Re.sensor},D.current=Te,Me(Ie,Re))},[T,Me]));Df(u),ut(()=>{W&&N===jt.Initializing&&S(jt.Initialized)},[W,N]),(0,g.useEffect)(()=>{const{onDragMove:ze}=P.current,{active:Re,activatorEvent:Ie,collisions:Te,over:Ee}=K.current;if(!Re||!Ie)return;const Z={active:Re,activatorEvent:Ie,collisions:Te,delta:{x:de.x,y:de.y},over:Ee};(0,Ut.unstable_batchedUpdates)(()=>{ze?.(Z),v({type:"onDragMove",event:Z})})},[de.x,de.y]),(0,g.useEffect)(()=>{const{active:ze,activatorEvent:Re,collisions:Ie,droppableContainers:Te,scrollAdjustedTranslate:Ee}=K.current;if(!ze||D.current==null||!Re||!Ee)return;const{onDragOver:Z}=P.current,xe=Te.get(ce),ve=xe&&xe.rect.current?{id:xe.id,rect:xe.rect.current,data:xe.data,disabled:xe.disabled}:null,Ce={active:ze,activatorEvent:Re,collisions:Ie,delta:{x:Ee.x,y:Ee.y},over:ve};(0,Ut.unstable_batchedUpdates)(()=>{Se(ve),Z?.(Ce),v({type:"onDragOver",event:Ce})})},[ce]),ut(()=>{K.current={activatorEvent:j,active:R,activeNode:O,collisionRect:me,collisions:ye,droppableRects:H,draggableNodes:T,draggingNode:ee,draggingNodeRect:te,droppableContainers:w,over:oe,scrollableAncestors:re,scrollAdjustedTranslate:de},M.current={initial:te,translated:me}},[R,O,ye,me,T,ee,te,H,w,oe,re,de]),wf({...X,delta:y,draggingRect:me,pointerCoordinates:le,scrollableAncestors:re,scrollableAncestorRects:je});const Ge=(0,g.useMemo)(()=>({active:R,activeNode:O,activeNodeRect:W,activatorEvent:j,collisions:ye,containerNodeRect:G,dragOverlay:ue,draggableNodes:T,droppableContainers:w,droppableRects:H,over:oe,measureDroppableContainers:U,scrollableAncestors:re,scrollableAncestorRects:je,measuringConfiguration:q,measuringScheduled:B,windowRect:he}),[R,O,W,j,ye,G,ue,T,w,H,oe,U,re,je,q,B,he]),ne=(0,g.useMemo)(()=>({activatorEvent:j,activators:De,active:R,activeNodeRect:W,ariaDescribedById:{draggable:I},dispatch:x,draggableNodes:T,over:oe,measureDroppableContainers:U}),[j,De,R,W,x,I,T,oe,U]);return g.createElement(mo.Provider,{value:_},g.createElement(Cn.Provider,{value:ne},g.createElement(So.Provider,{value:Ge},g.createElement(zo.Provider,{value:Ne},m)),g.createElement(Wf,{disabled:i?.restoreFocus===!1})),g.createElement(W0,{...i,hiddenTextDescribedById:I}));function _e(){const ze=z?.autoScrollEnabled===!1,Re=typeof d=="object"?d.enabled===!1:d===!1,Ie=E&&!ze&&!Re;return typeof d=="object"?{...d,enabled:Ie}:{enabled:Ie}}}),Xf=(0,g.createContext)(null),Gr="button",Zf="Draggable";function Gf(n){let{id:e,data:t,disabled:r=!1,attributes:s}=n;const a=nn(Zf),{activators:o,activatorEvent:i,active:d,activeNodeRect:m,ariaDescribedById:u,draggableNodes:c,over:f}=(0,g.useContext)(Cn),{role:h=Gr,roleDescription:p="draggable",tabIndex:b=0}=s??{},x=d?.id===e,v=(0,g.useContext)(x?zo:Xf),[_,N]=mn(),[S,E]=mn(),k=Tf(o,e),T=Kt(t);return ut(()=>(c.set(e,{id:e,key:a,node:_,activatorNode:S,data:T}),()=>{const y=c.get(e);y&&y.key===a&&c.delete(e)}),[c,e]),{active:d,activatorEvent:i,activeNodeRect:m,attributes:(0,g.useMemo)(()=>({role:h,tabIndex:b,"aria-disabled":r,"aria-pressed":x&&h===Gr?!0:void 0,"aria-roledescription":p,"aria-describedby":u.draggable}),[r,h,b,x,p,u.draggable]),isDragging:x,listeners:r?void 0:k,node:_,over:f,setNodeRef:N,setActivatorNodeRef:E,transform:v}}function Jf(){return(0,g.useContext)(So)}var $f="Droppable",em={timeout:25};function tm(n){let{data:e,disabled:t=!1,id:r,resizeObserverConfig:s}=n;const a=nn($f),{active:o,dispatch:i,over:d,measureDroppableContainers:m}=(0,g.useContext)(Cn),u=(0,g.useRef)({disabled:t}),c=(0,g.useRef)(!1),f=(0,g.useRef)(null),h=(0,g.useRef)(null),{disabled:p,updateMeasurementsFor:b,timeout:x}={...em,...s},v=Kt(b??r),_=kn({callback:(0,g.useCallback)(()=>{if(!c.current){c.current=!0;return}h.current!=null&&clearTimeout(h.current),h.current=setTimeout(()=>{m(Array.isArray(v.current)?v.current:[v.current]),h.current=null},x)},[x]),disabled:p||!o}),[N,S]=mn((0,g.useCallback)((k,T)=>{_&&(T&&(_.unobserve(T),c.current=!1),k&&_.observe(k))},[_])),E=Kt(e);return(0,g.useEffect)(()=>{!_||!N.current||(_.disconnect(),c.current=!1,_.observe(N.current))},[N,_]),(0,g.useEffect)(()=>(i({type:Pe.RegisterDroppable,element:{id:r,key:a,disabled:t,node:N,rect:f,data:E}}),()=>i({type:Pe.UnregisterDroppable,key:a,id:r})),[r]),(0,g.useEffect)(()=>{t!==u.current.disabled&&(i({type:Pe.SetDroppableDisabled,id:r,key:a,disabled:t}),u.current.disabled=t)},[r,a,t,i]),{active:o,rect:f,isOver:d?.id===r,node:N,over:d,setNodeRef:S}}function fr(n,e,t){const r=n.slice();return r.splice(t<0?r.length+t:t,0,r.splice(e,1)[0]),r}function nm(n,e){return n.reduce((t,r,s)=>{const a=e.get(r);return a&&(t[s]=a),t},Array(n.length))}function sn(n){return n!==null&&n>=0}function rm(n,e){if(n===e)return!0;if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function sm(n){return typeof n=="boolean"?{draggable:n,droppable:n}:n}var mr=n=>{let{rects:e,activeIndex:t,overIndex:r,index:s}=n;const a=fr(e,r,t),o=e[s],i=a[s];return!i||!o?null:{x:i.left-o.left,y:i.top-o.top,scaleX:i.width/o.width,scaleY:i.height/o.height}},Ao="Sortable",Eo=g.createContext({activeIndex:-1,containerId:Ao,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:mr,disabled:{draggable:!1,droppable:!1}});function am(n){let{children:e,id:t,items:r,strategy:s=mr,disabled:a=!1}=n;const{active:o,dragOverlay:i,droppableRects:d,over:m,measureDroppableContainers:u}=Jf(),c=nn(Ao,t),f=i.rect!==null,h=(0,g.useMemo)(()=>r.map(k=>typeof k=="object"&&"id"in k?k.id:k),[r]),p=o!=null,b=o?h.indexOf(o.id):-1,x=m?h.indexOf(m.id):-1,v=(0,g.useRef)(h),_=!rm(h,v.current),N=x!==-1&&b===-1||_,S=sm(a);ut(()=>{_&&p&&u(h)},[_,h,p,u]),(0,g.useEffect)(()=>{v.current=h},[h]);const E=(0,g.useMemo)(()=>({activeIndex:b,containerId:c,disabled:S,disableTransforms:N,items:h,overIndex:x,useDragOverlay:f,sortedRects:nm(h,d),strategy:s}),[b,c,S.draggable,S.droppable,N,h,x,d,f,s]);return g.createElement(Eo.Provider,{value:E},e)}var om=n=>{let{id:e,items:t,activeIndex:r,overIndex:s}=n;return fr(t,r,s).indexOf(e)},im=n=>{let{containerId:e,isSorting:t,wasDragging:r,index:s,items:a,newIndex:o,previousItems:i,previousContainerId:d,transition:m}=n;return!m||!r||i!==a&&s===o?!1:t?!0:o!==s&&e===d},lm={duration:200,easing:"ease"},Ro="transform",cm=Zt.Transition.toString({property:Ro,duration:0,easing:"linear"}),dm={roleDescription:"sortable"};function um(n){let{disabled:e,index:t,node:r,rect:s}=n;const[a,o]=(0,g.useState)(null),i=(0,g.useRef)(t);return ut(()=>{if(!e&&t!==i.current&&r.current){const d=s.current;if(d){const m=Bt(r.current,{ignoreTransform:!0}),u={x:d.left-m.left,y:d.top-m.top,scaleX:d.width/m.width,scaleY:d.height/m.height};(u.x||u.y)&&o(u)}}t!==i.current&&(i.current=t)},[e,t,r,s]),(0,g.useEffect)(()=>{a&&o(null)},[a]),a}function fm(n){let{animateLayoutChanges:e=im,attributes:t,disabled:r,data:s,getNewIndex:a=om,id:o,strategy:i,resizeObserverConfig:d,transition:m=lm}=n;const{items:u,containerId:c,activeIndex:f,disabled:h,disableTransforms:p,sortedRects:b,overIndex:x,useDragOverlay:v,strategy:_}=(0,g.useContext)(Eo),N=mm(r,h),S=u.indexOf(o),E=(0,g.useMemo)(()=>({sortable:{containerId:c,index:S,items:u},...s}),[c,s,S,u]),k=(0,g.useMemo)(()=>u.slice(u.indexOf(o)),[u,o]),{rect:T,node:y,isOver:w,setNodeRef:A}=tm({id:o,data:E,disabled:N.droppable,resizeObserverConfig:{updateMeasurementsFor:k,...d}}),{active:M,activatorEvent:R,activeNodeRect:D,attributes:z,setNodeRef:L,listeners:j,isDragging:C,over:P,setActivatorNodeRef:I,transform:F}=Gf({id:o,data:E,attributes:{...dm,...t},disabled:N.draggable}),q=R0(A,L),H=!!M,U=H&&!p&&sn(f)&&sn(x),B=!v&&C,O=B&&U?F:null,V=U?O??(i??_)({rects:b,activeNodeRect:D,activeIndex:f,overIndex:x,index:S}):null,X=sn(f)&&sn(x)?a({id:o,items:u,activeIndex:f,overIndex:x}):S,Y=M?.id,W=(0,g.useRef)({activeId:Y,items:u,newIndex:X,containerId:c}),G=u!==W.current.items,K=e({active:M,containerId:c,isDragging:C,isSorting:H,id:o,index:S,items:u,newIndex:W.current.newIndex,previousItems:W.current.items,previousContainerId:W.current.containerId,transition:m,wasDragging:W.current.activeId!=null}),J=um({disabled:!K,index:S,node:y,rect:T});return(0,g.useEffect)(()=>{H&&W.current.newIndex!==X&&(W.current.newIndex=X),c!==W.current.containerId&&(W.current.containerId=c),u!==W.current.items&&(W.current.items=u)},[H,X,c,u]),(0,g.useEffect)(()=>{if(Y===W.current.activeId)return;if(Y!=null&&W.current.activeId==null){W.current.activeId=Y;return}const ee=setTimeout(()=>{W.current.activeId=Y},50);return()=>clearTimeout(ee)},[Y]),{active:M,activeIndex:f,attributes:z,data:E,rect:T,index:S,newIndex:X,items:u,isOver:w,isSorting:H,isDragging:C,listeners:j,node:y,overIndex:x,over:P,setNodeRef:q,setActivatorNodeRef:I,setDroppableNodeRef:A,setDraggableNodeRef:L,transform:J??V,transition:ue()};function ue(){if(J||G&&W.current.newIndex===S)return cm;if(!(B&&!ir(R)||!m)&&(H||K))return Zt.Transition.toString({...m,property:Ro})}}function mm(n,e){var t,r;return typeof n=="boolean"?{draggable:n,droppable:!1}:{draggable:(t=n?.draggable)!=null?t:e.draggable,droppable:(r=n?.droppable)!=null?r:e.droppable}}function gn(n){if(!n)return!1;const e=n.data.current;return!!(e&&"sortable"in e&&typeof e.sortable=="object"&&"containerId"in e.sortable&&"items"in e.sortable&&"index"in e.sortable)}var hm=[we.Down,we.Right,we.Up,we.Left],pm=(n,e)=>{let{context:{active:t,collisionRect:r,droppableRects:s,droppableContainers:a,over:o,scrollableAncestors:i}}=e;if(hm.includes(n.code)){if(n.preventDefault(),!t||!r)return;const d=[];a.getEnabled().forEach(c=>{if(!c||c!=null&&c.disabled)return;const f=s.get(c.id);if(f)switch(n.code){case we.Down:r.top<f.top&&d.push(c);break;case we.Up:r.top>f.top&&d.push(c);break;case we.Left:r.left>f.left&&d.push(c);break;case we.Right:r.left<f.left&&d.push(c);break}});const m=K0({active:t,collisionRect:r,droppableRects:s,droppableContainers:d,pointerCoordinates:null});let u=go(m,"id");if(u===o?.id&&m.length>1&&(u=m[1].id),u!=null){const c=a.get(t.id),f=a.get(u),h=f?s.get(f.id):null,p=f?.node.current;if(p&&h&&c&&f){const b=jn(p).some((S,E)=>i[E]!==S),x=Mo(c,f),v=gm(c,f),_=b||!x?{x:0,y:0}:{x:v?r.width-h.width:0,y:v?r.height-h.height:0},N={x:h.left,y:h.top};return _.x&&_.y?N:Xt(N,_)}}}};function Mo(n,e){return!gn(n)||!gn(e)?!1:n.data.current.sortable.containerId===e.data.current.sortable.containerId}function gm(n,e){return!gn(n)||!gn(e)||!Mo(n,e)?!1:n.data.current.sortable.index<e.data.current.sortable.index}var vm=ie(),bm=n=>{const e=(0,vm.c)(33),{id:t,file:r,index:s,total:a,onRemove:o,onAddThumbnail:i,customThumbnail:d}=n;let m;e[0]!==t?(m={id:t},e[0]=t,e[1]=m):m=e[1];const{attributes:u,listeners:c,setNodeRef:f,transform:h,transition:p,isDragging:b}=fm(m);let x;e[2]!==h?(x=Zt.Transform.toString(h),e[2]=h,e[3]=x):x=e[3];const v=b?50:"auto",_=b?.5:1;let N;e[4]!==x||e[5]!==v||e[6]!==_||e[7]!==p?(N={transform:x,transition:p,zIndex:v,opacity:_},e[4]=x,e[5]=v,e[6]=_,e[7]=p,e[8]=N):N=e[8];const S=N,E=`group relative overflow-hidden rounded-2xl border border-zinc-100 bg-zinc-100 shadow-sm transition-shadow dark:border-zinc-800 dark:bg-zinc-800 ${a===3&&s===0?"row-span-2":""} ${b?"ring-2 ring-violet-500 shadow-xl":""}`;let k;e[9]!==d||e[10]!==r?(k=r.type.startsWith("image/")?(0,l.jsx)("img",{src:URL.createObjectURL(r),className:"size-full pointer-events-none object-cover",alt:""}):(0,l.jsx)("div",{className:"pointer-events-none flex size-full flex-col items-center justify-center gap-2 text-zinc-500",children:r.type.startsWith("video/")?(0,l.jsx)(l.Fragment,{children:d?(0,l.jsx)("img",{src:URL.createObjectURL(d),className:"size-full opacity-60 object-cover",alt:"Custom thumbnail"}):(0,l.jsx)("div",{className:"flex size-10 items-center justify-center rounded-full bg-black/20 backdrop-blur-sm",children:(0,l.jsx)(Qt,{size:20,className:"text-zinc-400"})})}):(0,l.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,l.jsx)(Si,{size:24}),(0,l.jsx)("span",{className:"max-w-[100px] truncate px-2 text-[10px] font-bold",children:r.name})]})}),e[9]=d,e[10]=r,e[11]=k):k=e[11];let T;e[12]!==u||e[13]!==c||e[14]!==k?(T=(0,l.jsx)("div",{...u,...c,className:"size-full cursor-grab active:cursor-grabbing",children:k}),e[12]=u,e[13]=c,e[14]=k,e[15]=T):T=e[15];let y;e[16]!==d||e[17]!==r.type||e[18]!==i?(y=r.type.startsWith("video/")&&(0,l.jsx)("button",{type:"button",onClick:i,className:"absolute inset-x-0 bottom-0 z-10 bg-black/60 py-2 text-[10px] font-bold text-white backdrop-blur-md transition-colors hover:bg-black/80",children:d?"Change Cover":"Add Cover"}),e[16]=d,e[17]=r.type,e[18]=i,e[19]=y):y=e[19];let w;e[20]!==t||e[21]!==o?(w=()=>o(t),e[20]=t,e[21]=o,e[22]=w):w=e[22];let A;e[23]===Symbol.for("react.memo_cache_sentinel")?(A=(0,l.jsx)(Mt,{size:14,strokeWidth:2.5}),e[23]=A):A=e[23];let M;e[24]!==w?(M=(0,l.jsx)("button",{type:"button",onClick:w,className:"absolute right-2 top-2 z-20 rounded-full bg-black/50 p-1.5 text-white backdrop-blur-md transition-colors hover:bg-rose-500",children:A}),e[24]=w,e[25]=M):M=e[25];let R;return e[26]!==f||e[27]!==S||e[28]!==M||e[29]!==E||e[30]!==T||e[31]!==y?(R=(0,l.jsxs)("div",{ref:f,style:S,className:E,children:[T,y,M]}),e[26]=f,e[27]=S,e[28]=M,e[29]=E,e[30]=T,e[31]=y,e[32]=R):R=e[32],R},xm=({isOpen:n,onClose:e,initialCommunity:t})=>{const{currentUser:r}=$e(),{addPost:s}=Rc(),{addToast:a}=St(),[o,i]=(0,g.useState)(""),[d,m]=(0,g.useState)([]),[u,c]=(0,g.useState)({}),[f,h]=(0,g.useState)(!1),[p,b]=(0,g.useState)({options:["",""],duration:"1 day"}),[x,v]=(0,g.useState)(!1),[_,N]=(0,g.useState)(null),S=V0(Or(ur,{activationConstraint:{distance:8}}),Or(cr,{coordinateGetter:pm}));(0,g.useEffect)(()=>{n&&N(t||null)},[n,t]);const{data:E=[]}=Ct({queryKey:["user-communities",r?.id],queryFn:()=>xl(r.id),enabled:!!r?.id}),k=(0,g.useRef)(null),T=(0,g.useRef)(null),[y,w]=(0,g.useState)(null),A=P=>{if(!P.target.files)return;const I=Array.from(P.target.files).map(F=>({id:Math.random().toString(36).substring(2,11),file:F}));m(F=>[...F,...I])},M=P=>{const I=P.target.files?.[0];I&&y!==null&&c(F=>({...F,[y]:I})),w(null)},R=P=>{m(F=>F.filter(q=>q.id!==P));const I={...u};delete I[P],c(I)},D=P=>{const{active:I,over:F}=P;F&&I.id!==F.id&&m(q=>fr(q,q.findIndex(H=>H.id===I.id),q.findIndex(H=>H.id===F.id)))},z=()=>{p.options.length<4&&b(P=>({...P,options:[...P.options,""]}))},L=P=>{b(I=>({...I,options:I.options.filter((F,q)=>q!==P)}))},j=(P,I)=>{const F=[...p.options];F[P]=I,b(q=>({...q,options:F}))},C=async P=>{if(P.preventDefault(),!(!o.trim()&&d.length===0||!r)){v(!0);try{const I=[];for(let q=0;q<d.length;q++){const H=d[q],U=u[H.id]||null,B=await Rt(H.file,"media",U);I.push(B)}let F=null;f&&p.options.some(q=>q.trim())&&(F={options:p.options.filter(q=>q.trim()).map((q,H)=>({id:H+1,text:q,votes:0})),ends_at:new Date(Date.now()+1440*60*1e3).toISOString()}),await s({content:o,media:I,poll:F,type:I.length>0?I[0].type==="video"?"video":"image":F?"poll":"text",userId:r.id,communityId:_?.id||null}),i(""),m([]),h(!1),b({options:["",""],duration:"1 day"}),N(null),e(),a("Post published!")}catch(I){console.error("Failed to create post:",I),a("Failed to publish post.","error")}finally{v(!1)}}};return(0,l.jsx)(Lt,{isOpen:n,onClose:()=>!x&&e(),title:"Create Post",className:"gap-0 overflow-hidden p-0 sm:max-w-[620px] max-h-[89dvh]",footer:(0,l.jsxs)("div",{className:"flex w-full items-center justify-between pt-2",children:[(0,l.jsxs)("div",{className:"flex gap-1",children:[(0,l.jsx)("button",{type:"button",onClick:()=>k.current?.click(),className:"rounded-full p-2 text-violet-600 transition-all hover:bg-violet-50 active:scale-95 dark:text-violet-400 dark:hover:bg-violet-900/20",title:"Attach media",children:(0,l.jsx)(Bi,{size:20})}),(0,l.jsx)("button",{type:"button",onClick:()=>h(!f),className:`rounded-full p-2 transition-all active:scale-95 ${f?"bg-violet-50 text-violet-600 dark:bg-violet-900/20 dark:text-violet-400":"text-violet-600 hover:bg-violet-50 dark:text-violet-400 dark:hover:bg-violet-900/20"}`,title:"Add poll",children:(0,l.jsx)(ei,{size:20})})]}),(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)("div",{className:"h-6 w-px bg-zinc-200 dark:bg-zinc-800"}),(0,l.jsx)(Qe,{onClick:C,disabled:!o.trim()&&d.length===0||x,className:"h-9 rounded-full bg-zinc-900 px-6 text-sm font-bold text-white shadow-md transition-all hover:opacity-90 disabled:opacity-50 active:scale-95 dark:bg-white dark:text-zinc-950",children:x?(0,l.jsx)(mt,{size:16,className:"animate-spin"}):"Post"})]}),(0,l.jsx)("input",{type:"file",ref:k,onChange:A,multiple:!0,className:"hidden",accept:"image/*,video/*,application/pdf"}),(0,l.jsx)("input",{type:"file",ref:T,onChange:M,className:"hidden",accept:"image/*"})]}),children:(0,l.jsxs)("div",{className:"flex flex-col gap-4 p-4 h-full overflow-y-auto",children:[(0,l.jsxs)("div",{className:"flex items-start gap-3 px-1",children:[(0,l.jsxs)(pt,{className:"size-10 shrink-0 border border-zinc-100 shadow-sm dark:border-zinc-800",children:[(0,l.jsx)(gt,{src:r?.avatar,className:"object-cover"}),(0,l.jsx)(vt,{children:r?.handle?.[0]?.toUpperCase()})]}),(0,l.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,l.jsxs)("div",{className:"mb-3 flex items-center gap-2",children:[(0,l.jsx)("span",{className:"truncate text-sm font-bold text-zinc-900 dark:text-zinc-100",children:r?.name}),(0,l.jsxs)(md,{children:[(0,l.jsx)(hd,{asChild:!0,children:(0,l.jsx)("button",{type:"button",onPointerDown:P=>P.stopPropagation(),onClick:P=>P.stopPropagation(),className:"group flex items-center gap-1.5 rounded-full border border-zinc-200 bg-white px-2.5 py-1 text-xs font-bold text-zinc-600 transition-all hover:bg-zinc-50 dark:border-zinc-700 dark:bg-zinc-900 dark:text-zinc-300 dark:hover:bg-zinc-800",children:_?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(pt,{className:"size-4 shrink-0 overflow-hidden rounded-full border border-zinc-100 dark:border-zinc-800",children:[(0,l.jsx)(gt,{src:_.avatar,className:"object-cover"}),(0,l.jsx)(vt,{className:"text-[6px]",children:_.name?.[0]?.toUpperCase()})]}),(0,l.jsx)("span",{className:"max-w-[100px] truncate",children:_.name})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(pr,{size:12,className:"text-zinc-400 transition-colors group-hover:text-violet-500"}),(0,l.jsx)("span",{children:"Everyone"})]})})}),(0,l.jsxs)(Na,{align:"start",onCloseAutoFocus:P=>P.preventDefault(),className:"w-60 rounded-xl border-zinc-100 p-1.5 shadow-xl dark:border-zinc-800",children:[(0,l.jsxs)(Pn,{onClick:()=>N(null),className:"cursor-pointer gap-3 rounded-lg px-3 py-2 focus:bg-zinc-50 dark:focus:bg-zinc-800",children:[(0,l.jsx)("div",{className:"flex size-8 shrink-0 items-center justify-center rounded-full bg-zinc-100 dark:bg-zinc-800",children:(0,l.jsx)(pr,{size:16,className:"text-zinc-500"})}),(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)("span",{className:"text-sm font-bold",children:"Everyone"}),(0,l.jsx)("span",{className:"text-[11px] text-zinc-500",children:"Public feed"})]})]}),E.length>0&&(0,l.jsx)("div",{className:"mx-2 my-1 h-px bg-zinc-100 dark:bg-zinc-800"}),(0,l.jsx)("div",{className:"max-h-[200px] overflow-y-auto",children:E.filter(P=>!P.isPrivate||P.myRole==="admin").map(P=>(0,l.jsxs)(Pn,{onClick:()=>N(P),className:"cursor-pointer gap-3 rounded-lg px-3 py-2 focus:bg-zinc-50 dark:focus:bg-zinc-800",children:[(0,l.jsxs)(pt,{className:"size-8 border border-zinc-100 dark:border-zinc-700",children:[(0,l.jsx)(gt,{src:P.avatar}),(0,l.jsx)(vt,{children:P.name[0]})]}),(0,l.jsxs)("div",{className:"min-w-0 flex flex-col",children:[(0,l.jsx)("span",{className:"truncate text-sm font-bold",children:P.name}),(0,l.jsx)("span",{className:"text-[11px] text-zinc-500",children:"Community"})]})]},P.id))})]})]})]}),(0,l.jsx)("textarea",{className:"min-h-[120px] max-h-[650px] w-full resize-none border-none bg-transparent text-lg font-medium leading-relaxed outline-none placeholder:text-zinc-400 dark:text-zinc-100 px-1",placeholder:"What's on your mind?",autoFocus:!0,value:o,onChange:P=>{i(P.target.value),P.target.style.height="auto",P.target.style.height=P.target.scrollHeight+"px"}})]})]}),(0,l.jsxs)("div",{className:"px-1 mt-2",children:[d.length>0&&(0,l.jsx)("div",{className:"mb-4 animate-in fade-in zoom-in-95 duration-200",children:(0,l.jsx)(Kf,{sensors:S,collisionDetection:Q0,onDragEnd:D,children:(0,l.jsx)(am,{items:d.map(P=>P.id),strategy:mr,children:(0,l.jsx)("div",{className:`grid gap-2 overflow-hidden rounded-2xl border border-zinc-100 shadow-sm dark:border-zinc-800 ${d.length===1?"grid-cols-1":"aspect-[16/9] grid-cols-2"}`,children:d.map((P,I)=>(0,l.jsx)(bm,{id:P.id,file:P.file,index:I,total:d.length,onRemove:R,customThumbnail:u[P.id],onAddThumbnail:()=>{w(P.id),T.current?.click()}},P.id))})})})}),f&&(0,l.jsxs)("div",{className:"mb-4 space-y-3 animate-in slide-in-from-top-2 duration-200 rounded-xl border border-violet-100 bg-violet-50/30 p-4 dark:border-violet-900/30 dark:bg-violet-900/10",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between px-1",children:[(0,l.jsx)("span",{className:"text-xs font-bold uppercase tracking-wider text-violet-600 dark:text-violet-400",children:"Poll Options"}),(0,l.jsx)("button",{type:"button",onClick:()=>h(!1),className:"text-zinc-400 transition-colors hover:text-rose-500",children:(0,l.jsx)(Mt,{size:16})})]}),(0,l.jsx)("div",{className:"space-y-2",children:p.options.map((P,I)=>(0,l.jsxs)("div",{className:"group flex gap-2",children:[(0,l.jsxs)("div",{className:"relative flex-1",children:[(0,l.jsx)("input",{className:"w-full rounded-lg border border-zinc-200 bg-white pl-4 pr-10 py-2.5 text-sm font-medium outline-none transition-all placeholder:font-normal focus:border-violet-500 focus:ring-2 focus:ring-violet-500/10 dark:border-zinc-700 dark:bg-zinc-900",placeholder:`Option ${I+1}`,value:P,autoFocus:I===p.options.length-1,onChange:F=>j(I,F.target.value)}),(0,l.jsxs)("span",{className:"pointer-events-none absolute right-3 top-1/2 -translate-y-1/2 text-[10px] font-bold text-zinc-300",children:[P.length,"/25"]})]}),p.options.length>2&&(0,l.jsx)("button",{type:"button",onClick:()=>L(I),className:"rounded-lg p-2.5 text-zinc-400 transition-colors hover:bg-rose-50 hover:text-rose-500 dark:hover:bg-rose-900/20",children:(0,l.jsx)(ti,{size:18})})]},I))}),p.options.length<4&&(0,l.jsx)("button",{type:"button",onClick:z,className:"w-full rounded-lg border border-dashed border-violet-200 py-2.5 text-sm font-bold text-violet-600 transition-all hover:bg-violet-100 dark:border-violet-800 dark:text-violet-400 dark:hover:bg-violet-900/30",children:"+ Add option"}),(0,l.jsxs)("div",{className:"flex items-center gap-2 px-1 pt-1",children:[(0,l.jsx)("span",{className:"text-[10px] font-medium text-zinc-500",children:"Poll ends in"}),(0,l.jsxs)("select",{className:"cursor-pointer bg-transparent text-[10px] font-bold text-zinc-700 outline-none hover:text-violet-600 dark:text-zinc-300",value:p.duration,onChange:P=>b({...p,duration:P.target.value}),children:[(0,l.jsx)("option",{value:"1 day",children:"1 day"}),(0,l.jsx)("option",{value:"3 days",children:"3 days"}),(0,l.jsx)("option",{value:"7 days",children:"7 days"})]})]})]})]})]})})},ym=xm,wm=({isOpen:n,onClose:e})=>{const{currentUser:t}=$e(),{addToast:r}=St(),s=Jt(),[a,o]=(0,g.useState)(null),[i,d]=(0,g.useState)(!1),[m,u]=(0,g.useState)(null),c=(0,g.useRef)(null),f=x=>{const v=x.target.files?.[0];v&&o(v)},h=()=>{if(!a)return;const x=new FileReader;x.onload=()=>{u(x.result)},x.readAsDataURL(a)},p=x=>{o(new File([x],`story-cropped-${Date.now()}.jpg`,{type:"image/jpeg"})),u(null)},b=async()=>{if(!(!a||!t)){d(!0);try{const x=await Rt(a);await gl(t.id,x.url,x.type),o(null),e(),r("Story shared!"),s.invalidateQueries({queryKey:["stories"]})}catch(x){console.error("Failed to create story:",x),r("Failed to share story.","error")}finally{d(!1)}}};return(0,l.jsxs)(Lt,{isOpen:n,onClose:()=>!i&&e(),title:"Add Story",children:[(0,l.jsxs)("div",{className:"space-y-6",children:[a?(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"relative mx-auto aspect-[9/16] w-full max-w-[280px] overflow-hidden rounded-3xl shadow-2xl",children:[(0,l.jsx)("img",{src:URL.createObjectURL(a),className:"h-full w-full object-cover",alt:"Preview"}),(0,l.jsx)("button",{onClick:()=>o(null),className:"absolute right-4 top-4 rounded-full bg-black/50 p-2 text-white transition-colors hover:bg-rose-500",title:"Remove",children:(0,l.jsx)(Mt,{size:20})})]}),(0,l.jsxs)("div",{className:"flex items-center justify-center gap-4 rounded-2xl bg-zinc-50/50 py-2 dark:bg-zinc-900/50",children:[(0,l.jsxs)("button",{onClick:h,className:"group flex flex-col items-center gap-1.5 rounded-xl p-3 text-zinc-600 transition-all hover:bg-white hover:text-violet-600 dark:text-zinc-400 dark:hover:bg-zinc-800 dark:hover:text-violet-400",children:[(0,l.jsx)("div",{className:"rounded-lg bg-white p-2 shadow-sm transition-all group-hover:shadow-md dark:bg-zinc-800",children:(0,l.jsx)(r0,{size:20})}),(0,l.jsx)("span",{className:"text-[10px] font-bold uppercase tracking-wider",children:"Crop / Edit"})]}),(0,l.jsxs)("button",{className:"flex cursor-not-allowed flex-col items-center gap-1.5 rounded-xl p-3 opacity-40 text-zinc-600 dark:text-zinc-400",children:[(0,l.jsx)("div",{className:"rounded-lg bg-white p-2 shadow-sm dark:bg-zinc-800",children:(0,l.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"h-5 w-5",children:(0,l.jsx)("path",{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 21 3 22l1-4.5L17 3z"})})}),(0,l.jsx)("span",{className:"text-[10px] font-bold uppercase tracking-wider",children:"Text"})]}),(0,l.jsxs)("button",{className:"flex cursor-not-allowed flex-col items-center gap-1.5 rounded-xl p-3 opacity-40 text-zinc-600 dark:text-zinc-400",children:[(0,l.jsx)("div",{className:"rounded-lg bg-white p-2 shadow-sm dark:bg-zinc-800",children:(0,l.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"h-5 w-5",children:[(0,l.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,l.jsx)("path",{d:"M8 14s1.5 2 4 2 4-2 4-2"}),(0,l.jsx)("line",{x1:"9",y1:"9",x2:"9.01",y2:"9"}),(0,l.jsx)("line",{x1:"15",y1:"9",x2:"15.01",y2:"9"})]})}),(0,l.jsx)("span",{className:"text-[10px] font-bold uppercase tracking-wider",children:"Stickers"})]})]})]}):(0,l.jsxs)("div",{className:"py-10",children:[(0,l.jsxs)("div",{className:"group relative w-full",onClick:()=>c.current?.click(),children:[(0,l.jsx)("div",{className:"relative z-40 mx-auto flex h-32 w-32 cursor-pointer items-center justify-center rounded-xl border-4 border-white bg-zinc-900 transition-all duration-500 group-hover:-translate-y-8 group-hover:translate-x-8 group-hover:shadow-2xl dark:border-zinc-900 dark:bg-white",children:(0,l.jsxs)("svg",{className:"h-8 w-8 text-white/60 dark:text-zinc-950/60",strokeLinejoin:"round",strokeLinecap:"round",strokeWidth:"2",stroke:"currentColor",fill:"none",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[(0,l.jsx)("path",{d:"M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2"}),(0,l.jsx)("path",{d:"M7 9l5 -5l5 5"}),(0,l.jsx)("path",{d:"M12 4l0 12"})]})}),(0,l.jsx)("div",{className:"absolute inset-0 z-30 mx-auto flex h-32 w-32 items-center justify-center rounded-xl border-2 border-dashed border-violet-500 bg-transparent opacity-0 transition-all duration-300 group-hover:opacity-80"})]}),(0,l.jsxs)("div",{className:"mt-8 text-center",children:[(0,l.jsx)("p",{className:"font-bold dark:text-white",children:"Choose a photo"}),(0,l.jsx)("p",{className:"text-sm text-zinc-500",children:"Stories last for 24 hours"})]})]}),(0,l.jsx)("input",{type:"file",ref:c,onChange:f,className:"hidden",accept:"image/*"}),(0,l.jsx)(Qe,{className:"w-full py-3 text-lg",disabled:!a||i,onClick:b,children:i?(0,l.jsx)(mt,{size:24,className:"mx-auto animate-spin"}):"Share story"})]}),m&&(0,l.jsx)(xu,{src:m,isOpen:!!m,onClose:()=>u(null),onCropComplete:p,aspect:9/16})]})},jm=wm;function rp({isOpen:n,onClose:e,community:t,onUpdate:r}){const{addToast:s}=St(),[a,o]=(0,g.useState)({name:"",handle:"",description:"",avatar:"",cover:"",isPrivate:!1}),[i,d]=(0,g.useState)(!1),m=(0,g.useRef)(null),u=(0,g.useRef)(null);(0,g.useEffect)(()=>{t&&n&&o({name:t.name||"",handle:t.handle||"",description:t.description||"",avatar:t.avatar||"",cover:t.cover||"",isPrivate:t.isPrivate||!1})},[t,n]);const c=(p,b)=>{const x=p.target.files?.[0];x&&f(x,b)},f=async(p,b)=>{d(!0);try{const x=await Rt(p);o(v=>({...v,[b]:x.url})),s(`${b.charAt(0).toUpperCase()+b.slice(1)} uploaded!`)}catch{s(`Failed to upload ${b}`,"error")}finally{d(!1)}},h=async p=>{if(p.preventDefault(),!(!a.name||!a.handle||!t)){d(!0);try{const b=await wl(t.id,{name:a.name,handle:a.handle.toLowerCase().replace(/[^a-z0-9_]/g,""),description:a.description,avatar_url:a.avatar,cover_url:a.cover,is_private:a.isPrivate});s("Community updated successfully!"),r&&r(b),e()}catch(b){console.error(b),s(b.message||"Failed to update community","error")}finally{d(!1)}}};return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(Lt,{isOpen:n,onClose:()=>!i&&e(),title:"Edit Community",className:"sm:max-w-xl",children:[(0,l.jsxs)("div",{className:"max-h-[85vh] space-y-6 overflow-y-auto px-1",children:[(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsxs)("div",{className:"group relative h-32 overflow-hidden rounded-xl bg-zinc-100 dark:bg-zinc-900 sm:h-40",children:[a.cover&&(0,l.jsx)("img",{src:a.cover,className:"h-full w-full object-cover",alt:""}),(0,l.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black/20 opacity-0 transition-opacity group-hover:opacity-100",children:(0,l.jsx)("button",{onClick:()=>u.current?.click(),className:"rounded-full bg-black/60 p-3 text-white transition-all hover:bg-black",children:(0,l.jsx)(gr,{size:20})})})]}),(0,l.jsx)("div",{className:"absolute -bottom-8 left-6",children:(0,l.jsxs)("div",{className:"group relative size-20 overflow-hidden rounded-2xl border-4 border-white bg-zinc-100 shadow-lg dark:border-black dark:bg-zinc-800 sm:size-24",children:[(0,l.jsx)("img",{src:a.avatar,className:"size-full object-cover",alt:""}),(0,l.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black/40 opacity-0 transition-opacity group-hover:opacity-100",children:(0,l.jsx)("button",{onClick:()=>m.current?.click(),className:"p-2 text-white",children:(0,l.jsx)(gr,{size:18})})})]})})]}),(0,l.jsx)("div",{className:"pt-6",children:(0,l.jsxs)("form",{onSubmit:h,className:"space-y-5",children:[(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"space-y-1.5",children:[(0,l.jsx)("label",{className:"ml-1 text-sm font-bold",children:"Community Name"}),(0,l.jsx)("input",{type:"text",required:!0,className:"w-full rounded-xl border border-zinc-200 bg-zinc-50 px-4 py-2.5 font-medium outline-none transition-all focus:border-violet-500 focus:ring-2 focus:ring-violet-500/20 dark:border-zinc-800 dark:bg-zinc-900",value:a.name,onChange:p=>o({...a,name:p.target.value})})]}),(0,l.jsxs)("div",{className:"space-y-1.5",children:[(0,l.jsx)("label",{className:"ml-1 text-sm font-bold",children:"Handle"}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-sm font-medium text-zinc-500",children:"c/"}),(0,l.jsx)("input",{type:"text",required:!0,className:"w-full rounded-xl border border-zinc-200 bg-zinc-50 pl-8 pr-4 py-2.5 text-sm font-medium outline-none transition-all focus:border-violet-500 focus:ring-2 focus:ring-violet-500/20 dark:border-zinc-800 dark:bg-zinc-900",value:a.handle,onChange:p=>o({...a,handle:p.target.value.toLowerCase().replace(/[^a-z0-9_]/g,"")})})]})]}),(0,l.jsxs)("div",{className:"space-y-1.5",children:[(0,l.jsx)("label",{className:"ml-1 text-sm font-bold",children:"Description"}),(0,l.jsx)("textarea",{className:"min-h-[100px] w-full resize-none rounded-xl border border-zinc-200 bg-zinc-50 px-4 py-2.5 font-medium outline-none transition-all focus:border-violet-500 focus:ring-2 focus:ring-violet-500/20 dark:border-zinc-800 dark:bg-zinc-900",placeholder:"What is this community about?",value:a.description,onChange:p=>o({...a,description:p.target.value})})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between rounded-xl border border-zinc-200 bg-zinc-50 p-4 dark:border-zinc-800 dark:bg-zinc-900",children:[(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)("span",{className:"text-sm font-bold",children:"Private Community"}),(0,l.jsx)("span",{className:"text-[10px] text-zinc-500",children:"Only Admins can post in private communities"})]}),(0,l.jsx)("input",{type:"checkbox",className:"size-5 cursor-pointer rounded-md accent-violet-600",checked:a.isPrivate,onChange:p=>o({...a,isPrivate:p.target.checked})})]})]}),(0,l.jsxs)("div",{className:"flex gap-3 py-2 pt-6",children:[(0,l.jsx)(Qe,{type:"button",variant:"outline",className:"h-11 flex-1 rounded-xl font-bold",onClick:e,disabled:i,children:"Cancel"}),(0,l.jsx)(Qe,{type:"submit",className:"h-11 flex-1 rounded-xl bg-zinc-900 font-bold text-white transition-all hover:bg-zinc-800 active:scale-95 dark:bg-white dark:text-black dark:hover:bg-zinc-200",disabled:i||!a.name,children:i?(0,l.jsx)(mt,{size:18,className:"animate-spin"}):"Save Changes"})]})]})})]}),(0,l.jsx)("input",{type:"file",ref:m,className:"hidden",accept:"image/*",onChange:p=>c(p,"avatar")}),(0,l.jsx)("input",{type:"file",ref:u,className:"hidden",accept:"image/*",onChange:p=>c(p,"cover")})]})})}var km=({isOpen:n,onClose:e,editProfileData:t,setEditProfileData:r})=>{const{updateProfile:s}=$e(),{addToast:a}=St(),[o,i]=(0,g.useState)(!1),[d,m]=(0,g.useState)(null),[u,c]=(0,g.useState)(null),f=(0,g.useRef)(null),h=(0,g.useRef)(null),p=(x,v)=>{const _=x.target.files?.[0];_&&(v==="avatar"?m(_):c(_))},b=async()=>{i(!0);try{let x=t.avatar,v=t.cover;d&&(x=(await Rt(d)).url),u&&(v=(await Rt(u)).url),await s({...t,avatar:x,cover:v}),m(null),c(null),e(),a("Profile updated!")}catch(x){console.error("Failed to update profile:",x),a("Failed to update profile.","error")}finally{i(!1)}};return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(Lt,{isOpen:n,onClose:()=>!o&&e(),title:"Edit Profile",children:(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsx)("input",{type:"file",ref:h,className:"hidden",accept:"image/*",onChange:x=>p(x,"cover")}),(0,l.jsx)("input",{type:"file",ref:f,className:"hidden",accept:"image/*",onChange:x=>p(x,"avatar")}),(0,l.jsxs)("div",{className:"group relative h-32 cursor-pointer overflow-hidden rounded-xl bg-zinc-100 dark:bg-zinc-800",onClick:()=>h.current?.click(),children:[(u||t?.cover)&&(0,l.jsx)("img",{src:u?URL.createObjectURL(u):t.cover,className:"h-full w-full object-cover opacity-60",alt:""}),(0,l.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,l.jsx)("div",{className:"rounded-full bg-black/50 p-2 text-white transition-transform group-hover:scale-110",children:(0,l.jsx)(Qt,{size:20})})})]}),(0,l.jsx)("div",{className:"relative -mt-16 ml-4",children:(0,l.jsxs)("div",{className:"group relative size-24 cursor-pointer overflow-hidden rounded-full border-4 border-white bg-white shadow-lg dark:border-black dark:bg-black",onClick:()=>f.current?.click(),children:[(d||t?.avatar)&&(0,l.jsxs)(pt,{className:"size-full rounded-none opacity-60",children:[(0,l.jsx)(gt,{src:d?URL.createObjectURL(d):t.avatar,className:"object-cover"}),(0,l.jsx)(vt,{children:t?.handle?.[0]?.toUpperCase()})]}),(0,l.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,l.jsx)("div",{className:"rounded-full bg-black/50 p-2 text-white transition-transform group-hover:scale-110",children:(0,l.jsx)(Qt,{size:16})})})]})}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsx)(kt,{label:"Name",value:t?.name||"",onChange:x=>r({...t,name:x.target.value})}),(0,l.jsx)(kt,{label:"Bio",textarea:!0,value:t?.bio||"",onChange:x=>r({...t,bio:x.target.value})}),(0,l.jsx)(kt,{label:"Location",value:t?.location||"",onChange:x=>r({...t,location:x.target.value})}),(0,l.jsx)(kt,{label:"Website",value:t?.website||"",onChange:x=>r({...t,website:x.target.value})})]}),(0,l.jsx)(Qe,{className:"w-full py-3",disabled:o,onClick:b,children:o?(0,l.jsx)(mt,{size:24,className:"mx-auto animate-spin text-white"}):"Save changes"})]})})})},Cm=km;function sp({isOpen:n,onClose:e,community:t}){const{addToast:r}=St(),{currentUser:s}=$e(),[a,o]=(0,g.useState)([]),[i,d]=(0,g.useState)(!1),[m,u]=(0,g.useState)(""),[c,f]=(0,g.useState)("members"),[h,p]=(0,g.useState)(!1),b=s?.id===t?.creatorId,x=(0,g.useCallback)(async(E="")=>{if(t?.id){d(!0),p(!0);try{o(await jl(t.id,E))}catch(k){console.error("Failed to load members:",k),r("Failed to load members","error")}finally{d(!1)}}},[t?.id,r]);(0,g.useEffect)(()=>{n&&t?.id?x(""):(u(""),o([]),p(!1))},[n,t?.id,x]),(0,g.useEffect)(()=>{if(m.length>=2){const E=setTimeout(()=>{x(m)},500);return()=>clearTimeout(E)}else m.length===0&&h&&x("")},[m,x,h]);const v=async(E,k)=>{try{const T=k==="admin"?"member":"admin";await kl(t.id,E,T),o(y=>y.map(w=>w.userId===E?{...w,role:T}:w)),r(`Role updated to ${T}`)}catch{r("Failed to update role","error")}},_=(0,g.useMemo)(()=>a.filter(E=>E.role==="admin"||E.userId===t.creatorId),[a,t.creatorId]),N=(0,g.useMemo)(()=>a.filter(E=>E.role!=="admin"&&E.userId!==t.creatorId),[a,t.creatorId]),S=E=>i?(0,l.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,l.jsx)(mt,{className:"animate-spin text-violet-500",size:32})}):E.length>0?(0,l.jsx)("div",{className:"divide-y divide-zinc-100 dark:divide-zinc-800/50",children:E.map(k=>(0,l.jsxs)("div",{className:"flex items-center justify-between p-4 transition-colors hover:bg-white dark:hover:bg-zinc-800/50",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsxs)(pt,{className:"size-10 border border-zinc-200 shadow-sm dark:border-zinc-700",children:[(0,l.jsx)(gt,{src:k.user.avatar_url}),(0,l.jsx)(vt,{children:k.user.username?.[0]?.toUpperCase()})]}),(0,l.jsxs)("div",{className:"min-w-0 flex flex-col",children:[(0,l.jsxs)("div",{className:"flex items-center gap-1",children:[(0,l.jsx)("span",{className:"font-bold dark:text-zinc-200",children:k.user.name}),k.user.is_verified&&(0,l.jsx)(no,{size:14,className:"text-blue-500"})]}),(0,l.jsxs)("span",{className:"text-xs font-medium text-zinc-500",children:["@",k.user.username]})]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[k.userId===t.creatorId?(0,l.jsx)("span",{className:"rounded-full bg-zinc-200 px-3 py-1 text-[10px] font-black tracking-wider text-zinc-600 dark:bg-zinc-800 dark:text-zinc-400",children:"OWNER"}):b&&(0,l.jsx)("button",{onClick:()=>v(k.userId,k.role),className:`flex items-center gap-1.5 rounded-full px-3 py-1.5 text-[11px] font-bold transition-all ${k.role==="admin"?"bg-rose-50 text-rose-600 hover:bg-rose-100 dark:bg-rose-950/20 dark:text-rose-400":"bg-zinc-100 text-zinc-600 hover:bg-zinc-200 dark:bg-zinc-800 dark:text-zinc-400 dark:hover:bg-zinc-700"}`,children:k.role==="admin"?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(hi,{size:14}),"Admin"]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(Tn,{size:14}),"Make Admin"]})}),!b&&k.role==="admin"&&k.userId!==t.creatorId&&(0,l.jsx)("span",{className:"rounded-full bg-violet-50 px-3 py-1 text-[10px] font-black tracking-wider text-violet-600 dark:bg-violet-900/20 dark:text-violet-400",children:"ADMIN"})]})]},k.userId))}):(0,l.jsxs)("div",{className:"flex flex-col items-center justify-center px-6 py-20 text-center",children:[(0,l.jsx)("div",{className:"mb-3 flex size-12 items-center justify-center rounded-full bg-zinc-100 dark:bg-zinc-800",children:(0,l.jsx)(Tn,{size:24,className:"text-zinc-400"})}),(0,l.jsxs)("p",{className:"text-sm font-bold dark:text-white",children:["No ",c," found"]}),(0,l.jsx)("p",{className:"mt-1 text-xs text-zinc-500",children:"Try a different search term"})]});return(0,l.jsx)(Lt,{isOpen:n,onClose:e,title:"Manage Members",className:"sm:max-w-md",children:(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)(ss,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-zinc-400",size:18}),(0,l.jsx)("input",{type:"text",placeholder:"Search members...",className:"w-full rounded-xl border border-zinc-200 bg-zinc-50 pl-10 pr-4 py-2.5 text-sm font-medium outline-none transition-all focus:border-violet-500 focus:ring-2 focus:ring-violet-500/20 dark:border-zinc-800 dark:bg-zinc-900",value:m,onChange:E=>u(E.target.value)})]}),(0,l.jsxs)(Zu,{value:c,onValueChange:f,className:"w-full",children:[(0,l.jsxs)(to,{className:"h-11 w-full rounded-xl bg-zinc-100 p-1 dark:bg-zinc-900",children:[(0,l.jsxs)(Ln,{value:"members",className:"flex-1 rounded-lg font-bold data-[state=active]:bg-white dark:text-zinc-400 dark:data-[state=active]:bg-zinc-800 dark:data-[state=active]:text-white",children:["Members (",N.length,")"]}),(0,l.jsxs)(Ln,{value:"admins",className:"flex-1 rounded-lg font-bold data-[state=active]:bg-white dark:text-zinc-400 dark:data-[state=active]:bg-zinc-800 dark:data-[state=active]:text-white",children:["Admins (",_.length,")"]})]}),(0,l.jsxs)("div",{className:"max-h-[400px] min-h-[300px] mt-4 overflow-y-auto overflow-hidden rounded-2xl border border-zinc-100 bg-zinc-50 dark:border-zinc-800 dark:bg-zinc-900",children:[(0,l.jsx)(Fn,{value:"members",className:"m-0",children:S(N)}),(0,l.jsx)(Fn,{value:"admins",className:"m-0",children:S(_)})]})]})]})})}var _m=ie(),Nm=n=>{const e=(0,_m.c)(22),{isPostModalOpen:t,setIsPostModalOpen:r,isEditProfileOpen:s,setIsEditProfileOpen:a,isStoryModalOpen:o,setIsStoryModalOpen:i,editProfileData:d,setEditProfileData:m,postCommunity:u}=n;let c;e[0]!==r?(c=()=>r(!1),e[0]=r,e[1]=c):c=e[1];let f;e[2]!==t||e[3]!==u||e[4]!==c?(f=(0,l.jsx)(ym,{isOpen:t,onClose:c,initialCommunity:u}),e[2]=t,e[3]=u,e[4]=c,e[5]=f):f=e[5];let h;e[6]!==a?(h=()=>a(!1),e[6]=a,e[7]=h):h=e[7];let p;e[8]!==d||e[9]!==s||e[10]!==m||e[11]!==h?(p=(0,l.jsx)(Cm,{isOpen:s,onClose:h,editProfileData:d,setEditProfileData:m}),e[8]=d,e[9]=s,e[10]=m,e[11]=h,e[12]=p):p=e[12];let b;e[13]!==i?(b=()=>i(!1),e[13]=i,e[14]=b):b=e[14];let x;e[15]!==o||e[16]!==b?(x=(0,l.jsx)(jm,{isOpen:o,onClose:b}),e[15]=o,e[16]=b,e[17]=x):x=e[17];let v;return e[18]!==f||e[19]!==p||e[20]!==x?(v=(0,l.jsxs)(l.Fragment,{children:[f,p,x]}),e[18]=f,e[19]=p,e[20]=x,e[21]=v):v=e[21],v},Sm=Nm,zm=ie(),Am=n=>{const e=(0,zm.c)(91),{story:t,onClose:r}=n,[s,a]=(0,g.useState)(0),[o,i]=(0,g.useState)(0),[d,m]=(0,g.useState)(!1),u=t.stories,c=u[s];let f;e[0]!==s||e[1]!==r||e[2]!==u.length||e[3]!==t.user.id?(f=()=>{s<u.length-1?(a(Rm),i(0)):r(t.user.id)},e[0]=s,e[1]=r,e[2]=u.length,e[3]=t.user.id,e[4]=f):f=e[4];const h=f;let p;e[5]!==s?(p=()=>{s>0&&(a(Mm),i(0))},e[5]=s,e[6]=p):p=e[6];const b=p;let x;e[7]===Symbol.for("react.memo_cache_sentinel")?(x=ee=>{ee.stopPropagation(),m(Dm)},e[7]=x):x=e[7];const v=x;let _;e[8]!==h||e[9]!==d?(_=()=>{if(d)return;const ee=setInterval(()=>{i(te=>te>=100?(h(),100):te+1)},50);return()=>clearInterval(ee)},e[8]=h,e[9]=d,e[10]=_):_=e[10];let N;e[11]!==s||e[12]!==h||e[13]!==d?(N=[h,s,d],e[11]=s,e[12]=h,e[13]=d,e[14]=N):N=e[14],(0,g.useEffect)(_,N);let S;if(e[15]!==s||e[16]!==o||e[17]!==u){let ee;e[19]!==s||e[20]!==o?(ee=(te,ge)=>(0,l.jsx)("div",{className:"h-full flex-1 overflow-hidden rounded-full bg-white/30",children:(0,l.jsx)("div",{className:"h-full bg-white transition-all duration-100",style:{width:ge<s?"100%":ge===s?`${o}%`:"0%"}})},ge),e[19]=s,e[20]=o,e[21]=ee):ee=e[21],S=u.map(ee),e[15]=s,e[16]=o,e[17]=u,e[18]=S}else S=e[18];let E;e[22]!==S?(E=(0,l.jsx)("div",{className:"flex h-0.5 w-full gap-1.5 bg-transparent",children:S}),e[22]=S,e[23]=E):E=e[23];const k=`/u/${t.user.handle}`;let T;e[24]!==t.user.avatar||e[25]!==t.user.handle?(T=(0,l.jsx)(gt,{src:t.user.avatar,alt:t.user.handle,className:"object-cover"}),e[24]=t.user.avatar,e[25]=t.user.handle,e[26]=T):T=e[26];let y;e[27]!==t.user.handle?.[0]?(y=t.user.handle?.[0]?.toUpperCase(),e[27]=t.user.handle?.[0],e[28]=y):y=e[28];let w;e[29]!==y?(w=(0,l.jsx)(vt,{children:y}),e[29]=y,e[30]=w):w=e[30];let A;e[31]!==w||e[32]!==T?(A=(0,l.jsxs)(pt,{className:"size-10 border border-white/20 shadow-sm",children:[T,w]}),e[31]=w,e[32]=T,e[33]=A):A=e[33];let M;e[34]!==t.user.handle?(M=(0,l.jsx)("span",{className:"text-sm font-bold text-white shadow-black drop-shadow-md",children:t.user.handle}),e[34]=t.user.handle,e[35]=M):M=e[35];let R;e[36]!==c.created_at?(R=new Date(c.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),e[36]=c.created_at,e[37]=R):R=e[37];let D;e[38]!==R?(D=(0,l.jsx)("span",{className:"text-[10px] text-white/60 shadow-black drop-shadow-md",children:R}),e[38]=R,e[39]=D):D=e[39];let z;e[40]!==M||e[41]!==D?(z=(0,l.jsxs)("div",{className:"flex flex-col",children:[M,D]}),e[40]=M,e[41]=D,e[42]=z):z=e[42];let L;e[43]!==A||e[44]!==z||e[45]!==k?(L=(0,l.jsxs)(es,{to:k,className:"flex items-center gap-3 transition-opacity hover:opacity-80",onClick:Tm,children:[A,z]}),e[43]=A,e[44]=z,e[45]=k,e[46]=L):L=e[46];let j;e[47]!==r||e[48]!==t.user.id?(j=()=>r(t.user.id),e[47]=r,e[48]=t.user.id,e[49]=j):j=e[49];let C;e[50]===Symbol.for("react.memo_cache_sentinel")?(C=(0,l.jsx)(Mt,{size:24}),e[50]=C):C=e[50];let P;e[51]!==j?(P=(0,l.jsx)("button",{onClick:j,className:"rounded-full p-2 text-white transition-colors hover:bg-white/10",children:C}),e[51]=j,e[52]=P):P=e[52];let I;e[53]!==L||e[54]!==P?(I=(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[L,P]}),e[53]=L,e[54]=P,e[55]=I):I=e[55];let F;e[56]!==I||e[57]!==E?(F=(0,l.jsxs)("div",{className:"absolute left-0 right-0 top-0 z-20 flex flex-col gap-4 p-4",children:[E,I]}),e[56]=I,e[57]=E,e[58]=F):F=e[58];let q;e[59]!==s||e[60]!==b?(q=s>0&&(0,l.jsx)("button",{onClick:ee=>{ee.stopPropagation(),b()},className:"absolute left-4 z-30 rounded-full bg-black/20 p-2 text-white backdrop-blur-md transition-all hover:bg-black/40 active:scale-90",children:(0,l.jsx)(us,{size:32})}),e[59]=s,e[60]=b,e[61]=q):q=e[61];let H;e[62]!==c.id||e[63]!==c.media?(H=(0,l.jsx)("img",{src:c.media,className:"h-full max-h-full w-full animate-in fade-in zoom-in-95 object-contain rounded-xl shadow-2xl duration-300",alt:""},c.id),e[62]=c.id,e[63]=c.media,e[64]=H):H=e[64];let U;e[65]!==d?(U=d&&(0,l.jsx)("div",{className:"pointer-events-none absolute inset-0 z-10 flex items-center justify-center",children:(0,l.jsx)("div",{className:"animate-in fade-in zoom-in rounded-full border border-white/10 bg-black/40 px-4 py-2 text-xs font-bold text-white backdrop-blur-md duration-200",children:"PAUSED"})}),e[65]=d,e[66]=U):U=e[66];let B;e[67]!==H||e[68]!==U?(B=(0,l.jsxs)("div",{className:"relative flex h-full w-full items-center justify-center",children:[H,U]}),e[67]=H,e[68]=U,e[69]=B):B=e[69];let O;e[70]!==h?(O=ee=>{ee.stopPropagation(),h()},e[70]=h,e[71]=O):O=e[71];let V;e[72]===Symbol.for("react.memo_cache_sentinel")?(V=(0,l.jsx)(xn,{size:32}),e[72]=V):V=e[72];let X;e[73]!==O?(X=(0,l.jsx)("button",{onClick:O,className:"absolute right-4 z-30 rounded-full bg-black/20 p-2 text-white backdrop-blur-md transition-all hover:bg-black/40 active:scale-90",children:V}),e[73]=O,e[74]=X):X=e[74];let Y;e[75]!==b?(Y=(0,l.jsx)("div",{className:"w-[30%] cursor-w-resize",onClick:b}),e[75]=b,e[76]=Y):Y=e[76];let W;e[77]===Symbol.for("react.memo_cache_sentinel")?(W=(0,l.jsx)("div",{className:"flex w-[40%] cursor-pointer items-center justify-center",onClick:v}),e[77]=W):W=e[77];let G;e[78]!==h?(G=(0,l.jsx)("div",{className:"w-[30%] cursor-e-resize",onClick:h}),e[78]=h,e[79]=G):G=e[79];let K;e[80]!==Y||e[81]!==G?(K=(0,l.jsxs)("div",{className:"absolute inset-0 z-20 flex",children:[Y,W,G]}),e[80]=Y,e[81]=G,e[82]=K):K=e[82];let J;e[83]!==q||e[84]!==B||e[85]!==X||e[86]!==K?(J=(0,l.jsxs)("div",{className:"relative flex h-full w-full max-w-xl items-center justify-center p-2",children:[q,B,X,K]}),e[83]=q,e[84]=B,e[85]=X,e[86]=K,e[87]=J):J=e[87];let ue;return e[88]!==F||e[89]!==J?(ue=(0,l.jsxs)("div",{className:"fixed inset-0 z-[100] flex animate-in fade-in flex-col items-center justify-center bg-black duration-300",children:[F,J]}),e[88]=F,e[89]=J,e[90]=ue):ue=e[90],ue},Em=Am;function Rm(n){return n+1}function Mm(n){return n-1}function Dm(n){return!n}function Tm(n){return n.stopPropagation()}var Im=({type:n,onComplete:e,onSwitch:t})=>{const{login:r,signup:s}=$e(),{addToast:a}=St(),[o,i]=(0,g.useState)({name:"",email:"",username:"",password:""}),[d,m]=(0,g.useState)(!1),[u,c]=(0,g.useState)(null),f=async h=>{h.preventDefault(),m(!0),c(null);try{n==="login"?(await r({email:o.email,password:o.password}),a("Welcome back!"),e()):(await s({email:o.email,password:o.password,username:o.username,name:o.name}),a("Confirm Your Email","info"),t())}catch(p){console.error("Auth error:",p),c(p.message||"Authentication failed. Please check your credentials."),a("Authentication failed!","error")}finally{m(!1)}};return(0,l.jsxs)("div",{className:"mx-auto w-full max-w-md animate-in fade-in slide-in-from-bottom-5 duration-300 p-8",children:[(0,l.jsxs)("div",{className:"mb-8 text-center",children:[(0,l.jsx)("div",{className:"mb-4 flex justify-center",children:(0,l.jsx)("div",{className:"rounded-2xl bg-black p-3 shadow-lg text-white dark:bg-white dark:text-black",children:(0,l.jsx)("img",{src:"/logo.webp",alt:"Logo",className:"size-16 rounded-2xl border-2 border-zinc-100 shadow-xl dark:border-zinc-800"})})}),(0,l.jsx)("h2",{className:"mb-2 text-3xl font-extrabold tracking-tight dark:text-white",children:n==="login"?"Welcome back!":"Join Sysm today"}),(0,l.jsx)("p",{className:"font-medium text-zinc-500",children:"The decentralized social network"})]}),u&&(0,l.jsxs)("div",{className:"mb-6 flex items-center gap-3 rounded-xl border border-rose-100 bg-rose-50 p-4 text-sm text-rose-600 dark:border-rose-800 dark:bg-rose-900/20 dark:text-rose-400",children:[(0,l.jsx)(Js,{size:18}),(0,l.jsx)("span",{children:u})]}),(0,l.jsxs)("form",{onSubmit:f,className:"space-y-4",children:[(0,l.jsx)(kt,{label:"Email",type:"email",placeholder:"john@example.com",value:o.email,onChange:h=>i({...o,email:h.target.value}),required:!0}),n==="signup"&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(kt,{label:"Name",placeholder:"John Doe",value:o.name,onChange:h=>i({...o,name:h.target.value}),required:!0}),(0,l.jsx)(kt,{label:"Username",placeholder:"johndoe",value:o.username,onChange:h=>{const p=h.target.value.replace(/[^a-zA-Z0-9_]/g,"");i({...o,username:p})},required:!0})]}),(0,l.jsx)(kt,{label:"Password",type:"password",placeholder:"",value:o.password,onChange:h=>i({...o,password:h.target.value}),required:!0}),(0,l.jsx)(Qe,{type:"submit",className:"mt-6 w-full justify-center py-3 text-lg",disabled:d,children:d?(0,l.jsx)(mt,{size:24,className:"animate-spin"}):n==="login"?"Log in":"Sign up"})]}),(0,l.jsxs)("div",{className:"mt-8 text-center text-sm",children:[(0,l.jsx)("span",{className:"text-zinc-500",children:n==="login"?"Don't have an account?":"Already have an account?"}),(0,l.jsx)("button",{onClick:t,className:"ml-1 font-bold hover:underline dark:text-white",children:n==="login"?"Sign up":"Log in"})]})]})},Pm=Im,Do=ie(),Lm=(0,g.lazy)(()=>ft(()=>import("./Home-DJaOctqf.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10]))),Fm=(0,g.lazy)(()=>ft(()=>import("./Explore-RjzlyPUU.js"),__vite__mapDeps([11,1,2,3,4,5,6,7,8,9,10]))),Om=(0,g.lazy)(()=>ft(()=>import("./Reels-CbhhUy8I.js"),__vite__mapDeps([12,1,2,3,4,5,6,7,8,9,10]))),Jr=(0,g.lazy)(()=>ft(()=>import("./Messages-Q3ZEUuLp.js"),__vite__mapDeps([13,1,2,3,4,5,6,7,10,9]))),Bm=(0,g.lazy)(()=>ft(()=>import("./Notifications-Dn1H98zK.js"),__vite__mapDeps([14,1,2,3,4,5,6,10,9]))),Hm=(0,g.lazy)(()=>ft(()=>import("./Profile-BUyeZm2N.js"),__vite__mapDeps([15,1,2,3,4,5,6,7,8,9,10]))),Um=(0,g.lazy)(()=>ft(()=>import("./Community-CV56xbD0.js"),__vite__mapDeps([16,1,2,3,4,5,6,7,8,9,10]))),qm=(0,g.lazy)(()=>ft(()=>import("./PostDetails-DT-UtGS3.js"),__vite__mapDeps([17,1,2,3,4,5,6,7,8,9,10]))),Wm=(0,g.lazy)(()=>ft(()=>import("./Settings-N7b-P8pJ.js"),__vite__mapDeps([18,1,2,3,4,5,6,10,9]))),Vm=(0,g.lazy)(()=>ft(()=>import("./HashtagFeed-CjqgopUe.js"),__vite__mapDeps([19,1,2,3,4,5,6,7,8,9,10]))),Ym=()=>{const n=(0,Do.c)(1);let e;return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)("div",{className:"flex h-screen w-full items-center justify-center",children:(0,l.jsx)(mt,{size:40,className:"animate-spin text-violet-500"})}),n[0]=e):e=n[0],e};function Qm(){const n=(0,Do.c)(55),e=vn(),{currentUser:t,authMode:r,setAuthMode:s}=$e(),{darkMode:a}=Kn(),{isOpen:o,images:i,currentIndex:d,closeLightbox:m,setIndex:u}=Hc(),[c,f]=(0,g.useState)(!1),[h,p]=(0,g.useState)(!1),[b,x]=(0,g.useState)(!1);let v;n[0]===Symbol.for("react.memo_cache_sentinel")?(v={},n[0]=v):v=n[0];const[_,N]=(0,g.useState)(v),[S,E]=(0,g.useState)(null),[k,T]=(0,g.useState)(null);if(r){const K=a?"dark":"";let J;n[1]!==s?(J=()=>s(null),n[1]=s,n[2]=J):J=n[2];let ue;n[3]!==r||n[4]!==s?(ue=()=>s(r==="login"?"signup":"login"),n[3]=r,n[4]=s,n[5]=ue):ue=n[5];let ee;n[6]!==r||n[7]!==J||n[8]!==ue?(ee=(0,l.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-white p-4 dark:bg-black",children:(0,l.jsx)(tt,{children:(0,l.jsx)(Pm,{type:r,onComplete:J,onSwitch:ue})})}),n[6]=r,n[7]=J,n[8]=ue,n[9]=ee):ee=n[9];let te;return n[10]!==K||n[11]!==ee?(te=(0,l.jsx)("div",{className:K,children:ee}),n[10]=K,n[11]=ee,n[12]=te):te=n[12],te}let y;n[13]===Symbol.for("react.memo_cache_sentinel")?(y=(0,l.jsx)(Qi,{}),n[13]=y):y=n[13];let w;n[14]===Symbol.for("react.memo_cache_sentinel")?(w=(0,l.jsx)(Ym,{}),n[14]=w):w=n[14];let A;n[15]===Symbol.for("react.memo_cache_sentinel")?(A=(0,l.jsx)(v0,{onPostClick:()=>f(!0)}),n[15]=A):A=n[15];let M;n[16]===Symbol.for("react.memo_cache_sentinel")?(M=(0,l.jsx)(We,{path:"/",element:(0,l.jsx)(tt,{children:(0,l.jsx)(Lm,{onStoryClick:T,onAddStory:()=>x(!0)})})}),n[16]=M):M=n[16];let R;n[17]===Symbol.for("react.memo_cache_sentinel")?(R=(0,l.jsx)(We,{path:"/home",element:(0,l.jsx)(hr,{to:"/",replace:!0})}),n[17]=R):R=n[17];let D;n[18]===Symbol.for("react.memo_cache_sentinel")?(D=(0,l.jsx)(We,{path:"/community",element:(0,l.jsx)(tt,{children:(0,l.jsx)(Fm,{})})}),n[18]=D):D=n[18];let z;n[19]===Symbol.for("react.memo_cache_sentinel")?(z=(0,l.jsx)(We,{path:"/reels",element:(0,l.jsx)(tt,{children:(0,l.jsx)(Om,{})})}),n[19]=z):z=n[19];let L;n[20]===Symbol.for("react.memo_cache_sentinel")?(L=(0,l.jsx)(We,{path:"/messages",element:(0,l.jsx)(tt,{children:(0,l.jsx)(Jr,{})})}),n[20]=L):L=n[20];let j;n[21]===Symbol.for("react.memo_cache_sentinel")?(j=(0,l.jsx)(We,{path:"/settings",element:(0,l.jsx)(tt,{children:(0,l.jsx)(Wm,{})})}),n[21]=j):j=n[21];let C;n[22]===Symbol.for("react.memo_cache_sentinel")?(C=(0,l.jsx)(We,{path:"/messages/:id",element:(0,l.jsx)(tt,{children:(0,l.jsx)(Jr,{})})}),n[22]=C):C=n[22];let P;n[23]===Symbol.for("react.memo_cache_sentinel")?(P=(0,l.jsx)(We,{path:"/notifications",element:(0,l.jsx)(tt,{children:(0,l.jsx)(Bm,{})})}),n[23]=P):P=n[23];let I;n[24]===Symbol.for("react.memo_cache_sentinel")?(I=(0,l.jsx)(We,{path:"/post/:id",element:(0,l.jsx)(tt,{children:(0,l.jsx)(qm,{})})}),n[24]=I):I=n[24];let F;n[25]===Symbol.for("react.memo_cache_sentinel")?(F=(0,l.jsx)(We,{path:"/c/:handle",element:(0,l.jsx)(tt,{children:(0,l.jsx)(Um,{onPostInCommunity:K=>{E(K),f(!0)}})})}),n[25]=F):F=n[25];let q;n[26]===Symbol.for("react.memo_cache_sentinel")?(q=(0,l.jsx)(We,{path:"/tags/:tag",element:(0,l.jsx)(tt,{children:(0,l.jsx)(Vm,{})})}),n[26]=q):q=n[26];let H;n[27]===Symbol.for("react.memo_cache_sentinel")?(H=(0,l.jsx)(We,{path:"/u/:handle",element:(0,l.jsx)(tt,{children:(0,l.jsx)(Hm,{onEditProfile:K=>{N(K),p(!0)}})})}),n[27]=H):H=n[27];let U;n[28]===Symbol.for("react.memo_cache_sentinel")?(U=(0,l.jsxs)(We,{element:A,children:[M,R,D,z,L,j,C,P,I,F,q,H,(0,l.jsx)(We,{path:"*",element:(0,l.jsx)(hr,{to:"/community"})})]}),n[28]=U):U=n[28];let B;n[29]!==e?(B=(0,l.jsx)(g.Suspense,{fallback:w,children:(0,l.jsx)(Po,{location:e,children:U},e.pathname)}),n[29]=e,n[30]=B):B=n[30];let O;n[31]===Symbol.for("react.memo_cache_sentinel")?(O=K=>{f(K),K||E(null)},n[31]=O):O=n[31];let V;n[32]!==_||n[33]!==h||n[34]!==c||n[35]!==b||n[36]!==S?(V=(0,l.jsx)(Sm,{isPostModalOpen:c,setIsPostModalOpen:O,isEditProfileOpen:h,setIsEditProfileOpen:p,isStoryModalOpen:b,setIsStoryModalOpen:x,editProfileData:_,setEditProfileData:N,postCommunity:S}),n[32]=_,n[33]=h,n[34]=c,n[35]=b,n[36]=S,n[37]=V):V=n[37];let X;n[38]!==k?(X=k&&(0,l.jsx)(Em,{story:k,onClose:K=>{if(K){const J=JSON.parse(localStorage.getItem("seenStories")||"[]");J.includes(K)||localStorage.setItem("seenStories",JSON.stringify([...J,K]))}T(null)}}),n[38]=k,n[39]=X):X=n[39];let Y;n[40]!==m||n[41]!==d||n[42]!==i||n[43]!==o||n[44]!==u?(Y=o&&(0,l.jsx)(ju,{images:i.map(Km),currentIndex:d,onClose:m,onNavigate:u}),n[40]=m,n[41]=d,n[42]=i,n[43]=o,n[44]=u,n[45]=Y):Y=n[45];let W;n[46]!==t||n[47]!==e.pathname?(W=t&&e.pathname==="/"&&(0,l.jsx)("button",{onClick:()=>f(!0),className:"group fixed bottom-20 right-5 z-50 flex size-12 cursor-pointer items-center justify-center rounded-full bg-zinc-950 text-white shadow-2xl transition-all hover:scale-110 active:scale-90 dark:bg-white dark:text-zinc-950 md:hidden",title:"Create Post",children:(0,l.jsx)(Qt,{size:28,className:"duration-300 transition-transform group-hover:rotate-90"})}),n[46]=t,n[47]=e.pathname,n[48]=W):W=n[48];let G;return n[49]!==B||n[50]!==V||n[51]!==X||n[52]!==Y||n[53]!==W?(G=(0,l.jsxs)(Kc,{children:[y,B,V,X,Y,W]}),n[49]=B,n[50]=V,n[51]=X,n[52]=Y,n[53]=W,n[54]=G):G=n[54],G}function Km(n){return typeof n=="string"?n:n.url}var Xm=new Wo({defaultOptions:{queries:{staleTime:1e3*60*5,gcTime:1e3*60*30,retry:1,refetchOnWindowFocus:!1}}}),$r=document.getElementById("root");$r&&(0,qi.createRoot)($r).render((0,l.jsx)(g.StrictMode,{children:(0,l.jsx)(Yc,{children:(0,l.jsx)(qo,{client:Xm,children:(0,l.jsx)(Fo,{children:(0,l.jsx)(Hl,{children:(0,l.jsx)(Pl,{children:(0,l.jsx)(Fl,{children:(0,l.jsx)(Ec,{children:(0,l.jsx)(Sc,{children:(0,l.jsx)(Bc,{children:(0,l.jsx)(Qm,{})})})})})})})})})})}));export{vt as $,Lu as A,bh as At,Bh as B,wh as Bt,Qu as C,vl as Ct,Bu as D,cl as Dt,qu as E,zh as Et,Du as F,ph as Ft,yd as G,el as Gt,Na as H,mh as Ht,qh as I,gh as It,ad as J,$s as Jt,hd as K,$ as Kt,Hh as L,_h as Lt,Wh as M,jh as Mt,Iu as N,vh as Nt,Yh as O,Nh as Ot,Uh as P,Ch as Pt,pt as Q,Lt as R,kh as Rt,Qh as S,Mh as St,Hu as T,Sh as Tt,Oh as U,hh as Ut,md as V,tl as Vt,Pn as W,fh as Wt,dd as X,_n as Xt,od as Y,dh as Yt,Fh as Z,Q as Zt,Kh as _,Rt as _t,so as a,ed as at,to as b,Eh as bt,Pr as c,$c as ct,Gh as d,Hc as dt,gt as et,Zh as f,Rc as ft,e0 as g,$e as gt,Xh as h,Ol as ht,co as i,Zc as it,Ja as j,yh as jt,Ir as k,ml as kt,Lr as l,Ih as lt,no as m,Kn as mt,rp as n,td as nt,ep as o,Jc as ot,$h as p,St as pt,Lh as q,uh as qt,np as r,nd as rt,r0 as s,Gc as st,sp as t,Ph as tt,Jh as u,Qe as ut,Zu as v,Dh as vt,Vh as w,Ah as wt,Ln as x,Rh as xt,Fn as y,bl as yt,kt as z,xh as zt};

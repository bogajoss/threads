import{a as me}from"./rolldown-runtime-BaZ8gS7u.js";import{c as be,l as ue,w as pe}from"./framework-3lkjbTvb.js";import"./database-COznt_u0.js";import{Nt as oe,mr as je}from"./ui-libs-BrvosAtl.js";import"./media-libs-C98UjHPF.js";import{F as ge,I as ve,P as ze,V as ke,Wt as ce,an as Ne,gt as ye,i as _e,in as Ce,p as we,r as Me,rn as Se,tt as Pe}from"./index-Cg52Q0DN.js";import{r as Fe}from"./post-BLGzAPZD.js";import"./text-processing-BMF44JzJ.js";import"./VideoPlayer-Dd8o4VaR.js";import"./actionsheet-DwRqLrpw.js";import{t as Ie}from"./skeleton-profile-B4NXNlIk.js";var Ee=be(),de=me(pe(),1),t=me(ue(),1),Oe=D=>{const e=(0,Ee.c)(104),{onPostInCommunity:G}=D,[H,ae]=(0,de.useState)(!1),[K,ne]=(0,de.useState)(!1),{community:s,loading:xe,isMember:a,userRole:fe,isJoining:Q,communityPosts:J,loadingPosts:X,isFetchingMorePosts:Y,hasMorePosts:Z,handleJoinToggle:ee,loadCommunityPosts:te,refetchCommunity:se,currentUser:l,navigate:r}=we(),q=fe==="admin",ie=a&&(!s?.isPrivate||q);if(xe){let i;return e[0]===Symbol.for("react.memo_cache_sentinel")?(i=(0,t.jsx)("div",{className:"flex min-h-screen flex-col",children:(0,t.jsx)(Ie,{})}),e[0]=i):i=e[0],i}if(!s){let i;return e[1]===Symbol.for("react.memo_cache_sentinel")?(i=(0,t.jsx)("div",{className:"flex min-h-[600px] items-center justify-center overflow-hidden rounded-none bg-background md:rounded-xl",children:(0,t.jsx)(ye,{title:"Community doesn't exist",message:"Try searching for another. The community could not be found.",icon:oe})}),e[1]=i):i=e[1],i}let n;e[2]!==r?(n=()=>r(-1),e[2]=r,e[3]=n):n=e[3];let T;e[4]===Symbol.for("react.memo_cache_sentinel")?(T=(0,t.jsx)(je,{size:22}),e[4]=T):T=e[4];let o;e[5]!==n?(o=(0,t.jsx)("button",{onClick:n,className:"rounded-full p-1 transition-colors hover:bg-zinc-100 dark:text-white dark:hover:bg-zinc-800",children:T}),e[5]=n,e[6]=o):o=e[6];let c;e[7]!==s.name?(c=(0,t.jsx)("h5",{className:"text-lg font-bold leading-none dark:text-white",children:s.name}),e[7]=s.name,e[8]=c):c=e[8];let d;e[9]!==s.membersCount?(d=(0,t.jsxs)("span",{className:"mt-0.5 text-xs text-zinc-500",children:[s.membersCount," Members"]}),e[9]=s.membersCount,e[10]=d):d=e[10];let m;e[11]!==c||e[12]!==d?(m=(0,t.jsxs)("div",{className:"flex flex-col",children:[c,d]}),e[11]=c,e[12]=d,e[13]=m):m=e[13];let x;e[14]!==o||e[15]!==m?(x=(0,t.jsx)("div",{className:"sticky top-0 z-20 border-b border-zinc-100 bg-white/90 px-4 py-3 backdrop-blur-md dark:border-zinc-800 dark:bg-black/90",children:(0,t.jsxs)("div",{className:"flex items-center gap-x-4",children:[o,m]})}),e[14]=o,e[15]=m,e[16]=x):x=e[16];let f;e[17]!==s.cover?(f=(0,t.jsx)("div",{className:"relative h-32 overflow-hidden bg-zinc-100 dark:bg-zinc-900 sm:h-52",children:s.cover?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("img",{src:s.cover,className:"h-full w-full object-cover",alt:""}),(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/40 to-transparent"})]}):(0,t.jsx)("div",{className:"h-full w-full bg-gradient-to-br from-violet-500/20 to-fuchsia-500/20"})}),e[17]=s.cover,e[18]=f):f=e[18];let h;e[19]!==s.avatar?(h=(0,t.jsx)("div",{className:"size-24 overflow-hidden rounded-3xl border-4 border-white bg-zinc-100 shadow-xl dark:border-black dark:bg-zinc-800 sm:size-32",children:(0,t.jsx)("img",{src:s.avatar,className:"size-full object-cover",alt:""})}),e[19]=s.avatar,e[20]=h):h=e[20];let b;e[21]!==q?(b=q&&(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{onClick:()=>ae(!0),className:"flex size-10 items-center justify-center rounded-full border border-zinc-200 text-zinc-700 transition-all hover:bg-zinc-50 active:scale-95 dark:border-zinc-800 dark:text-zinc-300 dark:hover:bg-zinc-900",title:"Edit Community",children:(0,t.jsx)(ze,{size:20})}),(0,t.jsx)("button",{onClick:()=>ne(!0),className:"flex size-10 items-center justify-center rounded-full border border-zinc-200 text-zinc-700 transition-all hover:bg-zinc-50 active:scale-95 dark:border-zinc-800 dark:text-zinc-300 dark:hover:bg-zinc-900",title:"Settings",children:(0,t.jsx)(ke,{size:20})})]}),e[21]=q,e[22]=b):b=e[22];const le=a?"outline":"primary",re=`flex h-10 items-center justify-center gap-2 rounded-full px-4 font-bold transition-all ${a?"border-zinc-200 hover:border-rose-100 hover:bg-rose-50 hover:text-rose-500 dark:border-zinc-800 dark:hover:bg-rose-900/20":"bg-zinc-950 text-white hover:scale-105 dark:bg-white dark:text-zinc-950"}`;let u;e[23]!==a?(u=a?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ve,{size:18}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"Joined"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ge,{size:18}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"Join"})]}),e[23]=a,e[24]=u):u=e[24];let p;e[25]!==ee||e[26]!==Q||e[27]!==le||e[28]!==re||e[29]!==u?(p=(0,t.jsx)(ce,{variant:le,onClick:ee,loading:Q,className:re,children:u}),e[25]=ee,e[26]=Q,e[27]=le,e[28]=re,e[29]=u,e[30]=p):p=e[30];let j;e[31]!==b||e[32]!==p?(j=(0,t.jsxs)("div",{className:"flex gap-2 pb-1",children:[b,p]}),e[31]=b,e[32]=p,e[33]=j):j=e[33];let g;e[34]!==j||e[35]!==h?(g=(0,t.jsxs)("div",{className:"relative z-10 -mt-12 mb-4 flex items-end justify-between sm:-mt-16",children:[h,j]}),e[34]=j,e[35]=h,e[36]=g):g=e[36];let v;e[37]!==s.name?(v=(0,t.jsx)("h1",{className:"text-2xl font-black leading-tight tracking-tight dark:text-white sm:text-3xl",children:s.name}),e[37]=s.name,e[38]=v):v=e[38];let z;e[39]!==s.handle?(z=(0,t.jsxs)("p",{className:"text-sm font-bold text-zinc-500 sm:text-base",children:["c/",s.handle]}),e[39]=s.handle,e[40]=z):z=e[40];let k;e[41]!==s.description?(k=s.description&&(0,t.jsx)("p",{className:"mt-4 max-w-2xl text-[15px] leading-relaxed dark:text-zinc-300 sm:text-base",children:s.description}),e[41]=s.description,e[42]=k):k=e[42];let N;e[43]!==s.membersCount?(N=(0,t.jsx)("span",{className:"text-base font-extrabold text-zinc-900 transition-colors dark:text-white",children:s.membersCount}),e[43]=s.membersCount,e[44]=N):N=e[44];let B;e[45]===Symbol.for("react.memo_cache_sentinel")?(B=(0,t.jsx)("span",{className:"font-medium text-zinc-500 dark:text-zinc-400",children:"Members"}),e[45]=B):B=e[45];let y;e[46]!==N?(y=(0,t.jsxs)("button",{className:"group flex cursor-pointer items-baseline gap-x-1.5",children:[N,B]}),e[46]=N,e[47]=y):y=e[47];let _;e[48]!==s.postsCount?(_=(0,t.jsx)("span",{className:"text-base font-extrabold text-zinc-900 transition-colors dark:text-white",children:s.postsCount}),e[48]=s.postsCount,e[49]=_):_=e[49];let L;e[50]===Symbol.for("react.memo_cache_sentinel")?(L=(0,t.jsx)("span",{className:"font-medium text-zinc-500 dark:text-zinc-400",children:"Posts"}),e[50]=L):L=e[50];let C;e[51]!==_?(C=(0,t.jsxs)("button",{className:"group flex cursor-pointer items-baseline gap-x-1.5",children:[_,L]}),e[51]=_,e[52]=C):C=e[52];let w;e[53]!==y||e[54]!==C?(w=(0,t.jsxs)("div",{className:"relative z-10 flex gap-4 pt-2 text-sm sm:gap-6",children:[y,C]}),e[53]=y,e[54]=C,e[55]=w):w=e[55];let M;e[56]!==v||e[57]!==z||e[58]!==k||e[59]!==w?(M=(0,t.jsxs)("div",{className:"space-y-1",children:[v,z,k,w]}),e[56]=v,e[57]=z,e[58]=k,e[59]=w,e[60]=M):M=e[60];let S;e[61]!==g||e[62]!==M?(S=(0,t.jsxs)("div",{className:"px-4 pb-6",children:[g,M]}),e[61]=g,e[62]=M,e[63]=S):S=e[63];let P;e[64]!==S||e[65]!==f?(P=(0,t.jsxs)("div",{className:"relative",children:[f,S]}),e[64]=S,e[65]=f,e[66]=P):P=e[66];let F;e[67]!==ie||e[68]!==s||e[69]!==l?.avatar||e[70]!==l?.handle||e[71]!==G?(F=ie&&(0,t.jsx)("div",{className:"border-b border-zinc-100 p-4 dark:border-zinc-800",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)(Se,{className:"size-10 border border-zinc-200 dark:border-zinc-800",children:[(0,t.jsx)(Ne,{src:l?.avatar,alt:l?.handle,className:"object-cover"}),(0,t.jsx)(Ce,{children:l?.handle?.[0]?.toUpperCase()})]}),(0,t.jsxs)("button",{onClick:()=>G(s),className:"flex-1 rounded-2xl bg-zinc-100 px-5 py-3 text-left text-[15px] font-medium text-zinc-500 transition-all hover:bg-zinc-200/70 dark:bg-zinc-900/50 dark:hover:bg-zinc-900",children:["Share something in ",s.name,"..."]})]})}),e[67]=ie,e[68]=s,e[69]=l?.avatar,e[70]=l?.handle,e[71]=G,e[72]=F):F=e[72];let I;e[73]!==s.name||e[74]!==J||e[75]!==l||e[76]!==Z||e[77]!==Y||e[78]!==te||e[79]!==X||e[80]!==r?(I=X?(0,t.jsx)("div",{className:"flex flex-col",children:[1,2,3].map($e)}):J.length>0?(0,t.jsxs)(t.Fragment,{children:[J.map(i=>(0,t.jsx)(Fe,{currentUser:l,...i,onClick:()=>r(`/p/${i.id}`),onUserClick:he=>r(`/u/${he}`)},i.feed_id||i.id)),Z&&(0,t.jsxs)("div",{className:"flex justify-center p-6",children:[(0,t.jsx)(ce,{variant:"secondary",className:"w-full max-w-xs",onClick:()=>te(),loading:Y,children:"Load more"})," "]})]}):(0,t.jsxs)("div",{className:"flex flex-col items-center gap-4 p-20 text-center text-zinc-500",children:[(0,t.jsx)("div",{className:"mb-2 rounded-full bg-zinc-50 p-6 dark:bg-zinc-900",children:(0,t.jsx)(oe,{size:40,className:"text-zinc-300"})}),(0,t.jsx)("h3",{className:"text-xl font-bold dark:text-white",children:"No posts here yet"}),(0,t.jsxs)("p",{className:"text-sm max-w-[250px]",children:["Be the first to share something in ",s.name,"!"]})]}),e[73]=s.name,e[74]=J,e[75]=l,e[76]=Z,e[77]=Y,e[78]=te,e[79]=X,e[80]=r,e[81]=I):I=e[81];let E;e[82]!==F||e[83]!==I?(E=(0,t.jsxs)("div",{className:"border-t border-zinc-100 dark:border-zinc-800",children:[F,I]}),e[82]=F,e[83]=I,e[84]=E):E=e[84];let O;e[85]!==P||e[86]!==E||e[87]!==x?(O=(0,t.jsxs)("div",{className:"relative",children:[x,P,E]}),e[85]=P,e[86]=E,e[87]=x,e[88]=O):O=e[88];let R;e[89]===Symbol.for("react.memo_cache_sentinel")?(R=()=>ae(!1),e[89]=R):R=e[89];let $;e[90]!==se?($=()=>{se()},e[90]=se,e[91]=$):$=e[91];let A;e[92]!==s||e[93]!==H||e[94]!==$?(A=(0,t.jsx)(_e,{isOpen:H,onClose:R,community:s,onUpdate:$}),e[92]=s,e[93]=H,e[94]=$,e[95]=A):A=e[95];let V;e[96]===Symbol.for("react.memo_cache_sentinel")?(V=()=>ne(!1),e[96]=V):V=e[96];let U;e[97]!==s||e[98]!==K?(U=(0,t.jsx)(Me,{isOpen:K,onClose:V,community:s}),e[97]=s,e[98]=K,e[99]=U):U=e[99];let W;return e[100]!==O||e[101]!==A||e[102]!==U?(W=(0,t.jsxs)("div",{className:"min-h-screen overflow-hidden rounded-none border-zinc-100 bg-white pb-20 dark:border-zinc-800 dark:bg-black md:rounded-xl",children:[O,A,U]}),e[100]=O,e[101]=A,e[102]=U,e[103]=W):W=e[103],W},Ge=Oe;function $e(D){return(0,t.jsx)(Pe,{},D)}export{Ge as default};

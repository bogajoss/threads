import{a as H}from"./rolldown-runtime-BaZ8gS7u.js";import{_ as K,c as O,l as Q,w as Y}from"./framework-3lkjbTvb.js";import"./database-COznt_u0.js";import{Mt as Z,jt as ee,lr as te,or as le,vr as re}from"./ui-libs-DpmYaI0v.js";import"./media-libs-C98UjHPF.js";import{nn as ae,s as se,tn as oe,z as F}from"./index-1LD6I27G.js";import{n as G,t as ie}from"./post-ByJQUc_z.js";import"./text-processing-BMF44JzJ.js";import"./VideoPlayer-C1UegyxA.js";import"./actionsheet-D0D3ebGv.js";var ne=O(),w=H(Y(),1),l=H(Q(),1),ce=()=>{const e=(0,ne.c)(53),t=K(),U=(0,w.useRef)(t.pathname);let g;e[0]!==t.pathname?(g=()=>{const r=U.current,a=t.pathname,X=ue;X(r)&&!X(a)&&(document.querySelectorAll(".plyr").forEach(me),document.querySelectorAll("video").forEach(fe),G()),U.current=a},e[0]=t.pathname,e[1]=g):g=e[1];let k;e[2]!==t?(k=[t],e[2]=t,e[3]=k):k=e[3],(0,w.useEffect)(g,k);let j;e[4]===Symbol.for("react.memo_cache_sentinel")?(j=[],e[4]=j):j=e[4],(0,w.useEffect)(be,j);const{reels:o,loading:J,loadingMore:C,activeReelId:_,volume:s,setVolume:M,containerRef:L,setReelRef:V,navigate:W,scrollToNext:I,scrollToPrev:P}=se(),[$,N]=(0,w.useState)(!1),i=(0,w.useRef)(null);let S;e[5]!==W?(S=()=>{document.querySelectorAll(".plyr").forEach(xe),document.querySelectorAll("video").forEach(ye),G(),W(-1)},e[5]=W,e[6]=S):S=e[6];const n=S;let R;e[7]===Symbol.for("react.memo_cache_sentinel")?(R=r=>{r?.type==="click"?N(ve):N(!0),i.current&&clearTimeout(i.current),i.current=setTimeout(()=>N(!1),4e3)},e[7]=R):R=e[7];const B=R;if(J){let r;return e[8]===Symbol.for("react.memo_cache_sentinel")?(r=(0,l.jsx)("div",{className:"flex h-[100dvh] w-full items-center justify-center bg-black",children:(0,l.jsx)(F,{})}),e[8]=r):r=e[8],r}if(o.length===0){let r;e[9]===Symbol.for("react.memo_cache_sentinel")?(r=(0,l.jsx)("p",{className:"text-zinc-500",children:"No reels found."}),e[9]=r):r=e[9];let a;return e[10]!==n?(a=(0,l.jsxs)("div",{className:"flex h-[100dvh] w-full flex-col items-center justify-center gap-4 bg-black text-white",children:[r,(0,l.jsx)("button",{onClick:n,className:"rounded-full bg-white px-4 py-2 text-sm font-bold text-black",children:"Go Back"})]}),e[10]=n,e[11]=a):a=e[11],a}let T;e[12]===Symbol.for("react.memo_cache_sentinel")?(T=(0,l.jsx)(re,{size:24,strokeWidth:2.5}),e[12]=T):T=e[12];let c;e[13]!==n?(c=(0,l.jsx)("button",{onClick:n,className:"absolute left-6 top-[max(1.5rem,env(safe-area-inset-top)+1.5rem)] z-50 rounded-full border border-white/10 bg-black/20 p-2.5 text-white shadow-xl backdrop-blur-md transition-all hover:bg-black/40 active:scale-90",title:"Back",children:T}),e[13]=n,e[14]=c):c=e[14];let E;e[15]===Symbol.for("react.memo_cache_sentinel")?(E=()=>B(),e[15]=E):E=e[15];let u;e[16]!==s?(u=(0,l.jsx)("button",{onClick:B,onMouseEnter:E,className:"rounded-full border border-white/10 bg-black/20 p-2.5 text-white shadow-xl backdrop-blur-md transition-all hover:bg-black/40 active:scale-90",title:"Volume",children:s===0?(0,l.jsx)(ee,{size:24,strokeWidth:2.5}):(0,l.jsx)(Z,{size:24,strokeWidth:2.5})}),e[16]=s,e[17]=u):u=e[17];let m;e[18]!==M||e[19]!==$||e[20]!==s?(m=$&&(0,l.jsx)(oe.div,{initial:{opacity:0,y:10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.95},onMouseEnter:()=>{i.current&&clearTimeout(i.current)},onMouseLeave:()=>{i.current=setTimeout(()=>N(!1),2e3)},className:"flex h-32 w-10 items-center justify-center rounded-full border border-white/10 bg-black/20 p-2 shadow-xl backdrop-blur-md",children:(0,l.jsx)("input",{type:"range",min:"0",max:"100",value:s*100,onChange:r=>{M(Number(r.target.value)/100),B()},className:"h-24 w-1 cursor-pointer appearance-none rounded-lg bg-white/20 accent-white transition-all hover:bg-white/30",style:{writingMode:"vertical-lr",direction:"rtl",WebkitAppearance:"slider-vertical"}})}),e[18]=M,e[19]=$,e[20]=s,e[21]=m):m=e[21];let f;e[22]!==m?(f=(0,l.jsx)(ae,{children:m}),e[22]=m,e[23]=f):f=e[23];let d;e[24]!==f||e[25]!==u?(d=(0,l.jsxs)("div",{className:"absolute right-6 top-[max(1.5rem,env(safe-area-inset-top)+1.5rem)] z-50 flex flex-col items-center gap-2",children:[u,f]}),e[24]=f,e[25]=u,e[26]=d):d=e[26];let z;e[27]===Symbol.for("react.memo_cache_sentinel")?(z=(0,l.jsx)(le,{size:28,strokeWidth:3,className:"transition-transform group-hover:-translate-y-0.5"}),e[27]=z):z=e[27];let p;e[28]!==P?(p=(0,l.jsx)("button",{onClick:P,className:"group rounded-full border border-white/10 bg-black/20 p-3 text-white shadow-xl backdrop-blur-md transition-all hover:bg-black/40 active:scale-90",title:"Previous Reel",children:z}),e[28]=P,e[29]=p):p=e[29];let A;e[30]===Symbol.for("react.memo_cache_sentinel")?(A=(0,l.jsx)(te,{size:28,strokeWidth:3,className:"transition-transform group-hover:translate-y-0.5"}),e[30]=A):A=e[30];let h;e[31]!==I?(h=(0,l.jsx)("button",{onClick:I,className:"group rounded-full border border-white/10 bg-black/20 p-3 text-white shadow-xl backdrop-blur-md transition-all hover:bg-black/40 active:scale-90",title:"Next Reel",children:A}),e[31]=I,e[32]=h):h=e[32];let b;e[33]!==p||e[34]!==h?(b=(0,l.jsxs)("div",{className:"absolute right-6 top-1/2 z-50 hidden -translate-y-1/2 flex-col gap-4 md:flex",children:[p,h]}),e[33]=p,e[34]=h,e[35]=b):b=e[35];const D=_||"reels-container";let x;e[36]!==_||e[37]!==o||e[38]!==V||e[39]!==s?(x=o.map(r=>(0,l.jsx)("div",{ref:a=>V(r.id,a),"data-id":r.id,className:"snap-start snap-always h-full w-full",children:(0,l.jsx)(ie,{reel:r,isActive:_===r.id,volume:s,shouldLoad:Math.abs(o.findIndex(a=>a.id===_)-o.findIndex(a=>a.id===r.id))<=1})},r.feed_id||r.id)),e[36]=_,e[37]=o,e[38]=V,e[39]=s,e[40]=x):x=e[40];let y;e[41]!==C?(y=C&&(0,l.jsx)("div",{className:"flex h-[100dvh] w-full snap-start items-center justify-center bg-black",children:(0,l.jsx)(F,{})}),e[41]=C,e[42]=y):y=e[42];let v;e[43]!==L||e[44]!==D||e[45]!==x||e[46]!==y?(v=(0,l.jsxs)("div",{ref:L,className:"no-scrollbar h-full w-full snap-y snap-mandatory overflow-y-auto",children:[x,y]},D),e[43]=L,e[44]=D,e[45]=x,e[46]=y,e[47]=v):v=e[47];let q;return e[48]!==d||e[49]!==b||e[50]!==v||e[51]!==c?(q=(0,l.jsxs)("div",{className:"relative h-[100dvh] w-full overflow-hidden bg-black md:rounded-xl",children:[c,d,b,v]}),e[48]=d,e[49]=b,e[50]=v,e[51]=c,e[52]=q):q=e[52],q},ze=ce;function ue(e){return e.startsWith("/r")}function me(e){const t=e.plyr;t&&typeof t.pause=="function"&&(t.pause(),t.currentTime=0,t.muted=!0)}function fe(e){e.paused||(e.pause(),e.currentTime=0)}function de(e){const t=e.plyr;t&&typeof t.pause=="function"&&(t.pause(),t.currentTime=0,t.muted=!0)}function pe(e){e.paused||(e.pause(),e.currentTime=0)}function he(){document.querySelectorAll(".plyr").forEach(de),document.querySelectorAll("video").forEach(pe),G()}function be(){return he}function xe(e){const t=e.plyr;t&&typeof t.pause=="function"&&(t.pause(),t.currentTime=0,t.muted=!0)}function ye(e){e.paused||(e.pause(),e.currentTime=0)}function ve(e){return!e}export{ze as default};
